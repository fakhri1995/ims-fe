{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _Table from \"antd/lib/table\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/tmp/mig/ims-fe/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _Tabs from \"antd/lib/tabs\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport DeleteOutlined from \"@ant-design/icons/DeleteOutlined\";\nimport EditOutlined from \"@ant-design/icons/EditOutlined\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\n\nfunction Contracts(_ref) {\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      dataContracts = _ref.dataContracts,\n      sidemenu = _ref.sidemenu;\n  var rt = useRouter();\n  var tok = initProps;\n  var pathArr = rt.pathname.split(\"/\").slice(1); // const pathArr = ['admin', 'contracts']\n  // const { originPath } = rt.query\n\n  var TabPane = _Tabs.TabPane; // console.log(dataContracts)\n  //--------hook modal delete contracts-------------\n\n  var _useState = useState({\n    istrue: false,\n    key: null,\n    nomor_kontrak: \"\"\n  }),\n      warningDelete = _useState[0],\n      setWarningDelete = _useState[1];\n\n  var onClickModalDeleteContract = function onClickModalDeleteContract(istrue, record) {\n    var _objectSpread2;\n\n    setWarningDelete(_objectSpread(_objectSpread({}, warningDelete), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, \"istrue\", istrue), _defineProperty(_objectSpread2, \"key\", record.key), _defineProperty(_objectSpread2, \"nomor_kontrak\", record.nomor_kontrak), _objectSpread2)));\n  };\n\n  var _useState2 = useState(false),\n      modaldelete = _useState2[0],\n      setmodaldelete = _useState2[1]; //-------------------------------------------\n  //------------get data contracts-------------------\n\n\n  var contracts;\n\n  if (dataContracts.data == null) {\n    console.log(\"nodata\");\n    contracts = [];\n  } else {\n    contracts = dataContracts.data.map(function (doc, idx) {\n      return {\n        idx: idx,\n        key: doc.id,\n        id: doc.id,\n        id_client_company: doc.id_client_company,\n        id_tipe_kontrak: doc.id_tipe_kontrak,\n        nomor_kontrak: doc.nomor_kontrak,\n        tanggal_mulai: doc.tanggal_mulai,\n        tanggal_selesai: doc.tanggal_selesai,\n        is_active: doc.is_active\n      };\n    });\n  } //------------------------------------------------\n  //------------------handle delete contract-------------------\n\n\n  var handleDeleteContract = function handleDeleteContract(key) {\n    setmodaldelete(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/deleteContract?id=\").concat(key), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: key\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setmodaldelete(false);\n\n      if (res2.success) {\n        setWarningDelete(false, null);\n\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(function () {\n          rt.push(\"/admin/contracts\");\n        }, 500);\n      } else if (!res2.success) {\n        setWarningDelete(false, null);\n\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //---------------------------------------------------------\n  //------------------------kolom table----------------------\n\n\n  var columnsDD = [{\n    title: \"No\",\n    dataIndex: \"idx\",\n    key: \"idx\",\n    width: 10,\n    render: function render(text, record) {\n      return {\n        props: {\n          style: {\n            background: record.idx % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: record.idx + 1\n        })\n      };\n    }\n  }, // {\n  //     title: 'Company ID',\n  //     dataIndex: 'id_client_company',\n  //     key: 'id_client_company',\n  //     width: 50,\n  //     render(text, record) {\n  //         return {\n  //             props: {\n  //                 style: { background: record.idx % 2 == 1 ? '#f2f2f2' : '#fff' },\n  //             },\n  //             children: <div><Link href={{\n  //                 pathname: `/inventories/${record.key}`,\n  //                 query: {\n  //                     originPath: 'Admin'\n  //                 }\n  //             }}><a>{record.id_client_company}</a></Link>\n  //             </div>,\n  //         };\n  //     },\n  // },\n  // {\n  //     title: 'Tipe Kontrak ID',\n  //     dataIndex: 'id_tipe_kontrak',\n  //     key: 'id_tipe_kontrak',\n  //     width: 50,\n  //     render(text, record) {\n  //         return {\n  //             props: {\n  //                 style: { background: record.idx % 2 == 1 ? '#f2f2f2' : '#fff' },\n  //             },\n  //             children: <div>{record.id_tipe_kontrak}\n  //             </div>,\n  //         };\n  //     },\n  // },\n  {\n    title: \"Nomor Kontrak\",\n    dataIndex: \"nomor_kontrak\",\n    key: \"nomor_kontrak\",\n    width: 200,\n    render: function render(text, record) {\n      return {\n        props: {\n          style: {\n            background: record.idx % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(Link, {\n              href: {\n                pathname: \"/admin/contracts/\".concat(record.key)\n              },\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: record.nomor_kontrak\n              })\n            })\n          })\n        })\n      };\n    }\n  }, {\n    title: \"Status\",\n    dataIndex: \"is_active\",\n    key: \"is_active\",\n    width: 50,\n    align: \"center\",\n    render: function render(text, record) {\n      return {\n        props: {\n          style: {\n            background: record.idx % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.is_active ? /*#__PURE__*/_jsx(\"div\", {\n            className: \"p-1 rounded-md text-white border border-green-500 bg-green-500 text-center text-xs\",\n            children: \"Active\"\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            className: \"p-1 rounded-md text-white border border-gray-500 bg-gray-500 text-center text-xs\",\n            children: \"Terminated\"\n          })\n        })\n      };\n    }\n  }, {\n    title: \"Tanggal Mulai\",\n    dataIndex: \"tanggal_mulai\",\n    key: \"tanggal_mulai\",\n    width: 50,\n    render: function render(text, record) {\n      return {\n        props: {\n          style: {\n            background: record.idx % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: record.tanggal_mulai\n        })\n      };\n    }\n  }, {\n    title: \"Tanggal Selesai\",\n    dataIndex: \"tanggal_selesai\",\n    key: \"tanggal_selesai\",\n    width: 150,\n    render: function render(text, record) {\n      return {\n        props: {\n          style: {\n            background: record.idx % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: record.tanggal_selesai\n        })\n      };\n    }\n  }, {\n    title: \"\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\",\n    // Non-breakable space is char 0xa0 (160 dec)\n    dataIndex: \"actionss\",\n    key: \"action\",\n    width: 50,\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            background: record.idx % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(_Button, {\n            children: /*#__PURE__*/_jsx(Link, {\n              href: {\n                pathname: \"/admin/contracts/update/\".concat(record.key)\n              },\n              children: /*#__PURE__*/_jsx(EditOutlined, {})\n            })\n          })\n        })\n      };\n    }\n  }, {\n    title: \"\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\",\n    // Non-breakable space is char 0xa0 (160 dec)\n    dataIndex: \"actionss\",\n    key: \"action\",\n    width: 100,\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            background: record.idx % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(_Button, {\n            onClick: function onClick() {\n              onClickModalDeleteContract(true, record);\n            },\n            children: /*#__PURE__*/_jsx(\"a\", {\n              children: /*#__PURE__*/_jsx(DeleteOutlined, {})\n            })\n          })\n        })\n      };\n    }\n  }]; //------------------------------------------------------------------------\n\n  return /*#__PURE__*/_jsx(Layout, {\n    tok: tok,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    sidemenu: sidemenu\n    /*originPath={originPath}*/\n    ,\n    st: st,\n    children: /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \" col-span-1 md:col-span-4 flex flex-col\",\n          id: \"formAgentsWrapper\",\n          children: [/*#__PURE__*/_jsx(Sticky, {\n            containerSelectorFocus: \"#formAgentsWrapper\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex justify-between p-4 border-gray-400 border-t border-b bg-white mb-8\",\n              children: [/*#__PURE__*/_jsx(\"h1\", {\n                className: \"font-semibold text-base w-auto pt-2\",\n                children: \"Contracts\"\n              }),\n              /*#__PURE__*/\n              // [196].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n              _jsx(\"div\", {\n                className: \"flex space-x-2\",\n                children: /*#__PURE__*/_jsx(Link, {\n                  href: \"/admin/contracts/create\",\n                  children: /*#__PURE__*/_jsx(_Button, {\n                    type: \"primary\",\n                    size: \"large\",\n                    children: \"Add New\"\n                  })\n                })\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-span-3 flex flex-col space-y-3\",\n            children: /*#__PURE__*/_jsx(_Table, {\n              scroll: {\n                x: 400\n              },\n              dataSource: contracts,\n              columns: columnsDD,\n              onRow: function onRow(record, rowIndex) {}\n            })\n          }), /*#__PURE__*/_jsxs(_Modal, {\n            title: \"Konfirmasi untuk menghapus grup\",\n            visible: warningDelete.istrue,\n            onOk: function onOk() {\n              handleDeleteContract(warningDelete.key);\n            },\n            onCancel: function onCancel() {\n              return setWarningDelete(false, null);\n            },\n            okButtonProps: {\n              disabled: modaldelete\n            },\n            children: [\"Apakah anda yakin ingin menghapus kontrak\", \" \", /*#__PURE__*/_jsx(\"strong\", {\n              children: warningDelete.nomor_kontrak\n            }), \"?\"]\n          })]\n        })\n      })\n    })\n  });\n}\n\nexport var __N_SSP = true;\nexport default Contracts;","map":null,"metadata":{},"sourceType":"module"}