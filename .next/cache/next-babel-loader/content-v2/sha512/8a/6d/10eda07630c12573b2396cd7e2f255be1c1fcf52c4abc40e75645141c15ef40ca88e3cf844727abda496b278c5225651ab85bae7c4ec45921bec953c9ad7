{"ast":null,"code":"import _DatePicker from \"antd/lib/date-picker\";\nimport _Radio from \"antd/lib/radio\";\nimport _toConsumableArray from \"/tmp/mig/ims-fe/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _Switch from \"antd/lib/switch\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Select from \"antd/lib/select\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/tmp/mig/ims-fe/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport ButtonSys from \"../../button\";\nimport { AssetIconSvg, CalendartimeIconSvg, CircleXIconSvg, UserIconSvg } from \"../../icon\";\nimport { InputRequired, TextAreaNotRequired } from \"../../input\";\nimport { H1, H2, Label } from \"../../typography\";\nimport DrawerCore from \"../drawerCore\";\n\nfunction recursiveModifData(dataa) {\n  for (var i = 0; i < dataa.length; i++) {\n    dataa[i][\"key\"] = dataa[i].id;\n    dataa[i][\"value\"] = dataa[i].id;\n    dataa[i][\"title\"] = dataa[i].name;\n\n    if (dataa[i].children) {\n      recursiveModifData(dataa[i].children);\n    }\n  }\n\n  return dataa;\n}\n\nvar DrawerTaskUpdate = function DrawerTaskUpdate(_ref) {\n  var title = _ref.title,\n      visible = _ref.visible,\n      onvisible = _ref.onvisible,\n      onClose = _ref.onClose,\n      buttonOkText = _ref.buttonOkText,\n      disabled = _ref.disabled,\n      initProps = _ref.initProps,\n      dataupdate = _ref.dataupdate,\n      setdataupdate = _ref.setdataupdate,\n      loading = _ref.loading,\n      selecteditems = _ref.selecteditems,\n      setselecteditems = _ref.setselecteditems,\n      selectedstaffgroup = _ref.selectedstaffgroup,\n      setselectedstaffgroup = _ref.setselectedstaffgroup,\n      switchstaffgroup = _ref.switchstaffgroup,\n      setswitchstaffgroup = _ref.setswitchstaffgroup,\n      now = _ref.now,\n      setnow = _ref.setnow,\n      choosedate = _ref.choosedate,\n      setchoosedate = _ref.setchoosedate,\n      nowend = _ref.nowend,\n      setnowend = _ref.setnowend,\n      choosedateend = _ref.choosedateend,\n      setchoosedateend = _ref.setchoosedateend,\n      repeatable = _ref.repeatable,\n      setrepeatable = _ref.setrepeatable,\n      regular = _ref.regular,\n      setregular = _ref.setregular,\n      choosedateendrepeat = _ref.choosedateendrepeat,\n      setchoosedateendrepeat = _ref.setchoosedateendrepeat,\n      prevpath = _ref.prevpath,\n      idsubloc = _ref.idsubloc,\n      setidsubloc = _ref.setidsubloc,\n      setrefreshdefaultupdatetask = _ref.setrefreshdefaultupdatetask;\n\n  //USESTATE\n  var _useState = useState(false),\n      loadingupdate = _useState[0],\n      setloadingupdate = _useState[1];\n\n  var _useState2 = useState(true),\n      disabledupdate = _useState2[0],\n      setdisabledupdate = _useState2[1];\n\n  var _useState3 = useState(-1),\n      disabledtrigger = _useState3[0],\n      setdisabledtrigger = _useState3[1]; //task types\n\n\n  var _useState4 = useState([]),\n      datatasktypes = _useState4[0],\n      setdatatasktypes = _useState4[1];\n\n  var _useState5 = useState(false),\n      fetchingtasktypes = _useState5[0],\n      setfetchingtasktypes = _useState5[1]; //references\n\n\n  var _useState6 = useState([]),\n      datareferences = _useState6[0],\n      setdatareferences = _useState6[1];\n\n  var _useState7 = useState(false),\n      fetchingreferences = _useState7[0],\n      setfetchingreferences = _useState7[1]; //locations\n\n\n  var _useState8 = useState([]),\n      datalocations = _useState8[0],\n      setdatalocations = _useState8[1];\n\n  var _useState9 = useState([]),\n      datasublocs = _useState9[0],\n      setdatasublocs = _useState9[1];\n\n  var _useState10 = useState(false),\n      fetchinglocations = _useState10[0],\n      setfetchinglocations = _useState10[1];\n\n  var _useState11 = useState(-1),\n      triggersubloc = _useState11[0],\n      settriggersubloc = _useState11[1];\n\n  var _useState12 = useState(null),\n      selectedsubloc = _useState12[0],\n      setselectedsubloc = _useState12[1]; //items\n\n\n  var _useState13 = useState([]),\n      dataitems = _useState13[0],\n      setdataitems = _useState13[1];\n\n  var _useState14 = useState(false),\n      fetchingitems = _useState14[0],\n      setfetchingitems = _useState14[1]; //staff/group\n\n\n  var _useState15 = useState([]),\n      datastaffgroup = _useState15[0],\n      setdatastaffgroup = _useState15[1];\n\n  var _useState16 = useState(false),\n      fetchingstaffgroup = _useState16[0],\n      setfetchingstaffgroup = _useState16[1]; //end date\n  //HANDLER\n\n\n  var handleUpdateTask = function handleUpdateTask() {\n    var finaldata = _objectSpread(_objectSpread({}, dataupdate), {}, {\n      location_id: dataupdate.subloc_id === null ? dataupdate.location_id : dataupdate.subloc_id\n    });\n\n    setloadingupdate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/updateTask\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(finaldata)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingupdate(false);\n\n      if (res2.success) {\n        onvisible(false);\n\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setdataupdate({\n          id: \"\",\n          name: \"\",\n          description: \"\",\n          location_id: null,\n          reference_id: null,\n          created_at: moment(new Date()).locale(\"id\").format(),\n          deadline: moment(new Date()).add(3, \"h\").locale(\"id\").format(),\n          is_group: null,\n          is_replaceable: false,\n          assign_ids: [],\n          inventory_ids: [],\n          is_uploadable: false,\n          repeat: 0,\n          files: [],\n          end_repeat_at: null,\n          subloc_id: null\n        });\n        setdataitems([]);\n        setdatastaffgroup([]);\n        window.location.href = \"/tasks/detail/\".concat(dataupdate.id).concat(prevpath && \"?prevpath=\".concat(prevpath));\n      } else {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //USEEFFECT\n  //Tipe task\n\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterTaskTypes\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var modif = recursiveModifData(res2.data);\n      setdatatasktypes(modif);\n    });\n  }, []); //Referensi\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterTickets\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatareferences(res2.data);\n    });\n  }, []); //Lokasi\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAllCompanyList\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatalocations(res2.data.children);\n    });\n  }, []); //Sublokasi\n\n  useEffect(function () {\n    if (triggersubloc !== -1) {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getSubLocations?company_id=\").concat(idsubloc), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setdatasublocs(res2.data.children);\n      });\n    }\n  }, [triggersubloc]); //Items\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterInventories\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdataitems(res2.data);\n    });\n  }, []); //Staff/group\n\n  useEffect(function () {\n    if (switchstaffgroup !== -1) {\n      if (switchstaffgroup === 0) {\n        fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterGroups\"), {\n          method: \"GET\",\n          headers: {\n            Authorization: JSON.parse(initProps)\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (res2) {\n          setdatastaffgroup(res2.data);\n        });\n      } else if (switchstaffgroup === 1) {\n        fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterUsers?type=\", 1), {\n          method: \"GET\",\n          headers: {\n            Authorization: JSON.parse(initProps)\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (res2) {\n          setdatastaffgroup(res2.data);\n        });\n      }\n    }\n  }, [switchstaffgroup]);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterGroups\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatastaffgroup(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterUsers?type=\", 1), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatastaffgroup(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    if (dataupdate.task_type_id !== null && dataupdate.name !== \"\" && dataupdate.location_id !== null && dataupdate.created_at !== null && dataupdate.deadline !== null && dataupdate.repeat !== -1) {\n      setdisabledupdate(false);\n    } else {\n      setdisabledupdate(true);\n    }\n  }, [disabledtrigger]);\n  return /*#__PURE__*/_jsx(DrawerCore, {\n    title: title,\n    visible: visible,\n    onClose: function onClose() {\n      setrefreshdefaultupdatetask(function (prev) {\n        return prev + 1;\n      });\n      onvisible(false);\n    },\n    buttonOkText: buttonOkText,\n    onClick: handleUpdateTask,\n    disabled: disabledupdate,\n    children: loading ? /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        id: \"card-1\",\n        className: \" flex justify-center\",\n        children: /*#__PURE__*/_jsx(_Spin, {})\n      })\n    }) : /*#__PURE__*/_jsx(_Spin, {\n      spinning: loadingupdate,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mb-6\",\n          children: /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-red-500 text-xs italic\",\n            children: \"*Informasi ini harus diisi\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mb-6 flex px-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \" w-6/12 mr-2 flex flex-col\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-3731164580\" + \" \" + \"flex mb-2\",\n              children: [/*#__PURE__*/_jsx(Label, {\n                children: \"Tipe Task\"\n              }), /*#__PURE__*/_jsx(\"span\", {\n                className: \"jsx-3731164580\" + \" \" + \"tasktype\"\n              }), /*#__PURE__*/_jsx(_JSXStyle, {\n                id: \"3731164580\",\n                children: [\".tasktype.jsx-3731164580::before{content:'*';color:red;}\"]\n              })]\n            }), /*#__PURE__*/_jsx(_Select, {\n              suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n              disabled: true,\n              showArrow: true,\n              name: \"task_type_id\",\n              value: dataupdate.task_type_id,\n              onChange: function onChange(value) {\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  task_type_id: value\n                }));\n                setdisabledtrigger(function (prev) {\n                  return prev + 1;\n                });\n              },\n              children: datatasktypes.map(function (doc, idx) {\n                return /*#__PURE__*/_jsx(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, idx);\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-6/12 ml-2 flex flex-col justify-center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-2 text-center\",\n              children: /*#__PURE__*/_jsx(Label, {\n                children: \"No. Task (dibuat otomatis)\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"w-full text-center\",\n              children: /*#__PURE__*/_jsxs(H1, {\n                children: [\"T-000\", dataupdate.id]\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(0),\n          className: \"mb-5 flex flex-col px-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-1032196184\" + \" \" + \"flex mb-1\",\n            children: [/*#__PURE__*/_jsx(Label, {\n              children: \"Referensi\"\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-1032196184\" + \" \" + \"tasktype\"\n            }), /*#__PURE__*/_jsx(_JSXStyle, {\n              id: \"1032196184\",\n              children: [\".tasktype.jsx-1032196184::before{content:'*';color:red;}\"]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"w-full\",\n            children: /*#__PURE__*/_jsx(_Select, {\n              style: {\n                width: \"100%\"\n              },\n              suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n              showArrow: true,\n              value: dataupdate.reference_id,\n              placeholder: \"Referensi\",\n              name: \"reference_id\",\n              onChange: function onChange(value) {\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  reference_id: value\n                }));\n              },\n              showSearch: true,\n              optionFilterProp: \"children\",\n              notFoundContent: fetchingreferences ? /*#__PURE__*/_jsx(_Spin, {\n                size: \"small\"\n              }) : null,\n              onSearch: function onSearch(value) {\n                setfetchingreferences(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterTickets?id=\").concat(value), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdatareferences(res2.data);\n                  setfetchingreferences(false);\n                });\n              },\n              filterOption: function filterOption(input, opt) {\n                return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n              },\n              children: datareferences.map(function (doc, idx) {\n                return /*#__PURE__*/_jsx(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, idx);\n              })\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          id: \"card\".concat(1),\n          children: /*#__PURE__*/_jsx(InputRequired, {\n            value: dataupdate.name,\n            label: \"Judul Task\",\n            onChangeInput: function onChangeInput(e) {\n              setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                name: e.target.value\n              }));\n              setdisabledtrigger(function (prev) {\n                return prev + 1;\n              });\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          id: \"card\".concat(2),\n          children: /*#__PURE__*/_jsx(TextAreaNotRequired, {\n            value: dataupdate.description,\n            rows: 4,\n            label: \"Deskripsi Task\",\n            onChangeInput: function onChangeInput(e) {\n              setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                description: e.target.value\n              }));\n            }\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(3),\n          className: \"mb-6 px-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-4017237294\" + \" \" + \"flex mb-2\",\n            children: [/*#__PURE__*/_jsx(Label, {\n              children: \"Lokasi\"\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-4017237294\" + \" \" + \"locations\"\n            }), /*#__PURE__*/_jsx(_JSXStyle, {\n              id: \"4017237294\",\n              children: [\".locations.jsx-4017237294::before{content:'*';color:red;}\"]\n            })]\n          }), /*#__PURE__*/_jsx(_TreeSelect, {\n            allowClear: true,\n            placeholder: \"Cari Lokasi\",\n            showSearch: true,\n            suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n            showArrow: true,\n            name: \"locations_id\",\n            onChange: function onChange(value) {\n              typeof value === \"undefined\" ? setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                location_id: null,\n                subloc_id: null\n              })) : (setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                location_id: value\n              })), setidsubloc(value), settriggersubloc(function (prev) {\n                return prev + 1;\n              }));\n              setdisabledtrigger(function (prev) {\n                return prev + 1;\n              });\n            },\n            treeData: datalocations,\n            treeDefaultExpandAll: true,\n            value: dataupdate.location_id\n          })]\n        }), dataupdate.location_id !== null ? /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(4),\n          className: \"mb-6 px-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"flex mb-2\",\n            children: /*#__PURE__*/_jsx(Label, {\n              children: \"Sublokasi\"\n            })\n          }), /*#__PURE__*/_jsx(_TreeSelect, {\n            allowClear: true,\n            placeholder: \"Cari Sublokasi\",\n            showSearch: true,\n            suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n            showArrow: true,\n            name: \"locations_id\",\n            onChange: function onChange(value) {\n              typeof value === \"undefined\" ? setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                subloc_id: null\n              })) : setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                subloc_id: value\n              }));\n            },\n            treeData: datasublocs,\n            treeDefaultExpandAll: true,\n            value: dataupdate.subloc_id\n          })]\n        }) : null, /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(4),\n          className: \"mb-6 px-3 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(Label, {\n              children: \"Pergantian Suku Cadang\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(_Switch, {\n              checked: dataupdate.is_replaceable,\n              onChange: function onChange(checked) {\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  is_replaceable: checked\n                }));\n              }\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(5),\n          className: \"mb-6 px-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsx(Label, {\n              children: \"Aset\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsx(_Select, {\n              style: {\n                width: \"100%\"\n              },\n              className: \"dontShow\",\n              mode: \"multiple\",\n              suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n              showArrow: true,\n              value: dataupdate.inventory_ids,\n              placeholder: \"Cari MIG ID\",\n              name: \"inventory_ids\",\n              onChange: function onChange(values, options) {\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  inventory_ids: values\n                }));\n                setselecteditems(options);\n                console.log(options);\n              },\n              showSearch: true,\n              optionFilterProp: \"children\",\n              notFoundContent: fetchingitems ? /*#__PURE__*/_jsx(_Spin, {\n                size: \"small\"\n              }) : null,\n              onSearch: function onSearch(value) {\n                setfetchingitems(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterInventories?mig_id=\").concat(value), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdataitems(res2.data);\n                  setfetchingitems(false);\n                });\n              },\n              filterOption: function filterOption(input, opt) {\n                return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n              },\n              children: dataitems.map(function (doc, idx) {\n                return /*#__PURE__*/_jsx(_Select.Option, {\n                  migid: doc.mig_id,\n                  modelname: doc.model_name,\n                  assetname: doc.asset_name,\n                  value: doc.id,\n                  children: doc.mig_id\n                }, idx);\n              })\n            })\n          }), selecteditems.map(function (doc, idx) {\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"mb-2 flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mr-2 flex items-center\",\n                children: /*#__PURE__*/_jsx(AssetIconSvg, {\n                  size: 50\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col justify-center\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"mb-1 flex\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"mr-1\",\n                    children: /*#__PURE__*/_jsx(H2, {\n                      children: doc.modelname\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" cursor-pointer\",\n                    onClick: function onClick() {\n                      var temp = _toConsumableArray(selecteditems);\n\n                      temp.splice(idx, 1);\n                      setselecteditems(temp);\n                      setdataupdate(function (prev) {\n                        return _objectSpread(_objectSpread({}, prev), {}, {\n                          inventory_ids: temp.map(function (docmap) {\n                            return docmap.id;\n                          })\n                        });\n                      });\n                    },\n                    children: /*#__PURE__*/_jsx(CircleXIconSvg, {\n                      size: 15,\n                      color: \"#BF4A40\"\n                    })\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsxs(Label, {\n                    children: [doc.migid, \" / \", doc.assetname]\n                  })\n                })]\n              })]\n            });\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(6),\n          className: \"mb-6 px-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"mb-2 flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(Label, {\n                children: switchstaffgroup === 0 ? \"Group\" : \"Staff\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mr-1\",\n                children: /*#__PURE__*/_jsx(Label, {\n                  children: \"Staff\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mx-1\",\n                children: /*#__PURE__*/_jsx(_Switch, {\n                  defaultChecked: dataupdate.is_group,\n                  onChange: function onChange(checked) {\n                    setswitchstaffgroup(checked ? 0 : 1);\n                    setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                      is_group: checked,\n                      assign_ids: []\n                    }));\n                    setselectedstaffgroup([]);\n                  }\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"ml-1\",\n                children: /*#__PURE__*/_jsx(Label, {\n                  children: \"Group\"\n                })\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mb-2\",\n            children: switchstaffgroup === 1 ? /*#__PURE__*/_jsx(_Select, {\n              style: {\n                width: \"100%\"\n              },\n              className: \"dontShow\",\n              mode: \"multiple\",\n              suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n              showArrow: true,\n              value: dataupdate.assign_ids,\n              placeholder: \"Cari Nama Staff, Group..\",\n              name: \"assign_ids\",\n              onChange: function onChange(values, options) {\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  assign_ids: values\n                }));\n                setselectedstaffgroup(options);\n                console.log(options);\n              },\n              showSearch: true,\n              optionFilterProp: \"children\",\n              notFoundContent: fetchingstaffgroup ? /*#__PURE__*/_jsx(_Spin, {\n                size: \"small\"\n              }) : null,\n              onSearch: function onSearch(value) {\n                setfetchingstaffgroup(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterUsers?type=\", 1, \"&name=\").concat(value), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdatastaffgroup(res2.data);\n                  setfetchingstaffgroup(false);\n                });\n              },\n              filterOption: function filterOption(input, opt) {\n                return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n              },\n              children: datastaffgroup.map(function (doc, idx) {\n                return /*#__PURE__*/_jsx(_Select.Option, {\n                  value: doc.id,\n                  position: doc.position,\n                  image: doc.profile_image,\n                  children: doc.name\n                }, idx);\n              })\n            }) : /*#__PURE__*/_jsx(_Select, {\n              style: {\n                width: \"100%\"\n              },\n              className: \"dontShow\",\n              suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n              showArrow: true,\n              value: [dataupdate.assign_ids],\n              placeholder: \"Cari Nama Staff, Group..\",\n              name: \"assign_ids\",\n              onChange: function onChange(value, option) {\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  assign_ids: [value]\n                }));\n                setselectedstaffgroup([option]);\n                console.log(option);\n              },\n              showSearch: true,\n              optionFilterProp: \"children\",\n              notFoundContent: fetchingstaffgroup ? /*#__PURE__*/_jsx(_Spin, {\n                size: \"small\"\n              }) : null,\n              onSearch: function onSearch(value) {\n                setfetchingstaffgroup(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterGroups?name=\").concat(value), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdatastaffgroup(res2.data);\n                  setfetchingstaffgroup(false);\n                });\n              },\n              filterOption: function filterOption(input, opt) {\n                return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n              },\n              children: datastaffgroup.map(function (doc, idx) {\n                return /*#__PURE__*/_jsx(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, idx);\n              })\n            })\n          }), selectedstaffgroup.map(function (doc, idx) {\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"mb-2 flex items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mr-2 flex items-center\",\n                children: switchstaffgroup === 1 ? /*#__PURE__*/_jsx(\"div\", {\n                  className: \" w-10 h-10 rounded-full\",\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    src: doc.image === \"\" || doc.image === \"-\" ? \"/image/staffTask.png\" : \"\".concat(doc.image),\n                    className: \" object-contain w-10 h-10\",\n                    alt: \"\"\n                  })\n                }) : /*#__PURE__*/_jsx(UserIconSvg, {})\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col justify-center\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"mb-1 flex\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"mr-1\",\n                    children: /*#__PURE__*/_jsx(H2, {\n                      children: doc.children\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" cursor-pointer\",\n                    onClick: function onClick() {\n                      var temp = _toConsumableArray(selectedstaffgroup);\n\n                      temp.splice(idx, 1);\n                      setselectedstaffgroup(temp);\n                      setdataupdate(function (prev) {\n                        return _objectSpread(_objectSpread({}, prev), {}, {\n                          assign_ids: temp.map(function (docmap) {\n                            return docmap.value;\n                          })\n                        });\n                      });\n                    },\n                    children: /*#__PURE__*/_jsx(CircleXIconSvg, {\n                      size: 15,\n                      color: \"#BF4A40\"\n                    })\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: switchstaffgroup === 0 ? \"\" : \"\".concat(doc.position)\n                  })\n                })]\n              })]\n            });\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(7),\n          className: \"mb-6 px-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-827230947\" + \" \" + \" flex mb-2\",\n            children: [/*#__PURE__*/_jsx(Label, {\n              children: \"Jadwal Mulai\"\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-827230947\" + \" \" + \"jadwal\"\n            }), /*#__PURE__*/_jsx(_JSXStyle, {\n              id: \"827230947\",\n              children: [\".jadwal.jsx-827230947::before{content:'*';color:red;}\"]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsx(_Radio.Group, {\n              name: \"created_at\",\n              onChange: function onChange(e) {\n                setnow(e.target.value);\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  created_at: e.target.value === true ? moment(new Date()).locale(\"id\").format() : null\n                }));\n                e.target.value === true ? setchoosedate(false) : null;\n                setdisabledtrigger(function (prev) {\n                  return prev + 1;\n                });\n              },\n              defaultValue: now,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-1\",\n                  children: /*#__PURE__*/_jsx(_Radio, {\n                    value: true,\n                    children: \"Saat Ini\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-1\",\n                  children: /*#__PURE__*/_jsx(_Radio, {\n                    value: false,\n                    children: \"Tanggal Lain\"\n                  })\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"pl-4 flex flex-col\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-2\",\n              children: /*#__PURE__*/_jsxs(ButtonSys, {\n                type: \"primary\",\n                disabled: now === false ? false : true,\n                onClick: function onClick() {\n                  setchoosedate(true);\n                },\n                children: [/*#__PURE__*/_jsx(CalendartimeIconSvg, {\n                  size: 15,\n                  color: \"#ffffff\"\n                }), \"Pilih Tanggal\"]\n              })\n            }), choosedate && /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(_DatePicker, {\n                showTime: true,\n                placeholder: \"Jadwal Mulai\",\n                style: {\n                  width: \"100%\"\n                },\n                value: moment(dataupdate.created_at),\n                onChange: function onChange(date, datestring) {\n                  setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                    created_at: datestring\n                  }));\n                  setdisabledtrigger(function (prev) {\n                    return prev + 1;\n                  });\n                }\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(8),\n          className: \"mb-6 px-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-827230947\" + \" \" + \" flex mb-2\",\n            children: [/*#__PURE__*/_jsx(Label, {\n              children: \"Jadwal Berakhir\"\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-827230947\" + \" \" + \"jadwal\"\n            }), /*#__PURE__*/_jsx(_JSXStyle, {\n              id: \"827230947\",\n              children: [\".jadwal.jsx-827230947::before{content:'*';color:red;}\"]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsx(_Radio.Group, {\n              name: \"deadline\",\n              onChange: function onChange(e) {\n                setnowend(e.target.value);\n                var choisedate = \"\";\n\n                if (e.target.value === 3) {\n                  choisedate = moment().add(3, \"h\").locale(\"id\").format();\n                } else if (e.target.value === 30) {\n                  choisedate = moment().add(30, \"h\").locale(\"id\").format();\n                } else if (e.target.value === 24) {\n                  choisedate = moment().add(1, \"d\").locale(\"id\").format();\n                } else if (e.target.value === 168) {\n                  choisedate = moment().add(1, \"w\").locale(\"id\").format();\n                }\n\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  deadline: e.target.value !== -10 ? choisedate : null\n                }));\n                e.target.value !== -10 ? setchoosedateend(false) : null;\n                setdisabledtrigger(function (prev) {\n                  return prev + 1;\n                });\n              },\n              defaultValue: nowend,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-1\",\n                  children: /*#__PURE__*/_jsx(_Radio, {\n                    value: 3,\n                    children: \"3 jam ke depan\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-1\",\n                  children: /*#__PURE__*/_jsx(_Radio, {\n                    value: 30,\n                    children: \"30 jam ke depan\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-1\",\n                  children: /*#__PURE__*/_jsx(_Radio, {\n                    value: 24,\n                    children: \"Besok\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-1\",\n                  children: /*#__PURE__*/_jsx(_Radio, {\n                    value: 168,\n                    children: \"1 minggu ke depan\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-1\",\n                  children: /*#__PURE__*/_jsx(_Radio, {\n                    value: -10,\n                    children: \"Tanggal Lain\"\n                  })\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"pl-4 flex flex-col\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-2\",\n              children: /*#__PURE__*/_jsxs(ButtonSys, {\n                type: \"primary\",\n                disabled: nowend === -10 ? false : true,\n                onClick: function onClick() {\n                  setchoosedateend(true);\n                },\n                children: [/*#__PURE__*/_jsx(CalendartimeIconSvg, {\n                  size: 15,\n                  color: \"#ffffff\"\n                }), \"Pilih Tanggal\"]\n              })\n            }), choosedateend && /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(_DatePicker, {\n                showTime: true,\n                placeholder: \"Jadwal Mulai\",\n                style: {\n                  width: \"100%\"\n                },\n                value: moment(dataupdate.deadline),\n                onChange: function onChange(date, datestring) {\n                  setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                    deadline: datestring\n                  }));\n                  setdisabledtrigger(function (prev) {\n                    return prev + 1;\n                  });\n                }\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(9),\n          className: \"mb-6 px-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \" flex mb-2 justify-between\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(Label, {\n                children: \"Jadwal Berulang\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(_Switch, {\n                checked: repeatable,\n                onChange: function onChange(checked) {\n                  setrepeatable(checked);\n                  setchoosedateendrepeat(false);\n                  checked === false ? setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                    repeat: 0,\n                    end_repeat_at: null\n                  })) : null;\n                }\n              })\n            })]\n          }), repeatable ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" mb-2\",\n              children: /*#__PURE__*/_jsxs(_Select, {\n                style: {\n                  width: \"100%\"\n                },\n                placeholder: \"Reguler, Setelah Selesai\",\n                defaultValue: dataupdate.repeat === 1 ? 1 : -1,\n                onChange: function onChange(value) {\n                  setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                    repeat: value\n                  }));\n                  value === -1 ? setregular(true) : (setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                    repeat: 1\n                  })), setregular(false));\n                  setdisabledtrigger(function (prev) {\n                    return prev + 1;\n                  });\n                },\n                children: [/*#__PURE__*/_jsx(_Select.Option, {\n                  value: -1,\n                  children: \"Reguler\"\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 1,\n                  children: \"Setelah Selesai\"\n                })]\n              })\n            }), regular && /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-2\",\n                children: /*#__PURE__*/_jsx(_Radio.Group, {\n                  defaultValue: dataupdate.repeat,\n                  name: \"repeat\",\n                  onChange: function onChange(e) {\n                    setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                      repeat: e.target.value\n                    }));\n                    setdisabledtrigger(function (prev) {\n                      return prev + 1;\n                    });\n                  },\n                  value: dataupdate.repeat < 2 ? null : dataupdate.repeat,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-1\",\n                      children: /*#__PURE__*/_jsx(_Radio, {\n                        value: 2,\n                        children: \"Setiap Hari\"\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-1\",\n                      children: /*#__PURE__*/_jsx(_Radio, {\n                        value: 3,\n                        children: \"Setiap Minggu\"\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-1\",\n                      children: /*#__PURE__*/_jsx(_Radio, {\n                        value: 4,\n                        children: \"Setiap 2 Minggu\"\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-1\",\n                      children: /*#__PURE__*/_jsx(_Radio, {\n                        value: 5,\n                        children: \"Setiap Bulan\"\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-1\",\n                      children: /*#__PURE__*/_jsx(_Radio, {\n                        value: 6,\n                        children: \"Setiap 3 Bulan\"\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-1\",\n                      children: /*#__PURE__*/_jsx(_Radio, {\n                        value: 7,\n                        children: \"Setiap 4 Bulan\"\n                      })\n                    })]\n                  })\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" pl-4 mb-2\",\n              children: /*#__PURE__*/_jsx(Label, {\n                children: \"Selesai Pada\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"pl-4 flex flex-col\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-2\",\n                children: /*#__PURE__*/_jsxs(ButtonSys, {\n                  type: \"primary\",\n                  onClick: function onClick() {\n                    setchoosedateendrepeat(true);\n                  },\n                  children: [/*#__PURE__*/_jsx(CalendartimeIconSvg, {\n                    size: 15,\n                    color: \"#ffffff\"\n                  }), \"Pilih Tanggal\"]\n                })\n              }), choosedateendrepeat && /*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(_DatePicker, {\n                  defaultValue: dataupdate.end_repeat_at === null ? null : moment(dataupdate.end_repeat_at),\n                  showTime: true,\n                  placeholder: \"Selesai pada\",\n                  style: {\n                    width: \"100%\"\n                  },\n                  onChange: function onChange(date, datestring) {\n                    setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                      end_repeat_at: datestring\n                    }));\n                  }\n                })\n              })]\n            })]\n          }) : null]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          id: \"card\".concat(10),\n          className: \"mb-6 px-3 flex justify-between\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(Label, {\n              children: \"Unggah Dokumen Pelengkap (PDF, JPG)\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(_Switch, {\n              checked: dataupdate.is_uploadable,\n              onChange: function onChange(checked) {\n                setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                  is_uploadable: checked\n                }));\n              }\n            })\n          })]\n        })]\n      })\n    })\n  });\n};\n\nexport default DrawerTaskUpdate;","map":null,"metadata":{},"sourceType":"module"}