{"ast":null,"code":"import _TreeSelect from \"antd/lib/tree-select\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _Select from \"antd/lib/select\";\nimport _Input from \"antd/lib/input\";\nimport _Empty from \"antd/lib/empty\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport httpcookie from 'cookie';\nimport { SearchOutlined } from '@ant-design/icons';\nimport Layout from '../../components/layout-dashboardNew';\nimport moment from 'moment';\nimport st from '../../components/layout-dashboard.module.css';\nimport { AdjusmentsHorizontalIconSvg, AlerttriangleIconSvg, HistoryIconSvg, MappinIconSvg, SearchIconSvg, TableExportIconSvg, TicketIconSvg, UserIconSvg } from '../../components/icon';\nimport { Chart, ArcElement, Tooltip, CategoryScale, LinearScale, LineElement, BarElement, PointElement } from 'chart.js';\nChart.register(ArcElement, Tooltip, CategoryScale, LinearScale, LineElement, BarElement, PointElement);\nimport { Doughnut, Bar, Line } from 'react-chartjs-2';\nimport { H1, H2, Text, Label } from '../../components/typography';\nimport ButtonSys from '../../components/button';\nimport { TableCustomTickets } from '../../components/table/tableCustom';\nimport DrawerTicketCreate from '../../components/drawer/tickets/drawerTicketCreate';\nimport DrawerTicketExports from '../../components/drawer/tickets/drawerTicketExports';\n\nconst TicketIndex2 = ({\n  dataProfile,\n  sidemenu,\n  initProps\n}) => {\n  var _datastatusticket$, _datastatusticket$2, _datastatusticket$3, _datastatusticket$4, _datastatusticket$5, _datastatusticket$6, _datastatusticket$7, _datastatusticket$8;\n\n  //1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1); //2.useState\n  //2.1.PENYELESAIAN TIKET\n\n  const {\n    0: dataresolvedtimesticket,\n    1: setdataresolvedtimesticket\n  } = useState([]);\n  const {\n    0: loadingdataresolvedtimes,\n    1: setloadingdataresolvedtimes\n  } = useState(true); //2.2.STATUS TIKET\n\n  const {\n    0: datastatusticket,\n    1: setdatastatusticket\n  } = useState([]); //2.3.JUMLAH TIKET\n\n  const {\n    0: datacountsticket,\n    1: setdatacountsticket\n  } = useState(\"\"); //2.4.TAMBAH TIKET\n\n  const {\n    0: drawerticketscreate,\n    1: setdrawerticketscreate\n  } = useState(false);\n  const {\n    0: loadingticketscreate,\n    1: setloadingticketscreate\n  } = useState(false);\n  const {\n    0: refreshcreateticketscreate,\n    1: setrefreshcreateticketscreate\n  } = useState(-1); //2.5.EKSPOR TIKET\n\n  const {\n    0: drawerticketexports,\n    1: setdrawerticketexports\n  } = useState(false); //2.6.TABLE TIKET\n\n  const {\n    0: datatickets,\n    1: setdatatickets\n  } = useState([]);\n  const {\n    0: datarawtickets,\n    1: setdatarawtickets\n  } = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  });\n  const {\n    0: dataticketrelation,\n    1: setdataticketrelation\n  } = useState({\n    status_ticket: [{\n      id: 0,\n      name: \"\"\n    }],\n    ticket_types: [],\n    incident_type: [],\n    companies: {\n      data: [{\n        id: 0,\n        title: '',\n        key: '',\n        value: 0\n      }]\n    },\n    ticket_task_types: [],\n    resolved_times: []\n  });\n  const {\n    0: loadingtickets,\n    1: setloadingtickets\n  } = useState(false);\n  const {\n    0: pagetickets,\n    1: setpagetickets\n  } = useState(1);\n  const {\n    0: rowstickets,\n    1: setrowstickets\n  } = useState(10);\n  const {\n    0: sortingtickets,\n    1: setsortingtickets\n  } = useState({\n    sort_by: \"\",\n    sort_type: \"\"\n  }); //Filter\n\n  const {\n    0: datafilterttickets,\n    1: setdatafilterttickets\n  } = useState([]);\n  const {\n    0: searcingfiltertickets,\n    1: setsearcingfiltertickets\n  } = useState(\"\");\n  const {\n    0: tickettypefiltertickets,\n    1: settickettypefiltertickets\n  } = useState(\"\");\n  const {\n    0: fromfiltertickets,\n    1: setfromfiltertickets\n  } = useState(\"\");\n  const {\n    0: tofiltertickets,\n    1: settofiltertickets\n  } = useState(\"\");\n  const {\n    0: locfiltertickets,\n    1: setlocfiltertickets\n  } = useState(\"\");\n  const {\n    0: statusfiltertickets,\n    1: setstatusfiltertickets\n  } = useState(\"\"); //3.Columns\n\n  const columnsTickets = [{\n    title: 'No',\n    dataIndex: 'num',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: datarawtickets.from + index\n        })\n      };\n    }\n  }, {\n    title: 'No. Tiket',\n    dataIndex: 'id',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.full_name\n        })\n      };\n    },\n    sorter: (a, b) => a.id > b.id\n  }, {\n    title: 'Tipe Tiket',\n    dataIndex: 'type',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.type_name\n        })\n      };\n    },\n    sorter: (a, b) => a.type_name.localeCompare(b.type_name)\n  }, {\n    title: 'Diajukan Oleh',\n    dataIndex: 'requested_by',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task.creator.name\n        })\n      };\n    }\n  }, {\n    title: 'Lokasi Problem',\n    dataIndex: 'location_id',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task.location.full_location\n        })\n      };\n    }\n  }, {\n    title: 'Tanggal Pengajuan',\n    dataIndex: 'raised_at',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.raised_at\n        })\n      };\n    },\n    sorter: (a, b) => a.raised_at.localeCompare(b.raised_at)\n  }, {\n    title: 'Di-assign Ke',\n    dataIndex: 'assignable',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task.users.length === 0 ? /*#__PURE__*/_jsxs(\"div\", {\n            className: \" flex items-center bg-onhold bg-opacity-10\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" mr-2\",\n              children: /*#__PURE__*/_jsx(UserIconSvg, {})\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: \"Belum di-assign\"\n            })]\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            children: record.task.users.map(user => user.name).join(\", \")\n          })\n        })\n      };\n    }\n  }, {\n    title: 'Status',\n    dataIndex: 'status',\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: dataProfile.data.role === 1 ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [record.status === 1 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue\",\n              children: \"Overdue\"\n            }), record.status === 2 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open\",\n              children: \"Open\"\n            }), record.status === 3 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress\",\n              children: \"On-Progress\"\n            }), record.status === 4 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-onhold bg-opacity-10 text-onhold\",\n              children: \"On-Hold\"\n            }), record.status === 5 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed\",\n              children: \"Completed\"\n            }), record.status === 6 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed\",\n              children: \"Closed\"\n            }), record.status === 7 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-canceled bg-opacity-10 text-canceled\",\n              children: \"Canceled\"\n            })]\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [record.status === 1 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress\",\n              children: \"Dalam Proses\"\n            }), record.status === 2 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open\",\n              children: \"Menunggu Staff\"\n            }), record.status === 6 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed\",\n              children: \"Selesai\"\n            }), record.status === 7 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md h-auto px-3 text-center py-1 bg-canceled bg-opacity-10 text-canceled\",\n              children: \"Dibatalkan\"\n            })]\n          })\n        })\n      };\n    },\n    sorter: (a, b) => a.status_name.localeCompare(b.status_name)\n  }]; //4.Handler\n\n  const onFilterTickets = () => {\n    setloadingtickets(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? `getTickets` : `getClientTickets`}?page=${pagetickets}&rows=${rowstickets}&ticket_id=${searcingfiltertickets}&type_id=${tickettypefiltertickets}&from=${fromfiltertickets}&to=${tofiltertickets}&location_id=${locfiltertickets}&status_id=${statusfiltertickets}&sort_by=${sortingtickets.sort_by}&sort_type=${sortingtickets.sort_type}`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatarawtickets(res2.data);\n      setdatatickets(res2.data.data);\n      setdatafilterttickets(res2.data.data);\n      setloadingtickets(false);\n    });\n  }; //5.useEffect\n\n\n  useEffect(() => {\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? `getTicketStatusCounts` : `getClientTicketStatusCounts`}`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      if (dataProfile.data.role === 1) {\n        var tempresolvedtimes = [];\n\n        for (var times in res2.data.counts) {\n          if (times !== \"total_counts\") {\n            tempresolvedtimes.push({\n              counts: res2.data.counts[times].counts,\n              percentage: res2.data.counts[times].percentage,\n              name: times\n            });\n          }\n        }\n\n        setdataresolvedtimesticket(tempresolvedtimes);\n        setdatacountsticket(res2.data.sum_ticket);\n      }\n\n      setdatastatusticket(res2.data.statuses);\n      setloadingdataresolvedtimes(false);\n    });\n  }, []);\n  useEffect(() => {\n    setloadingtickets(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? `getTickets` : `getClientTickets`}?page=${pagetickets}&rows=${rowstickets}&ticket_id=${searcingfiltertickets}&type_id=${tickettypefiltertickets}&from=${fromfiltertickets}&to=${tofiltertickets}&location_id=${locfiltertickets}&status_id=${statusfiltertickets}&sort_by=${sortingtickets.sort_by}&sort_type=${sortingtickets.sort_type}`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatarawtickets(res2.data);\n      setdatatickets(res2.data.data);\n      setdatafilterttickets(res2.data.data);\n      setloadingtickets(false);\n    });\n  }, [refreshcreateticketscreate]);\n  useEffect(() => {\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? \"getTicketRelation\" : \"getClientTicketRelation\"}`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdataticketrelation(res2.data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxs(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"flex flex-col\",\n      id: \"mainWrapper\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \" grid grid-cols-10 px-5\",\n        children: [dataProfile.data.role === 1 ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-3 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-3\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: /*#__PURE__*/_jsx(H1, {\n                children: \"Penyelesaian Tiket\"\n              })\n            }), loadingdataresolvedtimes ? /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsx(_Spin, {})\n            }) : /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col\",\n              children: [dataresolvedtimesticket.every(docevery => docevery.counts === 0) ? /*#__PURE__*/_jsx(\"div\", {\n                className: \" w-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsx(_Empty, {\n                  image: _Empty.PRESENTED_IMAGE_SIMPLE\n                })\n              }) : /*#__PURE__*/_jsx(\"div\", {\n                className: \" w-full flex justify-center\",\n                children: /*#__PURE__*/_jsx(Doughnut, {\n                  data: {\n                    labels: dataresolvedtimesticket.map(doc => doc.name),\n                    datasets: [{\n                      data: dataresolvedtimesticket.map(doc => doc.counts),\n                      backgroundColor: ['#2F80ED', '#BF4A40', '#ED962F', '#E5C471', '#6AAA70'],\n                      borderColor: ['#2F80ED', '#BF4A40', '#ED962F', '#E5C471', '#6AAA70'],\n                      borderWidth: 1\n                    }]\n                  },\n                  options: {\n                    title: {\n                      display: false\n                    },\n                    legend: {\n                      display: false\n                    },\n                    maintainAspectRatio: false,\n                    cutout: 55,\n                    spacing: 5\n                  }\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"flex flex-col w-full\",\n                children: dataresolvedtimesticket.map((doc, idx) => {\n                  return /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex justify-between items-center mb-1\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: `w-1 mr-1 ${doc.name === 'three_hours' && `bg-open`} ${doc.name === 'three_to_twelve_hours' && `bg-overdue`} ${doc.name === 'twelve_to_thirty_hours' && `bg-onprogress`} ${doc.name === 'thirty_hours_to_three_days' && `bg-onhold`} ${doc.name === 'three_days' && `bg-completed`}`\n                      }), /*#__PURE__*/_jsxs(Text, {\n                        children: [doc.name === 'three_hours' && `Kurang dari 3 jam`, \" \", doc.name === 'three_to_twelve_hours' && `3 - 12 jam`, \" \", doc.name === 'twelve_to_thirty_hours' && `12 - 30 jam`, \" \", doc.name === 'thirty_hours_to_three_days' && `30 jam - 3 hari`, \" \", doc.name === 'three_days' && `Lebih dari 3 hari`]\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"flex\",\n                      children: /*#__PURE__*/_jsx(H2, {\n                        children: doc.counts\n                      })\n                    })]\n                  });\n                })\n              })]\n            })]\n          }), loadingdataresolvedtimes ? /*#__PURE__*/_jsx(_Fragment, {\n            children: /*#__PURE__*/_jsx(_Spin, {})\n          }) : /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-3 flex flex-col mb-6\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \" mb-3 grid grid-cols-2\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 mb-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                    size: 30,\n                    color: `#BF4A40`\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center justify-end\",\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0 text-overdue font-semibold text-base mr-1\",\n                      children: datastatusticket[0].status_count\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      children: /*#__PURE__*/_jsx(AlerttriangleIconSvg, {\n                        size: 15,\n                        color: `#BF4A40`\n                      })\n                    })]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" justify-end flex\",\n                    children: /*#__PURE__*/_jsx(Label, {\n                      children: datastatusticket[0].status_name\n                    })\n                  })]\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 mb-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                    size: 30,\n                    color: `#2F80ED`\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" flex items-center justify-end\",\n                    children: /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0 text-open font-semibold text-base mr-1\",\n                      children: datastatusticket[1].status_count\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" justify-end flex\",\n                    children: /*#__PURE__*/_jsx(Label, {\n                      children: datastatusticket[1].status_name\n                    })\n                  })]\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 my-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                    size: 30,\n                    color: `#ED962F`\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" flex items-center justify-end\",\n                    children: /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0 text-onprogress font-semibold text-base mr-1\",\n                      children: datastatusticket[2].status_count\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" justify-end flex\",\n                    children: /*#__PURE__*/_jsx(Label, {\n                      children: datastatusticket[2].status_name\n                    })\n                  })]\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 my-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                    size: 30,\n                    color: `#E5C471`\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" flex items-center justify-end\",\n                    children: /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0 text-onhold font-semibold text-base mr-1\",\n                      children: datastatusticket[3].status_count\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" justify-end flex\",\n                    children: /*#__PURE__*/_jsx(Label, {\n                      children: datastatusticket[3].status_name\n                    })\n                  })]\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 mt-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                    size: 30,\n                    color: `#808080`\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" flex items-center justify-end\",\n                    children: /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0 text-closed font-semibold text-base mr-1\",\n                      children: datastatusticket[4].status_count\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" justify-end flex\",\n                    children: /*#__PURE__*/_jsx(Label, {\n                      children: datastatusticket[4].status_name\n                    })\n                  })]\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 mt-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                    size: 30,\n                    color: `#F46780`\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" flex items-center justify-end\",\n                    children: /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0 text-canceled font-semibold text-base mr-1\",\n                      children: datastatusticket[5].status_count\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" justify-end flex\",\n                    children: /*#__PURE__*/_jsx(Label, {\n                      children: datastatusticket[5].status_name\n                    })\n                  })]\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"shadow-md rounded-md bg-white p-5 mx-2 flex justify-between items-center h-full\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(H1, {\n                  children: \"Total Tiket\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-0 text-5xl font-light text-primary100\",\n                  children: datacountsticket\n                })\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \" col-span-4 flex flex-col mb-6\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"shadow-md rounded-md bg-gradient-to-br from-primary100 to-state4 transition ease-in-out hover:from-primary75 cursor-pointer p-5 mx-3 flex items-center mb-2\",\n              onClick: () => {\n                setdrawerticketscreate(true);\n              },\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \" mr-5\",\n                children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                  size: 40,\n                  color: `#ffffff`\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-1 text-lg text-white font-semibold\",\n                  children: \"Buat Tiket\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-0 text-sm text-white text-opacity-60\",\n                  children: moment(new Date()).locale('id').format('dddd, LL')\n                })]\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-4 flex flex-col shadow-md rounded-md bg-white p-5 mt-2 mx-3 h-full\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col justify-center h-full\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2\",\n                  onClick: () => {\n                    setdrawerticketexports(true);\n                  },\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"flex p-1 bg-primary10 rounded mr-3\",\n                    children: /*#__PURE__*/_jsx(TableExportIconSvg, {\n                      size: 35,\n                      color: `#35763B`\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsx(H2, {\n                      children: \"Expor Tiket\"\n                    }), /*#__PURE__*/_jsx(Label, {\n                      children: \"Download daftar tiket dalam bentuk spreadsheet/excel\"\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2\",\n                  onClick: () => {\n                    rt.push(`/tickets/histories`);\n                  },\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"flex p-1 bg-primary10 rounded mr-3\",\n                    children: /*#__PURE__*/_jsx(HistoryIconSvg, {\n                      size: 35,\n                      color: `#35763B`\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsx(H2, {\n                      children: \"Riwayat Tiket\"\n                    }), /*#__PURE__*/_jsx(Label, {\n                      children: \"Lihat seluruh tiket yang berstatus closed berikut durasi\"\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2\",\n                  onClick: () => {\n                    rt.push(`/tickets/tickettypes`);\n                  },\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"flex p-1 bg-primary10 rounded mr-3\",\n                    children: /*#__PURE__*/_jsx(AdjusmentsHorizontalIconSvg, {\n                      size: 35,\n                      color: `#35763B`\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsx(H2, {\n                      children: \"Atur Tiket\"\n                    }), /*#__PURE__*/_jsx(Label, {\n                      children: \"Hubungkan tiket dengan task yang akan dijalankan\"\n                    })]\n                  })]\n                })]\n              })\n            })]\n          })]\n        }) : /*#__PURE__*/_jsxs(\"div\", {\n          className: \" col-span-10 grid grid-cols-12\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-8 grid grid-cols-8 mb-6\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                  size: 30,\n                  color: `#ED962F`\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex items-center justify-end\",\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-0 text-onprogress font-semibold text-base mr-1\",\n                    children: (_datastatusticket$ = datastatusticket[0]) === null || _datastatusticket$ === void 0 ? void 0 : _datastatusticket$.status_count\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    children: /*#__PURE__*/_jsx(AlerttriangleIconSvg, {\n                      size: 15,\n                      color: `#BF4A40`\n                    })\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \" justify-end flex\",\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: (_datastatusticket$2 = datastatusticket[0]) === null || _datastatusticket$2 === void 0 ? void 0 : _datastatusticket$2.status_name\n                  })\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                  size: 30,\n                  color: `#2F80ED`\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \" flex items-center justify-end\",\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-0 text-open font-semibold text-base mr-1\",\n                    children: (_datastatusticket$3 = datastatusticket[1]) === null || _datastatusticket$3 === void 0 ? void 0 : _datastatusticket$3.status_count\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \" justify-end flex\",\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: (_datastatusticket$4 = datastatusticket[1]) === null || _datastatusticket$4 === void 0 ? void 0 : _datastatusticket$4.status_name\n                  })\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                  size: 30,\n                  color: `#808080`\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \" flex items-center justify-end\",\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-0 text-closed font-semibold text-base mr-1\",\n                    children: (_datastatusticket$5 = datastatusticket[2]) === null || _datastatusticket$5 === void 0 ? void 0 : _datastatusticket$5.status_count\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \" justify-end flex\",\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: (_datastatusticket$6 = datastatusticket[2]) === null || _datastatusticket$6 === void 0 ? void 0 : _datastatusticket$6.status_name\n                  })\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                  size: 30,\n                  color: `#BF4A40`\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \" flex items-center justify-end\",\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-0 text-overdue font-semibold text-base mr-1\",\n                    children: (_datastatusticket$7 = datastatusticket[3]) === null || _datastatusticket$7 === void 0 ? void 0 : _datastatusticket$7.status_count\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \" justify-end flex\",\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: (_datastatusticket$8 = datastatusticket[3]) === null || _datastatusticket$8 === void 0 ? void 0 : _datastatusticket$8.status_name\n                  })\n                })]\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-4 shadow-md rounded-md bg-gradient-to-br from-primary100 to-state4 transition ease-in-out hover:from-primary75 cursor-pointer p-5 mx-3 flex items-center mb-6\",\n            onClick: () => {\n              setdrawerticketscreate(true);\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" mr-5\",\n              children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                size: 40,\n                color: `#ffffff`\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: \" mb-1 text-lg text-white font-semibold\",\n                children: \"Buat Tiket\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \" mb-0 text-sm text-white text-opacity-60\",\n                children: moment(new Date()).locale('id').format('dddd, LL')\n              })]\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-span-10 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-2\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: /*#__PURE__*/_jsx(H1, {\n              children: \"Semua Tiket\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \" flex items-center mb-4\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-1 w-2/12\",\n              children: /*#__PURE__*/_jsx(_Input, {\n                value: searcingfiltertickets === \"\" ? null : searcingfiltertickets,\n                style: {\n                  width: `100%`\n                },\n                placeholder: \"Kata Kunci..\",\n                allowClear: true,\n                onChange: e => {\n                  if (e.target.value === \"\") {\n                    setsearcingfiltertickets(\"\");\n                  } else {\n                    setsearcingfiltertickets(e.target.value);\n                  }\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-1 w-2/12\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                value: tickettypefiltertickets === \"\" ? null : tickettypefiltertickets,\n                placeholder: \"Semua Tipe Tiket\",\n                style: {\n                  width: `100%`\n                },\n                allowClear: true,\n                name: `task_type`,\n                onChange: value => {\n                  typeof value === 'undefined' ? settickettypefiltertickets(\"\") : settickettypefiltertickets(value);\n                },\n                children: dataticketrelation.ticket_types.map((doc, idx) => /*#__PURE__*/_jsx(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, idx))\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" w-3/12 mx-1\",\n              children: /*#__PURE__*/_jsx(_DatePicker.RangePicker, {\n                style: {\n                  width: `100%`\n                },\n                allowEmpty: true,\n                className: \"datepickerStatus\",\n                value: fromfiltertickets === \"\" ? [null, null] : [moment(fromfiltertickets), moment(tofiltertickets)],\n                onChange: (dates, datestrings) => {\n                  setfromfiltertickets(datestrings[0]);\n                  settofiltertickets(datestrings[1]);\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" mx-1 w-5/12\",\n              children: /*#__PURE__*/_jsx(_TreeSelect, {\n                style: {\n                  width: `100%`\n                },\n                allowClear: true,\n                placeholder: \"Semua Lokasi\",\n                showSearch: true,\n                suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n                showArrow: true,\n                name: `locations_id`,\n                onChange: value => {\n                  typeof value === 'undefined' ? setlocfiltertickets(\"\") : setlocfiltertickets(value);\n                },\n                treeData: [dataProfile.data.role === 1 ? dataticketrelation.companies : dataticketrelation.companies.data],\n                treeDefaultExpandAll: true,\n                value: locfiltertickets === \"\" ? null : locfiltertickets\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-1 w-2/12\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                value: statusfiltertickets === \"\" ? null : statusfiltertickets,\n                placeholder: \"Status\",\n                style: {\n                  width: `100%`\n                },\n                allowClear: true,\n                name: `status`,\n                onChange: (value, option) => {\n                  typeof value === 'undefined' ? setstatusfiltertickets('') : setstatusfiltertickets(value);\n                },\n                children: dataProfile.data.role === 1 ? dataticketrelation.status_ticket.map((doc, idx) => {\n                  if (doc.id === 1) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-overdue\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 2) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-open\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 3) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-onprogress\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 4) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-onhold\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 5) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-completed\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 6) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-closed\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);\n                }) : dataticketrelation.status_ticket.map((doc, idx) => {\n                  if (doc.id === 1) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-onprogress\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 2) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-open\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 6) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-closed\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);else if (doc.id === 7) return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex items-center\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1 w-3 h-3 rounded-full bg-canceled\"\n                      }), \" \", doc.name]\n                    })\n                  }, idx);\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-1 w-1/12\",\n              children: /*#__PURE__*/_jsx(ButtonSys, {\n                type: `primary`,\n                onClick: onFilterTickets,\n                children: \"Cari\"\n              })\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(TableCustomTickets, {\n              dataSource: datatickets,\n              setDataSource: setdatatickets,\n              columns: columnsTickets,\n              loading: loadingtickets,\n              setpraloading: setloadingtickets,\n              pageSize: rowstickets,\n              total: datarawtickets.total,\n              initProps: initProps,\n              setpage: setpagetickets,\n              pagefromsearch: pagetickets,\n              setdataraw: setdatarawtickets,\n              setsorting: setsortingtickets,\n              sorting: sortingtickets,\n              searching: searcingfiltertickets,\n              tickettype: tickettypefiltertickets,\n              fromdate: fromfiltertickets,\n              todate: tofiltertickets,\n              location: locfiltertickets,\n              status: statusfiltertickets,\n              dataprofile: dataProfile\n            })\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(DrawerTicketCreate, {\n      title: \"Tiket Baru\",\n      visible: drawerticketscreate,\n      onClose: () => {\n        setdrawerticketscreate(false);\n      },\n      buttonOkText: \"Simpan\",\n      initProps: initProps,\n      onvisible: setdrawerticketscreate,\n      refreshtickets: refreshcreateticketscreate,\n      setrefreshtickets: setrefreshcreateticketscreate,\n      dataprofile: dataProfile\n    }), dataProfile.data.role === 1 && /*#__PURE__*/_jsx(DrawerTicketExports, {\n      title: \"Ekspor Tiket\",\n      visible: drawerticketexports,\n      onClose: () => {\n        setdrawerticketexports(false);\n      },\n      buttonOkText: \"Ekspor Tiket\",\n      initProps: initProps,\n      onvisible: setdrawerticketexports\n    })]\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`https://boiling-thicket-46501.herokuapp.com/detailProfile`, {\n    method: `GET`,\n    headers: {\n      'Authorization': JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"2\"\n    }\n  };\n}\nexport default TicketIndex2;","map":null,"metadata":{},"sourceType":"module"}