{"ast":null,"code":"import _Input from \"antd/lib/input\";\nimport _Popover from \"antd/lib/popover\";\nimport _notification from \"antd/lib/notification\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useRouter } from 'next/router';\nimport { useEffect, useState, useRef } from 'react';\nimport Link from 'next/link';\nimport { SearchOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport Layout from '../../../components/layout-dashboardNew';\nimport st from '../../../components/layout-dashboard.module.css';\nimport { AlerttriangleIconSvg, EditIconSvg, MappinIconSvg } from '../../../components/icon';\nimport { Chart, ArcElement, Tooltip, CategoryScale, LinearScale, LineElement, BarElement, PointElement } from 'chart.js';\nChart.register(ArcElement, Tooltip, CategoryScale, LinearScale, LineElement, BarElement, PointElement);\nimport { Doughnut, Bar, Line } from 'react-chartjs-2';\nimport { H1, H2, Label, Text } from '../../../components/typography';\nimport ButtonSys from '../../../components/button';\nimport { BackIconSvg, FilePlusIconSvg, TrashIconSvg } from '../../../components/icon';\nimport { TableCustomTicketTypes } from '../../../components/table/tableCustom';\nimport DrawerTicketTypeCreate from '../../../components/drawer/tickets/drawerTicketTypeCreate';\nimport { ModalHapusTipeTiket } from '../../../components/modal/modalCustom';\nimport DrawerTicketTypeUpdate from '../../../components/drawer/tickets/drawerTicketTypeUpdate';\n\nvar TicketTypes = function TicketTypes(_ref) {\n  var dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu,\n      initProps = _ref.initProps;\n  //1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(1, 2);\n  pathArr.push(\"Tipe Task Tiket\"); //2.Use State\n  //TICKET TYPES\n\n  var _useState = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  }),\n      datarawtickettypes = _useState[0],\n      setdatarawtickettypes = _useState[1];\n\n  var _useState2 = useState([]),\n      datatickettypes = _useState2[0],\n      setdatatickettypes = _useState2[1];\n\n  var _useState3 = useState(false),\n      loadingtickettypes = _useState3[0],\n      setloadingtickettypes = _useState3[1];\n\n  var _useState4 = useState(1),\n      pagetickettypes = _useState4[0],\n      setpagetickettypes = _useState4[1];\n\n  var _useState5 = useState(10),\n      rowstickettypes = _useState5[0],\n      setrowstickettypes = _useState5[1];\n\n  var _useState6 = useState({\n    sort_by: \"\",\n    sort_type: \"\"\n  }),\n      sortingtickettypes = _useState6[0],\n      setsortingtickettypes = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      searcingtickettypes = _useState7[0],\n      setsearcingtickettypes = _useState7[1];\n\n  var _useState8 = useState([]),\n      datafiltertiickettypes = _useState8[0],\n      setdatafiltertiickettypes = _useState8[1]; //create - ticket types\n\n\n  var _useState9 = useState(false),\n      drawertickettypescreate = _useState9[0],\n      setdrawertickettypescreate = _useState9[1];\n\n  var _useState10 = useState(false),\n      loadingtickettypescreate = _useState10[0],\n      setloadingtickettypescreate = _useState10[1];\n\n  var _useState11 = useState(-1),\n      refreshtickettypescreate = _useState11[0],\n      setrefreshtickettypescreate = _useState11[1]; //update - ticket types\n\n\n  var _useState12 = useState(false),\n      drawertickettypesupdate = _useState12[0],\n      setdrawertickettypesupdate = _useState12[1];\n\n  var _useState13 = useState(false),\n      loadingtickettypesupdate = _useState13[0],\n      setloadingtickettypesupdate = _useState13[1];\n\n  var _useState14 = useState(-1),\n      refreshtickettypesupdate = _useState14[0],\n      setrefreshtickettypesupdate = _useState14[1];\n\n  var _useState15 = useState(false),\n      disabledupdate = _useState15[0],\n      setdisabledupdate = _useState15[1];\n\n  var _useState16 = useState({\n    id: null,\n    name: \"\",\n    description: \"\",\n    ticket_type_id: 1,\n    task_type_id: null\n  }),\n      datapayloadtickettype = _useState16[0],\n      setdatapayloadtickettype = _useState16[1]; //delete - ticket types\n\n\n  var _useState17 = useState({\n    id: null,\n    name: \"\"\n  }),\n      datatickettypesdelete = _useState17[0],\n      setdatatickettypesdelete = _useState17[1];\n\n  var _useState18 = useState(false),\n      modaltickettypesdelete = _useState18[0],\n      setmodaltickettypesdelete = _useState18[1];\n\n  var _useState19 = useState(false),\n      loadingtickettypesdelete = _useState19[0],\n      setloadingtickettypesdelete = _useState19[1];\n\n  var _useState20 = useState(-1),\n      refreshcreatetickettypesdelete = _useState20[0],\n      setrefreshcreatetickettypesdelete = _useState20[1];\n\n  var _useState21 = useState(0),\n      coloricondeletehover = _useState21[0],\n      setcoloricondeletehover = _useState21[1]; //2. Column Table\n\n\n  var columnsTicketTypes = [{\n    title: 'No',\n    dataIndex: 'num',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: datarawtickettypes.from + index\n        })\n      };\n    }\n  }, {\n    title: 'Tipe Tiket',\n    dataIndex: 'ticket_type_name',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.ticket_type_name\n        })\n      };\n    },\n    sorter: function sorter(a, b) {\n      return a.name.localeCompare(b.name);\n    }\n  }, {\n    title: 'Nama',\n    dataIndex: 'name',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.name\n        })\n      };\n    },\n    sorter: function sorter(a, b) {\n      return a.name.localeCompare(b.name);\n    }\n  }, {\n    title: 'Tipe Task',\n    dataIndex: 'task_type_name',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task_type_name\n        })\n      };\n    },\n    sorter: function sorter(a, b) {\n      return a.name.localeCompare(b.name);\n    }\n  }, {\n    title: 'Deskripsi',\n    dataIndex: 'description',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(\"p\", {\n          className: \" line-clamp-3\",\n          children: record.description === \"\" || record.description === \"-\" ? \"-\" : record.description\n        })\n      };\n    }\n  }, {\n    title: '\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0',\n    dataIndex: 'actions',\n    align: \"center\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \" flex justify-center\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-1\",\n            children: /*#__PURE__*/_jsx(ButtonSys, {\n              type: \"default\",\n              onClick: function onClick() {\n                setdatapayloadtickettype({\n                  id: Number(record.id),\n                  name: record.name,\n                  description: record.description,\n                  ticket_type_id: record.ticket_type_id,\n                  task_type_id: record.task_type_id\n                });\n                setdrawertickettypesupdate(true);\n              },\n              children: /*#__PURE__*/_jsx(EditIconSvg, {\n                size: 15,\n                color: \"#35763B\"\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-1\",\n            children: /*#__PURE__*/_jsx(ButtonSys, {\n              type: \"default\",\n              color: \"danger\",\n              onClick: function onClick() {\n                setdatatickettypesdelete({\n                  id: record.id,\n                  name: record.name\n                });\n                setmodaltickettypesdelete(true);\n              },\n              children: /*#__PURE__*/_jsx(TrashIconSvg, {\n                size: 15,\n                color: \"#BF4A40\"\n              })\n            })\n          })]\n        })\n      };\n    }\n  }]; //3. Handler\n\n  var handleDeleteTipeTiket = function handleDeleteTipeTiket() {\n    setloadingtickettypesdelete(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/deleteTicketTaskType\", {\n      method: 'DELETE',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: datatickettypesdelete.id\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingtickettypesdelete(false);\n\n      if (res2.success) {\n        setrefreshcreatetickettypesdelete(function (prev) {\n          return prev + 1;\n        });\n        setmodaltickettypesdelete(false);\n\n        _notification['success']({\n          message: res2.message,\n          duration: 3\n        });\n      } else {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //4.Use Effect\n\n\n  useEffect(function () {\n    setloadingtickettypes(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getTicketTaskTypes?page=\".concat(pagetickettypes, \"&rows=\").concat(rowstickettypes, \"&keyword=\").concat(searcingtickettypes, \"&sort_by=\").concat(sortingtickettypes.sort_by, \"&sort_type=\").concat(sortingtickettypes.sort_type), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatarawtickettypes(res2.data);\n      setdatatickettypes(res2.data.data);\n      setdatafiltertiickettypes(res2.data.data);\n      setdisabledupdate(false);\n      setloadingtickettypes(false);\n    });\n  }, [refreshtickettypescreate, refreshcreatetickettypesdelete]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \" flex flex-col px-5\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col shadow-md rounded-lg bg-white p-5 mb-6 mx-3\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex justify-between items-center mb-5\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mr-2 cursor-pointer flex items-center\",\n              onClick: function onClick() {\n                rt.push(\"/tickets\");\n              },\n              children: /*#__PURE__*/_jsx(BackIconSvg, {\n                size: 15,\n                color: \"#000000\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" mr-2 flex items-center\",\n              children: /*#__PURE__*/_jsx(H1, {\n                children: \"Atur Tiket\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" flex items-center\",\n              children: /*#__PURE__*/_jsx(_Popover, {\n                placement: \"right\",\n                content: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" mr-2 h-full flex items-center\",\n                    children: /*#__PURE__*/_jsx(ExclamationCircleOutlined, {\n                      style: {\n                        color: \"red\"\n                      }\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \" mb-2\",\n                      children: /*#__PURE__*/_jsx(Label, {\n                        children: \"Halaman ini berisi daftar tiket dan task yang akan dijalankan berdasarkan tiket tersebut.\"\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      children: /*#__PURE__*/_jsxs(Label, {\n                        children: [/*#__PURE__*/_jsx(\"strong\", {\n                          children: \"PENTING:\"\n                        }), \" Perubahan yang dilakukan akan mengubah seluruh alur task yang sedang berjalan\"]\n                      })\n                    })]\n                  })]\n                }),\n                children: /*#__PURE__*/_jsx(ExclamationCircleOutlined, {\n                  style: {\n                    color: \"gray\"\n                  }\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-8/12 flex justify-end\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" mx-2\",\n              children: /*#__PURE__*/_jsxs(ButtonSys, {\n                type: \"primary\",\n                onClick: function onClick() {\n                  setdrawertickettypescreate(true);\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \" mr-1\",\n                  children: /*#__PURE__*/_jsx(FilePlusIconSvg, {\n                    size: 15,\n                    color: \"#ffffff\"\n                  })\n                }), \"Tambah Pengaturan\"]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-2\",\n              children: /*#__PURE__*/_jsx(_Input, {\n                style: {\n                  width: \"20rem\"\n                },\n                placeholder: \"Nama tipe task..\",\n                allowClear: true,\n                onChange: function onChange(e) {\n                  setsearcingtickettypes(e.target.value);\n                  setloadingtickettypes(true);\n                  fetch(\"https://boiling-thicket-46501.herokuapp.com/getTicketTaskTypes?page=\".concat(pagetickettypes, \"&rows=\").concat(rowstickettypes, \"&keyword=\").concat(e.target.value, \"&sort_by=\").concat(sortingtickettypes.sort_by, \"&sort_type=\").concat(sortingtickettypes.sort_type), {\n                    method: \"GET\",\n                    headers: {\n                      'Authorization': JSON.parse(initProps)\n                    }\n                  }).then(function (res) {\n                    return res.json();\n                  }).then(function (res2) {\n                    setdatarawtickettypes(res2.data);\n                    setdatatickettypes(res2.data.data);\n                    setloadingtickettypes(false);\n                  });\n                }\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(TableCustomTicketTypes, {\n            dataSource: datatickettypes,\n            setDataSource: setdatatickettypes,\n            columns: columnsTicketTypes,\n            loading: loadingtickettypes,\n            setpraloading: setloadingtickettypes,\n            pageSize: rowstickettypes,\n            total: datarawtickettypes.total,\n            initProps: initProps,\n            setpage: setpagetickettypes,\n            pagefromsearch: pagetickettypes,\n            setdataraw: setdatarawtickettypes,\n            setsorting: setsortingtickettypes,\n            sorting: sortingtickettypes,\n            searching: searcingtickettypes\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(DrawerTicketTypeCreate, {\n      title: \"Pengaturan Baru\",\n      visible: drawertickettypescreate,\n      onClose: function onClose() {\n        setdrawertickettypescreate(false);\n      },\n      buttonOkText: \"Simpan Pengaturan\",\n      initProps: initProps,\n      onvisible: setdrawertickettypescreate,\n      refreshtickettypescreate: refreshtickettypescreate,\n      setrefreshtickettypescreate: setrefreshtickettypescreate\n    }), /*#__PURE__*/_jsx(DrawerTicketTypeUpdate, {\n      title: \"Ubah Pengaturan\",\n      visible: drawertickettypesupdate,\n      onClose: function onClose() {\n        setdrawertickettypesupdate(false);\n      },\n      buttonOkText: \"Simpan Pengaturan\",\n      initProps: initProps,\n      onvisible: setdrawertickettypesupdate,\n      refresh: refreshtickettypesupdate,\n      setrefresh: setrefreshtickettypesupdate,\n      datapayload: datapayloadtickettype,\n      setdatapayload: setdatapayloadtickettype,\n      disabledsubmit: disabledupdate,\n      setdisabledsubmit: setdisabledupdate\n    }), /*#__PURE__*/_jsx(ModalHapusTipeTiket, {\n      title: \"Konfirmasi Hapus Pengaturan\",\n      visible: modaltickettypesdelete,\n      onvisible: setmodaltickettypesdelete,\n      onCancel: function onCancel() {\n        setmodaltickettypesdelete(false);\n      },\n      loading: loadingtickettypesdelete,\n      datadelete: datatickettypesdelete,\n      onOk: handleDeleteTipeTiket\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default TicketTypes;","map":null,"metadata":{},"sourceType":"module"}