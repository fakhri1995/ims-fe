{"ast":null,"code":"import _Table from \"antd/lib/table\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _Select from \"antd/lib/select\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport _notification from \"antd/lib/notification\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/agents/index.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\n\nfunction Agents(_ref) {\n  _s();\n\n  var _this = this;\n\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      dataListAgent = _ref.dataListAgent,\n      sidemenu = _ref.sidemenu;\n  var rt = useRouter();\n  var location_id1 = \"\",\n      name1 = \"\",\n      is_enabled1 = \"\";\n  var _rt$query = rt.query,\n      location_id = _rt$query.location_id,\n      name = _rt$query.name,\n      is_enabled = _rt$query.is_enabled;\n\n  if (location_id) {\n    location_id1 = location_id;\n  }\n\n  if (name) {\n    name1 = name;\n  }\n\n  if (is_enabled) {\n    is_enabled1 = is_enabled;\n  } //data payload\n\n\n  var _useState = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  }),\n      rawdata = _useState[0],\n      setrawdata = _useState[1]; //data lokasi\n\n\n  var _useState2 = useState([]),\n      datalokasi = _useState2[0],\n      setdatalokasi = _useState2[1]; //loading pre render\n\n\n  var _useState3 = useState(false),\n      datarawloading = _useState3[0],\n      setdatarawloading = _useState3[1]; //loading pre render\n\n\n  var _useState4 = useState(true),\n      praloading = _useState4[0],\n      setpraloading = _useState4[1]; //data agents\n\n\n  var _useState5 = useState([]),\n      dataagents = _useState5[0],\n      setdataagents = _useState5[1]; //state row table\n\n\n  var _useState6 = useState(0),\n      rowstate = _useState6[0],\n      setrowstate = _useState6[1]; //FILTER\n\n\n  var _useState7 = useState(name1 === \"\" ? false : true),\n      namasearchact = _useState7[0],\n      setnamasearchact = _useState7[1];\n\n  var _useState8 = useState(location_id1 === \"\" ? false : true),\n      asallokasifilteract = _useState8[0],\n      setasallokasifilteract = _useState8[1];\n\n  var _useState9 = useState(is_enabled1 === \"\" ? false : true),\n      statusfilteract = _useState9[0],\n      setstatusfilteract = _useState9[1];\n\n  var _useState10 = useState(null),\n      namavalue = _useState10[0],\n      setnamavalue = _useState10[1];\n\n  var _useState11 = useState(null),\n      asallokasivalue = _useState11[0],\n      setasallokasivalue = _useState11[1];\n\n  var _useState12 = useState(null),\n      statusvalue = _useState12[0],\n      setstatusvalue = _useState12[1];\n\n  var _useState13 = useState(location_id1),\n      namaasset = _useState13[0],\n      setnamaasset = _useState13[1];\n\n  var _useState14 = useState(null),\n      defasset = _useState14[0],\n      setdefasset = _useState14[1];\n\n  var tok = initProps;\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  var originPath = rt.query.originPath;\n  var columnsDD = [{\n    dataIndex: \"profil_image\",\n    key: \"profil_image\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: record.profile_image,\n            alt: \"imageProfile\",\n            className: \" object-cover w-10 h-10 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Nama\",\n    dataIndex: \"name\"\n  }, {\n    title: \"Email\",\n    dataIndex: \"email\"\n  }, {\n    title: \"Posisi\",\n    dataIndex: \"position\"\n  }, {\n    title: \"No. Handphone\",\n    dataIndex: \"phone_number\"\n  }, {\n    title: \"Asal Lokasi\",\n    dataIndex: \"company_name\"\n  }, {\n    title: \"Status\",\n    dataIndex: \"is_enabled\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.is_enabled ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md w-auto h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\",\n            children: \"Aktif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md w-auto h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\",\n            children: \"Non-aktif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false)\n      };\n    }\n  }]; //filtering\n\n  var onChangeSearch = function onChangeSearch(e) {\n    if (e.target.value === \"\") {\n      window.location.href = \"/admin/agents?name=&location_id=\".concat(asallokasifilteract ? location_id1 : \"\", \"&is_enabled=\").concat(statusfilteract ? is_enabled1 : \"\");\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n\n  var onChangeAsalLokasi = function onChangeAsalLokasi(value) {\n    if (typeof value === \"undefined\") {\n      window.location.href = \"/admin/agents?name=\".concat(namasearchact ? name1 : \"\", \"&location_id=&is_enabled=\").concat(statusfilteract ? is_enabled1 : \"\");\n      setasallokasifilteract(false);\n    } else {\n      setasallokasifilteract(true);\n      setasallokasivalue(value);\n    }\n  };\n\n  var onChangeStatus = function onChangeStatus(value) {\n    if (typeof value === \"undefined\") {\n      window.location.href = \"/admin/agents?name=\".concat(namasearchact ? name1 : \"\", \"&location_id=\").concat(asallokasifilteract ? location_id1 : \"\", \"&is_enabled=\");\n      setstatusfilteract(false);\n    } else {\n      setstatusfilteract(true);\n      setstatusvalue(value);\n    }\n  };\n\n  var onFinalClick = function onFinalClick() {\n    window.location.href = \"/admin/agents?name=\".concat(namasearchact ? namavalue === null ? name1 : namavalue : \"\", \"&location_id=\").concat(asallokasifilteract ? asallokasivalue === null ? location_id1 : asallokasivalue : \"\", \"&is_enabled=\").concat(statusfilteract ? statusvalue === \"\" ? is_enabled1 : statusvalue : \"\");\n  }; //useEffect\n\n\n  useEffect(function () {\n    setpraloading(true);\n    setdatarawloading(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAgentList?name=\").concat(name1, \"&company_id=\").concat(location_id1).concat(is_enabled1 === \"\" ? \"\" : \"&is_enabled=\".concat(is_enabled1)), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setrawdata(res2.data);\n      var dataDD = [];\n\n      if (!res2) {\n        dataDD = [];\n\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        rt.push(\"/dashboard/admin\");\n      } else {\n        dataDD = res2.data.data.map(function (doc, idx) {\n          return {\n            nomor: idx + 1,\n            id: doc.id,\n            profile_image: doc.profile_image === \"-\" || doc.profile_image === \"\" ? \"/default-users.jpeg\" : doc.profile_image,\n            name: doc.name,\n            email: doc.email,\n            phone_number: doc.phone_number,\n            company_name: doc.company_name,\n            is_enabled: doc.is_enabled,\n            company_id: doc.company_id,\n            position: doc.position\n          };\n        });\n      }\n\n      setdataagents(dataDD);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getBranchCompanyList\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var selectedBranchCompany = {};\n\n      var recursiveSearchBranchCompany = function recursiveSearchBranchCompany(doc, key) {\n        for (var i = 0; i < doc.length; i++) {\n          if (doc[i].id === key) {\n            selectedBranchCompany = doc[i];\n          } else {\n            if (doc[i].children) {\n              recursiveSearchBranchCompany(doc[i].children, key);\n            }\n          }\n        }\n      };\n\n      recursiveSearchBranchCompany([res2.data], Number(namaasset));\n      setdefasset(selectedBranchCompany.key);\n      setdatalokasi([res2.data]);\n      setdatarawloading(false);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: tok,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    sidemenu: sidemenu,\n    originPath: originPath,\n    st: st,\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold text-base w-auto\",\n            children: \"Agents\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this),\n        /*#__PURE__*/\n        // [109].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n        _jsxDEV(\"div\", {\n          className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: {\n              pathname: \"/admin/agents/create/\"\n            },\n            children: /*#__PURE__*/_jsxDEV(_Button, {\n              size: \"large\",\n              type: \"primary\",\n              children: \"Tambah\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this),\n      /*#__PURE__*/\n      // [108].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n      _jsxDEV(\"div\", {\n        className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n          children: [datarawloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex mb-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" w-10/12 mr-1 grid grid-cols-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-3 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_Input, {\n                  defaultValue: name1,\n                  style: {\n                    width: \"100%\",\n                    marginRight: \"0.5rem\"\n                  },\n                  placeholder: \"Cari nama agent\",\n                  onChange: onChangeSearch,\n                  allowClear: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-2 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                  defaultValue: location_id1 === \"\" ? null : Number(defasset),\n                  allowClear: true,\n                  dropdownStyle: {\n                    maxHeight: 400,\n                    overflow: \"auto\"\n                  },\n                  treeData: datalokasi,\n                  placeholder: \"Cari asal lokasi agent\",\n                  treeDefaultExpandAll: true,\n                  style: {\n                    width: \"100%\",\n                    marginRight: \"0.5rem\"\n                  },\n                  onChange: onChangeAsalLokasi\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-1 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_Select, {\n                  defaultValue: is_enabled1 === \"\" ? null : is_enabled1 === \"true\" ? true : false,\n                  placeholder: \"Pilih status agent\",\n                  style: {\n                    width: \"100%\",\n                    marginRight: \"0.5rem\"\n                  },\n                  onChange: onChangeStatus,\n                  allowClear: true,\n                  children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: true,\n                    children: \"Aktif\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 331,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: false,\n                    children: \"Non Aktif\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2/12\",\n              children: /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                style: {\n                  width: \"100%\"\n                },\n                onClick: onFinalClick,\n                children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(_Table, {\n            pagination: {\n              pageSize: 10,\n              total: rawdata.total,\n              onChange: function onChange(page, pageSize) {\n                setpraloading(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAgentList?page=\").concat(page, \"&rows=10&name=\").concat(name1, \"&company_id=\").concat(location_id1).concat(is_enabled1 === \"\" ? \"\" : \"&is_enabled=\".concat(is_enabled1)), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setrawdata(res2.data);\n                  var temppagination = res2.data.data.map(function (doc, idx) {\n                    return _objectSpread(_objectSpread({}, doc), {}, {\n                      profile_image: doc.profile_image === \"-\" || doc.profile_image === \"\" ? \"/default-users.jpeg\" : doc.profile_image\n                    });\n                  });\n                  setdataagents(temppagination);\n                  setpraloading(false);\n                });\n              }\n            },\n            scroll: {\n              x: 200\n            },\n            dataSource: dataagents,\n            columns: columnsDD,\n            loading: praloading,\n            onRow: function onRow(record, rowIndex) {\n              return {\n                onMouseOver: function onMouseOver(event) {\n                  setrowstate(record.id);\n                },\n                onClick: function onClick(event) {\n                  {\n                    // [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                    rt.push(\"/admin/agents/detail/\".concat(record.id)); // :\n                    // null\n                  }\n                }\n              };\n            },\n            rowClassName: function rowClassName(record, idx) {\n              return record.id === rowstate ? \"cursor-pointer\" : \"\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Agents, \"7Ss+Z4eH5RFhu9VAaDxiyINMzAw=\", false, function () {\n  return [useRouter];\n});\n\n_c = Agents;\nexport var __N_SSP = true;\nexport default Agents;\n\nvar _c;\n\n$RefreshReg$(_c, \"Agents\");","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/agents/index.js"],"names":["SearchOutlined","Link","useRouter","useEffect","useState","Layout","st","Agents","initProps","dataProfile","dataListAgent","sidemenu","rt","location_id1","name1","is_enabled1","query","location_id","name","is_enabled","current_page","data","first_page_url","from","last_page","last_page_url","next_page_url","path","per_page","prev_page_url","to","total","rawdata","setrawdata","datalokasi","setdatalokasi","datarawloading","setdatarawloading","praloading","setpraloading","dataagents","setdataagents","rowstate","setrowstate","namasearchact","setnamasearchact","asallokasifilteract","setasallokasifilteract","statusfilteract","setstatusfilteract","namavalue","setnamavalue","asallokasivalue","setasallokasivalue","statusvalue","setstatusvalue","namaasset","setnamaasset","defasset","setdefasset","tok","pathArr","pathname","split","slice","originPath","columnsDD","dataIndex","key","render","text","record","index","children","profile_image","title","onChangeSearch","e","target","value","window","location","href","onChangeAsalLokasi","onChangeStatus","onFinalClick","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","then","res","json","res2","dataDD","message","errorInfo","status_detail","duration","push","map","doc","idx","nomor","id","email","phone_number","company_name","company_id","position","selectedBranchCompany","recursiveSearchBranchCompany","i","length","Number","width","marginRight","maxHeight","overflow","pageSize","onChange","page","temppagination","x","rowIndex","onMouseOver","event","onClick"],"mappings":"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","sourcesContent":["import { SearchOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Select, Table, TreeSelect, notification } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\n\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction Agents({ initProps, dataProfile, dataListAgent, sidemenu }) {\n  const rt = useRouter();\n  var location_id1 = \"\",\n    name1 = \"\",\n    is_enabled1 = \"\";\n  const { location_id, name, is_enabled } = rt.query;\n  if (location_id) {\n    location_id1 = location_id;\n  }\n  if (name) {\n    name1 = name;\n  }\n  if (is_enabled) {\n    is_enabled1 = is_enabled;\n  }\n  //data payload\n  const [rawdata, setrawdata] = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null,\n  });\n  //data lokasi\n  const [datalokasi, setdatalokasi] = useState([]);\n  //loading pre render\n  const [datarawloading, setdatarawloading] = useState(false);\n  //loading pre render\n  const [praloading, setpraloading] = useState(true);\n  //data agents\n  const [dataagents, setdataagents] = useState([]);\n  //state row table\n  const [rowstate, setrowstate] = useState(0);\n  //FILTER\n  const [namasearchact, setnamasearchact] = useState(\n    name1 === \"\" ? false : true\n  );\n  const [asallokasifilteract, setasallokasifilteract] = useState(\n    location_id1 === \"\" ? false : true\n  );\n  const [statusfilteract, setstatusfilteract] = useState(\n    is_enabled1 === \"\" ? false : true\n  );\n  const [namavalue, setnamavalue] = useState(null);\n  const [asallokasivalue, setasallokasivalue] = useState(null);\n  const [statusvalue, setstatusvalue] = useState(null);\n  const [namaasset, setnamaasset] = useState(location_id1);\n  const [defasset, setdefasset] = useState(null);\n  const tok = initProps;\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  const { originPath } = rt.query;\n\n  const columnsDD = [\n    {\n      dataIndex: \"profil_image\",\n      key: `profil_image`,\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>\n              <img\n                src={record.profile_image}\n                alt=\"imageProfile\"\n                className=\" object-cover w-10 h-10 rounded-full\"\n              />\n            </>\n          ),\n        };\n      },\n    },\n    {\n      title: \"Nama\",\n      dataIndex: \"name\",\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"email\",\n    },\n    {\n      title: \"Posisi\",\n      dataIndex: \"position\",\n    },\n    {\n      title: \"No. Handphone\",\n      dataIndex: \"phone_number\",\n    },\n    {\n      title: \"Asal Lokasi\",\n      dataIndex: \"company_name\",\n    },\n    {\n      title: \"Status\",\n      dataIndex: \"is_enabled\",\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>\n              {record.is_enabled ? (\n                <div className=\"rounded-md w-auto h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\">\n                  Aktif\n                </div>\n              ) : (\n                <div className=\"rounded-md w-auto h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\">\n                  {\"Non-aktif\"}\n                </div>\n              )}\n            </>\n          ),\n        };\n      },\n    },\n  ];\n\n  //filtering\n  const onChangeSearch = (e) => {\n    if (e.target.value === \"\") {\n      window.location.href = `/admin/agents?name=&location_id=${\n        asallokasifilteract ? location_id1 : \"\"\n      }&is_enabled=${statusfilteract ? is_enabled1 : \"\"}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n  const onChangeAsalLokasi = (value) => {\n    if (typeof value === \"undefined\") {\n      window.location.href = `/admin/agents?name=${\n        namasearchact ? name1 : \"\"\n      }&location_id=&is_enabled=${statusfilteract ? is_enabled1 : \"\"}`;\n      setasallokasifilteract(false);\n    } else {\n      setasallokasifilteract(true);\n      setasallokasivalue(value);\n    }\n  };\n  const onChangeStatus = (value) => {\n    if (typeof value === \"undefined\") {\n      window.location.href = `/admin/agents?name=${\n        namasearchact ? name1 : \"\"\n      }&location_id=${asallokasifilteract ? location_id1 : \"\"}&is_enabled=`;\n      setstatusfilteract(false);\n    } else {\n      setstatusfilteract(true);\n      setstatusvalue(value);\n    }\n  };\n  const onFinalClick = () => {\n    window.location.href = `/admin/agents?name=${\n      namasearchact ? (namavalue === null ? name1 : namavalue) : \"\"\n    }&location_id=${\n      asallokasifilteract\n        ? asallokasivalue === null\n          ? location_id1\n          : asallokasivalue\n        : \"\"\n    }&is_enabled=${\n      statusfilteract ? (statusvalue === \"\" ? is_enabled1 : statusvalue) : \"\"\n    }`;\n  };\n\n  //useEffect\n  useEffect(() => {\n    setpraloading(true);\n    setdatarawloading(true);\n    fetch(\n      `${\n        process.env.NEXT_PUBLIC_BACKEND_URL\n      }/getAgentList?name=${name1}&company_id=${location_id1}${\n        is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`\n      }`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        setrawdata(res2.data);\n        var dataDD = [];\n        if (!res2) {\n          dataDD = [];\n          notification[\"error\"]({\n            message: res2.message.errorInfo.status_detail,\n            duration: 3,\n          });\n          rt.push(\"/dashboard/admin\");\n        } else {\n          dataDD = res2.data.data.map((doc, idx) => {\n            return {\n              nomor: idx + 1,\n              id: doc.id,\n              profile_image:\n                doc.profile_image === \"-\" || doc.profile_image === \"\"\n                  ? `/default-users.jpeg`\n                  : doc.profile_image,\n              name: doc.name,\n              email: doc.email,\n              phone_number: doc.phone_number,\n              company_name: doc.company_name,\n              is_enabled: doc.is_enabled,\n              company_id: doc.company_id,\n              position: doc.position,\n            };\n          });\n        }\n        setdataagents(dataDD);\n        setpraloading(false);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getBranchCompanyList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var selectedBranchCompany = {};\n        const recursiveSearchBranchCompany = (doc, key) => {\n          for (var i = 0; i < doc.length; i++) {\n            if (doc[i].id === key) {\n              selectedBranchCompany = doc[i];\n            } else {\n              if (doc[i].children) {\n                recursiveSearchBranchCompany(doc[i].children, key);\n              }\n            }\n          }\n        };\n        recursiveSearchBranchCompany([res2.data], Number(namaasset));\n        setdefasset(selectedBranchCompany.key);\n        setdatalokasi([res2.data]);\n        setdatarawloading(false);\n      });\n  }, []);\n  return (\n    <Layout\n      tok={tok}\n      dataProfile={dataProfile}\n      pathArr={pathArr}\n      sidemenu={sidemenu}\n      originPath={originPath}\n      st={st}\n    >\n      <>\n        <div className=\"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\">\n          <div className=\" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\">\n            <div className=\"font-semibold text-base w-auto\">Agents</div>\n          </div>\n          {\n            // [109].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n            <div className=\" col-span-1 md:col-span-1 flex md:justify-end items-center\">\n              <Link\n                href={{\n                  pathname: \"/admin/agents/create/\",\n                }}\n              >\n                <Button size=\"large\" type=\"primary\">\n                  Tambah\n                </Button>\n              </Link>\n            </div>\n          }\n        </div>\n        {\n          // [108].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n          <div className=\"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\">\n            <div className=\"md:col-span-5 col-span-1 flex flex-col py-3\">\n              {datarawloading ? null : (\n                <div className=\"flex mb-8\">\n                  <div className=\" w-10/12 mr-1 grid grid-cols-6\">\n                    <div className=\"col-span-3 mr-1\">\n                      <Input\n                        defaultValue={name1}\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        placeholder=\"Cari nama agent\"\n                        onChange={onChangeSearch}\n                        allowClear\n                      ></Input>\n                    </div>\n                    <div className=\"col-span-2 mr-1\">\n                      <TreeSelect\n                        defaultValue={\n                          location_id1 === \"\" ? null : Number(defasset)\n                        }\n                        allowClear\n                        dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                        treeData={datalokasi}\n                        placeholder=\"Cari asal lokasi agent\"\n                        treeDefaultExpandAll\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        onChange={onChangeAsalLokasi}\n                      />\n                    </div>\n                    <div className=\"col-span-1 mr-1\">\n                      <Select\n                        defaultValue={\n                          is_enabled1 === \"\"\n                            ? null\n                            : is_enabled1 === \"true\"\n                            ? true\n                            : false\n                        }\n                        placeholder=\"Pilih status agent\"\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        onChange={onChangeStatus}\n                        allowClear\n                      >\n                        <Select.Option value={true}>Aktif</Select.Option>\n                        <Select.Option value={false}>Non Aktif</Select.Option>\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"w-2/12\">\n                    <Button\n                      type=\"primary\"\n                      style={{ width: `100%` }}\n                      onClick={onFinalClick}\n                    >\n                      <SearchOutlined />\n                    </Button>\n                    {/* <Button style={{ width: `40%` }} onClick={() => { setdataagents(dataraw) }}>Reset</Button> */}\n                  </div>\n                </div>\n              )}\n              <Table\n                pagination={{\n                  pageSize: 10,\n                  total: rawdata.total,\n                  onChange: (page, pageSize) => {\n                    setpraloading(true);\n                    fetch(\n                      `${\n                        process.env.NEXT_PUBLIC_BACKEND_URL\n                      }/getAgentList?page=${page}&rows=10&name=${name1}&company_id=${location_id1}${\n                        is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`\n                      }`,\n                      {\n                        method: `GET`,\n                        headers: {\n                          Authorization: JSON.parse(initProps),\n                        },\n                      }\n                    )\n                      .then((res) => res.json())\n                      .then((res2) => {\n                        setrawdata(res2.data);\n                        var temppagination = res2.data.data.map((doc, idx) => ({\n                          ...doc,\n                          profile_image:\n                            doc.profile_image === \"-\" ||\n                            doc.profile_image === \"\"\n                              ? `/default-users.jpeg`\n                              : doc.profile_image,\n                        }));\n                        setdataagents(temppagination);\n                        setpraloading(false);\n                      });\n                  },\n                }}\n                scroll={{ x: 200 }}\n                dataSource={dataagents}\n                columns={columnsDD}\n                loading={praloading}\n                onRow={(record, rowIndex) => {\n                  return {\n                    onMouseOver: (event) => {\n                      setrowstate(record.id);\n                    },\n                    onClick: (event) => {\n                      {\n                        // [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                        rt.push(`/admin/agents/detail/${record.id}`);\n                        // :\n                        // null\n                      }\n                    },\n                  };\n                }}\n                rowClassName={(record, idx) => {\n                  return record.id === rowstate ? `cursor-pointer` : ``;\n                }}\n              ></Table>\n            </div>\n          </div>\n        }\n      </>\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const reqBodyAccountList = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\",\n  };\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      // dataListAgent,\n      sidemenu: \"61\",\n    },\n  };\n}\n\nexport default Agents;\n"]},"metadata":{},"sourceType":"module"}