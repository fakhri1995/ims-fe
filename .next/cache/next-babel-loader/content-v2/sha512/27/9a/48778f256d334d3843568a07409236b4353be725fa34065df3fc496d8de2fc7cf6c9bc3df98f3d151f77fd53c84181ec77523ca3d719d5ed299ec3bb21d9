{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport _Spin from \"antd/lib/spin\";\nimport _Input from \"antd/lib/input\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _Collapse from \"antd/lib/collapse\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport httpcookie from 'cookie';\nimport { ArrowRightOutlined, ArrowLeftOutlined, DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport Layout from '../../../components/layout-dashboard';\nimport st from '../../../components/layout-dashboard.module.css';\nimport ScrollTo from \"react-scroll-into-view\";\nimport Sticky from 'wil-react-sticky';\n\nconst ModulesIndex = ({\n  initProps,\n  dataProfile,\n  dataListModules,\n  dataListFeatures,\n  sidemenu\n}) => {\n  //Initialization\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  const {\n    Panel\n  } = _Collapse;\n  const {\n    module,\n    featuredisplay,\n    feature\n  } = rt.query; //useState\n  //1. Basic\n\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true);\n  const {\n    0: loop,\n    1: setloop\n  } = useState([]);\n  const {\n    0: tabnameArrVal,\n    1: settabnameArrVal\n  } = useState(loop);\n  const {\n    0: datamodules,\n    1: setdatamodules\n  } = useState([{\n    name: \"\",\n    description: \"\",\n    features: []\n  }]);\n  const {\n    0: datamodules2,\n    1: setdatamodules2\n  } = useState([{\n    name: \"\",\n    description: \"\",\n    features: []\n  }]);\n  const {\n    0: datamodules3,\n    1: setdatamodules3\n  } = useState([{\n    name: \"\",\n    description: \"\",\n    features: []\n  }]); // const [currentselectkateg, setcurrentselectkateg] = useState(datamodules[0].name)\n  // const [currentdesctkateg, setcurrentdesckateg] = useState(datamodules[0].description)\n  // const [datafeature, setdatafeature] = useState(datamodules[0].feature)\n  //2. Create\n\n  const {\n    0: datatambahmodule,\n    1: setdatatambahmodule\n  } = useState({\n    name: '',\n    description: '',\n    feature_ids: []\n  });\n  const {\n    0: drawablecreate,\n    1: setdrawablecreate\n  } = useState(false);\n  const {\n    0: modalcreate,\n    1: setmodalcreate\n  } = useState(false);\n  const {\n    0: loadiingcreate,\n    1: setloadingcreate\n  } = useState(false); //3. Update\n\n  const {\n    0: dataeditmodule,\n    1: setdataeditmodule\n  } = useState({\n    id: 0,\n    feature_ids: []\n  });\n  const {\n    0: drawableedit,\n    1: setdrawableedit\n  } = useState(false);\n  const {\n    0: loadiingupdate,\n    1: setloadingupdate\n  } = useState(false); //4. Delete\n\n  const {\n    0: datadeletemodule,\n    1: setdatadeletemodule\n  } = useState({\n    id: 0\n  });\n  const {\n    0: datadeletefeature,\n    1: setdatadeletefeature\n  } = useState({\n    id: 0\n  });\n  const {\n    0: modaldelete,\n    1: setmodaldelete\n  } = useState(false);\n  const {\n    0: loadiingdelete,\n    1: setloadingdelete\n  } = useState(false);\n  const {\n    0: modaldelete2,\n    1: setmodaldelete2\n  } = useState(false);\n  const {\n    0: loadiingdelete2,\n    1: setloadingdelete2\n  } = useState(false); //5. Features list\n\n  const {\n    0: listfeat,\n    1: setlistfeat\n  } = useState([{\n    id: \"\",\n    feature_id: \"\",\n    feature_key: \"\",\n    name: \"\",\n    description: \"\",\n    deleted_at: null\n  }]);\n  const {\n    0: listfeat2,\n    1: setlistfeat2\n  } = useState([{\n    id: \"\",\n    feature_id: \"\",\n    feature_key: \"\",\n    name: \"\",\n    description: \"\",\n    deleted_at: null\n  }]);\n  const {\n    0: listfeat3,\n    1: setlistfeat3\n  } = useState([{\n    id: \"\",\n    feature_id: \"\",\n    feature_key: \"\",\n    name: \"\",\n    description: \"\",\n    deleted_at: null\n  }]);\n  const {\n    0: loadinglistfeat,\n    1: setloadinglistfeat\n  } = useState(true);\n  const {\n    0: checkedfeatures,\n    1: setcheckedfeatures\n  } = useState(0);\n  const {\n    0: checkeddatafeatures,\n    1: setcheckeddatafeatures\n  } = useState([]);\n  const {\n    0: praloadingfeature,\n    1: setpraloadingfeature\n  } = useState(true);\n  const {\n    0: featurecounter,\n    1: setfeaturecounter\n  } = useState(0);\n  const {\n    0: searchfeature,\n    1: setsearchfeature\n  } = useState(\"\"); //6. Module list\n\n  const {\n    0: checkedmodules,\n    1: setcheckedmodules\n  } = useState(0);\n  const {\n    0: checkedfeaturemodules,\n    1: setcheckedfeaturemodules\n  } = useState([]);\n  const {\n    0: checkeddatamodules,\n    1: setcheckeddatamodules\n  } = useState([]);\n  const {\n    0: idmodulemap,\n    1: setidmodulemap\n  } = useState([]);\n  const {\n    0: moduletrigger,\n    1: setmoduletrigger\n  } = useState(false);\n  const {\n    0: modaldeletefeatmodule,\n    1: setmodaldeletefeatmodule\n  } = useState(false);\n  const {\n    0: loadingdeletefeatmodule,\n    1: setloadingdeletefeatmodule\n  } = useState(false);\n  const {\n    0: praloadingmodule,\n    1: setpraloadingmodule\n  } = useState(true);\n  const {\n    0: praloadingmodulefeat,\n    1: setpraloadingmodulefeat\n  } = useState(module !== \"\" || typeof module !== 'undefined' ? false : true);\n  const {\n    0: modulecounter,\n    1: setmodulecounter\n  } = useState(0);\n  const {\n    0: searchmodulefeature,\n    1: setsearchmodulefeature\n  } = useState(\"\");\n  const {\n    0: scrolltrigger,\n    1: setscrolltrigger\n  } = useState(0); //7.arrow\n\n  const {\n    0: displayarrow,\n    1: setdisplayarrow\n  } = useState(featuredisplay === \"\" || typeof featuredisplay === 'undefined' ? false : true);\n  const {\n    0: rightstatus,\n    1: setrightstatus\n  } = useState(true);\n  const {\n    0: leftstatus,\n    1: setleftstatus\n  } = useState(true); //event\n\n  const onChangeTab = (e, idxjenis, namakateg, deskripsi, id, feature) => {\n    const temp3 = tabnameArrVal;\n    temp3[idxjenis] = \"block\";\n    settabnameArrVal(temp3);\n\n    for (var i = 0; i < tabnameArrVal.length; i++) {\n      if (i != idxjenis) {\n        const temp4 = tabnameArrVal;\n        temp4[i] = \"hidden\";\n        settabnameArrVal(temp4);\n      }\n    }\n\n    setdataeditmodule(_objectSpread(_objectSpread({}, dataeditmodule), {}, {\n      id: id,\n      feature_ids: feature.map(doc => doc.id)\n    }));\n    setdatadeletemodule({\n      id: id\n    });\n    setdatafeature(feature);\n    setcurrentselectkateg(namakateg);\n    setcurrentdesckateg(deskripsi);\n  };\n\n  const onChangeTabSmall = namakateg => {\n    setcurrentselectkateg(namakateg);\n    var variable = {};\n\n    if (namakateg != 'all') {\n      variable = datamodules.filter(dataa => {\n        return dataa.name == namakateg;\n      }).map((doc, idx) => {\n        return {\n          idxjenis: idx + 1,\n          id: doc.id,\n          name: doc.name,\n          description: doc.description,\n          feature: doc.feature\n        };\n      })[0];\n    }\n\n    const temp3 = tabnameArrVal;\n    temp3[variable.idxjenis] = \"block\";\n    settabnameArrVal(temp3);\n\n    for (var i = 0; i < tabnameArrVal.length; i++) {\n      if (i != variable.idxjenis) {\n        const temp4 = tabnameArrVal;\n        temp4[i] = \"hidden\";\n        settabnameArrVal(temp4);\n      }\n    }\n\n    setdataeditmodule(_objectSpread(_objectSpread({}, dataeditmodule), {}, {\n      id: variable.id,\n      feature_ids: variable.feature.map(doc => doc.id)\n    }));\n    setdatadeletemodule({\n      id: variable.id\n    });\n    setdatafeature(variable.feature);\n    setcurrentselectkateg(namakateg);\n    setcurrentdesckateg(variable.description);\n  };\n\n  const onChangeCreateCheckbox = (e, id) => {\n    if (e.target.checked) {\n      const temp = datatambahmodule.feature_ids;\n      temp.push(id);\n      setdatatambahmodule(_objectSpread(_objectSpread({}, datatambahmodule), {}, {\n        feature_ids: temp\n      }));\n    } else {\n      var temp = datatambahmodule.feature_ids;\n      var idx = temp.indexOf(id);\n      temp.splice(idx, 1);\n      setdatatambahmodule(_objectSpread(_objectSpread({}, datatambahmodule), {}, {\n        feature_ids: temp\n      }));\n    }\n  };\n\n  const onChangeUpdateCheckbox = (e, id) => {\n    if (e.target.checked) {\n      const temp = dataeditmodule.feature_ids;\n      temp.push(id);\n      setdataeditmodule(_objectSpread(_objectSpread({}, dataeditmodule), {}, {\n        feature_ids: temp\n      }));\n    } else {\n      var temp = dataeditmodule.feature_ids;\n      var idx = temp.indexOf(id);\n      temp.splice(idx, 1);\n      setdataeditmodule(_objectSpread(_objectSpread({}, dataeditmodule), {}, {\n        feature_ids: temp\n      }));\n    }\n  };\n\n  const onChangeUpdateCheckbox2 = (e, id, idx) => {\n    if (e.target.checked) {\n      // var temp = checkedfeaturemodules\n      // temp[idx] = true\n      // setcheckedfeaturemodules(temp)\n      setcheckeddatamodules([...checkeddatamodules, id]);\n      checkeddatamodules.length > 0 ? setleftstatus(true) : setrightstatus(false);\n      checkeddatamodules.length > 0 ? setrightstatus(false) : setleftstatus(true);\n      setmodulecounter(previ => previ + 1);\n    } else {\n      // var temp2 = checkedfeaturemodules\n      // temp2[idx] = false\n      // setcheckedfeaturemodules(temp2)\n      var temp3 = checkeddatamodules;\n      var idx = temp3.indexOf(id);\n      temp3.splice(idx, 1);\n      setcheckeddatamodules(temp3);\n      checkeddatamodules.length > 0 ? setleftstatus(true) : setrightstatus(false);\n      checkeddatamodules.length > 0 ? setrightstatus(false) : setleftstatus(true);\n      setmodulecounter(previ => previ - 1);\n    }\n  };\n\n  const onChangeUpdateCheckbox3 = (e, id, idx) => {\n    checkeddatafeatures.length > 0 ? setleftstatus(false) : setrightstatus(true);\n    checkeddatamodules.length > 0 ? setrightstatus(true) : setleftstatus(false);\n\n    if (e.target.checked) {\n      // var temp = checkedfeaturemodules\n      // temp[idx] = true\n      // setcheckedfeaturemodules(temp)\n      setcheckeddatafeatures([...checkeddatafeatures, id]);\n      setfeaturecounter(previ => previ + 1);\n    } else {\n      // var temp2 = checkedfeaturemodules\n      // temp2[idx] = false\n      // setcheckedfeaturemodules(temp2)\n      var temp3 = checkeddatafeatures;\n      var idx = temp3.indexOf(id);\n      temp3.splice(idx, 1);\n      setcheckeddatafeatures(temp3);\n      setfeaturecounter(previ => previ - 1);\n    }\n  };\n\n  const onCheckedAll = e => {\n    if (e.target.checked) {\n      setCheckAll(true);\n      const status = idmodulemap.map(doc => true);\n      setcheckedfeaturemodules(status);\n      setcheckeddatamodules(idmodulemap);\n    } else {\n      setCheckAll(false);\n      const status = idmodulemap.map(doc => false);\n      setcheckedfeaturemodules(status);\n      setcheckeddatamodules([]);\n    }\n  }; //handler\n\n\n  const handleAddModuleFeature = () => {\n    setloadingcreate(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/addModuleFeature`, {\n      method: 'POST',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: Number(datamodules[checkedmodules].id),\n        feature_ids: checkeddatafeatures\n      })\n    }).then(res => res.json()).then(res2 => {\n      if (res2.success) {\n        _notification['success']({\n          message: 'Fitur berhasil didaftarkan',\n          duration: 3\n        });\n\n        setTimeout(() => {\n          setloadingcreate(false);\n          setmodalcreate(false);\n          window.location.href = `/admin/modules?module=${checkedmodules}&featuredisplay=1`;\n        }, 300);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        setloadingcreate(false);\n        setmodalcreate(false);\n      }\n    });\n  };\n\n  const handleDeleteModuleFeature = () => {\n    setloadingdeletefeatmodule(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/deleteModuleFeature`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: Number(datamodules[checkedmodules].id),\n        feature_ids: checkeddatamodules\n      })\n    }).then(res => res.json()).then(res2 => {\n      if (res2.success) {\n        _notification['success']({\n          message: 'Fitur berhasil dikeluarkan',\n          duration: 3\n        });\n\n        setTimeout(() => {\n          setloadingdeletefeatmodule(false);\n          setmodaldeletefeatmodule(false);\n          window.location.href = `/admin/modules?module=${checkedmodules}&featuredisplay=1`;\n        }, 300);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        setloadingdeletefeatmodule(false);\n        setmodaldeletefeatmodule(false);\n      }\n    });\n  };\n\n  const handleUpdate = () => {\n    setloadingupdate(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/updateModuleFeature`, {\n      method: 'POST',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(dataeditmodule)\n    }).then(res => res.json()).then(res2 => {\n      if (res2.success) {\n        _notification['success']({\n          message: res2.message,\n          duration: 3\n        });\n\n        setdataeditmodule({\n          id: 0,\n          feature_ids: []\n        });\n        setTimeout(() => {\n          setloadingupdate(false);\n          setdrawableedit(false);\n          window.location.href = `/admin/modules`;\n        }, 300);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        setloadingupdate(false);\n        setdrawableedit(false);\n      }\n    });\n  };\n\n  const handleDeleteModule = () => {\n    setloadingdelete(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/deleteModule`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(datadeletemodule)\n    }).then(res => res.json()).then(res2 => {\n      if (res2.success) {\n        _notification['success']({\n          message: 'Module berhasil dihapus',\n          duration: 3\n        });\n\n        setdatadeletemodule({\n          id: 0\n        });\n        setTimeout(() => {\n          setloadingdelete(false);\n          setmodaldelete(false);\n          window.location.href = `/admin/modules?module=&featuredisplay=`;\n        }, 300);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        setloadingdelete(false);\n        setmodaldelete(false);\n      }\n    });\n  };\n\n  const handleDeleteFeature = () => {\n    setloadingdelete2(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/deleteFeature`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(datadeletefeature)\n    }).then(res => res.json()).then(res2 => {\n      if (res2.success) {\n        _notification['success']({\n          message: 'Fitur berhasil dihapus',\n          duration: 3\n        });\n\n        setdatadeletefeature({\n          id: 0\n        });\n        setTimeout(() => {\n          setloadingdelete2(false);\n          setmodaldelete2(false);\n          window.location.href = `/admin/modules?module=&featuredisplay=`;\n        }, 300);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        setloadingdelete2(false);\n        setmodaldelete2(false);\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(() => {\n    fetch(`https://boiling-thicket-46501.herokuapp.com/getModules`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatamodules(res2.data);\n      setdatamodules2(res2.data);\n      setdatamodules3(res2.data); // setcurrentselectkateg(res2.data[0].name)\n      // setcurrentdesckateg(res2.data[0].description)\n      // setdatafeature(res2.data[0].feature)\n\n      var temp = loop;\n\n      for (var i = 0; i < res2.data.length; i++) {\n        i !== 0 ? temp.push(\"hidden\") : temp.push(\"block\");\n      }\n\n      setloop(temp);\n      setloadinglistfeat(false);\n      setidmodulemap(res2.data[Number(module)].features !== null ? res2.data[Number(module)].features.map((doc, idx) => doc.id) : []);\n      setcheckedmodules(module !== \"\" || typeof module !== 'undefined' ? Number(module) : 0);\n      setpraloadingmodule(false);\n    });\n  }, [moduletrigger]);\n  useEffect(() => {\n    fetch(`https://boiling-thicket-46501.herokuapp.com/getFeatures`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setlistfeat(res2.data);\n      setlistfeat2(res2.data);\n      setlistfeat3(res2.data);\n      setpraloadingfeature(false);\n    });\n  }, []);\n  useEffect(() => {\n    document.getElementById(`panel${scrolltrigger}`).scrollIntoView(true);\n  }, [scrolltrigger]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      id: \"containerListModules\",\n      className: \"w-full border-t border-opacity-30 border-gray-500\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"w-full border-b border-opacity-30 border-gray-400 flex items-center justify-between p-4 mb-5 bg-white\",\n        children: /*#__PURE__*/_jsx(\"h1\", {\n          className: \"font-bold\",\n          children: \"Modules\"\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-7\",\n        id: \"containerModules\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \" col-span-1 md:col-span-3 flex flex-col p-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex justify-between mb-2 md:mb-5\",\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"font-bold text-xl\",\n              children: \"Module\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              type: \"primary\",\n              onClick: () => {\n                rt.push(`/admin/modules/create/module?module=${datamodules.length}`);\n                console.log(idmodulemap);\n                console.log(listfeat);\n              },\n              children: \"Tambah\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mb-2 md:mb-5\",\n            children: /*#__PURE__*/_jsx(_Input, {\n              style: {\n                width: `100%`\n              },\n              placeholder: \"Cari module\",\n              onChange: e => {\n                if (e.target.value === \"\") {\n                  setdatamodules(datamodules3);\n                } else {\n                  const filtered = datamodules2.filter(flt => {\n                    return flt.name.toLowerCase().includes(e.target.value.toLowerCase());\n                  });\n                  setdatamodules(filtered);\n                }\n              }\n            })\n          }), praloadingmodule ? /*#__PURE__*/_jsx(\"div\", {\n            id: `panel0`,\n            className: \" flex justify-center\",\n            children: /*#__PURE__*/_jsx(_Spin, {\n              size: \"large\"\n            })\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            className: \" mb-2 md:mb-5\",\n            children: /*#__PURE__*/_jsx(_Collapse, {\n              accordion: true,\n              defaultActiveKey: module === \"\" || typeof module === 'undefined' ? -1 : Number(module),\n              onChange: value => {\n                if (typeof value === 'undefined') {\n                  setdisplayarrow(false);\n                  setrightstatus(true);\n                  setleftstatus(true);\n                  setmodulecounter(0);\n                  setfeaturecounter(0);\n                  setcheckeddatamodules([]);\n                  setcheckeddatafeatures([]);\n                  setpraloadingmodulefeat(true);\n                  setsearchmodulefeature(\"\");\n                } else {\n                  setpraloadingmodulefeat(false);\n                  setdisplayarrow(true);\n                  setcheckeddatamodules([]);\n                  setcheckeddatafeatures([]);\n                  setcheckedmodules(value);\n                  setmodulecounter(0);\n                  setfeaturecounter(0);\n                  setdatadeletemodule(_objectSpread(_objectSpread({}, datadeletemodule), {}, {\n                    id: datamodules[value].id\n                  }));\n                  datamodules[value].features ? setidmodulemap(datamodules[value].features.map((doc, idx) => doc.id)) : setidmodulemap([]);\n                  setscrolltrigger(value);\n                }\n              },\n              children: datamodules.map((doc, idx) => {\n                return /*#__PURE__*/_jsx(Panel, {\n                  id: `panel${idx}`,\n                  header: /*#__PURE__*/_jsx(\"strong\", {\n                    children: doc.name\n                  }),\n                  extra: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex\",\n                    children: [/*#__PURE__*/_jsx(EditOutlined, {\n                      style: {\n                        marginRight: `1rem`\n                      },\n                      onClick: () => {\n                        rt.push(`/admin/modules/update/module/${doc.id}?module=${idx}`);\n                      }\n                    }), /*#__PURE__*/_jsx(DeleteOutlined, {\n                      style: {\n                        color: `red`\n                      },\n                      onClick: () => {\n                        setmodaldelete(true);\n                      }\n                    })]\n                  }),\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex justify-between border-b pb-3 mb-3\",\n                      children: [/*#__PURE__*/_jsxs(\"div\", {\n                        children: [modulecounter, \"/\", doc.features ? doc.features.length : 0, \" \", checkeddatamodules.length > 1 ? \"items\" : \"item\"]\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        children: /*#__PURE__*/_jsxs(\"strong\", {\n                          children: [\"Feature yang terdaftar pada - Module \", doc.name]\n                        })\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-5\",\n                      children: /*#__PURE__*/_jsx(_Input, {\n                        placeholder: \"Cari feature terdaftar\",\n                        onChange: e => {\n                          setsearchmodulefeature(e.target.value.toLowerCase());\n                        }\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"overflow-y-auto flex flex-col h-48 mb-5 border-b pb-3\",\n                      children: praloadingmodulefeat ? null : /*#__PURE__*/_jsx(_Fragment, {\n                        children: doc.features ? doc.features.map((doc2, idx2) => {\n                          const st = checkeddatamodules.includes(doc2.id);\n\n                          if (doc2.name.toLowerCase().includes(searchmodulefeature.toLowerCase())) {\n                            return /*#__PURE__*/_jsxs(\"div\", {\n                              className: \"flex items-center my-2\",\n                              children: [/*#__PURE__*/_jsx(_Checkbox, {\n                                checked: st,\n                                onChange: e => {\n                                  onChangeUpdateCheckbox2(e, doc2.id, idx);\n                                },\n                                style: {\n                                  marginRight: `1rem`\n                                }\n                              }), \" \", doc2.name]\n                            });\n                          }\n                        }) : null\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      children: [/*#__PURE__*/_jsx(\"h1\", {\n                        className: \"font-semibold text-lg\",\n                        children: \"Deskripsi\"\n                      }), /*#__PURE__*/_jsx(\"p\", {\n                        className: \"text-xs mb-0\",\n                        children: doc.description\n                      })]\n                    })]\n                  })\n                }, idx);\n              })\n            })\n          })]\n        }), /*#__PURE__*/_jsx(Sticky, {\n          containerSelectorFocus: \"#containerModules\",\n          offsetTop: 400,\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \" col-span-1 md:col-span-1 flex flex-col justify-center items-center\",\n            children: displayarrow ? /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                onClick: () => {\n                  setmodaldeletefeatmodule(true);\n                  /*console.log(checkeddatamodules); console.log(datamodules[checkedmodules].feature)*/\n                },\n                disabled: rightstatus || modulecounter < 1,\n                style: {\n                  marginBottom: `0.5rem`\n                },\n                children: /*#__PURE__*/_jsx(ArrowRightOutlined, {})\n              }), /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                onClick: () => {\n                  setmodalcreate(true);\n                },\n                disabled: leftstatus || featurecounter < 1,\n                style: {\n                  marginBottom: `0.5rem`\n                },\n                children: /*#__PURE__*/_jsx(ArrowLeftOutlined, {})\n              })]\n            }) : null\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \" col-span-1 md:col-span-3 flex flex-col p-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex justify-between mb-2 md:mb-5\",\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"font-bold text-xl\",\n              children: \"Feature\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              type: \"primary\",\n              onClick: () => {\n                rt.push(`/admin/modules/create/feature?feature=${listfeat.length}`);\n              },\n              children: \"Tambah\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mb-2 md:mb-5\",\n            children: /*#__PURE__*/_jsx(_Input, {\n              style: {\n                width: `100%`\n              },\n              placeholder: \"Cari feature\",\n              onChange: e => {\n                if (e.target.value === \"\") {\n                  setlistfeat(listfeat3);\n                } else {\n                  const filtered = listfeat2.filter(flt => {\n                    return flt.name.toLowerCase().includes(e.target.value.toLowerCase());\n                  });\n                  setlistfeat(filtered);\n                }\n              }\n            })\n          }), praloadingfeature ? /*#__PURE__*/_jsx(_Spin, {\n            size: \"large\"\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            className: \" mb-2 md:mb-5\",\n            children: displayarrow ? /*#__PURE__*/_jsx(Sticky, {\n              containerSelectorFocus: \"#containerModules\",\n              offsetTop: 60,\n              children: datamodules.length > 0 ? /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col border p-2\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex justify-between border-b pb-3 mb-3\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    children: [featurecounter, \"/\", listfeat.length - idmodulemap.length, \" \", checkeddatafeatures.length > 1 ? \"items\" : \"item\"]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    children: /*#__PURE__*/_jsxs(\"strong\", {\n                      children: [\"Feature yang tidak terdaftar pada - Module \", datamodules[checkedmodules] ? datamodules[checkedmodules].name : \"\"]\n                    })\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-5\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    placeholder: \"Cari feature terdaftar\",\n                    onChange: e => {\n                      setsearchfeature(e.target.value.toLowerCase());\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"overflow-y-auto flex flex-col h-80 mb-5 border-b pb-5\",\n                  children: listfeat.map((doc3, idx3) => {\n                    const st = checkeddatafeatures.includes(doc3.id);\n\n                    if (!idmodulemap.includes(doc3.id)) {\n                      if (doc3.name.toLowerCase().includes(searchfeature.toLowerCase())) {\n                        return /*#__PURE__*/_jsxs(\"div\", {\n                          className: \"flex items-center my-1\",\n                          children: [/*#__PURE__*/_jsx(_Checkbox, {\n                            checked: st,\n                            style: {\n                              marginRight: `1rem`\n                            },\n                            onChange: e => {\n                              onChangeUpdateCheckbox3(e, doc3.id, idx3);\n                            },\n                            style: {\n                              marginRight: `1rem`\n                            }\n                          }), \" \", doc3.name]\n                        }, idx3);\n                      }\n                    }\n                  })\n                })]\n              }) : null\n            }) : /*#__PURE__*/_jsx(_Collapse, {\n              accordion: true,\n              defaultActiveKey: !feature ? -1 : Number(feature),\n              onChange: value => {\n                if (typeof value !== 'undefined') {\n                  setcheckeddatafeatures([]);\n                  setcheckedfeatures(value);\n                  setdatadeletefeature(_objectSpread(_objectSpread({}, datadeletefeature), {}, {\n                    id: listfeat[value].id\n                  }));\n                }\n              },\n              children: listfeat.map((doc, idx) => {\n                return /*#__PURE__*/_jsx(Panel, {\n                  header: doc.name,\n                  extra: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex\",\n                    children: [/*#__PURE__*/_jsx(EditOutlined, {\n                      style: {\n                        marginRight: `1rem`\n                      },\n                      onClick: () => {\n                        rt.push(`/admin/modules/update/feature/${doc.id}?feature=${idx}`);\n                      }\n                    }), /*#__PURE__*/_jsx(DeleteOutlined, {\n                      style: {\n                        color: `red`\n                      },\n                      onClick: () => {\n                        setmodaldelete2(true);\n                      }\n                    })]\n                  }),\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    children: doc.description\n                  })\n                }, idx);\n              })\n            })\n          })]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: `Konfirmasi Tambah Feature pada Module`,\n      visible: modalcreate,\n      onCancel: () => {\n        setloadingcreate(false);\n        setmodalcreate(false);\n      },\n      onOk: handleAddModuleFeature,\n      okButtonProps: {\n        loading: loadiingcreate\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      style: {\n        top: `3rem`\n      },\n      width: 500,\n      destroyOnClose: true,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          children: [\"Apakah anda yakin ingin menambahkan Feature berikut ke Module \", /*#__PURE__*/_jsx(\"strong\", {\n            children: datamodules[checkedmodules] ? datamodules[checkedmodules].name : null\n          }), \"?\"]\n        }), datamodules.length < 1 ? /*#__PURE__*/_jsx(\"p\", {\n          className: \"font-semibold\",\n          children: \"-\"\n        }) : /*#__PURE__*/_jsx(\"ol\", {\n          children: checkeddatafeatures.length > 0 ? listfeat.map((doc, idx) => {\n            if (checkeddatafeatures.includes(doc.id)) {\n              return /*#__PURE__*/_jsxs(\"li\", {\n                className: \"font-semibold\",\n                children: [\"-\", \" \", doc.name]\n              }, idx);\n            }\n          }) : \"-\"\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: `Konfirmasi Hapus Feature pada Module`,\n      visible: modaldeletefeatmodule,\n      onCancel: () => {\n        setloadingdeletefeatmodule(false);\n        setmodaldeletefeatmodule(false);\n      },\n      onOk: handleDeleteModuleFeature,\n      okButtonProps: {\n        loading: loadingdeletefeatmodule\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      style: {\n        top: `3rem`\n      },\n      width: 500,\n      destroyOnClose: true,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          children: [\"Apakah anda yakin ingin mengeluarkan Feature berikut dari Module \", /*#__PURE__*/_jsx(\"strong\", {\n            children: datamodules[checkedmodules] ? datamodules[checkedmodules].name : null\n          }), \"?\"]\n        }), datamodules.length < 1 ? /*#__PURE__*/_jsx(\"p\", {\n          className: \"font-semibold\",\n          children: \"----\"\n        }) : /*#__PURE__*/_jsx(\"ol\", {\n          children: checkeddatamodules.length > 0 && datamodules[checkedmodules].features ? datamodules[checkedmodules].features.map((doc, idx) => {\n            if (checkeddatamodules.includes(doc.id)) {\n              return /*#__PURE__*/_jsxs(\"li\", {\n                className: \"font-semibold\",\n                children: [\"- \", doc.name]\n              }, idx);\n            }\n          }) : \"-\"\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(_Modal, {\n      title: \"Konfirmasi hapus module\",\n      visible: modaldelete,\n      onOk: handleDeleteModule,\n      onCancel: () => setmodaldelete(false),\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      okButtonProps: {\n        loading: loadiingdelete\n      },\n      children: [/*#__PURE__*/_jsxs(\"p\", {\n        children: [\"Apakah anda yakin ingin menghapus Module \", /*#__PURE__*/_jsx(\"strong\", {\n          children: datamodules[checkedmodules] > 0 ? datamodules[checkedmodules].name : null\n        }), \" yang memiliki Feature berikut ini?\"]\n      }), datamodules[checkedmodules] ? /*#__PURE__*/_jsx(\"p\", {\n        className: \"font-semibold\",\n        children: \"-\"\n      }) : /*#__PURE__*/_jsx(\"ol\", {\n        children: datamodules[checkedmodules] ? datamodules[checkedmodules].features.map((doc, idx) => {\n          return /*#__PURE__*/_jsxs(\"li\", {\n            className: \"font-semibold\",\n            children: [idx + 1, \". \", doc.name]\n          }, idx);\n        }) : \"-\"\n      })]\n    }), /*#__PURE__*/_jsxs(_Modal, {\n      title: \"Konfirmasi hapus feature\",\n      visible: modaldelete2,\n      onOk: handleDeleteFeature,\n      onCancel: () => setmodaldelete2(false),\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      okButtonProps: {\n        loading: loadiingdelete2\n      },\n      children: [/*#__PURE__*/_jsxs(\"p\", {\n        children: [\"Apakah Anda yakin untuk menghapus fitur \", /*#__PURE__*/_jsx(\"strong\", {\n          children: listfeat.length > 0 ? listfeat[checkedfeatures].name : null\n        }), \" yang terdaftar pada modul:\"]\n      }), listfeat.length < 1 ? /*#__PURE__*/_jsx(\"p\", {\n        className: \"font-semibold\",\n        children: \"-\"\n      }) : /*#__PURE__*/_jsx(\"ol\", {\n        children: datamodules ? datamodules.map((doc, idx) => {\n          const status = doc.features !== null ? doc.features.map(doc => doc.id).includes(listfeat[checkedfeatures].id) : false;\n\n          if (status) {\n            return /*#__PURE__*/_jsxs(\"li\", {\n              className: \"font-semibold\",\n              children: [\"- \", doc.name]\n            }, idx);\n          }\n        }) : \"-\"\n      })]\n    })]\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resources = await fetch(`https://boiling-thicket-46501.herokuapp.com/detailProfile`, {\n    method: `GET`,\n    headers: {\n      'Authorization': JSON.parse(initProps)\n    }\n  });\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      // dataListModules,\n      // dataListFeatures,\n      sidemenu: \"72\"\n    }\n  };\n}\nexport default ModulesIndex;","map":null,"metadata":{},"sourceType":"module"}