{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Empty from \"antd/lib/empty\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport httpcookie from 'cookie';\nimport { SearchOutlined } from '@ant-design/icons';\nimport Layout from '../../../components/layout-dashboardNew';\nimport moment from 'moment';\nimport st from '../../../components/layout-dashboard.module.css';\nimport { CalendartimeIconSvg, CheckIconSvg, EditIconSvg, FileExportIconSvg, FilePlusIconSvg, ForbidIconSvg, InfoCircleIconSvg, PlusIconSvg, TicketIconSvg, UserIconSvg, UserSearchIconSvg, XIconSvg } from '../../../components/icon';\nimport { Chart, ArcElement, Tooltip, CategoryScale, LinearScale, LineElement, BarElement, PointElement } from 'chart.js';\nChart.register(ArcElement, Tooltip, CategoryScale, LinearScale, LineElement, BarElement, PointElement);\nimport { Doughnut, Bar, Line } from 'react-chartjs-2';\nimport { H1, H2, Text, Label } from '../../../components/typography';\nimport ButtonSys from '../../../components/button';\nimport { TableCustomTickets } from '../../../components/table/tableCustom';\nimport DrawerTicketCreate from '../../../components/drawer/tickets/drawerTicketCreate';\nimport { ModalCancelTiket, ModalNoteTiket, ModalReleaseItemTiket } from '../../../components/modal/modalCustom';\nimport DrawerTicketConnectItem from '../../../components/drawer/tickets/drawerTicketConnectItem';\nimport DrawerTicketAssign from '../../../components/drawer/tickets/drawerTicketAssign';\nimport DrawerTicketDeadline from '../../../components/drawer/tickets/drawerTicketDeadline';\nimport DrawerTicketUpdate from '../../../components/drawer/tickets/drawerTicketUpdate';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nconst TicketDetail = ({\n  dataProfile,\n  sidemenu,\n  initProps,\n  ticketid\n}) => {\n  var _dataticketrelation$t, _displaydata$ticketab, _displaydata$ticketab2, _displaydata$ticketab3, _displaydata$ticketab4, _displaydata$ticketab5, _displaydata$ticketab6, _displaydata$ticketab7, _displaydata$ticketab8, _displaydata$ticketab9, _displaydata$ticketab10, _displaydata$ticketab11, _displaydata$ticketab12, _displaydata$ticketab13, _displaydata$ticketab14, _displaydata$ticketab15, _displaydata$ticketab16, _displaydata$ticketab17, _displaydata$ticketab18, _displaydata$ticketab19, _displaydata$ticketab20, _displaydata$ticketab21;\n\n  //1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(1, 2);\n  pathArr.push(`Detail Tiket`); //2.useState\n  //2.1 General\n\n  const {\n    0: displaydata,\n    1: setdisplaydata\n  } = useState({\n    id: null,\n    ticketable_id: null,\n    task_id: null,\n    closed_at: null,\n    resolved_times: \"\",\n    status: null,\n    name: \"\",\n    creator: \"\",\n    creator_location: \"\",\n    raised_at: \"\",\n    assignment_type: \"\",\n    assignment_operator_id: null,\n    assignment_operator_name: \"\",\n    assignment_profile_image: \"\",\n    deadline: null,\n    status_name: \"\",\n    ticketable: {\n      id: null,\n      product_type: null,\n      product_id: \"\",\n      pic_name: \"\",\n      pic_contact: \"\",\n      location_id: null,\n      inventory_id: null,\n      problem: \"\",\n      incident_time: \"\",\n      files: [],\n      description: \"\",\n      deleted_at: null,\n      asset_type_name: \"\",\n      location: {\n        id: null,\n        name: \"\",\n        full_location: \"\"\n      },\n      asset_type: {\n        id: null,\n        task_type_id: null,\n        ticket_type_id: null,\n        name: \"\",\n        description: \"\",\n        deleted_at: null\n      },\n      inventory: null\n    }\n  });\n  const {\n    0: dataticketrelation,\n    1: setdatatickrelation\n  } = useState({\n    status_ticket: [{\n      id: 0,\n      name: \"\"\n    }],\n    ticket_types: [],\n    incident_type: [],\n    companies: {\n      data: [{\n        id: 0,\n        title: '',\n        key: '',\n        value: 0\n      }]\n    },\n    ticket_task_types: [],\n    resolved_times: []\n  });\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true); //2.2.Update\n\n  const {\n    0: datapayloadupdate,\n    1: setdatapayloadupdate\n  } = useState({\n    id: Number(ticketid),\n    requester_id: null,\n    raised_at: null,\n    closed_at: null,\n    product_id: \"\",\n    pic_name: \"\",\n    pic_contact: \"\",\n    location_id: null,\n    problem: \"\",\n    incident_time: null,\n    files: [],\n    description: \"\"\n  });\n  const {\n    0: drawerupdateticket,\n    1: setdrawerupdateticket\n  } = useState(false);\n  const {\n    0: refreshclosedupdateticket,\n    1: setrefreshclosedupdateticket\n  } = useState(-1);\n  const {\n    0: refreshupdateticket,\n    1: setrefreshupdateticket\n  } = useState(-1);\n  const {\n    0: disabledupdate,\n    1: setdisabledupdate\n  } = useState(false); //2.3.Hubungkan Item\n\n  const {\n    0: datapayloadconnectitem,\n    1: setdatapayloadconnectitem\n  } = useState({\n    id: Number(ticketid),\n    inventory_id: null,\n    name: \"\"\n  });\n  const {\n    0: selectedassettype,\n    1: setselectedassettype\n  } = useState(null);\n  const {\n    0: drawerconnectitemticket,\n    1: setdrawerconnectitemticket\n  } = useState(false);\n  const {\n    0: modalreleaseitemticket,\n    1: setmodalreleaseitemticket\n  } = useState(false);\n  const {\n    0: loadingreleaseitemticket,\n    1: setloadingreleaseitemticket\n  } = useState(false);\n  const {\n    0: refreshclosedconnectitemticket,\n    1: setrefreshclosedconnectitemticket\n  } = useState(-1);\n  const {\n    0: refreshconnectitemticket,\n    1: setrefreshconnectitemticket\n  } = useState(-1); //2.4.Assign Item\n\n  const {\n    0: datapayloadassign,\n    1: setdatapayloadassign\n  } = useState({\n    id: Number(ticketid),\n    assignable_type: true,\n    assignable_id: null\n  });\n  const {\n    0: drawerassignticket,\n    1: setdrawerassignticket\n  } = useState(false);\n  const {\n    0: refreshclosedassignticket,\n    1: setrefreshclosedassignticket\n  } = useState(-1);\n  const {\n    0: refreshassignticket,\n    1: setrefreshassignticket\n  } = useState(-1); //2.5.Deadline\n\n  const {\n    0: datapayloaddeadline,\n    1: setdatapayloaddeadline\n  } = useState({\n    id: Number(ticketid),\n    deadline: null\n  });\n  const {\n    0: drawerdeadlineicket,\n    1: setdrawedeadlineticket\n  } = useState(false);\n  const {\n    0: refreshcloseddeadlineticket,\n    1: setrefreshcloseddeadlineticket\n  } = useState(-1);\n  const {\n    0: refreshdeadlineicket,\n    1: setrefreshdeadlineicket\n  } = useState(-1);\n  const {\n    0: showdatepicker,\n    1: setshowdatepicker\n  } = useState(false);\n  const {\n    0: datevalue,\n    1: setdatevalue\n  } = useState(null); //2.6.Status(Batalkan Tiket)\n\n  const {\n    0: modalcancelticket,\n    1: setmodalcancelticket\n  } = useState(false);\n  const {\n    0: datacancelticket,\n    1: setdatacancelticket\n  } = useState({\n    id: Number(ticketid),\n    notes: \"\",\n    name: \"\"\n  });\n  const {\n    0: loadingcancelticket,\n    1: setloadingcancelticket\n  } = useState(false);\n  const {\n    0: refreshcancelticket,\n    1: setrefreshcancelticket\n  } = useState(-1); //2.7.Note\n\n  const {\n    0: displaynoteticket,\n    1: setdisplaynoteticket\n  } = useState([]);\n  const {\n    0: datanoteticket,\n    1: setdatanoteticket\n  } = useState({\n    id: Number(ticketid),\n    notes: \"\"\n  });\n  const {\n    0: modalnoteticket,\n    1: setmodalnoteticket\n  } = useState(false);\n  const {\n    0: loadingnoteticket,\n    1: setloadingnoteticket\n  } = useState(false);\n  const {\n    0: refreshnoteticket,\n    1: setrefreshnoteticket\n  } = useState(-1); //2.8.Activity Log\n\n  const {\n    0: displaylogticket,\n    1: setdisplaylogticket\n  } = useState([]);\n  const {\n    0: praloadinglogticket,\n    1: setpraloadinglogticket\n  } = useState(true); //2.9 Export\n\n  const {\n    0: loadingexportticket,\n    1: setloadingexportticket\n  } = useState(false); //3.Handler\n\n  const handleNoteTicket = () => {\n    setloadingnoteticket(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? \"addNoteTicket\" : \"clientAddNoteTicket\"}`, {\n      method: 'POST',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(datanoteticket)\n    }).then(res => res.json()).then(res2 => {\n      setloadingnoteticket(false);\n      setmodalnoteticket(false);\n\n      if (res2.success) {\n        setdatanoteticket({\n          id: Number(ticketid),\n          notes: \"\"\n        });\n        setrefreshnoteticket(prev => prev + 1);\n\n        _notification['success']({\n          message: \"Note berhasil ditambahkan\",\n          duration: 3\n        });\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  const handleCancelTicket = () => {\n    setloadingcancelticket(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? `cancelTicket` : `cancelClientTicket`}`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(datacancelticket)\n    }).then(res => res.json()).then(res2 => {\n      setloadingcancelticket(false);\n      setmodalcancelticket(false);\n\n      if (res2.success) {\n        setdatacancelticket({\n          id: Number(ticketid),\n          notes: \"\"\n        });\n        setrefreshcancelticket(prev => prev + 1);\n\n        _notification['success']({\n          message: \"Tiket berhasil dibatalkan\",\n          duration: 3\n        });\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  const handleReleaseItemTicket = () => {\n    setloadingreleaseitemticket(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/setItemTicket`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(_objectSpread(_objectSpread({}, datapayloadconnectitem), {}, {\n        inventory_id: null\n      }))\n    }).then(res => res.json()).then(res2 => {\n      setloadingreleaseitemticket(false);\n      setmodalreleaseitemticket(false);\n\n      if (res2.success) {\n        setdatapayloadconnectitem({\n          id: Number(ticketid),\n          inventory_id: null,\n          name: \"\"\n        });\n        setrefreshconnectitemticket(prev => prev + 1);\n\n        _notification['success']({\n          message: \"Tiket berhasil dibatalkan\",\n          duration: 3\n        });\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //4.useEffect\n\n\n  useEffect(() => {\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? \"getTicket\" : \"getClientTicket\"}?id=${ticketid}`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdisplaydata(res2.data);\n      setdatapayloadupdate(_objectSpread(_objectSpread({}, datapayloadupdate), {}, {\n        requester_id: res2.data.creator_id,\n        raised_at: moment(res2.data.raised_at).locale('id').format(),\n        closed_at: res2.data.closed_at === null ? null : moment(res2.data.closed_at).locale('id').format(),\n        product_id: res2.data.ticketable.product_id,\n        pic_name: res2.data.ticketable.pic_name,\n        pic_contact: res2.data.ticketable.pic_contact,\n        location_id: res2.data.ticketable.location_id,\n        problem: res2.data.ticketable.problem,\n        incident_time: res2.data.ticketable.original_incident_time === null ? null : moment(res2.data.ticketable.original_incident_time).locale('id').format(),\n        files: res2.data.ticketable.files,\n        description: res2.data.ticketable.description\n      }));\n      setdisabledupdate(false);\n      res2.data.assignment_operator_id === 0 ? setdatapayloadassign({\n        id: Number(ticketid),\n        assignable_type: true,\n        assignable_id: null\n      }) : setdatapayloadassign(_objectSpread(_objectSpread({}, datapayloadassign), {}, {\n        assignable_type: res2.data.assignment_type === \"Engineer\" ? true : false,\n        assignable_id: res2.data.assignment_operator_id\n      }));\n      res2.data.ticketable.inventory === null ? setselectedassettype(null) : (setdatapayloadconnectitem({\n        id: Number(ticketid),\n        inventory_id: res2.data.ticketable.inventory.id,\n        name: res2.data.ticketable.inventory.mig_id\n      }), setselectedassettype(res2.data.ticketable.inventory.model_inventory.asset_id));\n      setdatapayloaddeadline({\n        id: Number(ticketid),\n        deadline: res2.data.deadline === \"-\" ? null : res2.data.deadline\n      });\n      res2.data.deadline === \"-\" ? setshowdatepicker(false) : setshowdatepicker(true);\n      res2.data.deadline === \"-\" ? setdatevalue(null) : setdatevalue(-10);\n      setdatacancelticket(_objectSpread(_objectSpread({}, datacancelticket), {}, {\n        name: res2.data.name\n      }));\n    }).then(() => {\n      fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? \"getTicketRelation\" : \"getClientTicketRelation\"}`, {\n        method: `GET`,\n        headers: {\n          'Authorization': JSON.parse(initProps)\n        }\n      }).then(res => res.json()).then(res2 => {\n        setdatatickrelation(res2.data);\n        setpraloading(false);\n      });\n    });\n  }, [refreshconnectitemticket, refreshassignticket, refreshdeadlineicket, refreshcancelticket, refreshupdateticket, refreshclosedupdateticket, refreshclosedconnectitemticket, refreshclosedassignticket, refreshcloseddeadlineticket]);\n  useEffect(() => {\n    setpraloadinglogticket(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? \"getTicketLog\" : \"getClientTicketLog\"}?id=${ticketid}`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdisplaylogticket(res2.data.normal_logs);\n      setdisplaynoteticket(res2.data.special_logs.filter(note => note.log_name === \"Note Khusus\"));\n      setpraloadinglogticket(false);\n    });\n  }, [refreshnoteticket, refreshupdateticket, refreshconnectitemticket, refreshassignticket, refreshdeadlineicket]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \" flex flex-col\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \" grid grid-cols-11 px-5\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \" col-span-3 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \" flex flex-col mb-2 mr-2 shadow-md rounded-md bg-white p-5\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col mb-4\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex items-center justify-center mb-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mr-2\",\n                  children: /*#__PURE__*/_jsx(TicketIconSvg, {\n                    size: 30,\n                    color: `#000000`\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(H1, {\n                    children: displaydata.name\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \" flex items-center justify-center mb-4\",\n                children: praloading ? null : /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: (_dataticketrelation$t = dataticketrelation.ticket_types.filter(type => type.id === displaydata.ticketable.product_type)[0]) === null || _dataticketrelation$t === void 0 ? void 0 : _dataticketrelation$t.name\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \" flex justify-center items-center\",\n                children: dataProfile.data.role === 1 ? praloading ? null : /*#__PURE__*/_jsxs(ButtonSys, {\n                  type: `default`,\n                  onClick: () => {\n                    setdrawerupdateticket(true);\n                  },\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" mr-1\",\n                    children: /*#__PURE__*/_jsx(EditIconSvg, {\n                      size: 15,\n                      color: `#35763B`\n                    })\n                  }), \"Ubah Tiket\"]\n                }) : null\n              })]\n            }), praloading ? /*#__PURE__*/_jsx(\"div\", {\n              className: \" flex justify-center\",\n              children: /*#__PURE__*/_jsx(_Spin, {})\n            }) : /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col mb-5\",\n                children: [/*#__PURE__*/_jsx(Label, {\n                  children: \"Diajukan Oleh:\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-0 text-gray-600\",\n                  children: displaydata.creator\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col mb-5\",\n                children: [/*#__PURE__*/_jsx(Label, {\n                  children: \"Lokasi:\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-0 text-gray-600\",\n                  children: displaydata.creator_location\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col mb-5\",\n                children: [/*#__PURE__*/_jsx(Label, {\n                  children: \"Tanggal Diajukan:\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-0 text-gray-600\",\n                  children: displaydata.raised_at\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col mb-5\",\n                children: [/*#__PURE__*/_jsx(Label, {\n                  children: \"Tanggal Selesai:\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-0 text-gray-600\",\n                  children: displaydata.closed_at === null ? `-` : moment(displaydata.closed_at).locale('id').format('LL')\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col mb-5\",\n                children: [/*#__PURE__*/_jsx(Label, {\n                  children: \"Durasi Penyelesaian:\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \" mb-0 text-gray-600\",\n                  children: displaydata.resolved_times\n                })]\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex flex-col my-2 mr-2 shadow-md rounded-md bg-white p-5\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" mb-7\",\n              children: /*#__PURE__*/_jsx(H1, {\n                children: \"Detail Masalah\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsx(Label, {\n                children: \"Tipe Aset:\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \" mb-0 text-gray-600\",\n                children: displaydata.ticketable.asset_type_name\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsx(Label, {\n                children: \"Terminal ID:\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \" mb-0 text-gray-600\",\n                children: displaydata.ticketable.product_id\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsx(Label, {\n                children: \"PIC:\"\n              }), /*#__PURE__*/_jsxs(\"p\", {\n                className: \" mb-0 text-gray-600\",\n                children: [displaydata.ticketable.pic_name === \"\" ? `-` : displaydata.ticketable.pic_name, \" / \", displaydata.ticketable.pic_contact]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsx(Label, {\n                children: \"Waktu Kejadian:\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \" mb-0 text-gray-600\",\n                children: displaydata.ticketable.incident_time\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsx(Label, {\n                children: \"Lokasi Masalah:\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \" mb-0 text-gray-600\",\n                children: displaydata.ticketable.location.full_location\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsx(Label, {\n                children: \"Deskripsi Kerusakan:\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \" mb-0 text-gray-600\",\n                children: displaydata.ticketable.description\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex flex-col my-2 mr-2 shadow-md rounded-md bg-white p-5\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" mb-7\",\n              children: /*#__PURE__*/_jsx(H1, {\n                children: \"Bukti Kejadian\"\n              })\n            }), displaydata.ticketable.files.length === 0 ? /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsx(_Empty, {\n                image: _Empty.PRESENTED_IMAGE_SIMPLE\n              })\n            }) : /*#__PURE__*/_jsx(\"div\", {\n              className: \" grid grid-cols-2\",\n              children: displaydata.ticketable.files.map((doc, idx) => /*#__PURE__*/_jsx(\"a\", {\n                target: `_blank`,\n                href: doc,\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \" col-span-1 mx-1 flex flex-col items-center mb-2 cursor-pointer\",\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    src: doc,\n                    className: \" object-contain mb-1 h-28 w-full\",\n                    alt: \"\"\n                  })\n                })\n              }))\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"flex items-center justify-center mb-2 mr-2 shadow-md rounded-md bg-white p-5\",\n            children: loadingexportticket ? /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsx(_Spin, {})\n            }) : /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsxs(ButtonSys, {\n                type: `default`,\n                onClick: () => {\n                  setloadingexportticket(true);\n                  fetch(`https://boiling-thicket-46501.herokuapp.com/${dataProfile.data.role === 1 ? `ticketExport` : `clientTicketExport`}?id=${ticketid}`, {\n                    method: `GET`,\n                    headers: {\n                      'Authorization': JSON.parse(initProps)\n                    }\n                  }).then(res => res.blob()).then(res2 => {\n                    var newBlob = new Blob([res2], {\n                      type: \"application/pdf\"\n                    });\n                    const data = window.URL.createObjectURL(newBlob);\n                    var link = document.createElement('a');\n                    link.href = data;\n                    link.download = `${displaydata.name}.pdf`;\n                    link.click();\n                    setTimeout(function () {\n                      window.URL.revokeObjectURL(data);\n                    });\n                    setloadingexportticket(false);\n                  });\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \" mr-1\",\n                  children: /*#__PURE__*/_jsx(FileExportIconSvg, {\n                    size: 15,\n                    color: `#35763B`\n                  })\n                }), \"Ekspor Tiket\"]\n              })\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \" col-span-8 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \" w-full flex justify-around mb-2 ml-2 shadow-md rounded-md bg-white p-5\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \" w-4/12 pr-8 flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-2\",\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: \"Status\"\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex items-center\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" mr-2\",\n                    children: /*#__PURE__*/_jsx(CheckIconSvg, {\n                      size: 25,\n                      color: `#35763B`\n                    })\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: \" mb-0 text-base font-bold\",\n                    children: displaydata.status_name\n                  })]\n                })]\n              }), displaydata.status !== 7 && /*#__PURE__*/_jsxs(\"div\", {\n                className: \"dropdown dropdown-end\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  tabIndex: `1`,\n                  className: \" h-full flex justify-end items-start cursor-pointer text-lg font-bold\",\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    className: \"mb-0\",\n                    children: \"...\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  tabIndex: `1`,\n                  className: \" menu dropdown-content bg-backdrop p-3\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" p-3 w-52 flex items-center bg-white rounded shadow hover:bg-red-100 text-overdue cursor-pointer\",\n                    onClick: () => {\n                      setmodalcancelticket(true);\n                    },\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"mr-2\",\n                      children: /*#__PURE__*/_jsx(XIconSvg, {\n                        size: 15,\n                        color: `#BF4A40`\n                      })\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \" mb-0\",\n                      children: \"Batalkan Tiket\"\n                    })]\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(ModalCancelTiket, {\n                title: \"Pembatalan Tiket\",\n                visible: modalcancelticket,\n                onvisible: setmodalcancelticket,\n                onCancel: () => {\n                  setmodalcancelticket(false);\n                },\n                loading: loadingcancelticket,\n                onOk: handleCancelTicket,\n                data: datacancelticket,\n                setdata: setdatacancelticket,\n                ticketid: ticketid\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" w-4/12 px-8 flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mb-2\",\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: dataProfile.data.role === 1 ? displaydata.assignment_type : `Engineer/Grup`\n                  })\n                }), praloading ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Spin, {})\n                }) : displaydata.assignment_operator_id === 0 ? dataProfile.data.role === 1 ? /*#__PURE__*/_jsxs(\"button\", {\n                  className: \" btn btn-sm bg-state2 border-state2 hover:bg-onhold hover:border-onhold px-6 py-0\",\n                  onClick: () => {\n                    setdrawerassignticket(true);\n                  },\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"mr-1\",\n                    children: /*#__PURE__*/_jsx(FilePlusIconSvg, {\n                      size: 15,\n                      color: `#ffffff`\n                    })\n                  }), \"Assign Engineer\"]\n                }) : /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"mr-1 mb-1\",\n                    children: /*#__PURE__*/_jsx(ForbidIconSvg, {\n                      size: 15,\n                      color: `#CCCCCC`\n                    })\n                  }), /*#__PURE__*/_jsx(Label, {\n                    children: \"Belum di-assign\"\n                  })]\n                }) : /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex items-center\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" flex items-center\",\n                    children: displaydata.assignment_type === 'Engineer' ? /*#__PURE__*/_jsx(\"div\", {\n                      className: \" w-8 h-8 rounded-full mr-2\",\n                      children: /*#__PURE__*/_jsx(\"img\", {\n                        src: displaydata.assignment_profile_image === \"\" || displaydata.assignment_profile_image === \"-\" ? \"/image/staffTask.png\" : `${displaydata.assignment_profile_image}`,\n                        className: \" object-contain w-10 h-10\",\n                        alt: \"\"\n                      })\n                    }) : /*#__PURE__*/_jsx(\"div\", {\n                      className: \" mr-2\",\n                      children: /*#__PURE__*/_jsx(UserIconSvg, {})\n                    })\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: \" mb-0 text-base font-bold\",\n                    children: displaydata.assignment_operator_name\n                  })]\n                })]\n              }), dataProfile.data.role === 1 ? praloading ? null : displaydata.status !== 7 ? displaydata.assignment_operator_id === 0 ? null : /*#__PURE__*/_jsx(\"div\", {\n                className: \" h-full flex justify-end items-start cursor-pointer\",\n                onClick: () => {\n                  setdrawerassignticket(true);\n                },\n                children: /*#__PURE__*/_jsx(UserSearchIconSvg, {\n                  size: 18,\n                  color: `#4D4D4D`\n                })\n              }) : null : null]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" w-4/12 pl-8 flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \" mb-2\",\n                  children: /*#__PURE__*/_jsx(Label, {\n                    children: \"Deadline\"\n                  })\n                }), praloading ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Spin, {})\n                }) : displaydata.deadline === \"-\" ? dataProfile.data.role === 1 ? /*#__PURE__*/_jsxs(\"button\", {\n                  className: \" btn btn-sm bg-state2 border-state2 hover:bg-onhold hover:border-onhold px-6 py-0\",\n                  onClick: () => {\n                    setdrawedeadlineticket(true);\n                  },\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"mr-1\",\n                    children: /*#__PURE__*/_jsx(CalendartimeIconSvg, {\n                      size: 15,\n                      color: `#ffffff`\n                    })\n                  }), \"Tentukan Deadline\"]\n                }) : /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"mr-1 mb-1\",\n                    children: /*#__PURE__*/_jsx(ForbidIconSvg, {\n                      size: 15,\n                      color: `#CCCCCC`\n                    })\n                  }), /*#__PURE__*/_jsx(Label, {\n                    children: \"Belum ada deadline\"\n                  })]\n                }) : /*#__PURE__*/_jsx(\"div\", {\n                  className: \" flex items-center\",\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    className: \" mb-0 text-base font-bold\",\n                    children: displaydata.deadline\n                  })\n                })]\n              }), dataProfile.data.role === 1 ? praloading ? null : displaydata.status !== 7 ? displaydata.deadline === \"-\" ? null : /*#__PURE__*/_jsx(\"div\", {\n                className: \" h-full flex justify-end items-start cursor-pointer\",\n                onClick: () => {\n                  setdrawedeadlineticket(true);\n                },\n                children: /*#__PURE__*/_jsx(CalendartimeIconSvg, {\n                  size: 18,\n                  color: `#4D4D4D`\n                })\n              }) : null : null]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex w-full\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" w-6/12 mx-2\",\n              children: dataProfile.data.role === 1 ? /*#__PURE__*/_jsxs(\"div\", {\n                className: \" flex w-full flex-col mt-2 shadow-md rounded-md bg-white p-5\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex items-center justify-between mb-5\",\n                  children: [/*#__PURE__*/_jsx(H1, {\n                    children: \"Detail Aset\"\n                  }), displaydata.ticketable.inventory === null ? null : /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"dropdown dropdown-end\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      tabIndex: `2`,\n                      className: \" h-full flex justify-end items-start cursor-pointer text-lg font-bold\",\n                      children: /*#__PURE__*/_jsx(\"span\", {\n                        className: \"mb-0\",\n                        children: \"...\"\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      tabIndex: `2`,\n                      className: \" menu dropdown-content bg-backdrop p-3\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \" p-3 w-52 mb-4 flex items-center bg-white rounded shadow hover:bg-primary25 text-primary100 cursor-pointer\",\n                        onClick: () => {\n                          setdrawerconnectitemticket(true);\n                        },\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \" mb-0\",\n                          children: \"Ganti Aset\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \" p-3 w-52 flex items-center bg-white rounded shadow hover:bg-primary25 text-primary100 cursor-pointer\",\n                        onClick: () => {\n                          setmodalreleaseitemticket(true);\n                        },\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \" mb-0\",\n                          children: \"Pisah Aset\"\n                        })\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsx(ModalReleaseItemTiket, {\n                    title: \"Pemisahan Item dengan Tiket\",\n                    visible: modalreleaseitemticket,\n                    onvisible: setmodalreleaseitemticket,\n                    onCancel: () => {\n                      setmodalreleaseitemticket(false);\n                    },\n                    loading: loadingreleaseitemticket,\n                    onOk: handleReleaseItemTicket,\n                    data: datapayloadconnectitem,\n                    setdata: setdatapayloadconnectitem,\n                    ticketid: ticketid\n                  })]\n                }), displaydata.ticketable.inventory === null ? /*#__PURE__*/_jsxs(_Fragment, {\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col justify-center items-center mb-5\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-52 h-52 mb-2\",\n                      children: /*#__PURE__*/_jsx(\"img\", {\n                        src: \"/image/emptyAssetTicket.png\",\n                        className: \" object-contain\",\n                        alt: \"\"\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \" w-8/12 text-center\",\n                      children: /*#__PURE__*/_jsx(\"p\", {\n                        className: \" mb-0 text-gray-400\",\n                        children: \"Belum ada aset terhubung. Silakan hubungkan aset.\"\n                      })\n                    })]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" flex justify-center mb-5\",\n                    children: /*#__PURE__*/_jsx(ButtonSys, {\n                      type: `primary`,\n                      onClick: () => {\n                        setdrawerconnectitemticket(true);\n                      },\n                      children: \"+ Hubungkan Aset\"\n                    })\n                  })]\n                }) : /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col\",\n                  children: [displaydata.status === 6 && /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex bg-primary100 text-white rounded-md p-4 w-full mb-5\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \" flex items-center justify-center h-full mr-2\",\n                      children: /*#__PURE__*/_jsx(InfoCircleIconSvg, {\n                        size: 20,\n                        color: `#ffffff`\n                      })\n                    }), /*#__PURE__*/_jsxs(\"p\", {\n                      className: \" mb-0\",\n                      children: [\"Berikut tampilan detail item yang di-closed pada tanggal \", /*#__PURE__*/_jsx(\"strong\", {\n                        children: displaydata.closed_at === null ? `-` : displaydata.closed_at\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"mb-8 flex flex-col items-center\",\n                    children: [/*#__PURE__*/_jsx(H1, {\n                      children: (_displaydata$ticketab = displaydata.ticketable) === null || _displaydata$ticketab === void 0 ? void 0 : (_displaydata$ticketab2 = _displaydata$ticketab.inventory) === null || _displaydata$ticketab2 === void 0 ? void 0 : (_displaydata$ticketab3 = _displaydata$ticketab2.model_inventory) === null || _displaydata$ticketab3 === void 0 ? void 0 : _displaydata$ticketab3.name\n                    }), /*#__PURE__*/_jsx(Label, {\n                      children: (_displaydata$ticketab4 = displaydata.ticketable) === null || _displaydata$ticketab4 === void 0 ? void 0 : (_displaydata$ticketab5 = _displaydata$ticketab4.inventory) === null || _displaydata$ticketab5 === void 0 ? void 0 : _displaydata$ticketab5.mig_id\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsx(Label, {\n                      children: \"Tipe Aset:\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \" mb-0 text-gray-600\",\n                      children: (_displaydata$ticketab6 = displaydata.ticketable) === null || _displaydata$ticketab6 === void 0 ? void 0 : (_displaydata$ticketab7 = _displaydata$ticketab6.inventory) === null || _displaydata$ticketab7 === void 0 ? void 0 : (_displaydata$ticketab8 = _displaydata$ticketab7.model_inventory) === null || _displaydata$ticketab8 === void 0 ? void 0 : (_displaydata$ticketab9 = _displaydata$ticketab8.asset) === null || _displaydata$ticketab9 === void 0 ? void 0 : _displaydata$ticketab9.full_name\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsx(Label, {\n                      children: \"No Seri:\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \" mb-0 text-gray-600\",\n                      children: ((_displaydata$ticketab10 = displaydata.ticketable) === null || _displaydata$ticketab10 === void 0 ? void 0 : (_displaydata$ticketab11 = _displaydata$ticketab10.inventory) === null || _displaydata$ticketab11 === void 0 ? void 0 : _displaydata$ticketab11.serial_number) === null ? `-` : (_displaydata$ticketab12 = displaydata.ticketable) === null || _displaydata$ticketab12 === void 0 ? void 0 : (_displaydata$ticketab13 = _displaydata$ticketab12.inventory) === null || _displaydata$ticketab13 === void 0 ? void 0 : _displaydata$ticketab13.serial_number\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsx(Label, {\n                      children: \"Status Pemakaian:\"\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      children: [displaydata.ticketable.inventory.status_usage.id === 1 && /*#__PURE__*/_jsx(\"div\", {\n                        className: \"inline-block rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open\",\n                        children: \"In Used\"\n                      }), displaydata.ticketable.inventory.status_usage.id === 2 && /*#__PURE__*/_jsx(\"div\", {\n                        className: \"inline-block rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed\",\n                        children: \"In Stock\"\n                      }), displaydata.ticketable.inventory.status_usage.id === 3 && /*#__PURE__*/_jsx(\"div\", {\n                        className: \"inline-block rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue\",\n                        children: \"Replacement\"\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsx(Label, {\n                      children: \"Kondisi Aset:\"\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      children: [displaydata.ticketable.inventory.status_condition.id === 1 && /*#__PURE__*/_jsx(\"div\", {\n                        className: \"inline-block rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed\",\n                        children: \"Good\"\n                      }), displaydata.ticketable.inventory.status_condition.id === 2 && /*#__PURE__*/_jsx(\"div\", {\n                        className: \"inline-block rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed\",\n                        children: \"Gray\"\n                      }), displaydata.ticketable.inventory.status_condition.id === 3 && /*#__PURE__*/_jsx(\"div\", {\n                        className: \"inline-block rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue\",\n                        children: \"Bad\"\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsx(Label, {\n                      children: \"Lokasi Item:\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \" mb-0 text-gray-600\",\n                      children: ((_displaydata$ticketab14 = displaydata.ticketable) === null || _displaydata$ticketab14 === void 0 ? void 0 : (_displaydata$ticketab15 = _displaydata$ticketab14.inventory) === null || _displaydata$ticketab15 === void 0 ? void 0 : _displaydata$ticketab15.location) === null ? `-` : (_displaydata$ticketab16 = displaydata.ticketable) === null || _displaydata$ticketab16 === void 0 ? void 0 : (_displaydata$ticketab17 = _displaydata$ticketab16.inventory) === null || _displaydata$ticketab17 === void 0 ? void 0 : _displaydata$ticketab17.location\n                    })]\n                  }), /*#__PURE__*/_jsx(\"hr\", {}), displaydata.ticketable.inventory.additional_attributes.map((doccolumns, idxcolumns) => {\n                    return /*#__PURE__*/_jsxs(\"div\", {\n                      className: `flex flex-col mb-5 ${idxcolumns === 0 ? `mt-5` : ``}`,\n                      children: [/*#__PURE__*/_jsxs(Label, {\n                        children: [doccolumns.name, \":\"]\n                      }), /*#__PURE__*/_jsx(\"p\", {\n                        className: \"mb-0 text-sm\",\n                        children: doccolumns.data_type === 'dropdown' || doccolumns.data_type === 'checkbox' || doccolumns.data_type === 'date' ? /*#__PURE__*/_jsxs(_Fragment, {\n                          children: [doccolumns.data_type === 'dropdown' && /*#__PURE__*/_jsx(_Fragment, {\n                            children: doccolumns.value.opsi[doccolumns.value.default]\n                          }), doccolumns.data_type === 'checkbox' && /*#__PURE__*/_jsx(_Fragment, {\n                            children: doccolumns.value.opsi.filter((_, idxfil) => {\n                              return doccolumns.value.default.includes(idxfil);\n                            }).join(\", \")\n                          }), doccolumns.data_type === 'date' && /*#__PURE__*/_jsx(_Fragment, {\n                            children: moment(doccolumns.value).locale('id').format('LL')\n                          })]\n                        }) : /*#__PURE__*/_jsx(\"p\", {\n                          className: \" mb-0 text-gray-600\",\n                          children: doccolumns.value\n                        })\n                      })]\n                    }, idxcolumns);\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsx(Label, {\n                      children: \"Deskripsi:\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \" mb-0 text-gray-600\",\n                      children: ((_displaydata$ticketab18 = displaydata.ticketable) === null || _displaydata$ticketab18 === void 0 ? void 0 : (_displaydata$ticketab19 = _displaydata$ticketab18.inventory) === null || _displaydata$ticketab19 === void 0 ? void 0 : _displaydata$ticketab19.deskripsi) === null ? `-` : (_displaydata$ticketab20 = displaydata.ticketable) === null || _displaydata$ticketab20 === void 0 ? void 0 : (_displaydata$ticketab21 = _displaydata$ticketab20.inventory) === null || _displaydata$ticketab21 === void 0 ? void 0 : _displaydata$ticketab21.deskripsi\n                    })]\n                  })]\n                })]\n              }) : /*#__PURE__*/_jsxs(\"div\", {\n                className: \" shadow-md rounded-md bg-white p-5 my-2 ml-2\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex items-center justify-between mb-5\",\n                  children: [/*#__PURE__*/_jsx(H1, {\n                    children: \"Catatan\"\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" h-full flex justify-end items-start cursor-pointer\",\n                    onClick: () => {\n                      setmodalnoteticket(true);\n                    },\n                    children: /*#__PURE__*/_jsx(PlusIconSvg, {\n                      size: 25,\n                      color: `#35763B`\n                    })\n                  })]\n                }), loadingnoteticket ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Spin, {})\n                }) : displaynoteticket.length === 0 ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Empty, {\n                    image: _Empty.PRESENTED_IMAGE_SIMPLE\n                  })\n                }) : displaynoteticket.map((note, idx) => /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col mb-5\",\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \" mb-3 line-clamp-6 font-light\",\n                    children: note.description\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \" w-5 h-5 rounded-full mr-2\",\n                        children: /*#__PURE__*/_jsx(\"img\", {\n                          src: \"/image/staffTask.png\",\n                          className: \" object-contain w-5 h-5\",\n                          alt: \"\"\n                        })\n                      }), /*#__PURE__*/_jsx(Text, {\n                        color: `green`,\n                        children: note.causer.name\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      children: /*#__PURE__*/_jsx(Label, {\n                        children: moment(note.created_at).locale('id').format('LL, LT')\n                      })\n                    })]\n                  })]\n                }))]\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex flex-col w-6/12\",\n              children: [dataProfile.data.role === 1 && /*#__PURE__*/_jsxs(\"div\", {\n                className: \" shadow-md rounded-md bg-white p-5 my-2 ml-2\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex items-center justify-between mb-5\",\n                  children: [/*#__PURE__*/_jsx(H1, {\n                    children: \"Catatan\"\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \" h-full flex justify-end items-start cursor-pointer\",\n                    onClick: () => {\n                      setmodalnoteticket(true);\n                    },\n                    children: /*#__PURE__*/_jsx(PlusIconSvg, {\n                      size: 25,\n                      color: `#35763B`\n                    })\n                  })]\n                }), loadingnoteticket ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Spin, {})\n                }) : displaynoteticket.length === 0 ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Empty, {\n                    image: _Empty.PRESENTED_IMAGE_SIMPLE\n                  })\n                }) : displaynoteticket.map((note, idx) => /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col mb-5\",\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \" mb-3 line-clamp-6 font-light\",\n                    children: note.description\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \" w-5 h-5 rounded-full mr-2\",\n                        children: /*#__PURE__*/_jsx(\"img\", {\n                          src: \"/image/staffTask.png\",\n                          className: \" object-contain w-5 h-5\",\n                          alt: \"\"\n                        })\n                      }), /*#__PURE__*/_jsx(Text, {\n                        color: `green`,\n                        children: note.causer.name\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      children: /*#__PURE__*/_jsx(Label, {\n                        children: moment(note.created_at).locale('id').format('LL, LT')\n                      })\n                    })]\n                  })]\n                }))]\n              }), /*#__PURE__*/_jsx(ModalNoteTiket, {\n                title: \"Catatan Baru\",\n                visible: modalnoteticket,\n                onvisible: setmodalnoteticket,\n                onCancel: () => {\n                  setmodalnoteticket(false);\n                },\n                loading: loadingnoteticket,\n                onOk: handleNoteTicket,\n                datanoteticket: datanoteticket,\n                setdatanoteticket: setdatanoteticket,\n                ticketid: ticketid\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"shadow-md rounded-md bg-white p-5 mt-2 ml-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \" flex items-center justify-between mb-5\",\n                  children: /*#__PURE__*/_jsx(H1, {\n                    children: \"Aktivitas\"\n                  })\n                }), praloadinglogticket ? /*#__PURE__*/_jsx(\"div\", {\n                  className: \" flex justify-center\",\n                  children: /*#__PURE__*/_jsx(_Spin, {})\n                }) : displaylogticket.length === 0 ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Empty, {\n                    image: _Empty.PRESENTED_IMAGE_SIMPLE\n                  })\n                }) : // <InfiniteScroll\n                //     dataLength={logs.length}\n                //     next={fetchDataMoreLogs}\n                //     hasMore={hasmore}\n                //     loader={\n                //         <>\n                //             <Spin />\n                //         </>\n                //     }\n                //     endMessage={\n                //         <div className=\"flex justify-center text-center\">\n                //             <Label>Sudah Semua</Label>\n                //         </div>\n                //     }\n                // >\n                //     {\n                displaylogticket.map((log, idx) => /*#__PURE__*/_jsxs(\"div\", {\n                  className: \" flex flex-col mb-4\",\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \" mb-2 line-clamp-6 font-medium\",\n                    children: log.log_name\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \" flex\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \" w-5 h-5 rounded-full mr-2\",\n                        children: /*#__PURE__*/_jsx(\"img\", {\n                          src: log.causer.profile_image === \"-\" ? \"/image/staffTask.png\" : log.causer.profile_image,\n                          className: \" object-contain w-5 h-5\",\n                          alt: \"\"\n                        })\n                      }), /*#__PURE__*/_jsx(Text, {\n                        color: `green`,\n                        children: log.causer.name\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      children: /*#__PURE__*/_jsx(Label, {\n                        children: moment(log.created_at).locale('id').format('LL, LT')\n                      })\n                    })]\n                  })]\n                })) //     }\n                // </InfiniteScroll>\n                ]\n              })]\n            })]\n          })]\n        })]\n      })\n    }), dataProfile.data.role === 1 && /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(DrawerTicketConnectItem, {\n        title: \"Hubungkan Aset\",\n        visible: drawerconnectitemticket,\n        onClose: () => {\n          setdrawerconnectitemticket(false);\n        },\n        buttonOkText: \"Hubungkan Aset\",\n        initProps: initProps,\n        onvisible: setdrawerconnectitemticket,\n        refresh: refreshconnectitemticket,\n        setrefresh: setrefreshconnectitemticket,\n        setrefreshclosed: setrefreshclosedconnectitemticket,\n        ticketid: ticketid,\n        datapayload: datapayloadconnectitem,\n        setdatapayload: setdatapayloadconnectitem,\n        selectedassettype: selectedassettype,\n        setselectedassettype: setselectedassettype\n      }), /*#__PURE__*/_jsx(DrawerTicketAssign, {\n        title: \"\",\n        visible: drawerassignticket,\n        onClose: () => {\n          setdrawerassignticket(false);\n        },\n        buttonOkText: \"Simpan\",\n        initProps: initProps,\n        onvisible: setdrawerassignticket,\n        refresh: refreshassignticket,\n        setrefresh: setrefreshassignticket,\n        setrefreshclosed: setrefreshclosedassignticket,\n        ticketid: ticketid,\n        datapayload: datapayloadassign,\n        setdatapayload: setdatapayloadassign\n      }), /*#__PURE__*/_jsx(DrawerTicketDeadline, {\n        title: \"Deadline\",\n        visible: drawerdeadlineicket,\n        onClose: () => {\n          setdrawedeadlineticket(false);\n        },\n        buttonOkText: \"Simpan\",\n        initProps: initProps,\n        onvisible: setdrawedeadlineticket,\n        refresh: refreshdeadlineicket,\n        setrefresh: setrefreshdeadlineicket,\n        setrefreshclosed: setrefreshcloseddeadlineticket,\n        ticketid: ticketid,\n        datapayload: datapayloaddeadline,\n        setdatapayload: setdatapayloaddeadline,\n        showdatetime: showdatepicker,\n        setshowdatetime: setshowdatepicker,\n        datevalue: datevalue,\n        setdatevalue: setdatevalue\n      }), /*#__PURE__*/_jsx(DrawerTicketUpdate, {\n        title: \"Ubah Tiket\",\n        visible: drawerupdateticket,\n        onClose: () => {\n          setdrawerupdateticket(false);\n        },\n        buttonOkText: \"Simpan Perubahan Tiket\",\n        initProps: initProps,\n        onvisible: setdrawerupdateticket,\n        refreshtickets: refreshupdateticket,\n        setrefreshtickets: setrefreshupdateticket,\n        setrefreshclosed: setrefreshclosedupdateticket,\n        dataprofile: dataProfile,\n        datapayload: datapayloadupdate,\n        setdatapayload: setdatapayloadupdate,\n        ticketid: ticketid,\n        displaydata: displaydata,\n        disabledsubmit: disabledupdate,\n        setdisabledsubmit: setdisabledupdate\n      })]\n    })]\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res,\n  params\n}) {\n  const ticketid = params.ticketId;\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`https://boiling-thicket-46501.herokuapp.com/detailProfile`, {\n    method: `GET`,\n    headers: {\n      'Authorization': JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"2\",\n      ticketid\n    }\n  };\n}\nexport default TicketDetail;","map":null,"metadata":{},"sourceType":"module"}