{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport _Result from \"antd/lib/result\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _message from \"antd/lib/message\";\nimport _notification from \"antd/lib/notification\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport httpcookie from \"cookie\";\nexport default function RequestForgetPassword({\n  initProps\n}) {\n  const rt = useRouter();\n  const {\n    token\n  } = rt.query;\n  const {\n    0: formdata,\n    1: setFormdata\n  } = useState({\n    email: \"\"\n  });\n  const {\n    0: success,\n    1: setsuccess\n  } = useState(false);\n  const {\n    0: loadingforgetpass,\n    1: setloadingforgetpass\n  } = useState(false);\n\n  const onChangeForgetPassword = e => {\n    setFormdata(_objectSpread(_objectSpread({}, formdata), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleForgetPassword = () => {\n    setloadingforgetpass(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/mailForgetPassword`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formdata)\n    }).then(res => res.json()).then(res2 => {\n      setloadingforgetpass(false);\n\n      if (res2.success) {\n        setsuccess(true);\n\n        _notification[\"success\"]({\n          message: res2.data,\n          duration: 3\n        }); // rt.push('/login')\n\n      } else if (!res2.success) {\n        _message.error({\n          content: res2.data,\n          style: {\n            marginTop: `1rem`\n          }\n        }, 5);\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-xl bg-blue-600 h-screen\"\n      /*style={{background:`linear-gradient(#035ea3, #198e07)`}}*/\n      ,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"pt-20 relative\",\n        id: \"wrapper\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \" mx-auto bg-white rounded-lg w-10/12 md:w-5/12 max-h-80 md:max-h-80 text-black shadow-lg px-3 md:px-5 pt-10 pb-1 text-center\",\n          children: success ? /*#__PURE__*/_jsx(_Result, {\n            status: \"success\",\n            subTitle: \"Silahkan cek Email anda untuk verifikasi akun\",\n            title: \"Berhasil\"\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"mb-5 font-mont text-xl font-semibold\",\n              children: \"Lupa Password\"\n            }), /*#__PURE__*/_jsxs(_Form, {\n              className: \"loginForm\",\n              onFinish: handleForgetPassword,\n              children: [/*#__PURE__*/_jsx(_Form.Item, {\n                name: \"email\",\n                rules: [{\n                  required: true,\n                  message: \"Email wajib diisi\"\n                }, {\n                  pattern: /(\\-)|(^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$)/,\n                  message: \"Email belum diisi dengan benar\"\n                }],\n                children: /*#__PURE__*/_jsx(_Input, {\n                  prefix: /*#__PURE__*/_jsx(UserOutlined, {\n                    className: \"site-form-item-icon\"\n                  }),\n                  name: \"email\",\n                  value: formdata,\n                  placeholder: \"Email\",\n                  onChange: onChangeForgetPassword\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                style: {\n                  justifyContent: `center`\n                },\n                children: /*#__PURE__*/_jsx(_Button, {\n                  type: \"primary\",\n                  htmlType: \"submit\",\n                  loading: loadingforgetpass,\n                  className: \"login-form-button mb-5\",\n                  style: {\n                    width: `100%`\n                  },\n                  children: \"Submit\"\n                })\n              })]\n            })]\n          })\n        })\n      })\n    })\n  });\n}\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  const initProps = {};\n\n  if (req && req.headers) {\n    if (req.headers.cookie) {\n      const cookies = req.headers.cookie;\n      const cookiesJSON1 = httpcookie.parse(cookies);\n\n      if (cookiesJSON1.token) {\n        return {\n          redirect: {\n            permanent: false,\n            destination: \"/dashboard/home\"\n          }\n        };\n      }\n    }\n  }\n\n  return {\n    props: {\n      initProps\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"module"}