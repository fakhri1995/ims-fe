{"ast":null,"code":"import _Table from \"antd/lib/table\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Select from \"antd/lib/select\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport _notification from \"antd/lib/notification\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/requesters/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction modifData(dataa) {\n  for (var i = 0; i < dataa.length; i++) {\n    dataa[i][\"key\"] = dataa[i].id;\n    dataa[i][\"value\"] = dataa[i].id;\n    dataa[i][\"title\"] = dataa[i].name;\n    dataa[i][\"children\"] = dataa[i].members;\n    delete dataa[i].members;\n\n    if (dataa[i].children) {\n      modifData(dataa[i].children);\n    }\n  }\n\n  return dataa;\n}\n\nfunction Requesters({\n  initProps,\n  dataProfile,\n  dataListRequester,\n  dataCompanyList,\n  sidemenu\n}) {\n  const rt = useRouter();\n  const tok = initProps;\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  const {\n    originPath\n  } = rt.query;\n  var location_id1 = \"\",\n      name1 = \"\",\n      is_enabled1 = \"\",\n      company_id1 = \"\";\n  const {\n    location_id,\n    name,\n    is_enabled,\n    company_id\n  } = rt.query;\n\n  if (location_id) {\n    location_id1 = location_id;\n  }\n\n  if (name) {\n    name1 = name;\n  }\n\n  if (is_enabled) {\n    is_enabled1 = is_enabled;\n  }\n\n  if (company_id) {\n    company_id1 = company_id;\n  }\n\n  const {\n    0: rawdata,\n    1: setrawdata\n  } = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  }); //useState\n\n  const {\n    0: dataraw,\n    1: setdataraw\n  } = useState([]);\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true);\n  const {\n    0: datarawloading,\n    1: setdatarawloading\n  } = useState(false);\n  const {\n    0: datarawloading2,\n    1: setdatarawloading2\n  } = useState(false);\n  const {\n    0: dataKK,\n    1: setDataSource\n  } = useState([]);\n  const {\n    0: rowstate,\n    1: setrowstate\n  } = useState(0);\n  const {\n    0: datacompany,\n    1: setdatacompany\n  } = useState([]);\n  const {\n    0: datalokasi,\n    1: setdatalokasi\n  } = useState([]); //state order\n\n  const {\n    0: namasearchact,\n    1: setnamasearchact\n  } = useState(name1 === \"\" ? false : true);\n  const {\n    0: asalcompanyfilteract,\n    1: setasalcompanyfilteract\n  } = useState(company_id1 === \"\" ? false : true);\n  const {\n    0: asallokasifilteract,\n    1: setasallokasifilteract\n  } = useState(location_id1 === \"\" ? false : true);\n  const {\n    0: asallokasitrigger,\n    1: setasallokasitrigger\n  } = useState(-1);\n  const {\n    0: statusfilteract,\n    1: setstatusfilteract\n  } = useState(is_enabled1 === \"\" ? false : true); //state value\n\n  const {\n    0: namavalue,\n    1: setnamavalue\n  } = useState(null);\n  const {\n    0: asallokasivalue,\n    1: setasallokasivalue\n  } = useState(null);\n  const {\n    0: asalcompanyvalue,\n    1: setasalcompanyvalue\n  } = useState(null);\n  const {\n    0: statusvalue,\n    1: setstatusvalue\n  } = useState(null);\n  const {\n    0: loadinglokasi,\n    1: setloadinglokasi\n  } = useState(true);\n  const {\n    0: namaasset,\n    1: setnamaasset\n  } = useState(location_id1);\n  const {\n    0: defasset,\n    1: setdefasset\n  } = useState(null);\n  const {\n    0: defasset2,\n    1: setdefasset2\n  } = useState(null); //function\n\n  var temp = [];\n\n  function getidData(dataa) {\n    for (var i = 0; i < dataa.length; i++) {\n      temp.push(dataa[i][\"id\"]);\n\n      if (dataa[i][\"children\"]) {\n        getidData(dataa[i][\"children\"]);\n      }\n    }\n  } //filtering\n\n\n  const onChangeSearch = e => {\n    if (e.target.value === \"\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=&location_id=${asallokasifilteract ? location_id1 : \"\"}&is_enabled=${statusfilteract ? is_enabled1 : \"\"}&company_id=${asalcompanyfilteract ? company_id1 : \"\"}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n\n  const onChangeAsalCompany = value => {\n    if (typeof value === \"undefined\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=${namasearchact ? name1 : \"\"}&location_id=&is_enabled=${statusfilteract ? is_enabled1 : \"\"}&company_id=`; // setasalcompanyfilteract(false)\n      // setasalcompanyvalue(null)\n      // setdatalokasi([])\n      // setloadinglokasi(true)\n    } else {\n      setasalcompanyfilteract(true);\n      setasalcompanyvalue(value);\n      setasallokasitrigger(prev => prev + 1);\n    }\n  };\n\n  const onChangeAsalLokasi = value => {\n    if (typeof value === \"undefined\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=${namasearchact ? name1 : \"\"}&location_id=&is_enabled=${statusfilteract ? is_enabled1 : \"\"}&company_id=${asalcompanyfilteract ? company_id1 : \"\"}`; // setasallokasifilteract(false)\n      // setasalcompanyfilteract(true)\n      // setasallokasivalue(null)\n    } else {\n      setasallokasifilteract(true);\n      setasalcompanyfilteract(true);\n      setasallokasivalue(value);\n    }\n  };\n\n  const onChangeStatus = value => {\n    if (typeof value === \"undefined\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=${namasearchact ? name1 : \"\"}&location_id=&is_enabled=&company_id=${asalcompanyfilteract ? company_id1 : \"\"}`;\n      setstatusfilteract(false);\n    } else {\n      setstatusfilteract(true);\n      setstatusvalue(value);\n    }\n  };\n\n  const onFinalClick = () => {\n    // var datatemp = dataraw\n    // if (asalcompanyfilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.company_id === asalcompanyvalue\n    //     })\n    // }\n    // if (asallokasifilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.company_id === asallokasivalue\n    //     })\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.fullname.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // if (statusfilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.status === statusvalue\n    //     })\n    // }\n    // setDataSource(datatemp)\n    window.location.href = `/admin/requesters?name=${namasearchact ? namavalue === null ? name1 : namavalue : \"\"}&location_id=${asallokasifilteract ? asallokasivalue === null ? location_id1 : asallokasivalue : \"\"}&is_enabled=${statusfilteract ? statusvalue === null ? is_enabled1 : statusvalue : \"\"}&company_id=${asalcompanyfilteract ? asalcompanyvalue === null ? company_id1 : asalcompanyvalue : \"\"}`;\n  };\n\n  const FilterAll = () => {\n    setDataSource(dataraw);\n  };\n\n  const FilterByWord = word => {\n    const currValue = word;\n    const filteredData = dataraw.filter(entry => {\n      if (entry.fullname.toLowerCase()[0] === word) {\n        return entry.fullname.toLowerCase().includes(currValue);\n      }\n    });\n    setDataSource(filteredData);\n  };\n\n  const onFilterByCompany = val => {\n    setDataSource(dataraw);\n\n    if (val === \"all\") {\n      setDataSource(dataraw);\n    } else {\n      setDataSource(prev => {\n        return prev.filter(dataa => {\n          return dataa.company_id === val;\n        });\n      });\n    }\n  };\n\n  const columnsDD = [{\n    dataIndex: \"profil_image\",\n    render: (text, record, index) => {\n      return {\n        // props: {\n        //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n        // },\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: record.profile_image,\n            alt: \"imageProfile\",\n            className: \" object-cover w-10 h-10 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)\n        }, void 0, false)\n      };\n    } // render: (text, record, index) => (\n    //     <>\n    //         <img src={record.profile_image} alt=\"imageProfile\" className=\" object-cover w-10 h-10 rounded-full\" />\n    //     </>\n    // )\n\n  }, // {\n  //     title: 'ID',\n  //     dataIndex: 'user_id',\n  //     // sorter: (a, b) => a.user_id - b.user_id,\n  //     // sortDirections: ['descend', 'ascend'],\n  //     render: (text, record, index) => {\n  //         return {\n  //             // props: {\n  //             //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n  //             // },\n  //             children:\n  //                 <>\n  //                     {record.user_id}\n  //                 </>\n  //         }\n  //     }\n  // },\n  {\n    title: \"Nama\",\n    dataIndex: \"name\",\n    // sorter: (a, b) => a.fullname.localeCompare(b.fullname),\n    // sortDirections: ['descend', 'ascend'],\n    render: (text, record, index) => {\n      return {\n        // props: {\n        //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n        // },\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.name\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Email\",\n    dataIndex: \"email\",\n    render: (text, record, index) => {\n      return {\n        // props: {\n        //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n        // },\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.email\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Posisi\",\n    dataIndex: \"position\",\n    render: (text, record, index) => {\n      return {\n        // props: {\n        //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n        // },\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.position\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"No. Handphone\",\n    dataIndex: \"phone_number\",\n    render: (text, record, index) => {\n      return {\n        // props: {\n        //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n        // },\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.phone_number\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Asal Perusahaan\",\n    dataIndex: \"company_name\",\n    render: (text, record, index) => {\n      return {\n        // props: {\n        //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n        // },\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.company_name\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Status\",\n    dataIndex: \"is_enabled\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.is_enabled ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md w-auto h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\",\n            children: \"Aktif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md w-auto h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\",\n            children: \"Non-aktif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)\n      };\n    }\n  } // {\n  //     title: '\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0',\n  //     dataIndex: 'actionss',\n  //     render: (text, record, index) => {\n  //         return {\n  //             // props: {\n  //             //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n  //             // },\n  //             children:\n  //                 <>\n  //                     {/* {\n  //                         actions[index] ?\n  //                             <>{actions[index]} */}\n  //                     {\n  //                         [114, 115, 116, 118, 133].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n  //                             <Button onClick={() => { rt.push(`/admin/requesters/${record.user_id}`) }} style={{ paddingTop: `0`, paddingBottom: `0.3rem` }}>\n  //                                 <EditOutlined />\n  //                             </Button>\n  //                             :\n  //                             null\n  //                     }\n  //                     {/* </>\n  //                             :\n  //                             null\n  //                     } */}\n  //                 </>\n  //         }\n  //     }\n  //     // render: (text, record, index) => (\n  //     //     <>\n  //     //         {\n  //     //             actions[index] ?\n  //     //                 <>{actions[index]}\n  //     //                     <Button onClick={() => { rt.push(`/admin/requesters/${record.user_id}`) }} style={{ paddingTop: `0`, paddingBottom: `0.3rem` }}>\n  //     //                         <EditOutlined />\n  //     //                     </Button>\n  //     //                 </>\n  //     //                 :\n  //     //                 null\n  //     //         }\n  //     //     </>\n  //     // )\n  // }\n  ]; //useEffect\n\n  useEffect(() => {\n    setpraloading(true);\n    setdatarawloading(true);\n    setdatarawloading2(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterList?name=${name1}&company_id=${location_id1 === \"\" && company_id1 === \"null\" ? \"\" : location_id1 === \"\" ? company_id1 : location_id1}${is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res2 => {\n      setrawdata(res2.data);\n      var dataDD = [];\n\n      if (!res2) {\n        dataDD = [];\n\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        rt.push(\"/dashboard/admin\");\n      } else {\n        dataDD = res2.data.data.map((doc, idx) => {\n          return {\n            id: doc.id,\n            profile_image: doc.profile_image === \"\" || doc.profile_image === \"-\" ? `/default-users.jpeg` : doc.profile_image,\n            name: doc.name,\n            email: doc.email,\n            phone_number: doc.phone_number,\n            company_id: doc.company_id,\n            company_name: doc.company_name,\n            is_enabled: doc.is_enabled,\n            position: doc.position\n          };\n        });\n      }\n\n      setdataraw(res2.data);\n      setDataSource(dataDD);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getCompanyClientList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatacompany(res2.data);\n      setdatarawloading(false);\n    });\n  }, []);\n  useEffect(() => {\n    setloadinglokasi(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getLocations${location_id1 !== \"\" ? `?company_id=${company_id1}` : ``}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      if (location_id1 !== \"\") {\n        res2.data.children ? setdatalokasi(res2.data.children) : setdatalokasi([]);\n        setloadinglokasi(false);\n        var selectedBranchClient = {};\n\n        const recursiveSearchBranchClient = (doc, key) => {\n          for (var i = 0; i < doc.length; i++) {\n            if (doc[i].id === key) {\n              selectedBranchClient = doc[i];\n            } else {\n              if (doc[i].children) {\n                recursiveSearchBranchClient(doc[i].children, key);\n              }\n            }\n          }\n        };\n\n        res2.data.children ? recursiveSearchBranchClient(res2.data.children, Number(location_id1)) : selectedBranchClient = null;\n        res2.data.children ? setdefasset2(selectedBranchClient.key) : setdefasset2(null);\n      } else {\n        setdatalokasi([]);\n        company_id1 === \"\" ? setloadinglokasi(true) : setloadinglokasi(false);\n      }\n\n      setdatarawloading2(false);\n    });\n  }, []);\n  useEffect(() => {\n    if (asallokasitrigger !== -1) {\n      setloadinglokasi(true);\n      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getLocations${asalcompanyvalue !== null ? `?company_id=${asalcompanyvalue}` : ``}`, {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(res => res.json()).then(res2 => {\n        if (asalcompanyvalue !== null) {\n          res2.data.children ? setdatalokasi(res2.data.children) : setdatalokasi([]);\n          setloadinglokasi(false);\n        } else {\n          setdatalokasi([]);\n          setloadinglokasi(false);\n        }\n      });\n    }\n  }, [asallokasitrigger]);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: tok,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    sidemenu: sidemenu,\n    originPath: originPath,\n    st: st,\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b p-4 bg-white mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold text-base w-auto\",\n            children: \"Requesters\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 11\n        }, this),\n        /*#__PURE__*/\n        // [117].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n        _jsxDEV(\"div\", {\n          className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: {\n              pathname: \"/admin/requesters/create\"\n            },\n            children: /*#__PURE__*/_jsxDEV(_Button, {\n              /*onClick={() => { console.log(asalcompanyfilteract, company_id1, asalcompanyvalue); console.log(asallokasifilteract, location_id1, asallokasivalue) }}*/\n              size: \"large\",\n              type: \"primary\",\n              children: \"Tambah\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 9\n      }, this),\n      /*#__PURE__*/\n      // [119].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n      _jsxDEV(\"div\", {\n        className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex mb-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" w-10/12 mr-1 grid grid-cols-9\",\n              children: [datarawloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-3 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_Input, {\n                  defaultValue: name1,\n                  style: {\n                    width: `100%`,\n                    marginRight: `0.5rem`\n                  },\n                  placeholder: \"Cari nama requester\",\n                  onChange: onChangeSearch,\n                  allowClear: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 21\n              }, this), datarawloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-2 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_Select, {\n                  defaultValue: company_id1 === \"\" ? null : Number(company_id1),\n                  placeholder: \"Pilih asal perusahaan requester\",\n                  style: {\n                    width: `100%`,\n                    marginRight: `0.5rem`\n                  },\n                  onChange: onChangeAsalCompany,\n                  allowClear: true,\n                  children: datacompany.map((doc, idx) => {\n                    return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                      value: doc.id,\n                      children: doc.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 621,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 21\n              }, this), datarawloading2 ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-2 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                  defaultValue: location_id1 === \"\" ? null : defasset2 === null ? defasset2 : Number(defasset2),\n                  allowClear: true,\n                  dropdownStyle: {\n                    maxHeight: 400,\n                    overflow: \"auto\"\n                  },\n                  treeData: datalokasi,\n                  placeholder: \"Cari asal lokasi requester\",\n                  treeDefaultExpandAll: true,\n                  style: {\n                    width: `100%`,\n                    marginRight: `0.5rem`\n                  },\n                  onChange: onChangeAsalLokasi,\n                  disabled: loadinglokasi\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 21\n              }, this), datarawloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-2 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_Select, {\n                  defaultValue: is_enabled1 === \"\" ? null : is_enabled1 === \"true\" ? true : false,\n                  placeholder: \"Pilih status requester\",\n                  style: {\n                    width: `100%`,\n                    marginRight: `0.5rem`\n                  },\n                  onChange: onChangeStatus,\n                  allowClear: true,\n                  children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: true,\n                    children: \"Aktif\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 673,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: false,\n                    children: \"Non Aktif\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 674,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 17\n            }, this), datarawloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2/12\",\n              children: /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                style: {\n                  width: `100%`\n                },\n                onClick: onFinalClick,\n                children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 686,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 681,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Table, {\n            pagination: {\n              pageSize: 10,\n              total: rawdata.total,\n              onChange: (page, pageSize) => {\n                setpraloading(true);\n                fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterList?page=${page}&rows=10&name=${name1}&company_id=${location_id1 === \"\" ? company_id1 : location_id1}${is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`}`, {\n                  // fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterList`, {\n                  method: `GET`,\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(res => res.json()).then(res2 => {\n                  setrawdata(res2.data);\n                  var temppagination = res2.data.data.map((doc, idx) => _objectSpread(_objectSpread({}, doc), {}, {\n                    profile_image: doc.profile_image === \"-\" || doc.profile_image === \"\" ? `/default-users.jpeg` : doc.profile_image\n                  }));\n                  setDataSource(temppagination);\n                  setpraloading(false);\n                });\n              }\n            },\n            scroll: {\n              x: 200\n            },\n            dataSource: dataKK,\n            columns: columnsDD,\n            loading: praloading,\n            onRow: (record, rowIndex) => {\n              return {\n                onMouseOver: event => {\n                  setrowstate(record.id);\n                },\n                onClick: event => {\n                  {\n                    // [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                    rt.push(`/admin/requesters/detail/${record.id}`); // :\n                    // null\n                  }\n                }\n              };\n            },\n            rowClassName: (record, idx) => {\n              return record.id === rowstate ? `cursor-pointer` : ``;\n            } // onRow={(record, rowIndex) => {\n            //     return {\n            //         onMouseOver: (event) => {\n            //             var actionsCopy = actions\n            //             actionsCopy[rowIndex] = true\n            //             setActions(actionsCopy)\n            //             setAction(\"block\")\n            //         },\n            //         onMouseLeave: (event) => {\n            //             var actionsCopy = actions\n            //             actionsCopy[rowIndex] = false\n            //             setActions(actionsCopy)\n            //             setAction(\"hidden\")\n            //         }\n            //     }\n            // }}\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 560,\n    columnNumber: 5\n  }, this);\n}\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n  const reqBodyAccountList = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\"\n  };\n  const reqBody = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\"\n  };\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![119, 118, 117, 116, 115, 114, 133].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n  // const resourcesLA = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterList`, {\n  //     method: `POST`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps),\n  //         'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify(reqBodyAccountList)\n  // })\n  // const resjsonLA = await resourcesLA.json()\n  // const dataListRequester = resjsonLA\n  // const resourcesGCL = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getClientCompanyList`, {\n  //     method: `POST`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps),\n  //         'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify(reqBody)\n  // })\n  // const resjsonGCL = await resourcesGCL.json()\n  // const dataCompanyList = resjsonGCL\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      // dataListRequester,\n      // dataCompanyList,\n      sidemenu: \"62\"\n    }\n  };\n}\nexport default Requesters;","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/requesters/index.js"],"names":["SearchOutlined","Link","useRouter","useEffect","useState","Layout","st","httpcookie","modifData","dataa","i","length","id","name","members","children","Requesters","initProps","dataProfile","dataListRequester","dataCompanyList","sidemenu","rt","tok","pathArr","pathname","split","slice","originPath","query","location_id1","name1","is_enabled1","company_id1","location_id","is_enabled","company_id","rawdata","setrawdata","current_page","data","first_page_url","from","last_page","last_page_url","next_page_url","path","per_page","prev_page_url","to","total","dataraw","setdataraw","praloading","setpraloading","datarawloading","setdatarawloading","datarawloading2","setdatarawloading2","dataKK","setDataSource","rowstate","setrowstate","datacompany","setdatacompany","datalokasi","setdatalokasi","namasearchact","setnamasearchact","asalcompanyfilteract","setasalcompanyfilteract","asallokasifilteract","setasallokasifilteract","asallokasitrigger","setasallokasitrigger","statusfilteract","setstatusfilteract","namavalue","setnamavalue","asallokasivalue","setasallokasivalue","asalcompanyvalue","setasalcompanyvalue","statusvalue","setstatusvalue","loadinglokasi","setloadinglokasi","namaasset","setnamaasset","defasset","setdefasset","defasset2","setdefasset2","temp","getidData","push","onChangeSearch","e","target","value","window","location","href","onChangeAsalCompany","prev","onChangeAsalLokasi","onChangeStatus","onFinalClick","FilterAll","FilterByWord","word","currValue","filteredData","filter","entry","fullname","toLowerCase","includes","onFilterByCompany","val","columnsDD","dataIndex","render","text","record","index","profile_image","title","email","position","phone_number","company_name","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","then","res","json","res2","dataDD","message","errorInfo","status_detail","duration","map","doc","idx","selectedBranchClient","recursiveSearchBranchClient","key","Number","width","marginRight","maxHeight","overflow","pageSize","onChange","page","temppagination","x","rowIndex","onMouseOver","event","onClick","getServerSideProps","req","reqBodyAccountList","rows","order_by","reqBody","cookie","redirect","permanent","destination","cookiesJSON1","token","resourcesGP","resjsonGP","props"],"mappings":"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","sourcesContent":["import { SearchOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Select, Table, TreeSelect, notification } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\n\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction modifData(dataa) {\n  for (var i = 0; i < dataa.length; i++) {\n    dataa[i][\"key\"] = dataa[i].id;\n    dataa[i][\"value\"] = dataa[i].id;\n    dataa[i][\"title\"] = dataa[i].name;\n    dataa[i][\"children\"] = dataa[i].members;\n    delete dataa[i].members;\n    if (dataa[i].children) {\n      modifData(dataa[i].children);\n    }\n  }\n  return dataa;\n}\n\nfunction Requesters({\n  initProps,\n  dataProfile,\n  dataListRequester,\n  dataCompanyList,\n  sidemenu,\n}) {\n  const rt = useRouter();\n  const tok = initProps;\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  const { originPath } = rt.query;\n  var location_id1 = \"\",\n    name1 = \"\",\n    is_enabled1 = \"\",\n    company_id1 = \"\";\n  const { location_id, name, is_enabled, company_id } = rt.query;\n  if (location_id) {\n    location_id1 = location_id;\n  }\n  if (name) {\n    name1 = name;\n  }\n  if (is_enabled) {\n    is_enabled1 = is_enabled;\n  }\n  if (company_id) {\n    company_id1 = company_id;\n  }\n  const [rawdata, setrawdata] = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null,\n  });\n\n  //useState\n  const [dataraw, setdataraw] = useState([]);\n  const [praloading, setpraloading] = useState(true);\n  const [datarawloading, setdatarawloading] = useState(false);\n  const [datarawloading2, setdatarawloading2] = useState(false);\n  const [dataKK, setDataSource] = useState([]);\n  const [rowstate, setrowstate] = useState(0);\n  const [datacompany, setdatacompany] = useState([]);\n  const [datalokasi, setdatalokasi] = useState([]);\n  //state order\n  const [namasearchact, setnamasearchact] = useState(\n    name1 === \"\" ? false : true\n  );\n  const [asalcompanyfilteract, setasalcompanyfilteract] = useState(\n    company_id1 === \"\" ? false : true\n  );\n  const [asallokasifilteract, setasallokasifilteract] = useState(\n    location_id1 === \"\" ? false : true\n  );\n  const [asallokasitrigger, setasallokasitrigger] = useState(-1);\n  const [statusfilteract, setstatusfilteract] = useState(\n    is_enabled1 === \"\" ? false : true\n  );\n  //state value\n  const [namavalue, setnamavalue] = useState(null);\n  const [asallokasivalue, setasallokasivalue] = useState(null);\n  const [asalcompanyvalue, setasalcompanyvalue] = useState(null);\n  const [statusvalue, setstatusvalue] = useState(null);\n  const [loadinglokasi, setloadinglokasi] = useState(true);\n  const [namaasset, setnamaasset] = useState(location_id1);\n  const [defasset, setdefasset] = useState(null);\n  const [defasset2, setdefasset2] = useState(null);\n\n  //function\n  var temp = [];\n  function getidData(dataa) {\n    for (var i = 0; i < dataa.length; i++) {\n      temp.push(dataa[i][\"id\"]);\n      if (dataa[i][\"children\"]) {\n        getidData(dataa[i][\"children\"]);\n      }\n    }\n  }\n\n  //filtering\n  const onChangeSearch = (e) => {\n    if (e.target.value === \"\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=&location_id=${\n        asallokasifilteract ? location_id1 : \"\"\n      }&is_enabled=${statusfilteract ? is_enabled1 : \"\"}&company_id=${\n        asalcompanyfilteract ? company_id1 : \"\"\n      }`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n  const onChangeAsalCompany = (value) => {\n    if (typeof value === \"undefined\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=${\n        namasearchact ? name1 : \"\"\n      }&location_id=&is_enabled=${\n        statusfilteract ? is_enabled1 : \"\"\n      }&company_id=`;\n      // setasalcompanyfilteract(false)\n      // setasalcompanyvalue(null)\n      // setdatalokasi([])\n      // setloadinglokasi(true)\n    } else {\n      setasalcompanyfilteract(true);\n      setasalcompanyvalue(value);\n      setasallokasitrigger((prev) => prev + 1);\n    }\n  };\n  const onChangeAsalLokasi = (value) => {\n    if (typeof value === \"undefined\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=${\n        namasearchact ? name1 : \"\"\n      }&location_id=&is_enabled=${\n        statusfilteract ? is_enabled1 : \"\"\n      }&company_id=${asalcompanyfilteract ? company_id1 : \"\"}`;\n      // setasallokasifilteract(false)\n      // setasalcompanyfilteract(true)\n      // setasallokasivalue(null)\n    } else {\n      setasallokasifilteract(true);\n      setasalcompanyfilteract(true);\n      setasallokasivalue(value);\n    }\n  };\n  const onChangeStatus = (value) => {\n    if (typeof value === \"undefined\") {\n      // setDataSource(dataraw)\n      window.location.href = `/admin/requesters?name=${\n        namasearchact ? name1 : \"\"\n      }&location_id=&is_enabled=&company_id=${\n        asalcompanyfilteract ? company_id1 : \"\"\n      }`;\n      setstatusfilteract(false);\n    } else {\n      setstatusfilteract(true);\n      setstatusvalue(value);\n    }\n  };\n  const onFinalClick = () => {\n    // var datatemp = dataraw\n    // if (asalcompanyfilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.company_id === asalcompanyvalue\n    //     })\n    // }\n    // if (asallokasifilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.company_id === asallokasivalue\n    //     })\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.fullname.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // if (statusfilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.status === statusvalue\n    //     })\n    // }\n    // setDataSource(datatemp)\n    window.location.href = `/admin/requesters?name=${\n      namasearchact ? (namavalue === null ? name1 : namavalue) : \"\"\n    }&location_id=${\n      asallokasifilteract\n        ? asallokasivalue === null\n          ? location_id1\n          : asallokasivalue\n        : \"\"\n    }&is_enabled=${\n      statusfilteract ? (statusvalue === null ? is_enabled1 : statusvalue) : \"\"\n    }&company_id=${\n      asalcompanyfilteract\n        ? asalcompanyvalue === null\n          ? company_id1\n          : asalcompanyvalue\n        : \"\"\n    }`;\n  };\n\n  const FilterAll = () => {\n    setDataSource(dataraw);\n  };\n  const FilterByWord = (word) => {\n    const currValue = word;\n    const filteredData = dataraw.filter((entry) => {\n      if (entry.fullname.toLowerCase()[0] === word) {\n        return entry.fullname.toLowerCase().includes(currValue);\n      }\n    });\n    setDataSource(filteredData);\n  };\n  const onFilterByCompany = (val) => {\n    setDataSource(dataraw);\n    if (val === \"all\") {\n      setDataSource(dataraw);\n    } else {\n      setDataSource((prev) => {\n        return prev.filter((dataa) => {\n          return dataa.company_id === val;\n        });\n      });\n    }\n  };\n\n  const columnsDD = [\n    {\n      dataIndex: \"profil_image\",\n      render: (text, record, index) => {\n        return {\n          // props: {\n          //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n          // },\n          children: (\n            <>\n              <img\n                src={record.profile_image}\n                alt=\"imageProfile\"\n                className=\" object-cover w-10 h-10 rounded-full\"\n              />\n            </>\n          ),\n        };\n      },\n      // render: (text, record, index) => (\n      //     <>\n      //         <img src={record.profile_image} alt=\"imageProfile\" className=\" object-cover w-10 h-10 rounded-full\" />\n      //     </>\n      // )\n    },\n    // {\n    //     title: 'ID',\n    //     dataIndex: 'user_id',\n    //     // sorter: (a, b) => a.user_id - b.user_id,\n    //     // sortDirections: ['descend', 'ascend'],\n    //     render: (text, record, index) => {\n    //         return {\n    //             // props: {\n    //             //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n    //             // },\n    //             children:\n    //                 <>\n    //                     {record.user_id}\n    //                 </>\n    //         }\n    //     }\n    // },\n    {\n      title: \"Nama\",\n      dataIndex: \"name\",\n      // sorter: (a, b) => a.fullname.localeCompare(b.fullname),\n      // sortDirections: ['descend', 'ascend'],\n      render: (text, record, index) => {\n        return {\n          // props: {\n          //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n          // },\n          children: <>{record.name}</>,\n        };\n      },\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"email\",\n      render: (text, record, index) => {\n        return {\n          // props: {\n          //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n          // },\n          children: <>{record.email}</>,\n        };\n      },\n    },\n    {\n      title: \"Posisi\",\n      dataIndex: \"position\",\n      render: (text, record, index) => {\n        return {\n          // props: {\n          //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n          // },\n          children: <>{record.position}</>,\n        };\n      },\n    },\n    {\n      title: \"No. Handphone\",\n      dataIndex: \"phone_number\",\n      render: (text, record, index) => {\n        return {\n          // props: {\n          //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n          // },\n          children: <>{record.phone_number}</>,\n        };\n      },\n    },\n    {\n      title: \"Asal Perusahaan\",\n      dataIndex: \"company_name\",\n      render: (text, record, index) => {\n        return {\n          // props: {\n          //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n          // },\n          children: <>{record.company_name}</>,\n        };\n      },\n    },\n    {\n      title: \"Status\",\n      dataIndex: \"is_enabled\",\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>\n              {record.is_enabled ? (\n                <div className=\"rounded-md w-auto h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\">\n                  Aktif\n                </div>\n              ) : (\n                <div className=\"rounded-md w-auto h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\">\n                  Non-aktif\n                </div>\n              )}\n            </>\n          ),\n        };\n      },\n    },\n    // {\n    //     title: '\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0',\n    //     dataIndex: 'actionss',\n    //     render: (text, record, index) => {\n    //         return {\n    //             // props: {\n    //             //     style: { backgroundColor: index % 2 == 1 ? '#f2f2f2' : '#fff' },\n    //             // },\n    //             children:\n    //                 <>\n    //                     {/* {\n    //                         actions[index] ?\n    //                             <>{actions[index]} */}\n    //                     {\n    //                         [114, 115, 116, 118, 133].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n    //                             <Button onClick={() => { rt.push(`/admin/requesters/${record.user_id}`) }} style={{ paddingTop: `0`, paddingBottom: `0.3rem` }}>\n    //                                 <EditOutlined />\n    //                             </Button>\n    //                             :\n    //                             null\n    //                     }\n    //                     {/* </>\n    //                             :\n    //                             null\n    //                     } */}\n    //                 </>\n    //         }\n    //     }\n    //     // render: (text, record, index) => (\n    //     //     <>\n    //     //         {\n    //     //             actions[index] ?\n    //     //                 <>{actions[index]}\n    //     //                     <Button onClick={() => { rt.push(`/admin/requesters/${record.user_id}`) }} style={{ paddingTop: `0`, paddingBottom: `0.3rem` }}>\n    //     //                         <EditOutlined />\n    //     //                     </Button>\n    //     //                 </>\n    //     //                 :\n    //     //                 null\n    //     //         }\n    //     //     </>\n    //     // )\n    // }\n  ];\n\n  //useEffect\n  useEffect(() => {\n    setpraloading(true);\n    setdatarawloading(true);\n    setdatarawloading2(true);\n    fetch(\n      `${\n        process.env.NEXT_PUBLIC_BACKEND_URL\n      }/getRequesterList?name=${name1}&company_id=${\n        location_id1 === \"\" && company_id1 === \"null\"\n          ? \"\"\n          : location_id1 === \"\"\n          ? company_id1\n          : location_id1\n      }${is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`}`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        setrawdata(res2.data);\n        var dataDD = [];\n        if (!res2) {\n          dataDD = [];\n          notification[\"error\"]({\n            message: res2.message.errorInfo.status_detail,\n            duration: 3,\n          });\n          rt.push(\"/dashboard/admin\");\n        } else {\n          dataDD = res2.data.data.map((doc, idx) => {\n            return {\n              id: doc.id,\n              profile_image:\n                doc.profile_image === \"\" || doc.profile_image === \"-\"\n                  ? `/default-users.jpeg`\n                  : doc.profile_image,\n              name: doc.name,\n              email: doc.email,\n              phone_number: doc.phone_number,\n              company_id: doc.company_id,\n              company_name: doc.company_name,\n              is_enabled: doc.is_enabled,\n              position: doc.position,\n            };\n          });\n        }\n        setdataraw(res2.data);\n        setDataSource(dataDD);\n        setpraloading(false);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getCompanyClientList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setdatacompany(res2.data);\n        setdatarawloading(false);\n      });\n  }, []);\n  useEffect(() => {\n    setloadinglokasi(true);\n    fetch(\n      `${process.env.NEXT_PUBLIC_BACKEND_URL}/getLocations${\n        location_id1 !== \"\" ? `?company_id=${company_id1}` : ``\n      }`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        if (location_id1 !== \"\") {\n          res2.data.children\n            ? setdatalokasi(res2.data.children)\n            : setdatalokasi([]);\n          setloadinglokasi(false);\n          var selectedBranchClient = {};\n          const recursiveSearchBranchClient = (doc, key) => {\n            for (var i = 0; i < doc.length; i++) {\n              if (doc[i].id === key) {\n                selectedBranchClient = doc[i];\n              } else {\n                if (doc[i].children) {\n                  recursiveSearchBranchClient(doc[i].children, key);\n                }\n              }\n            }\n          };\n          res2.data.children\n            ? recursiveSearchBranchClient(\n                res2.data.children,\n                Number(location_id1)\n              )\n            : (selectedBranchClient = null);\n          res2.data.children\n            ? setdefasset2(selectedBranchClient.key)\n            : setdefasset2(null);\n        } else {\n          setdatalokasi([]);\n          company_id1 === \"\" ? setloadinglokasi(true) : setloadinglokasi(false);\n        }\n        setdatarawloading2(false);\n      });\n  }, []);\n  useEffect(() => {\n    if (asallokasitrigger !== -1) {\n      setloadinglokasi(true);\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getLocations${\n          asalcompanyvalue !== null ? `?company_id=${asalcompanyvalue}` : ``\n        }`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          if (asalcompanyvalue !== null) {\n            res2.data.children\n              ? setdatalokasi(res2.data.children)\n              : setdatalokasi([]);\n            setloadinglokasi(false);\n          } else {\n            setdatalokasi([]);\n            setloadinglokasi(false);\n          }\n        });\n    }\n  }, [asallokasitrigger]);\n  return (\n    <Layout\n      tok={tok}\n      dataProfile={dataProfile}\n      pathArr={pathArr}\n      sidemenu={sidemenu}\n      originPath={originPath}\n      st={st}\n    >\n      <>\n        <div className=\"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b p-4 bg-white mb-5\">\n          <div className=\"col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\">\n            <div className=\"font-semibold text-base w-auto\">Requesters</div>\n          </div>\n          {\n            // [117].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n            <div className=\" col-span-1 md:col-span-1 flex md:justify-end items-center\">\n              <Link\n                href={{\n                  pathname: \"/admin/requesters/create\",\n                }}\n              >\n                <Button\n                  /*onClick={() => { console.log(asalcompanyfilteract, company_id1, asalcompanyvalue); console.log(asallokasifilteract, location_id1, asallokasivalue) }}*/ size=\"large\"\n                  type=\"primary\"\n                >\n                  Tambah\n                </Button>\n              </Link>\n            </div>\n          }\n        </div>\n        {\n          // [119].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n          <div className=\"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white\">\n            <div className=\"md:col-span-5 col-span-1 flex flex-col py-3\">\n              <div className=\"flex mb-8\">\n                <div className=\" w-10/12 mr-1 grid grid-cols-9\">\n                  {datarawloading ? null : (\n                    <div className=\"col-span-3 mr-1\">\n                      <Input\n                        defaultValue={name1}\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        placeholder=\"Cari nama requester\"\n                        onChange={onChangeSearch}\n                        allowClear\n                      ></Input>\n                    </div>\n                  )}\n                  {datarawloading ? null : (\n                    <div className=\"col-span-2 mr-1\">\n                      <Select\n                        defaultValue={\n                          company_id1 === \"\" ? null : Number(company_id1)\n                        }\n                        placeholder=\"Pilih asal perusahaan requester\"\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        onChange={onChangeAsalCompany}\n                        allowClear\n                      >\n                        {datacompany.map((doc, idx) => {\n                          return (\n                            <Select.Option value={doc.id}>\n                              {doc.name}\n                            </Select.Option>\n                          );\n                        })}\n                      </Select>\n                      {/* <TreeSelect defaultValue={company_id1 === \"null\" || company_id1 === \"\" ? null : Number(defasset)} allowClear\n                                                    dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                                                    treeData={datacompany}\n                                                    placeholder=\"Cari asal perusahaan requester\"\n                                                    treeDefaultExpandAll\n                                                    style={{ width: `100%`, marginRight: `0.5rem` }}\n                                                    onChange={onChangeAsalCompany}\n                                                /> */}\n                    </div>\n                  )}\n                  {datarawloading2 ? null : (\n                    <div className=\"col-span-2 mr-1\">\n                      <TreeSelect\n                        defaultValue={\n                          location_id1 === \"\"\n                            ? null\n                            : defasset2 === null\n                            ? defasset2\n                            : Number(defasset2)\n                        }\n                        allowClear\n                        dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                        treeData={datalokasi}\n                        placeholder=\"Cari asal lokasi requester\"\n                        treeDefaultExpandAll\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        onChange={onChangeAsalLokasi}\n                        disabled={loadinglokasi}\n                      />\n                    </div>\n                  )}\n                  {datarawloading ? null : (\n                    <div className=\"col-span-2 mr-1\">\n                      <Select\n                        defaultValue={\n                          is_enabled1 === \"\"\n                            ? null\n                            : is_enabled1 === \"true\"\n                            ? true\n                            : false\n                        }\n                        placeholder=\"Pilih status requester\"\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        onChange={onChangeStatus}\n                        allowClear\n                      >\n                        <Select.Option value={true}>Aktif</Select.Option>\n                        <Select.Option value={false}>Non Aktif</Select.Option>\n                      </Select>\n                    </div>\n                  )}\n                </div>\n                {datarawloading ? null : (\n                  <div className=\"w-2/12\">\n                    <Button\n                      type=\"primary\"\n                      style={{ width: `100%` }}\n                      onClick={onFinalClick}\n                    >\n                      <SearchOutlined />\n                    </Button>\n                  </div>\n                )}\n              </div>\n              <Table\n                pagination={{\n                  pageSize: 10,\n                  total: rawdata.total,\n                  onChange: (page, pageSize) => {\n                    setpraloading(true);\n                    fetch(\n                      `${\n                        process.env.NEXT_PUBLIC_BACKEND_URL\n                      }/getRequesterList?page=${page}&rows=10&name=${name1}&company_id=${\n                        location_id1 === \"\" ? company_id1 : location_id1\n                      }${\n                        is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`\n                      }`,\n                      {\n                        // fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterList`, {\n                        method: `GET`,\n                        headers: {\n                          Authorization: JSON.parse(initProps),\n                        },\n                      }\n                    )\n                      .then((res) => res.json())\n                      .then((res2) => {\n                        setrawdata(res2.data);\n                        var temppagination = res2.data.data.map((doc, idx) => ({\n                          ...doc,\n                          profile_image:\n                            doc.profile_image === \"-\" ||\n                            doc.profile_image === \"\"\n                              ? `/default-users.jpeg`\n                              : doc.profile_image,\n                        }));\n                        setDataSource(temppagination);\n                        setpraloading(false);\n                      });\n                  },\n                }}\n                scroll={{ x: 200 }}\n                dataSource={dataKK}\n                columns={columnsDD}\n                loading={praloading}\n                onRow={(record, rowIndex) => {\n                  return {\n                    onMouseOver: (event) => {\n                      setrowstate(record.id);\n                    },\n                    onClick: (event) => {\n                      {\n                        // [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                        rt.push(`/admin/requesters/detail/${record.id}`);\n                        // :\n                        // null\n                      }\n                    },\n                  };\n                }}\n                rowClassName={(record, idx) => {\n                  return record.id === rowstate ? `cursor-pointer` : ``;\n                }}\n                // onRow={(record, rowIndex) => {\n                //     return {\n                //         onMouseOver: (event) => {\n                //             var actionsCopy = actions\n                //             actionsCopy[rowIndex] = true\n                //             setActions(actionsCopy)\n                //             setAction(\"block\")\n                //         },\n                //         onMouseLeave: (event) => {\n                //             var actionsCopy = actions\n                //             actionsCopy[rowIndex] = false\n                //             setActions(actionsCopy)\n                //             setAction(\"hidden\")\n                //         }\n                //     }\n                // }}\n              ></Table>\n            </div>\n          </div>\n        }\n      </>\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  var initProps = {};\n  const reqBodyAccountList = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\",\n  };\n  const reqBody = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\",\n  };\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  // if (![119, 118, 117, 116, 115, 114, 133].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  // const resourcesLA = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterList`, {\n  //     method: `POST`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps),\n  //         'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify(reqBodyAccountList)\n  // })\n  // const resjsonLA = await resourcesLA.json()\n  // const dataListRequester = resjsonLA\n\n  // const resourcesGCL = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getClientCompanyList`, {\n  //     method: `POST`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps),\n  //         'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify(reqBody)\n  // })\n  // const resjsonGCL = await resourcesGCL.json()\n  // const dataCompanyList = resjsonGCL\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      // dataListRequester,\n      // dataCompanyList,\n      sidemenu: \"62\",\n    },\n  };\n}\n\nexport default Requesters;\n"]},"metadata":{},"sourceType":"module"}