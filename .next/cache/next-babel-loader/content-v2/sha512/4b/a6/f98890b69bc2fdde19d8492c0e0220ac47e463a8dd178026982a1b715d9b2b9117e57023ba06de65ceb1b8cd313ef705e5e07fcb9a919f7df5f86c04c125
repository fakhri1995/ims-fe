{"ast":null,"code":"import _Drawer from \"antd/lib/drawer\";\nimport _Table from \"antd/lib/table\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _Button from \"antd/lib/button\";\nimport _notification from \"antd/lib/notification\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _Form from \"antd/lib/form\";\nimport _Select from \"antd/lib/select\";\nimport _Input from \"antd/lib/input\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Layout from '../../../../../components/layout-dashboard';\nimport st from '../../../../../components/layout-dashboard.module.css';\nimport httpcookie from 'cookie';\nimport { useRouter } from 'next/router';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Sticky from 'wil-react-sticky';\nimport PlusSquareOutlined from '@ant-design/icons/PlusSquareOutlined';\nimport SearchOutlined from '@ant-design/icons/SearchOutlined';\nimport moment from 'moment';\n\nfunction UpdateContract({\n  initProps,\n  dataProfile,\n  contractData,\n  contractInputData,\n  sidemenu\n}) {\n  const rt = useRouter();\n  const tok = initProps;\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 1);\n  pathArr[pathArr.length - 1] = contractData.data.contract.nomor_kontrak; // const pathArr = ['admin','contracts', \"update \"+contractData.data.contract.nomor_kontrak]\n\n  const {\n    originPath\n  } = rt.query;\n  const {\n    TextArea\n  } = _Input;\n  const {\n    Option\n  } = _Select;\n\n  const [instanceForm] = _Form.useForm();\n\n  const {\n    0: loadingbtn,\n    1: setLoadingbtn\n  } = useState(false);\n  const {\n    0: opendrawer,\n    1: setOpendrawer\n  } = useState(false);\n  const contract = contractData.data.contract; // console.log(contract)\n\n  const {\n    0: dataServiceItems,\n    1: setDataServiceItems\n  } = useState([]);\n  const {\n    0: validation,\n    1: setValidation\n  } = useState({\n    harga: true,\n    id_terms_of_payment: true\n  }); //----------Create Contract Parameter-------------\n\n  const {\n    0: updatecontract,\n    1: setUpdatecontract\n  } = useState({\n    id: contract.id,\n    id_client_company: contract.id_client_company,\n    id_tipe_kontrak: contract.id_tipe_kontrak,\n    nomor_kontrak: contract.nomor_kontrak,\n    deskripsi: contract.deskripsi,\n    tanggal_mulai: moment(contract.tanggal_mulai, 'YYYY-MM-DD'),\n    tanggal_selesai: moment(contract.tanggal_selesai, 'YYYY-MM-DD'),\n    service_items: dataServiceItems\n  });\n\n  const onChangeCreateContract = e => {\n    var val = e.target.value;\n    setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n      [e.target.name]: val\n    }));\n  };\n\n  const onAddService = () => {\n    setSelectedServiceItemTemp(serviceItemTemp.serviceItemValues);\n    var items = serviceItemTemp.serviceItemValues;\n    setDataServiceItems(items);\n    setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n      service_items: items\n    }));\n    const validationHarga = items.every(item => item.harga);\n    const validationTerms = items.every(item => item.id_terms_of_payment);\n    setValidation(_objectSpread(_objectSpread({}, validation), {}, {\n      harga: validationHarga,\n      id_terms_of_payment: validationTerms\n    }));\n  };\n\n  const onChangeServicePriceItems = (e, id) => {\n    var val = e.target.value;\n    const idx = serviceItemTemp.serviceItemValues.map(item => item.id_service_item).indexOf(id); // console.log(idx,id)\n\n    var items = [...dataServiceItems];\n    items[idx].id_service_item = id;\n    items[idx].harga = val;\n    setDataServiceItems(items);\n    setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n      service_items: items\n    }));\n    const validationHarga = items.every(item => item.harga);\n    setValidation(_objectSpread(_objectSpread({}, validation), {}, {\n      harga: validationHarga\n    }));\n  };\n\n  const onChangeServiceTermsofPaymentItems = (val, id) => {\n    const idx = serviceItemTemp.serviceItemValues.map(item => item.id_service_item).indexOf(id); // console.log(idx)\n\n    var items = [...dataServiceItems];\n    items[idx].id_terms_of_payment = val;\n    setDataServiceItems(items);\n    setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n      service_items: items\n    }));\n    const validationTerms = items.every(item => item.id_terms_of_payment);\n    setValidation(_objectSpread(_objectSpread({}, validation), {}, {\n      id_terms_of_payment: validationTerms\n    }));\n  };\n\n  const DynamicComponent = () => {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [selectedServiceItemTemp.length > 0 ? /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-span-1 hidden md:col-span-1 md:flex flex-col pr-2\",\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: \"Nama Service Item\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-span-1 hidden md:col-span-1 md:flex flex-col px-2\",\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: \"Harga\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-span-1 hidden md:col-span-1 md:flex flex-col pl-2\",\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: \"Terms of Payment\"\n          })\n        })]\n      }) : /*#__PURE__*/_jsx(_Fragment, {}), selectedServiceItemTemp.map((item, idx) => {\n        return /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-span-1 md:col-span-1 flex flex-col md:pr-2 py-2\",\n            children: /*#__PURE__*/_jsx(_Input, {\n              className: '',\n              defaultValue: item.nama,\n              readOnly: true\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-span-1 md:col-span-1 flex flex-col md:px-2 py-2\",\n            children: /*#__PURE__*/_jsx(_Input, {\n              name: \"harga\" + item.key,\n              type: \"number\",\n              defaultValue: dataServiceItems[idx].harga,\n              onBlur: e => {\n                onChangeServicePriceItems(e, item.id_service_item);\n              },\n              prefix: \"IDR\",\n              suffix: \"Rupiah\",\n              allowClear: true\n            }, \"harga\" + item.key)\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-span-1 md:col-span-1 flex flex-col md:pl-2 py-2\",\n            children: /*#__PURE__*/_jsx(_Select, {\n              name: \"terms\" + item.key,\n              className: '',\n              defaultValue: dataServiceItems[idx].id_terms_of_payment,\n              allowClear: true,\n              onChange: val => {\n                onChangeServiceTermsofPaymentItems(val, item.id_service_item);\n              },\n              children: contractInputData.data.term_of_payments.map((item, idx) => {\n                return /*#__PURE__*/_jsx(Option, {\n                  value: item.id,\n                  children: item.nama\n                }, item.id);\n              })\n            }, \"terms\" + item.key)\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: 'block md:hidden',\n            children: [/*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"hr\", {\n              className: \"\"\n            }), /*#__PURE__*/_jsx(\"br\", {})]\n          })]\n        });\n      })]\n    });\n  }; //----------state untuk selected row dan temp row-------------\n\n\n  const {\n    0: selectedServiceItemTemp,\n    1: setSelectedServiceItemTemp\n  } = useState([]); // console.log(selectedServiceItemTemp)\n  //-----------------ketika memilih sementara----------------\n\n  const {\n    0: serviceItemTemp,\n    1: setServiceItemTemp\n  } = useState({\n    serviceItemValues: []\n  });\n  const {\n    0: selectedRowKeys,\n    1: setSelectedRowKeys\n  } = useState([]); //untuk menyimpan data yang di cheklist atau dipilih\n\n  const onChangeRowSelection = (selectedRowKeys, selectedRows) => {\n    // var lah = dataServiceItems.map((item,idx)=>{return item.id_service_item})\n    const a3 = selectedRows.map(t1 => _objectSpread(_objectSpread({}, t1), dataServiceItems.find(t2 => t2.id_service_item === t1.key)));\n    a3.map(obj => {\n      if (obj.harga == null) {\n        obj.harga = \"\";\n      }\n\n      if (obj.id_terms_of_payment == null) {\n        obj.id_terms_of_payment = \"\";\n      }\n\n      obj.id_service_item = obj.key;\n    });\n    setSelectedRowKeys(selectedRowKeys);\n    setServiceItemTemp(_objectSpread(_objectSpread({}, serviceItemTemp), {}, {\n      serviceItemValues: a3\n    })); // console.log(a3)\n    // console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\n  }; //---------------- table list service--------------\n\n\n  const columnsTableListService = [{\n    title: 'Nama',\n    dataIndex: 'nama',\n    render: text => /*#__PURE__*/_jsx(\"a\", {\n      children: text\n    })\n  }, {\n    title: 'Deskripsi Singkat',\n    dataIndex: 'deskripsi'\n  }];\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: onChangeRowSelection,\n    getCheckboxProps: record => ({// disabled: record.nama === 'Adobe Illustrator', // Column configuration not to be checked\n      // nama: record.nama,\n    })\n  }; //-------------populate list service---------------\n\n  const {\n    0: populateListService,\n    1: setPopulateListService\n  } = useState(contractInputData.data.service_items.map((doc, idx) => {\n    return {\n      key: doc.id,\n      nama: doc.nama_service_item,\n      deskripsi: doc.deskripsi_singkat\n    };\n  }));\n  const {\n    0: idCategory,\n    1: setIdCategory\n  } = useState(null);\n\n  const onChangeCategory = val => {\n    setIdCategory(val);\n    const listServiceByCategory = contractInputData.data.service_items.map((doc, idx) => {\n      return {\n        id_service_kategori: doc.id_service_kategori,\n        key: doc.id,\n        nama: doc.nama_service_item,\n        deskripsi: doc.deskripsi_singkat\n      };\n    }).filter(doc => {\n      return doc.id_service_kategori == val;\n    });\n    setPopulateListService(listServiceByCategory); // console.log(listServiceByCategory)\n  };\n\n  const {\n    0: defaultCategory,\n    1: setDefaultCategory\n  } = useState(null);\n\n  const clearFilterCategory = () => {\n    setDefaultCategory(null);\n    setIdCategory(null);\n    setPopulateListService(contractInputData.data.service_items.map((doc, idx) => {\n      return {\n        key: doc.id,\n        nama: doc.nama_service_item,\n        deskripsi: doc.deskripsi_singkat\n      };\n    }));\n  };\n\n  const searchServiceItem = e => {\n    // console.log(e.target.value)\n    var val = e.target.value;\n    const listServiceByCategory = contractInputData.data.service_items.map((doc, idx) => {\n      return {\n        id_service_kategori: doc.id_service_kategori,\n        key: doc.id,\n        nama: doc.nama_service_item,\n        deskripsi: doc.deskripsi_singkat\n      };\n    }).filter(doc => {\n      if (idCategory != null) {\n        return doc.id_service_kategori == idCategory && doc.nama.toLowerCase().includes(val);\n      } else {\n        return doc.nama.toLowerCase().includes(val);\n      }\n    });\n    setPopulateListService(listServiceByCategory); // console.log(listServiceByCategory)\n  }; // const populateListService = contractInputData.data.service_items.map((doc, idx) => {\n  //     return ({\n  //         key: doc.id,\n  //         nama: doc.nama_service_item,\n  //         deskripsi: doc.deskripsi_singkat,\n  //     })\n  // })\n  //--------------populate list company ------------\n\n\n  const populateListCompany = contractInputData.data.companies.filter((doc, idx) => doc.id !== 66).map((doc, idx) => {\n    return {\n      value: doc.id,\n      label: doc.company_name\n    };\n  }); //-----------------Handle create contract-----------------------------\n\n  const handleUpdateContract = () => {\n    setLoadingbtn(true); // console.log(updatecontract)\n\n    fetch(`https://boiling-thicket-46501.herokuapp.com/updateContract`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(tok),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updatecontract)\n    }).then(res => res.json()).then(res2 => {\n      setLoadingbtn(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(() => {\n          rt.push(`/admin/contracts/${contractData.data.contract.id}`);\n        }, 100);\n      } else if (!res2.success) {\n        console.log(res2);\n\n        _notification['error']({\n          message: res2.message.errorInfo[2],\n          // message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //------------------------------------------\n\n\n  useEffect(() => {\n    setDataServiceItems(contractData.data.service_item_kontraks);\n    setSelectedServiceItemTemp(contractData.data.service_item_kontraks);\n    setSelectedRowKeys(contractData.data.service_item_kontraks.map((item, idx) => {\n      return item.id_service_item;\n    }));\n    setServiceItemTemp(_objectSpread(_objectSpread({}, serviceItemTemp), {}, {\n      serviceItemValues: contractData.data.service_item_kontraks\n    }));\n    setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n      service_items: contractData.data.service_item_kontraks\n    }));\n  }, []); //----------------------------------------------\n\n  const {\n    0: flag,\n    1: setFlag\n  } = useState({\n    ket1: false,\n    ket2: false\n  });\n\n  const checkFile = () => {\n    // var abc = dataServiceItems.map((item,idx)=>{return item.id})\n    // setSelectedRowKeys(abc) \n    // updatecontract.service_items.map((obj,idx)=>{\n    //     if(obj.harga == \"\" || obj.harga == null || obj.harga == undefined){\n    //        setFlag({...flag,ket1:true})\n    //     }\n    //     if(obj.id_terms_of_payment == null || obj.id_terms_of_payment == \"\" || obj.id_terms_of_payment == undefined){\n    //         setFlag({...flag,ket2:true})\n    //     }\n    // })      \n    console.log(validation); // console.log(validation.every(item=>item.harga && item.id_terms_of_payment))\n    // updatecontract.service_items.values\n    // console.log (serviceItemTemp)\n    // console.log(selectedRowKeys)\n    // console.log (dataServiceItems)\n    // console.log (updatecontract)\n    // var satu = selectedServiceItemTemp.map(item=>item.key)\n    // var dua = dataServiceItems.map(item=>item.id_service_item)\n    // // console.log (updatecontract,selectedServiceItemTemp,dataServiceItems)\n    // var tiga = selectedServiceItemTemp.map(item=>item.key).filter(value => (dataServiceItems.map(item=>item.id_service_item).includes(value)))\n    // // var empat = dataServiceItems.map(item=>item.id_service_item).filter(value => (selectedServiceItemTemp.map(item=>item.key).includes(value)))\n    // console.log (\"selected item: \",satu,\"data service item: \",dua,\"array intersect :\",tiga)\n    // // var lah = dataServiceItems.filter((obj)=>{tiga.includes(obj.id_service_item)})\n    // // setDataServiceItems(dataServiceItems.filter((obj)=>{tiga.includes(obj.id_service_item)}))\n    // console.log (dataServiceItems)\n  };\n\n  const check = () => {\n    console.log(updatecontract.service_items);\n  };\n\n  const {\n    0: widthDrawer,\n    1: setWidthDrawer\n  } = useState(600);\n  useEffect(() => {\n    var w = window.innerWidth;\n\n    if (w < 414) {\n      setWidthDrawer(300);\n    } else if (w < 640) {\n      setWidthDrawer(400);\n    } // console.log(w)\n\n  }, []);\n  return /*#__PURE__*/_jsx(Layout, {\n    tok: tok,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    sidemenu: sidemenu,\n    originPath: originPath,\n    st: st,\n    children: /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"w-full h-auto\",\n        children: /*#__PURE__*/_jsx(_Form, {\n          layout: \"vertical\",\n          onFinish: handleUpdateContract,\n          style: {\n            display: 'contents'\n          },\n          form: instanceForm,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" col-span-1 md:col-span-3 flex flex-col\",\n            id: \"formAgentsWrapper\",\n            children: [/*#__PURE__*/_jsx(Sticky, {\n              containerSelectorFocus: \"#formAgentsWrapper\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex justify-between p-4 border-gray-400 border-t border-b bg-white mb-8\",\n                children: [/*#__PURE__*/_jsx(\"h1\", {\n                  className: \"font-semibold text-base w-auto\",\n                  children: \"Update Contracts\"\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex space-x-2\",\n                  children: [/*#__PURE__*/_jsx(Link, {\n                    href: \"/admin/contracts\",\n                    children: /*#__PURE__*/_jsx(_Button, {\n                      type: \"default\",\n                      size: \"middle\",\n                      children: \"Cancel\"\n                    })\n                  }), /*#__PURE__*/_jsx(_Button, {\n                    disabled: !(validation.harga && validation.id_terms_of_payment),\n                    type: \"primary\",\n                    size: \"middle\",\n                    onClick: instanceForm.submit,\n                    loading: loadingbtn,\n                    children: \"Save\"\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"text-red-600 float-right ml-auto\",\n              children: validation.harga ? \"\" : \"Harga pada item service harus terisi semua\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"text-red-600 float-right ml-auto\",\n              children: validation.id_terms_of_payment ? \"\" : \"Terms of Payment pada item service harus terisi semua\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-full h-auto grid grid-cols-1 md:grid-cols-3\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 md:col-span-1 flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"pb-4 md:mb-0 \",\n                  children: /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"nomor_kontrak\",\n                    style: {\n                      marginRight: `1rem`\n                    },\n                    label: \"Nomor\",\n                    rules: [{\n                      required: true,\n                      message: 'Nomor harus diisi'\n                    }],\n                    initialValue: updatecontract.nomor_kontrak,\n                    children: /*#__PURE__*/_jsx(_Input, {\n                      placeholder: \"Nomor\",\n                      name: `nomor_kontrak`,\n                      onChange: onChangeCreateContract,\n                      allowClear: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"pb-4 md:mb-0 \",\n                  children: /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"tanggal_mulai\",\n                    style: {\n                      marginRight: `1rem`\n                    },\n                    label: \"Tanggal Mulai\",\n                    rules: [{\n                      required: true,\n                      message: 'Tanggal Mulai harus diisi'\n                    }],\n                    initialValue: moment(updatecontract.tanggal_mulai, 'YYYY-MM-DD'),\n                    children: /*#__PURE__*/_jsx(_DatePicker, {\n                      defaultValue: moment(updatecontract.tanggal_mulai, 'YYYY-MM-DD'),\n                      style: {\n                        width: \"100%\"\n                      },\n                      placeholder: \"Tanggal Mulai\",\n                      name: `tanggal_mulai`,\n                      onChange: (date, dateString) => {\n                        setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n                          tanggal_mulai: dateString\n                        }));\n                      },\n                      format: 'YYYY-MM-DD',\n                      allowClear: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"pb-1 md:mb-0\",\n                  children: /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"deskripsi\",\n                    style: {\n                      marginRight: `1rem`\n                    },\n                    label: \"Description\",\n                    rules: [{\n                      required: false // message: 'Deskripsi harus diisi',\n\n                    }],\n                    initialValue: updatecontract.deskripsi,\n                    children: /*#__PURE__*/_jsx(TextArea, {\n                      placeholder: \"Description\",\n                      rows: 2,\n                      name: `deskripsi`,\n                      onChange: onChangeCreateContract,\n                      allowClear: true\n                    })\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \" col-span-1 md:col-span-1 flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"pb-4 md:mb-0 \",\n                  children: /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"id_client_company\",\n                    style: {},\n                    label: \"Klien\",\n                    rules: [{\n                      required: true,\n                      message: 'Klien harus diisi'\n                    }],\n                    initialValue: updatecontract.id_client_company,\n                    children: /*#__PURE__*/_jsx(_Select, {\n                      showSearch: true,\n                      optionFilterProp: \"label\",\n                      placeholder: \"Klien\",\n                      name: `id_client_company`,\n                      onChange: value => {\n                        setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n                          id_client_company: value\n                        }));\n                      },\n                      options: populateListCompany,\n                      allowClear: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"pb-4 md:mb-0 \",\n                  children: /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"tanggal_selesai\",\n                    style: {},\n                    label: \"Tanggal Selesai\",\n                    rules: [{\n                      required: true,\n                      message: 'Tanggal Selesai harus diisi'\n                    }],\n                    initialValue: moment(updatecontract.tanggal_selesai, 'YYYY-MM-DD'),\n                    children: /*#__PURE__*/_jsx(_DatePicker, {\n                      disabledDate: curr => {\n                        return curr < moment(updatecontract.tanggal_mulai);\n                      },\n                      defaultValue: moment(updatecontract.tanggal_selesai, 'YYYY-MM-DD'),\n                      style: {\n                        width: \"100%\"\n                      },\n                      placeholder: \"Tanggal Selesai\",\n                      name: `tanggal_selesai`,\n                      onChange: (date, dateString) => {\n                        setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n                          tanggal_selesai: dateString\n                        }));\n                      },\n                      format: 'YYYY-MM-DD',\n                      allowClear: true\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"pb-4 md:mb-0 \",\n                  children: /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"id_tipe_kontrak\",\n                    style: {},\n                    label: \"Tipe\",\n                    rules: [{\n                      required: true,\n                      message: 'Tipe harus diisi'\n                    }],\n                    initialValue: updatecontract.id_tipe_kontrak,\n                    children: /*#__PURE__*/_jsx(_Select, {\n                      placeholder: \"Tipe\",\n                      name: `id_tipe_kontrak`,\n                      onChange: value => {\n                        setUpdatecontract(_objectSpread(_objectSpread({}, updatecontract), {}, {\n                          id_tipe_kontrak: value\n                        }));\n                      },\n                      allowClear: true,\n                      children: contractInputData.data.contract_types.map((doc, index) => {\n                        return /*#__PURE__*/_jsx(Option, {\n                          value: doc.id,\n                          children: doc.nama\n                        }, doc.id);\n                      })\n                    })\n                  })\n                })]\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"pb-4 md:mb-0\",\n              children: /*#__PURE__*/_jsxs(\"a\", {\n                onClick: () => {\n                  setOpendrawer(true);\n                },\n                children: [\" \", /*#__PURE__*/_jsx(PlusSquareOutlined, {\n                  style: {\n                    verticalAlign: '2px'\n                  }\n                }), \" Daftar Service Item\"]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: 'w-full h-auto grid grid-cols-1 md:grid-cols-3',\n              children: /*#__PURE__*/_jsx(DynamicComponent, {})\n            }), /*#__PURE__*/_jsxs(_Drawer, {\n              title: \"Add Service Item\",\n              maskClosable: false,\n              visible: opendrawer,\n              onClose: () => {\n                setOpendrawer(false), setServiceItemTemp(_objectSpread(_objectSpread({}, serviceItemTemp), {}, {\n                  serviceItemValues: selectedServiceItemTemp\n                })), setSelectedRowKeys(selectedServiceItemTemp.map(item => item.id_service_item));\n              },\n              destroyOnClose: true,\n              width: widthDrawer,\n              footer: /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  textAlign: 'right'\n                },\n                children: [/*#__PURE__*/_jsx(\"button\", {\n                  onClick: () => {\n                    setOpendrawer(false), setServiceItemTemp(_objectSpread(_objectSpread({}, serviceItemTemp), {}, {\n                      serviceItemValues: selectedServiceItemTemp\n                    })), setSelectedRowKeys(selectedServiceItemTemp.map(item => item.id_service_item));\n                  },\n                  className: \"bg-white-700 hover:bg-gray-300 border text-black py-1 px-2 rounded-md w-20 mr-4\",\n                  children: \"Cancel\"\n                }), /*#__PURE__*/_jsx(_Button, {\n                  type: \"primary\",\n                  onClick: () => {\n                    onAddService(), setOpendrawer(false);\n                  },\n                  className: \" bg-blue-500 hover:bg-blue-700 border text-white py-1 px-2 rounded-md w-20\",\n                  children: \"Tambah\"\n                })]\n              }),\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: 'flex flex-row justify-between',\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: 'pb-6 flex',\n                  children: [/*#__PURE__*/_jsx(_Select, {\n                    value: defaultCategory,\n                    placeholder: \"Service Category\",\n                    className: 'w-48',\n                    onChange: value => {\n                      onChangeCategory(value), setDefaultCategory(value);\n                    },\n                    name: `service_categories`,\n                    children: contractInputData.data.service_categories.map((doc, index) => {\n                      return /*#__PURE__*/_jsx(Option, {\n                        value: doc.id,\n                        children: doc.nama_kategori\n                      }, doc.id);\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: 'pl-2',\n                    children: /*#__PURE__*/_jsx(_Button, {\n                      className: '',\n                      onClick: clearFilterCategory,\n                      children: \"Clear Filter\"\n                    })\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: 'pl-2 hidden sm:block',\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    allowClear: true,\n                    onChange: e => searchServiceItem(e),\n                    prefix: /*#__PURE__*/_jsx(SearchOutlined, {}),\n                    placeholder: \"Search\"\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: 'py-2 block sm:hidden',\n                children: /*#__PURE__*/_jsx(_Input, {\n                  allowClear: true,\n                  onChange: e => searchServiceItem(e),\n                  prefix: /*#__PURE__*/_jsx(SearchOutlined, {}),\n                  placeholder: \"Search\"\n                })\n              }), /*#__PURE__*/_jsx(_Table, {\n                rowSelection: rowSelection,\n                columns: columnsTableListService,\n                dataSource: populateListService\n              })]\n            })]\n          })\n        })\n      })\n    })\n  });\n}\n\nexport async function getServerSideProps({\n  req,\n  res,\n  params\n}) {\n  var initProps = {};\n  var contractId = params.contractId;\n\n  if (req && req.headers) {\n    const cookies = req.headers.cookie;\n\n    if (!cookies) {\n      res.writeHead(302, {\n        Location: '/login'\n      });\n      res.end();\n    }\n\n    if (typeof cookies === 'string') {\n      const cookiesJSON = httpcookie.parse(cookies);\n      initProps = cookiesJSON.token;\n    }\n  }\n\n  const resourcesGP = await fetch(`https://boiling-thicket-46501.herokuapp.com/detailProfile`, {\n    method: `POST`,\n    headers: {\n      'Authorization': JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  if (![197].every(curr => dataProfile.data.registered_feature.includes(curr))) {\n    res.writeHead(302, {\n      Location: '/dashboard/admin'\n    });\n    res.end();\n  }\n\n  const getContractInputData = await fetch(`https://boiling-thicket-46501.herokuapp.com/getContractInputData`, {\n    method: `GET`,\n    headers: {\n      'Authorization': JSON.parse(initProps),\n      'Content-Type': 'application/json'\n    }\n  });\n  const responseContractInputData = await getContractInputData.json();\n  const contractInputData = responseContractInputData;\n  const getContractData = await fetch(`https://boiling-thicket-46501.herokuapp.com/getContract?id=${contractId}`, {\n    method: `GET`,\n    headers: {\n      'Authorization': JSON.parse(initProps),\n      'Content-Type': 'application/json'\n    }\n  });\n  const responseContractData = await getContractData.json();\n  const contractData = responseContractData;\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      contractInputData,\n      contractData,\n      sidemenu: \"4\"\n    }\n  };\n}\nexport default UpdateContract;","map":null,"metadata":{},"sourceType":"module"}