{"ast":null,"code":"import _Popconfirm from \"antd/lib/popconfirm\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _Empty from \"antd/lib/empty\";\nimport _Input from \"antd/lib/input\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Spin from \"antd/lib/spin\";\nimport _Button from \"antd/lib/button\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _Timeline from \"antd/lib/timeline\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport _Select from \"antd/lib/select\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _Collapse from \"antd/lib/collapse\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { CalendarOutlined, CloseCircleOutlined, PlusSquareTwoTone } from \"@ant-design/icons\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../../components/layout-dashboard\";\nimport st from \"../../../../components/layout-dashboard.module.css\";\n\nvar ModelsUpdate2 = function ModelsUpdate2(_ref) {\n  _s();\n\n  var sidemenu = _ref.sidemenu,\n      dataProfile = _ref.dataProfile,\n      initProps = _ref.initProps,\n      modelid = _ref.modelid;\n  //1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(3, 1);\n  pathArr[pathArr.length - 1] = \"Ubah Model\";\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      instanceForm = _Form$useForm2[0];\n\n  var _Form$useForm3 = _Form.useForm(),\n      _Form$useForm4 = _slicedToArray(_Form$useForm3, 1),\n      instanceForm2 = _Form$useForm4[0];\n\n  var Panel = _Collapse.Panel; //2.Helper functions\n\n  var renderChildPartModel = function renderChildPartModel(item) {\n    return item.map(function (doc, idx) {\n      return /*#__PURE__*/_jsxDEV(Children, {\n        doc: doc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 14\n      }, _this);\n    });\n  };\n\n  var Children = function Children(_ref2) {\n    var doc = _ref2.doc;\n    return /*#__PURE__*/_jsxDEV(_Timeline.Item, {\n      children: /*#__PURE__*/_jsxDEV(_Collapse, {\n        accordion: true,\n        children: /*#__PURE__*/_jsxDEV(Panel, {\n          header: doc.name,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-2733278964\" + \" \" + \"flex flex-col p-3\",\n            children: [doc.model_columns.map(function (docmc2, idx) {\n              // var default2 = {}\n              // if (docmc2.data_type === 'dropdown' || docmc2.data_type === 'checkbox') {\n              //     default2 = JSON.parse(docmc2.default)\n              // }\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-2733278964\" + \" \" + \"flex flex-col mb-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"jsx-2733278964\" + \" \" + \"font-semibold mb-1\",\n                  children: [docmc2.name, \" \", docmc2.required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2733278964\" + \" \" + \"judulsn\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 27\n                  }, _this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2733278964\" + \" \" + \"text-gray-400\",\n                    children: [\"(\", docmc2.data_type === \"single\" ? \"Single Textbox\" : docmc2.data_type.charAt(0).toUpperCase() + docmc2.data_type.slice(1), docmc2.data_type === \"paragraph\" && \" Text\", \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 76,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2733278964\" + \" \" + \"w-full flex items-center my-auto px-2\",\n                  children: docmc2.data_type === \"dropdown\" || docmc2.data_type === \"checkbox\" || docmc2.data_type === \"date\" || docmc2.data_type === \"paragraph\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [docmc2.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(_Select, {\n                      disabled: true,\n                      style: {\n                        width: \"100%\",\n                        backgroundColor: \"rgba(229, 231, 235,1)\",\n                        color: \"rgba(229, 231, 235,1)\"\n                      },\n                      children: docmc2[\"default\"].opsi.map(function (doc2, idx2) {\n                        return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          disabled: true,\n                          value: idx2,\n                          children: doc2\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 101,\n                          columnNumber: 35\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 92,\n                      columnNumber: 31\n                    }, _this), docmc2.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"w-full flex flex-col\",\n                      children: docmc2[\"default\"].opsi.map(function (doc3, idx3) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-2733278964\" + \" \" + \"flex mb-1\",\n                          children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                            disabled: true,\n                            style: {\n                              marginRight: \"0.5rem\"\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 111,\n                            columnNumber: 37\n                          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-2733278964\" + \" \" + \"mb-0\",\n                            children: doc3\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 115,\n                            columnNumber: 37\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 110,\n                          columnNumber: 35\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 108,\n                      columnNumber: 31\n                    }, _this), docmc2.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"flex w-full items-center justify-between rounded bg-gray-100 h-10 px-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-2733278964\" + \" \" + \"mb-0\",\n                        children: docmc2[\"default\"]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 122,\n                        columnNumber: 33\n                      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-2733278964\",\n                        children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 124,\n                          columnNumber: 35\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 123,\n                        columnNumber: 33\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 31\n                    }, _this), docmc2.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"flex h-20 rounded border bg-gray-100 w-full px-3\",\n                      children: docmc2[\"default\"]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 31\n                    }, _this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-2733278964\" + \" \" + \"rounded border bg-gray-100 flex items-center w-full h-10 px-3\",\n                    children: docmc2[\"default\"]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 21\n              }, _this);\n            }), doc.model_parts.length > 0 && renderChildPartModel(doc.model_parts)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"2733278964\",\n            children: \".judulassettype.jsx-2733278964::before{content:'*';color:red;}.judulsn.jsx-2733278964::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrSmlCLEFBR3lFLEFBSUEsWUFIRixBQUlBLFVBSGQsQUFJQSIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9hZG1pbi9tb2RlbHMvdXBkYXRlMi9bbW9kZWxJZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWxldGVPdXRsaW5lZCB9IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQ2FsZW5kYXJPdXRsaW5lZCxcbiAgQ2xvc2VDaXJjbGVPdXRsaW5lZCxcbiAgUGx1c1NxdWFyZVR3b1RvbmUsXG59IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBDaGVja2JveCxcbiAgQ29sbGFwc2UsXG4gIERhdGVQaWNrZXIsXG4gIEVtcHR5LFxuICBGb3JtLFxuICBJbnB1dCxcbiAgSW5wdXROdW1iZXIsXG4gIFBvcGNvbmZpcm0sXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGltZWxpbmUsXG4gIFRyZWVTZWxlY3QsXG4gIG5vdGlmaWNhdGlvbixcbn0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBNb2RhbCBmcm9tIFwiYW50ZC9saWIvbW9kYWwvTW9kYWxcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3RpY2t5IGZyb20gXCJ3aWwtcmVhY3Qtc3RpY2t5XCI7XG5cbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZFwiO1xuaW1wb3J0IHN0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQubW9kdWxlLmNzc1wiO1xuaW1wb3J0IGh0dHBjb29raWUgZnJvbSBcImNvb2tpZVwiO1xuXG5jb25zdCBNb2RlbHNVcGRhdGUyID0gKHsgc2lkZW1lbnUsIGRhdGFQcm9maWxlLCBpbml0UHJvcHMsIG1vZGVsaWQgfSkgPT4ge1xuICAvLzEuSW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMywgMSk7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiVWJhaCBNb2RlbFwiO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtXSA9IEZvcm0udXNlRm9ybSgpO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtMl0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgeyBQYW5lbCB9ID0gQ29sbGFwc2U7XG5cbiAgLy8yLkhlbHBlciBmdW5jdGlvbnNcbiAgY29uc3QgcmVuZGVyQ2hpbGRQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiBpdGVtLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgIHJldHVybiA8Q2hpbGRyZW4gZG9jPXtkb2N9PjwvQ2hpbGRyZW4+O1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IENoaWxkcmVuID0gKHsgZG9jIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRpbWVsaW5lLkl0ZW0+XG4gICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAge1xuICAgICAgICAgICAgPFBhbmVsIGhlYWRlcj17ZG9jLm5hbWV9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+UXVhbnRpdHkgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj48L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPntkb2MucXVhbnRpdHl9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX2NvbHVtbnMubWFwKChkb2NtYzIsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gdmFyIGRlZmF1bHQyID0ge31cbiAgICAgICAgICAgICAgICAgIC8vIGlmIChkb2NtYzIuZGF0YV90eXBlID09PSAnZHJvcGRvd24nIHx8IGRvY21jMi5kYXRhX3R5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgIC8vICAgICBkZWZhdWx0MiA9IEpTT04ucGFyc2UoZG9jbWMyLmRlZmF1bHQpXG4gICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bHNuXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvY21jMi5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGByZ2JhKDIyOSwgMjMxLCAyMzUsMSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0Lm9wc2kubWFwKChkb2MyLCBpZHgyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gZGlzYWJsZWQgdmFsdWU9e2lkeDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMywgaWR4MykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jM308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHJvdW5kZWQgYmctZ3JheS0xMDAgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jbWMyLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciB3LWZ1bGwgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgIHJlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgIH1cbiAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICApO1xuICB9O1xuXG4gIC8vMi51c2VTdGF0ZVxuICBjb25zdCBbbmV3ZGF0YSwgc2V0bmV3ZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgYXNzZXRfaWQ6IFwiXCIsXG4gICAgbmFtZTogXCJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IG51bGwsXG4gICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgIG1vZGVsX2NvbHVtbnM6IFtdLFxuICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICBhZGRfY29sdW1uczogW10sXG4gICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtuZXdkYXRhMiwgc2V0bmV3ZGF0YTJdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbZGVmYXVsdGRhdGEsIHNldGRlZmF1bHRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21hbnVmZGF0YSwgc2V0bWFudWZkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVsZGF0YSwgc2V0bW9kZWxkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YSwgc2V0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YTIsIHNldGZpZWxkZGF0YTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYSwgc2V0ZmllbGRkYXRhYV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGFhMiwgc2V0ZmllbGRkYXRhYTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9kZWxwYXJ0ZmllbGRkYXRhLCBzZXRtb2RlbHBhcnRmaWVsZGRhdGFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbY3VycmVudGZpZWxkLCBzZXRjdXJyZW50ZmllbGRdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZDIsIHNldGN1cnJlbnRmaWVsZDJdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRpZG1vZGVsLCBzZXRjdXJyZW50aWRtb2RlbF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2FkZGVkZmllbGQsIHNldGFkZGVkZmllbGRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDEsIHNldGFkZGVkZmllbGQxXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQyLCBzZXRhZGRlZGZpZWxkMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMywgc2V0YWRkZWRmaWVsZDNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeCwgc2V0YWRkZWRmaWVsZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlciwgc2V0YWRkZWRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDEsIHNldGFkZGVkZmllbGRpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMSwgc2V0YWRkZWRmaWVsZHRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgyLCBzZXRhZGRlZGZpZWxkaWR4Ml0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjIsIHNldGFkZGVkZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Mywgc2V0YWRkZWRmaWVsZGlkeDNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIzLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZSwgc2V0bG9hZGluZ2NyZWF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nY3JlYXRlbW9kZWwsIHNldGxvYWRpbmdjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nZ2V0bW9kZWwsIHNldGxvYWRpbmdnZXRtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nLCBzZXRwcmFsb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ3NwZWMsIHNldGxvYWRpbmdzcGVjXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjMiwgc2V0bG9hZGluZ3NwZWMyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bjIsIHNldGN1cnJlbnRkcm9wZG93bjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bm4yLCBzZXRjdXJyZW50ZHJvcGRvd25uMl0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bjIsIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2YWx1ZWRyb3Bkb3dudHJpZ2dlciwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMSwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjMsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIsIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnNpZHgsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlLCBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIxLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4MSwgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlMSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjb25jYXRmaWVsZHRyaWdnZXIyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2VkaXRwYXJ0LCBzZXRlZGl0cGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RhbGNyZWF0ZW1vZGVsLCBzZXRtb2RhbGNyZWF0ZW1vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25ld2RhdGF0cmlnZ2VyLCBzZXRuZXdkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlcjIsIHNldG5ld2RhdGF0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RlbHRyaWdnZXIsIHNldG1vZGVsdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRwYXJ0dHJpZ2dlciwgc2V0Y29uY2F0cGFydHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHZhbHVlLCBzZXRjb25jYXRwYXJ0dmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYXNzZXR0eXBlY29kZSwgc2V0YXNzZXR0eXBlY29kZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUyLCBzZXRhc3NldHR5cGVjb2RlMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RlZmF1bHRtb2RlbCwgc2V0ZGVmYXVsdG1vZGVsXSA9IHVzZVN0YXRlKHt9KTtcbiAgY29uc3QgW2Rpc2FibGVkdGFtYmFoLCBzZXRkaXNhYmxlZHRhbWJhaF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaDIsIHNldGRpc2FibGVkdGFtYmFoMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkLCBzZXRkaXNhYmxlZGFkZGZpZWxkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkYWRkZmllbGQyLCBzZXRkaXNhYmxlZGFkZGZpZWxkMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwb2ludGV2ZW50LCBzZXRwb2ludGV2ZW50XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcG9pbnRldmVudDIsIHNldHBvaW50ZXZlbnQyXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY2QyLCBzZXRjZDJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2NkaWR4LCBzZXRjZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHRyaWdnZXIsIHNldGNkdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjZDJwYXJ0LCBzZXRjZDJwYXJ0XSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZHBhcnRpZHgsIHNldGNkcGFydGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHBhcnR0cmlnZ2VyLCBzZXRjZHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NoYW5nZWFzc2V0LCBzZXRjaGFuZ2Vhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkZWZhdWx0YXNzZXQsIHNldGRlZmF1bHRhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmZXRjaGluZ3BhcnQsIHNldGZldGNoaW5ncGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwYWdlLCBzZXRwYWdlXSA9IHVzZVN0YXRlKDEpO1xuICAvL2NyZWF0ZSBtYW51ZmFjdHVyZXJcbiAgY29uc3QgW21vZGFsbWFudWYsIHNldG1vZGFsbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ21hbnVmLCBzZXRsb2FkaW5nbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRtYW51Ziwgc2V0ZGlzYWJsZWRtYW51Zl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3RyaWdnZXJtYW51Ziwgc2V0dHJpZ2dlcm1hbnVmXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RhdGFtYW51Ziwgc2V0ZGF0YW1hbnVmXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICB9KTtcblxuICAvLzMub25DaGFuZ2VcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkID0gKCkgPT4ge1xuICAgIHNldGZpZWxkZGF0YShbXG4gICAgICAuLi5maWVsZGRhdGEsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0YWRkZWRmaWVsZDEoWy4uLmFkZGVkZmllbGQxLCBmYWxzZV0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkMiA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGFhMihbXG4gICAgICAuLi5maWVsZGRhdGFhMixcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGF0YV90eXBlOiBcIlwiLFxuICAgICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQgPSAoaWQpID0+IHtcbiAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgc2V0bG9hZGluZ3NwZWModHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0YXNzZXRpZCA9IGRlZmF1bHRhc3NldC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKTtcbiAgICAgICAgICBjb25zdCBuZXdhc3NldGZpZWxkZGF0YTIgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wbyA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wbyA9IHRlbXBvXG4gICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgICAgLmNvbmNhdCh0ZW1wKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3YXNzZXRmaWVsZGRhdGEyLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICBhZGRfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRkZWZhdWx0ZGF0YSh7XG4gICAgICAgICAgICAuLi5kZWZhdWx0ZGF0YSxcbiAgICAgICAgICAgIGlkOiBkZWZhdWx0bW9kZWwuaWQsXG4gICAgICAgICAgICBuYW1lOiBkZWZhdWx0bW9kZWwubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZWZhdWx0bW9kZWwuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXJfaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXJfaWQsXG4gICAgICAgICAgICBjb3VudDogZGVmYXVsdG1vZGVsLmNvdW50LFxuICAgICAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICAgICAgaWQ6IHJlczIuZGF0YS5pZCxcbiAgICAgICAgICAgICAgbmFtZTogcmVzMi5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGNvZGU6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzMi5kYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjoge1xuICAgICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5pZCxcbiAgICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiBOdW1iZXIoaWQpLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogZGVmYXVsdGFzc2V0LFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3YXNzZXRmaWVsZGRhdGEyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0Y2hhbmdlYXNzZXQodGVtcCk7XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJpbmZvXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQW5kYSBUZWxhaCBNZW5ndWJhaCBBc3NldCBUeXBlXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgXCJIYWwgaW5pIG1lbWJ1YXQgZmllbGQgZGFyaSBhc3NldCB0eXBlIHRlcmthaXQgdGVyYmVudHVrIGRpIGZvcm0gaW5pIVwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIC8vIHNldGZpZWxkZGF0YTIodGVtcClcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tTZWxlY3RBc3NldDIgPSAoaWQpID0+IHtcbiAgICBzZXRsb2FkaW5nc3BlYzIodHJ1ZSk7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgYm9vbCA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm9vbC5wdXNoKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRhZGRlZGZpZWxkMyhib29sKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGFzc2V0dHlwZWNvZGUyKHJlczIuZGF0YS5pZCk7XG4gICAgICAgICAgLy8gc2V0bmV3ZGF0YXRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMyKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICAuLi5uZXdkYXRhMixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNC5oYW5kbGVcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWwgPSAoKSA9PiB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG5ld2RhdGEpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJ1cGRhdGVfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFkZF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikge1xuICAgICAgICB0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICAgIHNldGxvYWRpbmdjcmVhdGUodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L3VwZGF0ZU1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2NyZWF0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl1YmFoXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgcnQucHVzaChgL2FkbWluL21vZGVscy9kZXRhaWwvJHttb2RlbGlkfWApO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhMikge1xuICAgICAgaWYgKHByb3AgPT09IFwibW9kZWxfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhc3NldF9pZFwiKSBbKHRbcHJvcF0gPSBOdW1iZXIoYXNzZXR0eXBlY29kZTIpKV07XG4gICAgICBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGEyW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgc2V0bW9kZWx0cmlnZ2VyKHJlczIuaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUFkZE1hbnVmYWN0dXJlciA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nbWFudWYodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1hbnVmYWN0dXJlcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YW1hbnVmKSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdtYW51ZihmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1hbnVmYWN0dXJlciBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YW1hbnVmKHtcbiAgICAgICAgICAgIC4uLmRhdGFtYW51ZixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMyKTtcblxuICAgICAgICAgIHNldHRyaWdnZXJtYW51ZigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy81LnVzZUVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0YXNzZXRkYXRhKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNYW51ZmFjdHVyZXJzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXMyLmRhdGE7XG4gICAgICAgIGNvbnN0IGxhdGVzdEluc2VydGVkTWFudWZhY3R1cmVyID0gZGF0YVtkYXRhLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zb2xlLmxvZyhsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlcik7XG5cbiAgICAgICAgLyoqIFNldCBuZXcgaW5zZXJ0ZWQgbWFudWZhY3R1cmVyIGFzIGRlZmF1bHQgc2VsZWN0ZWQgb3B0aW9uIGluIHRoZSBcIk1hbnVmYWN0dXJlclwiIGRyb3Bkb3duICovXG4gICAgICAgIHNldG1hbnVmZGF0YShkYXRhKTtcbiAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4gKHsuLi5wcmV2LCBtYW51ZmFjdHVyZXJfaWQ6IGxhdGVzdEluc2VydGVkTWFudWZhY3R1cmVyLmlkIH0pKVxuICAgICAgfSk7XG4gIH0sIFt0cmlnZ2VybWFudWZdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWw/aWQ9JHttb2RlbGlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQgPT09IFwiXCIgfHwgZG9jLmRlZmF1bHQgPT09IFwiLVwiXG4gICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL21vZGVsX3BhcnRzXG4gICAgICAgIGNvbnN0IHJlY3Vyc2l2ZVBhcnRNb2RlbCA9IChpdGVtKSA9PiB7XG4gICAgICAgICAgdmFyIHRlbXAxMSA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRlbXAxID0ge307XG4gICAgICAgICAgICB0ZW1wMSA9IGl0ZW1baV0ubW9kZWxfY29sdW1ucy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgICAgID8gZG9jLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRlbXAxMS5wdXNoKHtcbiAgICAgICAgICAgICAgLi4uaXRlbVtpXSxcbiAgICAgICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcDEsXG4gICAgICAgICAgICAgIG1vZGVsX3BhcnRzOlxuICAgICAgICAgICAgICAgIGl0ZW1baV0ubW9kZWxfcGFydHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgPyByZWN1cnNpdmVQYXJ0TW9kZWwoaXRlbVtpXS5tb2RlbF9wYXJ0cylcbiAgICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRlbXAxMTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgeW8gPSByZWN1cnNpdmVQYXJ0TW9kZWwocmVzMi5kYXRhLm1vZGVsX3BhcnRzKTtcbiAgICAgICAgY29uc3QgdGVtcDIgPSB7XG4gICAgICAgICAgLi4ucmVzMi5kYXRhLFxuICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuYXNzZXQuY29kZSxcbiAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLFxuICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgICAgICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBzZXRuZXdkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGRhdGEodGVtcDIpO1xuICAgICAgICBzZXRkZWZhdWx0YXNzZXQodGVtcCk7XG4gICAgICAgIHNldGRlZmF1bHRtb2RlbCh0ZW1wMik7XG4gICAgICAgIHNldGZpZWxkZGF0YTIodGVtcCk7XG4gICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSh5byk7XG4gICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMyLmRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyci5wdXNoKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgc2V0YXNzZXR0eXBlY29kZShyZXMyLmRhdGEuYXNzZXRfaWQpO1xuICAgICAgICBzZXRwcmFsb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChtb2RlbHRyaWdnZXIpO1xuICAgICAgICBtb2RlbHRyaWdnZXIgIT09IGZhbHNlID8gc2V0ZWRpdHBhcnQodHJ1ZSkgOiBudWxsO1xuICAgICAgfSk7XG4gIH0sIFttb2RlbHRyaWdnZXJdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIHV0YW1hIHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhMigocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGJ1YXQgc2VuZGlyaVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIxICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAvLyB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWVkcm9wZG93bnRyaWdnZXJ9YFxuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjFdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEoe1xuICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YTIuY29uY2F0KGZpZWxkZGF0YSksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29uY2F0YWRkY29sdW1uc2lkeCAhPT0gLTEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY2hhbmdlYXNzZXQuc29tZShcbiAgICAgICAgICAoZG9jc29tZSkgPT4gZG9jc29tZS5pZCA9PT0gY29uY2F0YWRkY29sdW1uc3ZhbHVlLmlkXG4gICAgICAgICkgfHxcbiAgICAgICAgdHlwZW9mIGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbZmllbGRkYXRhMi5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goY3VycmVudGZpZWxkKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4YWRkY29sdW1uID0gbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld2RhdGEuYXNzZXRfY29sdW1ucy5sZW5ndGgrXCI6XCIrY29uY2F0YWRkY29sdW1uc2lkeCtcIjtcIituZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aClcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pXG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2N1cCkgPT4gZG9jdXAuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnB1c2goZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHh1cGNvbHVtbiA9IG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRmaWVsZC5pZCxcbiAgICAgICAgICAgICAgICBtb2RlbF9pZDogY3VycmVudGZpZWxkLm1vZGVsX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29uY2F0YWRkY29sdW1uc2lkeDEgIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNvbmNhdGFkZGNvbHVtbnNpZHgxID4gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGggLSAxIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUxLmlkID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgICAgIGNoYW5nZWFzc2V0ID09PSB0cnVlXG4gICAgICApIHtcbiAgICAgICAgLy8gaWYgKChmaWVsZGRhdGEyLmxlbmd0aCAtIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoKSA+PSBuZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkKSA9PiBkb2NhZGQubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goZmllbGRkYXRhW2ZpZWxkZGF0YS5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goY3VycmVudGZpZWxkKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4YWRkY29sdW1uID0gbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld2RhdGEuYXNzZXRfY29sdW1ucy5sZW5ndGgrXCI6XCIrY29uY2F0YWRkY29sdW1uc2lkeCtcIjtcIituZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aClcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pXG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2N1cCkgPT4gZG9jdXAuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnB1c2goZmllbGRkYXRhW2NvbmNhdGFkZGNvbHVtbnNpZHgxXSk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHh1cGNvbHVtbiA9IG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRmaWVsZC5pZCxcbiAgICAgICAgICAgICAgICBtb2RlbF9pZDogY3VycmVudGZpZWxkLm1vZGVsX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHggIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHhdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeF0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHhdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MSAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgxXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDFdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDMgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4M10gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4M10gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgzXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIzXSk7XG5cbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBhc3NldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIzICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhYSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIzXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyM10pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgYmFydSB5YW5nIGZpZWxkIGJ1YXQgc2VuZGlyaVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIyICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhYTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyMl1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhMih7XG4gICAgICAuLi5uZXdkYXRhMixcbiAgICAgIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YWEuY29uY2F0KGZpZWxkZGF0YWEyKSxcbiAgICB9KTtcbiAgfSwgW2NvbmNhdGZpZWxkdHJpZ2dlcjJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDIgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4Ml0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgyXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIyXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhIH0pO1xuICB9LCBbbmV3ZGF0YXRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhIH0pO1xuICB9LCBbbmV3ZGF0YXRyaWdnZXIyXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgdGVtcCA9IFtdO1xuICAgIGlmIChjb25jYXRwYXJ0dmFsdWUgIT09IC0xKSB7XG4gICAgICBpZiAoY29uY2F0cGFydHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbW9kZWxfcGFydHM6IFtdIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uY2F0cGFydHZhbHVlLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICB2YXIgaWR4dGVtcCA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgIGlmIChpZHh0ZW1wICE9PSAtMSAmJiB0ZW1wW2lkeHRlbXBdW1wiaWRcIl0gPT09IGRvYy5pZCkge1xuICAgICAgICAgICAgdmFyIGlkeG9mID0gdGVtcC5tYXAoKGRvYykgPT4gZG9jLmlkKS5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICB0ZW1wW2lkeG9mXSA9IHtcbiAgICAgICAgICAgICAgLi4udGVtcFtpZHhvZl0sXG4gICAgICAgICAgICAgIHF1YW50aXR5OiB0ZW1wW2lkeG9mXS5xdWFudGl0eSArIGRvYy5xdWFudGl0eSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIGlmIChpZHh0ZW1wID09PSAtMSkge1xuICAgICAgICAgICAgdGVtcC5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IGRvYy5xdWFudGl0eSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBhZGRfbW9kZWxzOiB0ZW1wIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdHBhcnR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICByZXR1cm4gY2QyLmZpbHRlcigoZG9jMTAsIGlkeDEwKSA9PiBpZHgxMCAhPT0gY2RpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDIoKHByZXYpID0+IHByZXYuZmlsdGVyKChkb2MxMSwgaWR4MTEpID0+IGlkeDExICE9PSBjZGlkeCkpO1xuICAgIH1cbiAgfSwgW2NkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZHBhcnRpZHggIT09IC0xKSB7XG4gICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICByZXR1cm4gY2QycGFydC5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkcGFydGlkeCk7XG4gICAgICB9KTtcbiAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHByZXYuZmlsdGVyKChkb2MxMSwgaWR4MTEpID0+IGlkeDExICE9PSBjZHBhcnRpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHBhcnR0cmlnZ2VyXSk7XG4gIHJldHVybiAoXG4gICAgPExheW91dFxuICAgICAgc3Q9e3N0fVxuICAgICAgdG9rPXtpbml0UHJvcHN9XG4gICAgICBzaWRlbWVudT17c2lkZW1lbnV9XG4gICAgICBkYXRhUHJvZmlsZT17ZGF0YVByb2ZpbGV9XG4gICAgICBwYXRoQXJyPXtwYXRoQXJyfVxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtYXV0byBncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy00XCJcbiAgICAgICAgaWQ9XCJjcmVhdGVBc3NldHNXcmFwcGVyXCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8U3RpY2t5IGNvbnRhaW5lclNlbGVjdG9yRm9jdXM9XCIjY3JlYXRlQWdlbnRzV3JhcHBlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tNCBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTIgcHQtNCBib3JkZXItdC0yIGJvcmRlci1iLTIgYmctd2hpdGVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgcHktMlwiPlxuICAgICAgICAgICAgICAgIEZvcm0gVWJhaCBNb2RlbCAtIHtuZXdkYXRhLm5hbWV9XG4gICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICA8TGluayBocmVmPXtgL2FkbWluL21vZGVscy9kZXRhaWwvJHttb2RlbGlkfWB9PlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAvKm9uQ2xpY2s9eygpID0+IHsgY29uc29sZS5sb2cobmV3ZGF0YSk7IGNvbnNvbGUubG9nKGZpZWxkZGF0YSk7IGNvbnNvbGUubG9nKGZpZWxkZGF0YTIpOyBjb25zb2xlLmxvZyhkZWZhdWx0ZGF0YSk7IGNvbnNvbGUubG9nKGRlZmF1bHRhc3NldCkgfX0qLyB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtLnN1Ym1pdH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5JbmZvcm1hc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgICAgICAgPFNwaW4+PC9TcGluPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgICAgICBmb3JtPXtpbnN0YW5jZUZvcm19XG4gICAgICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgIG9uRmluaXNoPXtoYW5kbGVDcmVhdGVNb2RlbH1cbiAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVzPXtuZXdkYXRhfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIkFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIEFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0KDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctMTEvMTIgbXItMlwiPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJtYW51ZmFjdHVyZXJfaWRcIiBsYWJlbD1cIk1hbnVmYWN0dXJlclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbWFudWZhY3R1cmVyX2lkOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge21hbnVmZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxQbHVzU3F1YXJlVHdvVG9uZSBzdHlsZT17eyBmb250U2l6ZTogYDEuNXJlbWAgfX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgcmVxdWlyZWRfc246IGUudGFyZ2V0LmNoZWNrZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIFNlcmlhbCBOdW1iZXIgd2FqaWIgYWRhXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEuaXNfY29uc3VtYWJsZX1cbiAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgTW9kZWwgQ29uc3VtYWJsZSBkZW5nYW4gc2F0dWFuIGp1bWxhaFxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge2xvYWRpbmdzcGVjID8gKFxuICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2ZpZWxkZGF0YTIubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0+PC9FbXB0eT5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICBmaWVsZGRhdGEyLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAge2FkZGVkZmllbGRbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudH0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGEyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0ID09PSBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBTcGVzaWZpa2FzaVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgU3Blc2lmaWthc2kgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21vbWVudChmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhMigocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfLCBpZHh4KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCAhPT0gZmllbGRkYXRhLmxlbmd0aCArIGlkeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jZGVmKSA9PiBkb2NkZWYuaWQgPT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX2NvbHVtbl9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhVcGRhdGVDb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMuc3BsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFVwZGF0ZUNvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSB0ZW1wLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRlbXAuYWRkX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc2lkeChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZShkb2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtmaWVsZGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDFbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudH0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDFdO1xuICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKGZpZWxkZGF0YVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKGlkaykgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZH0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBTcGVzaWZpa2FzaVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgU3Blc2lmaWthc2kgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+RGF0ZTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhW2lkeF0uZGVmYXVsdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9IHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfLCBpZHh4KSA9PiBpZHh4ICE9PSBmaWVsZGRhdGEyLmxlbmd0aCArIGlkeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFofVxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlMShkb2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkfVxuICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDgwJWAsIGhlaWdodDogYDRyZW1gIH19XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2tBZGRGaWVsZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBUYW1iYWggU3Blc2lmaWthc2kgTW9kZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge25ld2RhdGEuaXNfY29uc3VtYWJsZSA9PT0gZmFsc2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIG1iLTggY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPktvbmZpZ3VyYXNpIFBhcnQgTW9kZWw8L2gxPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLmxlbmd0aCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPENvbGxhcHNlIGFjY29yZGlvbj5cbiAgICAgICAgICAgICAgICAgIHttb2RlbHBhcnRmaWVsZGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxQYW5lbFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2BwYW5lbCR7aWR4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcj17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBkb2MubW9kZWxfY2hpbGQubGVuZ3RoID09PSAwID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgdy02LzEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXItMlwiPntkb2MubmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PVwicmlnaHRcIiB0aXRsZT1cIk1vZGVsIHRpZGFrIG1lbWlsaWtpIHBhcnQgbW9kZWwhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19PjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcIi1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgTW9kZWwgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZGFyaSBNb2RlbCBQYXJ0ICR7bmV3ZGF0YS5uYW1lfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeHRlbXAgPSBtb2RlbHBhcnRmaWVsZGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3BhcnRzKSA9PiBkb2NwYXJ0cy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvYy5pZCkgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZGF0YSA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MyKSA9PiBkb2MyLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzW2lkeGRhdGFdLnF1YW50aXR5IC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMuc3BsaWNlKGlkeGRhdGEsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMuaW5kZXhPZihkb2MuaWQpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX21vZGVsX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDbG9zZUNpcmNsZU91dGxpbmVkIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFzc2V0IFR5cGV7XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bGFzc2V0dHlwZVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPntkb2MubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX2NvbHVtbnMubWFwKChkb2NtYywgaWR4bWMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5uYW1lfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bHNuXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hhckF0KDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyIG15LWF1dG8gcHgtMiBweS0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBiZy13aGl0ZSBib3JkZXIgdy0zLzEyIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gcHgtMiBweS0xIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhvcHNpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRlZmF1bHQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdC5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2ksIGlkeG9wc2kpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeG9wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBiZy1ncmF5LTEwMCByb3VuZGVkIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciB3LWZ1bGwgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUgc3R5bGU9e3sgbWFyZ2luVG9wOiBgMXJlbWAgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UaW1lbGluZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsYXNzZXR0eXBlOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bHNuOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtlZGl0cGFydCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBteS0zIGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCByZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC01IHRleHQtbGcgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB4XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGlkbW9kZWx9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctMTEvMTIgbXItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17Y3VycmVudGlkbW9kZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5ncGFydCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ3BhcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRNb2RlbHM/cm93cz0xMCZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgIT09IFwiXCIgPyB2YWx1ZSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRtb2RlbGRhdGEoW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIGF0YXUgY2FyaSBuYW1hIG1vZHVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoaW5wdXQudG9Mb3dlckNhc2UoKSkgPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvblBvcHVwU2Nyb2xsPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGV2ZW50LnRhcmdldC5zY3JvbGxUb3AgKyBldmVudC50YXJnZXQub2Zmc2V0SGVpZ2h0ID09PSBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBzZXRwYWdlKHByZXYgPT4gcHJldiArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3BhZ2U9JHtwYWdlfSZyb3dzPTEwYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAudGhlbihyZXMyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNjcm9sbFRvKDAsIGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJlczIuZGF0YS50byA+PSByZXMyLmRhdGEudG90YWwgPyBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGFdKSA6IHNldG1vZGVsZGF0YShbLi4ubW9kZWxkYXRhLCByZXMyLmRhdGEuZGF0YSwgPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz5dKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21vZGVsZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2RvYy5pZH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IHB0LTIgbXktYXV0byBpdGVtcy1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nZ2V0bW9kZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bG9hZGluZ2dldG1vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWw/aWQ9JHtjdXJyZW50aWRtb2RlbH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMSA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gcmVzMi5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09IFwibW9kZWxfY29sdW1uc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibW9kZWxfY29sdW1uc1wiXSA9IHJlczIuZGF0YVtwcm9wXS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlbHBhcnRzID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLm1vZGVsX3BhcnRzLm1hcCgoZG9jMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcDMgPSBkb2MyLm1vZGVsX2NvbHVtbnMubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYzMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jMyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG1hcDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibW9kZWxfcGFydHNcIl0gPSBtb2RlbHBhcnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcImlkXCJdID0gcmVzMi5kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm5hbWVcIl0gPSByZXMyLmRhdGEubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcDEgPSBbLi4udGVtcDEsIHRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldGNvbmNhdHBhcnR2YWx1ZShyZXMyLmRhdGEubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dHJpZ2dlcihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEyID0gdGVtcC5hZGRfbW9kZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMykgPT4gZG9jMy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50aWRtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZGF0YTIgPT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50aWRtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlkeGRhdGEyICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5tYXAoKGRvYzEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2MxLmlkID09PSBjdXJyZW50aWRtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MxLnF1YW50aXR5ID0gZG9jMS5xdWFudGl0eSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDgwJWAsIGhlaWdodDogYDRyZW1gIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICsgVGFtYmFoIFBhcnQgTW9kZWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Gb3JtIFRhbWJhaCBNb2RlbDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtpbnN0YW5jZUZvcm0yLnN1Ym1pdH1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nY3JlYXRlbW9kZWx9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGNyZWF0ZW1vZGVsfVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXs5MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIG1iLThcIj5cbiAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtMn1cbiAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgIG9uRmluaXNoPXtoYW5kbGVDcmVhdGVNb2RlbGluTW9kZWx9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIkFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFzc2V0IFR5cGUgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgICBkcm9wZG93blN0eWxlPXt7IG1heEhlaWdodDogNDAwLCBvdmVyZmxvdzogXCJhdXRvXCIgfX1cbiAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIEFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MihcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLmFsbENoZWNrZWROb2Rlc1swXS5ub2RlLnByb3BzLmlkXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQyKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgIG5hbWU9XCJtYW51ZmFjdHVyZXJfaWRcIlxuICAgICAgICAgICAgICBsYWJlbD1cIk1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk1hbnVmYWN0dXJlciB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbWFudWZhY3R1cmVyX2lkOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG5hbWU9XCJtYW51ZmFjdHVyZXJfaWRcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge21hbnVmZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBkZXNjcmlwdGlvbjogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgcmVxdWlyZWRfc246IGUudGFyZ2V0LmNoZWNrZWQgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhMi5yZXF1aXJlZF9zbn1cbiAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgIFNlcmlhbCBOdW1iZXIgd2FqaWIgYWRhXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlNwZXNpZmlrYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ3NwZWMyID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhW2lkeF0ucmVxdWlyZWQgPyA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPiA6IG51bGx9IDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPih7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIiA/IFwiU2luZ2xlIFRleHRib3hcIiA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LWZ1bGwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRyb3Bkb3duXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaSBkaWJhd2FoIGluaTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvY2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctNyBmbGV4IGp1c3RpZnktY2VudGVyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3ggb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl1bXCJkZWZhdWx0XCJdID0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19IGRlZmF1bHRWYWx1ZT17ZG9jY30gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH0gZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwicGFyYWdyYXBoXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhIHJvd3M9ezR9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3ggc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl1bXCJkZWZhdWx0XCJdLnB1c2goaWR4eClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0gLz4ge2RvY2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGVcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlciBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGRhdGVTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgIH0gKi99XG4gICAgICAgICAge2xvYWRpbmdzcGVjMiA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGFhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAge2FkZGVkZmllbGQzW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnQyfSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMyh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMihmaWVsZGRhdGFhW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2N4eCwgaWR4eCkgPT4gZG9jeHguaWQgIT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIzKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YWE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgzKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHtmaWVsZGRhdGFhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkMltpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDJdO1xuICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMihmaWVsZGRhdGFhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWEyW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZDJ9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+RGF0ZTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9IHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfLCBpZHh4KSA9PiBpZHh4ICE9PSBmaWVsZGRhdGFhLmxlbmd0aCArIGlkeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQyLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGQyfVxuICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDgwJWAsIGhlaWdodDogYDRyZW1gIH19XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2tBZGRGaWVsZDJ9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Gb3JtIFRhbWJhaCBNYW51ZmFjdHVyZXI8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxtYW51ZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRtYW51Zn1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRNYW51ZmFjdHVyZXJ9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ21hbnVmfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxtYW51Zn1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIE5hbWEgTWFudWZhY3R1cmVyIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFtYW51XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhbWFudWYubmFtZX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOYW1hIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICA/IHNldGRpc2FibGVkbWFudWYodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRtYW51ZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YW1hbnVmKHsgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hbWFudTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIGNvbnN0IG1vZGVsaWQgPSBwYXJhbXMubW9kZWxJZDtcbiAgdmFyIGluaXRQcm9wcyA9IHt9O1xuICBpZiAoIXJlcS5oZWFkZXJzLmNvb2tpZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBjb25zdCBjb29raWVzSlNPTjEgPSBodHRwY29va2llLnBhcnNlKHJlcS5oZWFkZXJzLmNvb2tpZSk7XG4gIGlmICghY29va2llc0pTT04xLnRva2VuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGluaXRQcm9wcyA9IGNvb2tpZXNKU09OMS50b2tlbjtcbiAgY29uc3QgcmVzb3VyY2VzID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uID0gYXdhaXQgcmVzb3VyY2VzLmpzb24oKTtcbiAgY29uc3QgZGF0YVByb2ZpbGUgPSByZXNqc29uO1xuXG4gIHJldHVybiB7XG4gICAgcHJvcHM6IHtcbiAgICAgIGluaXRQcm9wcyxcbiAgICAgIGRhdGFQcm9maWxlLFxuICAgICAgc2lkZW1lbnU6IFwiODJcIixcbiAgICAgIG1vZGVsaWQsXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZWxzVXBkYXRlMjtcbiJdfQ== */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, _this);\n  }; //2.useState\n\n\n  var _useState = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: null,\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: []\n  }),\n      newdata = _useState[0],\n      setnewdata = _useState[1];\n\n  var _useState2 = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: \"\",\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: []\n  }),\n      newdata2 = _useState2[0],\n      setnewdata2 = _useState2[1];\n\n  var _useState3 = useState([]),\n      defaultdata = _useState3[0],\n      setdefaultdata = _useState3[1];\n\n  var _useState4 = useState([]),\n      assetdata = _useState4[0],\n      setassetdata = _useState4[1];\n\n  var _useState5 = useState([]),\n      manufdata = _useState5[0],\n      setmanufdata = _useState5[1];\n\n  var _useState6 = useState([]),\n      modeldata = _useState6[0],\n      setmodeldata = _useState6[1];\n\n  var _useState7 = useState([]),\n      fielddata = _useState7[0],\n      setfielddata = _useState7[1];\n\n  var _useState8 = useState([]),\n      fielddata2 = _useState8[0],\n      setfielddata2 = _useState8[1];\n\n  var _useState9 = useState([]),\n      fielddataa = _useState9[0],\n      setfielddataa = _useState9[1];\n\n  var _useState10 = useState([]),\n      fielddataa2 = _useState10[0],\n      setfielddataa2 = _useState10[1];\n\n  var _useState11 = useState([]),\n      modelpartfielddata = _useState11[0],\n      setmodelpartfielddata = _useState11[1];\n\n  var _useState12 = useState({\n    name: \"\",\n    data_type: \"\",\n    \"default\": \"single\",\n    required: false\n  }),\n      currentfield = _useState12[0],\n      setcurrentfield = _useState12[1];\n\n  var _useState13 = useState({\n    name: \"\",\n    data_type: \"\",\n    \"default\": \"single\",\n    required: false\n  }),\n      currentfield2 = _useState13[0],\n      setcurrentfield2 = _useState13[1];\n\n  var _useState14 = useState(\"\"),\n      currentidmodel = _useState14[0],\n      setcurrentidmodel = _useState14[1];\n\n  var _useState15 = useState([]),\n      addedfield = _useState15[0],\n      setaddedfield = _useState15[1];\n\n  var _useState16 = useState([]),\n      addedfield1 = _useState16[0],\n      setaddedfield1 = _useState16[1];\n\n  var _useState17 = useState([]),\n      addedfield2 = _useState17[0],\n      setaddedfield2 = _useState17[1];\n\n  var _useState18 = useState([]),\n      addedfield3 = _useState18[0],\n      setaddedfield3 = _useState18[1];\n\n  var _useState19 = useState(-1),\n      addedfieldidx = _useState19[0],\n      setaddedfieldidx = _useState19[1];\n\n  var _useState20 = useState(false),\n      addedfieldtrigger = _useState20[0],\n      setaddedfieldtrigger = _useState20[1];\n\n  var _useState21 = useState(-1),\n      addedfieldidx1 = _useState21[0],\n      setaddedfieldidx1 = _useState21[1];\n\n  var _useState22 = useState(false),\n      addedfieldtrigger1 = _useState22[0],\n      setaddedfieldtrigger1 = _useState22[1];\n\n  var _useState23 = useState(-1),\n      addedfieldidx2 = _useState23[0],\n      setaddedfieldidx2 = _useState23[1];\n\n  var _useState24 = useState(false),\n      addedfieldtrigger2 = _useState24[0],\n      setaddedfieldtrigger2 = _useState24[1];\n\n  var _useState25 = useState(-1),\n      addedfieldidx3 = _useState25[0],\n      setaddedfieldidx3 = _useState25[1];\n\n  var _useState26 = useState(false),\n      addedfieldtrigger3 = _useState26[0],\n      setaddedfieldtrigger3 = _useState26[1];\n\n  var _useState27 = useState(false),\n      loadingcreate = _useState27[0],\n      setloadingcreate = _useState27[1];\n\n  var _useState28 = useState(false),\n      loadingcreatemodel = _useState28[0],\n      setloadingcreatemodel = _useState28[1];\n\n  var _useState29 = useState(false),\n      loadinggetmodel = _useState29[0],\n      setloadinggetmodel = _useState29[1];\n\n  var _useState30 = useState(true),\n      praloading = _useState30[0],\n      setpraloading = _useState30[1];\n\n  var _useState31 = useState(false),\n      loadingspec = _useState31[0],\n      setloadingspec = _useState31[1];\n\n  var _useState32 = useState(false),\n      loadingspec2 = _useState32[0],\n      setloadingspec2 = _useState32[1];\n\n  var _useState33 = useState([\"\", \"\"]),\n      currentdropdown2 = _useState33[0],\n      setcurrentdropdown2 = _useState33[1];\n\n  var _useState34 = useState([\"\", \"\"]),\n      currentdropdownn2 = _useState34[0],\n      setcurrentdropdownn2 = _useState34[1];\n\n  var _useState35 = useState(\"\"),\n      currentcheckeddropdown2 = _useState35[0],\n      setcurrentcheckeddropdown2 = _useState35[1];\n\n  var _useState36 = useState(\"\"),\n      currentcheckeddropdownn2 = _useState36[0],\n      setcurrentcheckeddropdownn2 = _useState36[1];\n\n  var _useState37 = useState(false),\n      valuedropdowntrigger = _useState37[0],\n      setvaluedropdowntrigger = _useState37[1];\n\n  var _useState38 = useState(false),\n      valuedropdowntrigger1 = _useState38[0],\n      setvaluedropdowntrigger1 = _useState38[1];\n\n  var _useState39 = useState(false),\n      valuedropdowntrigger2 = _useState39[0],\n      setvaluedropdowntrigger2 = _useState39[1];\n\n  var _useState40 = useState(false),\n      valuedropdowntrigger3 = _useState40[0],\n      setvaluedropdowntrigger3 = _useState40[1];\n\n  var _useState41 = useState(-1),\n      idxdropdowntrigger = _useState41[0],\n      setidxdropdowntrigger = _useState41[1];\n\n  var _useState42 = useState(-1),\n      idxdropdowntrigger1 = _useState42[0],\n      setidxdropdowntrigger1 = _useState42[1];\n\n  var _useState43 = useState(-1),\n      idxdropdowntrigger2 = _useState43[0],\n      setidxdropdowntrigger2 = _useState43[1];\n\n  var _useState44 = useState(-1),\n      idxdropdowntrigger3 = _useState44[0],\n      setidxdropdowntrigger3 = _useState44[1];\n\n  var _useState45 = useState(false),\n      concatfieldtrigger = _useState45[0],\n      setconcatfieldtrigger = _useState45[1];\n\n  var _useState46 = useState(false),\n      concataddcolumnstrigger = _useState46[0],\n      setconcataddcolumnstrigger = _useState46[1];\n\n  var _useState47 = useState(-1),\n      concataddcolumnsidx = _useState47[0],\n      setconcataddcolumnsidx = _useState47[1];\n\n  var _useState48 = useState(-1),\n      concataddcolumnsvalue = _useState48[0],\n      setconcataddcolumnsvalue = _useState48[1];\n\n  var _useState49 = useState(false),\n      concataddcolumnstrigger1 = _useState49[0],\n      setconcataddcolumnstrigger1 = _useState49[1];\n\n  var _useState50 = useState(-1),\n      concataddcolumnsidx1 = _useState50[0],\n      setconcataddcolumnsidx1 = _useState50[1];\n\n  var _useState51 = useState(-1),\n      concataddcolumnsvalue1 = _useState51[0],\n      setconcataddcolumnsvalue1 = _useState51[1];\n\n  var _useState52 = useState(false),\n      concatfieldtrigger2 = _useState52[0],\n      setconcatfieldtrigger2 = _useState52[1];\n\n  var _useState53 = useState(false),\n      editpart = _useState53[0],\n      seteditpart = _useState53[1];\n\n  var _useState54 = useState(false),\n      modalcreatemodel = _useState54[0],\n      setmodalcreatemodel = _useState54[1];\n\n  var _useState55 = useState(false),\n      newdatatrigger = _useState55[0],\n      setnewdatatrigger = _useState55[1];\n\n  var _useState56 = useState(false),\n      newdatatrigger2 = _useState56[0],\n      setnewdatatrigger2 = _useState56[1];\n\n  var _useState57 = useState(false),\n      modeltrigger = _useState57[0],\n      setmodeltrigger = _useState57[1];\n\n  var _useState58 = useState(false),\n      concatparttrigger = _useState58[0],\n      setconcatparttrigger = _useState58[1];\n\n  var _useState59 = useState(-1),\n      concatpartvalue = _useState59[0],\n      setconcatpartvalue = _useState59[1];\n\n  var _useState60 = useState(\"\"),\n      assettypecode = _useState60[0],\n      setassettypecode = _useState60[1];\n\n  var _useState61 = useState(\"\"),\n      assettypecode2 = _useState61[0],\n      setassettypecode2 = _useState61[1];\n\n  var _useState62 = useState({}),\n      defaultmodel = _useState62[0],\n      setdefaultmodel = _useState62[1];\n\n  var _useState63 = useState(false),\n      disabledtambah = _useState63[0],\n      setdisabledtambah = _useState63[1];\n\n  var _useState64 = useState(false),\n      disabledtambah2 = _useState64[0],\n      setdisabledtambah2 = _useState64[1];\n\n  var _useState65 = useState(false),\n      disabledaddfield = _useState65[0],\n      setdisabledaddfield = _useState65[1];\n\n  var _useState66 = useState(false),\n      disabledaddfield2 = _useState66[0],\n      setdisabledaddfield2 = _useState66[1];\n\n  var _useState67 = useState(\"\"),\n      pointevent = _useState67[0],\n      setpointevent = _useState67[1];\n\n  var _useState68 = useState(\"\"),\n      pointevent2 = _useState68[0],\n      setpointevent2 = _useState68[1];\n\n  var _useState69 = useState([\"\", \"\"]),\n      cd2 = _useState69[0],\n      setcd2 = _useState69[1];\n\n  var _useState70 = useState(-1),\n      cdidx = _useState70[0],\n      setcdidx = _useState70[1];\n\n  var _useState71 = useState(false),\n      cdtrigger = _useState71[0],\n      setcdtrigger = _useState71[1];\n\n  var _useState72 = useState([\"\", \"\"]),\n      cd2part = _useState72[0],\n      setcd2part = _useState72[1];\n\n  var _useState73 = useState(-1),\n      cdpartidx = _useState73[0],\n      setcdpartidx = _useState73[1];\n\n  var _useState74 = useState(false),\n      cdparttrigger = _useState74[0],\n      setcdparttrigger = _useState74[1];\n\n  var _useState75 = useState([]),\n      changeasset = _useState75[0],\n      setchangeasset = _useState75[1];\n\n  var _useState76 = useState([]),\n      defaultasset = _useState76[0],\n      setdefaultasset = _useState76[1];\n\n  var _useState77 = useState(false),\n      fetchingpart = _useState77[0],\n      setfetchingpart = _useState77[1];\n\n  var _useState78 = useState(1),\n      page = _useState78[0],\n      setpage = _useState78[1]; //create manufacturer\n\n\n  var _useState79 = useState(false),\n      modalmanuf = _useState79[0],\n      setmodalmanuf = _useState79[1];\n\n  var _useState80 = useState(false),\n      loadingmanuf = _useState80[0],\n      setloadingmanuf = _useState80[1];\n\n  var _useState81 = useState(true),\n      disabledmanuf = _useState81[0],\n      setdisabledmanuf = _useState81[1];\n\n  var _useState82 = useState(-1),\n      triggermanuf = _useState82[0],\n      settriggermanuf = _useState82[1];\n\n  var _useState83 = useState({\n    name: \"\"\n  }),\n      datamanuf = _useState83[0],\n      setdatamanuf = _useState83[1]; //3.onChange\n\n\n  var onClickAddField = function onClickAddField() {\n    setfielddata([].concat(_toConsumableArray(fielddata), [{\n      name: \"\",\n      data_type: \"\",\n      \"default\": \"\",\n      required: false\n    }]));\n    setcurrentfield({\n      name: \"\",\n      data_type: \"\",\n      \"default\": \"\",\n      required: false\n    });\n    setaddedfield1([].concat(_toConsumableArray(addedfield1), [false]));\n    setcurrentdropdown2([\"\", \"\"]);\n    setcd2([\"\", \"\"]);\n    setcurrentcheckeddropdown2([]);\n    setdisabledaddfield(true);\n    setdisabledtambah(true);\n    setpointevent(\"pointer-events-none\");\n  };\n\n  var onClickAddField2 = function onClickAddField2() {\n    setfielddataa2([].concat(_toConsumableArray(fielddataa2), [{\n      name: \"\",\n      data_type: \"\",\n      \"default\": \"\",\n      required: false\n    }]));\n    setcurrentfield2({\n      name: \"\",\n      data_type: \"\",\n      \"default\": \"\",\n      required: false\n    });\n    setcurrentdropdownn2([\"\", \"\"]);\n    setcd2part([\"\", \"\"]);\n    setcurrentcheckeddropdownn2([]);\n    setdisabledaddfield2(true);\n    setdisabledtambah2(true);\n    setpointevent2(\"pointer-events-none\");\n  };\n\n  var onClickSelectAsset = function onClickSelectAsset(id) {\n    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n      asset_id: Number(id)\n    }));\n    setloadingspec(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAsset?id=\").concat(id), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var temp = [];\n\n      if (res2.success) {\n        temp = res2.data.asset_columns.map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": doc[\"default\"] === \"\" || doc[\"default\"] === \"-\" ? doc[\"default\"] : JSON.parse(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n        var defaultassetid = defaultasset.map(function (docmap) {\n          return docmap.id;\n        });\n        var newassetfielddata2 = newdata.model_columns.filter(function (docfilter) {\n          return defaultassetid.includes(docfilter.id);\n        }).concat(temp);\n        var newfieldmap = newdata.model_columns.filter(function (docnewfield) {\n          return typeof docnewfield.id === \"undefined\";\n        });\n        setfielddata2(function (prev) {\n          var tempo = prev;\n          tempo = tempo.filter(function (docfilter) {\n            return defaultassetid.includes(docfilter.id);\n          }).concat(temp);\n          return tempo;\n        });\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          id: defaultmodel.id,\n          name: defaultmodel.name,\n          description: defaultmodel.description,\n          model_columns: newassetfielddata2.concat(newfieldmap),\n          add_columns: temp.concat(newfieldmap),\n          required_sn: res2.data.required_sn\n        }));\n        setdefaultdata(_objectSpread(_objectSpread({}, defaultdata), {}, {\n          id: defaultmodel.id,\n          name: defaultmodel.name,\n          description: defaultmodel.description,\n          manufacturer_id: defaultmodel.manufacturer_id,\n          count: defaultmodel.count,\n          asset: {\n            id: res2.data.id,\n            name: res2.data.name,\n            code: res2.data.code,\n            description: res2.data.description\n          },\n          manufacturer: {\n            id: defaultmodel.manufacturer.id,\n            name: defaultmodel.manufacturer.name\n          },\n          asset_id: Number(id),\n          model_columns: defaultasset,\n          add_columns: [],\n          update_columns: [],\n          delete_column_ids: [],\n          add_models: [],\n          delete_model_ids: [],\n          required_sn: res2.data.required_sn\n        }));\n        var arr = [];\n\n        for (var i = 0; i < newassetfielddata2.length; i++) {\n          arr.push(true);\n        }\n\n        setchangeasset(temp);\n        setaddedfield(arr);\n        setloadingspec(false);\n        setdisabledaddfield(false);\n\n        _notification[\"info\"]({\n          message: \"Anda Telah Mengubah Asset Type\",\n          description: \"Hal ini membuat field dari asset type terkait terbentuk di form ini!\",\n          duration: 0\n        });\n      } else {\n        temp = []; // setfielddata2(temp)\n\n        var _newfieldmap = newdata.model_columns.filter(function (docnewfield) {\n          return typeof docnewfield.id === \"undefined\";\n        });\n\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          model_columns: newdata.model_columns.concat(_newfieldmap),\n          required_sn: false,\n          asset_id: 0\n        }));\n        setloadingspec(false);\n        setdisabledaddfield(true);\n      }\n    });\n  };\n\n  var onClickSelectAsset2 = function onClickSelectAsset2(id) {\n    setloadingspec2(true);\n    setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n      asset_id: Number(id)\n    }));\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAsset?id=\").concat(id), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var temp = [];\n\n      if (res2.success) {\n        temp = res2.data.asset_columns.map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": JSON.parse(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n        var bool = [];\n\n        for (var i = 0; i < temp.length; i++) {\n          bool.push(true);\n        }\n\n        setaddedfield3(bool);\n        setfielddataa(temp);\n        var newfieldmap = newdata2.model_columns.filter(function (docnewfield) {\n          return typeof docnewfield.id === \"undefined\";\n        });\n        setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n          required_sn: res2.data.required_sn,\n          asset_id: res2.data.code,\n          model_columns: temp.concat(newfieldmap)\n        }));\n        setassettypecode2(res2.data.id); // setnewdatatrigger2(prev => !prev)\n\n        setloadingspec2(false);\n        setdisabledaddfield2(false);\n      } else {\n        temp = [];\n\n        var _newfieldmap2 = newdata2.model_columns.filter(function (docnewfield) {\n          return typeof docnewfield.id === \"undefined\";\n        });\n\n        setfielddataa(temp);\n        setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n          model_columns: temp.concat(_newfieldmap2),\n          required_sn: false,\n          asset_id: 0\n        }));\n        setloadingspec2(false);\n      }\n    });\n  }; //4.handle\n\n\n  var handleCreateModel = function handleCreateModel() {\n    var t = {};\n\n    for (var prop in newdata) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata[prop].map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": JSON.stringify(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"update_columns\") {\n        t[prop] = newdata[prop].map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": JSON.stringify(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"add_columns\") {\n        t[prop] = newdata[prop].map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": JSON.stringify(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"asset_id\") {\n        t[prop] = Number(assettypecode);\n      } else {\n        t[prop] = newdata[prop];\n      }\n    }\n\n    setloadingcreate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/updateModel\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(t)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingcreate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Model berhasil diubah\",\n          duration: 3\n        });\n\n        setTimeout(function () {\n          setmodalcreatemodel(false);\n          rt.push(\"/admin/models/detail/\".concat(modelid));\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleCreateModelinModel = function handleCreateModelinModel() {\n    var t = {};\n\n    for (var prop in newdata2) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata2[prop].map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": JSON.stringify(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"asset_id\") [t[prop] = Number(assettypecode2)];else {\n        t[prop] = newdata2[prop];\n      }\n    }\n\n    setloadingcreatemodel(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addModel\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(t)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingcreatemodel(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Model berhasil ditambahkan\",\n          duration: 3\n        });\n\n        setnewdata2({\n          asset_id: \"\",\n          name: \"\",\n          description: \"\",\n          manufacturer_id: \"\",\n          required_sn: false,\n          is_consumable: false,\n          model_columns: [],\n          model_parts: []\n        });\n        setmodalcreatemodel(false);\n        seteditpart(false);\n        setmodeltrigger(res2.id);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleAddManufacturer = function handleAddManufacturer() {\n    setloadingmanuf(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addManufacturer\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datamanuf)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingmanuf(false);\n      setmodalmanuf(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Manufacturer berhasil ditambahkan\",\n          duration: 2\n        });\n\n        setdatamanuf(_objectSpread(_objectSpread({}, datamanuf), {}, {\n          name: \"\"\n        }));\n        console.log(res2);\n        settriggermanuf(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //5.useEffect\n\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAssets\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setassetdata(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getManufacturers\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var data = res2.data;\n      var latestInsertedManufacturer = data[data.length - 1];\n      console.log(latestInsertedManufacturer);\n      /** Set new inserted manufacturer as default selected option in the \"Manufacturer\" dropdown */\n\n      setmanufdata(data);\n      setnewdata(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          manufacturer_id: latestInsertedManufacturer.id\n        });\n      });\n    });\n  }, [triggermanuf]);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModel?id=\").concat(modelid), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var temp = res2.data.model_columns.map(function (doc, idx) {\n        if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n          return _objectSpread(_objectSpread({}, doc), {}, {\n            \"default\": doc[\"default\"] === \"\" || doc[\"default\"] === \"-\" ? doc[\"default\"] : JSON.parse(doc[\"default\"])\n          });\n        } else {\n          return _objectSpread({}, doc);\n        }\n      }); //model_parts\n\n      var recursivePartModel = function recursivePartModel(item) {\n        var temp11 = [];\n\n        for (var i = 0; i < item.length; i++) {\n          var temp1 = {};\n          temp1 = item[i].model_columns.map(function (doc, idx) {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return _objectSpread(_objectSpread({}, doc), {}, {\n                \"default\": doc[\"default\"] === \"\" || doc[\"default\"] === \"-\" ? doc[\"default\"] : JSON.parse(doc[\"default\"])\n              });\n            } else {\n              return _objectSpread({}, doc);\n            }\n          });\n          temp11.push(_objectSpread(_objectSpread({}, item[i]), {}, {\n            model_columns: temp1,\n            model_parts: item[i].model_parts.length > 0 ? recursivePartModel(item[i].model_parts) : []\n          }));\n        }\n\n        return temp11;\n      };\n\n      var yo = recursivePartModel(res2.data.model_parts);\n\n      var temp2 = _objectSpread(_objectSpread({}, res2.data), {}, {\n        asset_id: res2.data.asset.code,\n        model_columns: temp,\n        add_columns: [],\n        update_columns: [],\n        delete_column_ids: [],\n        add_models: [],\n        delete_model_ids: []\n      });\n\n      setnewdata(temp2);\n      setdefaultdata(temp2);\n      setdefaultasset(temp);\n      setdefaultmodel(temp2);\n      setfielddata2(temp);\n      setmodelpartfielddata(yo);\n      var arr = [];\n\n      for (var i = 0; i < res2.data.model_columns.length; i++) {\n        arr.push(true);\n      }\n\n      setaddedfield(arr);\n      setassettypecode(res2.data.asset_id);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModels\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setmodeldata(res2.data.data);\n      setcurrentidmodel(modeltrigger);\n      modeltrigger !== false ? seteditpart(true) : null;\n    });\n  }, [modeltrigger]); //checkbox dropdown dari model utama yang field asset\n\n  useEffect(function () {\n    if (idxdropdowntrigger !== -1) {\n      setfielddata2(function (prev) {\n        var temp = prev;\n        temp[idxdropdowntrigger][\"default\"] = {\n          \"default\": currentcheckeddropdown2,\n          opsi: currentdropdown2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger]); //checkbox dropdown dari model utama yang field buat sendiri\n\n  useEffect(function () {\n    if (idxdropdowntrigger1 !== -1) {\n      setfielddata(function (prev) {\n        var temp = prev; // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n\n        temp[idxdropdowntrigger1][\"default\"] = {\n          \"default\": currentcheckeddropdown2,\n          opsi: currentdropdown2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger1]);\n  useEffect(function () {\n    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n      model_columns: fielddata2.concat(fielddata)\n    }));\n  }, [concatfieldtrigger]);\n  useEffect(function () {\n    if (concataddcolumnsidx !== -1) {\n      if (changeasset.some(function (docsome) {\n        return docsome.id === concataddcolumnsvalue.id;\n      }) || typeof concataddcolumnsvalue.id === \"undefined\") {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (newdata.add_columns.map(function (docadd) {\n          return docadd.name;\n        }).indexOf(currentfield.name) === -1) {\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns.push(fielddata2[fielddata2.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          var idxaddcolumn = newdata.add_columns.map(function (docadd2) {\n            return docadd2.name;\n          }).indexOf(currentfield.name); // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                \"default\": {\n                  \"default\": currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (newdata.update_columns.map(function (docup) {\n          return docup.id;\n        }).indexOf(currentfield.id) === -1) {\n          setnewdata(function (prev) {\n            var temp = prev;\n            temp.update_columns.push(fielddata2[concataddcolumnsidx]);\n            return temp;\n          });\n        } else {\n          var idxupcolumn = newdata.update_columns.map(function (docadd2) {\n            return docadd2.id;\n          }).indexOf(currentfield.id);\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                \"default\": {\n                  \"default\": currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger]);\n  useEffect(function () {\n    if (concataddcolumnsidx1 !== -1) {\n      if (concataddcolumnsidx1 > defaultdata.model_columns.length - 1 || typeof concataddcolumnsvalue1.id === \"undefined\" || changeasset === true) {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (newdata.add_columns.map(function (docadd) {\n          return docadd.name;\n        }).indexOf(currentfield.name) === -1) {\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns.push(fielddata[fielddata.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          var idxaddcolumn = newdata.add_columns.map(function (docadd2) {\n            return docadd2.name;\n          }).indexOf(currentfield.name); // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                \"default\": {\n                  \"default\": currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (newdata.update_columns.map(function (docup) {\n          return docup.id;\n        }).indexOf(currentfield.id) === -1) {\n          setnewdata(function (prev) {\n            var temp = prev;\n            temp.update_columns.push(fielddata[concataddcolumnsidx1]);\n            return temp;\n          });\n        } else {\n          var idxupcolumn = newdata.update_columns.map(function (docadd2) {\n            return docadd2.id;\n          }).indexOf(currentfield.id);\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                \"default\": {\n                  \"default\": currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(function (prev) {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger1]);\n  useEffect(function () {\n    if (addedfieldidx !== -1) {\n      setaddedfield(function (prev) {\n        if (prev[addedfieldidx] === false) {\n          prev[addedfieldidx] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx] === \"undefined\") {\n          var temp2 = [].concat(_toConsumableArray(prev), [true]);\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger]);\n  useEffect(function () {\n    if (addedfieldidx1 !== -1) {\n      setaddedfield1(function (prev) {\n        if (prev[addedfieldidx1] === false) {\n          prev[addedfieldidx1] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx1] === \"undefined\") {\n          var temp2 = [].concat(_toConsumableArray(prev), [true]);\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger1]);\n  useEffect(function () {\n    if (addedfieldidx3 !== -1) {\n      setaddedfield3(function (prev) {\n        if (prev[addedfieldidx3] === false) {\n          prev[addedfieldidx3] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx3] === \"undefined\") {\n          var temp2 = [].concat(_toConsumableArray(prev), [true]);\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger3]); //checkbox dropdown dari model baru yang field asset\n\n  useEffect(function () {\n    if (idxdropdowntrigger3 !== -1) {\n      setfielddataa(function (prev) {\n        var temp = prev; // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n\n        temp[idxdropdowntrigger3][\"default\"] = {\n          \"default\": currentcheckeddropdownn2,\n          opsi: currentdropdownn2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger3]); //checkbox dropdown dari model baru yang field buat sendiri\n\n  useEffect(function () {\n    if (idxdropdowntrigger2 !== -1) {\n      setfielddataa2(function (prev) {\n        var temp = prev;\n        temp[idxdropdowntrigger2][\"default\"] = {\n          \"default\": currentcheckeddropdownn2,\n          opsi: currentdropdownn2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger2]);\n  useEffect(function () {\n    setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n      model_columns: fielddataa.concat(fielddataa2)\n    }));\n  }, [concatfieldtrigger2]);\n  useEffect(function () {\n    if (addedfieldidx2 !== -1) {\n      setaddedfield2(function (prev) {\n        if (prev[addedfieldidx2] === false) {\n          prev[addedfieldidx2] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx2] === \"undefined\") {\n          var temp2 = [].concat(_toConsumableArray(prev), [true]);\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger2]);\n  useEffect(function () {\n    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n      model_columns: fielddata\n    }));\n  }, [newdatatrigger]);\n  useEffect(function () {\n    setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n      model_columns: fielddataa\n    }));\n  }, [newdatatrigger2]);\n  useEffect(function () {\n    var temp = [];\n\n    if (concatpartvalue !== -1) {\n      if (concatpartvalue.length === 0) {\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          model_parts: []\n        }));\n      } else {\n        concatpartvalue.map(function (doc, idx) {\n          var idxtemp = temp.map(function (doc) {\n            return doc.id;\n          }).indexOf(doc.id);\n\n          if (idxtemp !== -1 && temp[idxtemp][\"id\"] === doc.id) {\n            var idxof = temp.map(function (doc) {\n              return doc.id;\n            }).indexOf(doc.id);\n            temp[idxof] = _objectSpread(_objectSpread({}, temp[idxof]), {}, {\n              quantity: temp[idxof].quantity + doc.quantity\n            });\n          } else if (idxtemp === -1) {\n            temp.push({\n              id: doc.id,\n              quantity: doc.quantity\n            });\n          }\n        });\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          add_models: temp\n        }));\n      }\n    }\n  }, [concatparttrigger]);\n  useEffect(function () {\n    if (cdidx !== -1) {\n      setcurrentdropdown2(function (prev) {\n        return cd2.filter(function (doc10, idx10) {\n          return idx10 !== cdidx;\n        });\n      });\n      setcd2(function (prev) {\n        return prev.filter(function (doc11, idx11) {\n          return idx11 !== cdidx;\n        });\n      });\n    }\n  }, [cdtrigger]);\n  useEffect(function () {\n    if (cdpartidx !== -1) {\n      setcurrentdropdownn2(function (prev) {\n        return cd2part.filter(function (doc10, idx10) {\n          return idx10 !== cdpartidx;\n        });\n      });\n      setcd2part(function (prev) {\n        return prev.filter(function (doc11, idx11) {\n          return idx11 !== cdpartidx;\n        });\n      });\n    }\n  }, [cdparttrigger]);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    st: st,\n    tok: initProps,\n    sidemenu: sidemenu,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8\",\n        children: /*#__PURE__*/_jsxDEV(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" col-span-4 flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-semibold py-2\",\n              children: [\"Form Ubah Model - \", newdata.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1195,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                href: \"/admin/models/detail/\".concat(modelid),\n                children: /*#__PURE__*/_jsxDEV(_Button, {\n                  /*onClick={() => { console.log(newdata); console.log(fielddata); console.log(fielddata2); console.log(defaultdata); console.log(defaultasset) }}*/\n                  type: \"default\",\n                  children: \"Batal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1200,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1199,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                loading: loadingcreate,\n                disabled: disabledaddfield,\n                onClick: instanceForm.submit,\n                children: \"Simpan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1206,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1198,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1194,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1193,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1192,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Informasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1220,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1219,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow-md border p-8 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1224,\n            columnNumber: 15\n          }, _this) : /*#__PURE__*/_jsxDEV(_Form, {\n            form: instanceForm,\n            layout: \"vertical\",\n            onFinish: handleCreateModel,\n            initialValues: newdata,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                name: \"asset_id\",\n                label: \"Asset Type\",\n                rules: [{\n                  required: true,\n                  message: \"Asset Type wajib diisi\"\n                }],\n                children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                  style: {\n                    marginRight: \"1rem\"\n                  },\n                  dropdownStyle: {\n                    maxHeight: 400,\n                    overflow: \"auto\"\n                  },\n                  treeData: assetdata,\n                  placeholder: \"Pilih Asset Type\",\n                  treeDefaultExpandAll: true,\n                  onChange: function onChange(value, label, extra) {\n                    if (typeof value !== \"undefined\") {\n                      onClickSelectAsset(extra.allCheckedNodes[0].node.props.id);\n                    } else {\n                      onClickSelectAsset(0);\n                    }\n                  },\n                  allowClear: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1243,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1233,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                name: \"name\",\n                label: \"Nama Model\",\n                rules: [{\n                  required: true,\n                  message: \"Nama Model wajib diisi\"\n                }],\n                children: /*#__PURE__*/_jsxDEV(_Input, {\n                  name: \"name\",\n                  onChange: function onChange(e) {\n                    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                      name: e.target.value\n                    }));\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1271,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1261,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1232,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" w-11/12 mr-2\",\n                children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"manufacturer_id\",\n                  label: \"Manufacturer\",\n                  children: /*#__PURE__*/_jsxDEV(_Select, {\n                    placeholder: \"Pilih Manufacturer\",\n                    onChange: function onChange(value) {\n                      console.log(value);\n                      setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                        manufacturer_id: value\n                      }));\n                    },\n                    children: manufdata.map(function (doc, idx) {\n                      return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: doc.id,\n                        children: doc.name\n                      }, idx, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1291,\n                        columnNumber: 29\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1282,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1281,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1280,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-1/12 flex pt-2 my-auto items-center justify-center cursor-pointer\",\n                onClick: function onClick() {\n                  setmodalmanuf(true);\n                },\n                children: /*#__PURE__*/_jsxDEV(PlusSquareTwoTone, {\n                  style: {\n                    fontSize: \"1.5rem\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1305,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1299,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1279,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"description\",\n              label: \"Deskripsi\",\n              children: /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                rows: 4,\n                name: \"description\",\n                onChange: function onChange(e) {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    description: e.target.value\n                  }));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1309,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1308,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex mb-5\",\n              children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                style: {\n                  marginRight: \"0.5rem\"\n                },\n                onChange: function onChange(e) {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    required_sn: e.target.checked\n                  }));\n                },\n                checked: newdata.required_sn\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1318,\n                columnNumber: 19\n              }, _this), \" \", \"Serial Number wajib ada\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1317,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                style: {\n                  marginRight: \"0.5rem\"\n                },\n                onChange: function onChange(e) {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    is_consumable: e.target.checked\n                  }));\n                },\n                checked: newdata.is_consumable\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1328,\n                columnNumber: 19\n              }, _this), \" \", \"Model Consumable dengan satuan jumlah\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1327,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1226,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1222,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1218,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1346,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1345,\n          columnNumber: 11\n        }, _this), loadingspec ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1349,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: fielddata2.length === 0 ? /*#__PURE__*/_jsxDEV(_Empty, {\n            image: _Empty.PRESENTED_IMAGE_SIMPLE\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1353,\n            columnNumber: 17\n          }, _this) : fielddata2.map(function (doc, idx) {\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: addedfield[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: function onClick() {\n                  var temp = _toConsumableArray(addedfield);\n\n                  temp[idx] = false;\n\n                  for (var i = 0; i < temp.length; i++) {\n                    if (i !== idx) {\n                      temp[i] = true;\n                    }\n                  }\n\n                  setaddedfield(temp);\n                  setcurrentfield(fielddata2[idx]);\n\n                  if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                    setcurrentdropdown2(doc[\"default\"].opsi);\n                    setcurrentcheckeddropdown2(doc[\"default\"][\"default\"]);\n                  }\n\n                  if (fielddata2[idx].data_type !== \"dropdown\" || fielddata2[idx].data_type !== \"checkbox\") {\n                    setcd2(doc[\"default\"].opsi);\n\n                    if (fielddata2[idx].name !== \"\" && fielddata2[idx].data_type !== \"\") {\n                      setdisabledtambah(false);\n                    } else {\n                      setdisabledtambah(true);\n                    }\n                  } else {\n                    if (doc[\"default\"].opsi.some(function (docopsi) {\n                      return docopsi === \"\";\n                    })) {\n                      setdisabledtambah(true);\n                    } else {\n                      setdisabledtambah(false);\n                    }\n                  }\n\n                  setdisabledaddfield(true);\n                  setpointevent(\"pointer-events-none\");\n                },\n                className: \"jsx-3315758188\" + \" \" + \"\".concat(pointevent, \" shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer\"),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-3315758188\" + \" \" + \"font-semibold mb-2\",\n                  children: [doc.name, fielddata2[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-3315758188\" + \" \" + \"judulField\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1410,\n                    columnNumber: 31\n                  }, _this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-3315758188\" + \" \" + \"text-gray-400 text-sm\",\n                    children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && \" Text\", \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1412,\n                    columnNumber: 29\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1407,\n                  columnNumber: 27\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-3315758188\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                  children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"paragraph\" || doc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex flex-col w-full\",\n                      children: doc[\"default\"].opsi.map(function (dok, idk) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-3315758188\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                            disabled: true,\n                            checked: doc[\"default\"][\"default\"] === idk ? true : false,\n                            style: {\n                              marginRight: \"0.5rem\"\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1435,\n                            columnNumber: 43\n                          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1444,\n                            columnNumber: 43\n                          }, _this)]\n                        }, idk, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1431,\n                          columnNumber: 41\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1428,\n                      columnNumber: 35\n                    }, _this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex flex-col w-full\",\n                      children: doc[\"default\"].opsi.map(function (dok, idk) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-3315758188\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                            disabled: true,\n                            checked: doc[\"default\"][\"default\"].indexOf(idk) !== -1 ? true : false,\n                            style: {\n                              marginRight: \"0.5rem\"\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1458,\n                            columnNumber: 43\n                          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1469,\n                            columnNumber: 43\n                          }, _this)]\n                        }, idk, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1454,\n                          columnNumber: 41\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1451,\n                      columnNumber: 35\n                    }, _this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex justify-between w-full px-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                        children: doc[\"default\"]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1477,\n                        columnNumber: 37\n                      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-3315758188\",\n                        children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1479,\n                          columnNumber: 39\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1478,\n                        columnNumber: 37\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1476,\n                      columnNumber: 35\n                    }, _this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex h-20\",\n                      children: doc[\"default\"]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1484,\n                      columnNumber: 35\n                    }, _this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                    children: doc[\"default\"]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1488,\n                    columnNumber: 31\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1421,\n                  columnNumber: 27\n                }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"3315758188\",\n                  children: \".judulField.jsx-3315758188::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtOUM2QixBQUdxRixZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuICAgICAgICBjb25zdCBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlciA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc29sZS5sb2cobGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIpO1xuXG4gICAgICAgIC8qKiBTZXQgbmV3IGluc2VydGVkIG1hbnVmYWN0dXJlciBhcyBkZWZhdWx0IHNlbGVjdGVkIG9wdGlvbiBpbiB0aGUgXCJNYW51ZmFjdHVyZXJcIiBkcm9wZG93biAqL1xuICAgICAgICBzZXRtYW51ZmRhdGEoZGF0YSk7XG4gICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+ICh7Li4ucHJldiwgbWFudWZhY3R1cmVyX2lkOiBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZCB9KSlcbiAgICAgIH0pO1xuICB9LCBbdHJpZ2dlcm1hbnVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7bW9kZWxpZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9tb2RlbF9wYXJ0c1xuICAgICAgICBjb25zdCByZWN1cnNpdmVQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgIHZhciB0ZW1wMTEgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZW1wMSA9IHt9O1xuICAgICAgICAgICAgdGVtcDEgPSBpdGVtW2ldLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZW1wMTEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW1baV0sXG4gICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAxLFxuICAgICAgICAgICAgICBtb2RlbF9wYXJ0czpcbiAgICAgICAgICAgICAgICBpdGVtW2ldLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gcmVjdXJzaXZlUGFydE1vZGVsKGl0ZW1baV0ubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0ZW1wMTE7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHlvID0gcmVjdXJzaXZlUGFydE1vZGVsKHJlczIuZGF0YS5tb2RlbF9wYXJ0cyk7XG4gICAgICAgIGNvbnN0IHRlbXAyID0ge1xuICAgICAgICAgIC4uLnJlczIuZGF0YSxcbiAgICAgICAgICBhc3NldF9pZDogcmVzMi5kYXRhLmFzc2V0LmNvZGUsXG4gICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcCxcbiAgICAgICAgICBhZGRfY29sdW1uczogW10sXG4gICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0bmV3ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGFzc2V0KHRlbXApO1xuICAgICAgICBzZXRkZWZhdWx0bW9kZWwodGVtcDIpO1xuICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoeW8pO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRhZGRlZGZpZWxkKGFycik7XG4gICAgICAgIHNldGFzc2V0dHlwZWNvZGUocmVzMi5kYXRhLmFzc2V0X2lkKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwobW9kZWx0cmlnZ2VyKTtcbiAgICAgICAgbW9kZWx0cmlnZ2VyICE9PSBmYWxzZSA/IHNldGVkaXRwYXJ0KHRydWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICB9LCBbbW9kZWx0cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMSAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIxXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHtcbiAgICAgIC4uLm5ld2RhdGEsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEyLmNvbmNhdChmaWVsZGRhdGEpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHggIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZWFzc2V0LnNvbWUoXG4gICAgICAgICAgKGRvY3NvbWUpID0+IGRvY3NvbWUuaWQgPT09IGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZFxuICAgICAgICApIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2ZpZWxkZGF0YTIubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHgxICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjb25jYXRhZGRjb2x1bW5zaWR4MSA+IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoIC0gMSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlMS5pZCA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICBjaGFuZ2Vhc3NldCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtmaWVsZGRhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtjb25jYXRhZGRjb2x1bW5zaWR4MV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHhdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDEgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4MV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4MV0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgzICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDNdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4M10gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyM10pO1xuXG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMyAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyM11bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMiAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhLmNvbmNhdChmaWVsZGRhdGFhMiksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgyICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDJdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHRlbXAgPSBbXTtcbiAgICBpZiAoY29uY2F0cGFydHZhbHVlICE9PSAtMSkge1xuICAgICAgaWYgKGNvbmNhdHBhcnR2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX3BhcnRzOiBbXSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmNhdHBhcnR2YWx1ZS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgdmFyIGlkeHRlbXAgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICBpZiAoaWR4dGVtcCAhPT0gLTEgJiYgdGVtcFtpZHh0ZW1wXVtcImlkXCJdID09PSBkb2MuaWQpIHtcbiAgICAgICAgICAgIHZhciBpZHhvZiA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgdGVtcFtpZHhvZl0gPSB7XG4gICAgICAgICAgICAgIC4uLnRlbXBbaWR4b2ZdLFxuICAgICAgICAgICAgICBxdWFudGl0eTogdGVtcFtpZHhvZl0ucXVhbnRpdHkgKyBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaWR4dGVtcCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRlbXAucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYWRkX21vZGVsczogdGVtcCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRwYXJ0dHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMi5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkaWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QyKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RwYXJ0aWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMnBhcnQuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZHBhcnRpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RwYXJ0aWR4KSk7XG4gICAgfVxuICB9LCBbY2RwYXJ0dHJpZ2dlcl0pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC0yIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggTW9kZWwgLSB7bmV3ZGF0YS5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKG5ld2RhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyKTsgY29uc29sZS5sb2coZGVmYXVsdGRhdGEpOyBjb25zb2xlLmxvZyhkZWZhdWx0YXNzZXQpIH19Ki8gdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybS5zdWJtaXR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+SW5mb3JtYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluPjwvU3Bpbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWx9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bmV3ZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCIgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb25zdW1hYmxlOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLmlzX2NvbnN1bWFibGV9XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIE1vZGVsIENvbnN1bWFibGUgZGVuZ2FuIHNhdHVhbiBqdW1sYWhcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtsb2FkaW5nc3BlYyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGEyLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZmllbGRkYXRhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhMltpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggIT09IGZpZWxkZGF0YS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4VXBkYXRlQ29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhVcGRhdGVDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQxW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQxXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihpZGspICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YVtpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhMi5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtuZXdkYXRhLmlzX2NvbnN1bWFibGUgPT09IGZhbHNlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBtYi04IGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Lb25maWd1cmFzaSBQYXJ0IE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcGFuZWwke2lkeH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jLm1vZGVsX2NoaWxkLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTJcIj57ZG9jLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJNb2RlbCB0aWRhayBtZW1pbGlraSBwYXJ0IG1vZGVsIVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fT48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIE1vZGVsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRhcmkgTW9kZWwgUGFydCAke25ld2RhdGEubmFtZX0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0ZW1wID0gbW9kZWxwYXJ0ZmllbGRkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMikgPT4gZG9jMi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnNwbGljZShpZHhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLmluZGV4T2YoZG9jLmlkKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJlZGAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NldCBUeXBle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxhc3NldHR5cGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYmctZ3JheS0yMDAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gaC0xMiBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMsIGlkeG1jKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBteS1hdXRvIHB4LTIgcHktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctd2hpdGUgYm9yZGVyIHctMy8xMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS0xMDAgcm91bmRlZCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjAgcm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfcGFydHMubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lIHN0eWxlPXt7IG1hcmdpblRvcDogYDFyZW1gIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ2hpbGRQYXJ0TW9kZWwoZG9jLm1vZGVsX3BhcnRzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZWRpdHBhcnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbXktMyBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtNSB0ZXh0LWxnIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRpZG1vZGVsfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRpZG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ3BhcnQgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0TW9kZWxzP3Jvd3M9MTAmbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bW9kZWxkYXRhKFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBhdGF1IGNhcmkgbmFtYSBtb2R1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Qb3B1cFNjcm9sbD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsVG9wICsgZXZlbnQudGFyZ2V0Lm9mZnNldEhlaWdodCA9PT0gZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2V0cGFnZShwcmV2ID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9wYWdlPSR7cGFnZX0mcm93cz0xMGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzMiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY3JvbGxUbygwLCBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXMyLmRhdGEudG8gPj0gcmVzMi5kYXRhLnRvdGFsID8gc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhXSkgOiBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGEsIDxTcGluIHNpemU9XCJzbWFsbFwiIC8+XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MuaWR9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2dldG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7Y3VycmVudGlkbW9kZWx9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX2NvbHVtbnNcIl0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxwYXJ0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5tb2RlbF9wYXJ0cy5tYXAoKGRvYzIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXAzID0gZG9jMi5tb2RlbF9jb2x1bW5zLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYzMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBtYXAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX3BhcnRzXCJdID0gbW9kZWxwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJpZFwiXSA9IHJlczIuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJuYW1lXCJdID0gcmVzMi5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAxID0gWy4uLnRlbXAxLCB0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dmFsdWUocmVzMi5kYXRhLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHRyaWdnZXIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhMiA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzMpID0+IGRvYzMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGlkbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGRhdGEyID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudGlkbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZHhkYXRhMiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubWFwKChkb2MxKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jMS5pZCA9PT0gY3VycmVudGlkbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMS5xdWFudGl0eSA9IGRvYzEucXVhbnRpdHkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICArIFRhbWJhaCBQYXJ0IE1vZGVsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTW9kZWw8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtMi5zdWJtaXR9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZW1vZGVsfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjcmVhdGVtb2RlbH1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBtYi04XCI+XG4gICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybTJ9XG4gICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MigwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YTIucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdzcGVjMiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj4gOiBudWxsfSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj4oe2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgPyBcIlNpbmdsZSBUZXh0Ym94XCIgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTcgZmxleCBqdXN0aWZ5LWNlbnRlciBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXSA9IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBkZWZhdWx0VmFsdWU9e2RvY2N9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlciBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXS5wdXNoKGlkeHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IHtkb2NjfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXIgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBkYXRlU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgIHtsb2FkaW5nc3BlYzIgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkM1tpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDModGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jeHgsIGlkeHgpID0+IGRvY3h4LmlkICE9PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZmllbGRkYXRhYTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDJbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQyXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhYS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGQyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTWFudWZhY3R1cmVyPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkbWFudWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWFudWZhY3R1cmVyfVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdtYW51Zn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbWFudWZ9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIE1hbnVmYWN0dXJlciA8c3BhbiBjbGFzc05hbWU9XCJuYW1hbWFudVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YW1hbnVmLm5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTmFtYSBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZG1hbnVmKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRhdGFtYW51Zih7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYW1hbnU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBtb2RlbGlkID0gcGFyYW1zLm1vZGVsSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbiA9IGF3YWl0IHJlc291cmNlcy5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbjtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjgyXCIsXG4gICAgICBtb2RlbGlkLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsc1VwZGF0ZTI7XG4iXX0= */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n                }, void 0, false, void 0, _this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1359,\n                columnNumber: 25\n              }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n                children: /*#__PURE__*/_jsxDEV(_Form, {\n                  layout: \"vertical\",\n                  initialValues: currentfield,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"name\",\n                      label: \"Nama Spesifikasi\",\n                      rules: [{\n                        required: true,\n                        message: \"Nama Spesifikasi wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Input, {\n                        required: true,\n                        name: \"name\",\n                        onChange: function onChange(e) {\n                          setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                            name: e.target.value\n                          }));\n\n                          if (e.target.value === \"\") {\n                            setdisabledtambah(true);\n                          } else if (e.target.value !== \"\" && currentfield.data_type !== \"\" && currentdropdown2.every(function (doca, idxa) {\n                            return doca !== \"\";\n                          })) {\n                            setdisabledtambah(false);\n                          }\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1517,\n                        columnNumber: 33\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1507,\n                      columnNumber: 31\n                    }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"data_type\",\n                      label: \"Tipe Field\",\n                      rules: [{\n                        required: true,\n                        message: \"Tipe Field wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Select, {\n                        placeholder: \"Pilih Tipe Field\",\n                        onChange: function onChange(value) {\n                          setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                            data_type: value\n                          }));\n\n                          if (value === \"dropdown\" || value === \"checkbox\") {\n                            if (currentdropdown2.every(function (doca, idxa) {\n                              return doca !== \"\";\n                            })) {\n                              setdisabledtambah(false);\n                            } else {\n                              setdisabledtambah(true);\n                            }\n                          } else {\n                            setdisabledtambah(false);\n                          }\n\n                          if (value === \"dropdown\") {\n                            setcurrentcheckeddropdown2(\"\");\n                            setcurrentdropdown2([\"\", \"\"]);\n                            setdisabledtambah(true);\n                          }\n\n                          if (value === \"checkbox\") {\n                            setcurrentcheckeddropdown2([]);\n                            setcurrentdropdown2([\"\", \"\"]);\n                            setcd2([\"\", \"\"]);\n                            setdisabledtambah(true);\n                          }\n                        },\n                        name: \"data_type\",\n                        children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"dropdown\",\n                          children: \"Dropdown\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1586,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"number\",\n                          children: \"Number\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1589,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"paragraph\",\n                          children: \"Paragraph Text\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1592,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"checkbox\",\n                          children: \"Checkbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1595,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"single\",\n                          children: \"Single Textbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1598,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"date\",\n                          children: \"Date\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1601,\n                          columnNumber: 35\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1549,\n                        columnNumber: 33\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1539,\n                      columnNumber: 31\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1506,\n                    columnNumber: 29\n                  }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"default\",\n                    label: \"Default\",\n                    children: [currentfield.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1611,\n                        columnNumber: 35\n                      }, _this), currentdropdown2.map(function (doc, idxx) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-7 flex items-center\",\n                            children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                              checked: currentcheckeddropdown2 === idxx ? true : false,\n                              onChange: function onChange(e) {\n                                if (e.target.checked === true) {\n                                  setcurrentcheckeddropdown2(idxx);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1618,\n                              columnNumber: 41\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1617,\n                            columnNumber: 39\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-10/12 mr-5\",\n                            children: /*#__PURE__*/_jsxDEV(_Input, {\n                              style: {\n                                marginRight: \"0.5rem\"\n                              },\n                              defaultValue: doc,\n                              placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                              onChange: function onChange(e) {\n                                setcurrentdropdown2(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n                                setcd2(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n\n                                if (e.target.value !== \"\" && currentdropdown2.every(function (doca, idxa) {\n                                  return doca !== \"\";\n                                }) && currentfield.name !== \"\") {\n                                  setdisabledtambah(false);\n                                } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                                  setdisabledtambah(true);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1632,\n                              columnNumber: 41\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1631,\n                            columnNumber: 39\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-1/12 flex justify-around\",\n                            onClick: function onClick() {\n                              setcurrentdropdown2([]);\n                              setcdtrigger(function (prev) {\n                                return !prev;\n                              });\n                              setcdidx(idxx);\n                            },\n                            children: /*#__PURE__*/_jsxDEV(_Button, {\n                              type: \"danger\",\n                              children: \"-\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1674,\n                              columnNumber: 41\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1666,\n                            columnNumber: 39\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1616,\n                          columnNumber: 37\n                        }, _this);\n                      }), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: function onClick() {\n                            setcurrentdropdown2([].concat(_toConsumableArray(currentdropdown2), [\"\"]));\n                            setcd2([].concat(_toConsumableArray(cd2), [\"\"]));\n                            setdisabledtambah(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1679,\n                          columnNumber: 37\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1678,\n                        columnNumber: 35\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1610,\n                      columnNumber: 33\n                    }, _this) : null, currentfield.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1697,\n                        columnNumber: 35\n                      }, _this), currentdropdown2.map(function (doc, idxx) {\n                        var idxchecked = currentcheckeddropdown2.includes(idxx);\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-7 flex items-center\",\n                            children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                              defaultChecked: idxchecked,\n                              onChange: function onChange(e) {\n                                if (e.target.checked === true) {\n                                  setcurrentcheckeddropdown2(function (prev) {\n                                    var temp = prev;\n                                    temp.push(idxx);\n                                    return temp;\n                                  });\n                                } else {\n                                  setcurrentcheckeddropdown2(function (prev) {\n                                    var temp = prev;\n                                    var index = temp.indexOf(idxx);\n                                    temp.splice(index, 1);\n                                    return temp;\n                                  });\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1707,\n                              columnNumber: 43\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1706,\n                            columnNumber: 41\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-10/12 mr-5\",\n                            children: /*#__PURE__*/_jsxDEV(_Input, {\n                              style: {\n                                marginRight: \"0.5rem\"\n                              },\n                              defaultValue: doc,\n                              placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                              onChange: function onChange(e) {\n                                setcurrentdropdown2(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n                                setcd2(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n\n                                if (e.target.value !== \"\" && currentdropdown2.every(function (doca, idxa) {\n                                  return doca !== \"\";\n                                }) && currentfield.name !== \"\") {\n                                  setdisabledtambah(false);\n                                } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                                  setdisabledtambah(true);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1733,\n                              columnNumber: 43\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1732,\n                            columnNumber: 41\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-1/12 flex justify-around\",\n                            onClick: function onClick() {\n                              setcurrentdropdown2([]);\n                              setcdtrigger(function (prev) {\n                                return !prev;\n                              });\n                              setcdidx(idxx);\n                            },\n                            children: /*#__PURE__*/_jsxDEV(_Button, {\n                              type: \"danger\",\n                              children: \"-\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1775,\n                              columnNumber: 43\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1767,\n                            columnNumber: 41\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1705,\n                          columnNumber: 39\n                        }, _this);\n                      }), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: function onClick() {\n                            setcurrentdropdown2([].concat(_toConsumableArray(currentdropdown2), [\"\"]));\n                            setcd2([].concat(_toConsumableArray(cd2), [\"\"]));\n                            setdisabledtambah(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1781,\n                          columnNumber: 37\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1780,\n                        columnNumber: 35\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1696,\n                      columnNumber: 33\n                    }, _this) : null, currentfield.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                      style: {\n                        width: \"30%\"\n                      },\n                      defaultValue: fielddata2[idx][\"default\"],\n                      placeholder: \"Masukkan default \".concat(currentfield.name),\n                      onChange: function onChange(value) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          \"default\": \"\".concat(value)\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1798,\n                      columnNumber: 33\n                    }, _this), currentfield.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                      rows: 4,\n                      placeholder: \"Masukkan default \".concat(currentfield.name),\n                      defaultValue: fielddata2[idx][\"default\"],\n                      onChange: function onChange(e) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          \"default\": e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1812,\n                      columnNumber: 33\n                    }, _this), currentfield.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: \"Masukkan default \".concat(currentfield.name),\n                      defaultValue: fielddata2[idx][\"default\"],\n                      onChange: function onChange(e) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          \"default\": e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1826,\n                      columnNumber: 33\n                    }, _this), currentfield.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: \"Masukkan default \".concat(currentfield.name),\n                      defaultValue: fielddata2[idx][\"default\"],\n                      onChange: function onChange(e) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          \"default\": e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1839,\n                      columnNumber: 33\n                    }, _this), currentfield.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                      defaultValue: moment(fielddata2[idx][\"default\"]),\n                      style: {\n                        width: \"30%\"\n                      },\n                      placeholder: \"Masukkan default \".concat(currentfield.name),\n                      onChange: function onChange(value, dateString) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          \"default\": dateString\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1852,\n                      columnNumber: 33\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1607,\n                    columnNumber: 29\n                  }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1865,\n                    columnNumber: 29\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex mt-4 justify-end\",\n                    children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                      placement: \"bottom\",\n                      title: \"Apakah anda yakin ingin menghapus field \".concat(doc.name === \"\" ? \"ini\" : doc.name, \"?\"),\n                      okText: \"Ya\",\n                      cancelText: \"Tidak\",\n                      onConfirm: function onConfirm() {\n                        setfielddata2(function (prev) {\n                          return prev.filter(function (_, idxx) {\n                            return idxx !== idx;\n                          });\n                        });\n                        setnewdata(function (prev) {\n                          var temp = prev;\n                          temp.model_columns = temp.model_columns.filter(function (_, idxx) {\n                            return idxx !== fielddata.length + idx;\n                          });\n                          return temp;\n                        });\n\n                        if (defaultdata.model_columns.some(function (docdef) {\n                          return docdef.id === doc.id;\n                        })) {\n                          setnewdata(function (prev) {\n                            var temp = prev;\n                            temp.delete_column_ids.push(doc.id);\n                            var idxUpdateColumns = temp.update_columns.map(function (docmap) {\n                              return docmap.id;\n                            }).indexOf(doc.id);\n                            temp.update_columns.splice(idxUpdateColumns, 1);\n                            var idxtemp = defaultdata.model_columns.map(function (doctemp) {\n                              return doctemp.id;\n                            }).indexOf(doc.id);\n                            temp.model_columns.splice(idxtemp, 1);\n                            return temp;\n                          });\n                        } else {\n                          setnewdata(function (prev) {\n                            var temp = prev;\n                            var idxtemp = temp.add_columns.map(function (doctemp) {\n                              return doctemp.name;\n                            }).indexOf(doc.name);\n                            idxtemp !== -1 ? temp.add_columns.splice(idxtemp, 1) : null;\n                            return temp;\n                          });\n                        }\n\n                        setaddedfield(function (prev) {\n                          prev.splice(idx, 1);\n                          return prev;\n                        });\n                        setdisabledaddfield(false);\n                        setpointevent(\"\");\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                        children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                          style: {\n                            fontSize: \"1.25rem\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1930,\n                          columnNumber: 35\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1929,\n                        columnNumber: 33\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1867,\n                      columnNumber: 31\n                    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \" flex items-center mr-4\",\n                      children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                        checked: currentfield.required,\n                        style: {\n                          marginRight: \"0.5rem\"\n                        },\n                        onChange: function onChange(e) {\n                          setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                            required: e.target.checked\n                          }));\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1936,\n                        columnNumber: 33\n                      }, _this), \" \", \"Required\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1935,\n                      columnNumber: 31\n                    }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                      disabled: disabledtambah,\n                      type: \"primary\",\n                      onClick: function onClick() {\n                        if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n                          setidxdropdowntrigger(idx);\n                          setvaluedropdowntrigger(function (prev) {\n                            return !prev;\n                          });\n                        }\n\n                        setconcataddcolumnsidx(idx);\n                        setconcataddcolumnsvalue(doc);\n                        setconcataddcolumnstrigger(function (prev) {\n                          return !prev;\n                        });\n                        var temp = fielddata2;\n                        temp[idx] = currentfield;\n                        setfielddata2(temp);\n                        setaddedfieldidx(idx);\n                        setaddedfieldtrigger(function (prev) {\n                          return !prev;\n                        });\n                        setconcatfieldtrigger(function (prev) {\n                          return !prev;\n                        });\n                        setdisabledaddfield(false);\n                        setpointevent(\"\");\n                      },\n                      children: \"Tambah\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1948,\n                      columnNumber: 31\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1866,\n                    columnNumber: 29\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1505,\n                  columnNumber: 27\n                }, _this)\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1501,\n                columnNumber: 25\n              }, _this)\n            }, void 0, false);\n          })\n        }, void 0, false), fielddata.map(function (doc, idx) {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: addedfield1[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: function onClick() {\n                var temp = _toConsumableArray(addedfield1);\n\n                temp[idx] = false;\n\n                for (var i = 0; i < temp.length; i++) {\n                  if (i !== idx) {\n                    temp[i] = true;\n                  }\n                }\n\n                setaddedfield1(temp);\n                setcurrentfield(fielddata[idx]);\n\n                if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                  setcurrentdropdown2(doc[\"default\"].opsi);\n                  setcurrentcheckeddropdown2(doc[\"default\"][\"default\"]);\n                }\n\n                if (fielddata[idx].data_type !== \"dropdown\" || fielddata[idx].data_type !== \"checkbox\") {\n                  setcd2(doc[\"default\"].opsi);\n\n                  if (fielddata[idx].name !== \"\" && fielddata[idx].data_type !== \"\") {\n                    setdisabledtambah(false);\n                  } else {\n                    setdisabledtambah(true);\n                  }\n                } else {\n                  if (doc[\"default\"].opsi.some(function (docopsi) {\n                    return docopsi === \"\";\n                  })) {\n                    setdisabledtambah(true);\n                  } else {\n                    setdisabledtambah(false);\n                  }\n                }\n\n                setdisabledaddfield(true);\n                setpointevent(\"pointer-events-none\");\n              },\n              className: \"jsx-618540288\" + \" \" + \"\".concat(pointevent, \" shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer\"),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-618540288\" + \" \" + \"font-semibold mb-2\",\n                children: [doc.name, fielddata[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-618540288\" + \" \" + \"judulField\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2037,\n                  columnNumber: 25\n                }, _this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-618540288\" + \" \" + \"text-gray-400 text-sm\",\n                  children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && \" Text\", \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2039,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2034,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-618540288\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"paragraph\" || doc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex flex-col w-full\",\n                    children: doc[\"default\"].opsi.map(function (dok, idk) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-618540288\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                          disabled: true,\n                          checked: doc[\"default\"][\"default\"] === idk ? true : false,\n                          style: {\n                            marginRight: \"0.5rem\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2062,\n                          columnNumber: 37\n                        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2071,\n                          columnNumber: 37\n                        }, _this)]\n                      }, idk, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2058,\n                        columnNumber: 35\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2055,\n                    columnNumber: 29\n                  }, _this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex flex-col w-full\",\n                    children: doc[\"default\"].opsi.map(function (dok, idk) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-618540288\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                          disabled: true,\n                          checked: doc[\"default\"][\"default\"].indexOf(idk) !== -1 ? true : false,\n                          style: {\n                            marginRight: \"0.5rem\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2085,\n                          columnNumber: 37\n                        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2094,\n                          columnNumber: 37\n                        }, _this)]\n                      }, idk, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2081,\n                        columnNumber: 35\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2078,\n                    columnNumber: 29\n                  }, _this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex justify-between w-full px-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                      children: doc[\"default\"]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2102,\n                      columnNumber: 31\n                    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-618540288\",\n                      children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2104,\n                        columnNumber: 33\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2103,\n                      columnNumber: 31\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2101,\n                    columnNumber: 29\n                  }, _this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex h-20\",\n                    children: doc[\"default\"]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2109,\n                    columnNumber: 29\n                  }, _this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                  children: doc[\"default\"]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2113,\n                  columnNumber: 25\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2048,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                id: \"618540288\",\n                children: \".judulField.jsx-618540288::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFva0V1QixBQUdxRSxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuICAgICAgICBjb25zdCBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlciA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc29sZS5sb2cobGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIpO1xuXG4gICAgICAgIC8qKiBTZXQgbmV3IGluc2VydGVkIG1hbnVmYWN0dXJlciBhcyBkZWZhdWx0IHNlbGVjdGVkIG9wdGlvbiBpbiB0aGUgXCJNYW51ZmFjdHVyZXJcIiBkcm9wZG93biAqL1xuICAgICAgICBzZXRtYW51ZmRhdGEoZGF0YSk7XG4gICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+ICh7Li4ucHJldiwgbWFudWZhY3R1cmVyX2lkOiBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZCB9KSlcbiAgICAgIH0pO1xuICB9LCBbdHJpZ2dlcm1hbnVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7bW9kZWxpZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9tb2RlbF9wYXJ0c1xuICAgICAgICBjb25zdCByZWN1cnNpdmVQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgIHZhciB0ZW1wMTEgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZW1wMSA9IHt9O1xuICAgICAgICAgICAgdGVtcDEgPSBpdGVtW2ldLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZW1wMTEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW1baV0sXG4gICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAxLFxuICAgICAgICAgICAgICBtb2RlbF9wYXJ0czpcbiAgICAgICAgICAgICAgICBpdGVtW2ldLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gcmVjdXJzaXZlUGFydE1vZGVsKGl0ZW1baV0ubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0ZW1wMTE7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHlvID0gcmVjdXJzaXZlUGFydE1vZGVsKHJlczIuZGF0YS5tb2RlbF9wYXJ0cyk7XG4gICAgICAgIGNvbnN0IHRlbXAyID0ge1xuICAgICAgICAgIC4uLnJlczIuZGF0YSxcbiAgICAgICAgICBhc3NldF9pZDogcmVzMi5kYXRhLmFzc2V0LmNvZGUsXG4gICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcCxcbiAgICAgICAgICBhZGRfY29sdW1uczogW10sXG4gICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0bmV3ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGFzc2V0KHRlbXApO1xuICAgICAgICBzZXRkZWZhdWx0bW9kZWwodGVtcDIpO1xuICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoeW8pO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRhZGRlZGZpZWxkKGFycik7XG4gICAgICAgIHNldGFzc2V0dHlwZWNvZGUocmVzMi5kYXRhLmFzc2V0X2lkKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwobW9kZWx0cmlnZ2VyKTtcbiAgICAgICAgbW9kZWx0cmlnZ2VyICE9PSBmYWxzZSA/IHNldGVkaXRwYXJ0KHRydWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICB9LCBbbW9kZWx0cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMSAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIxXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHtcbiAgICAgIC4uLm5ld2RhdGEsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEyLmNvbmNhdChmaWVsZGRhdGEpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHggIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZWFzc2V0LnNvbWUoXG4gICAgICAgICAgKGRvY3NvbWUpID0+IGRvY3NvbWUuaWQgPT09IGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZFxuICAgICAgICApIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2ZpZWxkZGF0YTIubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHgxICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjb25jYXRhZGRjb2x1bW5zaWR4MSA+IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoIC0gMSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlMS5pZCA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICBjaGFuZ2Vhc3NldCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtmaWVsZGRhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtjb25jYXRhZGRjb2x1bW5zaWR4MV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHhdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDEgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4MV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4MV0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgzICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDNdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4M10gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyM10pO1xuXG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMyAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyM11bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMiAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhLmNvbmNhdChmaWVsZGRhdGFhMiksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgyICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDJdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHRlbXAgPSBbXTtcbiAgICBpZiAoY29uY2F0cGFydHZhbHVlICE9PSAtMSkge1xuICAgICAgaWYgKGNvbmNhdHBhcnR2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX3BhcnRzOiBbXSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmNhdHBhcnR2YWx1ZS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgdmFyIGlkeHRlbXAgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICBpZiAoaWR4dGVtcCAhPT0gLTEgJiYgdGVtcFtpZHh0ZW1wXVtcImlkXCJdID09PSBkb2MuaWQpIHtcbiAgICAgICAgICAgIHZhciBpZHhvZiA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgdGVtcFtpZHhvZl0gPSB7XG4gICAgICAgICAgICAgIC4uLnRlbXBbaWR4b2ZdLFxuICAgICAgICAgICAgICBxdWFudGl0eTogdGVtcFtpZHhvZl0ucXVhbnRpdHkgKyBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaWR4dGVtcCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRlbXAucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYWRkX21vZGVsczogdGVtcCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRwYXJ0dHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMi5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkaWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QyKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RwYXJ0aWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMnBhcnQuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZHBhcnRpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RwYXJ0aWR4KSk7XG4gICAgfVxuICB9LCBbY2RwYXJ0dHJpZ2dlcl0pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC0yIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggTW9kZWwgLSB7bmV3ZGF0YS5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKG5ld2RhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyKTsgY29uc29sZS5sb2coZGVmYXVsdGRhdGEpOyBjb25zb2xlLmxvZyhkZWZhdWx0YXNzZXQpIH19Ki8gdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybS5zdWJtaXR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+SW5mb3JtYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluPjwvU3Bpbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWx9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bmV3ZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCIgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb25zdW1hYmxlOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLmlzX2NvbnN1bWFibGV9XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIE1vZGVsIENvbnN1bWFibGUgZGVuZ2FuIHNhdHVhbiBqdW1sYWhcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtsb2FkaW5nc3BlYyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGEyLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZmllbGRkYXRhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhMltpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggIT09IGZpZWxkZGF0YS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4VXBkYXRlQ29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhVcGRhdGVDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQxW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQxXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihpZGspICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YVtpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhMi5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtuZXdkYXRhLmlzX2NvbnN1bWFibGUgPT09IGZhbHNlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBtYi04IGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Lb25maWd1cmFzaSBQYXJ0IE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcGFuZWwke2lkeH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jLm1vZGVsX2NoaWxkLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTJcIj57ZG9jLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJNb2RlbCB0aWRhayBtZW1pbGlraSBwYXJ0IG1vZGVsIVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fT48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIE1vZGVsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRhcmkgTW9kZWwgUGFydCAke25ld2RhdGEubmFtZX0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0ZW1wID0gbW9kZWxwYXJ0ZmllbGRkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMikgPT4gZG9jMi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnNwbGljZShpZHhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLmluZGV4T2YoZG9jLmlkKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJlZGAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NldCBUeXBle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxhc3NldHR5cGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYmctZ3JheS0yMDAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gaC0xMiBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMsIGlkeG1jKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBteS1hdXRvIHB4LTIgcHktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctd2hpdGUgYm9yZGVyIHctMy8xMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS0xMDAgcm91bmRlZCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjAgcm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfcGFydHMubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lIHN0eWxlPXt7IG1hcmdpblRvcDogYDFyZW1gIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ2hpbGRQYXJ0TW9kZWwoZG9jLm1vZGVsX3BhcnRzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZWRpdHBhcnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbXktMyBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtNSB0ZXh0LWxnIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRpZG1vZGVsfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRpZG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ3BhcnQgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0TW9kZWxzP3Jvd3M9MTAmbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bW9kZWxkYXRhKFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBhdGF1IGNhcmkgbmFtYSBtb2R1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Qb3B1cFNjcm9sbD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsVG9wICsgZXZlbnQudGFyZ2V0Lm9mZnNldEhlaWdodCA9PT0gZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2V0cGFnZShwcmV2ID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9wYWdlPSR7cGFnZX0mcm93cz0xMGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzMiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY3JvbGxUbygwLCBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXMyLmRhdGEudG8gPj0gcmVzMi5kYXRhLnRvdGFsID8gc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhXSkgOiBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGEsIDxTcGluIHNpemU9XCJzbWFsbFwiIC8+XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MuaWR9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2dldG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7Y3VycmVudGlkbW9kZWx9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX2NvbHVtbnNcIl0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxwYXJ0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5tb2RlbF9wYXJ0cy5tYXAoKGRvYzIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXAzID0gZG9jMi5tb2RlbF9jb2x1bW5zLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYzMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBtYXAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX3BhcnRzXCJdID0gbW9kZWxwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJpZFwiXSA9IHJlczIuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJuYW1lXCJdID0gcmVzMi5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAxID0gWy4uLnRlbXAxLCB0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dmFsdWUocmVzMi5kYXRhLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHRyaWdnZXIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhMiA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzMpID0+IGRvYzMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGlkbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGRhdGEyID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudGlkbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZHhkYXRhMiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubWFwKChkb2MxKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jMS5pZCA9PT0gY3VycmVudGlkbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMS5xdWFudGl0eSA9IGRvYzEucXVhbnRpdHkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICArIFRhbWJhaCBQYXJ0IE1vZGVsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTW9kZWw8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtMi5zdWJtaXR9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZW1vZGVsfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjcmVhdGVtb2RlbH1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBtYi04XCI+XG4gICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybTJ9XG4gICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MigwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YTIucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdzcGVjMiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj4gOiBudWxsfSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj4oe2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgPyBcIlNpbmdsZSBUZXh0Ym94XCIgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTcgZmxleCBqdXN0aWZ5LWNlbnRlciBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXSA9IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBkZWZhdWx0VmFsdWU9e2RvY2N9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlciBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXS5wdXNoKGlkeHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IHtkb2NjfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXIgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBkYXRlU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgIHtsb2FkaW5nc3BlYzIgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkM1tpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDModGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jeHgsIGlkeHgpID0+IGRvY3h4LmlkICE9PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZmllbGRkYXRhYTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDJbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQyXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhYS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGQyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTWFudWZhY3R1cmVyPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkbWFudWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWFudWZhY3R1cmVyfVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdtYW51Zn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbWFudWZ9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIE1hbnVmYWN0dXJlciA8c3BhbiBjbGFzc05hbWU9XCJuYW1hbWFudVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YW1hbnVmLm5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTmFtYSBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZG1hbnVmKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRhdGFtYW51Zih7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYW1hbnU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBtb2RlbGlkID0gcGFyYW1zLm1vZGVsSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbiA9IGF3YWl0IHJlc291cmNlcy5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbjtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjgyXCIsXG4gICAgICBtb2RlbGlkLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsc1VwZGF0ZTI7XG4iXX0= */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n              }, void 0, false, void 0, _this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1988,\n              columnNumber: 19\n            }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(_Form, {\n                layout: \"vertical\",\n                initialValues: currentfield,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"name\",\n                    label: \"Nama Spesifikasi\",\n                    rules: [{\n                      required: true,\n                      message: \"Nama Spesifikasi wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Input, {\n                      required: true,\n                      name: \"name\",\n                      onChange: function onChange(e) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          name: e.target.value\n                        }));\n\n                        if (e.target.value === \"\") {\n                          setdisabledtambah(true);\n                        } else if (e.target.value !== \"\" && currentfield.data_type !== \"\" && currentdropdown2.every(function (doca, idxa) {\n                          return doca !== \"\";\n                        })) {\n                          setdisabledtambah(false);\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2142,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2132,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"data_type\",\n                    label: \"Tipe Field\",\n                    rules: [{\n                      required: true,\n                      message: \"Tipe Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Select, {\n                      placeholder: \"Pilih Tipe Field\",\n                      onChange: function onChange(value) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          data_type: value\n                        }));\n\n                        if (value === \"dropdown\" || value === \"checkbox\") {\n                          if (currentdropdown2.every(function (doca, idxa) {\n                            return doca !== \"\";\n                          })) {\n                            setdisabledtambah(false);\n                          } else {\n                            setdisabledtambah(true);\n                          }\n                        } else {\n                          setdisabledtambah(false);\n                        }\n\n                        if (value === \"dropdown\") {\n                          setcurrentcheckeddropdown2(\"\");\n                          setcurrentdropdown2([\"\", \"\"]);\n                          setcd2([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n\n                        if (value === \"checkbox\") {\n                          setcurrentcheckeddropdown2([]);\n                          setcurrentdropdown2([\"\", \"\"]);\n                          setcd2([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n                      },\n                      name: \"data_type\",\n                      children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"dropdown\",\n                        children: \"Dropdown\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2212,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"number\",\n                        children: \"Number\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2215,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"paragraph\",\n                        children: \"Paragraph Text\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2218,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"checkbox\",\n                        children: \"Checkbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2221,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"single\",\n                        children: \"Single Textbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2224,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"date\",\n                        children: \"Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2227,\n                        columnNumber: 29\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2174,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2164,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2131,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"default\",\n                  label: \"Default\",\n                  children: [currentfield.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2234,\n                      columnNumber: 29\n                    }, _this), currentdropdown2.map(function (doc, idxx) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            checked: currentcheckeddropdown2 === idxx ? true : false,\n                            onChange: function onChange(e) {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdown2(idxx);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2241,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2240,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: \"0.5rem\"\n                            },\n                            defaultValue: doc,\n                            placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                            onChange: function onChange(e) {\n                              setcurrentdropdown2(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdown2.every(function (doca, idxa) {\n                                return doca !== \"\";\n                              }) && currentfield.name !== \"\") {\n                                setdisabledtambah(false);\n                              } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                                setdisabledtambah(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2255,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2254,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: function onClick() {\n                            setcurrentdropdown2([]);\n                            setcdtrigger(function (prev) {\n                              return !prev;\n                            });\n                            setcdidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2295,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2287,\n                          columnNumber: 33\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2239,\n                        columnNumber: 31\n                      }, _this);\n                    }), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: function onClick() {\n                          setcurrentdropdown2([].concat(_toConsumableArray(currentdropdown2), [\"\"]));\n                          setcd2([].concat(_toConsumableArray(cd2), [\"\"]));\n                          setdisabledtambah(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2300,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2299,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2233,\n                    columnNumber: 27\n                  }, _this) : null, currentfield.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2317,\n                      columnNumber: 29\n                    }, _this), currentdropdown2.map(function (doc, idxx) {\n                      var idxchecked = currentcheckeddropdown2.includes(idxx);\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            defaultChecked: idxchecked,\n                            onChange: function onChange(e) {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdown2(function (prev) {\n                                  var temp = prev;\n                                  temp.push(idxx);\n                                  return temp;\n                                });\n                              } else {\n                                setcurrentcheckeddropdown2(function (prev) {\n                                  var temp = prev;\n                                  var index = temp.indexOf(idxx);\n                                  temp.splice(index, 1);\n                                  return temp;\n                                });\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2327,\n                            columnNumber: 37\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2326,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: \"0.5rem\"\n                            },\n                            defaultValue: doc,\n                            placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                            onChange: function onChange(e) {\n                              setcurrentdropdown2(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdown2.every(function (doca, idxa) {\n                                return doca !== \"\";\n                              }) && currentfield.name !== \"\") {\n                                setdisabledtambah(false);\n                              } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                                setdisabledtambah(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2348,\n                            columnNumber: 37\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2347,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: function onClick() {\n                            setcurrentdropdown2([]);\n                            setcdtrigger(function (prev) {\n                              return !prev;\n                            });\n                            setcdidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2390,\n                            columnNumber: 37\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2382,\n                          columnNumber: 35\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2325,\n                        columnNumber: 33\n                      }, _this);\n                    }), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: function onClick() {\n                          setcurrentdropdown2([].concat(_toConsumableArray(currentdropdown2), [\"\"]));\n                          setcd2([].concat(_toConsumableArray(cd2), [\"\"]));\n                          setdisabledtambah(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2396,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2395,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2316,\n                    columnNumber: 27\n                  }, _this) : null, currentfield.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                    style: {\n                      width: \"30%\"\n                    },\n                    defaultValue: fielddata[idx][\"default\"],\n                    placeholder: \"Masukkan default \".concat(currentfield.name),\n                    onChange: function onChange(value) {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        \"default\": \"\".concat(value)\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2412,\n                    columnNumber: 27\n                  }, _this), currentfield.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                    rows: 4,\n                    placeholder: \"Masukkan default \".concat(currentfield.name),\n                    defaultValue: fielddata[idx][\"default\"],\n                    onChange: function onChange(e) {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        \"default\": e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2426,\n                    columnNumber: 27\n                  }, _this), currentfield.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: \"Masukkan default \".concat(currentfield.name),\n                    defaultValue: fielddata[idx][\"default\"],\n                    onChange: function onChange(e) {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        \"default\": e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2439,\n                    columnNumber: 27\n                  }, _this), currentfield.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: \"Masukkan default \".concat(currentfield.name),\n                    defaultValue: fielddata[idx][\"default\"],\n                    onChange: function onChange(e) {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        \"default\": e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2451,\n                    columnNumber: 27\n                  }, _this), currentfield.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                    defaultValue: moment(fielddata[idx][\"default\"]),\n                    style: {\n                      width: \"30%\"\n                    },\n                    placeholder: \"Masukkan default \".concat(currentfield.name),\n                    onChange: function onChange(value, dateString) {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        \"default\": dateString\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2463,\n                    columnNumber: 27\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2231,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2476,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex mt-4 justify-end\",\n                  children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: \"Apakah anda yakin ingin menghapus field \".concat(doc.name === \"\" ? \"ini\" : doc.name, \"?\"),\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: function onConfirm() {\n                      setfielddata(function (prev) {\n                        return prev.filter(function (_, idxx) {\n                          return idxx !== idx;\n                        });\n                      });\n                      setnewdata(function (prev) {\n                        var temp = prev;\n                        temp.model_columns = temp.model_columns.filter(function (_, idxx) {\n                          return idxx !== fielddata2.length + idx;\n                        });\n                        return temp;\n                      });\n\n                      if (defaultdata.model_columns.some(function (docdef) {\n                        return docdef.id === doc.id;\n                      })) {\n                        setnewdata(function (prev) {\n                          var temp = prev;\n                          temp.delete_column_ids.push(doc.id);\n                          var idxtemp = defaultdata.model_columns.map(function (doctemp) {\n                            return doctemp.id;\n                          }).indexOf(doc.id);\n                          temp.model_columns.splice(idxtemp, 1);\n                          return temp;\n                        });\n                      } else {\n                        setnewdata(function (prev) {\n                          var temp = prev;\n                          var idxtemp = temp.add_columns.map(function (doctemp) {\n                            return doctemp.name;\n                          }).indexOf(doc.name);\n                          idxtemp !== -1 ? temp.add_columns.splice(idxtemp, 1) : null;\n                          return temp;\n                        });\n                      }\n\n                      setaddedfield1(function (prev) {\n                        prev.splice(idx, 1);\n                        return prev;\n                      });\n                      setdisabledaddfield(false);\n                      setpointevent(\"\");\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                      children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                        style: {\n                          fontSize: \"1.25rem\"\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2531,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2530,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2478,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \" flex items-center mr-4\",\n                    children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                      checked: currentfield.required,\n                      style: {\n                        marginRight: \"0.5rem\"\n                      },\n                      onChange: function onChange(e) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          required: e.target.checked\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2537,\n                      columnNumber: 27\n                    }, _this), \" \", \"Required\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2536,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                    disabled: disabledtambah,\n                    type: \"primary\",\n                    onClick: function onClick() {\n                      if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n                        setidxdropdowntrigger1(idx);\n                        setvaluedropdowntrigger1(function (prev) {\n                          return !prev;\n                        });\n                      }\n\n                      setconcataddcolumnsidx1(idx);\n                      setconcataddcolumnsvalue1(doc);\n                      setconcataddcolumnstrigger1(function (prev) {\n                        return !prev;\n                      });\n                      var temp = fielddata;\n                      temp[idx] = currentfield;\n                      setfielddata(temp);\n                      setaddedfieldidx1(idx);\n                      setaddedfieldtrigger1(function (prev) {\n                        return !prev;\n                      });\n                      setconcatfieldtrigger(function (prev) {\n                        return !prev;\n                      });\n                      setdisabledaddfield(false);\n                      setpointevent(\"\");\n                    },\n                    children: \"Tambah\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2549,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2477,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2130,\n                columnNumber: 21\n              }, _this)\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2126,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"dashed\",\n            disabled: disabledaddfield,\n            style: {\n              width: \"80%\",\n              height: \"4rem\"\n            },\n            onClick: onClickAddField,\n            children: \"+ Tambah Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2583,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2582,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1344,\n        columnNumber: 9\n      }, _this), newdata.is_consumable === false && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" mb-8 col-span-1 md:col-span-4 px-5 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Konfigurasi Part Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2596,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2595,\n          columnNumber: 13\n        }, _this), modelpartfielddata.length === 0 ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(_Collapse, {\n            accordion: true,\n            children: modelpartfielddata.map(function (doc, idx) {\n              return /*#__PURE__*/_jsxDEV(Panel, {\n                id: \"panel\".concat(idx),\n                header: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  className: \"jsx-2733278964\",\n                  children: doc.name // ?\n                  // <>\n                  //     {\n                  //         doc.model_child.length === 0 ?\n                  //             <div className=\"flex items-center w-6/12\">\n                  //                 <span className=\"mr-2\">{doc.name}</span>\n                  //                 <Tooltip placement=\"right\" title=\"Model tidak memiliki part model!\">\n                  //                     <ExclamationCircleOutlined style={{ color: `brown` }}></ExclamationCircleOutlined>\n                  //                 </Tooltip>\n                  //             </div>\n                  //             :\n                  //             doc.name\n                  //     }\n                  // </>\n                  // :\n                  // \"-\"\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2607,\n                  columnNumber: 27\n                }, _this),\n                extra: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2733278964\" + \" \" + \"absolute top-2 right-2\",\n                  children: /*#__PURE__*/_jsxDEV(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: \"Apakah anda yakin ingin menghapus Model \".concat(doc.name === \"\" ? \"ini\" : doc.name, \" dari Model Part \").concat(newdata.name, \"?\"),\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: function onConfirm() {\n                      // console.log(doc)\n                      setnewdata(function (prev) {\n                        var temp = prev;\n                        var idxtemp = modelpartfielddata.map(function (doctemp) {\n                          return doctemp.id;\n                        }).indexOf(doc.id);\n\n                        if (defaultdata.model_parts.map(function (docparts) {\n                          return docparts.id;\n                        }).includes(doc.id) === false && idxtemp !== -1) {\n                          var idxdata = temp.add_models.map(function (doc2) {\n                            return doc2.id;\n                          }).indexOf(doc.id);\n\n                          if (temp.add_models[idxdata].quantity > 1) {\n                            temp.add_models[idxdata].quantity -= 1;\n                          } else {\n                            temp.add_models.splice(idxdata, 1);\n                          }\n                        }\n\n                        if (defaultdata.model_parts.map(function (docparts) {\n                          return docparts.id;\n                        }).includes(doc.id) === true && idxtemp !== -1) {\n                          if (temp.delete_model_ids.indexOf(doc.id) === -1) {\n                            temp.delete_model_ids.push(doc.id);\n                          }\n                        }\n\n                        return temp;\n                      });\n                      setmodelpartfielddata(function (prev) {\n                        return prev.filter(function (_, idxx) {\n                          return idxx !== idx;\n                        });\n                      });\n                    },\n                    children: /*#__PURE__*/_jsxDEV(CloseCircleOutlined, {\n                      style: {\n                        color: \"red\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2680,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2631,\n                    columnNumber: 29\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2630,\n                  columnNumber: 27\n                }, _this),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2733278964\" + \" \" + \"flex flex-col p-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-2733278964\" + \" \" + \"flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      className: \"jsx-2733278964\" + \" \" + \"font-semibold mb-1\",\n                      children: [\"Asset Type\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"jsx-2733278964\" + \" \" + \"judulassettype\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2689,\n                        columnNumber: 31\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2687,\n                      columnNumber: 29\n                    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"rounded bg-gray-200 w-full flex items-center my-auto h-12 px-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-2733278964\" + \" \" + \"mb-0 text-sm\",\n                        children: doc.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2692,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2691,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2686,\n                    columnNumber: 27\n                  }, _this), doc.model_columns.map(function (docmc, idxmc) {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"flex flex-col mb-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        className: \"jsx-2733278964\" + \" \" + \"font-semibold mb-1\",\n                        children: [docmc.name, \" \", docmc.required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"jsx-2733278964\" + \" \" + \"judulsn\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2701,\n                          columnNumber: 37\n                        }, _this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"jsx-2733278964\" + \" \" + \"text-gray-400\",\n                          children: docmc.data_type ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: [\"(\", docmc.data_type.charAt(0).toUpperCase() + docmc.data_type.slice(1), \")\"]\n                          }, void 0, true) : \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2703,\n                          columnNumber: 35\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2698,\n                        columnNumber: 33\n                      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-2733278964\" + \" \" + \"w-full flex flex-col justify-center my-auto px-2 py-1\",\n                        children: docmc.data_type === \"dropdown\" || docmc.data_type === \"checkbox\" || docmc.data_type === \"paragraph\" || docmc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: [docmc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: docmc[\"default\"].opsi.map(function (docopsi, idxopsi) {\n                              return /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"jsx-2733278964\" + \" \" + \"rounded bg-white border w-3/12 flex items-center my-auto px-2 py-1 mb-1\",\n                                children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                                  disabled: true,\n                                  checked: idxopsi === docmc[\"default\"][\"default\"],\n                                  style: {\n                                    marginRight: \"0.5rem\"\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 2732,\n                                  columnNumber: 49\n                                }, _this), docopsi]\n                              }, idxopsi, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2728,\n                                columnNumber: 47\n                              }, _this);\n                            })\n                          }, void 0, false), docmc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: docmc[\"default\"].opsi.map(function (docopsi, idxopsi) {\n                              return /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"jsx-2733278964\" + \" \" + \"rounded w-full flex items-center my-auto px-2 py-1 mb-1\",\n                                children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                                  disabled: true,\n                                  checked: idxopsi === docmc[\"default\"][\"default\"],\n                                  style: {\n                                    marginRight: \"0.5rem\"\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 2756,\n                                  columnNumber: 49\n                                }, _this), docopsi]\n                              }, idxopsi, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2752,\n                                columnNumber: 47\n                              }, _this);\n                            })\n                          }, void 0, false), docmc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"jsx-2733278964\" + \" \" + \"flex w-full items-center justify-between bg-gray-100 rounded h-10 px-3\",\n                            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"jsx-2733278964\" + \" \" + \"mb-0\",\n                              children: docmc[\"default\"]\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2774,\n                              columnNumber: 43\n                            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"jsx-2733278964\",\n                              children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2778,\n                                columnNumber: 45\n                              }, _this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2777,\n                              columnNumber: 43\n                            }, _this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2773,\n                            columnNumber: 41\n                          }, _this), docmc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"jsx-2733278964\" + \" \" + \"flex h-20 rounded border bg-gray-100 w-full px-3\",\n                            children: docmc[\"default\"]\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2783,\n                            columnNumber: 41\n                          }, _this)]\n                        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-2733278964\" + \" \" + \"rounded border bg-gray-100 flex items-center w-full h-10 px-3\",\n                          children: docmc[\"default\"]\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2789,\n                          columnNumber: 37\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2718,\n                        columnNumber: 33\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2697,\n                      columnNumber: 31\n                    }, _this);\n                  }), doc.model_parts.length === 0 ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(_Timeline, {\n                      style: {\n                        marginTop: \"1rem\"\n                      },\n                      children: renderChildPartModel(doc.model_parts)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2799,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2685,\n                  columnNumber: 25\n                }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"2733278964\",\n                  children: \".judulassettype.jsx-2733278964::before{content:'*';color:red;}.judulsn.jsx-2733278964::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxdkYyQixBQUd5RSxBQUlBLFlBSEYsQUFJQSxVQUhkLEFBSUEiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuICAgICAgICBjb25zdCBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlciA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc29sZS5sb2cobGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIpO1xuXG4gICAgICAgIC8qKiBTZXQgbmV3IGluc2VydGVkIG1hbnVmYWN0dXJlciBhcyBkZWZhdWx0IHNlbGVjdGVkIG9wdGlvbiBpbiB0aGUgXCJNYW51ZmFjdHVyZXJcIiBkcm9wZG93biAqL1xuICAgICAgICBzZXRtYW51ZmRhdGEoZGF0YSk7XG4gICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+ICh7Li4ucHJldiwgbWFudWZhY3R1cmVyX2lkOiBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZCB9KSlcbiAgICAgIH0pO1xuICB9LCBbdHJpZ2dlcm1hbnVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7bW9kZWxpZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9tb2RlbF9wYXJ0c1xuICAgICAgICBjb25zdCByZWN1cnNpdmVQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgIHZhciB0ZW1wMTEgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZW1wMSA9IHt9O1xuICAgICAgICAgICAgdGVtcDEgPSBpdGVtW2ldLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZW1wMTEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW1baV0sXG4gICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAxLFxuICAgICAgICAgICAgICBtb2RlbF9wYXJ0czpcbiAgICAgICAgICAgICAgICBpdGVtW2ldLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gcmVjdXJzaXZlUGFydE1vZGVsKGl0ZW1baV0ubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0ZW1wMTE7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHlvID0gcmVjdXJzaXZlUGFydE1vZGVsKHJlczIuZGF0YS5tb2RlbF9wYXJ0cyk7XG4gICAgICAgIGNvbnN0IHRlbXAyID0ge1xuICAgICAgICAgIC4uLnJlczIuZGF0YSxcbiAgICAgICAgICBhc3NldF9pZDogcmVzMi5kYXRhLmFzc2V0LmNvZGUsXG4gICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcCxcbiAgICAgICAgICBhZGRfY29sdW1uczogW10sXG4gICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0bmV3ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGFzc2V0KHRlbXApO1xuICAgICAgICBzZXRkZWZhdWx0bW9kZWwodGVtcDIpO1xuICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoeW8pO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRhZGRlZGZpZWxkKGFycik7XG4gICAgICAgIHNldGFzc2V0dHlwZWNvZGUocmVzMi5kYXRhLmFzc2V0X2lkKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwobW9kZWx0cmlnZ2VyKTtcbiAgICAgICAgbW9kZWx0cmlnZ2VyICE9PSBmYWxzZSA/IHNldGVkaXRwYXJ0KHRydWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICB9LCBbbW9kZWx0cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMSAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIxXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHtcbiAgICAgIC4uLm5ld2RhdGEsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEyLmNvbmNhdChmaWVsZGRhdGEpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHggIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZWFzc2V0LnNvbWUoXG4gICAgICAgICAgKGRvY3NvbWUpID0+IGRvY3NvbWUuaWQgPT09IGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZFxuICAgICAgICApIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2ZpZWxkZGF0YTIubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHgxICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjb25jYXRhZGRjb2x1bW5zaWR4MSA+IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoIC0gMSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlMS5pZCA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICBjaGFuZ2Vhc3NldCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtmaWVsZGRhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtjb25jYXRhZGRjb2x1bW5zaWR4MV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHhdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDEgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4MV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4MV0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgzICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDNdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4M10gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyM10pO1xuXG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMyAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyM11bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMiAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhLmNvbmNhdChmaWVsZGRhdGFhMiksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgyICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDJdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHRlbXAgPSBbXTtcbiAgICBpZiAoY29uY2F0cGFydHZhbHVlICE9PSAtMSkge1xuICAgICAgaWYgKGNvbmNhdHBhcnR2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX3BhcnRzOiBbXSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmNhdHBhcnR2YWx1ZS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgdmFyIGlkeHRlbXAgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICBpZiAoaWR4dGVtcCAhPT0gLTEgJiYgdGVtcFtpZHh0ZW1wXVtcImlkXCJdID09PSBkb2MuaWQpIHtcbiAgICAgICAgICAgIHZhciBpZHhvZiA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgdGVtcFtpZHhvZl0gPSB7XG4gICAgICAgICAgICAgIC4uLnRlbXBbaWR4b2ZdLFxuICAgICAgICAgICAgICBxdWFudGl0eTogdGVtcFtpZHhvZl0ucXVhbnRpdHkgKyBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaWR4dGVtcCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRlbXAucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYWRkX21vZGVsczogdGVtcCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRwYXJ0dHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMi5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkaWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QyKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RwYXJ0aWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMnBhcnQuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZHBhcnRpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RwYXJ0aWR4KSk7XG4gICAgfVxuICB9LCBbY2RwYXJ0dHJpZ2dlcl0pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC0yIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggTW9kZWwgLSB7bmV3ZGF0YS5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKG5ld2RhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyKTsgY29uc29sZS5sb2coZGVmYXVsdGRhdGEpOyBjb25zb2xlLmxvZyhkZWZhdWx0YXNzZXQpIH19Ki8gdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybS5zdWJtaXR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+SW5mb3JtYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluPjwvU3Bpbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWx9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bmV3ZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCIgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb25zdW1hYmxlOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLmlzX2NvbnN1bWFibGV9XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIE1vZGVsIENvbnN1bWFibGUgZGVuZ2FuIHNhdHVhbiBqdW1sYWhcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtsb2FkaW5nc3BlYyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGEyLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZmllbGRkYXRhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhMltpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggIT09IGZpZWxkZGF0YS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4VXBkYXRlQ29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhVcGRhdGVDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQxW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQxXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihpZGspICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YVtpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhMi5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtuZXdkYXRhLmlzX2NvbnN1bWFibGUgPT09IGZhbHNlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBtYi04IGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Lb25maWd1cmFzaSBQYXJ0IE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcGFuZWwke2lkeH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jLm1vZGVsX2NoaWxkLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTJcIj57ZG9jLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJNb2RlbCB0aWRhayBtZW1pbGlraSBwYXJ0IG1vZGVsIVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fT48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIE1vZGVsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRhcmkgTW9kZWwgUGFydCAke25ld2RhdGEubmFtZX0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0ZW1wID0gbW9kZWxwYXJ0ZmllbGRkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMikgPT4gZG9jMi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnNwbGljZShpZHhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLmluZGV4T2YoZG9jLmlkKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJlZGAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NldCBUeXBle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxhc3NldHR5cGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYmctZ3JheS0yMDAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gaC0xMiBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMsIGlkeG1jKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBteS1hdXRvIHB4LTIgcHktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctd2hpdGUgYm9yZGVyIHctMy8xMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS0xMDAgcm91bmRlZCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjAgcm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfcGFydHMubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lIHN0eWxlPXt7IG1hcmdpblRvcDogYDFyZW1gIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ2hpbGRQYXJ0TW9kZWwoZG9jLm1vZGVsX3BhcnRzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZWRpdHBhcnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbXktMyBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtNSB0ZXh0LWxnIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRpZG1vZGVsfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRpZG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ3BhcnQgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0TW9kZWxzP3Jvd3M9MTAmbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bW9kZWxkYXRhKFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBhdGF1IGNhcmkgbmFtYSBtb2R1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Qb3B1cFNjcm9sbD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsVG9wICsgZXZlbnQudGFyZ2V0Lm9mZnNldEhlaWdodCA9PT0gZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2V0cGFnZShwcmV2ID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9wYWdlPSR7cGFnZX0mcm93cz0xMGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzMiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY3JvbGxUbygwLCBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXMyLmRhdGEudG8gPj0gcmVzMi5kYXRhLnRvdGFsID8gc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhXSkgOiBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGEsIDxTcGluIHNpemU9XCJzbWFsbFwiIC8+XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MuaWR9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2dldG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7Y3VycmVudGlkbW9kZWx9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX2NvbHVtbnNcIl0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxwYXJ0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5tb2RlbF9wYXJ0cy5tYXAoKGRvYzIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXAzID0gZG9jMi5tb2RlbF9jb2x1bW5zLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYzMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBtYXAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX3BhcnRzXCJdID0gbW9kZWxwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJpZFwiXSA9IHJlczIuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJuYW1lXCJdID0gcmVzMi5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAxID0gWy4uLnRlbXAxLCB0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dmFsdWUocmVzMi5kYXRhLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHRyaWdnZXIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhMiA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzMpID0+IGRvYzMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGlkbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGRhdGEyID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudGlkbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZHhkYXRhMiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubWFwKChkb2MxKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jMS5pZCA9PT0gY3VycmVudGlkbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMS5xdWFudGl0eSA9IGRvYzEucXVhbnRpdHkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICArIFRhbWJhaCBQYXJ0IE1vZGVsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTW9kZWw8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtMi5zdWJtaXR9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZW1vZGVsfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjcmVhdGVtb2RlbH1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBtYi04XCI+XG4gICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybTJ9XG4gICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MigwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YTIucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdzcGVjMiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj4gOiBudWxsfSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj4oe2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgPyBcIlNpbmdsZSBUZXh0Ym94XCIgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTcgZmxleCBqdXN0aWZ5LWNlbnRlciBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXSA9IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBkZWZhdWx0VmFsdWU9e2RvY2N9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlciBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXS5wdXNoKGlkeHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IHtkb2NjfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXIgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBkYXRlU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgIHtsb2FkaW5nc3BlYzIgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkM1tpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDModGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jeHgsIGlkeHgpID0+IGRvY3h4LmlkICE9PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZmllbGRkYXRhYTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDJbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQyXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhYS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGQyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTWFudWZhY3R1cmVyPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkbWFudWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWFudWZhY3R1cmVyfVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdtYW51Zn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbWFudWZ9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIE1hbnVmYWN0dXJlciA8c3BhbiBjbGFzc05hbWU9XCJuYW1hbWFudVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YW1hbnVmLm5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTmFtYSBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZG1hbnVmKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRhdGFtYW51Zih7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYW1hbnU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBtb2RlbGlkID0gcGFyYW1zLm1vZGVsSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbiA9IGF3YWl0IHJlc291cmNlcy5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbjtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjgyXCIsXG4gICAgICBtb2RlbGlkLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsc1VwZGF0ZTI7XG4iXX0= */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n                }, void 0, false, void 0, _this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2603,\n                columnNumber: 23\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2600,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: editpart ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shadow-md border p-8 mx-3 md:mx-8 my-3 flex flex-col rounded-md relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-2 right-5 text-lg cursor-pointer\",\n              onClick: function onClick() {\n                seteditpart(false);\n              },\n              children: \"x\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2826,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_Form, {\n              layout: \"vertical\",\n              initialValues: currentidmodel,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \" w-11/12 mr-3\",\n                  children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"id\",\n                    label: \"Nama Model\",\n                    rules: [{\n                      required: true,\n                      message: \"Nama Model wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Select, {\n                      defaultValue: currentidmodel,\n                      notFoundContent: fetchingpart ? /*#__PURE__*/_jsxDEV(_Spin, {\n                        size: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2850,\n                        columnNumber: 46\n                      }, _this) : null,\n                      onSearch: function onSearch(value) {\n                        setfetchingpart(true);\n                        fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModels?rows=10&name=\").concat(value !== \"\" ? value : \"\"), {\n                          method: \"GET\",\n                          headers: {\n                            Authorization: JSON.parse(initProps)\n                          }\n                        }).then(function (res) {\n                          return res.json();\n                        }).then(function (res2) {\n                          res2.data.length === 0 ? setmodeldata([]) : setmodeldata(res2.data.data);\n                          setfetchingpart(false);\n                        });\n                      },\n                      showSearch: true,\n                      optionFilterProp: \"children\",\n                      placeholder: \"Masukkan atau cari nama modul\",\n                      onChange: function onChange(value) {\n                        setcurrentidmodel(value);\n                      },\n                      name: \"id\",\n                      filterOption: function filterOption(input, opt) {\n                        return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n                      } // onPopupScroll={(event) => {\n                      //     if (event.target.scrollTop + event.target.offsetHeight === event.target.scrollHeight) {\n                      //         setpage(prev => prev + 1)\n                      //         fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?page=${page}&rows=10`, {\n                      //             method: `GET`,\n                      //             headers: {\n                      //                 'Authorization': JSON.parse(initProps),\n                      //             },\n                      //         })\n                      //             .then(res => res.json())\n                      //             .then(res2 => {\n                      //                 event.target.scrollTo(0, event.target.scrollHeight)\n                      //                 res2.data.to >= res2.data.total ? setmodeldata([...modeldata, res2.data.data]) : setmodeldata([...modeldata, res2.data.data, <Spin size=\"small\" />])\n                      //             })\n                      //     }\n                      // }}\n                      ,\n                      children: modeldata.map(function (doc, idx) {\n                        return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: doc.id,\n                          children: doc.name\n                        }, doc.id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2906,\n                          columnNumber: 33\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2847,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2837,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2836,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-1/12 flex pt-2 my-auto items-center cursor-pointer\",\n                  onClick: function onClick() {\n                    setmodalcreatemodel(true);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(PlusSquareTwoTone, {\n                    style: {\n                      fontSize: \"1.5rem\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2920,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2914,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2835,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2923,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex mt-4 justify-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                  onClick: function onClick() {\n                    seteditpart(false);\n                    setcurrentidmodel(\"\");\n                  },\n                  children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                    style: {\n                      fontSize: \"1.25rem\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2932,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2925,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                  loading: loadinggetmodel,\n                  type: \"primary\",\n                  onClick: function onClick() {\n                    seteditpart(false);\n                    setloadinggetmodel(true);\n                    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModel?id=\").concat(currentidmodel), {\n                      method: \"GET\",\n                      headers: {\n                        Authorization: JSON.parse(initProps)\n                      }\n                    }).then(function (res) {\n                      return res.json();\n                    }).then(function (res2) {\n                      setmodelpartfielddata(function (prev) {\n                        var temp1 = prev;\n                        var t = {};\n\n                        for (var prop in res2.data) {\n                          if (prop === \"model_columns\") {\n                            t[\"model_columns\"] = res2.data[prop].map(function (doc, idx) {\n                              if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                                return _objectSpread(_objectSpread({}, doc), {}, {\n                                  \"default\": JSON.parse(doc[\"default\"])\n                                });\n                              } else {\n                                return _objectSpread({}, doc);\n                              }\n                            });\n                          } else {\n                            var modelparts = res2.data.model_parts.map(function (doc2) {\n                              var map3 = doc2.model_columns.map(function (doc3) {\n                                if (doc3.data_type === \"dropdown\" || doc3.data_type === \"checkbox\") {\n                                  return _objectSpread(_objectSpread({}, doc3), {}, {\n                                    \"default\": JSON.parse(doc3[\"default\"])\n                                  });\n                                } else {\n                                  return _objectSpread({}, doc3);\n                                }\n                              });\n                              return _objectSpread(_objectSpread({}, doc2), {}, {\n                                model_columns: map3\n                              });\n                            });\n                            t[\"model_parts\"] = modelparts;\n                            t[\"id\"] = res2.data.id;\n                            t[\"name\"] = res2.data.name;\n                          }\n                        }\n\n                        temp1 = [].concat(_toConsumableArray(temp1), [t]);\n                        return temp1;\n                      }); // setconcatpartvalue(res2.data.model_parts)\n                      // setconcatparttrigger(prev => !prev)\n\n                      setnewdata(function (prev) {\n                        var temp = prev;\n                        var idxdata2 = temp.add_models.map(function (doc3) {\n                          return doc3.id;\n                        }).indexOf(currentidmodel);\n\n                        if (temp.add_models.length === 0 || idxdata2 === -1) {\n                          temp.add_models.push({\n                            id: currentidmodel,\n                            quantity: 1\n                          });\n                        } else if (idxdata2 !== -1) {\n                          temp.add_models.map(function (doc1) {\n                            if (doc1.id === currentidmodel) {\n                              doc1.quantity = doc1.quantity + 1;\n                            }\n                          });\n                        }\n\n                        return temp;\n                      });\n                      setloadinggetmodel(false);\n                      setcurrentidmodel(\"\");\n                    });\n                  },\n                  children: \"Tambah\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2936,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2924,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2834,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2825,\n            columnNumber: 17\n          }, _this) : null\n        }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"dashed\",\n            style: {\n              width: \"80%\",\n              height: \"4rem\"\n            },\n            onClick: function onClick() {\n              seteditpart(true);\n            },\n            children: \"+ Tambah Part Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3043,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3042,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2594,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1188,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Form Tambah Model\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3059,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(_Button, {\n            type: \"default\",\n            onClick: function onClick() {\n              setmodalcreatemodel(false);\n            },\n            style: {\n              marginRight: \"1rem\"\n            },\n            children: \"Batal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3061,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"primary\",\n            disabled: disabledaddfield2,\n            onClick: instanceForm2.submit,\n            loading: loadingcreatemodel,\n            children: \"Simpan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3070,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3060,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3058,\n        columnNumber: 11\n      }, _this),\n      visible: modalcreatemodel,\n      footer: null,\n      onCancel: function onCancel() {\n        setmodalcreatemodel(false);\n      },\n      width: 900,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shadow-md border p-8 flex flex-col rounded-md mb-8\",\n        children: /*#__PURE__*/_jsxDEV(_Form, {\n          form: instanceForm2,\n          layout: \"vertical\",\n          onFinish: handleCreateModelinModel,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"asset_id\",\n              label: \"Asset Type\",\n              rules: [{\n                required: true,\n                message: \"Asset Type wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                style: {\n                  marginRight: \"1rem\"\n                },\n                dropdownStyle: {\n                  maxHeight: 400,\n                  overflow: \"auto\"\n                },\n                treeData: assetdata,\n                placeholder: \"Pilih Asset Type\",\n                treeDefaultExpandAll: true,\n                onChange: function onChange(value, label, extra) {\n                  if (typeof value !== \"undefined\") {\n                    onClickSelectAsset2(extra.allCheckedNodes[0].node.props.id);\n                  } else {\n                    onClickSelectAsset2(0);\n                  }\n                },\n                allowClear: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3105,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3095,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"name\",\n              label: \"Nama Model\",\n              rules: [{\n                required: true,\n                message: \"Nama Model wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                name: \"name\",\n                onChange: function onChange(e) {\n                  setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                    name: e.target.value\n                  }));\n                },\n                allowClear: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3133,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3123,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3094,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"manufacturer_id\",\n            label: \"Manufacturer\",\n            rules: [{\n              required: true,\n              message: \"Manufacturer wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(_Select, {\n              placeholder: \"Pilih Manufacturer\",\n              onChange: function onChange(value) {\n                setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                  manufacturer_id: value\n                }));\n              },\n              name: \"manufacturer_id\",\n              children: manufdata.map(function (doc, idx) {\n                return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3161,\n                  columnNumber: 21\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3152,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3142,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"description\",\n            label: \"Deskripsi\",\n            children: /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n              rows: 4,\n              name: \"description\",\n              onChange: function onChange(e) {\n                setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                  description: e.target.value\n                }));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3169,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3168,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n              style: {\n                marginRight: \"0.5rem\"\n              },\n              onChange: function onChange(e) {\n                setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                  required_sn: e.target.checked\n                }));\n              },\n              checked: newdata2.required_sn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3178,\n              columnNumber: 15\n            }, _this), \" \", \"Serial Number wajib ada\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3177,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3089,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3088,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3191,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3190,\n          columnNumber: 11\n        }, _this), loadingspec2 ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3326,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: fielddataa.map(function (doc, idx) {\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: addedfield3[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: function onClick() {\n                  var temp = _toConsumableArray(addedfield3);\n\n                  temp[idx] = false;\n\n                  for (var i = 0; i < temp.length; i++) {\n                    if (i !== idx) {\n                      temp[i] = true;\n                    }\n                  }\n\n                  setaddedfield3(temp);\n                  setcurrentfield2(fielddataa[idx]);\n\n                  if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                    setcurrentdropdownn2(doc[\"default\"].opsi);\n                    setcd2part(doc[\"default\"].opsi);\n                    setcurrentcheckeddropdownn2(doc[\"default\"][\"default\"]);\n                  }\n\n                  if (fielddataa[idx].data_type !== \"dropdown\" || fielddataa[idx].data_type !== \"checkbox\") {\n                    if (fielddataa[idx].name !== \"\" && fielddataa[idx].data_type !== \"\") {\n                      setdisabledtambah2(false);\n                    } else {\n                      setdisabledtambah2(true);\n                    }\n                  } else {\n                    if (doc[\"default\"].opsi.some(function (docopsi) {\n                      return docopsi === \"\";\n                    })) {\n                      setdisabledtambah2(true);\n                    } else {\n                      setdisabledtambah2(false);\n                    }\n                  }\n\n                  setdisabledaddfield2(true);\n                  setpointevent2(\"pointer-events-none\");\n                },\n                className: \"jsx-2751146913\" + \" \" + \"\".concat(pointevent2, \" shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer\"),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2751146913\" + \" \" + \"font-semibold mb-2\",\n                  children: [doc.name, fielddataa[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2751146913\" + \" \" + \"judulField\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3382,\n                    columnNumber: 29\n                  }, _this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2751146913\" + \" \" + \"text-gray-400 text-sm\",\n                    children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && \" Text\", \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3384,\n                    columnNumber: 27\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3379,\n                  columnNumber: 25\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2751146913\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                  children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex flex-col w-full\",\n                      children: doc[\"default\"].opsi.map(function (dok, idk) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-2751146913\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3407,\n                            columnNumber: 41\n                          }, _this)\n                        }, idk, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3403,\n                          columnNumber: 39\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3400,\n                      columnNumber: 33\n                    }, _this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex flex-col w-full\",\n                      children: doc[\"default\"].opsi.map(function (dok, idk) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-2751146913\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3421,\n                            columnNumber: 41\n                          }, _this)\n                        }, idk, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3417,\n                          columnNumber: 39\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3414,\n                      columnNumber: 33\n                    }, _this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex justify-between w-full px-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                        children: doc[\"default\"]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3429,\n                        columnNumber: 35\n                      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-2751146913\",\n                        children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3431,\n                          columnNumber: 37\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3430,\n                        columnNumber: 35\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3428,\n                      columnNumber: 33\n                    }, _this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex h-20\",\n                      children: doc[\"default\"]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3436,\n                      columnNumber: 33\n                    }, _this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                    children: doc[\"default\"]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3440,\n                    columnNumber: 29\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3393,\n                  columnNumber: 25\n                }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"2751146913\",\n                  children: \".judulField.jsx-2751146913::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtM0cyQixBQUdpRSxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuICAgICAgICBjb25zdCBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlciA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc29sZS5sb2cobGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIpO1xuXG4gICAgICAgIC8qKiBTZXQgbmV3IGluc2VydGVkIG1hbnVmYWN0dXJlciBhcyBkZWZhdWx0IHNlbGVjdGVkIG9wdGlvbiBpbiB0aGUgXCJNYW51ZmFjdHVyZXJcIiBkcm9wZG93biAqL1xuICAgICAgICBzZXRtYW51ZmRhdGEoZGF0YSk7XG4gICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+ICh7Li4ucHJldiwgbWFudWZhY3R1cmVyX2lkOiBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZCB9KSlcbiAgICAgIH0pO1xuICB9LCBbdHJpZ2dlcm1hbnVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7bW9kZWxpZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9tb2RlbF9wYXJ0c1xuICAgICAgICBjb25zdCByZWN1cnNpdmVQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgIHZhciB0ZW1wMTEgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZW1wMSA9IHt9O1xuICAgICAgICAgICAgdGVtcDEgPSBpdGVtW2ldLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZW1wMTEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW1baV0sXG4gICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAxLFxuICAgICAgICAgICAgICBtb2RlbF9wYXJ0czpcbiAgICAgICAgICAgICAgICBpdGVtW2ldLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gcmVjdXJzaXZlUGFydE1vZGVsKGl0ZW1baV0ubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0ZW1wMTE7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHlvID0gcmVjdXJzaXZlUGFydE1vZGVsKHJlczIuZGF0YS5tb2RlbF9wYXJ0cyk7XG4gICAgICAgIGNvbnN0IHRlbXAyID0ge1xuICAgICAgICAgIC4uLnJlczIuZGF0YSxcbiAgICAgICAgICBhc3NldF9pZDogcmVzMi5kYXRhLmFzc2V0LmNvZGUsXG4gICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcCxcbiAgICAgICAgICBhZGRfY29sdW1uczogW10sXG4gICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0bmV3ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGFzc2V0KHRlbXApO1xuICAgICAgICBzZXRkZWZhdWx0bW9kZWwodGVtcDIpO1xuICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoeW8pO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRhZGRlZGZpZWxkKGFycik7XG4gICAgICAgIHNldGFzc2V0dHlwZWNvZGUocmVzMi5kYXRhLmFzc2V0X2lkKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwobW9kZWx0cmlnZ2VyKTtcbiAgICAgICAgbW9kZWx0cmlnZ2VyICE9PSBmYWxzZSA/IHNldGVkaXRwYXJ0KHRydWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICB9LCBbbW9kZWx0cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMSAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIxXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHtcbiAgICAgIC4uLm5ld2RhdGEsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEyLmNvbmNhdChmaWVsZGRhdGEpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHggIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZWFzc2V0LnNvbWUoXG4gICAgICAgICAgKGRvY3NvbWUpID0+IGRvY3NvbWUuaWQgPT09IGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZFxuICAgICAgICApIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2ZpZWxkZGF0YTIubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHgxICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjb25jYXRhZGRjb2x1bW5zaWR4MSA+IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoIC0gMSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlMS5pZCA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICBjaGFuZ2Vhc3NldCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtmaWVsZGRhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtjb25jYXRhZGRjb2x1bW5zaWR4MV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHhdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDEgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4MV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4MV0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgzICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDNdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4M10gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyM10pO1xuXG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMyAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyM11bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMiAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhLmNvbmNhdChmaWVsZGRhdGFhMiksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgyICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDJdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHRlbXAgPSBbXTtcbiAgICBpZiAoY29uY2F0cGFydHZhbHVlICE9PSAtMSkge1xuICAgICAgaWYgKGNvbmNhdHBhcnR2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX3BhcnRzOiBbXSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmNhdHBhcnR2YWx1ZS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgdmFyIGlkeHRlbXAgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICBpZiAoaWR4dGVtcCAhPT0gLTEgJiYgdGVtcFtpZHh0ZW1wXVtcImlkXCJdID09PSBkb2MuaWQpIHtcbiAgICAgICAgICAgIHZhciBpZHhvZiA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgdGVtcFtpZHhvZl0gPSB7XG4gICAgICAgICAgICAgIC4uLnRlbXBbaWR4b2ZdLFxuICAgICAgICAgICAgICBxdWFudGl0eTogdGVtcFtpZHhvZl0ucXVhbnRpdHkgKyBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaWR4dGVtcCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRlbXAucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYWRkX21vZGVsczogdGVtcCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRwYXJ0dHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMi5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkaWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QyKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RwYXJ0aWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMnBhcnQuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZHBhcnRpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RwYXJ0aWR4KSk7XG4gICAgfVxuICB9LCBbY2RwYXJ0dHJpZ2dlcl0pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC0yIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggTW9kZWwgLSB7bmV3ZGF0YS5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKG5ld2RhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyKTsgY29uc29sZS5sb2coZGVmYXVsdGRhdGEpOyBjb25zb2xlLmxvZyhkZWZhdWx0YXNzZXQpIH19Ki8gdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybS5zdWJtaXR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+SW5mb3JtYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluPjwvU3Bpbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWx9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bmV3ZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCIgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb25zdW1hYmxlOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLmlzX2NvbnN1bWFibGV9XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIE1vZGVsIENvbnN1bWFibGUgZGVuZ2FuIHNhdHVhbiBqdW1sYWhcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtsb2FkaW5nc3BlYyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGEyLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZmllbGRkYXRhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhMltpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggIT09IGZpZWxkZGF0YS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4VXBkYXRlQ29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhVcGRhdGVDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQxW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQxXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihpZGspICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YVtpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhMi5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtuZXdkYXRhLmlzX2NvbnN1bWFibGUgPT09IGZhbHNlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBtYi04IGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Lb25maWd1cmFzaSBQYXJ0IE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcGFuZWwke2lkeH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jLm1vZGVsX2NoaWxkLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTJcIj57ZG9jLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJNb2RlbCB0aWRhayBtZW1pbGlraSBwYXJ0IG1vZGVsIVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fT48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIE1vZGVsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRhcmkgTW9kZWwgUGFydCAke25ld2RhdGEubmFtZX0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0ZW1wID0gbW9kZWxwYXJ0ZmllbGRkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMikgPT4gZG9jMi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnNwbGljZShpZHhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLmluZGV4T2YoZG9jLmlkKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJlZGAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NldCBUeXBle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxhc3NldHR5cGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYmctZ3JheS0yMDAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gaC0xMiBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMsIGlkeG1jKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBteS1hdXRvIHB4LTIgcHktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctd2hpdGUgYm9yZGVyIHctMy8xMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS0xMDAgcm91bmRlZCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjAgcm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfcGFydHMubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lIHN0eWxlPXt7IG1hcmdpblRvcDogYDFyZW1gIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ2hpbGRQYXJ0TW9kZWwoZG9jLm1vZGVsX3BhcnRzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZWRpdHBhcnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbXktMyBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtNSB0ZXh0LWxnIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRpZG1vZGVsfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRpZG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ3BhcnQgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0TW9kZWxzP3Jvd3M9MTAmbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bW9kZWxkYXRhKFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBhdGF1IGNhcmkgbmFtYSBtb2R1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Qb3B1cFNjcm9sbD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsVG9wICsgZXZlbnQudGFyZ2V0Lm9mZnNldEhlaWdodCA9PT0gZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2V0cGFnZShwcmV2ID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9wYWdlPSR7cGFnZX0mcm93cz0xMGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzMiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY3JvbGxUbygwLCBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXMyLmRhdGEudG8gPj0gcmVzMi5kYXRhLnRvdGFsID8gc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhXSkgOiBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGEsIDxTcGluIHNpemU9XCJzbWFsbFwiIC8+XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MuaWR9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2dldG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7Y3VycmVudGlkbW9kZWx9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX2NvbHVtbnNcIl0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxwYXJ0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5tb2RlbF9wYXJ0cy5tYXAoKGRvYzIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXAzID0gZG9jMi5tb2RlbF9jb2x1bW5zLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYzMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBtYXAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX3BhcnRzXCJdID0gbW9kZWxwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJpZFwiXSA9IHJlczIuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJuYW1lXCJdID0gcmVzMi5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAxID0gWy4uLnRlbXAxLCB0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dmFsdWUocmVzMi5kYXRhLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHRyaWdnZXIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhMiA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzMpID0+IGRvYzMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGlkbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGRhdGEyID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudGlkbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZHhkYXRhMiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubWFwKChkb2MxKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jMS5pZCA9PT0gY3VycmVudGlkbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMS5xdWFudGl0eSA9IGRvYzEucXVhbnRpdHkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICArIFRhbWJhaCBQYXJ0IE1vZGVsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTW9kZWw8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtMi5zdWJtaXR9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZW1vZGVsfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjcmVhdGVtb2RlbH1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBtYi04XCI+XG4gICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybTJ9XG4gICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MigwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YTIucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdzcGVjMiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj4gOiBudWxsfSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj4oe2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgPyBcIlNpbmdsZSBUZXh0Ym94XCIgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTcgZmxleCBqdXN0aWZ5LWNlbnRlciBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXSA9IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBkZWZhdWx0VmFsdWU9e2RvY2N9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlciBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXS5wdXNoKGlkeHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IHtkb2NjfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXIgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBkYXRlU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgIHtsb2FkaW5nc3BlYzIgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkM1tpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDModGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jeHgsIGlkeHgpID0+IGRvY3h4LmlkICE9PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZmllbGRkYXRhYTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDJbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQyXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhYS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGQyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTWFudWZhY3R1cmVyPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkbWFudWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWFudWZhY3R1cmVyfVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdtYW51Zn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbWFudWZ9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIE1hbnVmYWN0dXJlciA8c3BhbiBjbGFzc05hbWU9XCJuYW1hbWFudVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YW1hbnVmLm5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTmFtYSBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZG1hbnVmKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRhdGFtYW51Zih7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYW1hbnU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBtb2RlbGlkID0gcGFyYW1zLm1vZGVsSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbiA9IGF3YWl0IHJlc291cmNlcy5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbjtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjgyXCIsXG4gICAgICBtb2RlbGlkLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsc1VwZGF0ZTI7XG4iXX0= */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n                }, void 0, false, void 0, _this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3333,\n                columnNumber: 23\n              }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n                children: /*#__PURE__*/_jsxDEV(_Form, {\n                  layout: \"vertical\",\n                  initialValues: currentfield2,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"name\",\n                      label: \"Nama Field\",\n                      rules: [{\n                        required: true,\n                        message: \"Nama Field wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Input, {\n                        required: true,\n                        name: \"name\",\n                        onChange: function onChange(e) {\n                          setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                            name: e.target.value\n                          }));\n\n                          if (e.target.value === \"\") {\n                            setdisabledtambah2(true);\n                          } else if (e.target.value !== \"\" && currentfield2.data_type !== \"\" && currentdropdownn2.every(function (doca, idxa) {\n                            return doca !== \"\";\n                          })) {\n                            setdisabledtambah2(false);\n                          }\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3469,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3459,\n                      columnNumber: 29\n                    }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"data_type\",\n                      label: \"Tipe Field\",\n                      rules: [{\n                        required: true,\n                        message: \"Tipe Field wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Select, {\n                        placeholder: \"Pilih Tipe Field\",\n                        onChange: function onChange(value) {\n                          setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                            data_type: value\n                          }));\n\n                          if (value === \"dropdown\" || value === \"checkbox\") {\n                            if (currentdropdownn2.every(function (doca, idxa) {\n                              return doca !== \"\";\n                            })) {\n                              setdisabledtambah2(false);\n                            } else {\n                              setdisabledtambah2(true);\n                            }\n                          } else {\n                            setdisabledtambah2(false);\n                          }\n\n                          if (value === \"dropdown\") {\n                            setcurrentcheckeddropdownn2(\"\");\n                            setcurrentdropdownn2([\"\", \"\"]);\n                            setcd2part([\"\", \"\"]);\n                            setdisabledtambah2(true);\n                          }\n\n                          if (value === \"checkbox\") {\n                            setcurrentcheckeddropdownn2([]);\n                            setcurrentdropdownn2([\"\", \"\"]);\n                            setcd2part([\"\", \"\"]);\n                            setdisabledtambah2(true);\n                          }\n                        },\n                        name: \"data_type\",\n                        children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"dropdown\",\n                          children: \"Dropdown\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3539,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"number\",\n                          children: \"Number\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3542,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"paragraph\",\n                          children: \"Paragraph Text\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3545,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"checkbox\",\n                          children: \"Checkbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3548,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"single\",\n                          children: \"Single Textbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3551,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"date\",\n                          children: \"Date\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3554,\n                          columnNumber: 33\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3501,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3491,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3458,\n                    columnNumber: 27\n                  }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"default\",\n                    label: \"Default\",\n                    children: [currentfield2.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3564,\n                        columnNumber: 33\n                      }, _this), currentdropdownn2.map(function (doc, idxx) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-7 flex items-center\",\n                            children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                              checked: currentcheckeddropdownn2 === idxx ? true : false,\n                              onChange: function onChange(e) {\n                                if (e.target.checked === true) {\n                                  setcurrentcheckeddropdownn2(idxx);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3571,\n                              columnNumber: 39\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3570,\n                            columnNumber: 37\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-10/12 mr-5\",\n                            children: /*#__PURE__*/_jsxDEV(_Input, {\n                              style: {\n                                marginRight: \"0.5rem\"\n                              },\n                              defaultValue: doc,\n                              placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                              onChange: function onChange(e) {\n                                setcurrentdropdownn2(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n                                setcd2part(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n\n                                if (e.target.value !== \"\" && currentdropdownn2.every(function (doca, idxa) {\n                                  return doca !== \"\";\n                                }) && currentfield2.name !== \"\") {\n                                  setdisabledtambah2(false);\n                                } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                                  setdisabledtambah2(true);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3585,\n                              columnNumber: 39\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3584,\n                            columnNumber: 37\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-1/12 flex justify-around\",\n                            onClick: function onClick() {\n                              setcurrentdropdownn2([]);\n                              setcdparttrigger(function (prev) {\n                                return !prev;\n                              });\n                              setcdpartidx(idxx);\n                            },\n                            children: /*#__PURE__*/_jsxDEV(_Button, {\n                              type: \"danger\",\n                              children: \"-\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3627,\n                              columnNumber: 39\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3619,\n                            columnNumber: 37\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3569,\n                          columnNumber: 35\n                        }, _this);\n                      }), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: function onClick() {\n                            setcurrentdropdownn2([].concat(_toConsumableArray(currentdropdownn2), [\"\"]));\n                            setcd2part([].concat(_toConsumableArray(cd2part), [\"\"]));\n                            setdisabledtambah2(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3632,\n                          columnNumber: 35\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3631,\n                        columnNumber: 33\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3563,\n                      columnNumber: 31\n                    }, _this) : null, currentfield2.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3650,\n                        columnNumber: 33\n                      }, _this), currentdropdownn2.map(function (doc, idxx) {\n                        var idxchecked = currentcheckeddropdownn2.includes(idxx);\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-7 flex items-center\",\n                            children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                              defaultChecked: idxchecked,\n                              onChange: function onChange(e) {\n                                if (e.target.checked === true) {\n                                  setcurrentcheckeddropdownn2(function (prev) {\n                                    var temp = prev;\n                                    temp.push(idxx);\n                                    return temp;\n                                  });\n                                } else {\n                                  setcurrentcheckeddropdownn2(function (prev) {\n                                    var temp = prev;\n                                    var index = temp.indexOf(idxx);\n                                    temp.splice(index, 1);\n                                    return temp;\n                                  });\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3660,\n                              columnNumber: 41\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3659,\n                            columnNumber: 39\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-10/12 mr-5\",\n                            children: /*#__PURE__*/_jsxDEV(_Input, {\n                              style: {\n                                marginRight: \"0.5rem\"\n                              },\n                              defaultValue: doc,\n                              placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                              onChange: function onChange(e) {\n                                setcurrentdropdownn2(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n                                setcd2part(function (prev) {\n                                  var temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n\n                                if (e.target.value !== \"\" && currentdropdownn2.every(function (doca, idxa) {\n                                  return doca !== \"\";\n                                }) && currentfield2.name !== \"\") {\n                                  setdisabledtambah2(false);\n                                } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                                  setdisabledtambah2(true);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3686,\n                              columnNumber: 41\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3685,\n                            columnNumber: 39\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-1/12 flex justify-around\",\n                            onClick: function onClick() {\n                              setcurrentdropdownn2([]);\n                              setcdparttrigger(function (prev) {\n                                return !prev;\n                              });\n                              setcdpartidx(idxx);\n                            },\n                            children: /*#__PURE__*/_jsxDEV(_Button, {\n                              type: \"danger\",\n                              children: \"-\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3728,\n                              columnNumber: 41\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3720,\n                            columnNumber: 39\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3658,\n                          columnNumber: 37\n                        }, _this);\n                      }), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: function onClick() {\n                            setcurrentdropdownn2([].concat(_toConsumableArray(currentdropdownn2), [\"\"]));\n                            setcd2part([].concat(_toConsumableArray(cd2part), [\"\"]));\n                            setdisabledtambah2(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3734,\n                          columnNumber: 35\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3733,\n                        columnNumber: 33\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3649,\n                      columnNumber: 31\n                    }, _this) : null, currentfield2.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                      style: {\n                        width: \"30%\"\n                      },\n                      defaultValue: fielddataa[idx][\"default\"],\n                      placeholder: \"Masukkan default \".concat(currentfield2.name),\n                      onChange: function onChange(value) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          \"default\": \"\".concat(value)\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3751,\n                      columnNumber: 31\n                    }, _this), currentfield2.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                      rows: 4,\n                      placeholder: \"Masukkan default \".concat(currentfield2.name),\n                      defaultValue: fielddataa[idx][\"default\"],\n                      onChange: function onChange(e) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          \"default\": e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3765,\n                      columnNumber: 31\n                    }, _this), currentfield2.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: \"Masukkan default \".concat(currentfield2.name),\n                      defaultValue: fielddataa[idx][\"default\"],\n                      onChange: function onChange(e) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          \"default\": e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3779,\n                      columnNumber: 31\n                    }, _this), currentfield2.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: \"Masukkan default \".concat(currentfield2.name),\n                      defaultValue: fielddataa[idx][\"default\"],\n                      onChange: function onChange(e) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          \"default\": e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3792,\n                      columnNumber: 31\n                    }, _this), currentfield2.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                      defaultValue: fielddataa[idx][\"default\"],\n                      style: {\n                        width: \"30%\"\n                      },\n                      placeholder: \"Masukkan default \".concat(currentfield2.name),\n                      onChange: function onChange(value, dateString) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          \"default\": dateString\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3805,\n                      columnNumber: 31\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3560,\n                    columnNumber: 27\n                  }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3818,\n                    columnNumber: 27\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex mt-4 justify-end\",\n                    children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                      placement: \"bottom\",\n                      title: \"Apakah anda yakin ingin menghapus field \".concat(doc.name === \"\" ? \"ini\" : doc.name, \"?\"),\n                      okText: \"Ya\",\n                      cancelText: \"Tidak\",\n                      onConfirm: function onConfirm() {\n                        setfielddataa(function (prev) {\n                          return prev.filter(function (_, idxx) {\n                            return idxx !== idx;\n                          });\n                        });\n                        setnewdata2(function (prev) {\n                          var temp = prev;\n                          temp.model_columns = temp.model_columns.filter(function (docxx, idxx) {\n                            return docxx.id !== doc.id;\n                          });\n                          return temp;\n                        });\n                        setaddedfield3(function (prev) {\n                          prev.splice(idx, 1);\n                          return prev;\n                        });\n                        setdisabledaddfield2(false);\n                        setpointevent2(\"\");\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                        children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                          style: {\n                            fontSize: \"1.25rem\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3848,\n                          columnNumber: 33\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3847,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3820,\n                      columnNumber: 29\n                    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \" flex items-center mr-4\",\n                      children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                        checked: currentfield2.required,\n                        style: {\n                          marginRight: \"0.5rem\"\n                        },\n                        onChange: function onChange(e) {\n                          setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                            required: e.target.checked\n                          }));\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3854,\n                        columnNumber: 31\n                      }, _this), \" \", \"Required\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3853,\n                      columnNumber: 29\n                    }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                      disabled: disabledtambah2,\n                      type: \"primary\",\n                      onClick: function onClick() {\n                        if (currentfield2.data_type === \"dropdown\" || currentfield2.data_type === \"checkbox\") {\n                          setidxdropdowntrigger3(idx);\n                          setvaluedropdowntrigger3(function (prev) {\n                            return !prev;\n                          });\n                        }\n\n                        var temp = fielddataa;\n                        temp[idx] = currentfield2;\n                        setfielddataa(temp);\n                        setaddedfieldidx3(idx);\n                        setaddedfieldtrigger3(function (prev) {\n                          return !prev;\n                        });\n                        setconcatfieldtrigger2(function (prev) {\n                          return !prev;\n                        });\n                        setdisabledaddfield2(false);\n                        setpointevent2(\"\");\n                      },\n                      children: \"Tambah\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3866,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3819,\n                    columnNumber: 27\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3457,\n                  columnNumber: 25\n                }, _this)\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3453,\n                columnNumber: 23\n              }, _this)\n            }, void 0, false);\n          })\n        }, void 0, false), fielddataa2.map(function (doc, idx) {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: addedfield2[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: function onClick() {\n                var temp = _toConsumableArray(addedfield2);\n\n                temp[idx] = false;\n\n                for (var i = 0; i < temp.length; i++) {\n                  if (i !== idx) {\n                    temp[i] = true;\n                  }\n                }\n\n                setaddedfield2(temp);\n                setcurrentfield2(fielddataa2[idx]);\n\n                if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                  setcurrentdropdownn2(doc[\"default\"].opsi);\n                  setcd2part(doc[\"default\"].opsi);\n                  setcurrentcheckeddropdownn2(doc[\"default\"][\"default\"]);\n                }\n\n                if (fielddataa2[idx].data_type !== \"dropdown\" || fielddataa2[idx].data_type !== \"checkbox\") {\n                  if (fielddataa2[idx].name !== \"\" && fielddataa2[idx].data_type !== \"\") {\n                    setdisabledtambah2(false);\n                  } else {\n                    setdisabledtambah2(true);\n                  }\n                } else {\n                  if (doc[\"default\"].opsi.some(function (docopsi) {\n                    return docopsi === \"\";\n                  })) {\n                    setdisabledtambah2(true);\n                  } else {\n                    setdisabledtambah2(false);\n                  }\n                }\n\n                setdisabledaddfield2(true);\n                setpointevent2(\"pointer-events-none\");\n              },\n              className: \"jsx-28588772\" + \" \" + \"\".concat(pointevent2, \" shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer\"),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-28588772\" + \" \" + \"font-semibold mb-2\",\n                children: [doc.name, fielddataa2[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"judulField\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3952,\n                  columnNumber: 25\n                }, _this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"text-gray-400 text-sm\",\n                  children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && \" Text\", \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3954,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3949,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-28588772\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"paragraph\" || doc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col w-full\",\n                    children: doc[\"default\"].opsi.map(function (dok, idk) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-28588772\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3977,\n                          columnNumber: 37\n                        }, _this)\n                      }, idk, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3973,\n                        columnNumber: 35\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3970,\n                    columnNumber: 29\n                  }, _this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col w-full\",\n                    children: doc[\"default\"].opsi.map(function (dok, idk) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-28588772\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3991,\n                          columnNumber: 37\n                        }, _this)\n                      }, idk, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3987,\n                        columnNumber: 35\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3984,\n                    columnNumber: 29\n                  }, _this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex justify-between w-full px-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                      children: doc[\"default\"]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3999,\n                      columnNumber: 31\n                    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-28588772\",\n                      children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4001,\n                        columnNumber: 33\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4000,\n                      columnNumber: 31\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3998,\n                    columnNumber: 29\n                  }, _this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex h-20\",\n                    children: doc[\"default\"]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4006,\n                    columnNumber: 29\n                  }, _this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                  children: doc[\"default\"]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4010,\n                  columnNumber: 25\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3963,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                id: \"28588772\",\n                children: \".judulField.jsx-28588772::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE2Nkh1QixBQUd5RSxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuICAgICAgICBjb25zdCBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlciA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc29sZS5sb2cobGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIpO1xuXG4gICAgICAgIC8qKiBTZXQgbmV3IGluc2VydGVkIG1hbnVmYWN0dXJlciBhcyBkZWZhdWx0IHNlbGVjdGVkIG9wdGlvbiBpbiB0aGUgXCJNYW51ZmFjdHVyZXJcIiBkcm9wZG93biAqL1xuICAgICAgICBzZXRtYW51ZmRhdGEoZGF0YSk7XG4gICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+ICh7Li4ucHJldiwgbWFudWZhY3R1cmVyX2lkOiBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZCB9KSlcbiAgICAgIH0pO1xuICB9LCBbdHJpZ2dlcm1hbnVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7bW9kZWxpZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9tb2RlbF9wYXJ0c1xuICAgICAgICBjb25zdCByZWN1cnNpdmVQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgIHZhciB0ZW1wMTEgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZW1wMSA9IHt9O1xuICAgICAgICAgICAgdGVtcDEgPSBpdGVtW2ldLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZW1wMTEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW1baV0sXG4gICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAxLFxuICAgICAgICAgICAgICBtb2RlbF9wYXJ0czpcbiAgICAgICAgICAgICAgICBpdGVtW2ldLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gcmVjdXJzaXZlUGFydE1vZGVsKGl0ZW1baV0ubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0ZW1wMTE7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHlvID0gcmVjdXJzaXZlUGFydE1vZGVsKHJlczIuZGF0YS5tb2RlbF9wYXJ0cyk7XG4gICAgICAgIGNvbnN0IHRlbXAyID0ge1xuICAgICAgICAgIC4uLnJlczIuZGF0YSxcbiAgICAgICAgICBhc3NldF9pZDogcmVzMi5kYXRhLmFzc2V0LmNvZGUsXG4gICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcCxcbiAgICAgICAgICBhZGRfY29sdW1uczogW10sXG4gICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0bmV3ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGFzc2V0KHRlbXApO1xuICAgICAgICBzZXRkZWZhdWx0bW9kZWwodGVtcDIpO1xuICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoeW8pO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRhZGRlZGZpZWxkKGFycik7XG4gICAgICAgIHNldGFzc2V0dHlwZWNvZGUocmVzMi5kYXRhLmFzc2V0X2lkKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwobW9kZWx0cmlnZ2VyKTtcbiAgICAgICAgbW9kZWx0cmlnZ2VyICE9PSBmYWxzZSA/IHNldGVkaXRwYXJ0KHRydWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICB9LCBbbW9kZWx0cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMSAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIxXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHtcbiAgICAgIC4uLm5ld2RhdGEsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEyLmNvbmNhdChmaWVsZGRhdGEpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHggIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZWFzc2V0LnNvbWUoXG4gICAgICAgICAgKGRvY3NvbWUpID0+IGRvY3NvbWUuaWQgPT09IGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZFxuICAgICAgICApIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2ZpZWxkZGF0YTIubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHgxICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjb25jYXRhZGRjb2x1bW5zaWR4MSA+IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoIC0gMSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlMS5pZCA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICBjaGFuZ2Vhc3NldCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtmaWVsZGRhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtjb25jYXRhZGRjb2x1bW5zaWR4MV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHhdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDEgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4MV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4MV0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgzICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDNdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4M10gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyM10pO1xuXG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMyAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyM11bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMiAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhLmNvbmNhdChmaWVsZGRhdGFhMiksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgyICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDJdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHRlbXAgPSBbXTtcbiAgICBpZiAoY29uY2F0cGFydHZhbHVlICE9PSAtMSkge1xuICAgICAgaWYgKGNvbmNhdHBhcnR2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX3BhcnRzOiBbXSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmNhdHBhcnR2YWx1ZS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgdmFyIGlkeHRlbXAgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICBpZiAoaWR4dGVtcCAhPT0gLTEgJiYgdGVtcFtpZHh0ZW1wXVtcImlkXCJdID09PSBkb2MuaWQpIHtcbiAgICAgICAgICAgIHZhciBpZHhvZiA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgdGVtcFtpZHhvZl0gPSB7XG4gICAgICAgICAgICAgIC4uLnRlbXBbaWR4b2ZdLFxuICAgICAgICAgICAgICBxdWFudGl0eTogdGVtcFtpZHhvZl0ucXVhbnRpdHkgKyBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaWR4dGVtcCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRlbXAucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYWRkX21vZGVsczogdGVtcCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRwYXJ0dHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMi5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkaWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QyKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RwYXJ0aWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMnBhcnQuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZHBhcnRpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RwYXJ0aWR4KSk7XG4gICAgfVxuICB9LCBbY2RwYXJ0dHJpZ2dlcl0pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC0yIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggTW9kZWwgLSB7bmV3ZGF0YS5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKG5ld2RhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyKTsgY29uc29sZS5sb2coZGVmYXVsdGRhdGEpOyBjb25zb2xlLmxvZyhkZWZhdWx0YXNzZXQpIH19Ki8gdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybS5zdWJtaXR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+SW5mb3JtYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluPjwvU3Bpbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWx9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bmV3ZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCIgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb25zdW1hYmxlOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLmlzX2NvbnN1bWFibGV9XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIE1vZGVsIENvbnN1bWFibGUgZGVuZ2FuIHNhdHVhbiBqdW1sYWhcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtsb2FkaW5nc3BlYyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGEyLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZmllbGRkYXRhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhMltpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggIT09IGZpZWxkZGF0YS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4VXBkYXRlQ29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhVcGRhdGVDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQxW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQxXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihpZGspICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YVtpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhMi5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtuZXdkYXRhLmlzX2NvbnN1bWFibGUgPT09IGZhbHNlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBtYi04IGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Lb25maWd1cmFzaSBQYXJ0IE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcGFuZWwke2lkeH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jLm1vZGVsX2NoaWxkLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTJcIj57ZG9jLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJNb2RlbCB0aWRhayBtZW1pbGlraSBwYXJ0IG1vZGVsIVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fT48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIE1vZGVsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRhcmkgTW9kZWwgUGFydCAke25ld2RhdGEubmFtZX0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0ZW1wID0gbW9kZWxwYXJ0ZmllbGRkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMikgPT4gZG9jMi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnNwbGljZShpZHhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLmluZGV4T2YoZG9jLmlkKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJlZGAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NldCBUeXBle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxhc3NldHR5cGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYmctZ3JheS0yMDAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gaC0xMiBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMsIGlkeG1jKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBteS1hdXRvIHB4LTIgcHktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctd2hpdGUgYm9yZGVyIHctMy8xMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS0xMDAgcm91bmRlZCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjAgcm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfcGFydHMubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lIHN0eWxlPXt7IG1hcmdpblRvcDogYDFyZW1gIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ2hpbGRQYXJ0TW9kZWwoZG9jLm1vZGVsX3BhcnRzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZWRpdHBhcnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbXktMyBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtNSB0ZXh0LWxnIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRpZG1vZGVsfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRpZG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ3BhcnQgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0TW9kZWxzP3Jvd3M9MTAmbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bW9kZWxkYXRhKFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBhdGF1IGNhcmkgbmFtYSBtb2R1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Qb3B1cFNjcm9sbD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsVG9wICsgZXZlbnQudGFyZ2V0Lm9mZnNldEhlaWdodCA9PT0gZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2V0cGFnZShwcmV2ID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9wYWdlPSR7cGFnZX0mcm93cz0xMGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzMiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY3JvbGxUbygwLCBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXMyLmRhdGEudG8gPj0gcmVzMi5kYXRhLnRvdGFsID8gc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhXSkgOiBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGEsIDxTcGluIHNpemU9XCJzbWFsbFwiIC8+XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MuaWR9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2dldG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7Y3VycmVudGlkbW9kZWx9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX2NvbHVtbnNcIl0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxwYXJ0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5tb2RlbF9wYXJ0cy5tYXAoKGRvYzIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXAzID0gZG9jMi5tb2RlbF9jb2x1bW5zLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYzMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBtYXAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX3BhcnRzXCJdID0gbW9kZWxwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJpZFwiXSA9IHJlczIuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJuYW1lXCJdID0gcmVzMi5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAxID0gWy4uLnRlbXAxLCB0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dmFsdWUocmVzMi5kYXRhLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHRyaWdnZXIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhMiA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzMpID0+IGRvYzMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGlkbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGRhdGEyID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudGlkbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZHhkYXRhMiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubWFwKChkb2MxKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jMS5pZCA9PT0gY3VycmVudGlkbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMS5xdWFudGl0eSA9IGRvYzEucXVhbnRpdHkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICArIFRhbWJhaCBQYXJ0IE1vZGVsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTW9kZWw8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtMi5zdWJtaXR9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZW1vZGVsfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjcmVhdGVtb2RlbH1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBtYi04XCI+XG4gICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybTJ9XG4gICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MigwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YTIucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdzcGVjMiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj4gOiBudWxsfSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj4oe2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgPyBcIlNpbmdsZSBUZXh0Ym94XCIgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTcgZmxleCBqdXN0aWZ5LWNlbnRlciBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXSA9IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBkZWZhdWx0VmFsdWU9e2RvY2N9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlciBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXS5wdXNoKGlkeHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IHtkb2NjfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXIgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBkYXRlU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgIHtsb2FkaW5nc3BlYzIgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkM1tpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDModGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jeHgsIGlkeHgpID0+IGRvY3h4LmlkICE9PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZmllbGRkYXRhYTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDJbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQyXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhYS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGQyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTWFudWZhY3R1cmVyPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkbWFudWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWFudWZhY3R1cmVyfVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdtYW51Zn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbWFudWZ9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIE1hbnVmYWN0dXJlciA8c3BhbiBjbGFzc05hbWU9XCJuYW1hbWFudVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YW1hbnVmLm5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTmFtYSBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZG1hbnVmKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRhdGFtYW51Zih7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYW1hbnU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBtb2RlbGlkID0gcGFyYW1zLm1vZGVsSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbiA9IGF3YWl0IHJlc291cmNlcy5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbjtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjgyXCIsXG4gICAgICBtb2RlbGlkLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsc1VwZGF0ZTI7XG4iXX0= */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n              }, void 0, false, void 0, _this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3903,\n              columnNumber: 19\n            }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(_Form, {\n                layout: \"vertical\",\n                initialValues: currentfield2,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"name\",\n                    label: \"Nama Field\",\n                    rules: [{\n                      required: true,\n                      message: \"Nama Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Input, {\n                      required: true,\n                      name: \"name\",\n                      onChange: function onChange(e) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          name: e.target.value\n                        }));\n\n                        if (e.target.value === \"\") {\n                          setdisabledtambah2(true);\n                        } else if (e.target.value !== \"\" && currentfield2.data_type !== \"\" && currentdropdownn2.every(function (doca, idxa) {\n                          return doca !== \"\";\n                        })) {\n                          setdisabledtambah2(false);\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4039,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4029,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"data_type\",\n                    label: \"Tipe Field\",\n                    rules: [{\n                      required: true,\n                      message: \"Tipe Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Select, {\n                      placeholder: \"Pilih Tipe Field\",\n                      onChange: function onChange(value) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          data_type: value\n                        }));\n\n                        if (value === \"dropdown\" || value === \"checkbox\") {\n                          if (currentdropdownn2.every(function (doca, idxa) {\n                            return doca !== \"\";\n                          })) {\n                            setdisabledtambah2(false);\n                          } else {\n                            setdisabledtambah2(true);\n                          }\n                        } else {\n                          setdisabledtambah2(false);\n                        }\n\n                        if (value === \"dropdown\") {\n                          setcurrentcheckeddropdownn2(\"\");\n                          setcurrentdropdownn2([\"\", \"\"]);\n                          setcd2part([\"\", \"\"]);\n                          setdisabledtambah2(true);\n                        }\n\n                        if (value === \"checkbox\") {\n                          setcurrentcheckeddropdownn2([]);\n                          setcurrentdropdownn2([\"\", \"\"]);\n                          setcd2part([\"\", \"\"]);\n                          setdisabledtambah2(true);\n                        }\n                      },\n                      name: \"data_type\",\n                      children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"dropdown\",\n                        children: \"Dropdown\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4109,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"number\",\n                        children: \"Number\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4112,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"paragraph\",\n                        children: \"Paragraph Text\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4115,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"checkbox\",\n                        children: \"Checkbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4118,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"single\",\n                        children: \"Single Textbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4121,\n                        columnNumber: 29\n                      }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"date\",\n                        children: \"Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4124,\n                        columnNumber: 29\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4071,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4061,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4028,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"default\",\n                  label: \"Default\",\n                  children: [currentfield2.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4132,\n                      columnNumber: 29\n                    }, _this), currentdropdownn2.map(function (doc, idxx) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            checked: currentcheckeddropdownn2 === idxx ? true : false,\n                            onChange: function onChange(e) {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdownn2(idxx);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4139,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4138,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: \"0.5rem\"\n                            },\n                            defaultValue: doc,\n                            placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                            onChange: function onChange(e) {\n                              setcurrentdropdownn2(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2part(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdownn2.every(function (doca, idxa) {\n                                return doca !== \"\";\n                              }) && currentfield2.name !== \"\") {\n                                setdisabledtambah2(false);\n                              } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                                setdisabledtambah2(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4153,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4152,\n                          columnNumber: 33\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: function onClick() {\n                            setcurrentdropdownn2([]);\n                            setcdparttrigger(function (prev) {\n                              return !prev;\n                            });\n                            setcdpartidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4193,\n                            columnNumber: 35\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4185,\n                          columnNumber: 33\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4137,\n                        columnNumber: 31\n                      }, _this);\n                    }), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: function onClick() {\n                          setcurrentdropdownn2([].concat(_toConsumableArray(currentdropdownn2), [\"\"]));\n                          setcd2part([].concat(_toConsumableArray(cd2part), [\"\"]));\n                          setdisabledtambah2(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4198,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4197,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4131,\n                    columnNumber: 27\n                  }, _this) : null, currentfield2.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4216,\n                      columnNumber: 29\n                    }, _this), currentdropdownn2.map(function (doc, idxx) {\n                      var idxchecked = currentcheckeddropdownn2.includes(idxx);\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            defaultChecked: idxchecked,\n                            onChange: function onChange(e) {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdownn2(function (prev) {\n                                  var temp = prev;\n                                  temp.push(idxx);\n                                  return temp;\n                                });\n                              } else {\n                                setcurrentcheckeddropdownn2(function (prev) {\n                                  var temp = prev;\n                                  var index = temp.indexOf(idxx);\n                                  temp.splice(index, 1);\n                                  return temp;\n                                });\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4226,\n                            columnNumber: 37\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4225,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: \"0.5rem\"\n                            },\n                            defaultValue: doc,\n                            placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                            onChange: function onChange(e) {\n                              setcurrentdropdownn2(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2part(function (prev) {\n                                var temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdownn2.every(function (doca, idxa) {\n                                return doca !== \"\";\n                              }) && currentfield2.name !== \"\") {\n                                setdisabledtambah2(false);\n                              } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                                setdisabledtambah2(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4251,\n                            columnNumber: 37\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4250,\n                          columnNumber: 35\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: function onClick() {\n                            setcurrentdropdownn2([]);\n                            setcdparttrigger(function (prev) {\n                              return !prev;\n                            });\n                            setcdpartidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4293,\n                            columnNumber: 37\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4285,\n                          columnNumber: 35\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4224,\n                        columnNumber: 33\n                      }, _this);\n                    }), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: function onClick() {\n                          setcurrentdropdownn2([].concat(_toConsumableArray(currentdropdownn2), [\"\"]));\n                          setcd2part([].concat(_toConsumableArray(cd2part), [\"\"]));\n                          setdisabledtambah2(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4299,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4298,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4215,\n                    columnNumber: 27\n                  }, _this) : null, currentfield2.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                    style: {\n                      width: \"30%\"\n                    },\n                    defaultValue: fielddataa2[idx][\"default\"],\n                    placeholder: \"Masukkan default \".concat(currentfield2.name),\n                    onChange: function onChange(value) {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        \"default\": \"\".concat(value)\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4315,\n                    columnNumber: 27\n                  }, _this), currentfield2.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                    rows: 4,\n                    placeholder: \"Masukkan default \".concat(currentfield2.name),\n                    defaultValue: fielddataa2[idx][\"default\"],\n                    onChange: function onChange(e) {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        \"default\": e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4329,\n                    columnNumber: 27\n                  }, _this), currentfield2.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: \"Masukkan default \".concat(currentfield2.name),\n                    defaultValue: fielddataa2[idx][\"default\"],\n                    onChange: function onChange(e) {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        \"default\": e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4342,\n                    columnNumber: 27\n                  }, _this), currentfield2.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: \"Masukkan default \".concat(currentfield2.name),\n                    defaultValue: fielddataa2[idx][\"default\"],\n                    onChange: function onChange(e) {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        \"default\": e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4354,\n                    columnNumber: 27\n                  }, _this), currentfield2.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                    style: {\n                      width: \"30%\"\n                    },\n                    placeholder: \"Masukkan default \".concat(currentfield2.name),\n                    onChange: function onChange(value, dateString) {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        \"default\": dateString\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4366,\n                    columnNumber: 27\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4128,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4378,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex mt-4 justify-end\",\n                  children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: \"Apakah anda yakin ingin menghapus field \".concat(doc.name === \"\" ? \"ini\" : doc.name, \"?\"),\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: function onConfirm() {\n                      setfielddataa2(function (prev) {\n                        return prev.filter(function (_, idxx) {\n                          return idxx !== idx;\n                        });\n                      });\n                      setnewdata2(function (prev) {\n                        var temp = prev;\n                        temp.model_columns = temp.model_columns.filter(function (_, idxx) {\n                          return idxx !== fielddataa.length + idx;\n                        });\n                        return temp;\n                      });\n                      setaddedfield2(function (prev) {\n                        prev.splice(idx, 1);\n                        return prev;\n                      });\n                      setdisabledaddfield2(false);\n                      setpointevent2(\"\");\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                      children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                        style: {\n                          fontSize: \"1.25rem\"\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4407,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4406,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4380,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \" flex items-center mr-4\",\n                    children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                      checked: currentfield2.required,\n                      style: {\n                        marginRight: \"0.5rem\"\n                      },\n                      onChange: function onChange(e) {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          required: e.target.checked\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4413,\n                      columnNumber: 27\n                    }, _this), \" \", \"Required\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4412,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                    type: \"primary\",\n                    disabled: disabledtambah2,\n                    onClick: function onClick() {\n                      if (currentfield2.data_type === \"dropdown\" || currentfield2.data_type === \"checkbox\") {\n                        setidxdropdowntrigger2(idx);\n                        setvaluedropdowntrigger2(function (prev) {\n                          return !prev;\n                        });\n                      }\n\n                      var temp = fielddataa2;\n                      temp[idx] = currentfield2;\n                      setfielddataa2(temp);\n                      setaddedfieldidx2(idx);\n                      setaddedfieldtrigger2(function (prev) {\n                        return !prev;\n                      });\n                      setconcatfieldtrigger2(function (prev) {\n                        return !prev;\n                      });\n                      setdisabledaddfield2(false);\n                      setpointevent2(\"\");\n                    },\n                    children: \"Tambah\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4425,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4379,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4027,\n                columnNumber: 21\n              }, _this)\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4023,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"dashed\",\n            disabled: disabledaddfield2,\n            style: {\n              width: \"80%\",\n              height: \"4rem\"\n            },\n            onClick: onClickAddField2,\n            children: \"+ Tambah Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4456,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4455,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3189,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3056,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Form Tambah Manufacturer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4470,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(_Button, {\n            type: \"default\",\n            onClick: function onClick() {\n              setmodalmanuf(false);\n            },\n            style: {\n              marginRight: \"1rem\"\n            },\n            children: \"Batal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4472,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"primary\",\n            disabled: disabledmanuf,\n            onClick: handleAddManufacturer,\n            loading: loadingmanuf,\n            children: \"Simpan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4481,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4471,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4469,\n        columnNumber: 11\n      }, _this),\n      visible: modalmanuf,\n      footer: null,\n      onCancel: function onCancel() {\n        setmodalmanuf(false);\n      },\n      width: 900,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-842967156\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-842967156\" + \" \" + \"mb-0\",\n            children: [\"Nama Manufacturer \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-842967156\" + \" \" + \"namamanu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4502,\n              columnNumber: 33\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4501,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Input, {\n            value: datamanuf.name,\n            placeholder: \"Masukkan Nama Manufacturer\",\n            onChange: function onChange(e) {\n              e.target.value === \"\" ? setdisabledmanuf(true) : setdisabledmanuf(false);\n              setdatamanuf({\n                name: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4504,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"842967156\",\n            children: \".namamanu.jsx-842967156::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrNkllLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9hZG1pbi9tb2RlbHMvdXBkYXRlMi9bbW9kZWxJZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWxldGVPdXRsaW5lZCB9IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQ2FsZW5kYXJPdXRsaW5lZCxcbiAgQ2xvc2VDaXJjbGVPdXRsaW5lZCxcbiAgUGx1c1NxdWFyZVR3b1RvbmUsXG59IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBDaGVja2JveCxcbiAgQ29sbGFwc2UsXG4gIERhdGVQaWNrZXIsXG4gIEVtcHR5LFxuICBGb3JtLFxuICBJbnB1dCxcbiAgSW5wdXROdW1iZXIsXG4gIFBvcGNvbmZpcm0sXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGltZWxpbmUsXG4gIFRyZWVTZWxlY3QsXG4gIG5vdGlmaWNhdGlvbixcbn0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBNb2RhbCBmcm9tIFwiYW50ZC9saWIvbW9kYWwvTW9kYWxcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3RpY2t5IGZyb20gXCJ3aWwtcmVhY3Qtc3RpY2t5XCI7XG5cbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZFwiO1xuaW1wb3J0IHN0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQubW9kdWxlLmNzc1wiO1xuaW1wb3J0IGh0dHBjb29raWUgZnJvbSBcImNvb2tpZVwiO1xuXG5jb25zdCBNb2RlbHNVcGRhdGUyID0gKHsgc2lkZW1lbnUsIGRhdGFQcm9maWxlLCBpbml0UHJvcHMsIG1vZGVsaWQgfSkgPT4ge1xuICAvLzEuSW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMywgMSk7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiVWJhaCBNb2RlbFwiO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtXSA9IEZvcm0udXNlRm9ybSgpO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtMl0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgeyBQYW5lbCB9ID0gQ29sbGFwc2U7XG5cbiAgLy8yLkhlbHBlciBmdW5jdGlvbnNcbiAgY29uc3QgcmVuZGVyQ2hpbGRQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiBpdGVtLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgIHJldHVybiA8Q2hpbGRyZW4gZG9jPXtkb2N9PjwvQ2hpbGRyZW4+O1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IENoaWxkcmVuID0gKHsgZG9jIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRpbWVsaW5lLkl0ZW0+XG4gICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAge1xuICAgICAgICAgICAgPFBhbmVsIGhlYWRlcj17ZG9jLm5hbWV9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+UXVhbnRpdHkgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj48L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPntkb2MucXVhbnRpdHl9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX2NvbHVtbnMubWFwKChkb2NtYzIsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gdmFyIGRlZmF1bHQyID0ge31cbiAgICAgICAgICAgICAgICAgIC8vIGlmIChkb2NtYzIuZGF0YV90eXBlID09PSAnZHJvcGRvd24nIHx8IGRvY21jMi5kYXRhX3R5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgIC8vICAgICBkZWZhdWx0MiA9IEpTT04ucGFyc2UoZG9jbWMyLmRlZmF1bHQpXG4gICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bHNuXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvY21jMi5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGByZ2JhKDIyOSwgMjMxLCAyMzUsMSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0Lm9wc2kubWFwKChkb2MyLCBpZHgyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gZGlzYWJsZWQgdmFsdWU9e2lkeDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMywgaWR4MykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jM308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHJvdW5kZWQgYmctZ3JheS0xMDAgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jbWMyLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciB3LWZ1bGwgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgIHJlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgIH1cbiAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICApO1xuICB9O1xuXG4gIC8vMi51c2VTdGF0ZVxuICBjb25zdCBbbmV3ZGF0YSwgc2V0bmV3ZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgYXNzZXRfaWQ6IFwiXCIsXG4gICAgbmFtZTogXCJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IG51bGwsXG4gICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgIG1vZGVsX2NvbHVtbnM6IFtdLFxuICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICBhZGRfY29sdW1uczogW10sXG4gICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtuZXdkYXRhMiwgc2V0bmV3ZGF0YTJdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbZGVmYXVsdGRhdGEsIHNldGRlZmF1bHRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21hbnVmZGF0YSwgc2V0bWFudWZkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVsZGF0YSwgc2V0bW9kZWxkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YSwgc2V0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YTIsIHNldGZpZWxkZGF0YTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYSwgc2V0ZmllbGRkYXRhYV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGFhMiwgc2V0ZmllbGRkYXRhYTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9kZWxwYXJ0ZmllbGRkYXRhLCBzZXRtb2RlbHBhcnRmaWVsZGRhdGFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbY3VycmVudGZpZWxkLCBzZXRjdXJyZW50ZmllbGRdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZDIsIHNldGN1cnJlbnRmaWVsZDJdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRpZG1vZGVsLCBzZXRjdXJyZW50aWRtb2RlbF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2FkZGVkZmllbGQsIHNldGFkZGVkZmllbGRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDEsIHNldGFkZGVkZmllbGQxXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQyLCBzZXRhZGRlZGZpZWxkMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMywgc2V0YWRkZWRmaWVsZDNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeCwgc2V0YWRkZWRmaWVsZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlciwgc2V0YWRkZWRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDEsIHNldGFkZGVkZmllbGRpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMSwgc2V0YWRkZWRmaWVsZHRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgyLCBzZXRhZGRlZGZpZWxkaWR4Ml0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjIsIHNldGFkZGVkZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Mywgc2V0YWRkZWRmaWVsZGlkeDNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIzLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZSwgc2V0bG9hZGluZ2NyZWF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nY3JlYXRlbW9kZWwsIHNldGxvYWRpbmdjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nZ2V0bW9kZWwsIHNldGxvYWRpbmdnZXRtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nLCBzZXRwcmFsb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ3NwZWMsIHNldGxvYWRpbmdzcGVjXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjMiwgc2V0bG9hZGluZ3NwZWMyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bjIsIHNldGN1cnJlbnRkcm9wZG93bjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bm4yLCBzZXRjdXJyZW50ZHJvcGRvd25uMl0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bjIsIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2YWx1ZWRyb3Bkb3dudHJpZ2dlciwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMSwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjMsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIsIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnNpZHgsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlLCBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIxLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4MSwgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlMSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjb25jYXRmaWVsZHRyaWdnZXIyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2VkaXRwYXJ0LCBzZXRlZGl0cGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RhbGNyZWF0ZW1vZGVsLCBzZXRtb2RhbGNyZWF0ZW1vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25ld2RhdGF0cmlnZ2VyLCBzZXRuZXdkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlcjIsIHNldG5ld2RhdGF0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RlbHRyaWdnZXIsIHNldG1vZGVsdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRwYXJ0dHJpZ2dlciwgc2V0Y29uY2F0cGFydHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHZhbHVlLCBzZXRjb25jYXRwYXJ0dmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYXNzZXR0eXBlY29kZSwgc2V0YXNzZXR0eXBlY29kZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUyLCBzZXRhc3NldHR5cGVjb2RlMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RlZmF1bHRtb2RlbCwgc2V0ZGVmYXVsdG1vZGVsXSA9IHVzZVN0YXRlKHt9KTtcbiAgY29uc3QgW2Rpc2FibGVkdGFtYmFoLCBzZXRkaXNhYmxlZHRhbWJhaF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaDIsIHNldGRpc2FibGVkdGFtYmFoMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkLCBzZXRkaXNhYmxlZGFkZGZpZWxkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkYWRkZmllbGQyLCBzZXRkaXNhYmxlZGFkZGZpZWxkMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwb2ludGV2ZW50LCBzZXRwb2ludGV2ZW50XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcG9pbnRldmVudDIsIHNldHBvaW50ZXZlbnQyXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY2QyLCBzZXRjZDJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2NkaWR4LCBzZXRjZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHRyaWdnZXIsIHNldGNkdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjZDJwYXJ0LCBzZXRjZDJwYXJ0XSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZHBhcnRpZHgsIHNldGNkcGFydGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHBhcnR0cmlnZ2VyLCBzZXRjZHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NoYW5nZWFzc2V0LCBzZXRjaGFuZ2Vhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkZWZhdWx0YXNzZXQsIHNldGRlZmF1bHRhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmZXRjaGluZ3BhcnQsIHNldGZldGNoaW5ncGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwYWdlLCBzZXRwYWdlXSA9IHVzZVN0YXRlKDEpO1xuICAvL2NyZWF0ZSBtYW51ZmFjdHVyZXJcbiAgY29uc3QgW21vZGFsbWFudWYsIHNldG1vZGFsbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ21hbnVmLCBzZXRsb2FkaW5nbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRtYW51Ziwgc2V0ZGlzYWJsZWRtYW51Zl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3RyaWdnZXJtYW51Ziwgc2V0dHJpZ2dlcm1hbnVmXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RhdGFtYW51Ziwgc2V0ZGF0YW1hbnVmXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICB9KTtcblxuICAvLzMub25DaGFuZ2VcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkID0gKCkgPT4ge1xuICAgIHNldGZpZWxkZGF0YShbXG4gICAgICAuLi5maWVsZGRhdGEsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0YWRkZWRmaWVsZDEoWy4uLmFkZGVkZmllbGQxLCBmYWxzZV0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkMiA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGFhMihbXG4gICAgICAuLi5maWVsZGRhdGFhMixcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGF0YV90eXBlOiBcIlwiLFxuICAgICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQgPSAoaWQpID0+IHtcbiAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgc2V0bG9hZGluZ3NwZWModHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0YXNzZXRpZCA9IGRlZmF1bHRhc3NldC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKTtcbiAgICAgICAgICBjb25zdCBuZXdhc3NldGZpZWxkZGF0YTIgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wbyA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wbyA9IHRlbXBvXG4gICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgICAgLmNvbmNhdCh0ZW1wKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3YXNzZXRmaWVsZGRhdGEyLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICBhZGRfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRkZWZhdWx0ZGF0YSh7XG4gICAgICAgICAgICAuLi5kZWZhdWx0ZGF0YSxcbiAgICAgICAgICAgIGlkOiBkZWZhdWx0bW9kZWwuaWQsXG4gICAgICAgICAgICBuYW1lOiBkZWZhdWx0bW9kZWwubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZWZhdWx0bW9kZWwuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXJfaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXJfaWQsXG4gICAgICAgICAgICBjb3VudDogZGVmYXVsdG1vZGVsLmNvdW50LFxuICAgICAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICAgICAgaWQ6IHJlczIuZGF0YS5pZCxcbiAgICAgICAgICAgICAgbmFtZTogcmVzMi5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGNvZGU6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzMi5kYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjoge1xuICAgICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5pZCxcbiAgICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiBOdW1iZXIoaWQpLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogZGVmYXVsdGFzc2V0LFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3YXNzZXRmaWVsZGRhdGEyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0Y2hhbmdlYXNzZXQodGVtcCk7XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJpbmZvXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQW5kYSBUZWxhaCBNZW5ndWJhaCBBc3NldCBUeXBlXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgXCJIYWwgaW5pIG1lbWJ1YXQgZmllbGQgZGFyaSBhc3NldCB0eXBlIHRlcmthaXQgdGVyYmVudHVrIGRpIGZvcm0gaW5pIVwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIC8vIHNldGZpZWxkZGF0YTIodGVtcClcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tTZWxlY3RBc3NldDIgPSAoaWQpID0+IHtcbiAgICBzZXRsb2FkaW5nc3BlYzIodHJ1ZSk7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgYm9vbCA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm9vbC5wdXNoKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRhZGRlZGZpZWxkMyhib29sKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGFzc2V0dHlwZWNvZGUyKHJlczIuZGF0YS5pZCk7XG4gICAgICAgICAgLy8gc2V0bmV3ZGF0YXRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMyKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICAuLi5uZXdkYXRhMixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNC5oYW5kbGVcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWwgPSAoKSA9PiB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG5ld2RhdGEpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJ1cGRhdGVfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFkZF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikge1xuICAgICAgICB0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICAgIHNldGxvYWRpbmdjcmVhdGUodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L3VwZGF0ZU1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2NyZWF0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl1YmFoXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgcnQucHVzaChgL2FkbWluL21vZGVscy9kZXRhaWwvJHttb2RlbGlkfWApO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhMikge1xuICAgICAgaWYgKHByb3AgPT09IFwibW9kZWxfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhc3NldF9pZFwiKSBbKHRbcHJvcF0gPSBOdW1iZXIoYXNzZXR0eXBlY29kZTIpKV07XG4gICAgICBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGEyW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgc2V0bW9kZWx0cmlnZ2VyKHJlczIuaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUFkZE1hbnVmYWN0dXJlciA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nbWFudWYodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1hbnVmYWN0dXJlcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YW1hbnVmKSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdtYW51ZihmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1hbnVmYWN0dXJlciBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YW1hbnVmKHtcbiAgICAgICAgICAgIC4uLmRhdGFtYW51ZixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMyKTtcblxuICAgICAgICAgIHNldHRyaWdnZXJtYW51ZigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy81LnVzZUVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0YXNzZXRkYXRhKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNYW51ZmFjdHVyZXJzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXMyLmRhdGE7XG4gICAgICAgIGNvbnN0IGxhdGVzdEluc2VydGVkTWFudWZhY3R1cmVyID0gZGF0YVtkYXRhLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zb2xlLmxvZyhsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlcik7XG5cbiAgICAgICAgLyoqIFNldCBuZXcgaW5zZXJ0ZWQgbWFudWZhY3R1cmVyIGFzIGRlZmF1bHQgc2VsZWN0ZWQgb3B0aW9uIGluIHRoZSBcIk1hbnVmYWN0dXJlclwiIGRyb3Bkb3duICovXG4gICAgICAgIHNldG1hbnVmZGF0YShkYXRhKTtcbiAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4gKHsuLi5wcmV2LCBtYW51ZmFjdHVyZXJfaWQ6IGxhdGVzdEluc2VydGVkTWFudWZhY3R1cmVyLmlkIH0pKVxuICAgICAgfSk7XG4gIH0sIFt0cmlnZ2VybWFudWZdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWw/aWQ9JHttb2RlbGlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQgPT09IFwiXCIgfHwgZG9jLmRlZmF1bHQgPT09IFwiLVwiXG4gICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL21vZGVsX3BhcnRzXG4gICAgICAgIGNvbnN0IHJlY3Vyc2l2ZVBhcnRNb2RlbCA9IChpdGVtKSA9PiB7XG4gICAgICAgICAgdmFyIHRlbXAxMSA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRlbXAxID0ge307XG4gICAgICAgICAgICB0ZW1wMSA9IGl0ZW1baV0ubW9kZWxfY29sdW1ucy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgICAgID8gZG9jLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRlbXAxMS5wdXNoKHtcbiAgICAgICAgICAgICAgLi4uaXRlbVtpXSxcbiAgICAgICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcDEsXG4gICAgICAgICAgICAgIG1vZGVsX3BhcnRzOlxuICAgICAgICAgICAgICAgIGl0ZW1baV0ubW9kZWxfcGFydHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgPyByZWN1cnNpdmVQYXJ0TW9kZWwoaXRlbVtpXS5tb2RlbF9wYXJ0cylcbiAgICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRlbXAxMTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgeW8gPSByZWN1cnNpdmVQYXJ0TW9kZWwocmVzMi5kYXRhLm1vZGVsX3BhcnRzKTtcbiAgICAgICAgY29uc3QgdGVtcDIgPSB7XG4gICAgICAgICAgLi4ucmVzMi5kYXRhLFxuICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuYXNzZXQuY29kZSxcbiAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLFxuICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgICAgICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBzZXRuZXdkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGRhdGEodGVtcDIpO1xuICAgICAgICBzZXRkZWZhdWx0YXNzZXQodGVtcCk7XG4gICAgICAgIHNldGRlZmF1bHRtb2RlbCh0ZW1wMik7XG4gICAgICAgIHNldGZpZWxkZGF0YTIodGVtcCk7XG4gICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSh5byk7XG4gICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMyLmRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyci5wdXNoKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgc2V0YXNzZXR0eXBlY29kZShyZXMyLmRhdGEuYXNzZXRfaWQpO1xuICAgICAgICBzZXRwcmFsb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChtb2RlbHRyaWdnZXIpO1xuICAgICAgICBtb2RlbHRyaWdnZXIgIT09IGZhbHNlID8gc2V0ZWRpdHBhcnQodHJ1ZSkgOiBudWxsO1xuICAgICAgfSk7XG4gIH0sIFttb2RlbHRyaWdnZXJdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIHV0YW1hIHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhMigocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGJ1YXQgc2VuZGlyaVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIxICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAvLyB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWVkcm9wZG93bnRyaWdnZXJ9YFxuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjFdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEoe1xuICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YTIuY29uY2F0KGZpZWxkZGF0YSksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29uY2F0YWRkY29sdW1uc2lkeCAhPT0gLTEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY2hhbmdlYXNzZXQuc29tZShcbiAgICAgICAgICAoZG9jc29tZSkgPT4gZG9jc29tZS5pZCA9PT0gY29uY2F0YWRkY29sdW1uc3ZhbHVlLmlkXG4gICAgICAgICkgfHxcbiAgICAgICAgdHlwZW9mIGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbZmllbGRkYXRhMi5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goY3VycmVudGZpZWxkKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4YWRkY29sdW1uID0gbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld2RhdGEuYXNzZXRfY29sdW1ucy5sZW5ndGgrXCI6XCIrY29uY2F0YWRkY29sdW1uc2lkeCtcIjtcIituZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aClcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pXG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2N1cCkgPT4gZG9jdXAuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnB1c2goZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHh1cGNvbHVtbiA9IG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRmaWVsZC5pZCxcbiAgICAgICAgICAgICAgICBtb2RlbF9pZDogY3VycmVudGZpZWxkLm1vZGVsX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29uY2F0YWRkY29sdW1uc2lkeDEgIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNvbmNhdGFkZGNvbHVtbnNpZHgxID4gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGggLSAxIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUxLmlkID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgICAgIGNoYW5nZWFzc2V0ID09PSB0cnVlXG4gICAgICApIHtcbiAgICAgICAgLy8gaWYgKChmaWVsZGRhdGEyLmxlbmd0aCAtIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoKSA+PSBuZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkKSA9PiBkb2NhZGQubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goZmllbGRkYXRhW2ZpZWxkZGF0YS5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goY3VycmVudGZpZWxkKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4YWRkY29sdW1uID0gbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld2RhdGEuYXNzZXRfY29sdW1ucy5sZW5ndGgrXCI6XCIrY29uY2F0YWRkY29sdW1uc2lkeCtcIjtcIituZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aClcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnNbaWR4YWRkY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pXG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2N1cCkgPT4gZG9jdXAuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnB1c2goZmllbGRkYXRhW2NvbmNhdGFkZGNvbHVtbnNpZHgxXSk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHh1cGNvbHVtbiA9IG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIuaWQpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQuaWQpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRmaWVsZC5pZCxcbiAgICAgICAgICAgICAgICBtb2RlbF9pZDogY3VycmVudGZpZWxkLm1vZGVsX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1tpZHh1cGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHggIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHhdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeF0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHhdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MSAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgxXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDFdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDMgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4M10gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4M10gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgzXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIzXSk7XG5cbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBhc3NldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIzICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhYSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIzXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyM10pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgYmFydSB5YW5nIGZpZWxkIGJ1YXQgc2VuZGlyaVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIyICE9PSAtMSkge1xuICAgICAgc2V0ZmllbGRkYXRhYTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyMl1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhMih7XG4gICAgICAuLi5uZXdkYXRhMixcbiAgICAgIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YWEuY29uY2F0KGZpZWxkZGF0YWEyKSxcbiAgICB9KTtcbiAgfSwgW2NvbmNhdGZpZWxkdHJpZ2dlcjJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDIgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4Ml0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgyXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIyXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhIH0pO1xuICB9LCBbbmV3ZGF0YXRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhIH0pO1xuICB9LCBbbmV3ZGF0YXRyaWdnZXIyXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgdGVtcCA9IFtdO1xuICAgIGlmIChjb25jYXRwYXJ0dmFsdWUgIT09IC0xKSB7XG4gICAgICBpZiAoY29uY2F0cGFydHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbW9kZWxfcGFydHM6IFtdIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uY2F0cGFydHZhbHVlLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICB2YXIgaWR4dGVtcCA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgIGlmIChpZHh0ZW1wICE9PSAtMSAmJiB0ZW1wW2lkeHRlbXBdW1wiaWRcIl0gPT09IGRvYy5pZCkge1xuICAgICAgICAgICAgdmFyIGlkeG9mID0gdGVtcC5tYXAoKGRvYykgPT4gZG9jLmlkKS5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICB0ZW1wW2lkeG9mXSA9IHtcbiAgICAgICAgICAgICAgLi4udGVtcFtpZHhvZl0sXG4gICAgICAgICAgICAgIHF1YW50aXR5OiB0ZW1wW2lkeG9mXS5xdWFudGl0eSArIGRvYy5xdWFudGl0eSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIGlmIChpZHh0ZW1wID09PSAtMSkge1xuICAgICAgICAgICAgdGVtcC5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IGRvYy5xdWFudGl0eSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBhZGRfbW9kZWxzOiB0ZW1wIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdHBhcnR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICByZXR1cm4gY2QyLmZpbHRlcigoZG9jMTAsIGlkeDEwKSA9PiBpZHgxMCAhPT0gY2RpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDIoKHByZXYpID0+IHByZXYuZmlsdGVyKChkb2MxMSwgaWR4MTEpID0+IGlkeDExICE9PSBjZGlkeCkpO1xuICAgIH1cbiAgfSwgW2NkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZHBhcnRpZHggIT09IC0xKSB7XG4gICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICByZXR1cm4gY2QycGFydC5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkcGFydGlkeCk7XG4gICAgICB9KTtcbiAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHByZXYuZmlsdGVyKChkb2MxMSwgaWR4MTEpID0+IGlkeDExICE9PSBjZHBhcnRpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHBhcnR0cmlnZ2VyXSk7XG4gIHJldHVybiAoXG4gICAgPExheW91dFxuICAgICAgc3Q9e3N0fVxuICAgICAgdG9rPXtpbml0UHJvcHN9XG4gICAgICBzaWRlbWVudT17c2lkZW1lbnV9XG4gICAgICBkYXRhUHJvZmlsZT17ZGF0YVByb2ZpbGV9XG4gICAgICBwYXRoQXJyPXtwYXRoQXJyfVxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtYXV0byBncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy00XCJcbiAgICAgICAgaWQ9XCJjcmVhdGVBc3NldHNXcmFwcGVyXCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8U3RpY2t5IGNvbnRhaW5lclNlbGVjdG9yRm9jdXM9XCIjY3JlYXRlQWdlbnRzV3JhcHBlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tNCBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTIgcHQtNCBib3JkZXItdC0yIGJvcmRlci1iLTIgYmctd2hpdGVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgcHktMlwiPlxuICAgICAgICAgICAgICAgIEZvcm0gVWJhaCBNb2RlbCAtIHtuZXdkYXRhLm5hbWV9XG4gICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICA8TGluayBocmVmPXtgL2FkbWluL21vZGVscy9kZXRhaWwvJHttb2RlbGlkfWB9PlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAvKm9uQ2xpY2s9eygpID0+IHsgY29uc29sZS5sb2cobmV3ZGF0YSk7IGNvbnNvbGUubG9nKGZpZWxkZGF0YSk7IGNvbnNvbGUubG9nKGZpZWxkZGF0YTIpOyBjb25zb2xlLmxvZyhkZWZhdWx0ZGF0YSk7IGNvbnNvbGUubG9nKGRlZmF1bHRhc3NldCkgfX0qLyB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtLnN1Ym1pdH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5JbmZvcm1hc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgICAgICAgPFNwaW4+PC9TcGluPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgICAgICBmb3JtPXtpbnN0YW5jZUZvcm19XG4gICAgICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgIG9uRmluaXNoPXtoYW5kbGVDcmVhdGVNb2RlbH1cbiAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVzPXtuZXdkYXRhfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIkFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIEFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0KDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctMTEvMTIgbXItMlwiPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJtYW51ZmFjdHVyZXJfaWRcIiBsYWJlbD1cIk1hbnVmYWN0dXJlclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbWFudWZhY3R1cmVyX2lkOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge21hbnVmZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxQbHVzU3F1YXJlVHdvVG9uZSBzdHlsZT17eyBmb250U2l6ZTogYDEuNXJlbWAgfX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgcmVxdWlyZWRfc246IGUudGFyZ2V0LmNoZWNrZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIFNlcmlhbCBOdW1iZXIgd2FqaWIgYWRhXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEuaXNfY29uc3VtYWJsZX1cbiAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgTW9kZWwgQ29uc3VtYWJsZSBkZW5nYW4gc2F0dWFuIGp1bWxhaFxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge2xvYWRpbmdzcGVjID8gKFxuICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2ZpZWxkZGF0YTIubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0+PC9FbXB0eT5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICBmaWVsZGRhdGEyLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAge2FkZGVkZmllbGRbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudH0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGEyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0ID09PSBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBTcGVzaWZpa2FzaVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgU3Blc2lmaWthc2kgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21vbWVudChmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhMigocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfLCBpZHh4KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCAhPT0gZmllbGRkYXRhLmxlbmd0aCArIGlkeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jZGVmKSA9PiBkb2NkZWYuaWQgPT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX2NvbHVtbl9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhVcGRhdGVDb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMuc3BsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFVwZGF0ZUNvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSB0ZW1wLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRlbXAuYWRkX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc2lkeChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZShkb2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtmaWVsZGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDFbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudH0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDFdO1xuICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKGZpZWxkZGF0YVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKGlkaykgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZH0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBTcGVzaWZpa2FzaVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgU3Blc2lmaWthc2kgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+RGF0ZTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhW2lkeF0uZGVmYXVsdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9IHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfLCBpZHh4KSA9PiBpZHh4ICE9PSBmaWVsZGRhdGEyLmxlbmd0aCArIGlkeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFofVxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlMShkb2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkfVxuICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDgwJWAsIGhlaWdodDogYDRyZW1gIH19XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2tBZGRGaWVsZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBUYW1iYWggU3Blc2lmaWthc2kgTW9kZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge25ld2RhdGEuaXNfY29uc3VtYWJsZSA9PT0gZmFsc2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIG1iLTggY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPktvbmZpZ3VyYXNpIFBhcnQgTW9kZWw8L2gxPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLmxlbmd0aCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPENvbGxhcHNlIGFjY29yZGlvbj5cbiAgICAgICAgICAgICAgICAgIHttb2RlbHBhcnRmaWVsZGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxQYW5lbFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2BwYW5lbCR7aWR4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcj17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBkb2MubW9kZWxfY2hpbGQubGVuZ3RoID09PSAwID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgdy02LzEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXItMlwiPntkb2MubmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PVwicmlnaHRcIiB0aXRsZT1cIk1vZGVsIHRpZGFrIG1lbWlsaWtpIHBhcnQgbW9kZWwhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19PjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcIi1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgTW9kZWwgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZGFyaSBNb2RlbCBQYXJ0ICR7bmV3ZGF0YS5uYW1lfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeHRlbXAgPSBtb2RlbHBhcnRmaWVsZGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3BhcnRzKSA9PiBkb2NwYXJ0cy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvYy5pZCkgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZGF0YSA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MyKSA9PiBkb2MyLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzW2lkeGRhdGFdLnF1YW50aXR5IC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMuc3BsaWNlKGlkeGRhdGEsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMuaW5kZXhPZihkb2MuaWQpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX21vZGVsX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDbG9zZUNpcmNsZU91dGxpbmVkIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFzc2V0IFR5cGV7XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bGFzc2V0dHlwZVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPntkb2MubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX2NvbHVtbnMubWFwKChkb2NtYywgaWR4bWMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5uYW1lfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bHNuXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hhckF0KDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyIG15LWF1dG8gcHgtMiBweS0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBiZy13aGl0ZSBib3JkZXIgdy0zLzEyIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gcHgtMiBweS0xIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhvcHNpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRlZmF1bHQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdC5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2ksIGlkeG9wc2kpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeG9wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBiZy1ncmF5LTEwMCByb3VuZGVkIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciB3LWZ1bGwgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUgc3R5bGU9e3sgbWFyZ2luVG9wOiBgMXJlbWAgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UaW1lbGluZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsYXNzZXR0eXBlOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bHNuOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtlZGl0cGFydCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBteS0zIGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCByZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC01IHRleHQtbGcgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB4XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGlkbW9kZWx9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctMTEvMTIgbXItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17Y3VycmVudGlkbW9kZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5ncGFydCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ3BhcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRNb2RlbHM/cm93cz0xMCZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgIT09IFwiXCIgPyB2YWx1ZSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRtb2RlbGRhdGEoW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIGF0YXUgY2FyaSBuYW1hIG1vZHVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoaW5wdXQudG9Mb3dlckNhc2UoKSkgPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvblBvcHVwU2Nyb2xsPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGV2ZW50LnRhcmdldC5zY3JvbGxUb3AgKyBldmVudC50YXJnZXQub2Zmc2V0SGVpZ2h0ID09PSBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBzZXRwYWdlKHByZXYgPT4gcHJldiArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3BhZ2U9JHtwYWdlfSZyb3dzPTEwYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAudGhlbihyZXMyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNjcm9sbFRvKDAsIGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJlczIuZGF0YS50byA+PSByZXMyLmRhdGEudG90YWwgPyBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGFdKSA6IHNldG1vZGVsZGF0YShbLi4ubW9kZWxkYXRhLCByZXMyLmRhdGEuZGF0YSwgPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz5dKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21vZGVsZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2RvYy5pZH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IHB0LTIgbXktYXV0byBpdGVtcy1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nZ2V0bW9kZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bG9hZGluZ2dldG1vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWw/aWQ9JHtjdXJyZW50aWRtb2RlbH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wMSA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gcmVzMi5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09IFwibW9kZWxfY29sdW1uc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibW9kZWxfY29sdW1uc1wiXSA9IHJlczIuZGF0YVtwcm9wXS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlbHBhcnRzID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLm1vZGVsX3BhcnRzLm1hcCgoZG9jMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcDMgPSBkb2MyLm1vZGVsX2NvbHVtbnMubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYzMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jMyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG1hcDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibW9kZWxfcGFydHNcIl0gPSBtb2RlbHBhcnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcImlkXCJdID0gcmVzMi5kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm5hbWVcIl0gPSByZXMyLmRhdGEubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcDEgPSBbLi4udGVtcDEsIHRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldGNvbmNhdHBhcnR2YWx1ZShyZXMyLmRhdGEubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dHJpZ2dlcihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEyID0gdGVtcC5hZGRfbW9kZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMykgPT4gZG9jMy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50aWRtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZGF0YTIgPT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50aWRtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlkeGRhdGEyICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5tYXAoKGRvYzEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2MxLmlkID09PSBjdXJyZW50aWRtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MxLnF1YW50aXR5ID0gZG9jMS5xdWFudGl0eSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDgwJWAsIGhlaWdodDogYDRyZW1gIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICsgVGFtYmFoIFBhcnQgTW9kZWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Gb3JtIFRhbWJhaCBNb2RlbDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtpbnN0YW5jZUZvcm0yLnN1Ym1pdH1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nY3JlYXRlbW9kZWx9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGNyZWF0ZW1vZGVsfVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXs5MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIG1iLThcIj5cbiAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtMn1cbiAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgIG9uRmluaXNoPXtoYW5kbGVDcmVhdGVNb2RlbGluTW9kZWx9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIkFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFzc2V0IFR5cGUgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgICBkcm9wZG93blN0eWxlPXt7IG1heEhlaWdodDogNDAwLCBvdmVyZmxvdzogXCJhdXRvXCIgfX1cbiAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIEFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MihcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLmFsbENoZWNrZWROb2Rlc1swXS5ub2RlLnByb3BzLmlkXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQyKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgIG5hbWU9XCJtYW51ZmFjdHVyZXJfaWRcIlxuICAgICAgICAgICAgICBsYWJlbD1cIk1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk1hbnVmYWN0dXJlciB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbWFudWZhY3R1cmVyX2lkOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG5hbWU9XCJtYW51ZmFjdHVyZXJfaWRcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge21hbnVmZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBkZXNjcmlwdGlvbjogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgcmVxdWlyZWRfc246IGUudGFyZ2V0LmNoZWNrZWQgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhMi5yZXF1aXJlZF9zbn1cbiAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgIFNlcmlhbCBOdW1iZXIgd2FqaWIgYWRhXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlNwZXNpZmlrYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ3NwZWMyID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhW2lkeF0ucmVxdWlyZWQgPyA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPiA6IG51bGx9IDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPih7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIiA/IFwiU2luZ2xlIFRleHRib3hcIiA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LWZ1bGwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRyb3Bkb3duXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaSBkaWJhd2FoIGluaTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvY2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctNyBmbGV4IGp1c3RpZnktY2VudGVyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3ggb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl1bXCJkZWZhdWx0XCJdID0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19IGRlZmF1bHRWYWx1ZT17ZG9jY30gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH0gZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwicGFyYWdyYXBoXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhIHJvd3M9ezR9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3ggc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl1bXCJkZWZhdWx0XCJdLnB1c2goaWR4eClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0gLz4ge2RvY2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGVcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlciBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGRhdGVTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgIH0gKi99XG4gICAgICAgICAge2xvYWRpbmdzcGVjMiA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGFhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAge2FkZGVkZmllbGQzW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnQyfSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMyh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMihmaWVsZGRhdGFhW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2N4eCwgaWR4eCkgPT4gZG9jeHguaWQgIT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIzKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YWE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgzKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHtmaWVsZGRhdGFhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkMltpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDJdO1xuICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMihmaWVsZGRhdGFhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWEyW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZDJ9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+RGF0ZTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtpZHhjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9IHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfLCBpZHh4KSA9PiBpZHh4ICE9PSBmaWVsZGRhdGFhLmxlbmd0aCArIGlkeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQyLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGQyfVxuICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDgwJWAsIGhlaWdodDogYDRyZW1gIH19XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2tBZGRGaWVsZDJ9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Gb3JtIFRhbWJhaCBNYW51ZmFjdHVyZXI8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxtYW51ZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRtYW51Zn1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRNYW51ZmFjdHVyZXJ9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ21hbnVmfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxtYW51Zn1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIE5hbWEgTWFudWZhY3R1cmVyIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFtYW51XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhbWFudWYubmFtZX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOYW1hIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICA/IHNldGRpc2FibGVkbWFudWYodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRtYW51ZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YW1hbnVmKHsgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hbWFudTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIGNvbnN0IG1vZGVsaWQgPSBwYXJhbXMubW9kZWxJZDtcbiAgdmFyIGluaXRQcm9wcyA9IHt9O1xuICBpZiAoIXJlcS5oZWFkZXJzLmNvb2tpZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBjb25zdCBjb29raWVzSlNPTjEgPSBodHRwY29va2llLnBhcnNlKHJlcS5oZWFkZXJzLmNvb2tpZSk7XG4gIGlmICghY29va2llc0pTT04xLnRva2VuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGluaXRQcm9wcyA9IGNvb2tpZXNKU09OMS50b2tlbjtcbiAgY29uc3QgcmVzb3VyY2VzID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uID0gYXdhaXQgcmVzb3VyY2VzLmpzb24oKTtcbiAgY29uc3QgZGF0YVByb2ZpbGUgPSByZXNqc29uO1xuXG4gIHJldHVybiB7XG4gICAgcHJvcHM6IHtcbiAgICAgIGluaXRQcm9wcyxcbiAgICAgIGRhdGFQcm9maWxlLFxuICAgICAgc2lkZW1lbnU6IFwiODJcIixcbiAgICAgIG1vZGVsaWQsXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZWxzVXBkYXRlMjtcbiJdfQ== */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4500,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4499,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4467,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1181,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ModelsUpdate2, \"nF2fyCtVweQLz3nLA6tV083rvh8=\", false, function () {\n  return [useRouter, _Form.useForm, _Form.useForm];\n});\n\n_c = ModelsUpdate2;\nexport var __N_SSP = true;\nexport default ModelsUpdate2;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModelsUpdate2\");","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js"],"names":["DeleteOutlined","CalendarOutlined","CloseCircleOutlined","PlusSquareTwoTone","Modal","moment","Link","useRouter","useEffect","useState","Sticky","Layout","st","ModelsUpdate2","sidemenu","dataProfile","initProps","modelid","rt","pathArr","pathname","split","slice","splice","length","useForm","instanceForm","instanceForm2","Panel","renderChildPartModel","item","map","doc","idx","Children","name","model_columns","docmc2","required","data_type","charAt","toUpperCase","width","backgroundColor","color","opsi","doc2","idx2","doc3","idx3","marginRight","model_parts","id","asset_id","description","manufacturer_id","required_sn","is_consumable","add_columns","delete_column_ids","update_columns","add_models","delete_model_ids","newdata","setnewdata","newdata2","setnewdata2","defaultdata","setdefaultdata","assetdata","setassetdata","manufdata","setmanufdata","modeldata","setmodeldata","fielddata","setfielddata","fielddata2","setfielddata2","fielddataa","setfielddataa","fielddataa2","setfielddataa2","modelpartfielddata","setmodelpartfielddata","currentfield","setcurrentfield","currentfield2","setcurrentfield2","currentidmodel","setcurrentidmodel","addedfield","setaddedfield","addedfield1","setaddedfield1","addedfield2","setaddedfield2","addedfield3","setaddedfield3","addedfieldidx","setaddedfieldidx","addedfieldtrigger","setaddedfieldtrigger","addedfieldidx1","setaddedfieldidx1","addedfieldtrigger1","setaddedfieldtrigger1","addedfieldidx2","setaddedfieldidx2","addedfieldtrigger2","setaddedfieldtrigger2","addedfieldidx3","setaddedfieldidx3","addedfieldtrigger3","setaddedfieldtrigger3","loadingcreate","setloadingcreate","loadingcreatemodel","setloadingcreatemodel","loadinggetmodel","setloadinggetmodel","praloading","setpraloading","loadingspec","setloadingspec","loadingspec2","setloadingspec2","currentdropdown2","setcurrentdropdown2","currentdropdownn2","setcurrentdropdownn2","currentcheckeddropdown2","setcurrentcheckeddropdown2","currentcheckeddropdownn2","setcurrentcheckeddropdownn2","valuedropdowntrigger","setvaluedropdowntrigger","valuedropdowntrigger1","setvaluedropdowntrigger1","valuedropdowntrigger2","setvaluedropdowntrigger2","valuedropdowntrigger3","setvaluedropdowntrigger3","idxdropdowntrigger","setidxdropdowntrigger","idxdropdowntrigger1","setidxdropdowntrigger1","idxdropdowntrigger2","setidxdropdowntrigger2","idxdropdowntrigger3","setidxdropdowntrigger3","concatfieldtrigger","setconcatfieldtrigger","concataddcolumnstrigger","setconcataddcolumnstrigger","concataddcolumnsidx","setconcataddcolumnsidx","concataddcolumnsvalue","setconcataddcolumnsvalue","concataddcolumnstrigger1","setconcataddcolumnstrigger1","concataddcolumnsidx1","setconcataddcolumnsidx1","concataddcolumnsvalue1","setconcataddcolumnsvalue1","concatfieldtrigger2","setconcatfieldtrigger2","editpart","seteditpart","modalcreatemodel","setmodalcreatemodel","newdatatrigger","setnewdatatrigger","newdatatrigger2","setnewdatatrigger2","modeltrigger","setmodeltrigger","concatparttrigger","setconcatparttrigger","concatpartvalue","setconcatpartvalue","assettypecode","setassettypecode","assettypecode2","setassettypecode2","defaultmodel","setdefaultmodel","disabledtambah","setdisabledtambah","disabledtambah2","setdisabledtambah2","disabledaddfield","setdisabledaddfield","disabledaddfield2","setdisabledaddfield2","pointevent","setpointevent","pointevent2","setpointevent2","cd2","setcd2","cdidx","setcdidx","cdtrigger","setcdtrigger","cd2part","setcd2part","cdpartidx","setcdpartidx","cdparttrigger","setcdparttrigger","changeasset","setchangeasset","defaultasset","setdefaultasset","fetchingpart","setfetchingpart","page","setpage","modalmanuf","setmodalmanuf","loadingmanuf","setloadingmanuf","disabledmanuf","setdisabledmanuf","triggermanuf","settriggermanuf","datamanuf","setdatamanuf","onClickAddField","onClickAddField2","onClickSelectAsset","Number","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","then","res","json","res2","temp","success","data","asset_columns","defaultassetid","docmap","newassetfielddata2","filter","docfilter","includes","concat","newfieldmap","docnewfield","prev","tempo","count","asset","code","manufacturer","arr","i","push","message","duration","onClickSelectAsset2","bool","handleCreateModel","t","prop","stringify","body","setTimeout","handleCreateModelinModel","handleAddManufacturer","console","log","latestInsertedManufacturer","recursivePartModel","temp11","temp1","yo","temp2","some","docsome","docadd","indexOf","idxaddcolumn","docadd2","docup","idxupcolumn","model_id","idxtemp","idxof","quantity","doc10","idx10","doc11","idx11","submit","maxHeight","overflow","value","label","extra","allCheckedNodes","node","props","e","target","fontSize","checked","PRESENTED_IMAGE_SIMPLE","docopsi","dok","idk","every","doca","idxa","toLowerCase","idxx","idxchecked","index","dateString","_","docdef","idxUpdateColumns","doctemp","height","docparts","idxdata","docmc","idxmc","idxopsi","marginTop","input","opt","children","modelparts","map3","idxdata2","doc1","docxx"],"mappings":"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","sourcesContent":["import { DeleteOutlined } from \"@ant-design/icons\";\nimport {\n  CalendarOutlined,\n  CloseCircleOutlined,\n  PlusSquareTwoTone,\n} from \"@ant-design/icons\";\nimport {\n  Button,\n  Checkbox,\n  Collapse,\n  DatePicker,\n  Empty,\n  Form,\n  Input,\n  InputNumber,\n  Popconfirm,\n  Select,\n  Spin,\n  Timeline,\n  TreeSelect,\n  notification,\n} from \"antd\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\n\nimport Layout from \"../../../../components/layout-dashboard\";\nimport st from \"../../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ModelsUpdate2 = ({ sidemenu, dataProfile, initProps, modelid }) => {\n  //1.Init\n  const rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(3, 1);\n  pathArr[pathArr.length - 1] = \"Ubah Model\";\n  const [instanceForm] = Form.useForm();\n  const [instanceForm2] = Form.useForm();\n  const { Panel } = Collapse;\n\n  //2.Helper functions\n  const renderChildPartModel = (item) => {\n    return item.map((doc, idx) => {\n      return <Children doc={doc}></Children>;\n    });\n  };\n\n  const Children = ({ doc }) => {\n    return (\n      <Timeline.Item>\n        <Collapse accordion>\n          {\n            <Panel header={doc.name}>\n              <div className=\"flex flex-col p-3\">\n                {/* <div className=\"flex flex-col mb-5\">\n                                    <h1 className=\"font-semibold mb-1\">Quantity <span className=\"judulsn\"></span></h1>\n                                    <div className=\"rounded bg-gray-200 w-full flex items-center my-auto h-12 px-2\">\n                                        <p className=\"mb-0 text-sm\">{doc.quantity}</p>\n                                    </div>\n                                </div> */}\n                {doc.model_columns.map((docmc2, idx) => {\n                  // var default2 = {}\n                  // if (docmc2.data_type === 'dropdown' || docmc2.data_type === 'checkbox') {\n                  //     default2 = JSON.parse(docmc2.default)\n                  // }\n                  return (\n                    <div className=\"flex flex-col mb-5\">\n                      <h1 className=\"font-semibold mb-1\">\n                        {docmc2.name}{\" \"}\n                        {docmc2.required ? (\n                          <span className=\"judulsn\"></span>\n                        ) : null}{\" \"}\n                        <span className=\"text-gray-400\">\n                          (\n                          {docmc2.data_type === \"single\"\n                            ? \"Single Textbox\"\n                            : docmc2.data_type.charAt(0).toUpperCase() +\n                              docmc2.data_type.slice(1)}\n                          {docmc2.data_type === \"paragraph\" && ` Text`})\n                        </span>\n                      </h1>\n                      <div className=\"w-full flex items-center my-auto px-2\">\n                        {docmc2.data_type === \"dropdown\" ||\n                        docmc2.data_type === \"checkbox\" ||\n                        docmc2.data_type === \"date\" ||\n                        docmc2.data_type === \"paragraph\" ? (\n                          <>\n                            {docmc2.data_type === \"dropdown\" && (\n                              <Select\n                                disabled\n                                style={{\n                                  width: `100%`,\n                                  backgroundColor: `rgba(229, 231, 235,1)`,\n                                  color: `rgba(229, 231, 235,1)`,\n                                }}\n                              >\n                                {docmc2.default.opsi.map((doc2, idx2) => (\n                                  <Select.Option disabled value={idx2}>\n                                    {doc2}\n                                  </Select.Option>\n                                ))}\n                              </Select>\n                            )}\n                            {docmc2.data_type === \"checkbox\" && (\n                              <div className=\"w-full flex flex-col\">\n                                {docmc2.default.opsi.map((doc3, idx3) => (\n                                  <div className=\"flex mb-1\">\n                                    <Checkbox\n                                      disabled\n                                      style={{ marginRight: `0.5rem` }}\n                                    ></Checkbox>\n                                    <p className=\"mb-0\">{doc3}</p>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                            {docmc2.data_type === \"date\" && (\n                              <div className=\"flex w-full items-center justify-between rounded bg-gray-100 h-10 px-3\">\n                                <p className=\"mb-0\">{docmc2.default}</p>\n                                <div>\n                                  <CalendarOutlined></CalendarOutlined>\n                                </div>\n                              </div>\n                            )}\n                            {docmc2.data_type === \"paragraph\" && (\n                              <div className=\"flex h-20 rounded border bg-gray-100 w-full px-3\">\n                                {docmc2.default}\n                              </div>\n                            )}\n                          </>\n                        ) : (\n                          <div className=\"rounded border bg-gray-100 flex items-center w-full h-10 px-3\">\n                            {docmc2.default}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n                {doc.model_parts.length > 0 &&\n                  renderChildPartModel(doc.model_parts)}\n              </div>\n              <style jsx>\n                {`\n                                                        .judulassettype::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                        .judulsn::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n              </style>\n            </Panel>\n          }\n        </Collapse>\n      </Timeline.Item>\n    );\n  };\n\n  //2.useState\n  const [newdata, setnewdata] = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: null,\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: [],\n  });\n  const [newdata2, setnewdata2] = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: \"\",\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: [],\n  });\n  const [defaultdata, setdefaultdata] = useState([]);\n  const [assetdata, setassetdata] = useState([]);\n  const [manufdata, setmanufdata] = useState([]);\n  const [modeldata, setmodeldata] = useState([]);\n  const [fielddata, setfielddata] = useState([]);\n  const [fielddata2, setfielddata2] = useState([]);\n  const [fielddataa, setfielddataa] = useState([]);\n  const [fielddataa2, setfielddataa2] = useState([]);\n  const [modelpartfielddata, setmodelpartfielddata] = useState([]);\n  const [currentfield, setcurrentfield] = useState({\n    name: \"\",\n    data_type: \"\",\n    default: \"single\",\n    required: false,\n  });\n  const [currentfield2, setcurrentfield2] = useState({\n    name: \"\",\n    data_type: \"\",\n    default: \"single\",\n    required: false,\n  });\n  const [currentidmodel, setcurrentidmodel] = useState(\"\");\n  const [addedfield, setaddedfield] = useState([]);\n  const [addedfield1, setaddedfield1] = useState([]);\n  const [addedfield2, setaddedfield2] = useState([]);\n  const [addedfield3, setaddedfield3] = useState([]);\n  const [addedfieldidx, setaddedfieldidx] = useState(-1);\n  const [addedfieldtrigger, setaddedfieldtrigger] = useState(false);\n  const [addedfieldidx1, setaddedfieldidx1] = useState(-1);\n  const [addedfieldtrigger1, setaddedfieldtrigger1] = useState(false);\n  const [addedfieldidx2, setaddedfieldidx2] = useState(-1);\n  const [addedfieldtrigger2, setaddedfieldtrigger2] = useState(false);\n  const [addedfieldidx3, setaddedfieldidx3] = useState(-1);\n  const [addedfieldtrigger3, setaddedfieldtrigger3] = useState(false);\n  const [loadingcreate, setloadingcreate] = useState(false);\n  const [loadingcreatemodel, setloadingcreatemodel] = useState(false);\n  const [loadinggetmodel, setloadinggetmodel] = useState(false);\n  const [praloading, setpraloading] = useState(true);\n  const [loadingspec, setloadingspec] = useState(false);\n  const [loadingspec2, setloadingspec2] = useState(false);\n  const [currentdropdown2, setcurrentdropdown2] = useState([\"\", \"\"]);\n  const [currentdropdownn2, setcurrentdropdownn2] = useState([\"\", \"\"]);\n  const [currentcheckeddropdown2, setcurrentcheckeddropdown2] = useState(\"\");\n  const [currentcheckeddropdownn2, setcurrentcheckeddropdownn2] = useState(\"\");\n  const [valuedropdowntrigger, setvaluedropdowntrigger] = useState(false);\n  const [valuedropdowntrigger1, setvaluedropdowntrigger1] = useState(false);\n  const [valuedropdowntrigger2, setvaluedropdowntrigger2] = useState(false);\n  const [valuedropdowntrigger3, setvaluedropdowntrigger3] = useState(false);\n  const [idxdropdowntrigger, setidxdropdowntrigger] = useState(-1);\n  const [idxdropdowntrigger1, setidxdropdowntrigger1] = useState(-1);\n  const [idxdropdowntrigger2, setidxdropdowntrigger2] = useState(-1);\n  const [idxdropdowntrigger3, setidxdropdowntrigger3] = useState(-1);\n  const [concatfieldtrigger, setconcatfieldtrigger] = useState(false);\n  const [concataddcolumnstrigger, setconcataddcolumnstrigger] = useState(false);\n  const [concataddcolumnsidx, setconcataddcolumnsidx] = useState(-1);\n  const [concataddcolumnsvalue, setconcataddcolumnsvalue] = useState(-1);\n  const [concataddcolumnstrigger1, setconcataddcolumnstrigger1] =\n    useState(false);\n  const [concataddcolumnsidx1, setconcataddcolumnsidx1] = useState(-1);\n  const [concataddcolumnsvalue1, setconcataddcolumnsvalue1] = useState(-1);\n  const [concatfieldtrigger2, setconcatfieldtrigger2] = useState(false);\n  const [editpart, seteditpart] = useState(false);\n  const [modalcreatemodel, setmodalcreatemodel] = useState(false);\n  const [newdatatrigger, setnewdatatrigger] = useState(false);\n  const [newdatatrigger2, setnewdatatrigger2] = useState(false);\n  const [modeltrigger, setmodeltrigger] = useState(false);\n  const [concatparttrigger, setconcatparttrigger] = useState(false);\n  const [concatpartvalue, setconcatpartvalue] = useState(-1);\n  const [assettypecode, setassettypecode] = useState(\"\");\n  const [assettypecode2, setassettypecode2] = useState(\"\");\n  const [defaultmodel, setdefaultmodel] = useState({});\n  const [disabledtambah, setdisabledtambah] = useState(false);\n  const [disabledtambah2, setdisabledtambah2] = useState(false);\n  const [disabledaddfield, setdisabledaddfield] = useState(false);\n  const [disabledaddfield2, setdisabledaddfield2] = useState(false);\n  const [pointevent, setpointevent] = useState(\"\");\n  const [pointevent2, setpointevent2] = useState(\"\");\n  const [cd2, setcd2] = useState([\"\", \"\"]);\n  const [cdidx, setcdidx] = useState(-1);\n  const [cdtrigger, setcdtrigger] = useState(false);\n  const [cd2part, setcd2part] = useState([\"\", \"\"]);\n  const [cdpartidx, setcdpartidx] = useState(-1);\n  const [cdparttrigger, setcdparttrigger] = useState(false);\n  const [changeasset, setchangeasset] = useState([]);\n  const [defaultasset, setdefaultasset] = useState([]);\n  const [fetchingpart, setfetchingpart] = useState(false);\n  const [page, setpage] = useState(1);\n  //create manufacturer\n  const [modalmanuf, setmodalmanuf] = useState(false);\n  const [loadingmanuf, setloadingmanuf] = useState(false);\n  const [disabledmanuf, setdisabledmanuf] = useState(true);\n  const [triggermanuf, settriggermanuf] = useState(-1);\n  const [datamanuf, setdatamanuf] = useState({\n    name: \"\",\n  });\n\n  //3.onChange\n  const onClickAddField = () => {\n    setfielddata([\n      ...fielddata,\n      {\n        name: \"\",\n        data_type: \"\",\n        default: \"\",\n        required: false,\n      },\n    ]);\n    setcurrentfield({\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false,\n    });\n    setaddedfield1([...addedfield1, false]);\n    setcurrentdropdown2([\"\", \"\"]);\n    setcd2([\"\", \"\"]);\n    setcurrentcheckeddropdown2([]);\n    setdisabledaddfield(true);\n    setdisabledtambah(true);\n    setpointevent(\"pointer-events-none\");\n  };\n  const onClickAddField2 = () => {\n    setfielddataa2([\n      ...fielddataa2,\n      {\n        name: \"\",\n        data_type: \"\",\n        default: \"\",\n        required: false,\n      },\n    ]);\n    setcurrentfield2({\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false,\n    });\n    setcurrentdropdownn2([\"\", \"\"]);\n    setcd2part([\"\", \"\"]);\n    setcurrentcheckeddropdownn2([]);\n    setdisabledaddfield2(true);\n    setdisabledtambah2(true);\n    setpointevent2(\"pointer-events-none\");\n  };\n  const onClickSelectAsset = (id) => {\n    setnewdata({ ...newdata, asset_id: Number(id) });\n    setloadingspec(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAsset?id=${id}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var temp = [];\n        if (res2.success) {\n          temp = res2.data.asset_columns.map((doc, idx) => {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return {\n                ...doc,\n                default:\n                  doc.default === \"\" || doc.default === \"-\"\n                    ? doc.default\n                    : JSON.parse(doc.default),\n              };\n            } else {\n              return { ...doc };\n            }\n          });\n          const defaultassetid = defaultasset.map((docmap) => docmap.id);\n          const newassetfielddata2 = newdata.model_columns\n            .filter((docfilter) => defaultassetid.includes(docfilter.id))\n            .concat(temp);\n          const newfieldmap = newdata.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setfielddata2((prev) => {\n            var tempo = prev;\n            tempo = tempo\n              .filter((docfilter) => defaultassetid.includes(docfilter.id))\n              .concat(temp);\n            return tempo;\n          });\n          setnewdata({\n            ...newdata,\n            id: defaultmodel.id,\n            name: defaultmodel.name,\n            description: defaultmodel.description,\n            model_columns: newassetfielddata2.concat(newfieldmap),\n            add_columns: temp.concat(newfieldmap),\n            required_sn: res2.data.required_sn,\n          });\n          setdefaultdata({\n            ...defaultdata,\n            id: defaultmodel.id,\n            name: defaultmodel.name,\n            description: defaultmodel.description,\n            manufacturer_id: defaultmodel.manufacturer_id,\n            count: defaultmodel.count,\n            asset: {\n              id: res2.data.id,\n              name: res2.data.name,\n              code: res2.data.code,\n              description: res2.data.description,\n            },\n            manufacturer: {\n              id: defaultmodel.manufacturer.id,\n              name: defaultmodel.manufacturer.name,\n            },\n            asset_id: Number(id),\n            model_columns: defaultasset,\n            add_columns: [],\n            update_columns: [],\n            delete_column_ids: [],\n            add_models: [],\n            delete_model_ids: [],\n            required_sn: res2.data.required_sn,\n          });\n          var arr = [];\n          for (var i = 0; i < newassetfielddata2.length; i++) {\n            arr.push(true);\n          }\n          setchangeasset(temp);\n          setaddedfield(arr);\n          setloadingspec(false);\n          setdisabledaddfield(false);\n          notification[\"info\"]({\n            message: \"Anda Telah Mengubah Asset Type\",\n            description:\n              \"Hal ini membuat field dari asset type terkait terbentuk di form ini!\",\n            duration: 0,\n          });\n        } else {\n          temp = [];\n          // setfielddata2(temp)\n          const newfieldmap = newdata.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setnewdata({\n            ...newdata,\n            model_columns: newdata.model_columns.concat(newfieldmap),\n            required_sn: false,\n            asset_id: 0,\n          });\n          setloadingspec(false);\n          setdisabledaddfield(true);\n        }\n      });\n  };\n  const onClickSelectAsset2 = (id) => {\n    setloadingspec2(true);\n    setnewdata2({ ...newdata2, asset_id: Number(id) });\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAsset?id=${id}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var temp = [];\n        if (res2.success) {\n          temp = res2.data.asset_columns.map((doc, idx) => {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return {\n                ...doc,\n                default: JSON.parse(doc.default),\n              };\n            } else {\n              return { ...doc };\n            }\n          });\n          var bool = [];\n          for (var i = 0; i < temp.length; i++) {\n            bool.push(true);\n          }\n          setaddedfield3(bool);\n          setfielddataa(temp);\n          const newfieldmap = newdata2.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setnewdata2({\n            ...newdata2,\n            required_sn: res2.data.required_sn,\n            asset_id: res2.data.code,\n            model_columns: temp.concat(newfieldmap),\n          });\n          setassettypecode2(res2.data.id);\n          // setnewdatatrigger2(prev => !prev)\n          setloadingspec2(false);\n          setdisabledaddfield2(false);\n        } else {\n          temp = [];\n          const newfieldmap = newdata2.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setfielddataa(temp);\n          setnewdata2({\n            ...newdata2,\n            model_columns: temp.concat(newfieldmap),\n            required_sn: false,\n            asset_id: 0,\n          });\n          setloadingspec2(false);\n        }\n      });\n  };\n\n  //4.handle\n  const handleCreateModel = () => {\n    var t = {};\n    for (var prop in newdata) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"update_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"add_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"asset_id\") {\n        t[prop] = Number(assettypecode);\n      } else {\n        t[prop] = newdata[prop];\n      }\n    }\n    setloadingcreate(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateModel`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(t),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingcreate(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Model berhasil diubah\",\n            duration: 3,\n          });\n          setTimeout(() => {\n            setmodalcreatemodel(false);\n            rt.push(`/admin/models/detail/${modelid}`);\n          }, 500);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleCreateModelinModel = () => {\n    var t = {};\n    for (var prop in newdata2) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata2[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"asset_id\") [(t[prop] = Number(assettypecode2))];\n      else {\n        t[prop] = newdata2[prop];\n      }\n    }\n    setloadingcreatemodel(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addModel`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(t),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingcreatemodel(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Model berhasil ditambahkan\",\n            duration: 3,\n          });\n          setnewdata2({\n            asset_id: \"\",\n            name: \"\",\n            description: \"\",\n            manufacturer_id: \"\",\n            required_sn: false,\n            is_consumable: false,\n            model_columns: [],\n            model_parts: [],\n          });\n          setmodalcreatemodel(false);\n          seteditpart(false);\n          setmodeltrigger(res2.id);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleAddManufacturer = () => {\n    setloadingmanuf(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addManufacturer`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(datamanuf),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingmanuf(false);\n        setmodalmanuf(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Manufacturer berhasil ditambahkan\",\n            duration: 2,\n          });\n          setdatamanuf({\n            ...datamanuf,\n            name: \"\",\n          });\n\n          console.log(res2);\n\n          settriggermanuf((prev) => prev + 1);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n\n  //5.useEffect\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setassetdata(res2.data);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getManufacturers`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        const data = res2.data;\n        const latestInsertedManufacturer = data[data.length - 1];\n        console.log(latestInsertedManufacturer);\n\n        /** Set new inserted manufacturer as default selected option in the \"Manufacturer\" dropdown */\n        setmanufdata(data);\n        setnewdata((prev) => ({...prev, manufacturer_id: latestInsertedManufacturer.id }))\n      });\n  }, [triggermanuf]);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModel?id=${modelid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        const temp = res2.data.model_columns.map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default:\n                doc.default === \"\" || doc.default === \"-\"\n                  ? doc.default\n                  : JSON.parse(doc.default),\n            };\n          } else {\n            return {\n              ...doc,\n            };\n          }\n        });\n        //model_parts\n        const recursivePartModel = (item) => {\n          var temp11 = [];\n          for (var i = 0; i < item.length; i++) {\n            var temp1 = {};\n            temp1 = item[i].model_columns.map((doc, idx) => {\n              if (\n                doc.data_type === \"dropdown\" ||\n                doc.data_type === \"checkbox\"\n              ) {\n                return {\n                  ...doc,\n                  default:\n                    doc.default === \"\" || doc.default === \"-\"\n                      ? doc.default\n                      : JSON.parse(doc.default),\n                };\n              } else {\n                return {\n                  ...doc,\n                };\n              }\n            });\n            temp11.push({\n              ...item[i],\n              model_columns: temp1,\n              model_parts:\n                item[i].model_parts.length > 0\n                  ? recursivePartModel(item[i].model_parts)\n                  : [],\n            });\n          }\n          return temp11;\n        };\n        const yo = recursivePartModel(res2.data.model_parts);\n        const temp2 = {\n          ...res2.data,\n          asset_id: res2.data.asset.code,\n          model_columns: temp,\n          add_columns: [],\n          update_columns: [],\n          delete_column_ids: [],\n          add_models: [],\n          delete_model_ids: [],\n        };\n        setnewdata(temp2);\n        setdefaultdata(temp2);\n        setdefaultasset(temp);\n        setdefaultmodel(temp2);\n        setfielddata2(temp);\n        setmodelpartfielddata(yo);\n        var arr = [];\n        for (var i = 0; i < res2.data.model_columns.length; i++) {\n          arr.push(true);\n        }\n        setaddedfield(arr);\n        setassettypecode(res2.data.asset_id);\n        setpraloading(false);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setmodeldata(res2.data.data);\n        setcurrentidmodel(modeltrigger);\n        modeltrigger !== false ? seteditpart(true) : null;\n      });\n  }, [modeltrigger]);\n  //checkbox dropdown dari model utama yang field asset\n  useEffect(() => {\n    if (idxdropdowntrigger !== -1) {\n      setfielddata2((prev) => {\n        const temp = prev;\n        temp[idxdropdowntrigger][\"default\"] = {\n          default: currentcheckeddropdown2,\n          opsi: currentdropdown2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger]);\n  //checkbox dropdown dari model utama yang field buat sendiri\n  useEffect(() => {\n    if (idxdropdowntrigger1 !== -1) {\n      setfielddata((prev) => {\n        const temp = prev;\n        // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n        temp[idxdropdowntrigger1][\"default\"] = {\n          default: currentcheckeddropdown2,\n          opsi: currentdropdown2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger1]);\n  useEffect(() => {\n    setnewdata({\n      ...newdata,\n      model_columns: fielddata2.concat(fielddata),\n    });\n  }, [concatfieldtrigger]);\n  useEffect(() => {\n    if (concataddcolumnsidx !== -1) {\n      if (\n        changeasset.some(\n          (docsome) => docsome.id === concataddcolumnsvalue.id\n        ) ||\n        typeof concataddcolumnsvalue.id === \"undefined\"\n      ) {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (\n          newdata.add_columns\n            .map((docadd) => docadd.name)\n            .indexOf(currentfield.name) === -1\n        ) {\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(fielddata2[fielddata2.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          const idxaddcolumn = newdata.add_columns\n            .map((docadd2) => docadd2.name)\n            .indexOf(currentfield.name);\n          // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (\n          newdata.update_columns\n            .map((docup) => docup.id)\n            .indexOf(currentfield.id) === -1\n        ) {\n          setnewdata((prev) => {\n            var temp = prev;\n            temp.update_columns.push(fielddata2[concataddcolumnsidx]);\n            return temp;\n          });\n        } else {\n          const idxupcolumn = newdata.update_columns\n            .map((docadd2) => docadd2.id)\n            .indexOf(currentfield.id);\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger]);\n  useEffect(() => {\n    if (concataddcolumnsidx1 !== -1) {\n      if (\n        concataddcolumnsidx1 > defaultdata.model_columns.length - 1 ||\n        typeof concataddcolumnsvalue1.id === \"undefined\" ||\n        changeasset === true\n      ) {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (\n          newdata.add_columns\n            .map((docadd) => docadd.name)\n            .indexOf(currentfield.name) === -1\n        ) {\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(fielddata[fielddata.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          const idxaddcolumn = newdata.add_columns\n            .map((docadd2) => docadd2.name)\n            .indexOf(currentfield.name);\n          // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (\n          newdata.update_columns\n            .map((docup) => docup.id)\n            .indexOf(currentfield.id) === -1\n        ) {\n          setnewdata((prev) => {\n            var temp = prev;\n            temp.update_columns.push(fielddata[concataddcolumnsidx1]);\n            return temp;\n          });\n        } else {\n          const idxupcolumn = newdata.update_columns\n            .map((docadd2) => docadd2.id)\n            .indexOf(currentfield.id);\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger1]);\n  useEffect(() => {\n    if (addedfieldidx !== -1) {\n      setaddedfield((prev) => {\n        if (prev[addedfieldidx] === false) {\n          prev[addedfieldidx] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger]);\n  useEffect(() => {\n    if (addedfieldidx1 !== -1) {\n      setaddedfield1((prev) => {\n        if (prev[addedfieldidx1] === false) {\n          prev[addedfieldidx1] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx1] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger1]);\n  useEffect(() => {\n    if (addedfieldidx3 !== -1) {\n      setaddedfield3((prev) => {\n        if (prev[addedfieldidx3] === false) {\n          prev[addedfieldidx3] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx3] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger3]);\n\n  //checkbox dropdown dari model baru yang field asset\n  useEffect(() => {\n    if (idxdropdowntrigger3 !== -1) {\n      setfielddataa((prev) => {\n        const temp = prev;\n        // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n        temp[idxdropdowntrigger3][\"default\"] = {\n          default: currentcheckeddropdownn2,\n          opsi: currentdropdownn2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger3]);\n  //checkbox dropdown dari model baru yang field buat sendiri\n  useEffect(() => {\n    if (idxdropdowntrigger2 !== -1) {\n      setfielddataa2((prev) => {\n        const temp = prev;\n        temp[idxdropdowntrigger2][\"default\"] = {\n          default: currentcheckeddropdownn2,\n          opsi: currentdropdownn2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger2]);\n  useEffect(() => {\n    setnewdata2({\n      ...newdata2,\n      model_columns: fielddataa.concat(fielddataa2),\n    });\n  }, [concatfieldtrigger2]);\n  useEffect(() => {\n    if (addedfieldidx2 !== -1) {\n      setaddedfield2((prev) => {\n        if (prev[addedfieldidx2] === false) {\n          prev[addedfieldidx2] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx2] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger2]);\n\n  useEffect(() => {\n    setnewdata({ ...newdata, model_columns: fielddata });\n  }, [newdatatrigger]);\n  useEffect(() => {\n    setnewdata2({ ...newdata2, model_columns: fielddataa });\n  }, [newdatatrigger2]);\n\n  useEffect(() => {\n    var temp = [];\n    if (concatpartvalue !== -1) {\n      if (concatpartvalue.length === 0) {\n        setnewdata({ ...newdata, model_parts: [] });\n      } else {\n        concatpartvalue.map((doc, idx) => {\n          var idxtemp = temp.map((doc) => doc.id).indexOf(doc.id);\n          if (idxtemp !== -1 && temp[idxtemp][\"id\"] === doc.id) {\n            var idxof = temp.map((doc) => doc.id).indexOf(doc.id);\n            temp[idxof] = {\n              ...temp[idxof],\n              quantity: temp[idxof].quantity + doc.quantity,\n            };\n          } else if (idxtemp === -1) {\n            temp.push({\n              id: doc.id,\n              quantity: doc.quantity,\n            });\n          }\n        });\n        setnewdata({ ...newdata, add_models: temp });\n      }\n    }\n  }, [concatparttrigger]);\n  useEffect(() => {\n    if (cdidx !== -1) {\n      setcurrentdropdown2((prev) => {\n        return cd2.filter((doc10, idx10) => idx10 !== cdidx);\n      });\n      setcd2((prev) => prev.filter((doc11, idx11) => idx11 !== cdidx));\n    }\n  }, [cdtrigger]);\n  useEffect(() => {\n    if (cdpartidx !== -1) {\n      setcurrentdropdownn2((prev) => {\n        return cd2part.filter((doc10, idx10) => idx10 !== cdpartidx);\n      });\n      setcd2part((prev) => prev.filter((doc11, idx11) => idx11 !== cdpartidx));\n    }\n  }, [cdparttrigger]);\n  return (\n    <Layout\n      st={st}\n      tok={initProps}\n      sidemenu={sidemenu}\n      dataProfile={dataProfile}\n      pathArr={pathArr}\n    >\n      <div\n        className=\"w-full h-auto grid grid-cols-1 md:grid-cols-4\"\n        id=\"createAssetsWrapper\"\n      >\n        <div className=\" col-span-1 md:col-span-4 mb-8\">\n          <Sticky containerSelectorFocus=\"#createAgentsWrapper\">\n            <div className=\" col-span-4 flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white\">\n              <h1 className=\"font-semibold py-2\">\n                Form Ubah Model - {newdata.name}\n              </h1>\n              <div className=\"flex space-x-2\">\n                <Link href={`/admin/models/detail/${modelid}`}>\n                  <Button\n                    /*onClick={() => { console.log(newdata); console.log(fielddata); console.log(fielddata2); console.log(defaultdata); console.log(defaultasset) }}*/ type=\"default\"\n                  >\n                    Batal\n                  </Button>\n                </Link>\n                <Button\n                  type=\"primary\"\n                  loading={loadingcreate}\n                  disabled={disabledaddfield}\n                  onClick={instanceForm.submit}\n                >\n                  Simpan\n                </Button>\n              </div>\n            </div>\n          </Sticky>\n        </div>\n        <div className=\"col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\">\n          <div className=\"mb-5\">\n            <h1 className=\"font-bold text-xl\">Informasi Model</h1>\n          </div>\n          <div className=\"shadow-md border p-8 flex flex-col rounded-md\">\n            {praloading ? (\n              <Spin></Spin>\n            ) : (\n              <Form\n                form={instanceForm}\n                layout=\"vertical\"\n                onFinish={handleCreateModel}\n                initialValues={newdata}\n              >\n                <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                  <Form.Item\n                    name=\"asset_id\"\n                    label=\"Asset Type\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Asset Type wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <TreeSelect\n                      style={{ marginRight: `1rem` }}\n                      dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                      treeData={assetdata}\n                      placeholder=\"Pilih Asset Type\"\n                      treeDefaultExpandAll\n                      onChange={(value, label, extra) => {\n                        if (typeof value !== \"undefined\") {\n                          onClickSelectAsset(\n                            extra.allCheckedNodes[0].node.props.id\n                          );\n                        } else {\n                          onClickSelectAsset(0);\n                        }\n                      }}\n                      allowClear\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    name=\"name\"\n                    label=\"Nama Model\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Nama Model wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      name=\"name\"\n                      onChange={(e) => {\n                        setnewdata({ ...newdata, name: e.target.value });\n                      }}\n                    />\n                  </Form.Item>\n                </div>\n                <div className=\"flex mb-2\">\n                  <div className=\" w-11/12 mr-2\">\n                    <Form.Item name=\"manufacturer_id\" label=\"Manufacturer\">\n                      <Select\n                        placeholder=\"Pilih Manufacturer\"\n                        onChange={(value) => {\n                          console.log(value);\n                          setnewdata({ ...newdata, manufacturer_id: value });\n                        }}\n                      >\n                        {manufdata.map((doc, idx) => {\n                          return (\n                            <Select.Option key={idx} value={doc.id}>\n                              {doc.name}\n                            </Select.Option>\n                          );\n                        })}\n                      </Select>\n                    </Form.Item>\n                  </div>\n                  <div\n                    className=\"w-1/12 flex pt-2 my-auto items-center justify-center cursor-pointer\"\n                    onClick={() => {\n                      setmodalmanuf(true);\n                    }}\n                  >\n                    <PlusSquareTwoTone style={{ fontSize: `1.5rem` }} />\n                  </div>\n                </div>\n                <Form.Item name=\"description\" label=\"Deskripsi\">\n                  <Input.TextArea\n                    rows={4}\n                    name=\"description\"\n                    onChange={(e) => {\n                      setnewdata({ ...newdata, description: e.target.value });\n                    }}\n                  />\n                </Form.Item>\n                <div className=\"flex mb-5\">\n                  <Checkbox\n                    style={{ marginRight: `0.5rem` }}\n                    onChange={(e) => {\n                      setnewdata({ ...newdata, required_sn: e.target.checked });\n                    }}\n                    checked={newdata.required_sn}\n                  />{\" \"}\n                  Serial Number wajib ada\n                </div>\n                <div className=\"flex\">\n                  <Checkbox\n                    style={{ marginRight: `0.5rem` }}\n                    onChange={(e) => {\n                      setnewdata({\n                        ...newdata,\n                        is_consumable: e.target.checked,\n                      });\n                    }}\n                    checked={newdata.is_consumable}\n                  />{\" \"}\n                  Model Consumable dengan satuan jumlah\n                </div>\n              </Form>\n            )}\n          </div>\n        </div>\n        <div className=\" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\">\n          <div className=\"mb-5\">\n            <h1 className=\"font-bold text-xl\">Spesifikasi Model</h1>\n          </div>\n          {loadingspec ? (\n            <Spin />\n          ) : (\n            <>\n              {fielddata2.length === 0 ? (\n                <Empty image={Empty.PRESENTED_IMAGE_SIMPLE}></Empty>\n              ) : (\n                fielddata2.map((doc, idx) => {\n                  return (\n                    <>\n                      {addedfield[idx] === true ? (\n                        <div\n                          key={idx}\n                          className={`${pointevent} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                          onClick={() => {\n                            const temp = [...addedfield];\n                            temp[idx] = false;\n                            for (var i = 0; i < temp.length; i++) {\n                              if (i !== idx) {\n                                temp[i] = true;\n                              }\n                            }\n                            setaddedfield(temp);\n                            setcurrentfield(fielddata2[idx]);\n                            if (\n                              doc.data_type === \"dropdown\" ||\n                              doc.data_type === \"checkbox\"\n                            ) {\n                              setcurrentdropdown2(doc.default.opsi);\n                              setcurrentcheckeddropdown2(doc.default.default);\n                            }\n                            if (\n                              fielddata2[idx].data_type !== \"dropdown\" ||\n                              fielddata2[idx].data_type !== \"checkbox\"\n                            ) {\n                              setcd2(doc.default.opsi);\n                              if (\n                                fielddata2[idx].name !== \"\" &&\n                                fielddata2[idx].data_type !== \"\"\n                              ) {\n                                setdisabledtambah(false);\n                              } else {\n                                setdisabledtambah(true);\n                              }\n                            } else {\n                              if (\n                                doc.default.opsi.some(\n                                  (docopsi) => docopsi === \"\"\n                                )\n                              ) {\n                                setdisabledtambah(true);\n                              } else {\n                                setdisabledtambah(false);\n                              }\n                            }\n                            setdisabledaddfield(true);\n                            setpointevent(\"pointer-events-none\");\n                          }}\n                        >\n                          <div className=\"font-semibold mb-2\">\n                            {doc.name}\n                            {fielddata2[idx].required ? (\n                              <span className=\"judulField\"></span>\n                            ) : null}{\" \"}\n                            <span className=\"text-gray-400 text-sm\">\n                              (\n                              {doc.data_type === \"single\"\n                                ? \"Single Textbox\"\n                                : doc.data_type.charAt(0).toUpperCase() +\n                                  doc.data_type.slice(1)}\n                              {doc.data_type === \"paragraph\" && ` Text`})\n                            </span>\n                          </div>\n                          <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                            {doc.data_type === \"checkbox\" ||\n                            doc.data_type === \"dropdown\" ||\n                            doc.data_type === \"paragraph\" ||\n                            doc.data_type === \"date\" ? (\n                              <>\n                                {doc.data_type === \"dropdown\" && (\n                                  <div className=\"flex flex-col w-full\">\n                                    {doc.default.opsi.map((dok, idk) => {\n                                      return (\n                                        <div\n                                          key={idk}\n                                          className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                        >\n                                          <Checkbox\n                                            disabled\n                                            checked={\n                                              doc.default.default === idk\n                                                ? true\n                                                : false\n                                            }\n                                            style={{ marginRight: `0.5rem` }}\n                                          />\n                                          <p className=\"mb-0\">{dok}</p>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                )}\n                                {doc.data_type === \"checkbox\" && (\n                                  <div className=\"flex flex-col w-full\">\n                                    {doc.default.opsi.map((dok, idk) => {\n                                      return (\n                                        <div\n                                          key={idk}\n                                          className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                        >\n                                          <Checkbox\n                                            disabled\n                                            checked={\n                                              doc.default.default.indexOf(\n                                                idk\n                                              ) !== -1\n                                                ? true\n                                                : false\n                                            }\n                                            style={{ marginRight: `0.5rem` }}\n                                          />\n                                          <p className=\"mb-0\">{dok}</p>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                )}\n                                {doc.data_type === \"date\" && (\n                                  <div className=\"flex justify-between w-full px-3\">\n                                    <p className=\"mb-0\">{doc.default}</p>\n                                    <div>\n                                      <CalendarOutlined></CalendarOutlined>\n                                    </div>\n                                  </div>\n                                )}\n                                {doc.data_type === \"paragraph\" && (\n                                  <div className=\"flex h-20\">{doc.default}</div>\n                                )}\n                              </>\n                            ) : (\n                              <p className=\"mb-0\">{doc.default}</p>\n                            )}\n                          </div>\n                          <style jsx>\n                            {`\n                                                                    .judulField::before{\n                                                                        content: '*';\n                                                                        color: red;\n                                                                    }\n                                                                `}\n                          </style>\n                        </div>\n                      ) : (\n                        <div\n                          key={idx}\n                          className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                        >\n                          <Form layout=\"vertical\" initialValues={currentfield}>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                              <Form.Item\n                                name=\"name\"\n                                label=\"Nama Spesifikasi\"\n                                rules={[\n                                  {\n                                    required: true,\n                                    message: \"Nama Spesifikasi wajib diisi\",\n                                  },\n                                ]}\n                              >\n                                <Input\n                                  required\n                                  name=\"name\"\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      name: e.target.value,\n                                    });\n                                    if (e.target.value === \"\") {\n                                      setdisabledtambah(true);\n                                    } else if (\n                                      e.target.value !== \"\" &&\n                                      currentfield.data_type !== \"\" &&\n                                      currentdropdown2.every(\n                                        (doca, idxa) => doca !== \"\"\n                                      )\n                                    ) {\n                                      setdisabledtambah(false);\n                                    }\n                                  }}\n                                />\n                              </Form.Item>\n                              <Form.Item\n                                name=\"data_type\"\n                                label=\"Tipe Field\"\n                                rules={[\n                                  {\n                                    required: true,\n                                    message: \"Tipe Field wajib diisi\",\n                                  },\n                                ]}\n                              >\n                                <Select\n                                  placeholder=\"Pilih Tipe Field\"\n                                  onChange={(value) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      data_type: value,\n                                    });\n                                    if (\n                                      value === \"dropdown\" ||\n                                      value === \"checkbox\"\n                                    ) {\n                                      if (\n                                        currentdropdown2.every(\n                                          (doca, idxa) => doca !== \"\"\n                                        )\n                                      ) {\n                                        setdisabledtambah(false);\n                                      } else {\n                                        setdisabledtambah(true);\n                                      }\n                                    } else {\n                                      setdisabledtambah(false);\n                                    }\n                                    if (value === \"dropdown\") {\n                                      setcurrentcheckeddropdown2(\"\");\n                                      setcurrentdropdown2([\"\", \"\"]);\n                                      setdisabledtambah(true);\n                                    }\n                                    if (value === \"checkbox\") {\n                                      setcurrentcheckeddropdown2([]);\n                                      setcurrentdropdown2([\"\", \"\"]);\n                                      setcd2([\"\", \"\"]);\n                                      setdisabledtambah(true);\n                                    }\n                                  }}\n                                  name=\"data_type\"\n                                >\n                                  <Select.Option value={\"dropdown\"}>\n                                    Dropdown\n                                  </Select.Option>\n                                  <Select.Option value={\"number\"}>\n                                    Number\n                                  </Select.Option>\n                                  <Select.Option value={\"paragraph\"}>\n                                    Paragraph Text\n                                  </Select.Option>\n                                  <Select.Option value={\"checkbox\"}>\n                                    Checkbox\n                                  </Select.Option>\n                                  <Select.Option value={\"single\"}>\n                                    Single Textbox\n                                  </Select.Option>\n                                  <Select.Option value={\"date\"}>\n                                    Date\n                                  </Select.Option>\n                                </Select>\n                              </Form.Item>\n                            </div>\n                            <Form.Item name=\"default\" label=\"Default\">\n                              {currentfield.data_type.toLowerCase() ===\n                              \"dropdown\" ? (\n                                <div className=\"flex flex-col\">\n                                  <h1>\n                                    Default hanya dipilih 1 (satu) dari beberapa\n                                    opsi dibawah ini\n                                  </h1>\n                                  {currentdropdown2.map((doc, idxx) => (\n                                    <div className=\"flex mb-3\">\n                                      <div className=\"w-7 flex items-center\">\n                                        <Checkbox\n                                          checked={\n                                            currentcheckeddropdown2 === idxx\n                                              ? true\n                                              : false\n                                          }\n                                          onChange={(e) => {\n                                            if (e.target.checked === true) {\n                                              setcurrentcheckeddropdown2(idxx);\n                                            }\n                                          }}\n                                        ></Checkbox>\n                                      </div>\n                                      <div className=\"w-10/12 mr-5\">\n                                        <Input\n                                          style={{ marginRight: `0.5rem` }}\n                                          defaultValue={doc}\n                                          placeholder={`Masukkan opsi ke-${\n                                            idxx + 1\n                                          }`}\n                                          onChange={(e) => {\n                                            setcurrentdropdown2((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            setcd2((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            if (\n                                              e.target.value !== \"\" &&\n                                              currentdropdown2.every(\n                                                (doca, idxa) => doca !== \"\"\n                                              ) &&\n                                              currentfield.name !== \"\"\n                                            ) {\n                                              setdisabledtambah(false);\n                                            } else if (\n                                              e.target.value === \"\" ||\n                                              currentfield.name === \"\"\n                                            ) {\n                                              setdisabledtambah(true);\n                                            }\n                                          }}\n                                        />\n                                      </div>\n                                      <div\n                                        className=\"w-1/12 flex justify-around\"\n                                        onClick={() => {\n                                          setcurrentdropdown2([]);\n                                          setcdtrigger((prev) => !prev);\n                                          setcdidx(idxx);\n                                        }}\n                                      >\n                                        <Button type=\"danger\">-</Button>\n                                      </div>\n                                    </div>\n                                  ))}\n                                  <div className=\"mx-auto my-3\">\n                                    <Button\n                                      onClick={() => {\n                                        setcurrentdropdown2([\n                                          ...currentdropdown2,\n                                          \"\",\n                                        ]);\n                                        setcd2([...cd2, \"\"]);\n                                        setdisabledtambah(true);\n                                      }}\n                                    >\n                                      + Tambah Opsi\n                                    </Button>\n                                  </div>\n                                </div>\n                              ) : null}\n                              {currentfield.data_type.toLowerCase() ===\n                              \"checkbox\" ? (\n                                <div className=\"flex flex-col\">\n                                  <h1>\n                                    Default dapat dipilih lebih dari 1 (satu)\n                                    opsi dibawah ini\n                                  </h1>\n                                  {currentdropdown2.map((doc, idxx) => {\n                                    const idxchecked =\n                                      currentcheckeddropdown2.includes(idxx);\n                                    return (\n                                      <div className=\"flex mb-3\">\n                                        <div className=\"w-7 flex items-center\">\n                                          <Checkbox\n                                            defaultChecked={idxchecked}\n                                            onChange={(e) => {\n                                              if (e.target.checked === true) {\n                                                setcurrentcheckeddropdown2(\n                                                  (prev) => {\n                                                    var temp = prev;\n                                                    temp.push(idxx);\n                                                    return temp;\n                                                  }\n                                                );\n                                              } else {\n                                                setcurrentcheckeddropdown2(\n                                                  (prev) => {\n                                                    var temp = prev;\n                                                    const index =\n                                                      temp.indexOf(idxx);\n                                                    temp.splice(index, 1);\n                                                    return temp;\n                                                  }\n                                                );\n                                              }\n                                            }}\n                                          ></Checkbox>\n                                        </div>\n                                        <div className=\"w-10/12 mr-5\">\n                                          <Input\n                                            style={{ marginRight: `0.5rem` }}\n                                            defaultValue={doc}\n                                            placeholder={`Masukkan opsi ke-${\n                                              idxx + 1\n                                            }`}\n                                            onChange={(e) => {\n                                              setcurrentdropdown2((prev) => {\n                                                const temp = prev;\n                                                temp[idxx] = e.target.value;\n                                                return temp;\n                                              });\n                                              setcd2((prev) => {\n                                                const temp = prev;\n                                                temp[idxx] = e.target.value;\n                                                return temp;\n                                              });\n                                              if (\n                                                e.target.value !== \"\" &&\n                                                currentdropdown2.every(\n                                                  (doca, idxa) => doca !== \"\"\n                                                ) &&\n                                                currentfield.name !== \"\"\n                                              ) {\n                                                setdisabledtambah(false);\n                                              } else if (\n                                                e.target.value === \"\" ||\n                                                currentfield.name === \"\"\n                                              ) {\n                                                setdisabledtambah(true);\n                                              }\n                                            }}\n                                          />\n                                        </div>\n                                        <div\n                                          className=\"w-1/12 flex justify-around\"\n                                          onClick={() => {\n                                            setcurrentdropdown2([]);\n                                            setcdtrigger((prev) => !prev);\n                                            setcdidx(idxx);\n                                          }}\n                                        >\n                                          <Button type=\"danger\">-</Button>\n                                        </div>\n                                      </div>\n                                    );\n                                  })}\n                                  <div className=\"mx-auto my-3\">\n                                    <Button\n                                      onClick={() => {\n                                        setcurrentdropdown2([\n                                          ...currentdropdown2,\n                                          \"\",\n                                        ]);\n                                        setcd2([...cd2, \"\"]);\n                                        setdisabledtambah(true);\n                                      }}\n                                    >\n                                      + Tambah Opsi\n                                    </Button>\n                                  </div>\n                                </div>\n                              ) : null}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"number\" && (\n                                <InputNumber\n                                  style={{ width: `30%` }}\n                                  defaultValue={fielddata2[idx].default}\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  onChange={(value) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: `${value}`,\n                                    });\n                                  }}\n                                ></InputNumber>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"paragraph\" && (\n                                <Input.TextArea\n                                  rows={4}\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  defaultValue={fielddata2[idx].default}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: e.target.value,\n                                    });\n                                  }}\n                                ></Input.TextArea>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"string\" && (\n                                <Input\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  defaultValue={fielddata2[idx].default}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: e.target.value,\n                                    });\n                                  }}\n                                ></Input>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"single\" && (\n                                <Input\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  defaultValue={fielddata2[idx].default}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: e.target.value,\n                                    });\n                                  }}\n                                ></Input>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"date\" && (\n                                <DatePicker\n                                  defaultValue={moment(fielddata2[idx].default)}\n                                  style={{ width: `30%` }}\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  onChange={(value, dateString) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: dateString,\n                                    });\n                                  }}\n                                ></DatePicker>\n                              )}\n                            </Form.Item>\n                            <hr />\n                            <div className=\"flex mt-4 justify-end\">\n                              <Popconfirm\n                                placement=\"bottom\"\n                                title={`Apakah anda yakin ingin menghapus field ${\n                                  doc.name === \"\" ? \"ini\" : doc.name\n                                }?`}\n                                okText=\"Ya\"\n                                cancelText=\"Tidak\"\n                                onConfirm={() => {\n                                  setfielddata2((prev) =>\n                                    prev.filter((_, idxx) => idxx !== idx)\n                                  );\n                                  setnewdata((prev) => {\n                                    var temp = prev;\n                                    temp.model_columns =\n                                      temp.model_columns.filter(\n                                        (_, idxx) =>\n                                          idxx !== fielddata.length + idx\n                                      );\n                                    return temp;\n                                  });\n                                  if (\n                                    defaultdata.model_columns.some(\n                                      (docdef) => docdef.id === doc.id\n                                    )\n                                  ) {\n                                    setnewdata((prev) => {\n                                      var temp = prev;\n                                      temp.delete_column_ids.push(doc.id);\n                                      const idxUpdateColumns =\n                                        temp.update_columns\n                                          .map((docmap) => docmap.id)\n                                          .indexOf(doc.id);\n                                      temp.update_columns.splice(\n                                        idxUpdateColumns,\n                                        1\n                                      );\n                                      const idxtemp = defaultdata.model_columns\n                                        .map((doctemp) => doctemp.id)\n                                        .indexOf(doc.id);\n                                      temp.model_columns.splice(idxtemp, 1);\n                                      return temp;\n                                    });\n                                  } else {\n                                    setnewdata((prev) => {\n                                      var temp = prev;\n                                      const idxtemp = temp.add_columns\n                                        .map((doctemp) => doctemp.name)\n                                        .indexOf(doc.name);\n                                      idxtemp !== -1\n                                        ? temp.add_columns.splice(idxtemp, 1)\n                                        : null;\n                                      return temp;\n                                    });\n                                  }\n                                  setaddedfield((prev) => {\n                                    prev.splice(idx, 1);\n                                    return prev;\n                                  });\n                                  setdisabledaddfield(false);\n                                  setpointevent(\"\");\n                                }}\n                              >\n                                <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                                  <DeleteOutlined\n                                    style={{ fontSize: `1.25rem` }}\n                                  ></DeleteOutlined>\n                                </div>\n                              </Popconfirm>\n                              <div className=\" flex items-center mr-4\">\n                                <Checkbox\n                                  checked={currentfield.required}\n                                  style={{ marginRight: `0.5rem` }}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      required: e.target.checked,\n                                    });\n                                  }}\n                                />{\" \"}\n                                Required\n                              </div>\n                              <Button\n                                disabled={disabledtambah}\n                                type=\"primary\"\n                                onClick={() => {\n                                  if (\n                                    currentfield.data_type === \"dropdown\" ||\n                                    currentfield.data_type === \"checkbox\"\n                                  ) {\n                                    setidxdropdowntrigger(idx);\n                                    setvaluedropdowntrigger((prev) => !prev);\n                                  }\n                                  setconcataddcolumnsidx(idx);\n                                  setconcataddcolumnsvalue(doc);\n                                  setconcataddcolumnstrigger((prev) => !prev);\n                                  const temp = fielddata2;\n                                  temp[idx] = currentfield;\n                                  setfielddata2(temp);\n                                  setaddedfieldidx(idx);\n                                  setaddedfieldtrigger((prev) => !prev);\n                                  setconcatfieldtrigger((prev) => !prev);\n                                  setdisabledaddfield(false);\n                                  setpointevent(\"\");\n                                }}\n                              >\n                                Tambah\n                              </Button>\n                            </div>\n                          </Form>\n                        </div>\n                      )}\n                    </>\n                  );\n                })\n              )}\n            </>\n          )}\n          {fielddata.map((doc, idx) => {\n            return (\n              <>\n                {addedfield1[idx] === true ? (\n                  <div\n                    key={idx}\n                    className={`${pointevent} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                    onClick={() => {\n                      const temp = [...addedfield1];\n                      temp[idx] = false;\n                      for (var i = 0; i < temp.length; i++) {\n                        if (i !== idx) {\n                          temp[i] = true;\n                        }\n                      }\n                      setaddedfield1(temp);\n                      setcurrentfield(fielddata[idx]);\n                      if (\n                        doc.data_type === \"dropdown\" ||\n                        doc.data_type === \"checkbox\"\n                      ) {\n                        setcurrentdropdown2(doc.default.opsi);\n                        setcurrentcheckeddropdown2(doc.default.default);\n                      }\n                      if (\n                        fielddata[idx].data_type !== \"dropdown\" ||\n                        fielddata[idx].data_type !== \"checkbox\"\n                      ) {\n                        setcd2(doc.default.opsi);\n                        if (\n                          fielddata[idx].name !== \"\" &&\n                          fielddata[idx].data_type !== \"\"\n                        ) {\n                          setdisabledtambah(false);\n                        } else {\n                          setdisabledtambah(true);\n                        }\n                      } else {\n                        if (\n                          doc.default.opsi.some((docopsi) => docopsi === \"\")\n                        ) {\n                          setdisabledtambah(true);\n                        } else {\n                          setdisabledtambah(false);\n                        }\n                      }\n                      setdisabledaddfield(true);\n                      setpointevent(\"pointer-events-none\");\n                    }}\n                  >\n                    <div className=\"font-semibold mb-2\">\n                      {doc.name}\n                      {fielddata[idx].required ? (\n                        <span className=\"judulField\"></span>\n                      ) : null}{\" \"}\n                      <span className=\"text-gray-400 text-sm\">\n                        (\n                        {doc.data_type === \"single\"\n                          ? \"Single Textbox\"\n                          : doc.data_type.charAt(0).toUpperCase() +\n                            doc.data_type.slice(1)}\n                        {doc.data_type === \"paragraph\" && ` Text`})\n                      </span>\n                    </div>\n                    <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                      {doc.data_type === \"checkbox\" ||\n                      doc.data_type === \"dropdown\" ||\n                      doc.data_type === \"paragraph\" ||\n                      doc.data_type === \"date\" ? (\n                        <>\n                          {doc.data_type === \"dropdown\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <Checkbox\n                                      disabled\n                                      checked={\n                                        doc.default.default === idk\n                                          ? true\n                                          : false\n                                      }\n                                      style={{ marginRight: `0.5rem` }}\n                                    />\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"checkbox\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <Checkbox\n                                      disabled\n                                      checked={\n                                        doc.default.default.indexOf(idk) !== -1\n                                          ? true\n                                          : false\n                                      }\n                                      style={{ marginRight: `0.5rem` }}\n                                    />\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"date\" && (\n                            <div className=\"flex justify-between w-full px-3\">\n                              <p className=\"mb-0\">{doc.default}</p>\n                              <div>\n                                <CalendarOutlined></CalendarOutlined>\n                              </div>\n                            </div>\n                          )}\n                          {doc.data_type === \"paragraph\" && (\n                            <div className=\"flex h-20\">{doc.default}</div>\n                          )}\n                        </>\n                      ) : (\n                        <p className=\"mb-0\">{doc.default}</p>\n                      )}\n                    </div>\n                    <style jsx>\n                      {`\n                                                    .judulField::before{\n                                                        content: '*';\n                                                        color: red;\n                                                    }\n                                                `}\n                    </style>\n                  </div>\n                ) : (\n                  <div\n                    key={idx}\n                    className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                  >\n                    <Form layout=\"vertical\" initialValues={currentfield}>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                        <Form.Item\n                          name=\"name\"\n                          label=\"Nama Spesifikasi\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Nama Spesifikasi wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Input\n                            required\n                            name=\"name\"\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                name: e.target.value,\n                              });\n                              if (e.target.value === \"\") {\n                                setdisabledtambah(true);\n                              } else if (\n                                e.target.value !== \"\" &&\n                                currentfield.data_type !== \"\" &&\n                                currentdropdown2.every(\n                                  (doca, idxa) => doca !== \"\"\n                                )\n                              ) {\n                                setdisabledtambah(false);\n                              }\n                            }}\n                          />\n                        </Form.Item>\n                        <Form.Item\n                          name=\"data_type\"\n                          label=\"Tipe Field\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Tipe Field wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Select\n                            placeholder=\"Pilih Tipe Field\"\n                            onChange={(value) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                data_type: value,\n                              });\n                              if (\n                                value === \"dropdown\" ||\n                                value === \"checkbox\"\n                              ) {\n                                if (\n                                  currentdropdown2.every(\n                                    (doca, idxa) => doca !== \"\"\n                                  )\n                                ) {\n                                  setdisabledtambah(false);\n                                } else {\n                                  setdisabledtambah(true);\n                                }\n                              } else {\n                                setdisabledtambah(false);\n                              }\n                              if (value === \"dropdown\") {\n                                setcurrentcheckeddropdown2(\"\");\n                                setcurrentdropdown2([\"\", \"\"]);\n                                setcd2([\"\", \"\"]);\n                                setdisabledtambah(true);\n                              }\n                              if (value === \"checkbox\") {\n                                setcurrentcheckeddropdown2([]);\n                                setcurrentdropdown2([\"\", \"\"]);\n                                setcd2([\"\", \"\"]);\n                                setdisabledtambah(true);\n                              }\n                            }}\n                            name=\"data_type\"\n                          >\n                            <Select.Option value={\"dropdown\"}>\n                              Dropdown\n                            </Select.Option>\n                            <Select.Option value={\"number\"}>\n                              Number\n                            </Select.Option>\n                            <Select.Option value={\"paragraph\"}>\n                              Paragraph Text\n                            </Select.Option>\n                            <Select.Option value={\"checkbox\"}>\n                              Checkbox\n                            </Select.Option>\n                            <Select.Option value={\"single\"}>\n                              Single Textbox\n                            </Select.Option>\n                            <Select.Option value={\"date\"}>Date</Select.Option>\n                          </Select>\n                        </Form.Item>\n                      </div>\n                      <Form.Item name=\"default\" label=\"Default\">\n                        {currentfield.data_type.toLowerCase() === \"dropdown\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default hanya dipilih 1 (satu) dari beberapa opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdown2.map((doc, idxx) => (\n                              <div className=\"flex mb-3\">\n                                <div className=\"w-7 flex items-center\">\n                                  <Checkbox\n                                    checked={\n                                      currentcheckeddropdown2 === idxx\n                                        ? true\n                                        : false\n                                    }\n                                    onChange={(e) => {\n                                      if (e.target.checked === true) {\n                                        setcurrentcheckeddropdown2(idxx);\n                                      }\n                                    }}\n                                  ></Checkbox>\n                                </div>\n                                <div className=\"w-10/12 mr-5\">\n                                  <Input\n                                    style={{ marginRight: `0.5rem` }}\n                                    defaultValue={doc}\n                                    placeholder={`Masukkan opsi ke-${idxx + 1}`}\n                                    onChange={(e) => {\n                                      setcurrentdropdown2((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      setcd2((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      if (\n                                        e.target.value !== \"\" &&\n                                        currentdropdown2.every(\n                                          (doca, idxa) => doca !== \"\"\n                                        ) &&\n                                        currentfield.name !== \"\"\n                                      ) {\n                                        setdisabledtambah(false);\n                                      } else if (\n                                        e.target.value === \"\" ||\n                                        currentfield.name === \"\"\n                                      ) {\n                                        setdisabledtambah(true);\n                                      }\n                                    }}\n                                  />\n                                </div>\n                                <div\n                                  className=\"w-1/12 flex justify-around\"\n                                  onClick={() => {\n                                    setcurrentdropdown2([]);\n                                    setcdtrigger((prev) => !prev);\n                                    setcdidx(idxx);\n                                  }}\n                                >\n                                  <Button type=\"danger\">-</Button>\n                                </div>\n                              </div>\n                            ))}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdown2([\n                                    ...currentdropdown2,\n                                    \"\",\n                                  ]);\n                                  setcd2([...cd2, \"\"]);\n                                  setdisabledtambah(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield.data_type.toLowerCase() === \"checkbox\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default dapat dipilih lebih dari 1 (satu) opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdown2.map((doc, idxx) => {\n                              const idxchecked =\n                                currentcheckeddropdown2.includes(idxx);\n                              return (\n                                <div className=\"flex mb-3\">\n                                  <div className=\"w-7 flex items-center\">\n                                    <Checkbox\n                                      defaultChecked={idxchecked}\n                                      onChange={(e) => {\n                                        if (e.target.checked === true) {\n                                          setcurrentcheckeddropdown2((prev) => {\n                                            var temp = prev;\n                                            temp.push(idxx);\n                                            return temp;\n                                          });\n                                        } else {\n                                          setcurrentcheckeddropdown2((prev) => {\n                                            var temp = prev;\n                                            const index = temp.indexOf(idxx);\n                                            temp.splice(index, 1);\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    ></Checkbox>\n                                  </div>\n                                  <div className=\"w-10/12 mr-5\">\n                                    <Input\n                                      style={{ marginRight: `0.5rem` }}\n                                      defaultValue={doc}\n                                      placeholder={`Masukkan opsi ke-${\n                                        idxx + 1\n                                      }`}\n                                      onChange={(e) => {\n                                        setcurrentdropdown2((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        setcd2((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        if (\n                                          e.target.value !== \"\" &&\n                                          currentdropdown2.every(\n                                            (doca, idxa) => doca !== \"\"\n                                          ) &&\n                                          currentfield.name !== \"\"\n                                        ) {\n                                          setdisabledtambah(false);\n                                        } else if (\n                                          e.target.value === \"\" ||\n                                          currentfield.name === \"\"\n                                        ) {\n                                          setdisabledtambah(true);\n                                        }\n                                      }}\n                                    />\n                                  </div>\n                                  <div\n                                    className=\"w-1/12 flex justify-around\"\n                                    onClick={() => {\n                                      setcurrentdropdown2([]);\n                                      setcdtrigger((prev) => !prev);\n                                      setcdidx(idxx);\n                                    }}\n                                  >\n                                    <Button type=\"danger\">-</Button>\n                                  </div>\n                                </div>\n                              );\n                            })}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdown2([\n                                    ...currentdropdown2,\n                                    \"\",\n                                  ]);\n                                  setcd2([...cd2, \"\"]);\n                                  setdisabledtambah(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield.data_type.toLowerCase() === \"number\" && (\n                          <InputNumber\n                            style={{ width: `30%` }}\n                            defaultValue={fielddata[idx].default}\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            onChange={(value) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: `${value}`,\n                              });\n                            }}\n                          ></InputNumber>\n                        )}\n                        {currentfield.data_type.toLowerCase() ===\n                          \"paragraph\" && (\n                          <Input.TextArea\n                            rows={4}\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            defaultValue={fielddata[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input.TextArea>\n                        )}\n                        {currentfield.data_type.toLowerCase() === \"string\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            defaultValue={fielddata[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield.data_type.toLowerCase() === \"single\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            defaultValue={fielddata[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield.data_type.toLowerCase() === \"date\" && (\n                          <DatePicker\n                            defaultValue={moment(fielddata[idx].default)}\n                            style={{ width: `30%` }}\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            onChange={(value, dateString) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: dateString,\n                              });\n                            }}\n                          ></DatePicker>\n                        )}\n                      </Form.Item>\n                      <hr />\n                      <div className=\"flex mt-4 justify-end\">\n                        <Popconfirm\n                          placement=\"bottom\"\n                          title={`Apakah anda yakin ingin menghapus field ${\n                            doc.name === \"\" ? \"ini\" : doc.name\n                          }?`}\n                          okText=\"Ya\"\n                          cancelText=\"Tidak\"\n                          onConfirm={() => {\n                            setfielddata((prev) =>\n                              prev.filter((_, idxx) => idxx !== idx)\n                            );\n                            setnewdata((prev) => {\n                              var temp = prev;\n                              temp.model_columns = temp.model_columns.filter(\n                                (_, idxx) => idxx !== fielddata2.length + idx\n                              );\n                              return temp;\n                            });\n                            if (\n                              defaultdata.model_columns.some(\n                                (docdef) => docdef.id === doc.id\n                              )\n                            ) {\n                              setnewdata((prev) => {\n                                var temp = prev;\n                                temp.delete_column_ids.push(doc.id);\n                                const idxtemp = defaultdata.model_columns\n                                  .map((doctemp) => doctemp.id)\n                                  .indexOf(doc.id);\n                                temp.model_columns.splice(idxtemp, 1);\n                                return temp;\n                              });\n                            } else {\n                              setnewdata((prev) => {\n                                var temp = prev;\n                                const idxtemp = temp.add_columns\n                                  .map((doctemp) => doctemp.name)\n                                  .indexOf(doc.name);\n                                idxtemp !== -1\n                                  ? temp.add_columns.splice(idxtemp, 1)\n                                  : null;\n                                return temp;\n                              });\n                            }\n                            setaddedfield1((prev) => {\n                              prev.splice(idx, 1);\n                              return prev;\n                            });\n                            setdisabledaddfield(false);\n                            setpointevent(\"\");\n                          }}\n                        >\n                          <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                            <DeleteOutlined\n                              style={{ fontSize: `1.25rem` }}\n                            ></DeleteOutlined>\n                          </div>\n                        </Popconfirm>\n                        <div className=\" flex items-center mr-4\">\n                          <Checkbox\n                            checked={currentfield.required}\n                            style={{ marginRight: `0.5rem` }}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                required: e.target.checked,\n                              });\n                            }}\n                          />{\" \"}\n                          Required\n                        </div>\n                        <Button\n                          disabled={disabledtambah}\n                          type=\"primary\"\n                          onClick={() => {\n                            if (\n                              currentfield.data_type === \"dropdown\" ||\n                              currentfield.data_type === \"checkbox\"\n                            ) {\n                              setidxdropdowntrigger1(idx);\n                              setvaluedropdowntrigger1((prev) => !prev);\n                            }\n                            setconcataddcolumnsidx1(idx);\n                            setconcataddcolumnsvalue1(doc);\n                            setconcataddcolumnstrigger1((prev) => !prev);\n                            const temp = fielddata;\n                            temp[idx] = currentfield;\n                            setfielddata(temp);\n                            setaddedfieldidx1(idx);\n                            setaddedfieldtrigger1((prev) => !prev);\n                            setconcatfieldtrigger((prev) => !prev);\n                            setdisabledaddfield(false);\n                            setpointevent(\"\");\n                          }}\n                        >\n                          Tambah\n                        </Button>\n                      </div>\n                    </Form>\n                  </div>\n                )}\n              </>\n            );\n          })}\n          <div className=\"w-full flex justify-center mt-5\">\n            <Button\n              type=\"dashed\"\n              disabled={disabledaddfield}\n              style={{ width: `80%`, height: `4rem` }}\n              onClick={onClickAddField}\n            >\n              + Tambah Spesifikasi Model\n            </Button>\n          </div>\n        </div>\n        {newdata.is_consumable === false && (\n          <div className=\" mb-8 col-span-1 md:col-span-4 px-5 flex flex-col\">\n            <div className=\"mb-5\">\n              <h1 className=\"font-bold text-xl\">Konfigurasi Part Model</h1>\n            </div>\n            {modelpartfielddata.length === 0 ? null : (\n              <>\n                <Collapse accordion>\n                  {modelpartfielddata.map((doc, idx) => {\n                    return (\n                      <Panel\n                        id={`panel${idx}`}\n                        key={idx}\n                        header={\n                          <strong>\n                            {\n                              doc.name\n                              // ?\n                              // <>\n                              //     {\n                              //         doc.model_child.length === 0 ?\n                              //             <div className=\"flex items-center w-6/12\">\n                              //                 <span className=\"mr-2\">{doc.name}</span>\n                              //                 <Tooltip placement=\"right\" title=\"Model tidak memiliki part model!\">\n                              //                     <ExclamationCircleOutlined style={{ color: `brown` }}></ExclamationCircleOutlined>\n                              //                 </Tooltip>\n                              //             </div>\n                              //             :\n                              //             doc.name\n                              //     }\n                              // </>\n                              // :\n                              // \"-\"\n                            }\n                          </strong>\n                        }\n                        extra={\n                          <div className=\"absolute top-2 right-2\">\n                            <Popconfirm\n                              placement=\"bottom\"\n                              title={`Apakah anda yakin ingin menghapus Model ${\n                                doc.name === \"\" ? \"ini\" : doc.name\n                              } dari Model Part ${newdata.name}?`}\n                              okText=\"Ya\"\n                              cancelText=\"Tidak\"\n                              onConfirm={() => {\n                                // console.log(doc)\n                                setnewdata((prev) => {\n                                  var temp = prev;\n                                  var idxtemp = modelpartfielddata\n                                    .map((doctemp) => doctemp.id)\n                                    .indexOf(doc.id);\n                                  if (\n                                    defaultdata.model_parts\n                                      .map((docparts) => docparts.id)\n                                      .includes(doc.id) === false &&\n                                    idxtemp !== -1\n                                  ) {\n                                    const idxdata = temp.add_models\n                                      .map((doc2) => doc2.id)\n                                      .indexOf(doc.id);\n                                    if (temp.add_models[idxdata].quantity > 1) {\n                                      temp.add_models[idxdata].quantity -= 1;\n                                    } else {\n                                      temp.add_models.splice(idxdata, 1);\n                                    }\n                                  }\n                                  if (\n                                    defaultdata.model_parts\n                                      .map((docparts) => docparts.id)\n                                      .includes(doc.id) === true &&\n                                    idxtemp !== -1\n                                  ) {\n                                    if (\n                                      temp.delete_model_ids.indexOf(doc.id) ===\n                                      -1\n                                    ) {\n                                      temp.delete_model_ids.push(doc.id);\n                                    }\n                                  }\n                                  return temp;\n                                });\n                                setmodelpartfielddata((prev) =>\n                                  prev.filter((_, idxx) => idxx !== idx)\n                                );\n                              }}\n                            >\n                              <CloseCircleOutlined style={{ color: `red` }} />\n                            </Popconfirm>\n                          </div>\n                        }\n                      >\n                        <div className=\"flex flex-col p-3\">\n                          <div className=\"flex flex-col mb-5\">\n                            <h1 className=\"font-semibold mb-1\">\n                              Asset Type{\" \"}\n                              <span className=\"judulassettype\"></span>\n                            </h1>\n                            <div className=\"rounded bg-gray-200 w-full flex items-center my-auto h-12 px-2\">\n                              <p className=\"mb-0 text-sm\">{doc.name}</p>\n                            </div>\n                          </div>\n                          {doc.model_columns.map((docmc, idxmc) => {\n                            return (\n                              <div className=\"flex flex-col mb-5\">\n                                <h1 className=\"font-semibold mb-1\">\n                                  {docmc.name}{\" \"}\n                                  {docmc.required ? (\n                                    <span className=\"judulsn\"></span>\n                                  ) : null}{\" \"}\n                                  <span className=\"text-gray-400\">\n                                    {docmc.data_type ? (\n                                      <>\n                                        (\n                                        {docmc.data_type\n                                          .charAt(0)\n                                          .toUpperCase() +\n                                          docmc.data_type.slice(1)}\n                                        )\n                                      </>\n                                    ) : (\n                                      \"\"\n                                    )}\n                                  </span>\n                                </h1>\n                                <div className=\"w-full flex flex-col justify-center my-auto px-2 py-1\">\n                                  {docmc.data_type === \"dropdown\" ||\n                                  docmc.data_type === \"checkbox\" ||\n                                  docmc.data_type === \"paragraph\" ||\n                                  docmc.data_type === \"date\" ? (\n                                    <>\n                                      {docmc.data_type === \"dropdown\" && (\n                                        <>\n                                          {docmc.default.opsi.map(\n                                            (docopsi, idxopsi) => (\n                                              <div\n                                                key={idxopsi}\n                                                className=\"rounded bg-white border w-3/12 flex items-center my-auto px-2 py-1 mb-1\"\n                                              >\n                                                <Checkbox\n                                                  disabled\n                                                  checked={\n                                                    idxopsi ===\n                                                    docmc.default.default\n                                                  }\n                                                  style={{\n                                                    marginRight: `0.5rem`,\n                                                  }}\n                                                />\n                                                {docopsi}\n                                              </div>\n                                            )\n                                          )}\n                                        </>\n                                      )}\n                                      {docmc.data_type === \"checkbox\" && (\n                                        <>\n                                          {docmc.default.opsi.map(\n                                            (docopsi, idxopsi) => (\n                                              <div\n                                                key={idxopsi}\n                                                className=\"rounded w-full flex items-center my-auto px-2 py-1 mb-1\"\n                                              >\n                                                <Checkbox\n                                                  disabled\n                                                  checked={\n                                                    idxopsi ===\n                                                    docmc.default.default\n                                                  }\n                                                  style={{\n                                                    marginRight: `0.5rem`,\n                                                  }}\n                                                />\n                                                {docopsi}\n                                              </div>\n                                            )\n                                          )}\n                                        </>\n                                      )}\n                                      {docmc.data_type === \"date\" && (\n                                        <div className=\"flex w-full items-center justify-between bg-gray-100 rounded h-10 px-3\">\n                                          <p className=\"mb-0\">\n                                            {docmc.default}\n                                          </p>\n                                          <div>\n                                            <CalendarOutlined></CalendarOutlined>\n                                          </div>\n                                        </div>\n                                      )}\n                                      {docmc.data_type === \"paragraph\" && (\n                                        <div className=\"flex h-20 rounded border bg-gray-100 w-full px-3\">\n                                          {docmc.default}\n                                        </div>\n                                      )}\n                                    </>\n                                  ) : (\n                                    <div className=\"rounded border bg-gray-100 flex items-center w-full h-10 px-3\">\n                                      {docmc.default}\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            );\n                          })}\n                          {doc.model_parts.length === 0 ? null : (\n                            <>\n                              <Timeline style={{ marginTop: `1rem` }}>\n                                {renderChildPartModel(doc.model_parts)}\n                              </Timeline>\n                            </>\n                          )}\n                        </div>\n                        <style jsx>\n                          {`\n                                                        .judulassettype::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                        .judulsn::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n                        </style>\n                      </Panel>\n                    );\n                  })}\n                </Collapse>\n              </>\n            )}\n            <>\n              {editpart ? (\n                <div className=\"shadow-md border p-8 mx-3 md:mx-8 my-3 flex flex-col rounded-md relative\">\n                  <div\n                    className=\"absolute top-2 right-5 text-lg cursor-pointer\"\n                    onClick={() => {\n                      seteditpart(false);\n                    }}\n                  >\n                    x\n                  </div>\n                  <Form layout=\"vertical\" initialValues={currentidmodel}>\n                    <div className=\"flex mb-2\">\n                      <div className=\" w-11/12 mr-3\">\n                        <Form.Item\n                          name=\"id\"\n                          label=\"Nama Model\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Nama Model wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Select\n                            defaultValue={currentidmodel}\n                            notFoundContent={\n                              fetchingpart ? <Spin size=\"small\" /> : null\n                            }\n                            onSearch={(value) => {\n                              setfetchingpart(true);\n                              fetch(\n                                `${\n                                  process.env.NEXT_PUBLIC_BACKEND_URL\n                                }/getModels?rows=10&name=${\n                                  value !== \"\" ? value : \"\"\n                                }`,\n                                {\n                                  method: `GET`,\n                                  headers: {\n                                    Authorization: JSON.parse(initProps),\n                                  },\n                                }\n                              )\n                                .then((res) => res.json())\n                                .then((res2) => {\n                                  res2.data.length === 0\n                                    ? setmodeldata([])\n                                    : setmodeldata(res2.data.data);\n                                  setfetchingpart(false);\n                                });\n                            }}\n                            showSearch\n                            optionFilterProp=\"children\"\n                            placeholder=\"Masukkan atau cari nama modul\"\n                            onChange={(value) => {\n                              setcurrentidmodel(value);\n                            }}\n                            name=\"id\"\n                            filterOption={(input, opt) =>\n                              opt.children\n                                .toLowerCase()\n                                .indexOf(input.toLowerCase()) >= 0\n                            }\n                            // onPopupScroll={(event) => {\n                            //     if (event.target.scrollTop + event.target.offsetHeight === event.target.scrollHeight) {\n                            //         setpage(prev => prev + 1)\n                            //         fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?page=${page}&rows=10`, {\n                            //             method: `GET`,\n                            //             headers: {\n                            //                 'Authorization': JSON.parse(initProps),\n                            //             },\n                            //         })\n                            //             .then(res => res.json())\n                            //             .then(res2 => {\n                            //                 event.target.scrollTo(0, event.target.scrollHeight)\n                            //                 res2.data.to >= res2.data.total ? setmodeldata([...modeldata, res2.data.data]) : setmodeldata([...modeldata, res2.data.data, <Spin size=\"small\" />])\n                            //             })\n                            //     }\n                            // }}\n                          >\n                            {modeldata.map((doc, idx) => {\n                              return (\n                                <Select.Option key={doc.id} value={doc.id}>\n                                  {doc.name}\n                                </Select.Option>\n                              );\n                            })}\n                          </Select>\n                        </Form.Item>\n                      </div>\n                      <div\n                        className=\"w-1/12 flex pt-2 my-auto items-center cursor-pointer\"\n                        onClick={() => {\n                          setmodalcreatemodel(true);\n                        }}\n                      >\n                        <PlusSquareTwoTone style={{ fontSize: `1.5rem` }} />\n                      </div>\n                    </div>\n                    <hr />\n                    <div className=\"flex mt-4 justify-end\">\n                      <div\n                        className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\"\n                        onClick={() => {\n                          seteditpart(false);\n                          setcurrentidmodel(\"\");\n                        }}\n                      >\n                        <DeleteOutlined\n                          style={{ fontSize: `1.25rem` }}\n                        ></DeleteOutlined>\n                      </div>\n                      <Button\n                        loading={loadinggetmodel}\n                        type=\"primary\"\n                        onClick={() => {\n                          seteditpart(false);\n                          setloadinggetmodel(true);\n                          fetch(\n                            `${process.env.NEXT_PUBLIC_BACKEND_URL}/getModel?id=${currentidmodel}`,\n                            {\n                              method: `GET`,\n                              headers: {\n                                Authorization: JSON.parse(initProps),\n                              },\n                            }\n                          )\n                            .then((res) => res.json())\n                            .then((res2) => {\n                              setmodelpartfielddata((prev) => {\n                                var temp1 = prev;\n                                var t = {};\n                                for (var prop in res2.data) {\n                                  if (prop === \"model_columns\") {\n                                    t[\"model_columns\"] = res2.data[prop].map(\n                                      (doc, idx) => {\n                                        if (\n                                          doc.data_type === \"dropdown\" ||\n                                          doc.data_type === \"checkbox\"\n                                        ) {\n                                          return {\n                                            ...doc,\n                                            default: JSON.parse(doc.default),\n                                          };\n                                        } else {\n                                          return { ...doc };\n                                        }\n                                      }\n                                    );\n                                  } else {\n                                    const modelparts =\n                                      res2.data.model_parts.map((doc2) => {\n                                        const map3 = doc2.model_columns.map(\n                                          (doc3) => {\n                                            if (\n                                              doc3.data_type === \"dropdown\" ||\n                                              doc3.data_type === \"checkbox\"\n                                            ) {\n                                              return {\n                                                ...doc3,\n                                                default: JSON.parse(\n                                                  doc3.default\n                                                ),\n                                              };\n                                            } else {\n                                              return { ...doc3 };\n                                            }\n                                          }\n                                        );\n                                        return {\n                                          ...doc2,\n                                          model_columns: map3,\n                                        };\n                                      });\n                                    t[\"model_parts\"] = modelparts;\n                                    t[\"id\"] = res2.data.id;\n                                    t[\"name\"] = res2.data.name;\n                                  }\n                                }\n                                temp1 = [...temp1, t];\n                                return temp1;\n                              });\n                              // setconcatpartvalue(res2.data.model_parts)\n                              // setconcatparttrigger(prev => !prev)\n                              setnewdata((prev) => {\n                                var temp = prev;\n                                const idxdata2 = temp.add_models\n                                  .map((doc3) => doc3.id)\n                                  .indexOf(currentidmodel);\n                                if (\n                                  temp.add_models.length === 0 ||\n                                  idxdata2 === -1\n                                ) {\n                                  temp.add_models.push({\n                                    id: currentidmodel,\n                                    quantity: 1,\n                                  });\n                                } else if (idxdata2 !== -1) {\n                                  temp.add_models.map((doc1) => {\n                                    if (doc1.id === currentidmodel) {\n                                      doc1.quantity = doc1.quantity + 1;\n                                    }\n                                  });\n                                }\n                                return temp;\n                              });\n                              setloadinggetmodel(false);\n                              setcurrentidmodel(\"\");\n                            });\n                        }}\n                      >\n                        Tambah\n                      </Button>\n                    </div>\n                  </Form>\n                </div>\n              ) : null}\n            </>\n            <div className=\"w-full flex justify-center mt-5\">\n              <Button\n                type=\"dashed\"\n                style={{ width: `80%`, height: `4rem` }}\n                onClick={() => {\n                  seteditpart(true);\n                }}\n              >\n                + Tambah Part Model\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">Form Tambah Model</h1>\n            <div className=\"flex\">\n              <Button\n                type=\"default\"\n                onClick={() => {\n                  setmodalcreatemodel(false);\n                }}\n                style={{ marginRight: `1rem` }}\n              >\n                Batal\n              </Button>\n              <Button\n                type=\"primary\"\n                disabled={disabledaddfield2}\n                onClick={instanceForm2.submit}\n                loading={loadingcreatemodel}\n              >\n                Simpan\n              </Button>\n            </div>\n          </div>\n        }\n        visible={modalcreatemodel}\n        footer={null}\n        onCancel={() => {\n          setmodalcreatemodel(false);\n        }}\n        width={900}\n      >\n        <div className=\"shadow-md border p-8 flex flex-col rounded-md mb-8\">\n          <Form\n            form={instanceForm2}\n            layout=\"vertical\"\n            onFinish={handleCreateModelinModel}\n          >\n            <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n              <Form.Item\n                name=\"asset_id\"\n                label=\"Asset Type\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Asset Type wajib diisi\",\n                  },\n                ]}\n              >\n                <TreeSelect\n                  style={{ marginRight: `1rem` }}\n                  dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                  treeData={assetdata}\n                  placeholder=\"Pilih Asset Type\"\n                  treeDefaultExpandAll\n                  onChange={(value, label, extra) => {\n                    if (typeof value !== \"undefined\") {\n                      onClickSelectAsset2(\n                        extra.allCheckedNodes[0].node.props.id\n                      );\n                    } else {\n                      onClickSelectAsset2(0);\n                    }\n                  }}\n                  allowClear\n                />\n              </Form.Item>\n              <Form.Item\n                name=\"name\"\n                label=\"Nama Model\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Nama Model wajib diisi\",\n                  },\n                ]}\n              >\n                <Input\n                  name=\"name\"\n                  onChange={(e) => {\n                    setnewdata2({ ...newdata2, name: e.target.value });\n                  }}\n                  allowClear\n                />\n              </Form.Item>\n            </div>\n            <Form.Item\n              name=\"manufacturer_id\"\n              label=\"Manufacturer\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Manufacturer wajib diisi\",\n                },\n              ]}\n            >\n              <Select\n                placeholder=\"Pilih Manufacturer\"\n                onChange={(value) => {\n                  setnewdata2({ ...newdata2, manufacturer_id: value });\n                }}\n                name=\"manufacturer_id\"\n              >\n                {manufdata.map((doc, idx) => {\n                  return (\n                    <Select.Option key={idx} value={doc.id}>\n                      {doc.name}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            </Form.Item>\n            <Form.Item name=\"description\" label=\"Deskripsi\">\n              <Input.TextArea\n                rows={4}\n                name=\"description\"\n                onChange={(e) => {\n                  setnewdata2({ ...newdata2, description: e.target.value });\n                }}\n              />\n            </Form.Item>\n            <div className=\"flex\">\n              <Checkbox\n                style={{ marginRight: `0.5rem` }}\n                onChange={(e) => {\n                  setnewdata2({ ...newdata2, required_sn: e.target.checked });\n                }}\n                checked={newdata2.required_sn}\n              />{\" \"}\n              Serial Number wajib ada\n            </div>\n          </Form>\n        </div>\n        <div className=\" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\">\n          <div className=\"mb-5\">\n            <h1 className=\"font-bold text-xl\">Spesifikasi Model</h1>\n          </div>\n          {/* {\n                        loadingspec2 ?\n                            <Spin />\n                            :\n                            <>\n                                {\n                                    fielddataa.map((doc, idx) => {\n                                        return (\n                                            <div key={idx} className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\">\n                                                <div className=\"font-semibold mb-2\">\n                                                    {doc.name}\n                                                    {fielddataa[idx].required ? <span className=\"judulField\"></span> : null} <span className=\"text-gray-400 text-sm\">({doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1)})</span>\n                                                </div>\n                                                <div className='w-full'>\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"dropdown\" &&\n                                                        <div className=\"flex flex-col\">\n                                                            <h1>Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini</h1>\n                                                            {\n                                                                doc.default.opsi.map((docc, idxx) => (\n                                                                    <div className=\"flex mb-3\">\n                                                                        <div className=\" w-7 flex justify-center mr-5\">\n                                                                            <Checkbox onChange={(e) => {\n                                                                                if (e.target.checked === true) {\n                                                                                    setfielddataa(prev => {\n                                                                                        var temp = prev\n                                                                                        temp[idx][\"default\"][\"default\"] = idxx\n                                                                                        return temp\n                                                                                    })\n                                                                                }\n                                                                            }} />\n                                                                        </div>\n                                                                        <div className=\"w-10/12 mr-5\">\n                                                                            <Input style={{ marginRight: `0.5rem` }} defaultValue={docc} placeholder={`Masukkan opsi ke-${idxx + 1}`} disabled\n                                                                            />\n                                                                        </div>\n                                                                    </div>\n                                                                ))\n                                                            }\n                                                        </div>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === 'number' &&\n                                                        <InputNumber style={{ width: `30%` }} placeholder={`Masukkan default ${doc.name}`} onChange={(value) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = `${value}`\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></InputNumber>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"paragraph\" &&\n                                                        <Input.TextArea rows={4} placeholder={`Masukkan default ${doc.name}`} onChange={(e) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = e.target.value\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></Input.TextArea>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"checkbox\" &&\n                                                        <div className=\"flex flex-col\">\n                                                            <h1>Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini</h1>\n                                                            {\n                                                                doc.default.opsi.map((docc, idxx) => (\n                                                                    <div className=\"flex mb-3\">\n                                                                        <Checkbox style={{ marginRight: `0.5rem` }} onChange={(e) => {\n                                                                            if (e.target.checked === true) {\n                                                                                setfielddataa(prev => {\n                                                                                    var temp = prev\n                                                                                    temp[idx][\"default\"][\"default\"].push(idxx)\n                                                                                    return temp\n                                                                                })\n                                                                            }\n                                                                        }} /> {docc}\n                                                                    </div>\n                                                                ))\n                                                            }\n                                                        </div>\n                                                    }\n                                                    {\n                                                        (doc.data_type.toLowerCase() === \"string\") &&\n                                                        <Input placeholder={`Masukkan default ${doc.name}`} onChange={(e) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = e.target.value\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></Input>\n                                                    }\n                                                    {\n                                                        (doc.data_type.toLowerCase() === \"single\") &&\n                                                        <Input placeholder={`Masukkan default ${doc.name}`} onChange={(e) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = e.target.value\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></Input>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"date\" &&\n                                                        <DatePicker placeholder={`Masukkan default ${doc.name}`} onChange={(value, dateString) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = dateString\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></DatePicker>\n                                                    }\n                                                </div>\n                                                <style jsx>\n                                                    {`\n                                                        .judulField::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n                                                </style>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </>\n                    } */}\n          {loadingspec2 ? (\n            <Spin />\n          ) : (\n            <>\n              {fielddataa.map((doc, idx) => {\n                return (\n                  <>\n                    {addedfield3[idx] === true ? (\n                      <div\n                        key={idx}\n                        className={`${pointevent2} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                        onClick={() => {\n                          const temp = [...addedfield3];\n                          temp[idx] = false;\n                          for (var i = 0; i < temp.length; i++) {\n                            if (i !== idx) {\n                              temp[i] = true;\n                            }\n                          }\n                          setaddedfield3(temp);\n                          setcurrentfield2(fielddataa[idx]);\n                          if (\n                            doc.data_type === \"dropdown\" ||\n                            doc.data_type === \"checkbox\"\n                          ) {\n                            setcurrentdropdownn2(doc.default.opsi);\n                            setcd2part(doc.default.opsi);\n                            setcurrentcheckeddropdownn2(doc.default.default);\n                          }\n                          if (\n                            fielddataa[idx].data_type !== \"dropdown\" ||\n                            fielddataa[idx].data_type !== \"checkbox\"\n                          ) {\n                            if (\n                              fielddataa[idx].name !== \"\" &&\n                              fielddataa[idx].data_type !== \"\"\n                            ) {\n                              setdisabledtambah2(false);\n                            } else {\n                              setdisabledtambah2(true);\n                            }\n                          } else {\n                            if (\n                              doc.default.opsi.some((docopsi) => docopsi === \"\")\n                            ) {\n                              setdisabledtambah2(true);\n                            } else {\n                              setdisabledtambah2(false);\n                            }\n                          }\n                          setdisabledaddfield2(true);\n                          setpointevent2(\"pointer-events-none\");\n                        }}\n                      >\n                        <div className=\"font-semibold mb-2\">\n                          {doc.name}\n                          {fielddataa[idx].required ? (\n                            <span className=\"judulField\"></span>\n                          ) : null}{\" \"}\n                          <span className=\"text-gray-400 text-sm\">\n                            (\n                            {doc.data_type === \"single\"\n                              ? \"Single Textbox\"\n                              : doc.data_type.charAt(0).toUpperCase() +\n                                doc.data_type.slice(1)}\n                            {doc.data_type === \"paragraph\" && ` Text`})\n                          </span>\n                        </div>\n                        <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                          {doc.data_type === \"checkbox\" ||\n                          doc.data_type === \"dropdown\" ||\n                          doc.data_type === \"checkbox\" ||\n                          doc.data_type === \"dropdown\" ? (\n                            <>\n                              {doc.data_type === \"dropdown\" && (\n                                <div className=\"flex flex-col w-full\">\n                                  {doc.default.opsi.map((dok, idk) => {\n                                    return (\n                                      <div\n                                        key={idk}\n                                        className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                      >\n                                        <p className=\"mb-0\">{dok}</p>\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              )}\n                              {doc.data_type === \"checkbox\" && (\n                                <div className=\"flex flex-col w-full\">\n                                  {doc.default.opsi.map((dok, idk) => {\n                                    return (\n                                      <div\n                                        key={idk}\n                                        className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                      >\n                                        <p className=\"mb-0\">{dok}</p>\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              )}\n                              {doc.data_type === \"date\" && (\n                                <div className=\"flex justify-between w-full px-3\">\n                                  <p className=\"mb-0\">{doc.default}</p>\n                                  <div>\n                                    <CalendarOutlined></CalendarOutlined>\n                                  </div>\n                                </div>\n                              )}\n                              {doc.data_type === \"paragraph\" && (\n                                <div className=\"flex h-20\">{doc.default}</div>\n                              )}\n                            </>\n                          ) : (\n                            <p className=\"mb-0\">{doc.default}</p>\n                          )}\n                        </div>\n                        <style jsx>\n                          {`\n                                                .judulField::before{\n                                                    content: '*';\n                                                    color: red;\n                                                }\n                                            `}\n                        </style>\n                      </div>\n                    ) : (\n                      <div\n                        key={idx}\n                        className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                      >\n                        <Form layout=\"vertical\" initialValues={currentfield2}>\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                            <Form.Item\n                              name=\"name\"\n                              label=\"Nama Field\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: \"Nama Field wajib diisi\",\n                                },\n                              ]}\n                            >\n                              <Input\n                                required\n                                name=\"name\"\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    name: e.target.value,\n                                  });\n                                  if (e.target.value === \"\") {\n                                    setdisabledtambah2(true);\n                                  } else if (\n                                    e.target.value !== \"\" &&\n                                    currentfield2.data_type !== \"\" &&\n                                    currentdropdownn2.every(\n                                      (doca, idxa) => doca !== \"\"\n                                    )\n                                  ) {\n                                    setdisabledtambah2(false);\n                                  }\n                                }}\n                              />\n                            </Form.Item>\n                            <Form.Item\n                              name=\"data_type\"\n                              label=\"Tipe Field\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: \"Tipe Field wajib diisi\",\n                                },\n                              ]}\n                            >\n                              <Select\n                                placeholder=\"Pilih Tipe Field\"\n                                onChange={(value) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    data_type: value,\n                                  });\n                                  if (\n                                    value === \"dropdown\" ||\n                                    value === \"checkbox\"\n                                  ) {\n                                    if (\n                                      currentdropdownn2.every(\n                                        (doca, idxa) => doca !== \"\"\n                                      )\n                                    ) {\n                                      setdisabledtambah2(false);\n                                    } else {\n                                      setdisabledtambah2(true);\n                                    }\n                                  } else {\n                                    setdisabledtambah2(false);\n                                  }\n                                  if (value === \"dropdown\") {\n                                    setcurrentcheckeddropdownn2(\"\");\n                                    setcurrentdropdownn2([\"\", \"\"]);\n                                    setcd2part([\"\", \"\"]);\n                                    setdisabledtambah2(true);\n                                  }\n                                  if (value === \"checkbox\") {\n                                    setcurrentcheckeddropdownn2([]);\n                                    setcurrentdropdownn2([\"\", \"\"]);\n                                    setcd2part([\"\", \"\"]);\n                                    setdisabledtambah2(true);\n                                  }\n                                }}\n                                name=\"data_type\"\n                              >\n                                <Select.Option value={\"dropdown\"}>\n                                  Dropdown\n                                </Select.Option>\n                                <Select.Option value={\"number\"}>\n                                  Number\n                                </Select.Option>\n                                <Select.Option value={\"paragraph\"}>\n                                  Paragraph Text\n                                </Select.Option>\n                                <Select.Option value={\"checkbox\"}>\n                                  Checkbox\n                                </Select.Option>\n                                <Select.Option value={\"single\"}>\n                                  Single Textbox\n                                </Select.Option>\n                                <Select.Option value={\"date\"}>\n                                  Date\n                                </Select.Option>\n                              </Select>\n                            </Form.Item>\n                          </div>\n                          <Form.Item name=\"default\" label=\"Default\">\n                            {currentfield2.data_type.toLowerCase() ===\n                            \"dropdown\" ? (\n                              <div className=\"flex flex-col\">\n                                <h1>\n                                  Default hanya dipilih 1 (satu) dari beberapa\n                                  opsi dibawah ini\n                                </h1>\n                                {currentdropdownn2.map((doc, idxx) => (\n                                  <div className=\"flex mb-3\">\n                                    <div className=\"w-7 flex items-center\">\n                                      <Checkbox\n                                        checked={\n                                          currentcheckeddropdownn2 === idxx\n                                            ? true\n                                            : false\n                                        }\n                                        onChange={(e) => {\n                                          if (e.target.checked === true) {\n                                            setcurrentcheckeddropdownn2(idxx);\n                                          }\n                                        }}\n                                      ></Checkbox>\n                                    </div>\n                                    <div className=\"w-10/12 mr-5\">\n                                      <Input\n                                        style={{ marginRight: `0.5rem` }}\n                                        defaultValue={doc}\n                                        placeholder={`Masukkan opsi ke-${\n                                          idxx + 1\n                                        }`}\n                                        onChange={(e) => {\n                                          setcurrentdropdownn2((prev) => {\n                                            const temp = prev;\n                                            temp[idxx] = e.target.value;\n                                            return temp;\n                                          });\n                                          setcd2part((prev) => {\n                                            const temp = prev;\n                                            temp[idxx] = e.target.value;\n                                            return temp;\n                                          });\n                                          if (\n                                            e.target.value !== \"\" &&\n                                            currentdropdownn2.every(\n                                              (doca, idxa) => doca !== \"\"\n                                            ) &&\n                                            currentfield2.name !== \"\"\n                                          ) {\n                                            setdisabledtambah2(false);\n                                          } else if (\n                                            e.target.value === \"\" ||\n                                            currentfield2.name === \"\"\n                                          ) {\n                                            setdisabledtambah2(true);\n                                          }\n                                        }}\n                                      />\n                                    </div>\n                                    <div\n                                      className=\"w-1/12 flex justify-around\"\n                                      onClick={() => {\n                                        setcurrentdropdownn2([]);\n                                        setcdparttrigger((prev) => !prev);\n                                        setcdpartidx(idxx);\n                                      }}\n                                    >\n                                      <Button type=\"danger\">-</Button>\n                                    </div>\n                                  </div>\n                                ))}\n                                <div className=\"mx-auto my-3\">\n                                  <Button\n                                    onClick={() => {\n                                      setcurrentdropdownn2([\n                                        ...currentdropdownn2,\n                                        \"\",\n                                      ]);\n                                      setcd2part([...cd2part, \"\"]);\n                                      setdisabledtambah2(true);\n                                    }}\n                                  >\n                                    + Tambah Opsi\n                                  </Button>\n                                </div>\n                              </div>\n                            ) : null}\n                            {currentfield2.data_type.toLowerCase() ===\n                            \"checkbox\" ? (\n                              <div className=\"flex flex-col\">\n                                <h1>\n                                  Default dapat dipilih lebih dari 1 (satu) opsi\n                                  dibawah ini\n                                </h1>\n                                {currentdropdownn2.map((doc, idxx) => {\n                                  const idxchecked =\n                                    currentcheckeddropdownn2.includes(idxx);\n                                  return (\n                                    <div className=\"flex mb-3\">\n                                      <div className=\"w-7 flex items-center\">\n                                        <Checkbox\n                                          defaultChecked={idxchecked}\n                                          onChange={(e) => {\n                                            if (e.target.checked === true) {\n                                              setcurrentcheckeddropdownn2(\n                                                (prev) => {\n                                                  var temp = prev;\n                                                  temp.push(idxx);\n                                                  return temp;\n                                                }\n                                              );\n                                            } else {\n                                              setcurrentcheckeddropdownn2(\n                                                (prev) => {\n                                                  var temp = prev;\n                                                  const index =\n                                                    temp.indexOf(idxx);\n                                                  temp.splice(index, 1);\n                                                  return temp;\n                                                }\n                                              );\n                                            }\n                                          }}\n                                        ></Checkbox>\n                                      </div>\n                                      <div className=\"w-10/12 mr-5\">\n                                        <Input\n                                          style={{ marginRight: `0.5rem` }}\n                                          defaultValue={doc}\n                                          placeholder={`Masukkan opsi ke-${\n                                            idxx + 1\n                                          }`}\n                                          onChange={(e) => {\n                                            setcurrentdropdownn2((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            setcd2part((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            if (\n                                              e.target.value !== \"\" &&\n                                              currentdropdownn2.every(\n                                                (doca, idxa) => doca !== \"\"\n                                              ) &&\n                                              currentfield2.name !== \"\"\n                                            ) {\n                                              setdisabledtambah2(false);\n                                            } else if (\n                                              e.target.value === \"\" ||\n                                              currentfield2.name === \"\"\n                                            ) {\n                                              setdisabledtambah2(true);\n                                            }\n                                          }}\n                                        />\n                                      </div>\n                                      <div\n                                        className=\"w-1/12 flex justify-around\"\n                                        onClick={() => {\n                                          setcurrentdropdownn2([]);\n                                          setcdparttrigger((prev) => !prev);\n                                          setcdpartidx(idxx);\n                                        }}\n                                      >\n                                        <Button type=\"danger\">-</Button>\n                                      </div>\n                                    </div>\n                                  );\n                                })}\n                                <div className=\"mx-auto my-3\">\n                                  <Button\n                                    onClick={() => {\n                                      setcurrentdropdownn2([\n                                        ...currentdropdownn2,\n                                        \"\",\n                                      ]);\n                                      setcd2part([...cd2part, \"\"]);\n                                      setdisabledtambah2(true);\n                                    }}\n                                  >\n                                    + Tambah Opsi\n                                  </Button>\n                                </div>\n                              </div>\n                            ) : null}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"number\" && (\n                              <InputNumber\n                                style={{ width: `30%` }}\n                                defaultValue={fielddataa[idx].default}\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                onChange={(value) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: `${value}`,\n                                  });\n                                }}\n                              ></InputNumber>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"paragraph\" && (\n                              <Input.TextArea\n                                rows={4}\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                defaultValue={fielddataa[idx].default}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: e.target.value,\n                                  });\n                                }}\n                              ></Input.TextArea>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"string\" && (\n                              <Input\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                defaultValue={fielddataa[idx].default}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: e.target.value,\n                                  });\n                                }}\n                              ></Input>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"single\" && (\n                              <Input\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                defaultValue={fielddataa[idx].default}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: e.target.value,\n                                  });\n                                }}\n                              ></Input>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"date\" && (\n                              <DatePicker\n                                defaultValue={fielddataa[idx].default}\n                                style={{ width: `30%` }}\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                onChange={(value, dateString) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: dateString,\n                                  });\n                                }}\n                              ></DatePicker>\n                            )}\n                          </Form.Item>\n                          <hr />\n                          <div className=\"flex mt-4 justify-end\">\n                            <Popconfirm\n                              placement=\"bottom\"\n                              title={`Apakah anda yakin ingin menghapus field ${\n                                doc.name === \"\" ? \"ini\" : doc.name\n                              }?`}\n                              okText=\"Ya\"\n                              cancelText=\"Tidak\"\n                              onConfirm={() => {\n                                setfielddataa((prev) =>\n                                  prev.filter((_, idxx) => idxx !== idx)\n                                );\n                                setnewdata2((prev) => {\n                                  var temp = prev;\n                                  temp.model_columns =\n                                    temp.model_columns.filter(\n                                      (docxx, idxx) => docxx.id !== doc.id\n                                    );\n                                  return temp;\n                                });\n                                setaddedfield3((prev) => {\n                                  prev.splice(idx, 1);\n                                  return prev;\n                                });\n                                setdisabledaddfield2(false);\n                                setpointevent2(\"\");\n                              }}\n                            >\n                              <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                                <DeleteOutlined\n                                  style={{ fontSize: `1.25rem` }}\n                                ></DeleteOutlined>\n                              </div>\n                            </Popconfirm>\n                            <div className=\" flex items-center mr-4\">\n                              <Checkbox\n                                checked={currentfield2.required}\n                                style={{ marginRight: `0.5rem` }}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    required: e.target.checked,\n                                  });\n                                }}\n                              />{\" \"}\n                              Required\n                            </div>\n                            <Button\n                              disabled={disabledtambah2}\n                              type=\"primary\"\n                              onClick={() => {\n                                if (\n                                  currentfield2.data_type === \"dropdown\" ||\n                                  currentfield2.data_type === \"checkbox\"\n                                ) {\n                                  setidxdropdowntrigger3(idx);\n                                  setvaluedropdowntrigger3((prev) => !prev);\n                                }\n                                const temp = fielddataa;\n                                temp[idx] = currentfield2;\n                                setfielddataa(temp);\n                                setaddedfieldidx3(idx);\n                                setaddedfieldtrigger3((prev) => !prev);\n                                setconcatfieldtrigger2((prev) => !prev);\n                                setdisabledaddfield2(false);\n                                setpointevent2(\"\");\n                              }}\n                            >\n                              Tambah\n                            </Button>\n                          </div>\n                        </Form>\n                      </div>\n                    )}\n                  </>\n                );\n              })}\n            </>\n          )}\n\n          {fielddataa2.map((doc, idx) => {\n            return (\n              <>\n                {addedfield2[idx] === true ? (\n                  <div\n                    key={idx}\n                    className={`${pointevent2} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                    onClick={() => {\n                      const temp = [...addedfield2];\n                      temp[idx] = false;\n                      for (var i = 0; i < temp.length; i++) {\n                        if (i !== idx) {\n                          temp[i] = true;\n                        }\n                      }\n                      setaddedfield2(temp);\n                      setcurrentfield2(fielddataa2[idx]);\n                      if (\n                        doc.data_type === \"dropdown\" ||\n                        doc.data_type === \"checkbox\"\n                      ) {\n                        setcurrentdropdownn2(doc.default.opsi);\n                        setcd2part(doc.default.opsi);\n                        setcurrentcheckeddropdownn2(doc.default.default);\n                      }\n                      if (\n                        fielddataa2[idx].data_type !== \"dropdown\" ||\n                        fielddataa2[idx].data_type !== \"checkbox\"\n                      ) {\n                        if (\n                          fielddataa2[idx].name !== \"\" &&\n                          fielddataa2[idx].data_type !== \"\"\n                        ) {\n                          setdisabledtambah2(false);\n                        } else {\n                          setdisabledtambah2(true);\n                        }\n                      } else {\n                        if (\n                          doc.default.opsi.some((docopsi) => docopsi === \"\")\n                        ) {\n                          setdisabledtambah2(true);\n                        } else {\n                          setdisabledtambah2(false);\n                        }\n                      }\n                      setdisabledaddfield2(true);\n                      setpointevent2(\"pointer-events-none\");\n                    }}\n                  >\n                    <div className=\"font-semibold mb-2\">\n                      {doc.name}\n                      {fielddataa2[idx].required ? (\n                        <span className=\"judulField\"></span>\n                      ) : null}{\" \"}\n                      <span className=\"text-gray-400 text-sm\">\n                        (\n                        {doc.data_type === \"single\"\n                          ? \"Single Textbox\"\n                          : doc.data_type.charAt(0).toUpperCase() +\n                            doc.data_type.slice(1)}\n                        {doc.data_type === \"paragraph\" && ` Text`})\n                      </span>\n                    </div>\n                    <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                      {doc.data_type === \"checkbox\" ||\n                      doc.data_type === \"dropdown\" ||\n                      doc.data_type === \"paragraph\" ||\n                      doc.data_type === \"date\" ? (\n                        <>\n                          {doc.data_type === \"dropdown\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"checkbox\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"date\" && (\n                            <div className=\"flex justify-between w-full px-3\">\n                              <p className=\"mb-0\">{doc.default}</p>\n                              <div>\n                                <CalendarOutlined></CalendarOutlined>\n                              </div>\n                            </div>\n                          )}\n                          {doc.data_type === \"paragraph\" && (\n                            <div className=\"flex h-20\">{doc.default}</div>\n                          )}\n                        </>\n                      ) : (\n                        <p className=\"mb-0\">{doc.default}</p>\n                      )}\n                    </div>\n                    <style jsx>\n                      {`\n                                                        .judulField::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n                    </style>\n                  </div>\n                ) : (\n                  <div\n                    key={idx}\n                    className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                  >\n                    <Form layout=\"vertical\" initialValues={currentfield2}>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                        <Form.Item\n                          name=\"name\"\n                          label=\"Nama Field\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Nama Field wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Input\n                            required\n                            name=\"name\"\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                name: e.target.value,\n                              });\n                              if (e.target.value === \"\") {\n                                setdisabledtambah2(true);\n                              } else if (\n                                e.target.value !== \"\" &&\n                                currentfield2.data_type !== \"\" &&\n                                currentdropdownn2.every(\n                                  (doca, idxa) => doca !== \"\"\n                                )\n                              ) {\n                                setdisabledtambah2(false);\n                              }\n                            }}\n                          />\n                        </Form.Item>\n                        <Form.Item\n                          name=\"data_type\"\n                          label=\"Tipe Field\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Tipe Field wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Select\n                            placeholder=\"Pilih Tipe Field\"\n                            onChange={(value) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                data_type: value,\n                              });\n                              if (\n                                value === \"dropdown\" ||\n                                value === \"checkbox\"\n                              ) {\n                                if (\n                                  currentdropdownn2.every(\n                                    (doca, idxa) => doca !== \"\"\n                                  )\n                                ) {\n                                  setdisabledtambah2(false);\n                                } else {\n                                  setdisabledtambah2(true);\n                                }\n                              } else {\n                                setdisabledtambah2(false);\n                              }\n                              if (value === \"dropdown\") {\n                                setcurrentcheckeddropdownn2(\"\");\n                                setcurrentdropdownn2([\"\", \"\"]);\n                                setcd2part([\"\", \"\"]);\n                                setdisabledtambah2(true);\n                              }\n                              if (value === \"checkbox\") {\n                                setcurrentcheckeddropdownn2([]);\n                                setcurrentdropdownn2([\"\", \"\"]);\n                                setcd2part([\"\", \"\"]);\n                                setdisabledtambah2(true);\n                              }\n                            }}\n                            name=\"data_type\"\n                          >\n                            <Select.Option value={\"dropdown\"}>\n                              Dropdown\n                            </Select.Option>\n                            <Select.Option value={\"number\"}>\n                              Number\n                            </Select.Option>\n                            <Select.Option value={\"paragraph\"}>\n                              Paragraph Text\n                            </Select.Option>\n                            <Select.Option value={\"checkbox\"}>\n                              Checkbox\n                            </Select.Option>\n                            <Select.Option value={\"single\"}>\n                              Single Textbox\n                            </Select.Option>\n                            <Select.Option value={\"date\"}>Date</Select.Option>\n                          </Select>\n                        </Form.Item>\n                      </div>\n                      <Form.Item name=\"default\" label=\"Default\">\n                        {currentfield2.data_type.toLowerCase() ===\n                        \"dropdown\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default hanya dipilih 1 (satu) dari beberapa opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdownn2.map((doc, idxx) => (\n                              <div className=\"flex mb-3\">\n                                <div className=\"w-7 flex items-center\">\n                                  <Checkbox\n                                    checked={\n                                      currentcheckeddropdownn2 === idxx\n                                        ? true\n                                        : false\n                                    }\n                                    onChange={(e) => {\n                                      if (e.target.checked === true) {\n                                        setcurrentcheckeddropdownn2(idxx);\n                                      }\n                                    }}\n                                  ></Checkbox>\n                                </div>\n                                <div className=\"w-10/12 mr-5\">\n                                  <Input\n                                    style={{ marginRight: `0.5rem` }}\n                                    defaultValue={doc}\n                                    placeholder={`Masukkan opsi ke-${idxx + 1}`}\n                                    onChange={(e) => {\n                                      setcurrentdropdownn2((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      setcd2part((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      if (\n                                        e.target.value !== \"\" &&\n                                        currentdropdownn2.every(\n                                          (doca, idxa) => doca !== \"\"\n                                        ) &&\n                                        currentfield2.name !== \"\"\n                                      ) {\n                                        setdisabledtambah2(false);\n                                      } else if (\n                                        e.target.value === \"\" ||\n                                        currentfield2.name === \"\"\n                                      ) {\n                                        setdisabledtambah2(true);\n                                      }\n                                    }}\n                                  />\n                                </div>\n                                <div\n                                  className=\"w-1/12 flex justify-around\"\n                                  onClick={() => {\n                                    setcurrentdropdownn2([]);\n                                    setcdparttrigger((prev) => !prev);\n                                    setcdpartidx(idxx);\n                                  }}\n                                >\n                                  <Button type=\"danger\">-</Button>\n                                </div>\n                              </div>\n                            ))}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdownn2([\n                                    ...currentdropdownn2,\n                                    \"\",\n                                  ]);\n                                  setcd2part([...cd2part, \"\"]);\n                                  setdisabledtambah2(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield2.data_type.toLowerCase() ===\n                        \"checkbox\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default dapat dipilih lebih dari 1 (satu) opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdownn2.map((doc, idxx) => {\n                              const idxchecked =\n                                currentcheckeddropdownn2.includes(idxx);\n                              return (\n                                <div className=\"flex mb-3\">\n                                  <div className=\"w-7 flex items-center\">\n                                    <Checkbox\n                                      defaultChecked={idxchecked}\n                                      onChange={(e) => {\n                                        if (e.target.checked === true) {\n                                          setcurrentcheckeddropdownn2(\n                                            (prev) => {\n                                              var temp = prev;\n                                              temp.push(idxx);\n                                              return temp;\n                                            }\n                                          );\n                                        } else {\n                                          setcurrentcheckeddropdownn2(\n                                            (prev) => {\n                                              var temp = prev;\n                                              const index = temp.indexOf(idxx);\n                                              temp.splice(index, 1);\n                                              return temp;\n                                            }\n                                          );\n                                        }\n                                      }}\n                                    ></Checkbox>\n                                  </div>\n                                  <div className=\"w-10/12 mr-5\">\n                                    <Input\n                                      style={{ marginRight: `0.5rem` }}\n                                      defaultValue={doc}\n                                      placeholder={`Masukkan opsi ke-${\n                                        idxx + 1\n                                      }`}\n                                      onChange={(e) => {\n                                        setcurrentdropdownn2((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        setcd2part((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        if (\n                                          e.target.value !== \"\" &&\n                                          currentdropdownn2.every(\n                                            (doca, idxa) => doca !== \"\"\n                                          ) &&\n                                          currentfield2.name !== \"\"\n                                        ) {\n                                          setdisabledtambah2(false);\n                                        } else if (\n                                          e.target.value === \"\" ||\n                                          currentfield2.name === \"\"\n                                        ) {\n                                          setdisabledtambah2(true);\n                                        }\n                                      }}\n                                    />\n                                  </div>\n                                  <div\n                                    className=\"w-1/12 flex justify-around\"\n                                    onClick={() => {\n                                      setcurrentdropdownn2([]);\n                                      setcdparttrigger((prev) => !prev);\n                                      setcdpartidx(idxx);\n                                    }}\n                                  >\n                                    <Button type=\"danger\">-</Button>\n                                  </div>\n                                </div>\n                              );\n                            })}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdownn2([\n                                    ...currentdropdownn2,\n                                    \"\",\n                                  ]);\n                                  setcd2part([...cd2part, \"\"]);\n                                  setdisabledtambah2(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield2.data_type.toLowerCase() === \"number\" && (\n                          <InputNumber\n                            style={{ width: `30%` }}\n                            defaultValue={fielddataa2[idx].default}\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            onChange={(value) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: `${value}`,\n                              });\n                            }}\n                          ></InputNumber>\n                        )}\n                        {currentfield2.data_type.toLowerCase() ===\n                          \"paragraph\" && (\n                          <Input.TextArea\n                            rows={4}\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            defaultValue={fielddataa2[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input.TextArea>\n                        )}\n                        {currentfield2.data_type.toLowerCase() === \"string\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            defaultValue={fielddataa2[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield2.data_type.toLowerCase() === \"single\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            defaultValue={fielddataa2[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield2.data_type.toLowerCase() === \"date\" && (\n                          <DatePicker\n                            style={{ width: `30%` }}\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            onChange={(value, dateString) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: dateString,\n                              });\n                            }}\n                          ></DatePicker>\n                        )}\n                      </Form.Item>\n                      <hr />\n                      <div className=\"flex mt-4 justify-end\">\n                        <Popconfirm\n                          placement=\"bottom\"\n                          title={`Apakah anda yakin ingin menghapus field ${\n                            doc.name === \"\" ? \"ini\" : doc.name\n                          }?`}\n                          okText=\"Ya\"\n                          cancelText=\"Tidak\"\n                          onConfirm={() => {\n                            setfielddataa2((prev) =>\n                              prev.filter((_, idxx) => idxx !== idx)\n                            );\n                            setnewdata2((prev) => {\n                              var temp = prev;\n                              temp.model_columns = temp.model_columns.filter(\n                                (_, idxx) => idxx !== fielddataa.length + idx\n                              );\n                              return temp;\n                            });\n                            setaddedfield2((prev) => {\n                              prev.splice(idx, 1);\n                              return prev;\n                            });\n                            setdisabledaddfield2(false);\n                            setpointevent2(\"\");\n                          }}\n                        >\n                          <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                            <DeleteOutlined\n                              style={{ fontSize: `1.25rem` }}\n                            ></DeleteOutlined>\n                          </div>\n                        </Popconfirm>\n                        <div className=\" flex items-center mr-4\">\n                          <Checkbox\n                            checked={currentfield2.required}\n                            style={{ marginRight: `0.5rem` }}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                required: e.target.checked,\n                              });\n                            }}\n                          />{\" \"}\n                          Required\n                        </div>\n                        <Button\n                          type=\"primary\"\n                          disabled={disabledtambah2}\n                          onClick={() => {\n                            if (\n                              currentfield2.data_type === \"dropdown\" ||\n                              currentfield2.data_type === \"checkbox\"\n                            ) {\n                              setidxdropdowntrigger2(idx);\n                              setvaluedropdowntrigger2((prev) => !prev);\n                            }\n                            const temp = fielddataa2;\n                            temp[idx] = currentfield2;\n                            setfielddataa2(temp);\n                            setaddedfieldidx2(idx);\n                            setaddedfieldtrigger2((prev) => !prev);\n                            setconcatfieldtrigger2((prev) => !prev);\n                            setdisabledaddfield2(false);\n                            setpointevent2(\"\");\n                          }}\n                        >\n                          Tambah\n                        </Button>\n                      </div>\n                    </Form>\n                  </div>\n                )}\n              </>\n            );\n          })}\n          <div className=\"w-full flex justify-center mt-5\">\n            <Button\n              type=\"dashed\"\n              disabled={disabledaddfield2}\n              style={{ width: `80%`, height: `4rem` }}\n              onClick={onClickAddField2}\n            >\n              + Tambah Spesifikasi Model\n            </Button>\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">Form Tambah Manufacturer</h1>\n            <div className=\"flex\">\n              <Button\n                type=\"default\"\n                onClick={() => {\n                  setmodalmanuf(false);\n                }}\n                style={{ marginRight: `1rem` }}\n              >\n                Batal\n              </Button>\n              <Button\n                type=\"primary\"\n                disabled={disabledmanuf}\n                onClick={handleAddManufacturer}\n                loading={loadingmanuf}\n              >\n                Simpan\n              </Button>\n            </div>\n          </div>\n        }\n        visible={modalmanuf}\n        footer={null}\n        onCancel={() => {\n          setmodalmanuf(false);\n        }}\n        width={900}\n      >\n        <div className=\"flex flex-col mb-3\">\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Nama Manufacturer <span className=\"namamanu\"></span>\n            </p>\n            <Input\n              value={datamanuf.name}\n              placeholder=\"Masukkan Nama Manufacturer\"\n              onChange={(e) => {\n                e.target.value === \"\"\n                  ? setdisabledmanuf(true)\n                  : setdisabledmanuf(false);\n                setdatamanuf({ name: e.target.value });\n              }}\n            ></Input>\n            <style jsx>\n              {`\n                                .namamanu::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n        </div>\n      </Modal>\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res, params }) {\n  const modelid = params.modelId;\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resources = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"82\",\n      modelid,\n    },\n  };\n}\n\nexport default ModelsUpdate2;\n"]},"metadata":{},"sourceType":"module"}