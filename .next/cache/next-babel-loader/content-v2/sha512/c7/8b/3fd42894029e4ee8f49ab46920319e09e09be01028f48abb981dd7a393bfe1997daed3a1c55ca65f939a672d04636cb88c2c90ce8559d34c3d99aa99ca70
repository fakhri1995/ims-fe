{"ast":null,"code":"import _Input from \"antd/lib/input\";\nimport _Tooltip from \"antd/lib/tooltip\";\nimport _Tabs from \"antd/lib/tabs\";\nimport _Timeline from \"antd/lib/timeline\";\nimport _Modal from \"antd/lib/modal\";\nimport _Select from \"antd/lib/select\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _Empty from \"antd/lib/empty\";\nimport _Alert from \"antd/lib/alert\";\nimport _notification from \"antd/lib/notification\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { ExclamationCircleOutlined, DownOutlined } from '@ant-design/icons';\nimport Layout from '../../../components/layout-dashboard2';\nimport moment from 'moment';\nimport st from '../../../components/layout-dashboard.module.css';\nimport Sticky from 'wil-react-sticky';\n\nvar Overview = function Overview(_ref) {\n  var ticketid = _ref.ticketid,\n      initProps = _ref.initProps,\n      praloading = _ref.praloading,\n      maindata = _ref.maindata,\n      ticketrelations = _ref.ticketrelations,\n      dataProfile = _ref.dataProfile;\n  //init\n  var rt = useRouter();\n  var selisihWaktu = \"\";\n  maindata.ticket.closed_at ? Math.floor((new Date(maindata.ticket.closed_at).getTime() - new Date(maindata.ticket.original_raised_at).getTime()) / (1000 * 3600 * 24)) > 1 ? selisihWaktu = Math.floor((new Date(maindata.ticket.closed_at).getTime() - new Date(maindata.ticket.original_raised_at).getTime()) / (1000 * 3600 * 24)) + \" hari \" + Math.floor(Math.floor((new Date(maindata.ticket.closed_at).getTime() - new Date(maindata.ticket.original_raised_at).getTime()) % (1000 * 3600 * 24)) / (1000 * 3600)) + \" jam \" + Math.floor(Math.floor(Math.floor((new Date(maindata.ticket.closed_at).getTime() - new Date(maindata.ticket.original_raised_at).getTime()) % (1000 * 3600 * 24)) % (1000 * 3600)) / 60000) + \" menit\" : selisihWaktu = Math.floor((new Date(maindata.ticket.closed_at).getTime() - new Date(maindata.ticket.original_raised_at).getTime()) / (1000 * 3600)) + \" jam \" + Math.floor(Math.floor((new Date(maindata.ticket.closed_at).getTime() - new Date(maindata.ticket.original_raised_at).getTime()) % (1000 * 3600)) / 60000) + \" menit\" : null; //useState\n  //export\n\n  var _useState = useState(\"\"),\n      exporting = _useState[0],\n      setexporting = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      nameexporting = _useState2[0],\n      setnameexporting = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      noteexporting = _useState3[0],\n      setnoteexporting = _useState3[1];\n\n  var _useState4 = useState(false),\n      modalexporting = _useState4[0],\n      setmodalexporting = _useState4[1];\n\n  var _useState5 = useState(true),\n      displayexporting = _useState5[0],\n      setdisplayexporting = _useState5[1];\n\n  var _useState6 = useState(false),\n      loadingexporting = _useState6[0],\n      setloadingexporting = _useState6[1];\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"border-b flex justify-between px-5 pb-5 pt-3 mb-8\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: \"font-bold text-xl my-auto\",\n        children: \"Overview\"\n      }), praloading ? null : /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex\",\n        children: [dataProfile.data.role === 1 && /*#__PURE__*/_jsx(_Button, {\n          type: \"default\",\n          onClick: function onClick(e) {\n            rt.push(\"/tickets/update/\".concat(ticketid));\n          },\n          style: {\n            marginRight: \"1rem\"\n          },\n          size: \"large\",\n          children: \"Edit\"\n        }), dataProfile.data.role === 1 ? /*#__PURE__*/_jsx(_Button, {\n          type: \"primary\",\n          loading: loadingexporting,\n          className: \"buttonExport\",\n          onClick: function onClick(e) {\n            setloadingexporting(true);\n            fetch(\"https://boiling-thicket-46501.herokuapp.com/ticketExport?id=\".concat(ticketid), {\n              method: \"GET\",\n              headers: {\n                'Authorization': JSON.parse(initProps)\n              }\n            }).then(function (res) {\n              return res.blob();\n            }).then(function (res2) {\n              var newBlob = new Blob([res2], {\n                type: \"application/pdf\"\n              });\n              var data = window.URL.createObjectURL(newBlob);\n              var link = document.createElement('a');\n              link.href = data;\n              link.download = \"\".concat(maindata.ticket.type.name, \"-\").concat(maindata.ticket.ticketable.id, \".pdf\");\n              link.click();\n              setTimeout(function () {\n                window.URL.revokeObjectURL(data);\n              });\n              setloadingexporting(false);\n            });\n          },\n          size: \"large\",\n          children: \"Export\"\n        }) : /*#__PURE__*/_jsx(_Fragment, {\n          children: dataProfile.data.features.includes(113) && /*#__PURE__*/_jsx(_Button, {\n            type: \"primary\",\n            loading: loadingexporting,\n            className: \"buttonExport\",\n            onClick: function onClick(e) {\n              setloadingexporting(true);\n              fetch(\"https://boiling-thicket-46501.herokuapp.com/clientTicketExport?id=\".concat(ticketid), {\n                method: \"GET\",\n                headers: {\n                  'Authorization': JSON.parse(initProps)\n                }\n              }).then(function (res) {\n                return res.blob();\n              }).then(function (res2) {\n                var newBlob = new Blob([res2], {\n                  type: \"application/pdf\"\n                });\n                var data = window.URL.createObjectURL(newBlob);\n                var link = document.createElement('a');\n                link.href = data;\n                link.download = \"file.pdf\";\n                link.click();\n                setTimeout(function () {\n                  window.URL.revokeObjectURL(data);\n                });\n                setloadingexporting(false);\n              });\n            },\n            size: \"large\",\n            children: \"Export\"\n          })\n        })]\n      })]\n    }), praloading ? /*#__PURE__*/_jsx(_Spin, {}) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \"mb-8 mx-5 p-5 w-9/12 flex flex-col\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"border shadow-md rounded-md flex flex-col p-5 mb-6\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \" text-lg font-semibold\",\n          children: \"Ticket Detail:\"\n        }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Ticket Raised By:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.requester.name\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Lokasi Pembuat:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.requester.company.full_name\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Date Raised Ticket:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.original_raised_at ? moment(maindata.ticket.original_raised_at).locale('id').format(\"LL\") + \" - \" + moment(maindata.ticket.original_raised_at).locale('id').format(\"LT\") + \" WIB\" : \"-\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Date Closed Ticket:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.closed_at === null ? \"-\" : moment(maindata.ticket.closed_at).locale('id').format(\"LL\") + \" - \" + moment(maindata.ticket.closed_at).locale('id').format(\"LT\") + \" WIB\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Resolved Time:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.closed_at === null ? \"-\" : \"\".concat(selisihWaktu)\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"border shadow-md rounded-md flex flex-col p-5\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \" text-lg font-semibold\",\n          children: \"Problem Detail:\"\n        }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Jenis Produk:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.ticketable.product_type.name\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsxs(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: [maindata.ticket.ticketable.product_type === 2 ? \"Terminal ID\" : \"ID Produk\", \":\"]\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.ticketable.product_id === \"\" ? \"-\" : maindata.ticket.ticketable.product_id\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Nama PIC:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.ticketable.pic_name === \"\" ? \"-\" : maindata.ticket.ticketable.pic_name\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Kontak PIC:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.ticketable.pic_contact === \"\" ? \"-\" : maindata.ticket.ticketable.pic_contact\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Problem:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.ticketable.problem === \"\" ? \"-\" : maindata.ticket.ticketable.problem\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Lokasi Problem:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 mr-2 text-sm\",\n            children: maindata.ticket.ticketable.location.id === 0 ? \"-\" : maindata.ticket.ticketable.location.full_name\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Waktu Kejadian:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.ticketable.incident_time ? moment(maindata.ticket.ticketable.incident_time).locale('id').format(\"LL\") + \" - \" + moment(maindata.ticket.ticketable.incident_time).locale('id').format(\"LT\") + \" WIB\" : \"-\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-2\",\n            children: \"Bukti Kejadian:\"\n          }), maindata.ticket.ticketable.files.length === 0 ? \"-\" : maindata.ticket.ticketable.files.map(function (doc, idx) {\n            return /*#__PURE__*/_jsx(\"a\", {\n              href: doc,\n              target: \"_blank\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"border border-dashed px-4 py-2 flex justify-between items-center w-9/12 mb-1 relative cursor-pointer hover:text-blue-500\",\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  src: doc,\n                  alt: \"selected images\",\n                  className: \"object-contain w-16 h-16 mr-10\"\n                })\n              })\n            });\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Deskripsi Kerusakan:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: maindata.ticket.ticketable.description === \"\" ? \"-\" : maindata.ticket.ticketable.description\n          })]\n        })]\n      })]\n    })]\n  });\n};\n\nvar DetailItem = function DetailItem(_ref2) {\n  var _connecteditem$model_, _connecteditem$model_2, _connecteditem$mig_id, _connecteditem$locati, _jsx2;\n\n  var ticketid = _ref2.ticketid,\n      initProps = _ref2.initProps,\n      connecteditem = _ref2.connecteditem,\n      setconnecteditem = _ref2.setconnecteditem,\n      maindata = _ref2.maindata;\n  //init\n  var rt = useRouter(); //useState\n\n  var _useState7 = useState(true),\n      praloadingconnected = _useState7[0],\n      setpraloadingconnected = _useState7[1];\n\n  var _useState8 = useState({\n    id: null,\n    model_id: null,\n    vendor_id: null,\n    inventory_name: \"\",\n    status_condition: null,\n    status_usage: null,\n    location: null,\n    is_exist: null,\n    deskripsi: null,\n    manufacturer_id: null,\n    mig_id: \"\",\n    serial_number: null,\n    created_at: \"\",\n    updated_at: \"\",\n    deleted_at: null,\n    model_inventory: {\n      id: null,\n      name: \"\",\n      asset_id: null,\n      deleted_at: null,\n      asset: {\n        id: null,\n        name: \"\",\n        deleted_at: null\n      }\n    },\n    location_inventory: {\n      company_id: null,\n      company_name: \"\"\n    },\n    additional_attributes: [{\n      id: null,\n      name: \"\",\n      value: \"\"\n    }, {\n      id: null,\n      name: \"\",\n      value: \"\"\n    }],\n    inventory_parts: []\n  }),\n      connecteditemdata = _useState8[0],\n      setconnecteditemdata = _useState8[1];\n\n  var _useState9 = useState(true),\n      itemactivity = _useState9[0],\n      setitemactivity = _useState9[1];\n\n  var _useState10 = useState(false),\n      modalconnecteditem = _useState10[0],\n      setmodalconnecteditem = _useState10[1];\n\n  var _useState11 = useState(false),\n      loadingconnecteditem = _useState11[0],\n      setloadingconnecteditem = _useState11[1];\n\n  var _useState12 = useState(true),\n      disabledconnecteditem = _useState12[0],\n      setdisabledconnecteditem = _useState12[1]; //1.asset\n\n\n  var _useState13 = useState([]),\n      assetdata = _useState13[0],\n      setassetdata = _useState13[1];\n\n  var _useState14 = useState(null),\n      selectedasset = _useState14[0],\n      setselectedasset = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      selectedassetcode = _useState15[0],\n      setselectedassetcode = _useState15[1]; //2. Item\n\n\n  var _useState16 = useState([]),\n      itemdata = _useState16[0],\n      setitemdata = _useState16[1];\n\n  var _useState17 = useState(null),\n      selecteditem = _useState17[0],\n      setselecteditem = _useState17[1];\n\n  var _useState18 = useState(false),\n      fetchingpart = _useState18[0],\n      setfetchingpart = _useState18[1]; //handler\n\n\n  var handleSetItem = function handleSetItem() {\n    setloadingconnecteditem(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/setItemTicket\", {\n      method: \"PUT\",\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: Number(ticketid),\n        inventory_id: selecteditem\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingconnecteditem(false);\n      setmodalconnecteditem(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: \"Tiket berhasil dihubungkan dengan Item\",\n          duration: 3\n        });\n\n        window.location.href = \"/tickets/detail/\".concat(ticketid, \"?active=detailItem\");\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getAssets\", {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setassetdata(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    if (selectedasset !== null) {\n      fetch(\"https://boiling-thicket-46501.herokuapp.com/getInventories?rows=50&location_id=\".concat(maindata.ticket.ticketable.location_id !== null ? maindata.ticket.ticketable.location_id : \"\", \"&asset_id=\").concat(selectedasset === null ? \"\" : selectedasset), {\n        method: \"GET\",\n        headers: {\n          'Authorization': JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        // const datafilter = res2.data.filter(docfil => docfil.asset_id === selectedasset)\n        // setitemdata(datafilter.length === 0 ? res2.data : datafilter)\n        setitemdata(res2.data.data);\n      }, []);\n    }\n  }, [selectedasset]);\n  useEffect(function () {\n    // if (connecteditem !== null) {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getTicket?id=\".concat(ticketid), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setpraloadingconnected(true);\n      res2.data.ticket.ticketable.inventory_id !== null ? fetch(\"https://boiling-thicket-46501.herokuapp.com/getInventory?id=\".concat(res2.data.ticket.ticketable.inventory_id), {\n        method: \"GET\",\n        headers: {\n          'Authorization': JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res3) {\n        setconnecteditemdata(res3.data);\n        setpraloadingconnected(false);\n        setitemactivity(false);\n      }, []) : setconnecteditemdata(null);\n      setpraloadingconnected(false);\n    }); // else {\n    //     setconnecteditemdata(null)\n    //     setpraloadingconnected(false)\n    // }\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"border-b flex justify-between px-5 pb-5 pt-3 mb-8\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: \"font-bold text-xl my-auto\",\n        children: \"Detail Item\"\n      }),\n      /*#__PURE__*/\n      // praloading ?\n      //     null\n      //     :\n      _jsx(\"div\", {\n        className: \"flex\",\n        children: /*#__PURE__*/_jsx(_Button, {\n          type: \"primary\",\n          disabled: itemactivity,\n          onClick: function onClick(e) {\n            rt.push(\"/items/detail/\".concat(connecteditemdata.id, \"?active=activity\"));\n          },\n          size: \"large\",\n          children: \"Activity Item\"\n        })\n      })]\n    }), maindata.ticket.status.id === 5 && /*#__PURE__*/_jsx(\"div\", {\n      className: \" mb-5 w-10/12\",\n      children: /*#__PURE__*/_jsx(_Alert, {\n        style: {\n          padding: \"0.5rem\"\n        },\n        message: \"\",\n        description: /*#__PURE__*/_jsxs(\"p\", {\n          className: \"mb-0\",\n          children: [\"Berikut ini tampilan detail item yang di  \", /*#__PURE__*/_jsx(\"strong\", {\n            children: \"closed\"\n          }), \" pada \", /*#__PURE__*/_jsx(\"strong\", {\n            children: maindata.ticket.closed_at === null ? \"\" : moment(maindata.ticket.closed_at).locale('id').format(\"LL\")\n          }), \" \"]\n        }),\n        type: \"info\",\n        showIcon: true\n      })\n    }), praloadingconnected ? /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(_Spin, {})\n    }) : connecteditem === null ? /*#__PURE__*/_jsx(\"div\", {\n      className: \" border rounded-lg py-10 w-10/12 mx-auto flex flex-col\",\n      children: /*#__PURE__*/_jsx(_Empty, {\n        description: /*#__PURE__*/_jsxs(\"p\", {\n          className: \"jsx-2851635850\" + \" \" + \"mb-0\",\n          children: [\"Hubungkan \", /*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-2851635850\" + \" \" + \" text-blue-500\",\n            children: \"Item\"\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-2851635850\" + \" \" + \"connectItem\"\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"2851635850\",\n            children: [\".connectItem.jsx-2851635850::before{content:'*';color:red;}\"]\n          })]\n        }),\n        image: _Empty.PRESENTED_IMAGE_DEFAULT,\n        children: /*#__PURE__*/_jsx(_Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            setmodalconnecteditem(true);\n          },\n          children: \"Pilih Item\"\n        })\n      })\n    }) : /*#__PURE__*/_jsx(\"div\", {\n      className: \"mb-8 w-10/12 flex flex-col\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"border shadow-md rounded-md flex flex-col p-5 mb-5 relative\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex items-center absolute right-8 top-8\",\n          children: /*#__PURE__*/_jsx(_Button, {\n            onClick: function onClick() {\n              setmodalconnecteditem(true);\n            },\n            children: \"Ganti Item\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Model:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: (_connecteditem$model_ = connecteditem.model_inventory.name) !== null && _connecteditem$model_ !== void 0 ? _connecteditem$model_ : \"-\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Asset Type:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: (_connecteditem$model_2 = connecteditem.model_inventory.asset.full_name) !== null && _connecteditem$model_2 !== void 0 ? _connecteditem$model_2 : \"-\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"MIG ID:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: (_connecteditem$mig_id = connecteditem.mig_id) !== null && _connecteditem$mig_id !== void 0 ? _connecteditem$mig_id : \"-\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-2\",\n            children: \"Status Pemakaian:\"\n          }), connecteditem.status_usage ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [connecteditem.status_usage.id === 1 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md w-40 h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\",\n              children: \"In Used\"\n            }), connecteditem.status_usage.id === 2 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md w-40 h-auto px-1 text-center py-1 bg-green-100 border border-green-200 text-green-600\",\n              children: \"In Stock\"\n            }), connecteditem.status_usage.id === 3 && /*#__PURE__*/_jsx(\"div\", {\n              className: \"rounded-md w-40 h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\",\n              children: \"Replacement\"\n            })]\n          }) : \"-\"]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-2\",\n            children: \"Status Kondisi:\"\n          }), connecteditem.status_condition ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [connecteditem.status_condition.id === 1 && /*#__PURE__*/_jsxs(\"div\", {\n              className: \"p-1 flex w-full items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"w-3 h-3 rounded-full bg-green-500 mr-1\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"mb-0 font-semibold\",\n                children: \"Good\"\n              })]\n            }), connecteditem.status_condition.id === 2 && /*#__PURE__*/_jsxs(\"div\", {\n              className: \"p-1 flex w-full items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"w-3 h-3 rounded-full bg-gray-500 mr-1\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"mb-0 font-semibold\",\n                children: \"Grey\"\n              })]\n            }), connecteditem.status_condition.id === 3 && /*#__PURE__*/_jsxs(\"div\", {\n              className: \"p-1 flex w-full items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"w-3 h-3 rounded-full bg-red-500 mr-1\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"mb-0 font-semibold\",\n                children: \"Bad\"\n              })]\n            })]\n          }) : \"-\"]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Serial Number:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: connecteditem.serial_number === null ? \"-\" : connecteditem.serial_number\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Location:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: (_connecteditem$locati = connecteditem.location_inventory.full_name) !== null && _connecteditem$locati !== void 0 ? _connecteditem$locati : \"-\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mt-3 mb-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: \"Deskripsi:\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: connecteditem.deskripsi === null || connecteditem.deskripsi === \"\" ? \"-\" : connecteditem.deskripsi\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Hubungkan Item ke Ticket\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalconnecteditem(false);\n                setselectedassetcode(\"\");\n                setselectedasset(null);\n                setselecteditem(null);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }), /*#__PURE__*/_jsx(_Button, (_jsx2 = {\n              type: \"primary\",\n              loading: loadingconnecteditem,\n              disabled: disabledconnecteditem\n            }, _defineProperty(_jsx2, \"loading\", loadingconnecteditem), _defineProperty(_jsx2, \"onClick\", handleSetItem), _defineProperty(_jsx2, \"children\", \"Simpan\"), _jsx2))]\n          })\n        })]\n      }),\n      visible: modalconnecteditem,\n      onCancel: function onCancel() {\n        setmodalconnecteditem(false);\n        setselectedassetcode(\"\");\n        setselectedasset(null);\n        setselecteditem(null);\n      },\n      footer: null,\n      width: 720,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-344022341\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-344022341\" + \" \" + \"mb-0\",\n            children: [\"Asset Type \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-344022341\" + \" \" + \"assetitem\"\n            })]\n          }), /*#__PURE__*/_jsx(_TreeSelect, {\n            treeDefaultExpandAll: true,\n            value: selectedassetcode,\n            treeData: assetdata,\n            onChange: function onChange(value, label, extra) {\n              setselectedasset(extra.allCheckedNodes[0].node.props.id);\n              setselectedassetcode(value);\n            }\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"344022341\",\n            children: [\".assetitem.jsx-344022341::before{content:'*';color:red;}\"]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-2810874991\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-2810874991\" + \" \" + \"mb-0\",\n            children: [\"Item \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-2810874991\" + \" \" + \"itemitem\"\n            })]\n          }), /*#__PURE__*/_jsx(_Select, {\n            disabled: selectedasset === null,\n            value: selecteditem,\n            notFoundContent: fetchingpart ? /*#__PURE__*/_jsx(_Spin, {\n              size: \"small\"\n            }) : null,\n            onSearch: function onSearch(value) {\n              setfetchingpart(true);\n              fetch(\"https://boiling-thicket-46501.herokuapp.com/getInventories?rows=50&location_id=\".concat(maindata.ticket.ticketable.location_id !== null ? maindata.ticket.ticketable.location_id : \"\", \"&asset_id=\").concat(selectedasset === null ? \"\" : selectedasset, \"&mig_id=\").concat(value !== \"\" ? value : \"\"), {\n                method: \"GET\",\n                headers: {\n                  'Authorization': JSON.parse(initProps)\n                }\n              }).then(function (res) {\n                return res.json();\n              }).then(function (res2) {\n                res2.data.data.length === 0 ? setitemdata([]) : setitemdata(res2.data.data);\n                setfetchingpart(false);\n              });\n            },\n            showSearch: true,\n            optionFilterProp: \"children\",\n            placeholder: \"Cari Item\",\n            filterOption: function filterOption(input, opt) {\n              return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n            },\n            onChange: function onChange(value) {\n              setselecteditem(value);\n              setdisabledconnecteditem(false);\n            },\n            children: itemdata.map(function (doc, idx) {\n              return /*#__PURE__*/_jsx(_Select.Option, {\n                value: doc.id,\n                children: doc.mig_id\n              });\n            })\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"2810874991\",\n            children: [\".itemitem.jsx-2810874991::before{content:'*';color:red;}\"]\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nvar Activity = function Activity(_ref3) {\n  var ticketid = _ref3.ticketid,\n      initProps = _ref3.initProps,\n      activitytrigger = _ref3.activitytrigger,\n      dataProfile = _ref3.dataProfile;\n\n  //useState\n  var _useState19 = useState([]),\n      logs = _useState19[0],\n      setlogs = _useState19[1];\n\n  var _useState20 = useState(true),\n      praloadinglogs = _useState20[0],\n      setpraloadinglogs = _useState20[1]; //useEffect\n\n\n  useEffect(function () {\n    setpraloadinglogs(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/\".concat(dataProfile.data.role === 1 ? \"getTicketLog\" : \"getClientTicketLog\", \"?id=\").concat(ticketid), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setlogs(res2.data);\n      setpraloadinglogs(false);\n    });\n  }, [activitytrigger]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"border-b flex justify-between p-5 mb-8\",\n      children: /*#__PURE__*/_jsx(\"h1\", {\n        className: \"font-bold text-xl my-auto\",\n        children: \"Activity\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex flex-col w-6/12\",\n      children: praloadinglogs ? /*#__PURE__*/_jsx(_Spin, {}) : logs.length < 1 ? /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(_Empty, {\n          image: _Empty.PRESENTED_IMAGE_SIMPLE\n        })\n      }) : /*#__PURE__*/_jsx(_Timeline, {\n        mode: \"left\",\n        children: logs.map(function (doclog, idxlog) {\n          return /*#__PURE__*/_jsx(_Timeline.Item, {\n            label: moment(doclog.created_at).locale('id').format('LL') + \" \" + moment(doclog.created_at).locale('id').format('LT'),\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsx(\"h1\", {\n                className: \"font-semibold text-base mb-1\",\n                children: doclog.log_name\n              }), /*#__PURE__*/_jsxs(\"p\", {\n                className: \"mb-1 text-xs text-gray-500\",\n                children: [\"Oleh \", doclog.causer.name]\n              }), /*#__PURE__*/_jsxs(\"p\", {\n                className: \"mb-1 text-sm\",\n                children: [\"Notes: \", doclog.description === null ? \"-\" : doclog.description]\n              })]\n            })\n          });\n        })\n      })\n    })]\n  });\n};\n\nvar TicketDetail = function TicketDetail(_ref4) {\n  var _jsx3, _jsx4;\n\n  var initProps = _ref4.initProps,\n      dataProfile = _ref4.dataProfile,\n      sidemenu = _ref4.sidemenu,\n      ticketid = _ref4.ticketid;\n  //1. Init\n  var rt = useRouter();\n  var activeTab = \"overview\";\n  var active = rt.query.active;\n\n  if (active) {\n    activeTab = active;\n  }\n\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 2);\n  pathArr[pathArr.length - 1] = \"Detail Ticket\";\n  var TabPane = _Tabs.TabPane; //useState\n\n  var _useState21 = useState({\n    ticket: {\n      id: Number(ticketid),\n      raised_at: \"\",\n      closed_at: \"\",\n      original_closed_at: \"\",\n      resolve_time: \"\",\n      type: {\n        id: null,\n        name: \"\",\n        code: \"\"\n      },\n      status: {\n        id: null,\n        name: \"\"\n      },\n      requester: {\n        user_id: null,\n        fullname: \"\"\n      },\n      ticketable: {\n        id: null,\n        product_type: null,\n        product_id: \"\",\n        pic_name: \"\",\n        pic_contact: \"\",\n        location_id: null,\n        inventory_id: null,\n        location: {\n          company_id: null,\n          company_name: \"\"\n        },\n        problem: \"\",\n        incident_time: \"\",\n        files: [\"\"],\n        description: \"\",\n        deleted_at: null\n      },\n      assignable: {\n        id: null,\n        name: \"\"\n      }\n    }\n  }),\n      maindata = _useState21[0],\n      setmaindata = _useState21[1];\n\n  var _useState22 = useState({\n    status_ticket: [{\n      id: 0,\n      name: \"\"\n    }],\n    ticket_types: [{\n      id: '',\n      name: ''\n    }],\n    requesters: [{\n      user_id: 0,\n      fullname: \"\",\n      company_id: 0\n    }],\n    companies: {\n      data: [{\n        id: 0,\n        title: '',\n        key: '',\n        value: 0\n      }]\n    }\n  }),\n      ticketrelations = _useState22[0],\n      setticketrelations = _useState22[1];\n\n  var _useState23 = useState(true),\n      praloading = _useState23[0],\n      setpraloading = _useState23[1]; //notes\n\n\n  var _useState24 = useState(\"\"),\n      notes = _useState24[0],\n      setnotes = _useState24[1];\n\n  var _useState25 = useState(false),\n      modalnotes = _useState25[0],\n      setmodalnotes = _useState25[1];\n\n  var _useState26 = useState(false),\n      loadingnotes = _useState26[0],\n      setloadingnotes = _useState26[1]; //status\n\n\n  var _useState27 = useState(\"\"),\n      status = _useState27[0],\n      setstatus = _useState27[1];\n\n  var _useState28 = useState(\"\"),\n      namestatus = _useState28[0],\n      setnamestatus = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      notestatus = _useState29[0],\n      setnotestatus = _useState29[1];\n\n  var _useState30 = useState(false),\n      modalstatus = _useState30[0],\n      setmodalstatus = _useState30[1];\n\n  var _useState31 = useState(true),\n      displaystatus = _useState31[0],\n      setdisplaystatus = _useState31[1];\n\n  var _useState32 = useState(false),\n      loadingstatus = _useState32[0],\n      setloadingstatus = _useState32[1]; //asignto\n\n\n  var _useState33 = useState(null),\n      to = _useState33[0],\n      setto = _useState33[1];\n\n  var _useState34 = useState(null),\n      assignto = _useState34[0],\n      setassignto = _useState34[1];\n\n  var _useState35 = useState(\"\"),\n      nameassignto = _useState35[0],\n      setnameassignto = _useState35[1];\n\n  var _useState36 = useState(\"\"),\n      defaultnameassignto = _useState36[0],\n      setdefaultnameassignto = _useState36[1];\n\n  var _useState37 = useState(false),\n      modalassignto = _useState37[0],\n      setmodalassignto = _useState37[1];\n\n  var _useState38 = useState(false),\n      loadingassignto = _useState38[0],\n      setloadingassignto = _useState38[1];\n\n  var _useState39 = useState(true),\n      disabledassignto = _useState39[0],\n      setdisabledassignto = _useState39[1];\n\n  var _useState40 = useState(true),\n      displayassignto = _useState40[0],\n      setdisplayassignto = _useState40[1]; //connected item\n\n\n  var _useState41 = useState(null),\n      connecteditem = _useState41[0],\n      setconnecteditem = _useState41[1]; //activity\n\n\n  var _useState42 = useState(0),\n      activitytrigger = _useState42[0],\n      setactivitytrigger = _useState42[1]; //groups/engineer\n\n\n  var _useState43 = useState([]),\n      engineergroup = _useState43[0],\n      setengineergroup = _useState43[1];\n\n  var _useState44 = useState(-1),\n      engineergrouptrigger = _useState44[0],\n      setengineergrouptrigger = _useState44[1]; //handler\n\n\n  var handleSetStatus = function handleSetStatus() {\n    setloadingstatus(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/changeStatusTicket\", {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: Number(ticketid),\n        notes: notestatus,\n        status_id: status\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingstatus(false);\n      setmodalstatus(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: \"Status berhasil diubah\",\n          duration: 2\n        });\n\n        window.location.href = \"/tickets/detail/\".concat(ticketid);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleSetStatusClient = function handleSetStatusClient() {\n    setloadingstatus(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/cancelClientTicket\", {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: Number(ticketid),\n        notes: notestatus\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingstatus(false);\n      setmodalstatus(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: \"Status berhasil diubah\",\n          duration: 2\n        });\n\n        window.location.href = \"/tickets/detail/\".concat(ticketid);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleNotes = function handleNotes() {\n    setloadingnotes(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/\".concat(dataProfile.data.role === 1 ? \"addNoteTicket\" : \"clientAddNoteTicket\"), {\n      method: 'POST',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: Number(ticketid),\n        notes: notes\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingnotes(false);\n      setmodalnotes(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: \"Note berhasil ditambahkan\",\n          duration: 3\n        });\n\n        window.location.href = \"/tickets/detail/\".concat(ticketid, \"?active=activity\");\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleAssignTo = function handleAssignTo() {\n    setloadingassignto(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/assignTicket\", {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: Number(ticketid),\n        assignable_type: to,\n        assignable_id: assignto\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingassignto(false);\n      setmodalassignto(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: \"Assign To berhasil diubah\",\n          duration: 3\n        });\n\n        window.location.href = \"/tickets/detail/\".concat(ticketid);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/\".concat(dataProfile.data.role === 1 ? \"getTicket\" : \"getClientTicket\", \"?id=\").concat(ticketid), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setmaindata(res2.data);\n      setstatus(res2.data.ticket.status.id);\n      res2.data.ticket.assignable.id ? (setassignto(res2.data.ticket.assignable.id), setnameassignto(res2.data.ticket.assignable.name), setdefaultnameassignto(res2.data.ticket.assignable.name)) : setassignto(null);\n      res2.data.ticket.ticketable.inventory === null ? setconnecteditem(null) : setconnecteditem(res2.data.ticket.ticketable.inventory);\n    }).then(function () {\n      fetch(\"https://boiling-thicket-46501.herokuapp.com/\".concat(dataProfile.data.role === 1 ? \"getTicketRelation\" : \"getClientTicketRelation\"), {\n        method: \"GET\",\n        headers: {\n          'Authorization': JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setticketrelations(res2.data);\n        setpraloading(false);\n      });\n    });\n  }, []);\n  useEffect(function () {\n    if (engineergrouptrigger !== -1) {\n      fetch(\"https://boiling-thicket-46501.herokuapp.com/getAssignToList?assignable_type=\".concat(to === true ? 1 : 0), {\n        method: \"GET\",\n        headers: {\n          'Authorization': JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setengineergroup(res2.data);\n      });\n    }\n  }, [engineergrouptrigger]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    st: st,\n    sidemenu: sidemenu,\n    tok: initProps,\n    pathArr: pathArr,\n    dataProfile: dataProfile,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8\",\n        children: /*#__PURE__*/_jsx(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" col-span-4 flex justify-between py-4 px-4 border-t border-b bg-white\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \" text-gray-400 mb-0\",\n                  children: \"Ticket Number:\"\n                }), /*#__PURE__*/_jsxs(\"h1\", {\n                  className: \"font-semibold py-2 text-2xl mb-0 mr-20\",\n                  children: [\"#INC-\", maindata.ticket.ticketable.id]\n                })]\n              }), praloading ? null : /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col mr-7 p-2\",\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-1\",\n                    children: \"Ticket Type:\"\n                  }),\n                  /*#__PURE__*/\n                  // displayusage ?\n                  _jsx(_Select, (_jsx3 = {\n                    defaultValue: maindata.ticket.type.id,\n                    placeholder: \"Masukkan Tipe Ticket\",\n                    style: {\n                      width: \"10rem\"\n                    },\n                    bordered: true\n                  }, _defineProperty(_jsx3, \"defaultValue\", 1), _defineProperty(_jsx3, \"onChange\", function onChange(value) {}), _defineProperty(_jsx3, \"children\", ticketrelations.ticket_types.map(function (doc, idx) {\n                    return /*#__PURE__*/_jsx(_Select.Option, {\n                      value: doc.id,\n                      children: /*#__PURE__*/_jsx(\"strong\", {\n                        children: doc.name\n                      })\n                    });\n                  })), _jsx3)) // :\n                  // null\n                  ]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col p-2 mr-7\",\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-1\",\n                    children: \"Status:\"\n                  }), displaystatus ? /*#__PURE__*/_jsx(_Select, (_jsx4 = {\n                    disabled: status === 5,\n                    defaultValue: maindata.ticket.status.id,\n                    value: status,\n                    placeholder: \"Masukkan Status\",\n                    style: {\n                      width: \"10rem\"\n                    },\n                    bordered: true\n                  }, _defineProperty(_jsx4, \"defaultValue\", 1), _defineProperty(_jsx4, \"onChange\", function onChange(value, option) {\n                    setstatus(value);\n                    setnamestatus(option.name);\n                    setmodalstatus(true);\n                    setdisplaystatus(false);\n                  }), _defineProperty(_jsx4, \"children\", dataProfile.data.role === 1 ? ticketrelations.status_ticket.map(function (doc, idx) {\n                    return /*#__PURE__*/_jsx(_Select.Option, {\n                      value: doc.id,\n                      name: doc.name,\n                      children: /*#__PURE__*/_jsx(\"strong\", {\n                        children: doc.name\n                      })\n                    }, idx);\n                  }) : dataProfile.data.features.includes(110) && ticketrelations.status_ticket.map(function (doc, idx) {\n                    if (doc.id === 1 || doc.id === 4) {\n                      return /*#__PURE__*/_jsx(_Select.Option, {\n                        value: doc.id,\n                        name: doc.name,\n                        children: /*#__PURE__*/_jsx(\"strong\", {\n                          children: doc.name\n                        })\n                      }, idx);\n                    }\n                  })), _jsx4)) : null]\n                }), dataProfile.data.role === 1 && /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col cursor-pointer w-40\",\n                  onClick: function onClick() {\n                    setmodalassignto(true);\n                    setdisplayassignto(false);\n                  },\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-1\",\n                    children: \"Assign To:\"\n                  }), displayassignto ? /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"py-1 px-3 border border-primary100 flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsx(\"h1\", {\n                      className: \"font-semibold mb-0 mr-5\",\n                      children: assignto === null ? 'None' : \"\".concat(nameassignto)\n                    }), /*#__PURE__*/_jsx(DownOutlined, {})]\n                  }) : null]\n                })]\n              })]\n            }), dataProfile.data.role === 1 ? /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex items-center\",\n              children: /*#__PURE__*/_jsx(_Button, {\n                onClick: function onClick() {\n                  setmodalnotes(true);\n                },\n                size: \"large\",\n                children: \"Tambah Notes\"\n              })\n            }) : /*#__PURE__*/_jsx(_Fragment, {\n              children: dataProfile.data.features.includes(112) && /*#__PURE__*/_jsx(\"div\", {\n                className: \"flex items-center\",\n                children: /*#__PURE__*/_jsx(_Button, {\n                  onClick: function onClick() {\n                    setmodalnotes(true);\n                  },\n                  size: \"large\",\n                  children: \"Tambah Notes\"\n                })\n              })\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-span-1 md:col-span-4 mb-8\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \" hidden md:block\",\n          children: /*#__PURE__*/_jsxs(_Tabs, {\n            tabPosition: \"left\",\n            defaultActiveKey: activeTab,\n            onTabClick: function onTabClick(key, e) {\n              if (key === \"activity\") {\n                setactivitytrigger(function (prev) {\n                  return prev + 1;\n                });\n              }\n            },\n            children: [/*#__PURE__*/_jsx(TabPane, {\n              tab: \"Overview\",\n              children: /*#__PURE__*/_jsx(Overview, {\n                ticketid: ticketid,\n                initProps: initProps,\n                praloading: praloading,\n                maindata: maindata,\n                ticketrelations: ticketrelations,\n                dataProfile: dataProfile\n              })\n            }, \"overview\"), dataProfile.data.role === 1 && /*#__PURE__*/_jsx(TabPane, {\n              tab: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"mb-0 mr-2\",\n                  children: \"Detail Item\"\n                }), connecteditem === null ? /*#__PURE__*/_jsx(_Tooltip, {\n                  placement: \"right\",\n                  title: \"Ticket Incident belum terhubung dengan Item\",\n                  children: /*#__PURE__*/_jsx(ExclamationCircleOutlined, {\n                    style: {\n                      color: \"brown\"\n                    }\n                  })\n                }) : null]\n              }),\n              children: /*#__PURE__*/_jsx(DetailItem, {\n                ticketid: ticketid,\n                initProps: initProps,\n                connecteditem: connecteditem,\n                setconnecteditem: setconnecteditem,\n                maindata: maindata\n              })\n            }, \"detailItem\"), dataProfile.data.role === 1 ? /*#__PURE__*/_jsx(TabPane\n            /*disabled={praloading2}*/\n            , {\n              tab: \"Activity\",\n              children: /*#__PURE__*/_jsx(Activity, {\n                dataProfile: dataProfile,\n                ticketid: ticketid,\n                initProps: initProps,\n                activitytrigger: activitytrigger\n              })\n            }, \"activity\") : dataProfile.data.features.includes(111) && /*#__PURE__*/_jsx(TabPane\n            /*disabled={praloading2}*/\n            , {\n              tab: \"Activity\",\n              children: /*#__PURE__*/_jsx(Activity, {\n                dataProfile: dataProfile,\n                ticketid: ticketid,\n                initProps: initProps,\n                activitytrigger: activitytrigger\n              })\n            }, \"activity\")]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \" block md:hidden\",\n          children: /*#__PURE__*/_jsxs(_Tabs, {\n            tabPosition: \"top\",\n            defaultActiveKey: activeTab,\n            onTabClick: function onTabClick(key, e) {\n              if (key === \"activity\") {\n                setactivitytrigger(function (prev) {\n                  return prev + 1;\n                });\n              }\n            },\n            children: [/*#__PURE__*/_jsx(TabPane, {\n              tab: \"Overview\",\n              children: /*#__PURE__*/_jsx(Overview, {\n                ticketid: ticketid,\n                initProps: initProps,\n                praloading: praloading,\n                maindata: maindata,\n                ticketrelations: ticketrelations,\n                dataProfile: dataProfile\n              })\n            }, \"overview\"), dataProfile.data.role === 1 && /*#__PURE__*/_jsx(TabPane, {\n              tab: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"mb-0 mr-2\",\n                  children: \"Detail Item\"\n                }), connecteditem === null ? /*#__PURE__*/_jsx(_Tooltip, {\n                  placement: \"right\",\n                  title: \"Ticket Incident belum terhubung dengan Item\",\n                  children: /*#__PURE__*/_jsx(ExclamationCircleOutlined, {\n                    style: {\n                      color: \"brown\"\n                    }\n                  })\n                }) : null]\n              }),\n              children: /*#__PURE__*/_jsx(DetailItem, {\n                ticketid: ticketid,\n                initProps: initProps,\n                connecteditem: connecteditem,\n                setconnecteditem: setconnecteditem,\n                maindata: maindata\n              })\n            }, \"detailItem\"), dataProfile.data.role === 1 ? /*#__PURE__*/_jsx(TabPane\n            /*disabled={praloading2}*/\n            , {\n              tab: \"Activity\",\n              children: /*#__PURE__*/_jsx(Activity, {\n                dataProfile: dataProfile,\n                ticketid: ticketid,\n                initProps: initProps,\n                activitytrigger: activitytrigger\n              })\n            }, \"activity\") : dataProfile.data.features.includes(111) && /*#__PURE__*/_jsx(TabPane\n            /*disabled={praloading2}*/\n            , {\n              tab: \"Activity\",\n              children: /*#__PURE__*/_jsx(Activity, {\n                dataProfile: dataProfile,\n                ticketid: ticketid,\n                initProps: initProps,\n                activitytrigger: activitytrigger\n              })\n            }, \"activity\")]\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxs(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: [\"Form Tambah Notes ticket #\", maindata.ticket.type.code, \"-\", maindata.ticket.type.id]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalnotes(false);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              type: \"primary\",\n              disabled: notes === \"\",\n              loading: loadingnotes,\n              onClick: handleNotes,\n              children: \"Simpan\"\n            })]\n          })\n        })]\n      }),\n      visible: modalnotes,\n      onCancel: function onCancel() {\n        setmodalnotes(false);\n      },\n      footer: null,\n      width: 720,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-2611387432\" + \" \" + \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          className: \"jsx-2611387432\" + \" \" + \"mb-2\",\n          children: [\"Notes \", /*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-2611387432\" + \" \" + \"notes\"\n          })]\n        }), /*#__PURE__*/_jsx(_Input.TextArea, {\n          rows: 3,\n          placeholder: \"Masukkan Notes\",\n          onChange: function onChange(e) {\n            setnotes(e.target.value);\n          }\n        }), /*#__PURE__*/_jsx(_JSXStyle, {\n          id: \"2611387432\",\n          children: [\".notes.jsx-2611387432::before{content:'*';color:red;}\"]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxs(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: [\"Ubah Status Ticket Menjadi \", namestatus]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalstatus(false);\n                setdisplaystatus(true);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              type: \"primary\",\n              disabled: status === \"\",\n              loading: loadingstatus,\n              onClick: dataProfile.data.role === 1 ? handleSetStatus : handleSetStatusClient,\n              children: \"Simpan\"\n            })]\n          })\n        })]\n      }),\n      visible: modalstatus,\n      onCancel: function onCancel() {\n        setmodalstatus(false);\n        setdisplaystatus(true);\n      },\n      footer: null,\n      width: 720,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-270701989\" + \" \" + \"flex mb-2\",\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-270701989\" + \" \" + \"judulField\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"jsx-270701989\" + \" \" + \"mb-0\",\n            children: \"Notes\"\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"270701989\",\n            children: [\".judulField.jsx-270701989::before{content:'*';color:red;}\"]\n          })]\n        }), /*#__PURE__*/_jsx(_Input.TextArea, {\n          rows: 3,\n          placeholder: \"Masukkan Notes\",\n          onChange: function onChange(e) {\n            setnotestatus(e.target.value);\n          }\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Assigned To\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalassignto(false);\n                setdisplayassignto(true);\n                setnameassignto(defaultnameassignto);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              type: \"primary\",\n              disabled: disabledassignto,\n              onClick: handleAssignTo,\n              loading: loadingassignto,\n              children: \"Simpan\"\n            })]\n          })\n        })]\n      }),\n      visible: modalassignto,\n      onCancel: function onCancel() {\n        setmodalassignto(false);\n        setdisplayassignto(true);\n        setnameassignto(defaultnameassignto);\n      },\n      footer: null,\n      width: 720,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-3142285315\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-3142285315\" + \" \" + \"mb-0\",\n            children: [\"Assigned To \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-3142285315\" + \" \" + \"assto\"\n            })]\n          }), /*#__PURE__*/_jsxs(_Select, {\n            onChange: function onChange(value) {\n              setto(value);\n              setengineergrouptrigger(function (prev) {\n                return prev + 1;\n              });\n            },\n            children: [/*#__PURE__*/_jsx(_Select.Option, {\n              value: true,\n              children: \"Engineer\"\n            }), /*#__PURE__*/_jsx(_Select.Option, {\n              value: false,\n              children: \"Group\"\n            })]\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"3142285315\",\n            children: [\".assto.jsx-3142285315::before{content:'*';color:red;}\"]\n          })]\n        }), to === null ? null : /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-3891418108\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-3891418108\" + \" \" + \"mb-0\",\n            children: [to === true ? \"Engineer\" : \"Group\", \" \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-3891418108\" + \" \" + \"engineer\"\n            })]\n          }),\n          /*#__PURE__*/\n          // to === true &&\n          _jsx(_Select, {\n            disabled: to === null,\n            onChange: function onChange(value, option) {\n              setassignto(value);\n              setdisabledassignto(false);\n              setnameassignto(option.name);\n            },\n            children: engineergroup.map(function (doc, idx) {\n              return /*#__PURE__*/_jsx(_Select.Option, {\n                value: doc.id,\n                name: doc.name,\n                children: doc.name\n              });\n            })\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"3891418108\",\n            children: [\".engineer.jsx-3891418108::before{content:'*';color:red;}\"]\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default TicketDetail;","map":null,"metadata":{},"sourceType":"module"}