{"ast":null,"code":"import _Tabs from \"antd/lib/tabs\";\nimport _Modal from \"antd/lib/modal\";\nimport _notification from \"antd/lib/notification\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Input from \"antd/lib/input\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Layout from \"../../components/layout-dashboard-profile\";\nimport httpcookie from 'cookie';\nimport { useState } from \"react\";\nimport { useRouter } from 'next/router';\nimport EditOutlined from '@ant-design/icons/EditOutlined';\nimport st from '../../components/layout-dashboard-profile.module.css';\n\nfunction ProfileTabs({\n  dataProfile,\n  editable2\n}) {\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"p-4 flex flex-col w-full\",\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex flex-col\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: \"text-base font-normal mb-4\",\n        children: \"Work Information\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-5 my-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs text-gray-600 mb-1\",\n            children: \"Nama Lengkap\"\n          }), editable2 ? /*#__PURE__*/_jsx(_Input, {\n            defaultValue: dataProfile.data.fullname\n          }) : /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-sm text-black\",\n            children: dataProfile.data.fullname\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-5 my-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs text-gray-600 mb-1\",\n            children: \"Email\"\n          }), editable2 ? /*#__PURE__*/_jsx(_Input, {\n            defaultValue: dataProfile.data.email\n          }) : /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-sm text-black\",\n            children: dataProfile.data.email\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-5 my-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs text-gray-600 mb-1\",\n            children: \"Nomor Telepon\"\n          }), editable2 ? /*#__PURE__*/_jsx(_Input, {\n            defaultValue: dataProfile.data.phone_number\n          }) : /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-sm text-black\",\n            children: dataProfile.data.phone_number\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-5 my-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs text-gray-600 mb-1\",\n            children: \"Tanggal Bergabung\"\n          }), editable2 ?\n          /*#__PURE__*/\n          // <DatePicker defaultValue={dataProfile.data.create_time}></DatePicker>\n          _jsx(_DatePicker, {\n            onChange: (date, dateString) => {}\n          }) : /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-sm text-black\",\n            children: dataProfile.data.create_time\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-5 my-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs text-gray-600 mb-1\",\n            children: \"ID Perusahaan\"\n          }), editable2 ? /*#__PURE__*/_jsx(_Input, {\n            defaultValue: dataProfile.data.company_id\n          }) : /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-sm text-black\",\n            children: dataProfile.data.company_id\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-5 my-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs text-gray-600 mb-1\",\n            children: \"Perusahaan\"\n          }), editable2 ? /*#__PURE__*/_jsx(_Input, {\n            defaultValue: dataProfile.data.company_name\n          }) : /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-sm text-black\",\n            children: dataProfile.data.company_name\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-5 my-5\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs text-gray-600 mb-1\",\n            children: \"Posisi\"\n          }), editable2 ? /*#__PURE__*/_jsx(_Input, {\n            defaultValue: \"-\"\n          }) : /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-sm text-black\",\n            children: \"-\"\n          })]\n        })]\n      })]\n    })\n  });\n}\n\nfunction SecurityTabs({\n  dataProfile,\n  tok\n}) {\n  const rt = useRouter();\n  const {\n    0: pass,\n    1: setPass\n  } = useState({\n    new_password: ''\n  });\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n\n  const onChangePassword = e => {\n    setPass(_objectSpread(_objectSpread({}, pass), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleUbahPassword = () => {\n    fetch(`https://boiling-thicket-46501.herokuapp.com/changePassword`, {\n      method: 'POST',\n      headers: {\n        'Authorization': JSON.parse(tok),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(pass)\n    }).then(res => res.json()).then(res2 => {\n      if (res2.data) {\n        setVisible(false);\n        setPass({\n          new_password: ''\n        });\n\n        _notification['success']({\n          message: res2.data.message,\n          duration: 3\n        });\n\n        setTimeout(() => {\n          rt.push(`/profile`);\n        }, 500);\n      } else if (!res2.success) {\n        setVisible(false);\n        setPass({\n          new_password: ''\n        });\n\n        _notification['error']({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"p-4 grid grid-rows-1 w-full\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"col-span-1\",\n      children: [/*#__PURE__*/_jsx(_Input.Password, {\n        name: \"new_password\",\n        placeholder: \"Password Baru\",\n        type: \"password\",\n        onChange: onChangePassword,\n        style: {\n          marginBottom: `2rem`\n        }\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: \"w-auto h-auto py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white rounded-md\",\n        onClick: () => {\n          setVisible(true);\n        },\n        children: \"Ubah Password\"\n      })]\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: \"Konfirmasi Ubah Password\",\n      visible: visible,\n      onOk: handleUbahPassword,\n      onCancel: () => setVisible(false),\n      children: \"Apakah anda yakin ingin merubah password?\"\n    })]\n  });\n}\n\nfunction ProfileIndex({\n  initProps,\n  dataProfile\n}) {\n  const {\n    TabPane\n  } = _Tabs;\n  const {\n    0: editable,\n    1: setEditable\n  } = useState(false);\n\n  const handleEditable = () => {\n    setEditable(true);\n  };\n\n  const handleCloseEditable = () => {\n    setEditable(false);\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    edit: editable,\n    setedit: setEditable,\n    st: st,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full h-auto border-t-2 p-4 relative\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"relative md:absolute md:top-4 md:right-8 mb-5\",\n        children: [editable ? /*#__PURE__*/_jsx(\"button\", {\n          className: \" bg-white border hover:bg-gray-200 border-gray-300 text-black py-1 px-3 rounded-md mr-5\",\n          onClick: handleCloseEditable,\n          children: \"Cancel\"\n        }) : null, editable ? /*#__PURE__*/_jsx(\"button\", {\n          className: \" bg-gray-700 hover:bg-gray-800 border text-white py-1 px-3 rounded-md w-24 md:w-40\",\n          children: \"Save\"\n        }) : /*#__PURE__*/_jsxs(\"button\", {\n          className: \"border rounded-md p-2 hover:bg-gray-200 font-semibold text-sm\",\n          onClick: handleEditable,\n          children: [/*#__PURE__*/_jsx(EditOutlined, {}), \" Edit Profile\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col justify-center\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col md:flex-row mb-8\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"md:mx-4\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: dataProfile.data.profile_image,\n              alt: \"imageProfile\",\n              className: \" object-cover w-10 md:w-20 h-10 md:h-20 rounded-full\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex flex-col\",\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \" text-base md:text-2xl font-semibold mb-1\",\n              children: dataProfile.data.fullname\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxs(\"h1\", {\n                className: \" text-xs md:text-sm font-normal mr-1 md:mr-3 pt-1\",\n                children: [dataProfile.data.email, \" \"]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mr-1 md:mr-3 pt-1\",\n                children: \"|\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \" bg-blue-100 text-blue-600 text-sm md:text-base border-blue-600 border py-1 md:py-1 px-1 md:px-3 rounded-md\",\n                children: \"USER\"\n              })]\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex w-full md:w-7/12\",\n          children: /*#__PURE__*/_jsxs(_Tabs, {\n            tabPosition: \"top\",\n            children: [/*#__PURE__*/_jsx(TabPane, {\n              tab: \"Profile\",\n              children: /*#__PURE__*/_jsx(ProfileTabs, {\n                dataProfile: dataProfile,\n                editable2: editable\n              })\n            }, `profile`), /*#__PURE__*/_jsx(TabPane, {\n              tab: \"Security\",\n              children: /*#__PURE__*/_jsx(SecurityTabs, {\n                dataProfile: dataProfile,\n                tok: initProps\n              })\n            }, `security`)]\n          })\n        })]\n      })]\n    })\n  });\n}\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n\n  if (req && req.headers) {\n    const cookies = req.headers.cookie;\n\n    if (!cookies) {\n      res.writeHead(302, {\n        Location: '/login'\n      });\n      res.end();\n    }\n\n    if (typeof cookies === 'string') {\n      const cookiesJSON = httpcookie.parse(cookies);\n      initProps = cookiesJSON.token; // console.log(\"cookie di admin dashboard ssr: \" + initProps)\n    }\n  }\n\n  const resources = await fetch(`https://boiling-thicket-46501.herokuapp.com/detailProfile`, {\n    method: `GET`,\n    headers: {\n      'Authorization': JSON.parse(initProps)\n    }\n  });\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n  return {\n    props: {\n      initProps,\n      dataProfile\n    }\n  };\n}\nexport default ProfileIndex;","map":null,"metadata":{},"sourceType":"module"}