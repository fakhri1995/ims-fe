{"ast":null,"code":"import _Popconfirm from \"antd/lib/popconfirm\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _Select from \"antd/lib/select\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { LoadingOutlined, UploadOutlined, DeleteOutlined, DownOutlined } from '@ant-design/icons';\nimport Sticky from 'wil-react-sticky';\nimport moment from 'moment';\nimport Layout from '../../../components/layout-dashboard2';\nimport st from '../../../components/layout-dashboard.module.css';\n\nvar TicketUpdate = function TicketUpdate(_ref) {\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu,\n      ticketid = _ref.ticketid;\n  // 1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(1, 1);\n  pathArr[pathArr.length - 1] = \"Ubah Ticket\";\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      instanceForm = _Form$useForm2[0]; //2.useState\n\n\n  var _useState = useState({\n    id: Number(ticketid),\n    requester_id: null,\n    raised_at: null,\n    closed_at: null,\n    product_type: null,\n    product_id: \"\",\n    pic_name: \"\",\n    pic_contact: \"\",\n    location_id: null,\n    problem: \"\",\n    incident_time: null,\n    files: [],\n    description: \"\"\n  }),\n      updatedata = _useState[0],\n      setupdatedata = _useState[1];\n\n  var _useState2 = useState({\n    ticket: {\n      id: Number(ticketid),\n      raised_at: \"\",\n      closed_at: \"\",\n      original_closed_at: \"\",\n      resolve_time: \"\",\n      type: {\n        id: null,\n        name: \"\",\n        code: \"\"\n      },\n      status: {\n        id: null,\n        name: \"\"\n      },\n      requester: {\n        id: null,\n        name: \"\",\n        company_id: null,\n        company: {\n          id: null,\n          parent_id: null,\n          name: \"\",\n          image_logo: \"-\",\n          phone_number: \"-\",\n          address: \"-\",\n          role: null,\n          is_enabled: true,\n          singkatan: \"-\",\n          tanggal_pkp: \"\",\n          penanggung_jawab: \"-\",\n          npwp: \"-\",\n          fax: \"-\",\n          email: \"-\",\n          website: \"-\",\n          deleted_at: null\n        }\n      },\n      ticketable: {\n        id: null,\n        product_type: null,\n        product_id: \"\",\n        pic_name: \"\",\n        pic_contact: \"\",\n        location_id: null,\n        inventory_id: null,\n        location: {\n          company_id: null,\n          company_name: \"\"\n        },\n        problem: \"\",\n        incident_time: \"\",\n        files: [\"\"],\n        description: \"\",\n        deleted_at: null\n      },\n      assignable: {\n        id: null,\n        name: \"\"\n      }\n    }\n  }),\n      displaydata = _useState2[0],\n      setdisplaydata = _useState2[1];\n\n  var _useState3 = useState({\n    status_ticket: [],\n    incident_type: [],\n    requesters: [],\n    requester_companies: [],\n    companies: {\n      data: [{\n        id: 0,\n        title: '',\n        key: '',\n        value: 0\n      }]\n    }\n  }),\n      ticketrelations = _useState3[0],\n      setticketrelations = _useState3[1];\n\n  var _useState4 = useState([]),\n      users = _useState4[0],\n      setusers = _useState4[1];\n\n  var _useState5 = useState(true),\n      praloading = _useState5[0],\n      setpraloading = _useState5[1];\n\n  var _useState6 = useState(false),\n      disabledfield = _useState6[0],\n      setdisabledfield = _useState6[1];\n\n  var _useState7 = useState(false),\n      loadingupdate = _useState7[0],\n      setloadingupdate = _useState7[1]; //files\n\n\n  var _useState8 = useState([]),\n      filesupload = _useState8[0],\n      setfilesupload = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      disabledupload = _useState9[0],\n      setdisabledupload = _useState9[1];\n\n  var _useState10 = useState(false),\n      loadingfoto = _useState10[0],\n      setloadingfoto = _useState10[1];\n\n  var _useState11 = useState(-1),\n      uploadtrigger = _useState11[0],\n      setuploadtrigger = _useState11[1];\n\n  var _useState12 = useState(null),\n      uploaddata = _useState12[0],\n      setuploaddata = _useState12[1];\n\n  var _useState13 = useState(0),\n      reqlocation = _useState13[0],\n      setreqlocation = _useState13[1];\n\n  var _useState14 = useState(false),\n      notclosed = _useState14[0],\n      setnotclosed = _useState14[1]; //handler\n\n\n  var onChangeGambar = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var foto, formdata, fetching, datajson;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setloadingfoto(true);\n              setdisabledupload(\"pointer-events-none\");\n              foto = e.target.files;\n              formdata = new FormData();\n              formdata.append('file', foto[0]);\n              formdata.append('upload_preset', 'migsys');\n              _context.next = 8;\n              return fetch(\"https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload\", {\n                method: 'POST',\n                body: formdata\n              });\n\n            case 8:\n              fetching = _context.sent;\n              _context.next = 11;\n              return fetching.json();\n\n            case 11:\n              datajson = _context.sent;\n              setuploaddata(datajson.secure_url);\n              setfilesupload([].concat(_toConsumableArray(filesupload), [datajson.secure_url]));\n              setuploadtrigger(function (prev) {\n                return prev + 1;\n              });\n              setloadingfoto(false);\n              setdisabledupload(\"\");\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onChangeGambar(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleUpdateTicket = function handleUpdateTicket() {\n    setloadingupdate(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/updateTicket\", {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(_objectSpread(_objectSpread({}, updatedata), {}, _defineProperty({}, 'location_id', updatedata.location_id === null ? 0 : updatedata.location_id)))\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingupdate(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: \"Ticket berhasil diubah\",\n          duration: 3\n        });\n\n        rt.push(\"/tickets/detail/\".concat(ticketid));\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getTicket?id=\".concat(ticketid), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var updata = {\n        id: Number(ticketid),\n        requester_id: res2.data.ticket.requester.id === 0 ? null : res2.data.ticket.requester.id,\n        raised_at: res2.data.ticket.original_raised_at,\n        closed_at: res2.data.ticket.closed_at,\n        product_type: res2.data.ticket.ticketable.product_type.id,\n        product_id: res2.data.ticket.ticketable.product_id,\n        pic_name: res2.data.ticket.ticketable.pic_name,\n        pic_contact: res2.data.ticket.ticketable.pic_contact,\n        location_id: res2.data.ticket.ticketable.location_id === 0 ? null : res2.data.ticket.ticketable.location_id,\n        problem: res2.data.ticket.ticketable.problem,\n        incident_time: res2.data.ticket.ticketable.incident_time,\n        files: res2.data.ticket.ticketable.files,\n        description: res2.data.ticket.ticketable.description\n      };\n      setupdatedata(updata);\n      setfilesupload(res2.data.ticket.ticketable.files);\n      setnotclosed(res2.data.ticket.closed_at === null ? true : false);\n      setreqlocation(res2.data.ticket.requester.company.full_name);\n      return res2.data.ticket.requester.company.id;\n    }).then(function (res3) {\n      fetch(\"https://boiling-thicket-46501.herokuapp.com/getTicketRelation\", {\n        method: \"GET\",\n        headers: {\n          'Authorization': JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setticketrelations(res2.data);\n        setpraloading(false);\n      });\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getFilterUsers\", {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setusers(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    if (uploadtrigger !== -1) {\n      setupdatedata(function (prev) {\n        var temp = prev;\n        temp.files.push(uploaddata);\n        return temp;\n      });\n    }\n  }, [uploadtrigger]);\n  return /*#__PURE__*/_jsx(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8 p-3 z-20\",\n        children: /*#__PURE__*/_jsx(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" col-span-4 flex justify-between pt-4 border-t-2 border-b-2 bg-white\",\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"font-semibold py-2\",\n              children: \"Form Ubah Ticket\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsx(Link, {\n                href: \"/tickets/detail/\".concat(ticketid),\n                children: /*#__PURE__*/_jsx(_Button, {\n                  type: \"default\"\n                  /*onClick={() => { console.log(updatedata); console.log(filesupload) }}*/\n                  ,\n                  children: \"Batal\"\n                })\n              }), /*#__PURE__*/_jsx(_Button, {\n                disabled: disabledfield,\n                loading: loadingupdate,\n                type: \"primary\",\n                onClick: function onClick() {\n                  instanceForm.submit();\n                },\n                children: \"Simpan\"\n              })]\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-span-1 md:col-span-4 mb-6 py-3 px-16\",\n        children: praloading ? /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex justify-center\",\n          children: /*#__PURE__*/_jsx(_Spin, {})\n        }) : /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"shadow-md border py-5 px-10 flex flex-col rounded-md mb-5\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-2088094432\" + \" \" + \"flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-2088094432\" + \" \" + \"flex mb-2\",\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-2088094432\" + \" \" + \"raisedBy\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-2088094432\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Ticket Raised By\"\n                })]\n              }), /*#__PURE__*/_jsx(_Select, {\n                placeholder: \"Pilih Raised By\",\n                defaultValue: updatedata.requester_id,\n                onChange: function onChange(value, option) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    requester_id: Number(value)\n                  }));\n                  setreqlocation(option.company_name);\n                },\n                children: users.map(function (doc, idx) {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    company_name: doc.company === null ? \"-\" : doc.company.name,\n                    children: doc.name\n                  }, idx);\n                })\n              }), /*#__PURE__*/_jsx(_JSXStyle, {\n                id: \"2088094432\",\n                children: [\".raisedBy.jsx-2088094432::before{content:'*';color:red;}\"]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-2088094432\" + \" \" + \"flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-2088094432\" + \" \" + \"flex mb-2\",\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-2088094432\" + \" \" + \"raisedBy\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-2088094432\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Lokasi Pembuat\"\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-2088094432\" + \" \" + \"w-full rounded-sm flex items-center justify-between bg-gray-100 border p-2 h-8\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-2088094432\" + \" \" + \"mb-0\",\n                  children: reqlocation\n                }), /*#__PURE__*/_jsx(DownOutlined, {\n                  style: {\n                    color: \"rgb(213,214,196)\"\n                  }\n                })]\n              }), /*#__PURE__*/_jsx(_JSXStyle, {\n                id: \"2088094432\",\n                children: [\".raisedBy.jsx-2088094432::before{content:'*';color:red;}\"]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-2088094432\" + \" \" + \"flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-2088094432\" + \" \" + \"flex mb-2\",\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-2088094432\" + \" \" + \"raisedBy\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-2088094432\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Date Raised Ticket\"\n                })]\n              }), /*#__PURE__*/_jsx(_DatePicker, {\n                allowClear: false,\n                value: updatedata.raised_at === \"\" ? null : moment(updatedata.raised_at),\n                defaultValue: moment(updatedata.raised_at),\n                showTime: true,\n                style: {\n                  width: \"100%\"\n                },\n                onChange: function onChange(date, datestring) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    raised_at: datestring\n                  }));\n                }\n              }), /*#__PURE__*/_jsx(_JSXStyle, {\n                id: \"2088094432\",\n                children: [\".raisedBy.jsx-2088094432::before{content:'*';color:red;}\"]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-4250785741\" + \" \" + \"flex flex-col mb-5\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-4250785741\" + \" \" + \"flex mb-2\",\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-4250785741\" + \" \" + \"closedBy\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-4250785741\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Date Closed Ticket\"\n                })]\n              }), /*#__PURE__*/_jsx(_DatePicker, {\n                disabled: notclosed,\n                disabledDate: function disabledDate(curr) {\n                  return curr < moment(updatedata.raised_at);\n                },\n                value: updatedata.closed_at === null || updatedata.closed_at === \"\" ? null : moment(updatedata.closed_at),\n                defaultValue: updatedata.closed_at === null ? null : moment(updatedata.closed_at),\n                placeholder: \"Masukkan Date Closed\",\n                showTime: true,\n                allowClear: false,\n                style: {\n                  width: \"100%\"\n                },\n                onChange: function onChange(date, datestring) {\n                  datestring === \"\" ? (setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    closed_at: \"\"\n                  })), setdisabledfield(true)) : (setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    closed_at: datestring\n                  })), setdisabledfield(false));\n                }\n              }), notclosed ? /*#__PURE__*/_jsxs(\"p\", {\n                className: \"jsx-4250785741\" + \" \" + \"mb-0 text-red-500\",\n                children: [\"Date closed dapat dirubah jika status ticket telah \", /*#__PURE__*/_jsx(\"strong\", {\n                  className: \"jsx-4250785741\",\n                  children: \"closed\"\n                })]\n              }) : null, /*#__PURE__*/_jsx(_JSXStyle, {\n                id: \"4250785741\",\n                children: [\".closedBy.jsx-4250785741::before{content:'*';color:red;}\"]\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"shadow-md border py-5 px-10 flex flex-col rounded-md mb-5\",\n            children: /*#__PURE__*/_jsxs(_Form, {\n              form: instanceForm,\n              layout: \"vertical\",\n              onFinish: handleUpdateTicket,\n              initialValues: updatedata,\n              children: [/*#__PURE__*/_jsx(_Form.Item, {\n                name: \"product_type\",\n                label: \"Jenis Produk\",\n                rules: [{\n                  required: true,\n                  message: 'Jenis Produk wajib dipilih'\n                }],\n                children: /*#__PURE__*/_jsxs(_Select, {\n                  defaultValue: updatedata.product_type,\n                  placeholder: \"Pilih Produk\",\n                  onChange: function onChange(value) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      product_type: value\n                    }));\n                  },\n                  children: [/*#__PURE__*/_jsx(_Select.Option, {\n                    value: 1,\n                    children: \"UPS\"\n                  }), /*#__PURE__*/_jsx(_Select.Option, {\n                    value: 2,\n                    children: \"ATM\"\n                  }), /*#__PURE__*/_jsx(_Select.Option, {\n                    value: 3,\n                    children: \"PC\"\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"product_id\",\n                label: updatedata.product_type === 2 ? \"Terminal ID\" : \"ID Produk\",\n                rules: [{\n                  required: true,\n                  message: \"\".concat(updatedata.product_type === 2 ? 'Terminal ID' : 'ID Produk', \" wajib diisi\")\n                }, {\n                  pattern: /(\\-)|(^\\d*$)/,\n                  message: \"\".concat(updatedata.product_type === 2 ? 'Terminal ID' : 'ID Produk', \" harus berisi angka\")\n                }],\n                children: /*#__PURE__*/_jsx(_Input, {\n                  defaultValue: updatedata.product_id,\n                  placeholder: \"Masukkan \".concat(updatedata.product_type === 2 ? \"Terminal ID\" : \"ID Produk\"),\n                  onChange: function onChange(e) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      product_id: Number(e.target.value)\n                    }));\n                  }\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"pic_name\",\n                label: \"Nama PIC\",\n                children: /*#__PURE__*/_jsx(_Input, {\n                  value: updatedata.pic_name,\n                  defaultValue: updatedata.pic_name,\n                  placeholder: \"Masukkan Problem\",\n                  onChange: function onChange(e) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      pic_name: e.target.value\n                    }));\n                  }\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"pic_contact\",\n                label: \"Kontak PIC\",\n                rules: [{\n                  pattern: /(\\-)|(^\\d*$)/,\n                  message: 'Kontak harus berisi angka'\n                }],\n                children: /*#__PURE__*/_jsx(_Input, {\n                  value: updatedata.pic_contact,\n                  defaultValue: updatedata.pic_contact,\n                  placeholder: \"Masukkan Problem\",\n                  onChange: function onChange(e) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      pic_contact: e.target.value\n                    }));\n                  }\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"location_id\",\n                label: \"Lokasi Problem\",\n                children: /*#__PURE__*/_jsx(_TreeSelect, {\n                  value: updatedata.location_id,\n                  defaultValue: updatedata.location_id,\n                  placeholder: \"Pilih Lokasi Problem\",\n                  treeData: [ticketrelations.companies],\n                  treeDefaultExpandAll: true,\n                  onChange: function onChange(value, label, extra) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      location_id: extra.allCheckedNodes[0].node.props.id\n                    }));\n                  }\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"problem\",\n                label: \"Problem\",\n                children: /*#__PURE__*/_jsx(_Input, {\n                  value: updatedata.problem,\n                  defaultValue: updatedata.problem,\n                  placeholder: \"Masukkan Problem\",\n                  onChange: function onChange(e) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      problem: e.target.value\n                    }));\n                  }\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"mb-5 flex flex-col\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"flex mb-2\",\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-0 ml-1\",\n                    children: \"Waktu Kejadian\"\n                  })\n                }), /*#__PURE__*/_jsx(_DatePicker, {\n                  defaultValue: updatedata.incident_time === null ? null : moment(updatedata.incident_time),\n                  name: \"incident_time\",\n                  showTime: true,\n                  placeholder: \"Masukkan Waktu Kejadian\",\n                  style: {\n                    width: \"100%\"\n                  },\n                  onChange: function onChange(date, datestring) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      incident_time: datestring === \"\" ? null : datestring\n                    }));\n                  }\n                })]\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col\",\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-2 ml-1\",\n                    children: \"Bukti Incident (Support File: PNG/JPEG, PDF, dan Word)\"\n                  }), /*#__PURE__*/_jsxs(\"label\", {\n                    className: \"custom-file-upload py-2 w-52 px-2 inline-block cursor-pointer text-sm text-black border rounded-sm bg-white hover:border-blue-500 hover:text-blue-500 mb-3 \".concat(disabledupload),\n                    children: [/*#__PURE__*/_jsx(\"input\", {\n                      type: \"file\",\n                      style: {\n                        display: \"none\"\n                      },\n                      name: \"urlgambarProduct\",\n                      onChange: onChangeGambar\n                    }), loadingfoto ? /*#__PURE__*/_jsx(LoadingOutlined, {\n                      style: {\n                        marginRight: \"1rem\"\n                      }\n                    }) : /*#__PURE__*/_jsxs(_Fragment, {\n                      children: [\" \", /*#__PURE__*/_jsx(UploadOutlined, {\n                        style: {\n                          marginRight: \"1rem\"\n                        }\n                      })]\n                    }), \"Unggah File(Max: 25Mb)\"]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"flex flex-col\",\n                    children: filesupload.map(function (docfile, idxfile) {\n                      return /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"border border-dashed px-8 py-4 flex justify-between items-center w-6/12 mb-1 relative cursor-pointer hover:text-blue-500\",\n                        children: [/*#__PURE__*/_jsx(\"div\", {\n                          className: \"mr-5 flex items-center\",\n                          children: /*#__PURE__*/_jsx(\"img\", {\n                            src: docfile,\n                            alt: \"imageProfile\",\n                            className: \" object-cover w-16 h-16 mr-10\"\n                          })\n                        }), /*#__PURE__*/_jsx(\"div\", {\n                          className: \"flex items-center\",\n                          children: /*#__PURE__*/_jsx(_Popconfirm, {\n                            title: \"Yakin ingin menghapus bukti incident ini?\",\n                            onConfirm: function onConfirm() {\n                              setfilesupload(function (prev) {\n                                return prev.filter(function (_, idxfilt) {\n                                  return idxfilt !== idxfile;\n                                });\n                              });\n                              setupdatedata(function (prev) {\n                                var temp = prev;\n                                temp.files.splice(idxfile, 1);\n                                return temp;\n                              });\n                            },\n                            okText: \"Ya\",\n                            cancelText: \"Tidak\",\n                            children: /*#__PURE__*/_jsx(DeleteOutlined, {\n                              style: {\n                                color: \"red\",\n                                cursor: \"pointer\",\n                                fontSize: \"1.5rem\"\n                              }\n                            })\n                          })\n                        })]\n                      }, idxfile);\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"description\",\n                label: \"Deskripsi Kerusakan\",\n                children: /*#__PURE__*/_jsx(_Input.TextArea, {\n                  value: updatedata.description,\n                  defaultValue: updatedata.description,\n                  rows: 4,\n                  placeholder: \"Masukkan deskripsi kerusakan\",\n                  onChange: function onChange(e) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      description: e.target.value\n                    }));\n                  }\n                })\n              })]\n            })\n          })]\n        })\n      })]\n    })\n  });\n};\n\nexport var __N_SSP = true;\nexport default TicketUpdate;","map":null,"metadata":{},"sourceType":"module"}