{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _Table from \"antd/lib/table\";\nimport _Select from \"antd/lib/select\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Spin from \"antd/lib/spin\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { ExclamationCircleOutlined, SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst CreateItemPart = ({\n  dataProfile,\n  sidemenu,\n  initProps,\n  itemid\n}) => {\n  // 1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 1);\n  pathArr[pathArr.length - 1] = \"Tambah Item Part\";\n  var asset_id1 = \"\",\n      model_id1 = \"\",\n      name1 = \"\";\n  const {\n    asset_id,\n    model_id,\n    name,\n    nama\n  } = rt.query;\n\n  if (asset_id) {\n    asset_id1 = asset_id;\n  }\n\n  if (model_id) {\n    model_id1 = model_id;\n  }\n\n  if (name) {\n    name1 = name;\n  } //useState\n\n\n  const {\n    0: rawdata,\n    1: setrawdata\n  } = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  });\n  const {\n    0: displaydata,\n    1: setdisplaydata\n  } = useState([]);\n  const {\n    0: displaydata2,\n    1: setdisplaydata2\n  } = useState([]);\n  const {\n    0: displaydata3,\n    1: setdisplaydata3\n  } = useState([]);\n  const {\n    0: newpartdata,\n    1: setnewpartdata\n  } = useState({\n    id: Number(itemid),\n    inventory_part_ids: [],\n    notes: \"\"\n  });\n  const {\n    0: invrelations,\n    1: setinvrelations\n  } = useState({\n    models: [{\n      id: \"\",\n      name: \"\",\n      deleted_at: null\n    }],\n    assets: [{\n      id: \"\",\n      name: \"\",\n      deleted_at: null\n    }],\n    manufacturers: [{\n      id: \"\",\n      name: \"\",\n      deleted_at: null\n    }],\n    status_condition: [],\n    status_usage: [],\n    vendors: [],\n    companies: []\n  });\n  const {\n    0: listselectedpart,\n    1: setlistselectedpart\n  } = useState([]);\n  const {\n    0: namasearchact,\n    1: setnamasearchact\n  } = useState(name1 === \"\" ? false : true);\n  const {\n    0: namavalue,\n    1: setnamavalue\n  } = useState(null);\n  const {\n    0: assettypefilteract,\n    1: setassettypefilteract\n  } = useState(asset_id1 === \"\" ? false : true);\n  const {\n    0: assettypevalue,\n    1: setassettypevalue\n  } = useState(null);\n  const {\n    0: modelfilteract,\n    1: setmodelfilteract\n  } = useState(model_id1 === \"\" ? false : true);\n  const {\n    0: modelvalue,\n    1: setmodelvalue\n  } = useState(null);\n  const {\n    0: namaasset,\n    1: setnamaasset\n  } = useState(asset_id1);\n  const {\n    0: defasset,\n    1: setdefasset\n  } = useState(null);\n  const {\n    0: assetdata,\n    1: setassetdata\n  } = useState([]);\n  const {\n    0: rowstate,\n    1: setrowstate\n  } = useState(0);\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true);\n  const {\n    0: praloading2,\n    1: setpraloading2\n  } = useState(true);\n  const {\n    0: modaladd,\n    1: setmodaladd\n  } = useState(false);\n  const {\n    0: loadingadd,\n    1: setloadingadd\n  } = useState(false);\n  const {\n    0: disabledadd,\n    1: setdisabledadd\n  } = useState(true);\n  const {\n    0: fetchingmodel,\n    1: setfetchingmodel\n  } = useState(false);\n  const {\n    0: modelfilter,\n    1: setmodelfilter\n  } = useState([]); //3.Define\n\n  const columnsTable = [// {\n  //     title: 'Nama Item',\n  //     dataIndex: 'inventory_name',\n  //     key: 'inventory_name',\n  // },\n  {\n    title: \"MIG ID\",\n    dataIndex: \"mig_id\",\n    key: \"mig_id\"\n  }, {\n    title: \"Model\",\n    dataIndex: \"model_name\",\n    key: \"model_name\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.model_inventory.name\n        })\n      };\n    }\n  }, {\n    title: \"Asset Type\",\n    dataIndex: \"asset_name\",\n    key: \"asset_name\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.model_inventory.asset.name\n        })\n      };\n    }\n  }];\n\n  const recursiveGetParentId = (id, tree) => {\n    let parentId;\n\n    for (let i = 0; i < tree.length; i++) {\n      const node = tree[i];\n\n      if (node.children) {\n        if (node.children.some(item => item.id === id)) {\n          parentId = node.id;\n        } else if (recursiveGetParentId(id, node.children)) {\n          parentId = recursiveGetParentId(id, node.children);\n        }\n      }\n    }\n\n    return parentId;\n  };\n\n  const recursiveGetParentKey = (key, tree) => {\n    let parentKey;\n\n    for (let i = 0; i < tree.length; i++) {\n      const node = tree[i];\n\n      if (node.children) {\n        if (node.children.some(item => item.key === key)) {\n          parentKey = node.key;\n        } else if (recursiveGetParentKey(key, node.children)) {\n          parentKey = recursiveGetParentKey(key, node.children);\n        }\n      }\n    }\n\n    return parentKey;\n  };\n\n  const recursiveGetParent = (key, tree) => {\n    let parent;\n\n    for (let i = 0; i < tree.length; i++) {\n      const node = tree[i];\n\n      if (node.children) {\n        if (node.children.some(item => item.key === key)) {\n          parent = node;\n        } else if (recursiveGetParent(key, node.children)) {\n          parent = recursiveGetParent(key, node.children);\n        }\n      }\n    }\n\n    return parent;\n  };\n\n  var selectedPart = {};\n\n  const recursiveSearchPart = (doc, key) => {\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].key === key) {\n        selectedPart = doc[i];\n      } else {\n        if (doc[i].children) {\n          recursiveSearchPart(doc[i].children, key);\n        }\n      }\n    }\n  };\n\n  const assetPart = [];\n\n  const recursiveSearchPartFromAsset = (doc, assetid) => {\n    var arr = [];\n\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].asset_id === Number(assetid)) {\n        // continue\n        assetPart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push(_objectSpread(_objectSpread({}, doc[i]), {}, {\n            children: recursiveSearchPartFromAsset(doc[i].children, assetid)\n          }));\n        } else {\n          arr.push(_objectSpread({}, doc[i]));\n        }\n      }\n    }\n\n    return arr;\n  };\n\n  const modelPart = [];\n\n  const recursiveSearchPartFromModel = (doc, modelid) => {\n    var arr = [];\n\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].model_id === Number(modelid)) {\n        // continue\n        modelPart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push(_objectSpread(_objectSpread({}, doc[i]), {}, {\n            children: recursiveSearchPartFromModel(doc[i].children, modelid)\n          }));\n        } else {\n          arr.push(_objectSpread({}, doc[i]));\n        }\n      }\n    }\n\n    return arr;\n  };\n\n  const namePart = [];\n\n  const recursiveSearchPartFromName = (doc, name) => {\n    var arr = [];\n\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].inventory_name.toLowerCase().includes(name.toLowerCase())) {\n        // continue\n        namePart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push(_objectSpread(_objectSpread({}, doc[i]), {}, {\n            children: recursiveSearchPartFromName(doc[i].children, name)\n          }));\n        } else {\n          arr.push(_objectSpread({}, doc[i]));\n        }\n      }\n    }\n\n    return arr;\n  }; //handler\n  //1.onChange\n  //search nama\n\n\n  const onChangeSearch = e => {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata3)\n      window.location.href = `/items/createpart/${itemid}?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=${modelfilteract ? model_id1 : \"\"}&name=&nama=${nama}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  }; //search asset type\n\n\n  const onChangeAssetType = id => {\n    if (typeof id === \"undefined\") {\n      // setdisplaydata(displaydata3)\n      window.location.href = `/items/createpart/${itemid}?asset_id=&model_id=&name=${namasearchact ? name1 : \"\"}&nama=${nama}`;\n      setassettypefilteract(false);\n    } else {\n      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?asset_id=${id}`, {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(res => res.json()).then(res2 => {\n        res2.data.length === 0 ? setmodelfilter([]) : setmodelfilter(res2.data.data);\n      });\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  }; //search model\n\n\n  const onChangeModel = idmodel => {\n    if (typeof idmodel === \"undefined\") {\n      // setdisplaydata(displaydata3)\n      window.location.href = `/items/createpart/${itemid}?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=&name=${namasearchact ? name1 : \"\"}&nama=${nama}`;\n      setmodelfilteract(false);\n    } else {\n      setmodelfilteract(true);\n      setmodelvalue(idmodel);\n    }\n  };\n\n  const onFinalClick = () => {\n    // var datatemp = displaydata2\n    // if (assettypefilteract) {\n    //     recursiveSearchPartFromAsset(datatemp, assettypevalue)\n    //     datatemp = assetPart\n    // }\n    // if (modelfilteract) {\n    //     recursiveSearchPartFromModel(datatemp, modelvalue)\n    //     datatemp = modelPart\n    // }\n    // if (namasearchact) {\n    //     recursiveSearchPartFromName(datatemp, namavalue)\n    //     datatemp = namePart\n    // }\n    // setdisplaydata(datatemp)\n    window.location.href = `/items/createpart/${itemid}?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue === null ? model_id1 : modelvalue : \"\"}&name=${namasearchact ? namavalue === null ? name1 : namavalue : \"\"}&nama=${nama}`;\n  };\n\n  const handleAddItemPart = () => {\n    setloadingadd(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addInventoryParts`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newpartdata)\n    }).then(res => res.json()).then(res2 => {\n      setloadingadd(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Item Part berhasil ditambahkan\",\n          duration: 3\n        });\n\n        setmodaladd(false);\n        rt.push(`/items/detail/${itemid}?active=konfigurasiPart`);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryAddable?rows=10&page=1&asset_id=${asset_id1}&model_id=${model_id1}&name=${name1}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setrawdata(res2.data);\n\n      const recursiveChangetoChildren = rsc => {\n        var res = [];\n\n        for (var i = 0; i < (rsc === null || rsc === void 0 ? void 0 : rsc.length); i++) {\n          rsc[i].key = rsc[i].id;\n          rsc[i].title = rsc[i].inventory_name;\n          rsc[i].children = rsc[i].inventory_parts;\n          delete rsc[i].inventory_parts;\n\n          if (rsc[i].children) {\n            res.push(_objectSpread(_objectSpread({}, rsc[i]), {}, {\n              children: recursiveChangetoChildren(rsc[i].children)\n            }));\n          } else {\n            delete rsc[i].children;\n            res.push(_objectSpread({}, rsc[i]));\n          }\n        }\n\n        return res;\n      };\n\n      const t = recursiveChangetoChildren(res2.data.data);\n      setdisplaydata(t);\n      setdisplaydata2(t);\n      setdisplaydata3(t);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(() => {\n    setpraloading2(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      var selectedAsset = {};\n\n      const recursiveSearchAsset = (doc, key) => {\n        for (var i = 0; i < doc.length; i++) {\n          if (doc[i].id === key) {\n            selectedAsset = doc[i];\n          } else {\n            if (doc[i].children) {\n              recursiveSearchAsset(doc[i].children, key);\n            }\n          }\n        }\n      };\n\n      recursiveSearchAsset(res2.data, Number(namaasset));\n      console.log(selectedAsset);\n      setdefasset(selectedAsset.key);\n      setassetdata(res2.data);\n      setpraloading2(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryRelations`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setinvrelations(res2.data);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getFilterModels`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setmodelfilter(res2.data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxs(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"h-20 w-full grid grid-cols-1 md:grid-cols-3 bg-white mb-5 p-4\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"font-semibold text-xl w-auto\",\n          children: [\"Form Tambah Item Part \\\"\", nama, \"\\\"\"]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n        children: [/*#__PURE__*/_jsx(_Button, {\n          onClick: () => {\n            rt.push(`/items/detail/${itemid}?active=konfigurasiPart`);\n            /*console.log(listselectedpart)*/\n          },\n          style: {\n            marginRight: `1rem`\n          },\n          size: \"middle\",\n          type: \"danger\",\n          children: \"Batal\"\n        }), /*#__PURE__*/_jsx(_Button, {\n          disabled: disabledadd,\n          onClick: () => {\n            setmodaladd(true);\n          },\n          size: \"middle\",\n          type: \"primary\",\n          children: \"Simpan\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex mb-8\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" w-full mr-1 grid grid-cols-12\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-5 mr-1\",\n              children: /*#__PURE__*/_jsx(_Input, {\n                defaultValue: name1,\n                style: {\n                  width: `100%`,\n                  marginRight: `0.5rem`\n                },\n                placeholder: \"Cari MIG ID\",\n                onChange: onChangeSearch,\n                allowClear: true\n              })\n            }), praloading2 ? /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsx(_Spin, {})\n            }) : /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-3 mr-1\",\n              children: /*#__PURE__*/_jsx(_TreeSelect, {\n                defaultValue: namaasset === \"\" ? null : defasset,\n                allowClear: true,\n                dropdownStyle: {\n                  maxHeight: 400,\n                  overflow: \"auto\"\n                },\n                treeData: assetdata,\n                placeholder: \"Cari Asset Type\",\n                treeDefaultExpandAll: true,\n                style: {\n                  width: `100%`\n                },\n                onChange: (value, label, extra) => {\n                  if (typeof value === \"undefined\") {\n                    onChangeAssetType();\n                  } else {\n                    onChangeAssetType(extra.allCheckedNodes[0].node.props.id);\n                    setnamaasset(extra.allCheckedNodes[0].node.props.title);\n                  }\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-3 mr-1\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                showSearch: true,\n                optionFilterProp: \"children\",\n                notFoundContent: fetchingmodel ? /*#__PURE__*/_jsx(_Spin, {\n                  size: \"small\"\n                }) : null,\n                onSearch: value => {\n                  setfetchingmodel(true);\n                  fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getFilterModels?name=${value !== \"\" ? value : \"\"}`, {\n                    method: `GET`,\n                    headers: {\n                      Authorization: JSON.parse(initProps)\n                    }\n                  }).then(res => res.json()).then(res2 => {\n                    setmodelfilter(res2.data);\n                    setfetchingmodel(false);\n                  });\n                },\n                filterOption: (input, opt) => opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                defaultValue: model_id1 === \"\" ? null : Number(model_id1),\n                placeholder: \"Model\",\n                style: {\n                  width: `100%`\n                },\n                allowClear: true,\n                onChange: value => {\n                  if (typeof value === \"undefined\") {\n                    onChangeModel();\n                  } else {\n                    onChangeModel(value);\n                  }\n                },\n                children: modelfilter.map((docmodels, idxmodels) => {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: docmodels.id,\n                    children: docmodels.name\n                  });\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" col-span-1\",\n              children: /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                style: {\n                  width: `100%`\n                },\n                onClick: onFinalClick,\n                children: /*#__PURE__*/_jsx(SearchOutlined, {})\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(_Table, {\n          rowSelection: {\n            onChange: (selectedRowKeys, selectedRows) => {\n              if (selectedRows.length > 0) {\n                setdisabledadd(false);\n              } else {\n                setdisabledadd(true);\n              }\n\n              setnewpartdata(_objectSpread(_objectSpread({}, newpartdata), {}, {\n                inventory_part_ids: selectedRows.map(doc => doc.id)\n              }));\n              var listarr = [];\n              selectedRows.forEach((doc, idx) => {\n                const a = recursiveGetParentKey(doc.key, displaydata3);\n\n                if (typeof a !== \"undefined\") {\n                  recursiveSearchPart(displaydata3, a);\n                  listarr.push({\n                    mig_id: doc.mig_id,\n                    parent: selectedPart\n                  });\n                } else {\n                  listarr.push({\n                    mig_id: doc.mig_id,\n                    parent: \"\"\n                  });\n                }\n              });\n              setlistselectedpart(listarr);\n            },\n            onSelectAll: (selected, selectedRows, changeRows) => {\n              console.log(selected, selectedRows, changeRows);\n            },\n            checkStrictly: true\n          },\n          pagination: {\n            pageSize: 10,\n            total: rawdata.total,\n            onChange: (page, pageSize) => {\n              setpraloading(true);\n              fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryAddable?page=${page}&rows=10&asset_id=${asset_id1}&model_id=${model_id1}&name=${name1}`, {\n                method: `GET`,\n                headers: {\n                  Authorization: JSON.parse(initProps)\n                }\n              }).then(res => res.json()).then(res2 => {\n                setrawdata(res2.data);\n\n                const recursiveChangetoChildren = rsc => {\n                  var res = [];\n\n                  for (var i = 0; i < (rsc === null || rsc === void 0 ? void 0 : rsc.length); i++) {\n                    rsc[i].key = rsc[i].id;\n                    rsc[i].title = rsc[i].inventory_name;\n                    rsc[i].children = rsc[i].inventory_parts;\n                    delete rsc[i].inventory_parts;\n\n                    if (rsc[i].children) {\n                      res.push(_objectSpread(_objectSpread({}, rsc[i]), {}, {\n                        children: recursiveChangetoChildren(rsc[i].children)\n                      }));\n                    } else {\n                      delete rsc[i].children;\n                      res.push(_objectSpread({}, rsc[i]));\n                    }\n                  }\n\n                  return res;\n                };\n\n                const t = recursiveChangetoChildren(res2.data.data);\n                setdisplaydata(t);\n                setdisplaydata2(t);\n                setdisplaydata3(t);\n                setpraloading(false);\n              });\n            }\n          },\n          scroll: {\n            x: 200\n          },\n          dataSource: displaydata,\n          columns: columnsTable,\n          loading: praloading // onRow={(record, rowIndex) => {\n          //     return {\n          //         onMouseOver: (event) => {\n          //             setrowstate(record.id)\n          //         },\n          //         onClick: (event) => {\n          //             // {\n          //             //     [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n          //             // rt.push(`/items/detail/${record.id}`)\n          //             //         :\n          //             //         null\n          //             // }\n          //         }\n          //     }\n          // }}\n          // rowClassName={(record, idx) => {\n          //     return (\n          //         record.id === rowstate ? `cursor-pointer` : ``\n          //     )\n          // }}\n\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"h1\", {\n        className: \"font-semibold\",\n        children: [\"Apakah anda yakin untuk menambahkan Item berikut ini menjadi Item Part \\\"\", nama, \"\\\"?\"]\n      }),\n      visible: modaladd,\n      onCancel: () => {\n        setmodaladd(false);\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      onOk: handleAddItemPart,\n      okButtonProps: {\n        loading: loadingadd\n      },\n      width: 760,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex flex-col mb-4\",\n          children: listselectedpart.map((doc, idx) => {\n            if (doc.parent !== \"\") {\n              return /*#__PURE__*/_jsxs(\"p\", {\n                className: \"mb-0 text-xs font-semibold\",\n                children: [\"- \", doc.mig_id, \", sedang menjadi Item Part dari \\\"\", doc.parent.mig_id, \"\\\"\"]\n              });\n            } else {\n              return /*#__PURE__*/_jsxs(\"p\", {\n                className: \"mb-0 text-xs font-semibold\",\n                children: [\"- \", doc.mig_id]\n              });\n            }\n          })\n        }), listselectedpart.some(doc2 => doc2.parent !== \"\") && /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex flex-col mb-3\",\n          children: /*#__PURE__*/_jsx(\"p\", {\n            className: \"text-red-500 mb-0\",\n            children: \"Dengan menyetujui hal ini, anda akan mengeluarkan item part diatas dari item utama-nya!\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }), /*#__PURE__*/_jsx(_Input.TextArea, {\n            rows: 4,\n            placeholder: \"Masukkan Notes\",\n            onChange: e => {\n              setnewpartdata(_objectSpread(_objectSpread({}, newpartdata), {}, {\n                notes: e.target.value\n              }));\n            }\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res,\n  params\n}) {\n  const itemid = params.itemId;\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"3\",\n      itemid\n    }\n  };\n}\nexport default CreateItemPart;","map":null,"metadata":{},"sourceType":"module"}