{"ast":null,"code":"import _Tree from \"antd/lib/tree\";\nimport _Progress from \"antd/lib/progress\";\nimport _Empty from \"antd/lib/empty\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _Select from \"antd/lib/select\";\nimport _Spin from \"antd/lib/spin\";\nimport _Input from \"antd/lib/input\";\nimport _notification from \"antd/lib/notification\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { DownOutlined, SearchOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { Bar, Doughnut, Line } from \"react-chartjs-2\";\nimport Buttonsys from \"../../../components/button\";\nimport { AlerttriangleIconSvg, BackIconSvg, CalendartimeIconSvg, CircleXIconSvg, ClipboardcheckIconSvg, ClockIconSvg, EditIconSvg, LayoutGridAddSvg, LocationIconSvg, MappinIconSvg, SearchIconSvg, TrashIconSvg } from \"../../../components/icon\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport Layout from \"../../../components/layout-dashboardNew\";\nimport { TableCustomTask, TableCustomTaskPick } from \"../../../components/table/tableCustom\";\nimport { H1, H2, Label, Text } from \"../../../components/typography\";\nimport { createKeyPressHandler } from \"../../../lib/helper\";\nimport { ArcElement, BarElement, CategoryScale, Chart, LineElement, LinearScale, PointElement, Tooltip } from \"chart.js\";\nimport httpcookie from \"cookie\";\nChart.register(ArcElement, Tooltip, CategoryScale, LinearScale, LineElement, BarElement, PointElement);\n\nconst TaskIndex = ({\n  initProps,\n  dataProfile,\n  sidemenu\n}) => {\n  //1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr[pathArr.length - 1] = `My Task`; //useState\n  //1.0.SEGERA BERAKHIR\n\n  const {\n    0: userlasttwo,\n    1: setuserlasttwo\n  } = useState([]);\n  const {\n    0: loadinguserlasttwo,\n    1: setloadinguserlasttwo\n  } = useState(true); //1.1.STATUS LIST\n\n  const {\n    0: statustaskdata,\n    1: setstatustaskdata\n  } = useState([]);\n  const {\n    0: loadingstatustaskdata,\n    1: setloadingstatustaskdata\n  } = useState(true); //1.1.1.status - date\n\n  const {\n    0: statustaskdatefilter,\n    1: setstatustaskdatefilter\n  } = useState(false);\n  const {\n    0: statustaskdatestate,\n    1: setstatustaskdatestate\n  } = useState({\n    from: \"\",\n    to: \"\"\n  }); //1.1.2.status - location\n\n  const {\n    0: statustaskloc,\n    1: setstatustaskloc\n  } = useState([]);\n  const {\n    0: statustasklocstate,\n    1: setstatustasklocstate\n  } = useState(\"\");\n  const {\n    0: statusloctoggle,\n    1: setstatusloctoggle\n  } = useState(false); //1.2.TASK TYPE COUNT\n\n  const {\n    0: ttccolorbar,\n    1: setttccolorbar\n  } = useState([\"#2F80ED\", \"#E5C471\", \"#BF4A40\", \"#6AAA70\"]);\n  const {\n    0: ttcdata,\n    1: setttcdata\n  } = useState([]);\n  const {\n    0: loadingttcdata,\n    1: setloadingttcdata\n  } = useState(true); //1.2.2.task type count - location\n\n  const {\n    0: ttcloc,\n    1: setttcloc\n  } = useState([]);\n  const {\n    0: ttloctoggle,\n    1: setttloctoggle\n  } = useState(false); //update - task type\n\n  const {\n    0: triggertasktypupdate,\n    1: settriggertasktypupdate\n  } = useState(-1);\n  const {\n    0: idtasktypupdate,\n    1: setidtasktypupdate\n  } = useState(-1);\n  const {\n    0: drawertasktypupdate,\n    1: setdrawertasktypupdate\n  } = useState(false); //TASK TYPES\n\n  const {\n    0: searcingtipetask,\n    1: setsearcingtipetask\n  } = useState(\"\"); //TASKS\n\n  const {\n    0: datarawtask,\n    1: setdatarawtask\n  } = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  });\n  const {\n    0: datatasks,\n    1: setdatatasks\n  } = useState([]);\n  const {\n    0: loadingtasks,\n    1: setloadingtasks\n  } = useState(false); //filter dan sort - tasks\n\n  const {\n    0: datafiltertipetasks,\n    1: setdatafiltertipetasks\n  } = useState([]);\n  const {\n    0: datafilterlokasi,\n    1: setdatafilterlokasi\n  } = useState([]);\n  const {\n    0: searchstate,\n    1: setsearchstate\n  } = useState(\"\");\n  const {\n    0: sortstate,\n    1: setsortstate\n  } = useState({\n    sort_by: \"\",\n    sort_type: \"\"\n  });\n  const {\n    0: statusfilterstate,\n    1: setstatusfilterstate\n  } = useState(\"\");\n  const {\n    0: lokasifilterstate,\n    1: setlokasifilterstate\n  } = useState(\"\");\n  const {\n    0: fromdatefilterstate,\n    1: setfromdatefilterstate\n  } = useState(\"\");\n  const {\n    0: todatefilterstate,\n    1: settodatefilterstate\n  } = useState(\"\");\n  const {\n    0: tasktypefilterstate,\n    1: settasktypefilterstate\n  } = useState(\"\");\n  const {\n    0: fetchingtasktypes,\n    1: setfetchingtasktypes\n  } = useState(false);\n  const {\n    0: pagetask,\n    1: setpagetask\n  } = useState(1);\n  const {\n    0: rowstask,\n    1: setrowstask\n  } = useState(10); //create - tasks\n\n  const {\n    0: drawertaskcreate,\n    1: setdrawertaskcreate\n  } = useState(false); //TASK PICK\n\n  const {\n    0: datarawtaskpick,\n    1: setdatarawtaskpick\n  } = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  });\n  const {\n    0: viewtaskpick,\n    1: setviewtaskpick\n  } = useState(false);\n  const {\n    0: datataskpick,\n    1: setdatataskpick\n  } = useState([]);\n  const {\n    0: pagetaskpick,\n    1: setpagetaskpick\n  } = useState(1);\n  const {\n    0: rowstaskpick,\n    1: setrowstaskpick\n  } = useState(10);\n  const {\n    0: loadingtaskpick,\n    1: setloadingtaskpick\n  } = useState(false);\n  const {\n    0: reloadpick,\n    1: setreloadpick\n  } = useState(-1); //filter sort -task pick\n\n  const {\n    0: sortstatetaskpick,\n    1: setsortstatetaskpick\n  } = useState({\n    sort_by: \"\",\n    sort_type: \"\"\n  });\n  const {\n    0: loadingfiltertaskpick,\n    1: setloadingfiltertaskpick\n  } = useState(false);\n  const {\n    0: datafilterlokasitaskpick,\n    1: setdatafilterlokasitaskpick\n  } = useState([]);\n  const {\n    0: datafiltertipetaskstaskpick,\n    1: setdatafiltertipetaskstaskpick\n  } = useState([]);\n  const {\n    0: searchfilterstatetaskpick,\n    1: setsearchfilterstatetaskpick\n  } = useState(\"\");\n  const {\n    0: lokasifilterstatetaskpick,\n    1: setlokasifilterstatetaskpick\n  } = useState(\"\");\n  const {\n    0: fromdatefilterstatetaskpick,\n    1: setfromdatefilterstatetaskpick\n  } = useState(\"\");\n  const {\n    0: todatefilterstatetaskpick,\n    1: settodatefilterstatetaskpick\n  } = useState(\"\");\n  const {\n    0: tasktypefilterstatetaskpick,\n    1: settasktypefilterstatetaskpick\n  } = useState(\"\"); //2. columns table\n\n  const columnsTask = [{\n    title: \"No\",\n    dataIndex: \"num\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: datarawtask.from + index\n        })\n      };\n    }\n  }, {\n    title: \"Nomor Task\",\n    dataIndex: \"id\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [\"T-000\", record.id]\n        })\n      };\n    },\n    sorter: (a, b) => a.id < b.id\n  }, {\n    title: \"Tipe Task\",\n    dataIndex: \"name\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task_type === null ? `-` : record.task_type.name\n        })\n      };\n    } // sorter: (a, b) => a.task_type.name.localeCompare(b.task_type.name),\n\n  }, {\n    title: \"Judul Task\",\n    dataIndex: \"name\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.name === \"\" || record.name === \"-\" ? `-` : record.name\n        })\n      };\n    },\n    sorter: (a, b) => a.name.localeCompare(b.name)\n  }, {\n    title: \"Deadline\",\n    dataIndex: \"deadline\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.deadline === null ? `-` : moment(record.deadline).locale(\"id\").format(\"lll\")\n        })\n      };\n    },\n    sorter: (a, b) => a.deadline > b.deadline\n  }, {\n    title: \"Staff\",\n    dataIndex: \"users\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.users.length === 0 ? `-` : record.users.map(docmap => docmap.name).join(\", \")\n        })\n      };\n    }\n  }, {\n    title: \"Lokasi\",\n    dataIndex: \"location\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.location === null ? `-` : record.location.full_location\n        })\n      };\n    }\n  }, {\n    title: \"Status\",\n    dataIndex: \"status\",\n    align: `center`,\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [record.status === 1 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue\",\n            children: \"Overdue\"\n          }), record.status === 2 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open\",\n            children: \"Open\"\n          }), record.status === 3 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress\",\n            children: \"On-Progress\"\n          }), record.status === 4 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md h-auto px-3 text-center py-1 bg-onhold bg-opacity-10 text-onhold\",\n            children: \"On-Hold\"\n          }), record.status === 5 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed\",\n            children: \"Completed\"\n          }), record.status === 6 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed\",\n            children: \"Closed\"\n          })]\n        })\n      };\n    },\n    sorter: (a, b) => a.status < b.status,\n    filters: [{\n      text: \"Overdue\",\n      value: 1\n    }, {\n      text: \"Open\",\n      value: 2\n    }, {\n      text: \"On Progress\",\n      value: 3\n    }, {\n      text: \"On Hold\",\n      value: 4\n    }, {\n      text: \"Completed\",\n      value: 5\n    }, {\n      text: \"Closed\",\n      value: 6\n    }],\n    onFilter: (value, record) => record.status === value,\n    filterMultiple: false\n  }];\n  const columnsTaskPick = [{\n    title: \"No\",\n    dataIndex: \"num\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: datarawtaskpick.from + index\n        })\n      };\n    }\n  }, {\n    title: \"Nomor Task\",\n    dataIndex: \"id\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [\"T-000\", record.id]\n        })\n      };\n    },\n    sorter: (a, b) => a.id > b.id\n  }, {\n    title: \"Tipe Task\",\n    dataIndex: \"task_type\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task_type === null ? `-` : record.task_type.name\n        })\n      };\n    } // sorter: (a, b) => a.task_type.name.localeCompare(b.task_type.name),\n\n  }, {\n    title: \"Judul Task\",\n    dataIndex: \"name\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.name === \"\" || record.name === \"-\" ? `-` : record.name\n        })\n      };\n    },\n    sorter: (a, b) => a.name.localeCompare(b.name)\n  }, {\n    title: \"Deadline\",\n    dataIndex: \"deadline\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.deadline === null ? `-` : moment(record.deadline).locale(\"id\").format(\"lll\")\n        })\n      };\n    },\n    sorter: (a, b) => a.name.localeCompare(b.name)\n  }, {\n    title: \"Lokasi\",\n    dataIndex: \"location\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(\"p\", {\n          className: \" truncate\",\n          children: record.location === null ? `-` : record.location.full_location\n        })\n      };\n    }\n  }, {\n    title: \"Deskripsi\",\n    dataIndex: \"description\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(\"p\", {\n          className: \" line-clamp-3\",\n          children: record.description === \"\" || record.description === \"-\" ? `-` : record.description\n        })\n      };\n    },\n    sorter: (a, b) => a.name.localeCompare(b.name)\n  }, {\n    title: \"\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\",\n    dataIndex: \"actions\",\n    align: `center`,\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsxs(Buttonsys, {\n            type: `primary`,\n            onClick: () => {\n              handlePickTask(record.id);\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mr-1\",\n              children: /*#__PURE__*/_jsx(LayoutGridAddSvg, {\n                size: 18,\n                color: `#ffffff`\n              })\n            }), \"Ambil\"]\n          })\n        })\n      };\n    }\n  }]; //HANDLER\n\n  const onFilterTask = () => {\n    setloadingtasks(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTasks?page=1&rows=${rowstask}&sort_by=${sortstate.sort_by}&sort_type=${sortstate.sort_type}&keyword=${searchstate}&task_type=${tasktypefilterstate}&location=${lokasifilterstate}&from=${fromdatefilterstate}&to=${todatefilterstate}&status=[${statusfilterstate}]`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setpagetask(1);\n      setdatarawtask(res2.data);\n      setdatatasks(res2.data.data);\n      setloadingtasks(false);\n    });\n  };\n\n  const onFilterTaskPick = () => {\n    setloadingfiltertaskpick(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getTaskPickList?rows=${rowstaskpick}&page=1&keyword=${searchfilterstatetaskpick}&task_type=${tasktypefilterstatetaskpick}&location=${lokasifilterstatetaskpick}&from=${fromdatefilterstatetaskpick}&to=${todatefilterstatetaskpick}&sort_by=${sortstatetaskpick.sort_by}&sort_type=${sortstatetaskpick.sort_type}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setpagetaskpick(1);\n      setdatarawtaskpick(res2.data);\n      setdatataskpick(res2.data.data);\n      setloadingfiltertaskpick(false);\n    });\n  };\n\n  const handlePickTask = idtask => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/assignSelfTask`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: Number(idtask)\n      })\n    }).then(res => res.json()).then(res2 => {\n      setreloadpick(prev => prev + 1);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n      } else {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  const {\n    onKeyPressHandler\n  } = createKeyPressHandler(onFilterTask, \"Enter\"); //USEEFFECT\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getFilterTaskTypes?name=${tasktypefilterstate}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatafiltertipetasks(res2.data);\n      setdatafiltertipetaskstaskpick(res2.data);\n    });\n  }, []);\n  useEffect(() => {\n    setloadingtasks(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTasks?page=${pagetask}&rows=${rowstask}&sort_by=${sortstate.sort_by}&sort_type=${sortstate.sort_type}&keyword=${searchstate}&task_type=${tasktypefilterstate}&location=${lokasifilterstate}&from=${fromdatefilterstate}&to=${todatefilterstate}&status=[${statusfilterstate}]`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatarawtask(res2.data);\n      setdatatasks(res2.data.data);\n      setloadingtasks(false);\n    });\n  }, [drawertaskcreate, viewtaskpick]);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAllCompanyList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatafilterlokasi(res2.data.children);\n      setdatafilterlokasitaskpick(res2.data.children);\n      setstatustaskloc(res2.data.children);\n      setttcloc(res2.data.children); // setdtloc(res2.data.children)\n\n      setloadingstatustaskdata(false);\n    });\n  }, []);\n  useEffect(() => {\n    setloadingtasks(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserLastTwoTasks`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setuserlasttwo(res2.data);\n      setloadinguserlasttwo(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskStatusList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setstatustaskdata(res2.data.status_list);\n      setloadingstatustaskdata(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskTypeCounts`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setttcdata(res2.data);\n      setloadingttcdata(false);\n    });\n  }, []);\n  useEffect(() => {\n    setloadingtaskpick(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getTaskPickList?rows=${rowstaskpick}&page=${pagetaskpick}&keyword=${searchfilterstatetaskpick}&task_type=${tasktypefilterstatetaskpick}&location=${lokasifilterstatetaskpick}&from=${fromdatefilterstatetaskpick}&to=${todatefilterstatetaskpick}&sort_by=${sortstatetaskpick.sort_by}&sort_type=${sortstatetaskpick.sort_type}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatarawtaskpick(res2.data);\n      setdatataskpick(res2.data.data);\n      setloadingtaskpick(false);\n    });\n  }, [viewtaskpick, reloadpick, loadingfiltertaskpick]);\n  useEffect(() => {\n    if (triggertasktypupdate !== -1) {\n      setidtasktypupdate(triggertasktypupdate);\n    }\n  }, [triggertasktypupdate]);\n  return /*#__PURE__*/_jsx(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    pathArr: pathArr,\n    st: st,\n    prevpath: \"mytask\",\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex flex-col\",\n      id: \"mainWrapper\",\n      children: viewtaskpick ? /*#__PURE__*/_jsx(_Fragment, {\n        children: viewtaskpick && /*#__PURE__*/_jsx(\"div\", {\n          className: \"px-5\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex flex-col shadow-md rounded-lg bg-white p-5 mb-6 mx-3\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"flex justify-between items-center mb-5\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mr-2 cursor-pointer\",\n                  onClick: () => {\n                    setviewtaskpick(false);\n                  },\n                  children: /*#__PURE__*/_jsx(BackIconSvg, {\n                    size: 15,\n                    color: `#000000`\n                  })\n                }), /*#__PURE__*/_jsx(H1, {\n                  children: \"Open Task\"\n                })]\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \" flex items-center mb-4\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mx-1 w-3/12\",\n                children: /*#__PURE__*/_jsx(_Input, {\n                  value: searchfilterstatetaskpick,\n                  style: {\n                    width: `100%`\n                  },\n                  placeholder: \"Judul Task..\",\n                  allowClear: true,\n                  onChange: e => {\n                    if (e.target.value === \"\") {\n                      setsearchfilterstatetaskpick(\"\");\n                    } else {\n                      setsearchfilterstatetaskpick(e.target.value);\n                    }\n                  }\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mx-1 w-2/12\",\n                children: /*#__PURE__*/_jsx(_Select, {\n                  value: tasktypefilterstatetaskpick === \"\" ? null : tasktypefilterstatetaskpick,\n                  placeholder: \"Semua Tipe Task\",\n                  style: {\n                    width: `100%`\n                  },\n                  allowClear: true,\n                  showSearch: true,\n                  optionFilterProp: \"children\",\n                  notFoundContent: fetchingtasktypes ? /*#__PURE__*/_jsx(_Spin, {\n                    size: \"small\"\n                  }) : null,\n                  onSearch: value => {\n                    setfetchingtasktypes(true);\n                    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getFilterTaskTypes?name=${value}`, {\n                      method: `GET`,\n                      headers: {\n                        Authorization: JSON.parse(initProps)\n                      }\n                    }).then(res => res.json()).then(res2 => {\n                      setdatafiltertipetasks(res2.data);\n                      setfetchingtasktypes(false);\n                    });\n                  },\n                  filterOption: (input, opt) => opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                  name: `task_type_id`,\n                  onChange: value => {\n                    typeof value === \"undefined\" ? settasktypefilterstatetaskpick(\"\") : settasktypefilterstatetaskpick(value);\n                  },\n                  children: datafiltertipetaskstaskpick.map((doc, idx) => /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: doc.name\n                  }, idx))\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \" w-3/12 mx-1\",\n                children: /*#__PURE__*/_jsx(_DatePicker.RangePicker, {\n                  showTime: true,\n                  allowEmpty: true,\n                  className: \"datepickerStatus\",\n                  value: fromdatefilterstatetaskpick === \"\" ? [null, null] : [moment(fromdatefilterstatetaskpick), moment(todatefilterstatetaskpick)],\n                  onChange: (dates, datestrings) => {\n                    setfromdatefilterstatetaskpick(datestrings[0]);\n                    settodatefilterstatetaskpick(datestrings[1]);\n                  }\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \" mx-1 w-3/12\",\n                children: /*#__PURE__*/_jsx(_TreeSelect, {\n                  style: {\n                    width: `100%`\n                  },\n                  allowClear: true,\n                  placeholder: \"Semua Lokasi\",\n                  showSearch: true,\n                  suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n                  showArrow: true,\n                  name: `locations_id`,\n                  onChange: value => {\n                    typeof value === \"undefined\" ? setlokasifilterstatetaskpick(\"\") : setlokasifilterstatetaskpick(value);\n                  },\n                  treeData: datafilterlokasitaskpick,\n                  treeDefaultExpandAll: true,\n                  value: lokasifilterstatetaskpick === \"\" ? null : lokasifilterstatetaskpick\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mx-1 w-1/12\",\n                children: /*#__PURE__*/_jsxs(Buttonsys, {\n                  type: `primary`,\n                  onClick: onFilterTaskPick,\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"mr-1\",\n                    children: /*#__PURE__*/_jsx(SearchIconSvg, {\n                      size: 15,\n                      color: `#ffffff`\n                    })\n                  }), \"Cari\"]\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(TableCustomTaskPick, {\n                dataSource: datataskpick,\n                setDataSource: setdatataskpick,\n                columns: columnsTaskPick,\n                loading: loadingtaskpick,\n                setpraloading: setloadingtaskpick,\n                pageSize: rowstaskpick,\n                total: datarawtaskpick.total,\n                initProps: initProps,\n                setpage: setpagetaskpick,\n                pagefromsearch: pagetaskpick,\n                setdataraw: setdatarawtaskpick,\n                sortstate: sortstatetaskpick,\n                setsortstate: setsortstatetaskpick,\n                searchstate: searchfilterstatetaskpick,\n                tasktypefilterstate: tasktypefilterstatetaskpick,\n                fromdatefilterstate: fromdatefilterstatetaskpick,\n                todatefilterstate: todatefilterstatetaskpick,\n                lokasifilterstate: lokasifilterstatetaskpick\n              })\n            })]\n          })\n        })\n      }) : /*#__PURE__*/_jsxs(\"div\", {\n        className: \"grid grid-cols-11 px-5\",\n        id: \"wrapper1\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \" col-span-5 flex flex-col shadow-md rounded-md bg-gray-50 p-5 mb-6 mr-3\",\n          children: loadinguserlasttwo ? /*#__PURE__*/_jsx(_Fragment, {\n            children: /*#__PURE__*/_jsx(_Spin, {})\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: [/*#__PURE__*/_jsx(H1, {\n                children: \"Segera Berakhir\"\n              }), userlasttwo.length > 0 && /*#__PURE__*/_jsxs(\"div\", {\n                className: \"p-2 rounded bg-red-50 text-state1 text-xs flex\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mr-1 flex items-center\",\n                  children: /*#__PURE__*/_jsx(ClockIconSvg, {\n                    size: 15,\n                    color: `#BF4A40`\n                  })\n                }), moment(userlasttwo[0].deadline).locale(\"id\").format(\"lll\")]\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" h-full\",\n              children: userlasttwo.length < 1 ? /*#__PURE__*/_jsx(\"div\", {\n                className: \" flex w-full h-full items-center justify-center\",\n                children: /*#__PURE__*/_jsx(_Empty, {\n                  image: _Empty.PRESENTED_IMAGE_SIMPLE\n                })\n              }) : /*#__PURE__*/_jsxs(_Fragment, {\n                children: [userlasttwo.length >= 1 && /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"rounded bg-state1 hover:bg-state12 transition duration-300 shadow text-white p-5 flex justify-between mb-2 cursor-pointer h-3/6\",\n                  onClick: () => {\n                    rt.push(`/tasks/detail/${userlasttwo[0].id}`);\n                  },\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      children: /*#__PURE__*/_jsx(ClipboardcheckIconSvg, {\n                        size: 50,\n                        color: `#ffffff`\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex flex-col mt-2\",\n                      children: [/*#__PURE__*/_jsxs(Text, {\n                        color: `white`,\n                        children: [\"Berakhir\", \" \", (new Date() - new Date(userlasttwo[0].deadline)) / (1000 * 60 * 60 * 24) < 1 ? `Hari Ini` : `${moment(userlasttwo[0].deadline).locale(\"id\").format(\"Do MMM\")}`]\n                      }), /*#__PURE__*/_jsx(_Progress, {\n                        trailColor: `#4D4D4D`,\n                        strokeColor: `#ffffff`,\n                        percent: userlasttwo[0].time_limit_percentage,\n                        showInfo: false\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex flex-col text-right\",\n                      children: [/*#__PURE__*/_jsx(\"p\", {\n                        className: `font-bold text-xl mb-0 text-white`,\n                        children: userlasttwo[0].name\n                      }), /*#__PURE__*/_jsxs(Label, {\n                        children: [\"T-000\", userlasttwo[0].id]\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"flex flex-col mt-4 text-right\",\n                      children: /*#__PURE__*/_jsxs(H2, {\n                        color: `white`,\n                        children: [\"Sisa \", userlasttwo[0].time_left]\n                      })\n                    })]\n                  })]\n                }), userlasttwo.length >= 2 && /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"rounded bg-white hover:bg-mono90 transition duration-300 shadow p-5 flex justify-between cursor-pointer h-3/6\",\n                  onClick: () => {\n                    rt.push(`/tasks/detail/${userlasttwo[1].id}`);\n                  },\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      children: /*#__PURE__*/_jsx(ClipboardcheckIconSvg, {\n                        size: 50,\n                        color: `#35763B`\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex flex-col mt-2\",\n                      children: [/*#__PURE__*/_jsxs(Text, {\n                        children: [\"Berakhir\", \" \", (new Date() - new Date(userlasttwo[1].deadline)) / (1000 * 60 * 60 * 24) < 1 ? `Hari Ini` : `${moment(userlasttwo[1].deadline).locale(\"id\").format(\"Do MMM\")}`]\n                      }), /*#__PURE__*/_jsx(_Progress, {\n                        trailColor: `#d8e8da`,\n                        strokeColor: `#35763B`,\n                        percent: userlasttwo[1].time_limit_percentage,\n                        showInfo: false\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex flex-col text-right\",\n                      children: [/*#__PURE__*/_jsx(H1, {\n                        children: userlasttwo[1].name\n                      }), /*#__PURE__*/_jsxs(Label, {\n                        children: [\"T-000\", userlasttwo[1].id]\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"flex flex-col mt-4 text-right\",\n                      children: /*#__PURE__*/_jsxs(H2, {\n                        color: `primary`,\n                        children: [\"Sisa \", userlasttwo[1].time_left]\n                      })\n                    })]\n                  })]\n                })]\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-span-3 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsx(H1, {\n              children: \"Status Task\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \" dropdown\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  tabIndex: `0`,\n                  className: \"mx-1 cursor-pointer\",\n                  onClick: () => {\n                    setstatusloctoggle(prev => !prev);\n                  },\n                  children: /*#__PURE__*/_jsx(MappinIconSvg, {\n                    color: `#000000`,\n                    size: 25\n                  })\n                }), statusloctoggle ? /*#__PURE__*/_jsxs(\"div\", {\n                  tabIndex: `0`,\n                  className: \"p-5 shadow menu dropdown-content bg-white rounded-box w-72 flex flex-col max-h-72 overflow-scroll\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex justify-end mb-1 cursor-pointer\",\n                    onClick: () => {\n                      setstatusloctoggle(false);\n                      setloadingstatustaskdata(true);\n                      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskStatusList?from=${statustaskdatestate.from}&to=${statustaskdatestate.to}&location=`, {\n                        method: `GET`,\n                        headers: {\n                          Authorization: JSON.parse(initProps)\n                        }\n                      }).then(res => res.json()).then(res2 => {\n                        setstatustasklocstate(\"\");\n                        setstatustaskdata(res2.data.status_list);\n                        setloadingstatustaskdata(false);\n                      });\n                    },\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      className: \" text-xs text-gray-500 mr-1\",\n                      children: \"Reset\"\n                    }), /*#__PURE__*/_jsx(CircleXIconSvg, {\n                      size: 15,\n                      color: `#BF4A40`\n                    })]\n                  }), /*#__PURE__*/_jsx(_Tree, {\n                    className: \"treeTaskStatusList\",\n                    defaultExpandAll: true,\n                    treeData: statustaskloc,\n                    switcherIcon: /*#__PURE__*/_jsx(DownOutlined, {}),\n                    showIcon: true,\n                    blockNode: true,\n                    titleRender: nodeData => /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex items-start w-full py-3 rounded-md px-2\",\n                      onClick: () => {\n                        setstatusloctoggle(false);\n                        setloadingstatustaskdata(true);\n                        fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskStatusList?from=${statustaskdatestate.from}&to=${statustaskdatestate.to}&location=${nodeData.key}`, {\n                          method: `GET`,\n                          headers: {\n                            Authorization: JSON.parse(initProps)\n                          }\n                        }).then(res => res.json()).then(res2 => {\n                          setstatustasklocstate(nodeData.key);\n                          setstatustaskdata(res2.data.status_list);\n                          setloadingstatustaskdata(false);\n                        });\n                      },\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-3 flex items-start\",\n                        children: /*#__PURE__*/_jsx(LocationIconSvg, {\n                          id: `icon${nodeData.key}`,\n                          size: 15,\n                          color: `#808080`\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-3\",\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \" text-gray-500 mb-0\",\n                          id: `text${nodeData.key}`,\n                          children: nodeData.title\n                        })\n                      })]\n                    })\n                  })]\n                }) : null]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mx-1 cursor-pointer\",\n                onClick: () => {\n                  setstatustaskdatefilter(prev => !prev);\n                },\n                children: /*#__PURE__*/_jsx(CalendartimeIconSvg, {\n                  color: `#000000`,\n                  size: 25\n                })\n              }), /*#__PURE__*/_jsx(_DatePicker.RangePicker, {\n                value: statustaskdatestate.from === \"\" ? [\"\", \"\"] : [moment(statustaskdatestate.from), moment(statustaskdatestate.to)],\n                allowEmpty: true,\n                style: {\n                  visibility: `hidden`,\n                  width: `0`,\n                  padding: `0`\n                },\n                className: \"datepickerStatus\",\n                open: statustaskdatefilter,\n                onChange: (dates, datestrings) => {\n                  setstatustaskdatefilter(prev => !prev);\n                  setloadingstatustaskdata(true);\n                  fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskStatusList?from=${datestrings[0]}&to=${datestrings[1]}&location=${statustasklocstate}`, {\n                    method: `GET`,\n                    headers: {\n                      Authorization: JSON.parse(initProps)\n                    }\n                  }).then(res => res.json()).then(res2 => {\n                    setstatustaskdatestate({\n                      from: datestrings[0],\n                      to: datestrings[1]\n                    });\n                    setstatustaskdata(res2.data.status_list);\n                    setloadingstatustaskdata(false);\n                  });\n                },\n                renderExtraFooter: () => /*#__PURE__*/_jsx(\"div\", {\n                  className: \" flex items-center\",\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    className: \" mb-0 text-primary100 hover:text-primary75 cursor-pointer\",\n                    onClick: () => {\n                      setstatustaskdatefilter(prev => !prev);\n                      setloadingstatustaskdata(true);\n                      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskStatusList?from=&to=&location=${statustasklocstate}`, {\n                        method: `GET`,\n                        headers: {\n                          Authorization: JSON.parse(initProps)\n                        }\n                      }).then(res => res.json()).then(res2 => {\n                        setstatustaskdatestate({\n                          from: \"\",\n                          to: \"\"\n                        });\n                        setstatustaskdata(res2.data.status_list);\n                        setloadingstatustaskdata(false);\n                      });\n                    },\n                    children: \"Reset\"\n                  })\n                })\n              })]\n            })]\n          }), loadingstatustaskdata ? /*#__PURE__*/_jsx(_Fragment, {\n            children: /*#__PURE__*/_jsx(_Spin, {})\n          }) : statustaskdata.every(docevery => docevery.status_count === 0) ? /*#__PURE__*/_jsx(_Fragment, {\n            children: /*#__PURE__*/_jsx(_Empty, {\n              image: _Empty.PRESENTED_IMAGE_SIMPLE\n            })\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"flex justify-center mb-4\",\n              children: /*#__PURE__*/_jsx(Doughnut, {\n                data: {\n                  labels: statustaskdata.map(doc => doc.status_name),\n                  datasets: [{\n                    data: statustaskdata.map(doc => doc.status_count),\n                    backgroundColor: [\"#BF4A40\", \"#2F80ED\", \"#ED962F\", \"#E5C471\", \"#6AAA70\", \"#808080\"],\n                    borderColor: [\"#BF4A40\", \"#2F80ED\", \"#ED962F\", \"#E5C471\", \"#6AAA70\", \"#808080\"],\n                    borderWidth: 1\n                  }]\n                },\n                options: {\n                  title: {\n                    display: false\n                  },\n                  legend: {\n                    display: false\n                  },\n                  maintainAspectRatio: false,\n                  cutout: 55,\n                  spacing: 5\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex flex-col\",\n              children: statustaskdata.map((doc, idx) => {\n                if (doc.status === 1) {\n                  return /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex justify-between items-center mb-1\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \" w-1 bg-overdue mr-1\"\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-1\",\n                        children: /*#__PURE__*/_jsx(Text, {\n                          children: doc.status_name\n                        })\n                      }), /*#__PURE__*/_jsx(AlerttriangleIconSvg, {\n                        size: 15,\n                        color: `#BF4A40`\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"flex\",\n                      children: /*#__PURE__*/_jsx(H2, {\n                        children: doc.status_count\n                      })\n                    })]\n                  });\n                } else {\n                  return /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex justify-between items-center mb-1\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: `w-1 mr-1 ${doc.status === 1 && `bg-overdue`} ${doc.status === 2 && `bg-open`} ${doc.status === 3 && `bg-onprogress`} ${doc.status === 4 && `bg-onhold`} ${doc.status === 5 && `bg-completed`} ${doc.status === 6 && `bg-closed`}`\n                      }), /*#__PURE__*/_jsx(Text, {\n                        children: doc.status_name\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"flex\",\n                      children: /*#__PURE__*/_jsx(H2, {\n                        children: doc.status_count\n                      })\n                    })]\n                  });\n                }\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-span-3 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsx(H1, {\n              children: \"Tipe Task Terbanyak\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex items-center\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"dropdown dropdown-left\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  tabIndex: `1`,\n                  className: \"mx-1 cursor-pointer\",\n                  onClick: () => {\n                    setttloctoggle(prev => !prev);\n                  },\n                  children: /*#__PURE__*/_jsx(MappinIconSvg, {\n                    color: `#000000`,\n                    size: 25\n                  })\n                }), ttloctoggle ? /*#__PURE__*/_jsxs(\"div\", {\n                  tabIndex: `1`,\n                  className: \"p-5 shadow menu dropdown-content bg-white rounded-box w-72 flex flex-col max-h-72 overflow-scroll\",\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex justify-end mb-1 cursor-pointer\",\n                    onClick: () => {\n                      setttloctoggle(false);\n                      setloadingttcdata(true);\n                      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskTypeCounts?location=`, {\n                        method: `GET`,\n                        headers: {\n                          Authorization: JSON.parse(initProps)\n                        }\n                      }).then(res => res.json()).then(res2 => {\n                        setttcdata(res2.data);\n                        setloadingttcdata(false);\n                      });\n                    },\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      className: \" text-xs text-gray-500 mr-1\",\n                      children: \"Reset\"\n                    }), /*#__PURE__*/_jsx(CircleXIconSvg, {\n                      size: 15,\n                      color: `#BF4A40`\n                    })]\n                  }), /*#__PURE__*/_jsx(_Tree, {\n                    className: \"treeTaskStatusList\",\n                    defaultExpandAll: true,\n                    treeData: ttcloc,\n                    switcherIcon: /*#__PURE__*/_jsx(DownOutlined, {}),\n                    showIcon: true,\n                    blockNode: true,\n                    titleRender: nodeData => /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex items-start w-full py-3 rounded-md px-2\",\n                      onClick: () => {\n                        setttloctoggle(false);\n                        setloadingttcdata(true);\n                        fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getUserTaskTypeCounts?location=${nodeData.key}`, {\n                          method: `GET`,\n                          headers: {\n                            Authorization: JSON.parse(initProps)\n                          }\n                        }).then(res => res.json()).then(res2 => {\n                          setttcdata(res2.data);\n                          setloadingttcdata(false);\n                        });\n                      },\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-3 flex items-start\",\n                        children: /*#__PURE__*/_jsx(LocationIconSvg, {\n                          id: `icon${nodeData.key}`,\n                          size: 15,\n                          color: `#808080`\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"mr-3\",\n                        children: /*#__PURE__*/_jsx(\"p\", {\n                          className: \" text-gray-500 mb-0\",\n                          id: `text${nodeData.key}`,\n                          children: nodeData.title\n                        })\n                      })]\n                    })\n                  })]\n                }) : null]\n              })\n            })]\n          }), loadingttcdata ? /*#__PURE__*/_jsx(_Fragment, {\n            children: /*#__PURE__*/_jsx(_Spin, {})\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"flex justify-center mb-5 h-4/6\",\n              children: /*#__PURE__*/_jsx(Bar, {\n                data: {\n                  labels: ttcdata.map(doc => doc.name),\n                  datasets: [{\n                    data: ttcdata.map(doc => doc.tasks_count),\n                    backgroundColor: ttcdata.map((doc, idx) => ttccolorbar[idx + 1 % ttccolorbar.length - 1]),\n                    borderColor: ttcdata.map((doc, idx) => ttccolorbar[idx + 1 % ttccolorbar.length - 1]),\n                    barPercentage: 1.0,\n                    barThickness: 18,\n                    maxBarThickness: 15,\n                    minBarLength: 2\n                  }]\n                },\n                options: {\n                  title: {\n                    display: false\n                  },\n                  legend: {\n                    display: false\n                  },\n                  maintainAspectRatio: false,\n                  scales: {\n                    x: {\n                      grid: {\n                        display: false\n                      }\n                    },\n                    y: {\n                      grid: {\n                        display: false\n                      }\n                    }\n                  }\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex flex-col\",\n              children: ttcdata.map((doc, idx) => /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex justify-between items-center mb-1\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \" w-1 mr-2\",\n                    style: {\n                      backgroundColor: `${ttccolorbar[idx + 1 % ttccolorbar.length - 1]}`\n                    }\n                  }), /*#__PURE__*/_jsx(Text, {\n                    children: doc.name\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"flex\",\n                  children: /*#__PURE__*/_jsx(H2, {\n                    children: doc.tasks_count\n                  })\n                })]\n              }, idx))\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-span-11 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mr-3\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: /*#__PURE__*/_jsx(H1, {\n              children: \"Semua Task\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \" flex items-center mb-4\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-1 w-2/12\",\n              children: /*#__PURE__*/_jsx(_Input, {\n                value: searchstate,\n                style: {\n                  width: `100%`\n                },\n                placeholder: \"Judul atau ID..\",\n                allowClear: true,\n                onChange: e => {\n                  if (e.target.value === \"\") {\n                    setsearchstate(\"\");\n                  } else {\n                    setsearchstate(e.target.value);\n                  }\n                },\n                onKeyPress: onKeyPressHandler\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-1 w-2/12\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                value: tasktypefilterstate === \"\" ? null : tasktypefilterstate,\n                placeholder: \"Semua Tipe Task\",\n                style: {\n                  width: `100%`\n                },\n                allowClear: true,\n                showSearch: true,\n                optionFilterProp: \"children\",\n                notFoundContent: fetchingtasktypes ? /*#__PURE__*/_jsx(_Spin, {\n                  size: \"small\"\n                }) : null,\n                onSearch: value => {\n                  setfetchingtasktypes(true);\n                  fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getFilterTaskTypes?name=${value}`, {\n                    method: `GET`,\n                    headers: {\n                      Authorization: JSON.parse(initProps)\n                    }\n                  }).then(res => res.json()).then(res2 => {\n                    setdatafiltertipetasks(res2.data);\n                    setfetchingtasktypes(false);\n                  });\n                },\n                filterOption: (input, opt) => opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                name: `task_type_id`,\n                onChange: value => {\n                  typeof value === \"undefined\" ? settasktypefilterstate(\"\") : settasktypefilterstate(value);\n                },\n                children: datafiltertipetasks.map((doc, idx) => /*#__PURE__*/_jsx(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, idx))\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" w-3/12 mx-1\",\n              children: /*#__PURE__*/_jsx(_DatePicker.RangePicker, {\n                showTime: true,\n                allowEmpty: true,\n                className: \"datepickerStatus\",\n                value: fromdatefilterstate === \"\" ? [null, null] : [moment(fromdatefilterstate), moment(todatefilterstate)],\n                onChange: (dates, datestrings) => {\n                  setfromdatefilterstate(datestrings[0]);\n                  settodatefilterstate(datestrings[1]);\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" mx-1 w-2/12\",\n              children: /*#__PURE__*/_jsx(_TreeSelect, {\n                style: {\n                  width: `100%`\n                },\n                allowClear: true,\n                placeholder: \"Semua Lokasi\",\n                showSearch: true,\n                suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n                showArrow: true,\n                name: `locations_id`,\n                onChange: value => {\n                  typeof value === \"undefined\" ? setlokasifilterstate(\"\") : setlokasifilterstate(value);\n                },\n                treeData: datafilterlokasi,\n                treeDefaultExpandAll: true,\n                value: lokasifilterstate === \"\" ? null : lokasifilterstate\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" mx-1 w-2/12\",\n              children: /*#__PURE__*/_jsxs(_Select, {\n                style: {\n                  width: `100%`\n                },\n                value: statusfilterstate === \"\" ? null : statusfilterstate,\n                placeholder: \"Semua Status\",\n                allowClear: true,\n                name: `status`,\n                onChange: value => {\n                  typeof value === \"undefined\" ? setstatusfilterstate(\"\") : setstatusfilterstate(value);\n                },\n                children: [/*#__PURE__*/_jsx(_Select.Option, {\n                  value: 1,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"rounded-md h-auto px-1 mr-1 text-center py-1 bg-overdue border border-overdue\"\n                    }), \"Overdue\"]\n                  })\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 2,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"rounded-md h-auto px-1 mr-1 text-center py-1 bg-open border border-open\"\n                    }), \"Open\"]\n                  })\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 3,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"rounded-md h-auto px-1 mr-1 text-center py-1 bg-onprogress border border-onprogress\"\n                    }), \"On Progress\"]\n                  })\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 4,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"rounded-md h-auto px-1 mr-1 text-center py-1 bg-onhold border border-onhold\"\n                    }), \"On Hold\"]\n                  })\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 5,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"rounded-md h-auto px-1 mr-1 text-center py-1 bg-completed border border-completed\"\n                    }), \"Completed\"]\n                  })\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 6,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"rounded-md h-auto px-1 mr-1 text-center py-1 bg-closed border border-closed\"\n                    }), \"Closed\"]\n                  })\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mx-1 w-1/12\",\n              children: /*#__PURE__*/_jsxs(Buttonsys, {\n                type: `primary`,\n                onClick: onFilterTask,\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mr-1\",\n                  children: /*#__PURE__*/_jsx(SearchIconSvg, {\n                    size: 15,\n                    color: `#ffffff`\n                  })\n                }), \"Cari\"]\n              })\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"flex flex-col mb-5\",\n            children: /*#__PURE__*/_jsx(TableCustomTask, {\n              dataSource: datatasks,\n              setDataSource: setdatatasks,\n              columns: columnsTask,\n              loading: loadingtasks,\n              setpraloading: setloadingtasks,\n              pageSize: rowstask,\n              total: datarawtask.total,\n              initProps: initProps,\n              setpage: setpagetask,\n              pagefromsearch: pagetask,\n              setdataraw: setdatarawtask,\n              sortstate: sortstate,\n              setsortstate: setsortstate,\n              searchstate: searchstate,\n              tasktypefilterstate: tasktypefilterstate,\n              fromdatefilterstate: fromdatefilterstate,\n              todatefilterstate: todatefilterstate,\n              lokasifilterstate: lokasifilterstate,\n              statusfilterstate: statusfilterstate,\n              prevpath: \"mytask\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"flex items-center justify-end\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsxs(Buttonsys, {\n                type: `primary`,\n                onClick: () => {\n                  setviewtaskpick(true);\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"mr-1\",\n                  children: /*#__PURE__*/_jsx(LayoutGridAddSvg, {\n                    size: 18,\n                    color: `#ffffff`\n                  })\n                }), \"Ambil Task Baru\"]\n              })\n            })\n          })]\n        })]\n      })\n    })\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"202\"\n    }\n  };\n}\nexport default TaskIndex;","map":null,"metadata":{},"sourceType":"module"}