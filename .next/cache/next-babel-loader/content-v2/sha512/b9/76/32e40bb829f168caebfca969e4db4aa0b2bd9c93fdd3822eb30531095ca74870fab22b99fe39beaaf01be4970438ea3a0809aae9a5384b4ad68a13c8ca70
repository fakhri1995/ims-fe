{"ast":null,"code":"import _Select from \"antd/lib/select\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _Input from \"antd/lib/input\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Upload from \"antd/lib/upload\";\nimport _Button from \"antd/lib/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _notification from \"antd/lib/notification\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/requesters/create/index.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport LoadingOutlined from \"@ant-design/icons/LoadingOutlined\";\nimport PlusOutlined from \"@ant-design/icons/PlusOutlined\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../../components/layout-dashboard\";\nimport st from \"../../../../components/layout-dashboard.module.css\";\n\nfunction modifData(dataa) {\n  for (var i = 0; i < dataa.length; i++) {\n    dataa[i][\"key\"] = dataa[i].id;\n    dataa[i][\"value\"] = dataa[i].id;\n    dataa[i][\"title\"] = dataa[i].name;\n    dataa[i][\"children\"] = dataa[i].members;\n    delete dataa[i].members;\n    if (dataa[i].children) [modifData(dataa[i].children)];\n  }\n\n  return dataa;\n}\n\nfunction RequestersCreate(_ref) {\n  _s();\n\n  var _this = this;\n\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu,\n      dataCompanyList = _ref.dataCompanyList;\n  var rt = useRouter();\n  var tok = initProps;\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr[pathArr.length - 1] = \"Create\"; // dataCompanyList = dataCompanyList.data.members.filter(data => data.company_id !== 66)\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      instanceForm = _Form$useForm2[0]; //useState\n\n\n  var _useState = useState({\n    fullname: \"\",\n    email: \"\",\n    role_ids: [],\n    phone_number: \"\",\n    profile_image: \"\",\n    company_id: 0,\n    password: \"\",\n    confirm_password: \"\",\n    position: \"\"\n  }),\n      newuserrequesters = _useState[0],\n      setNewuserrequesters = _useState[1];\n\n  var _useState2 = useState(false),\n      loadingupload = _useState2[0],\n      setLoadingupload = _useState2[1];\n\n  var _useState3 = useState(false),\n      loadingcreate = _useState3[0],\n      setLoadingcreate = _useState3[1];\n\n  var _useState4 = useState([]),\n      datacompanylist = _useState4[0],\n      setdatacompanylist = _useState4[1];\n\n  var _useState5 = useState([]),\n      dataraw1 = _useState5[0],\n      setdataraw1 = _useState5[1];\n\n  var _useState6 = useState(true),\n      praloading = _useState6[0],\n      setpraloading = _useState6[1]; //handleCreateButton\n\n\n  var handleCreateAgents = function handleCreateAgents() {\n    setLoadingcreate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addRequesterMember\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newuserrequesters)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setLoadingcreate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(function () {\n          rt.push(\"/admin/requesters/detail/\".concat(res2.id));\n        }, 1000);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n    console.log(\"isi new user: \" + newuserrequesters.profile_image);\n  };\n\n  var onChangeCreateRequesters = function onChangeCreateRequesters(e) {\n    setNewuserrequesters(_objectSpread(_objectSpread({}, newuserrequesters), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var beforeUploadProfileImage = function beforeUploadProfileImage(file) {\n    var isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\" || file.type === \"image/jpg\";\n\n    if (!isJpgOrPng) {\n      message.error(\"You can only upload JPG/PNG file!\");\n    }\n\n    var isLt2M = file.size / 1024 / 1024 < 2;\n\n    if (!isLt2M) {\n      message.error(\"Image must smaller than 2MB!\");\n    }\n\n    return isJpgOrPng && isLt2M;\n  };\n\n  var onChangeProfileImage = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(info) {\n      var formData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(info.file.status === \"uploading\")) {\n                _context.next = 3;\n                break;\n              }\n\n              setLoadingupload(true);\n              return _context.abrupt(\"return\");\n\n            case 3:\n              if (!(info.file.status === \"done\")) {\n                _context.next = 9;\n                break;\n              }\n\n              console.log(\"isi upload: \" + info.file.originFileObj.name);\n              formData = new FormData();\n              formData.append(\"file\", info.file.originFileObj);\n              formData.append(\"upload_preset\", \"migsys\");\n              return _context.abrupt(\"return\", fetch(\"https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload\", {\n                method: \"POST\",\n                body: formData\n              }).then(function (res) {\n                return res.json();\n              }).then(function (res2) {\n                setNewuserrequesters(_objectSpread(_objectSpread({}, newuserrequesters), {}, {\n                  profile_image: res2.secure_url\n                }));\n              }));\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onChangeProfileImage(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var uploadButton = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loadingupload ? /*#__PURE__*/_jsxDEV(LoadingOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 24\n    }, this) : /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 46\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8\n      },\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this); //useEffect\n\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getClientCompanyList\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      console.log(res2.data);\n      setdatacompanylist(res2.data.children);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRoles\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdataraw1(res2.data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: tok,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    sidemenu: sidemenu,\n    st: st,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAgentsWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-4\",\n        children: /*#__PURE__*/_jsxDEV(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white mb-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-semibold py-2\",\n              children: \"Buat Akun Requester\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(_Button, {\n                disabled: praloading,\n                onClick: function onClick() {\n                  rt.push(\"/admin/requesters\");\n                },\n                type: \"default\",\n                children: \"Batal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                disabled: praloading,\n                loading: loadingcreate,\n                onClick: instanceForm.submit,\n                type: \"primary\",\n                children: \"Simpan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-3 flex flex-col\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow-lg flex flex-col rounded-md w-full h-auto p-4 mb-14\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b border-black p-4 font-semibold mb-5\",\n            children: [\"Akun Requester - \", newuserrequesters.fullname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 col-span-1 md:col-span-1\",\n              children: /*#__PURE__*/_jsxDEV(_Upload, {\n                name: \"profile_image\",\n                listType: \"picture-card\",\n                className: \"profileImage\",\n                showUploadList: false,\n                beforeUpload: beforeUploadProfileImage,\n                onChange: onChangeProfileImage,\n                children: newuserrequesters.profile_image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: newuserrequesters.profile_image,\n                  alt: \"avatar\",\n                  style: {\n                    width: \"100%\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 21\n                }, this) : uploadButton\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 col-span-1 md:col-span-3\",\n              children: /*#__PURE__*/_jsxDEV(_Form, {\n                layout: \"vertical\",\n                className: \"createAgentsForm\",\n                onFinish: handleCreateAgents,\n                form: instanceForm,\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Asal Lokasi\",\n                  name: \"company_id\",\n                  rules: [{\n                    required: true,\n                    message: \"Asal Lokasi wajib diisi\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                    allowClear: true,\n                    dropdownStyle: {\n                      maxHeight: 400,\n                      overflow: \"auto\"\n                    },\n                    treeData: datacompanylist,\n                    placeholder: \"Pilih Asal Lokasi\",\n                    treeDefaultExpandAll: true,\n                    onChange: function onChange(value) {\n                      setNewuserrequesters(_objectSpread(_objectSpread({}, newuserrequesters), {}, {\n                        company_id: value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Nama Lengkap\",\n                  required: true,\n                  name: \"fullname\",\n                  rules: [{\n                    required: true,\n                    message: \"Nama Lengkap wajib diisi\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    value: newuserrequesters.fullname,\n                    name: \"fullname\",\n                    onChange: onChangeCreateRequesters\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Email\",\n                  required: true,\n                  name: \"email\",\n                  rules: [{\n                    required: true,\n                    message: \"Email wajib diisi\"\n                  }, {\n                    pattern: /(\\-)|(^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$)/,\n                    message: \"Email belum diisi dengan benar\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    value: newuserrequesters.email,\n                    name: \"email\",\n                    onChange: onChangeCreateRequesters\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Posisi\",\n                  required: true,\n                  name: \"position\",\n                  rules: [{\n                    required: true,\n                    message: \"Posisi wajib diisi\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    value: newuserrequesters.position,\n                    name: \"position\",\n                    onChange: onChangeCreateRequesters\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"No. Handphone\",\n                  name: \"phone_number\",\n                  rules: [{\n                    required: true,\n                    message: \"No. Handphone wajib diisi\"\n                  }, {\n                    pattern: /(\\-)|(^\\d*$)/,\n                    message: \"No. Handphone harus berisi angka\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    value: newuserrequesters.phone_number,\n                    name: \"phone_number\",\n                    onChange: onChangeCreateRequesters\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Password\",\n                  name: \"password\",\n                  rules: [{\n                    required: true,\n                    message: \"Password wajib diisi\"\n                  }, {\n                    pattern: /([A-z0-9]{8})/,\n                    message: \"Password minimal 8 karakter\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input.Password, {\n                    value: newuserrequesters.password,\n                    name: \"password\",\n                    onChange: onChangeCreateRequesters\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Konfirmasi Password\",\n                  name: \"password\",\n                  rules: [{\n                    required: true,\n                    message: \"Confirm Password wajib diisi\"\n                  }, {\n                    pattern: /([A-z0-9]{8})/,\n                    message: \"Confirm Password minimal 8 karakter\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(_Input.Password, {\n                      value: newuserrequesters.confirm_password,\n                      name: \"confirm_password\",\n                      onChange: onChangeCreateRequesters\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 385,\n                      columnNumber: 23\n                    }, this), newuserrequesters.password !== newuserrequesters.confirm_password && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \" text-red-500 mb-0\",\n                      children: \"Confirm Password harus sesuai dengan password\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Role\",\n                  name: \"role\",\n                  children: /*#__PURE__*/_jsxDEV(_Select, {\n                    mode: \"multiple\",\n                    onChange: function onChange(value) {\n                      setNewuserrequesters(_objectSpread(_objectSpread({}, newuserrequesters), {}, {\n                        role_ids: value\n                      }));\n                    }\n                    /*defaultValue={idrole}*/\n                    ,\n                    style: {\n                      width: \"100%\"\n                    },\n                    children: dataraw1.map(function (doc, idx) {\n                      return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: doc.id,\n                        children: doc.name\n                      }, doc.id, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 411,\n                        columnNumber: 27\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RequestersCreate, \"ZQc5hoZD5jz2KYOFMXzrgQtRKfc=\", false, function () {\n  return [useRouter, _Form.useForm];\n});\n\n_c = RequestersCreate;\nexport var __N_SSP = true;\nexport default RequestersCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"RequestersCreate\");","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/requesters/create/index.js"],"names":["LoadingOutlined","PlusOutlined","Link","useRouter","useEffect","useState","Sticky","Layout","st","modifData","dataa","i","length","id","name","members","children","RequestersCreate","initProps","dataProfile","sidemenu","dataCompanyList","rt","tok","pathArr","pathname","split","slice","useForm","instanceForm","fullname","email","role_ids","phone_number","profile_image","company_id","password","confirm_password","position","newuserrequesters","setNewuserrequesters","loadingupload","setLoadingupload","loadingcreate","setLoadingcreate","datacompanylist","setdatacompanylist","dataraw1","setdataraw1","praloading","setpraloading","handleCreateAgents","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","body","stringify","then","res","json","res2","success","message","duration","setTimeout","push","console","log","onChangeCreateRequesters","e","target","value","beforeUploadProfileImage","file","isJpgOrPng","type","error","isLt2M","size","onChangeProfileImage","info","status","originFileObj","formData","FormData","append","secure_url","uploadButton","marginTop","data","submit","width","required","maxHeight","overflow","pattern","map","doc","idx"],"mappings":"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","sourcesContent":["import LoadingOutlined from \"@ant-design/icons/LoadingOutlined\";\nimport PlusOutlined from \"@ant-design/icons/PlusOutlined\";\nimport {\n  Button,\n  Form,\n  Input,\n  Select,\n  TreeSelect,\n  Upload,\n  notification,\n} from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\n\nimport Layout from \"../../../../components/layout-dashboard\";\nimport st from \"../../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction modifData(dataa) {\n  for (var i = 0; i < dataa.length; i++) {\n    dataa[i][\"key\"] = dataa[i].id;\n    dataa[i][\"value\"] = dataa[i].id;\n    dataa[i][\"title\"] = dataa[i].name;\n    dataa[i][\"children\"] = dataa[i].members;\n    delete dataa[i].members;\n    if (dataa[i].children) [modifData(dataa[i].children)];\n  }\n  return dataa;\n}\n\nfunction RequestersCreate({\n  initProps,\n  dataProfile,\n  sidemenu,\n  dataCompanyList,\n}) {\n  const rt = useRouter();\n  const tok = initProps;\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr[pathArr.length - 1] = \"Create\";\n  // dataCompanyList = dataCompanyList.data.members.filter(data => data.company_id !== 66)\n  const [instanceForm] = Form.useForm();\n\n  //useState\n  const [newuserrequesters, setNewuserrequesters] = useState({\n    fullname: \"\",\n    email: \"\",\n    role_ids: [],\n    phone_number: \"\",\n    profile_image: \"\",\n    company_id: 0,\n    password: \"\",\n    confirm_password: \"\",\n    position: \"\",\n  });\n  const [loadingupload, setLoadingupload] = useState(false);\n  const [loadingcreate, setLoadingcreate] = useState(false);\n  const [datacompanylist, setdatacompanylist] = useState([]);\n  const [dataraw1, setdataraw1] = useState([]);\n  const [praloading, setpraloading] = useState(true);\n\n  //handleCreateButton\n  const handleCreateAgents = () => {\n    setLoadingcreate(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addRequesterMember`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(newuserrequesters),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setLoadingcreate(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: res2.message,\n            duration: 3,\n          });\n          setTimeout(() => {\n            rt.push(`/admin/requesters/detail/${res2.id}`);\n          }, 1000);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n    console.log(\"isi new user: \" + newuserrequesters.profile_image);\n  };\n  const onChangeCreateRequesters = (e) => {\n    setNewuserrequesters({\n      ...newuserrequesters,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const beforeUploadProfileImage = (file) => {\n    const isJpgOrPng =\n      file.type === \"image/jpeg\" ||\n      file.type === \"image/png\" ||\n      file.type === \"image/jpg\";\n    if (!isJpgOrPng) {\n      message.error(\"You can only upload JPG/PNG file!\");\n    }\n    const isLt2M = file.size / 1024 / 1024 < 2;\n    if (!isLt2M) {\n      message.error(\"Image must smaller than 2MB!\");\n    }\n    return isJpgOrPng && isLt2M;\n  };\n  const onChangeProfileImage = async (info) => {\n    if (info.file.status === \"uploading\") {\n      setLoadingupload(true);\n      return;\n    }\n    if (info.file.status === \"done\") {\n      console.log(\"isi upload: \" + info.file.originFileObj.name);\n      const formData = new FormData();\n      formData.append(\"file\", info.file.originFileObj);\n      formData.append(\"upload_preset\", \"migsys\");\n      return fetch(`https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload`, {\n        method: \"POST\",\n        body: formData,\n      })\n        .then((res) => res.json())\n        .then((res2) => {\n          setNewuserrequesters({\n            ...newuserrequesters,\n            profile_image: res2.secure_url,\n          });\n        });\n    }\n  };\n  const uploadButton = (\n    <div>\n      {loadingupload ? <LoadingOutlined /> : <PlusOutlined />}\n      <div style={{ marginTop: 8 }}>Upload</div>\n    </div>\n  );\n\n  //useEffect\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getClientCompanyList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        console.log(res2.data);\n        setdatacompanylist(res2.data.children);\n        setpraloading(false);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRoles`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setdataraw1(res2.data);\n      });\n  }, []);\n\n  return (\n    <Layout\n      tok={tok}\n      dataProfile={dataProfile}\n      pathArr={pathArr}\n      sidemenu={sidemenu}\n      st={st}\n    >\n      <div\n        className=\"w-full h-auto grid grid-cols-1 md:grid-cols-4\"\n        id=\"createAgentsWrapper\"\n      >\n        <div className=\"col-span-1 md:col-span-4\">\n          <Sticky containerSelectorFocus=\"#createAgentsWrapper\">\n            <div className=\"flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white mb-8\">\n              <h1 className=\"font-semibold py-2\">Buat Akun Requester</h1>\n              <div className=\"flex space-x-2\">\n                {/* <Link href=\"/admin/requesters\"> */}\n                <Button\n                  disabled={praloading}\n                  onClick={() => {\n                    rt.push(`/admin/requesters`);\n                  }}\n                  type=\"default\"\n                >\n                  Batal\n                </Button>\n                {/* <button className=\" bg-white border hover:bg-gray-200 border-gray-300 text-black py-1 px-3 rounded-md\">Cancel</button> */}\n                {/* </Link> */}\n                <Button\n                  disabled={praloading}\n                  loading={loadingcreate}\n                  onClick={instanceForm.submit}\n                  type=\"primary\"\n                >\n                  Simpan\n                </Button>\n                {/* <button className=\" bg-gray-700 hover:bg-gray-800 border text-white py-1 px-3 rounded-md\" onClick={handleCreateAgents}>Save</button> */}\n              </div>\n            </div>\n          </Sticky>\n        </div>\n        <div className=\"col-span-1 md:col-span-3 flex flex-col\">\n          <div className=\"shadow-lg flex flex-col rounded-md w-full h-auto p-4 mb-14\">\n            <div className=\"border-b border-black p-4 font-semibold mb-5\">\n              Akun Requester - {newuserrequesters.fullname}\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-4\">\n              <div className=\"p-3 col-span-1 md:col-span-1\">\n                <Upload\n                  name=\"profile_image\"\n                  listType=\"picture-card\"\n                  className=\"profileImage\"\n                  showUploadList={false}\n                  beforeUpload={beforeUploadProfileImage}\n                  onChange={onChangeProfileImage}\n                >\n                  {newuserrequesters.profile_image ? (\n                    <img\n                      src={newuserrequesters.profile_image}\n                      alt=\"avatar\"\n                      style={{ width: \"100%\" }}\n                    />\n                  ) : (\n                    uploadButton\n                  )}\n                </Upload>\n              </div>\n              <div className=\"p-3 col-span-1 md:col-span-3\">\n                <Form\n                  layout=\"vertical\"\n                  className=\"createAgentsForm\"\n                  onFinish={handleCreateAgents}\n                  form={instanceForm}\n                >\n                  <Form.Item\n                    label=\"Asal Lokasi\"\n                    name=\"company_id\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Asal Lokasi wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <TreeSelect\n                      allowClear\n                      dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                      treeData={datacompanylist}\n                      placeholder=\"Pilih Asal Lokasi\"\n                      treeDefaultExpandAll\n                      onChange={(value) => {\n                        setNewuserrequesters({\n                          ...newuserrequesters,\n                          company_id: value,\n                        });\n                      }}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"Nama Lengkap\"\n                    required\n                    name=\"fullname\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Nama Lengkap wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      value={newuserrequesters.fullname}\n                      name={`fullname`}\n                      onChange={onChangeCreateRequesters}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"Email\"\n                    required\n                    name=\"email\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Email wajib diisi\",\n                      },\n                      {\n                        pattern:\n                          /(\\-)|(^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$)/,\n                        message: \"Email belum diisi dengan benar\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      value={newuserrequesters.email}\n                      name={`email`}\n                      onChange={onChangeCreateRequesters}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"Posisi\"\n                    required\n                    name=\"position\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Posisi wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      value={newuserrequesters.position}\n                      name={`position`}\n                      onChange={onChangeCreateRequesters}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"No. Handphone\"\n                    name=\"phone_number\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"No. Handphone wajib diisi\",\n                      },\n                      {\n                        pattern: /(\\-)|(^\\d*$)/,\n                        message: \"No. Handphone harus berisi angka\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      value={newuserrequesters.phone_number}\n                      name={`phone_number`}\n                      onChange={onChangeCreateRequesters}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"Password\"\n                    name=\"password\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Password wajib diisi\",\n                      },\n                      {\n                        pattern: /([A-z0-9]{8})/,\n                        message: \"Password minimal 8 karakter\",\n                      },\n                    ]}\n                  >\n                    <Input.Password\n                      value={newuserrequesters.password}\n                      name={`password`}\n                      onChange={onChangeCreateRequesters}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"Konfirmasi Password\"\n                    name=\"password\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Confirm Password wajib diisi\",\n                      },\n                      {\n                        pattern: /([A-z0-9]{8})/,\n                        message: \"Confirm Password minimal 8 karakter\",\n                      },\n                    ]}\n                  >\n                    <>\n                      <Input.Password\n                        value={newuserrequesters.confirm_password}\n                        name={`confirm_password`}\n                        onChange={onChangeCreateRequesters}\n                      />\n                      {newuserrequesters.password !==\n                        newuserrequesters.confirm_password && (\n                        <p className=\" text-red-500 mb-0\">\n                          Confirm Password harus sesuai dengan password\n                        </p>\n                      )}\n                    </>\n                  </Form.Item>\n                  <Form.Item label=\"Role\" name=\"role\">\n                    <Select\n                      mode=\"multiple\"\n                      onChange={(value) => {\n                        setNewuserrequesters({\n                          ...newuserrequesters,\n                          role_ids: value,\n                        });\n                      }}\n                      /*defaultValue={idrole}*/ style={{ width: `100%` }}\n                    >\n                      {dataraw1.map((doc, idx) => {\n                        return (\n                          <Select.Option key={doc.id} value={doc.id}>\n                            {doc.name}\n                          </Select.Option>\n                        );\n                      })}\n                    </Select>\n                  </Form.Item>\n                </Form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const reqBody = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\",\n  };\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n\n  const resources = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n\n  // if (![117].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  // const resourcesGCL = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getClientCompanyList`, {\n  //     method: `POST`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps),\n  //         'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify(reqBody)\n  // })\n  // const resjsonGCL = await resourcesGCL.json()\n  // const dataCompanyList = resjsonGCL\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      // dataCompanyList,\n      sidemenu: \"62\",\n    },\n  };\n}\n\nexport default RequestersCreate;\n"]},"metadata":{},"sourceType":"module"}