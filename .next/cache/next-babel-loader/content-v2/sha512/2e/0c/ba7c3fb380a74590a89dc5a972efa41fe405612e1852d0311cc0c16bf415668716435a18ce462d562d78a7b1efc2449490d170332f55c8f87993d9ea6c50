{"ast":null,"code":"import _DatePicker from \"antd/lib/date-picker\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Radio from \"antd/lib/radio\";\nimport _defineProperty from \"/tmp/mig/ims-fe/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport { UserIconSvg } from \"../../icon\";\nimport { H2, Label } from \"../../typography\";\nimport DrawerCore from \"../drawerCore\";\n\nvar DrawerTicketDeadline = function DrawerTicketDeadline(_ref) {\n  var title = _ref.title,\n      visible = _ref.visible,\n      onvisible = _ref.onvisible,\n      onClose = _ref.onClose,\n      buttonOkText = _ref.buttonOkText,\n      disabled = _ref.disabled,\n      initProps = _ref.initProps,\n      refresh = _ref.refresh,\n      setrefresh = _ref.setrefresh,\n      setrefreshclosed = _ref.setrefreshclosed,\n      datapayload = _ref.datapayload,\n      setdatapayload = _ref.setdatapayload,\n      showdatetime = _ref.showdatetime,\n      setshowdatetime = _ref.setshowdatetime,\n      datevalue = _ref.datevalue,\n      setdatevalue = _ref.setdatevalue,\n      ticketid = _ref.ticketid;\n\n  //useState\n  var _useState = useState(false),\n      loadingsave = _useState[0],\n      setloadingsave = _useState[1];\n\n  var _useState2 = useState(true),\n      disabledcreate = _useState2[0],\n      setdisabledcreate = _useState2[1];\n\n  var _useState3 = useState(-1),\n      disabledtrigger = _useState3[0],\n      setdisabledtrigger = _useState3[1]; //handler\n\n\n  var handleSetDeadline = function handleSetDeadline() {\n    setloadingsave(true);\n    setdisabledcreate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/setDeadline\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datapayload)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingsave(false);\n      setdisabledcreate(false);\n\n      if (res2.success) {\n        setdatapayload({\n          id: Number(ticketid),\n          deadline: null\n        });\n        setrefresh(function (prev) {\n          return prev + 1;\n        });\n        onvisible(false);\n\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n      } else {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    if (datapayload.assignable_id !== null) {\n      setdisabledcreate(false);\n    } else {\n      setdisabledcreate(true);\n    }\n  }, [disabledtrigger]);\n  return /*#__PURE__*/_jsx(DrawerCore, {\n    title: title,\n    visible: visible,\n    onClose: function onClose() {\n      setrefreshclosed(function (prev) {\n        return prev + 1;\n      });\n      setdatapayload({\n        id: Number(ticketid),\n        deadline: null\n      });\n      onvisible(false);\n    },\n    buttonOkText: buttonOkText,\n    onClick: handleSetDeadline,\n    disabled: disabledcreate,\n    children: loadingsave ? /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(_Spin, {})\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex flex-col px-3 h-full justify-between\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mb-2\",\n          children: /*#__PURE__*/_jsx(_Radio.Group, {\n            onChange: function onChange(e) {\n              var choisedate = \"\";\n\n              if (e.target.value === 3) {\n                choisedate = moment(datapayload.created_at).add(3, \"h\").locale(\"id\").format();\n                setdatevalue(3);\n                setshowdatetime(false);\n              } else if (e.target.value === 12) {\n                choisedate = moment(datapayload.created_at).add(30, \"h\").locale(\"id\").format();\n                setdatevalue(12);\n                setshowdatetime(false);\n              } else if (e.target.value === 30) {\n                choisedate = moment(datapayload.created_at).add(1, \"h\").locale(\"id\").format();\n                setdatevalue(30);\n                setshowdatetime(false);\n              } else if (e.target.value === 72) {\n                choisedate = moment(datapayload.created_at).add(3, \"d\").locale(\"id\").format();\n                setdatevalue(72);\n                setshowdatetime(false);\n              } else if (e.target.value === -10) {\n                setdatevalue(-10);\n                setshowdatetime(true);\n              }\n\n              setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n                deadline: e.target.value === -10 ? null : choisedate\n              }));\n              setdisabledtrigger(function (prev) {\n                return prev + 1;\n              });\n            },\n            value: datevalue,\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsx(_Radio, {\n                  value: 3,\n                  children: \"3 Jam\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsx(_Radio, {\n                  value: 12,\n                  children: \"12 Jam\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsx(_Radio, {\n                  value: 30,\n                  children: \"30 Jam\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsx(_Radio, {\n                  value: 72,\n                  children: \"3 Hari\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsx(_Radio, {\n                  value: -10,\n                  children: \"Pilih Tanggal\"\n                })\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"mb-2 flex flex-col\",\n          children: showdatetime ? /*#__PURE__*/_jsx(_DatePicker, {\n            value: datapayload.deadline === null ? null : moment(datapayload.deadline),\n            className: \"datepickerStatus\",\n            showTime: true,\n            onChange: function onChange(date, datestring) {\n              setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n                deadline: datestring\n              }));\n              setdisabledtrigger(function (prev) {\n                return prev + 1;\n              });\n            }\n          }) : null\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsxs(\"span\", {\n          className: \"text-state1 text-base\",\n          children: [/*#__PURE__*/_jsx(\"strong\", {\n            children: \"PENTING\"\n          }), \": Deadline terhitung sejak tiket dibuat atau diajukan\"]\n        })\n      })]\n    })\n  });\n};\n\nexport default DrawerTicketDeadline;","map":null,"metadata":{},"sourceType":"module"}