{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _message from \"antd/lib/message\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nexport var __N_SSP = true;\nexport default function ChangePassword(_ref) {\n  var initProps = _ref.initProps;\n  var rt = useRouter();\n  var token = rt.query.token;\n\n  var _useState = useState({\n    new_password: \"\"\n  }),\n      formdata = _useState[0],\n      setFormdata = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      konfirmpass = _useState2[0],\n      setkonfirmpass = _useState2[1];\n\n  var _useState3 = useState(false),\n      alerterror = _useState3[0],\n      setAlerterror = _useState3[1];\n\n  var _useState4 = useState(false),\n      loadingbuatpass = _useState4[0],\n      setloadingbuatpass = _useState4[1];\n\n  var onChangeBuatPassword = function onChangeBuatPassword(e) {\n    setFormdata(_objectSpread(_objectSpread({}, formdata), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleBuatPassword = function handleBuatPassword() {\n    if (formdata.new_password !== konfirmpass) {\n      _notification[\"error\"]({\n        message: \"Konfirmasi password tidak sama dengan password\",\n        duration: 2\n      });\n    } else {\n      setloadingbuatpass(true);\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/changePassword\"), {\n        method: \"POST\",\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(formdata)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        console.log(\"2\");\n        setloadingbuatpass(false);\n\n        if (res2.success) {\n          _notification[\"success\"]({\n            message: \"Berhasil membuat password baru\",\n            duration: 3\n          });\n\n          rt.push(\"/login\");\n        } else if (!res2.success) {\n          _message.error({\n            content: res2.message,\n            style: {\n              marginTop: \"1rem\"\n            }\n          }, 5);\n\n          setAlerterror(true);\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-xl bg-blue-600 h-screen\"\n      /*style={{background:`linear-gradient(#035ea3, #198e07)`}}*/\n      ,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"pt-20 relative\",\n        id: \"wrapper\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \" mx-auto bg-white rounded-lg w-10/12 md:w-5/12 max-h-80 md:max-h-80 text-black shadow-lg px-3 md:px-5 pt-10 pb-1 text-center\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"mb-5 font-mont text-xl font-semibold\",\n            children: \"Buat Password Baru\"\n          }), /*#__PURE__*/_jsxs(_Form, {\n            className: \"loginForm\",\n            onFinish: handleBuatPassword,\n            children: [/*#__PURE__*/_jsx(_Form.Item, {\n              name: \"new_password\",\n              rules: [{\n                required: true,\n                message: \"Password baru wajib diisi\"\n              }, {\n                pattern: /([A-z0-9]{8})/,\n                message: \"Password minimal 8 karakter\"\n              }],\n              children: /*#__PURE__*/_jsx(_Input.Password, {\n                prefix: /*#__PURE__*/_jsx(LockOutlined, {\n                  className: \"site-form-item-icon\"\n                }),\n                name: \"new_password\",\n                value: formdata,\n                placeholder: \"Password Baru\",\n                type: \"password\",\n                onChange: onChangeBuatPassword\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"confirm_new_password\",\n              rules: [{\n                required: true,\n                message: \"Konfirmasi Password baru wajib diisi\"\n              }, {\n                pattern: /([A-z0-9]{8})/,\n                message: \"Password minimal 8 karakter\"\n              }],\n              style: {\n                marginBottom: \"3rem\"\n              },\n              children: /*#__PURE__*/_jsx(_Input.Password, {\n                prefix: /*#__PURE__*/_jsx(LockOutlined, {\n                  className: \"site-form-item-icon\"\n                }),\n                name: \"confirm_new_password\",\n                value: formdata,\n                placeholder: \"Konfirmasi Password Baru\",\n                type: \"password\",\n                onChange: function onChange(e) {\n                  setkonfirmpass(e.target.value);\n                }\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              style: {\n                justifyContent: \"center\"\n              },\n              children: /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                loading: loadingbuatpass,\n                className: \"login-form-button mb-5\",\n                style: {\n                  width: \"100%\"\n                },\n                children: \"Buat Password\"\n              })\n            })]\n          })]\n        })\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}