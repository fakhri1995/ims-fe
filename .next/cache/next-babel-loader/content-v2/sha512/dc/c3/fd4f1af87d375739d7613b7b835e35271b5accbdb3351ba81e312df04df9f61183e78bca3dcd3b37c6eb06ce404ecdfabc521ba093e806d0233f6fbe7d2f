{"ast":null,"code":"import _Input from \"antd/lib/input\";\nimport _Select from \"antd/lib/select\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport DrawerCore from '../drawerCore';\nimport { Label } from '../../typography';\nimport { SearchOutlined } from '@ant-design/icons';\n\nvar DrawerTicketTypeUpdate = function DrawerTicketTypeUpdate(_ref) {\n  var title = _ref.title,\n      visible = _ref.visible,\n      onvisible = _ref.onvisible,\n      onClose = _ref.onClose,\n      buttonOkText = _ref.buttonOkText,\n      disabled = _ref.disabled,\n      initProps = _ref.initProps,\n      refresh = _ref.refresh,\n      setrefresh = _ref.setrefresh,\n      datapayload = _ref.datapayload,\n      setdatapayload = _ref.setdatapayload,\n      disabledsubmit = _ref.disabledsubmit,\n      setdisabledsubmit = _ref.setdisabledsubmit;\n\n  //useState\n  var _useState = useState(false),\n      loadingsave = _useState[0],\n      setloadingsave = _useState[1];\n\n  var _useState2 = useState([]),\n      datatasktypes = _useState2[0],\n      setdatatasktypes = _useState2[1];\n\n  var _useState3 = useState([]),\n      datatickettypes = _useState3[0],\n      setdatatickettypes = _useState3[1];\n\n  var _useState4 = useState(false),\n      fecthingtasktypes = _useState4[0],\n      setfecthingtasktypes = _useState4[1];\n\n  var _useState5 = useState(-1),\n      disabledtrigger = _useState5[0],\n      setdisabledtrigger = _useState5[1]; //handler\n\n\n  var handleUpdateTicketType = function handleUpdateTicketType() {\n    setloadingsave(true);\n    setdisabledsubmit(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/updateTicketTaskType\", {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(datapayload)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setrefresh(function (prev) {\n        return prev + 1;\n      });\n      setloadingsave(false);\n      setdisabledsubmit(false);\n\n      if (res2.success) {\n        setdatapayload({\n          id: null,\n          name: \"\",\n          description: \"\",\n          ticket_type_id: null,\n          task_type_id: null\n        });\n        onvisible(false);\n\n        _notification['success']({\n          message: res2.message,\n          duration: 3\n        });\n      } else {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getFilterTaskTypes\", {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatatasktypes(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getTicketRelation\", {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatatickettypes(res2.data.ticket_types);\n    });\n  }, []);\n  useEffect(function () {\n    if (datapayload.ticket_type_id !== null && datapayload.name !== \"\" && datapayload.task_type_id !== null) {\n      setdisabledsubmit(false);\n    } else {\n      setdisabledsubmit(true);\n    }\n  }, [disabledtrigger]);\n  return /*#__PURE__*/_jsx(DrawerCore, {\n    title: title,\n    visible: visible,\n    onClose: function onClose() {\n      setdatapayload({\n        id: null,\n        name: \"\",\n        description: \"\",\n        ticket_type_id: null,\n        task_type_id: null\n      });\n      onvisible(false);\n    },\n    buttonOkText: buttonOkText,\n    onClick: handleUpdateTicketType,\n    disabled: disabledsubmit,\n    children: loadingsave ? /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(_Spin, {})\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex flex-col\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"mb-6\",\n        children: /*#__PURE__*/_jsx(\"p\", {\n          className: \"mb-0 text-red-500 text-xs italic\",\n          children: \"*Informasi ini harus diisi\"\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col mb-6\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-3689135148\" + \" \" + \"flex mb-2\",\n          children: [/*#__PURE__*/_jsx(Label, {\n            children: \"Tipe Tiket\"\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-3689135148\" + \" \" + \"tickettypes\"\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"3689135148\",\n            children: [\".tickettypes.jsx-3689135148::before{content:'*';color:red;}\"]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \" mb-2 flex\",\n          children: /*#__PURE__*/_jsx(_Select, {\n            style: {\n              width: \"100%\"\n            },\n            onChange: function onChange(value, option) {\n              setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n                ticket_type_id: value\n              }));\n              setdisabledtrigger(function (prev) {\n                return prev + 1;\n              });\n            },\n            defaultValue: datapayload.ticket_type_id,\n            children: datatickettypes.map(function (doc, idx) {\n              return /*#__PURE__*/_jsx(_Select.Option, {\n                value: doc.id,\n                children: doc.name\n              });\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \" mb-6 flex flex-col\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-1737872768\" + \" \" + \"flex mb-2\",\n          children: [/*#__PURE__*/_jsx(Label, {\n            children: \"Nama\"\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-1737872768\" + \" \" + \"spartsout\"\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"1737872768\",\n            children: [\".spartsout.jsx-1737872768::before{content:'*';color:red;}\"]\n          })]\n        }), /*#__PURE__*/_jsx(_Input, {\n          value: datapayload.name,\n          onChange: function onChange(e) {\n            setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n              name: e.target.value\n            }));\n            setdisabledtrigger(function (prev) {\n              return prev + 1;\n            });\n          }\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex flex-col mb-6\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-3564530297\" + \" \" + \"flex mb-2\",\n          children: [/*#__PURE__*/_jsx(Label, {\n            children: \"Tipe Task\"\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"jsx-3564530297\" + \" \" + \"tasktypes\"\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"3564530297\",\n            children: [\".tasktypes.jsx-3564530297::before{content:'*';color:red;}\"]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \" mb-2 flex\",\n          children: /*#__PURE__*/_jsx(_Select, {\n            style: {\n              width: \"100%\"\n            },\n            suffixIcon: /*#__PURE__*/_jsx(SearchOutlined, {}),\n            showArrow: true,\n            placeholder: \"Nama..\",\n            onChange: function onChange(value, option) {\n              setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n                task_type_id: value\n              }));\n              setdisabledtrigger(function (prev) {\n                return prev + 1;\n              });\n            },\n            showSearch: true,\n            optionFilterProp: \"children\",\n            notFoundContent: fecthingtasktypes ? /*#__PURE__*/_jsx(_Spin, {\n              size: \"small\"\n            }) : null,\n            onSearch: function onSearch(value) {\n              setfecthingtasktypes(true);\n              fetch(\"https://boiling-thicket-46501.herokuapp.com/getFilterTaskTypes?name=\".concat(value), {\n                method: \"GET\",\n                headers: {\n                  'Authorization': JSON.parse(initProps)\n                }\n              }).then(function (res) {\n                return res.json();\n              }).then(function (res2) {\n                setdatatasktypes(res2.data);\n                setfecthingtasktypes(false);\n              });\n            },\n            filterOption: function filterOption(input, opt) {\n              return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n            },\n            value: datapayload.task_type_id,\n            children: datatasktypes.map(function (doc, idx) {\n              return /*#__PURE__*/_jsx(_Select.Option, {\n                value: doc.id,\n                children: doc.name\n              }, idx);\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \" mb-6 flex flex-col\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex mb-2\",\n          children: /*#__PURE__*/_jsx(Label, {\n            children: \"Deskripsi\"\n          })\n        }), /*#__PURE__*/_jsx(_Input.TextArea, {\n          rows: 5,\n          value: datapayload.description,\n          onChange: function onChange(e) {\n            setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n              description: e.target.value\n            }));\n          }\n        })]\n      })]\n    })\n  });\n};\n\nexport default DrawerTicketTypeUpdate;","map":null,"metadata":{},"sourceType":"module"}