{"ast":null,"code":"import _Table from \"antd/lib/table\";\nimport _Select from \"antd/lib/select\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/makarim/Documents/code/Next/mighty-fe/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { SearchOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport Layout from '../../components/layout-dashboard2';\nimport moment from 'moment';\nimport st from '../../components/layout-dashboard.module.css';\n\nvar TicketsIndex = function TicketsIndex(_ref) {\n  var dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu,\n      initProps = _ref.initProps;\n  // 1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  var ticketid1 = \"\",\n      locationid1 = \"\",\n      from1 = \"\",\n      to1 = \"\",\n      statusid1 = \"\";\n  var _rt$query = rt.query,\n      ticket_id = _rt$query.ticket_id,\n      location_id = _rt$query.location_id,\n      from = _rt$query.from,\n      to = _rt$query.to,\n      status_id = _rt$query.status_id;\n\n  if (ticket_id) {\n    ticketid1 = ticket_id;\n  }\n\n  if (location_id) {\n    locationid1 = location_id;\n  }\n\n  if (status_id) {\n    statusid1 = status_id;\n  }\n\n  if (from) {\n    from1 = from;\n  }\n\n  if (to) {\n    to1 = to;\n  } //2.useState\n\n\n  var _useState = useState([]),\n      displaydata = _useState[0],\n      setdisplaydata = _useState[1];\n\n  var _useState2 = useState({\n    status_ticket: [{\n      id: 0,\n      name: \"\"\n    }],\n    incident_type: [],\n    requesters: [{\n      user_id: 0,\n      fullname: \"\",\n      company_id: 0\n    }],\n    requester_companies: [],\n    companies: {\n      data: [{\n        id: 0,\n        title: '',\n        key: '',\n        value: 0\n      }]\n    }\n  }),\n      ticketrelations = _useState2[0],\n      setticketrelations = _useState2[1];\n\n  var _useState3 = useState([]),\n      displaydata1 = _useState3[0],\n      setdisplaydata1 = _useState3[1];\n\n  var _useState4 = useState([]),\n      displaydata2 = _useState4[0],\n      setdisplaydata2 = _useState4[1];\n\n  var _useState5 = useState({\n    total_tickets: 0,\n    open_tickets_count: 0,\n    on_progress_tickets_count: 0,\n    on_hold_tickets_count: 0,\n    canceled_tickets_count: 0,\n    closed_tickets_count: 0,\n    tickets: {}\n  }),\n      rawdata = _useState5[0],\n      setrawdata = _useState5[1];\n\n  var _useState6 = useState({\n    current_page: 0,\n    data: [],\n    first_page_url: \"\",\n    from: 0,\n    last_page: 0,\n    last_page_url: \"\",\n    next_page_url: null,\n    path: \"\",\n    per_page: \"\",\n    prev_page_url: \"\",\n    to: 0,\n    total: 0\n  }),\n      displayentiredata = _useState6[0],\n      setdisplayentiredata = _useState6[1];\n\n  var _useState7 = useState(ticketid1 === \"\" ? false : true),\n      namasearchact = _useState7[0],\n      setnamasearchact = _useState7[1];\n\n  var _useState8 = useState(null),\n      namavalue = _useState8[0],\n      setnamavalue = _useState8[1];\n\n  var _useState9 = useState(locationid1 === \"\" ? false : true),\n      lokasifilteract = _useState9[0],\n      setlokasifilteract = _useState9[1];\n\n  var _useState10 = useState(null),\n      lokasivalue = _useState10[0],\n      setlokasivalue = _useState10[1];\n\n  var _useState11 = useState(false),\n      rangedatefilteract = _useState11[0],\n      setrangedatefilteract = _useState11[1];\n\n  var _useState12 = useState([]),\n      rangedatevalue = _useState12[0],\n      setrangedatevalue = _useState12[1];\n\n  var _useState13 = useState(from1 === \"\" ? false : true),\n      fromact = _useState13[0],\n      setfromact = _useState13[1];\n\n  var _useState14 = useState(null),\n      fromvalue = _useState14[0],\n      setfromvalue = _useState14[1];\n\n  var _useState15 = useState(to1 === \"\" ? false : true),\n      toact = _useState15[0],\n      settoact = _useState15[1];\n\n  var _useState16 = useState(null),\n      tovalue = _useState16[0],\n      settovalue = _useState16[1];\n\n  var _useState17 = useState(statusid1 === \"\" ? false : true),\n      statusfilteract = _useState17[0],\n      setstatusfilteract = _useState17[1];\n\n  var _useState18 = useState(null),\n      statusvalue = _useState18[0],\n      setstatusvalue = _useState18[1];\n\n  var _useState19 = useState(locationid1),\n      namaasset = _useState19[0],\n      setnamaasset = _useState19[1];\n\n  var _useState20 = useState(null),\n      defasset = _useState20[0],\n      setdefasset = _useState20[1];\n\n  var _useState21 = useState(0),\n      rowstate = _useState21[0],\n      setrowstate = _useState21[1];\n\n  var _useState22 = useState(true),\n      praloading = _useState22[0],\n      setpraloading = _useState22[1];\n\n  var _useState23 = useState(false),\n      inputnumberfalse = _useState23[0],\n      setinputnumberfalse = _useState23[1]; //declaration\n\n\n  var column = [{\n    title: 'No Ticket',\n    dataIndex: 'num',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"strong\", {\n            children: record.full_name\n          })\n        })\n      };\n    }\n  }, {\n    title: 'Raised By',\n    dataIndex: 'raised_by',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task.creator.name\n        })\n      };\n    }\n  }, {\n    title: 'Lokasi Problem',\n    dataIndex: 'location_problem',\n    align: \"center\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.task.location.id === 0 ? \"-\" : record.task.location.full_location\n        })\n      };\n    }\n  }, {\n    title: 'Date Raised',\n    dataIndex: 'date_raised',\n    render: function render(text, record, index) {\n      // var jumlahHari = Math.floor((new Date().getTime() - new Date(record.raised_at).getTime()) / (1000 * 3600 * 24))\n      // var jumlahJam = \"\"\n      // if (jumlahHari < 1) {\n      //     jumlahJam = Math.floor((new Date().getTime() - new Date(record.raised_at).getTime()) / (1000 * 3600))\n      // }\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.raised_at\n        })\n      };\n    }\n  } // {\n  //     title: 'Assign To',\n  //     dataIndex: 'assign_to',\n  //     render: (text, record, index) => {\n  //         return {\n  //             children:\n  //                 <>\n  //                     {/* {ticketrelations.requesters.filter(docfil => docfil.user_id === record.assign_to)[0].fullname} */}\n  //                     {record.assignable.id === 0 ?\n  //                         <div className=\"flex items-center\">\n  //                             <p className='mb-0 mr-2'>None</p>\n  //                             <Tooltip placement=\"right\" title=\"Ticket Belum di assign ke engineer\">\n  //                                 <ExclamationCircleOutlined style={{ color: `brown` }}></ExclamationCircleOutlined>\n  //                             </Tooltip>\n  //                         </div>\n  //                         :\n  //                         record.assignable.name\n  //                     }\n  //                 </>\n  //         }\n  //     }\n  // },\n  // {\n  //     title: 'Status',\n  //     dataIndex: 'status',\n  //     align: `center`,\n  //     render: (text, record, index) => {\n  //         return {\n  //             children:\n  //                 <>\n  //                     {/* {ticketrelations.status_ticket.filter(docfil => docfil.id === record.status)[0].name} */}\n  //                     {\n  //                         record.status.id === 1 &&\n  //                         <div className=\"rounded-md h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\">{record.status.name}</div>\n  //                     }\n  //                     {\n  //                         record.status.id === 2 &&\n  //                         <div className=\"rounded-md h-auto px-1 text-center py-1 bg-green-100 border border-green-200 text-green-600\">{record.status.name}</div>\n  //                     }\n  //                     {\n  //                         record.status.id === 3 &&\n  //                         <div className=\"rounded-md h-auto px-1 text-center py-1 bg-yellow-100 border border-yellow-200 text-yellow-600\">{record.status.name}</div>\n  //                     }\n  //                     {\n  //                         record.status.id === 4 &&\n  //                         <div className=\"rounded-md h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\">{record.status.name}</div>\n  //                     }\n  //                     {\n  //                         record.status.id === 5 &&\n  //                         <div className=\"rounded-md h-auto px-1 text-center py-1 bg-gray-100 border border-gray-200 text-gray-600\">{record.status.name}</div>\n  //                     }\n  //                 </>\n  //         }\n  //     }\n  // },\n  ]; //3.onChange\n  //search nama\n\n  var onChangeSearch = function onChangeSearch(e) {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = \"/tickets?ticket_id=&location_id=\".concat(lokasifilteract ? locationid1 : \"\", \"&status_id=\").concat(statusfilteract ? statusid1 : \"\", \"&from=\").concat(fromact ? from1 : \"\", \"&to=\").concat(toact ? to1 : \"\");\n      setnamasearchact(false);\n    } else {\n      if (/(^\\d*$)/.test(e.target.value)) {\n        setinputnumberfalse(false);\n        setnamasearchact(true);\n        setnamavalue(e.target.value);\n      } else {\n        setinputnumberfalse(true);\n      }\n    }\n  }; //search lokasi\n\n\n  var onChangeLokasi = function onChangeLokasi(idlokasi) {\n    if (typeof idlokasi === 'undefined') {\n      // setdisplaydata(displaydata2)\n      window.location.href = \"/tickets?ticket_id=\".concat(namasearchact ? ticketid1 : \"\", \"&location_id=&status_id=\").concat(statusfilteract ? statusid1 : \"\", \"&from=\").concat(fromact ? from1 : \"\", \"&to=\").concat(toact ? to1 : \"\");\n      setlokasifilteract(false);\n    } else {\n      setlokasifilteract(true);\n      setlokasivalue(idlokasi);\n    }\n  }; //search range date\n\n\n  var onChangeRangeDate = function onChangeRangeDate(datestrings) {\n    if (typeof datestrings === 'undefined') {\n      // setdisplaydata(displaydata2)\n      window.location.href = \"/tickets?ticket_id=\".concat(namasearchact ? ticketid1 : \"\", \"&location_id=\").concat(lokasifilteract ? locationid1 : \"\", \"&status_id=\").concat(statusfilteract ? statusid1 : \"\", \"&from=&to=\");\n      setrangedatefilteract(false);\n      setfromact(false);\n      settoact(false);\n    } else {\n      setrangedatefilteract(true);\n      setfromact(true);\n      settoact(true);\n      setrangedatevalue(datestrings);\n      setfromvalue(moment(datestrings[0]).locale('id').format('YYYY-MM-DD'));\n      settovalue(moment(datestrings[1]).locale('id').format('YYYY-MM-DD'));\n    }\n  }; //search status\n\n\n  var onChangeStatus = function onChangeStatus(idstatus) {\n    if (typeof idstatus === 'undefined') {\n      // setdisplaydata(displaydata2)\n      window.location.href = \"/tickets?ticket_id=\".concat(namasearchact ? ticketid1 : \"\", \"&location_id=\").concat(lokasifilteract ? locationid1 : \"\", \"&status_id=&from=\").concat(fromact ? from1 : \"\", \"&to=\").concat(toact ? to1 : \"\");\n      setstatusfilteract(false);\n    } else {\n      setstatusfilteract(true);\n      setstatusvalue(idstatus);\n    }\n  };\n\n  var onFinalClick = function onFinalClick() {\n    // var datatemp = displaydata1\n    // if (rangedatefilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.asset_name.toLowerCase() === rangedatevalue.toLowerCase()\n    //         // return (flt.asset_name.toLowerCase().includes(assettypevalue.toLowerCase())) || (flt.asset_name.replaceAll(/\\s+\\/\\s+/g, \"/\").split(\"/\")[0] === namaasset)\n    //     })\n    // }\n    // if (lokasifilteract) {\n    //     datatemp = datatemp.filter(flt => flt.model_id === lokasivalue)\n    // }\n    // if (statusfilteract) {\n    //     datatemp = datatemp.filter(flt => flt.status_condition === statusvalue)\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.inventory_name.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // setdisplaydata(datatemp)\n    if (inputnumberfalse === false) {\n      window.location.href = \"/tickets?ticket_id=\".concat(namasearchact ? namavalue === null ? ticketid1 : namavalue : \"\", \"&location_id=\").concat(lokasifilteract ? lokasivalue === null ? locationid1 : lokasivalue : \"\", \"&status=\").concat(statusfilteract ? statusvalue === null ? statusid1 : statusvalue : \"\", \"&from=\").concat(fromact ? fromvalue === null ? from1 : fromvalue : \"\", \"&to=\").concat(toact ? tovalue === null ? to1 : tovalue : \"\");\n    } // setpraloading(true)\n    // fetch(`https://boiling-thicket-46501.herokuapp.com/getTickets?ticket_id=${namasearchact ? namavalue : \"\"}&location_id=${lokasifilteract ? lokasivalue : \"\"}&status_id=${statusfilteract ? statusvalue : \"\"}&from=${rangedatefilteract ? moment(rangedatevalue[0]).locale('id').format('YYYY-MM-DD') : \"\"}&to=${rangedatefilteract ? moment(rangedatevalue[1]).locale('id').format('YYYY-MM-DD') : \"\"}`, {\n    //     method: `GET`,\n    //     headers: {\n    //         'Authorization': JSON.parse(initProps),\n    //     },\n    // })\n    //     .then(res => res.json())\n    //     .then(res2 => {\n    //         res2.data.tickets.data.length === 0 ? setdisplaydata([]) : setdisplaydata(res2.data.tickets.data)\n    //         setpraloading(false)\n    //     })\n\n  }; //5.useEffect\n\n\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/\".concat(dataProfile.data.role === 1 ? \"getTickets\" : \"getClientTickets\", \"?ticket_id=\").concat(ticketid1, \"&location_id=\").concat(locationid1, \"&status_id=\").concat(statusid1, \"&from=\").concat(from1, \"&to=\").concat(to1), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setrawdata(res2.data);\n      setdisplayentiredata(res2.data);\n      setdisplaydata(res2.data.data);\n      setdisplaydata1(res2.data.data);\n      setdisplaydata2(res2.data.data);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/\".concat(dataProfile.data.role === 1 ? \"getTicketRelation\" : \"getClientTicketRelation\"), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var status_ticket_map = [];\n\n      if (dataProfile.data.role !== 1) {\n        for (var attr in res2.data.status_ticket) {\n          status_ticket_map.push(res2.data.status_ticket[attr]);\n        }\n\n        setticketrelations(_objectSpread(_objectSpread({}, res2.data), {}, {\n          status_ticket: status_ticket_map\n        }));\n      } else {\n        setticketrelations(res2.data);\n      }\n\n      setdefasset(namaasset);\n      setpraloading(false);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxs(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \" w-full grid grid-cols-1 md:grid-cols-4 border-gray-400 md:border-t md:border-b bg-white mb-5 px-4 py-5\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \" col-span-1 md:col-span-3 flex items-center mb-2 md:mb-0\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"font-bold text-2xl w-auto mr-14\",\n          children: \"Tickets\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mr-10\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center mb-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-blue-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"Open\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \" text-lg text-center\",\n            children: rawdata.open_tickets_count\n          })]\n        }), dataProfile.data.role === 1 && /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mr-10\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center mb-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-green-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"On Progress\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \" text-lg text-center\",\n            children: rawdata.on_progress_tickets_count\n          })]\n        }), dataProfile.data.role === 1 && /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mr-10\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center mb-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-yellow-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"On Hold\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \" text-lg text-center\",\n            children: rawdata.on_hold_tickets_count\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mr-10\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center mb-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-red-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"Cancel\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \" text-lg text-center\",\n            children: rawdata.canceled_tickets_count\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col mr-12\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center mb-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-gray-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"Closed\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \" text-lg text-center\",\n            children: rawdata.closed_tickets_count\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"flex items-center mb-2\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0 font-bold text-lg\",\n              children: \"Total Tiket\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \" font-bold text-xl text-center\",\n            children: rawdata.total_tickets\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n        children: [dataProfile.data.role === 1 ? /*#__PURE__*/_jsx(Link, {\n          href: '/tickets/histories',\n          children: /*#__PURE__*/_jsx(_Button, {\n            size: \"large\",\n            type: \"primary\",\n            style: {\n              marginRight: \"1rem\"\n            },\n            onClick: function onClick() {\n              rt.push(\"/tickets/histories\");\n            },\n            children: \"History\"\n          })\n        }) : /*#__PURE__*/_jsx(_Fragment, {\n          children: dataProfile.data.features.includes(108) && /*#__PURE__*/_jsx(Link, {\n            href: '/tickets/histories',\n            children: /*#__PURE__*/_jsx(_Button, {\n              size: \"large\",\n              type: \"primary\",\n              style: {\n                marginRight: \"1rem\"\n              },\n              onClick: function onClick() {\n                rt.push(\"/tickets/histories\");\n              },\n              children: \"History\"\n            })\n          })\n        }), dataProfile.data.role === 1 && /*#__PURE__*/_jsx(Link, {\n          href: '/tickets/exporting?closed=0',\n          children: /*#__PURE__*/_jsx(_Button, {\n            style: {\n              backgroundColor: \"gray\",\n              borderColor: \"gray\",\n              marginRight: \"1rem\"\n            },\n            size: \"large\",\n            type: \"primary\",\n            children: \"Export\"\n          })\n        }), /*#__PURE__*/_jsx(Link, {\n          href: '/tickets/create',\n          children: /*#__PURE__*/_jsx(_Button, {\n            size: \"large\",\n            type: \"primary\",\n            children: \"Buat Tiket\"\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n        children: [praloading ? null : /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex mb-8\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" w-full mr-1 grid grid-cols-12\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"col-span-3 mr-1 flex flex-col\",\n              children: [/*#__PURE__*/_jsx(_Input, {\n                defaultValue: ticketid1,\n                style: {\n                  width: \"100%\",\n                  marginRight: \"0.5rem\"\n                },\n                placeholder: \"Cari Ticket Number\",\n                onChange: onChangeSearch,\n                allowClear: true\n              }), inputnumberfalse && /*#__PURE__*/_jsx(\"p\", {\n                className: \"mb-0 text-xs text-red-400\",\n                children: \"Ticket number harus angka\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-3 mr-1\",\n              children: /*#__PURE__*/_jsx(_TreeSelect, {\n                defaultValue: namaasset === \"\" ? null : Number(defasset),\n                placeholder: \"Lokasi Problem\",\n                style: {\n                  width: \"100%\"\n                },\n                allowClear: true,\n                onChange: function onChange(value, label, extra) {\n                  if (typeof value === 'undefined') {\n                    onChangeLokasi();\n                  } else {\n                    onChangeLokasi(value);\n                  }\n                },\n                treeData: dataProfile.data.role === 1 ? [ticketrelations.companies] : [ticketrelations.companies.data],\n                treeDefaultExpandAll: true\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-3 mr-1\",\n              children: /*#__PURE__*/_jsx(_DatePicker.RangePicker, {\n                defaultValue: from1 === \"\" && to1 === \"\" ? null : [moment(from1), moment(to1)],\n                style: {\n                  width: \"100%\"\n                },\n                placeholder: [\"Tanggal Awal\", \"Tanggal Akhir\"],\n                onChange: function onChange(dates, datestrings) {\n                  if (datestrings[0] === '' && datestrings[1] === '') {\n                    onChangeRangeDate();\n                  } else {\n                    onChangeRangeDate(datestrings);\n                  }\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-2 mr-1\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                defaultValue: statusid1 === \"\" ? null : Number(statusid1),\n                placeholder: \"Status\",\n                style: {\n                  width: \"100%\"\n                },\n                allowClear: true,\n                onChange: function onChange(value) {\n                  if (typeof value === 'undefined') {\n                    onChangeStatus();\n                  } else {\n                    onChangeStatus(value);\n                  }\n                },\n                children: ticketrelations.status_ticket.map(function (docconds, idxconds) {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: docconds.id,\n                    children: docconds.name\n                  });\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" col-span-1\",\n              children: /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                style: {\n                  width: \"100%\"\n                },\n                onClick: onFinalClick,\n                children: /*#__PURE__*/_jsx(SearchOutlined, {})\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"px-6\",\n          children: /*#__PURE__*/_jsx(_Table, {\n            pagination: {\n              pageSize: 10,\n              total: displayentiredata.total,\n              onChange: function onChange(page, pageSize) {\n                setpraloading(true);\n                fetch(\"https://boiling-thicket-46501.herokuapp.com/\".concat(dataProfile.data.role === 1 ? \"getTickets\" : \"getClientTickets\", \"?page=\").concat(page, \"&rows=10&ticket_id=\").concat(ticketid1, \"&location_id=\").concat(locationid1, \"&status_id=\").concat(statusid1, \"&from=\").concat(from1, \"&to=\").concat(to1), {\n                  method: \"GET\",\n                  headers: {\n                    'Authorization': JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdisplayentiredata(res2.data.tickets);\n                  setdisplaydata(res2.data.tickets.data);\n                  setdisplaydata1(res2.data.tickets.data);\n                  setdisplaydata2(res2.data.tickets.data);\n                  setpraloading(false);\n                });\n              }\n            },\n            scroll: {\n              x: 200\n            },\n            dataSource: displaydata,\n            columns: column,\n            loading: praloading,\n            onRow: function onRow(record, rowIndex) {\n              return {\n                onMouseOver: function onMouseOver(event) {\n                  setrowstate(record.id);\n                },\n                onClick: function onClick(event) {\n                  // {\n                  //     [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                  dataProfile.data.role === 1 ? rt.push(\"/tickets/detail/\".concat(record.id)) : dataProfile.data.features.includes(109) && rt.push(\"/tickets/detail/\".concat(record.id)); //         :\n                  //         null\n                  // }\n                }\n              };\n            },\n            rowClassName: function rowClassName(record, idx) {\n              return record.id === rowstate ? \"cursor-pointer\" : \"\";\n            }\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default TicketsIndex;","map":null,"metadata":{},"sourceType":"module"}