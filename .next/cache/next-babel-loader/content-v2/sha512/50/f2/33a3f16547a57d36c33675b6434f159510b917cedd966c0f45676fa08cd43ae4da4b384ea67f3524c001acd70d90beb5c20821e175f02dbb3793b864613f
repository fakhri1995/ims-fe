{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _Drawer from \"antd/lib/drawer\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport _Table from \"antd/lib/table\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/tmp/mig/ims-fe/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _Button from \"antd/lib/button\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { DeleteOutlined, EditOutlined, SelectOutlined } from \"@ant-design/icons\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nexport var __N_SSP = true;\nexport var Careers = function Careers(_ref) {\n  var _dataCareers$data;\n\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      dataCareers = _ref.dataCareers,\n      sidemenu = _ref.sidemenu;\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1); //Definisi table\n\n  var columnsFeature = [{\n    title: \"No\",\n    dataIndex: \"nomor\",\n    key: \"nomor\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"a\", {\n            href: \"#\",\n            onClick: function onClick() {\n              setdrawedit(true);\n              setdataedit({\n                id: record.id,\n                position_name: record.position_name,\n                job_description: record.job_description,\n                job_category: record.job_category,\n                register_link: record.register_link\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"h1\", {\n              className: \"hover:text-gray-500\",\n              children: record.nomor\n            })\n          })\n        })\n      };\n    }\n  }, {\n    title: \"Position Name\",\n    dataIndex: \"position_name\",\n    key: \"position_name\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"p\", {\n            className: \" text-base\",\n            children: record.position_name\n          })\n        })\n      };\n    }\n  }, {\n    title: \"Description\",\n    dataIndex: \"job_description\",\n    key: \"job_description\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"p\", {\n            className: \"text-xs\",\n            children: record.job_description\n          })\n        })\n      };\n    }\n  }, {\n    title: \"Category\",\n    dataIndex: \"job_category\",\n    key: \"job_category\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"text-xs\",\n            children: record.job_category\n          })\n        })\n      };\n    }\n  }, {\n    title: \"Link\",\n    dataIndex: \"register_link\",\n    key: \"register_link\",\n    align: \"center\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(\"a\", {\n            href: record.register_link,\n            target: \"_blank\",\n            children: /*#__PURE__*/_jsxs(\"h1\", {\n              className: \" text-blue-400 hover:text-blue-800 text-xs\",\n              children: [record.register_link, \" \", /*#__PURE__*/_jsx(SelectOutlined, {})]\n            })\n          })\n        })\n      };\n    }\n  }, {\n    dataIndex: \"status\",\n    key: \"status\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \" flex\",\n          children: [/*#__PURE__*/_jsx(_Button, {\n            onClick: function onClick() {\n              setdrawedit(true);\n              setdataedit({\n                id: record.id,\n                position_name: record.position_name,\n                job_description: record.job_description,\n                job_category: record.job_category,\n                register_link: record.register_link\n              });\n            },\n            style: {\n              paddingTop: \"0\",\n              paddingBottom: \"0.3rem\",\n              marginRight: \"1rem\"\n            },\n            children: /*#__PURE__*/_jsx(EditOutlined, {})\n          }), /*#__PURE__*/_jsx(_Button, {\n            danger: true,\n            onClick: function onClick() {\n              setmodaldelete(true);\n              setdatadelete(_objectSpread(_objectSpread({}, datadelete), {}, {\n                id: parseInt(record.id)\n              }));\n              setfeatureselected(record.position_name);\n            },\n            style: {\n              paddingTop: \"0\",\n              paddingBottom: \"0.3rem\"\n            },\n            children: /*#__PURE__*/_jsx(DeleteOutlined, {})\n          })]\n        })\n      };\n    }\n  }]; //useState\n\n  var datatemp = (_dataCareers$data = dataCareers.data) !== null && _dataCareers$data !== void 0 ? _dataCareers$data : [];\n  var dataCareersMap = datatemp.map(function (doc, idx) {\n    return _objectSpread(_objectSpread({}, doc), {}, {\n      nomor: idx + 1\n    });\n  }); //create\n\n  var _useState = useState(false),\n      drawcreate = _useState[0],\n      setdrawcreate = _useState[1];\n\n  var _useState2 = useState(false),\n      loadingcreate = _useState2[0],\n      setloadingcreate = _useState2[1];\n\n  var _useState3 = useState({\n    position_name: \"\",\n    job_description: \"\",\n    job_category: \"\",\n    register_link: \"\"\n  }),\n      datacreate = _useState3[0],\n      setdatacreate = _useState3[1]; //update\n\n\n  var _useState4 = useState(false),\n      drawedit = _useState4[0],\n      setdrawedit = _useState4[1];\n\n  var _useState5 = useState(false),\n      loadingedit = _useState5[0],\n      setloadingedit = _useState5[1];\n\n  var _useState6 = useState({\n    id: 0,\n    position_name: \"\",\n    job_description: \"\",\n    job_category: \"\",\n    register_link: \"\"\n  }),\n      dataedit = _useState6[0],\n      setdataedit = _useState6[1]; //delete\n\n\n  var _useState7 = useState(false),\n      modaldelete = _useState7[0],\n      setmodaldelete = _useState7[1];\n\n  var _useState8 = useState(false),\n      loadingdelete = _useState8[0],\n      setloadingdelete = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      featureselected = _useState9[0],\n      setfeatureselected = _useState9[1];\n\n  var _useState10 = useState({\n    id: 0\n  }),\n      datadelete = _useState10[0],\n      setdatadelete = _useState10[1]; //handler\n\n\n  var handleCreate = function handleCreate() {\n    setloadingcreate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addCareer\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datacreate)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setdatacreate({\n          position_name: \"\",\n          job_description: \"\",\n          job_category: \"\",\n          register_link: \"\"\n        });\n        setTimeout(function () {\n          setloadingcreate(false);\n          setdrawcreate(false);\n          rt.push(\"/admin/careers\");\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        setloadingcreate(false);\n        setdrawcreate(false);\n      }\n    });\n  };\n\n  var handleEdit = function handleEdit() {\n    setloadingedit(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/updateCareer\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataedit)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setdataedit({\n          id: 0,\n          position_name: \"\",\n          job_description: \"\",\n          job_category: \"\",\n          register_link: \"\"\n        });\n        setTimeout(function () {\n          setloadingedit(false);\n          setdrawedit(false);\n          rt.push(\"/admin/careers\");\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        setloadingedit(false);\n        setdrawedit(false);\n      }\n    });\n  };\n\n  var handleDelete = function handleDelete() {\n    setloadingdelete(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/deleteCareer\"), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datadelete)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setdatadelete({\n          id: 0\n        });\n        setTimeout(function () {\n          setloadingdelete(false);\n          setmodaldelete(false);\n          rt.push(\"/admin/careers\");\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setloadingdelete(false);\n        setmodaldelete(false);\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    sidemenu: sidemenu,\n    st: st,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full grid grid-cols-5 border-t border-opacity-30 border-gray-500 bg-white\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-span-5 border-b border-opacity-30 border-gray-400 flex items-center justify-between px-0 py-4 md:p-4 mb-5\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"font-bold\",\n          children: \"Careers\"\n        }), /*#__PURE__*/_jsx(_Button, {\n          type: \"primary\",\n          size: \"large\",\n          onClick: function onClick() {\n            setdrawcreate(true);\n          },\n          children: \"Add New\"\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-span-5 p-0 md:p-5 flex flex-col\",\n        children: /*#__PURE__*/_jsx(_Table, {\n          columns: columnsFeature,\n          dataSource: dataCareersMap,\n          pagination: {\n            pageSize: 8\n          },\n          scroll: {\n            x: 300\n          }\n        })\n      })]\n    }), /*#__PURE__*/_jsx(_Drawer, {\n      title: \"Add A New Career\",\n      maskClosable: false,\n      visible: drawcreate,\n      onClose: function onClose() {\n        setdrawcreate(false);\n      },\n      width: 380,\n      destroyOnClose: true,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex flex-col\",\n        children: /*#__PURE__*/_jsxs(_Form, {\n          layout: \"vertical\",\n          initialValues: datacreate,\n          onFinish: handleCreate,\n          children: [/*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Position Name\",\n            name: \"position_name\",\n            rules: [{\n              required: true,\n              message: \"Position Name wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input, {\n              defaultValue: datacreate.position_name,\n              onChange: function onChange(e) {\n                setdatacreate(_objectSpread(_objectSpread({}, datacreate), {}, {\n                  position_name: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Description\",\n            name: \"job_description\",\n            rules: [{\n              required: true,\n              message: \"Description Job wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input.TextArea, {\n              defaultValue: datacreate.job_description,\n              onChange: function onChange(e) {\n                setdatacreate(_objectSpread(_objectSpread({}, datacreate), {}, {\n                  job_description: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Category\",\n            name: \"job_category\",\n            rules: [{\n              required: true,\n              message: \"Category wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input, {\n              defaultValue: datacreate.job_category,\n              onChange: function onChange(e) {\n                setdatacreate(_objectSpread(_objectSpread({}, datacreate), {}, {\n                  job_category: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Register Link\",\n            name: \"register_link\",\n            rules: [{\n              required: true,\n              message: \"Register Link wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input, {\n              defaultValue: datacreate.register_link,\n              onChange: function onChange(e) {\n                setdatacreate(_objectSpread(_objectSpread({}, datacreate), {}, {\n                  register_link: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex justify-end\",\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setdrawcreate(false);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Cancel\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              htmlType: \"submit\",\n              type: \"primary\",\n              loading: loadingcreate,\n              children: \"Save\"\n            })]\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(_Drawer, {\n      title: \"Edit Career\",\n      maskClosable: false,\n      visible: drawedit,\n      onClose: function onClose() {\n        setdrawedit(false);\n      },\n      width: 380,\n      destroyOnClose: true,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex flex-col\",\n        children: /*#__PURE__*/_jsxs(_Form, {\n          layout: \"vertical\",\n          initialValues: dataedit,\n          onFinish: handleEdit,\n          children: [/*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Position Name\",\n            name: \"position_name\",\n            rules: [{\n              required: true,\n              message: \"Position Name wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input, {\n              defaultValue: dataedit.position_name,\n              onChange: function onChange(e) {\n                setdataedit(_objectSpread(_objectSpread({}, dataedit), {}, {\n                  position_name: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Description\",\n            name: \"job_description\",\n            rules: [{\n              required: true,\n              message: \"Description Job wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input.TextArea, {\n              defaultValue: dataedit.job_description,\n              onChange: function onChange(e) {\n                setdataedit(_objectSpread(_objectSpread({}, dataedit), {}, {\n                  job_description: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Category\",\n            name: \"job_category\",\n            rules: [{\n              required: true,\n              message: \"Category wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input, {\n              defaultValue: dataedit.job_category,\n              onChange: function onChange(e) {\n                setdataedit(_objectSpread(_objectSpread({}, dataedit), {}, {\n                  job_category: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsx(_Form.Item, {\n            label: \"Register Link\",\n            name: \"register_link\",\n            rules: [{\n              required: true,\n              message: \"Register Link wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsx(_Input, {\n              defaultValue: dataedit.register_link,\n              onChange: function onChange(e) {\n                setdataedit(_objectSpread(_objectSpread({}, dataedit), {}, {\n                  register_link: e.target.value\n                }));\n              }\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex justify-end\",\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setdrawedit(false);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Cancel\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              htmlType: \"submit\",\n              type: \"primary\",\n              loading: loadingedit,\n              children: \"Save\"\n            })]\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsxs(_Modal, {\n      title: \"Konfirmasi hapus career\",\n      visible: modaldelete,\n      okButtonProps: {\n        disabled: loadingdelete\n      },\n      onCancel: function onCancel() {\n        setmodaldelete(false);\n      },\n      onOk: handleDelete,\n      maskClosable: false,\n      style: {\n        top: \"3rem\"\n      },\n      width: 500,\n      destroyOnClose: true,\n      children: [\"Yakin ingin hapus career dengan posisi \", featureselected, \"?\"]\n    })]\n  });\n};\nexport default Careers;","map":null,"metadata":{},"sourceType":"module"}