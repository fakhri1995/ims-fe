{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _Empty from \"antd/lib/empty\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Select from \"antd/lib/select\";\nimport _Input from \"antd/lib/input\";\nimport _Spin from \"antd/lib/spin\";\nimport _Button from \"antd/lib/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _Collapse from \"antd/lib/collapse\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/update/[itemId].js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { QuestionCircleOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../components/layout-dashboard2\";\nimport st from \"../../../components/layout-dashboard.module.css\";\n\nvar ItemUpdate = function ItemUpdate(_ref) {\n  _s();\n\n  var _updatedata$model_inv;\n\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu,\n      itemid = _ref.itemid;\n  // 1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 2);\n  pathArr[pathArr.length - 1] = \"Ubah Item\";\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      instanceForm = _Form$useForm2[0];\n\n  var _Form$useForm3 = _Form.useForm(),\n      _Form$useForm4 = _slicedToArray(_Form$useForm3, 1),\n      instanceForm2 = _Form$useForm4[0];\n\n  var Panel = _Collapse.Panel; //2.useState\n\n  var _useState = useState({\n    id: Number(itemid),\n    model_id: \"\",\n    is_consumable: false,\n    vendor_id: \"\",\n    inventory_name: \"\",\n    status_condition: \"\",\n    status_usage: \"\",\n    serial_number: \"\",\n    location: \"\",\n    is_exist: true,\n    deskripsi: \"\",\n    manufacturer_id: \"\",\n    mig_id: \"\",\n    notes: \"\",\n    additional_attributes: [],\n    inventory_values: []\n  }),\n      updatedata = _useState[0],\n      setupdatedata = _useState[1];\n\n  var _useState2 = useState({\n    models: [],\n    assets: [],\n    manufacturers: [],\n    status_condition: [],\n    status_usage: [],\n    vendors: [],\n    companies: [],\n    tree_companies: []\n  }),\n      invrelations = _useState2[0],\n      setinvrelations = _useState2[1];\n\n  var _useState3 = useState([]),\n      modeldata = _useState3[0],\n      setmodeldata = _useState3[1];\n\n  var _useState4 = useState(false),\n      snitem = _useState4[0],\n      setsnitem = _useState4[1];\n\n  var _useState5 = useState(true),\n      manuffielditem = _useState5[0],\n      setmanuffielditem = _useState5[1];\n\n  var _useState6 = useState(true),\n      praloading = _useState6[0],\n      setpraloading = _useState6[1];\n\n  var _useState7 = useState(false),\n      loadingupdate = _useState7[0],\n      setloadingupdate = _useState7[1];\n\n  var _useState8 = useState(false),\n      modalupdate = _useState8[0],\n      setmodalupdate = _useState8[1];\n\n  var _useState9 = useState(true),\n      disabledfield = _useState9[0],\n      setdisabledfield = _useState9[1]; //handler\n\n\n  var handleUpdateItem = function handleUpdateItem() {\n    var invcolumns = updatedata.inventory_values.map(function (doc, idx) {\n      if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n        return _objectSpread(_objectSpread({}, doc), {}, {\n          value: JSON.stringify(doc.value)\n        });\n      } else {\n        return _objectSpread({}, doc);\n      }\n    });\n\n    var finalres = _objectSpread(_objectSpread({}, updatedata), {}, {\n      inventory_values: invcolumns\n    });\n\n    setloadingupdate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/updateInventory\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(finalres)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingupdate(false);\n      setmodalupdate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Item berhasil diubah\",\n          duration: 3\n        });\n\n        rt.push(\"/items/detail/\".concat(itemid));\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getInventory?id=\").concat(itemid), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var t = {};\n\n      for (var prop in res2.data) {\n        if (prop === \"additional_attributes\") {\n          t[prop] = res2.data[prop].map(function (doc, idx) {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return _objectSpread(_objectSpread({}, doc), {}, {\n                value: JSON.parse(doc.value)\n              });\n            } else {\n              return _objectSpread({}, doc);\n            }\n          });\n        } else {\n          t[prop] = res2.data[prop];\n        }\n      }\n\n      setdisabledfield(function (prev) {\n        if (t.additional_attributes.filter(function (doc) {\n          return doc.required;\n        }).every(function (docsome) {\n          return docsome.value !== null || docsome.value !== \"\" || docsome.value !== \"-\" || docsome.value[\"default\"] !== \"-\" || docsome.value[\"default\"].length !== 0;\n        })) {\n          return false;\n        } else {\n          return true;\n        }\n      });\n      setupdatedata(_objectSpread(_objectSpread({}, t), {}, {\n        id: Number(itemid),\n        inventory_values: [],\n        notes: \"\"\n      }));\n      setpraloading(false);\n      return res2.data.model_id;\n    }).then(function (res3) {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModels?rows=50\"), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setmodeldata(res2.data.data);\n        setsnitem(res2.data.data.serial_number === null ? false : true);\n      });\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getInventoryRelations\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setinvrelations(res2.data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8 p-3\",\n        children: /*#__PURE__*/_jsxDEV(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" col-span-4 flex justify-between pt-4 border-t-2 border-b-2 bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-bold text-xl py-2\",\n              children: [\"Form Ubah Item - \", updatedata.mig_id, \" -\", \" \", (_updatedata$model_inv = updatedata.model_inventory) === null || _updatedata$model_inv === void 0 ? void 0 : _updatedata$model_inv.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                href: \"/items/detail/\".concat(itemid),\n                children: /*#__PURE__*/_jsxDEV(_Button, {\n                  type: \"default\"\n                  /*onClick={() => { console.log(updatedata); console.log(disabledfield) }}*/\n                  ,\n                  children: \"Batal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                disabled: disabledfield,\n                type: \"primary\",\n                onClick: function onClick() {\n                  instanceForm.submit();\n                },\n                children: \"Simpan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-4 mb-6 py-3 px-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow-md border p-5 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, _this) : /*#__PURE__*/_jsxDEV(_Form, {\n            form: instanceForm,\n            layout: \"vertical\",\n            onFinish: function onFinish() {\n              setmodalupdate(true);\n            },\n            initialValues: updatedata,\n            children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"model_id\",\n              label: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-2971843529\" + \" \" + \"flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-2971843529\" + \" \" + \"judulModel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"jsx-2971843529\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Nama Model\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"2971843529\",\n                  children: \".judulModel.jsx-2971843529::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL3VwZGF0ZS9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxUnlCLEFBRzZELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy91cGRhdGUvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBRdWVzdGlvbkNpcmNsZU91dGxpbmVkIH0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIENoZWNrYm94LFxuICBDb2xsYXBzZSxcbiAgRGF0ZVBpY2tlcixcbiAgRW1wdHksXG4gIEZvcm0sXG4gIElucHV0LFxuICBJbnB1dE51bWJlcixcbiAgTW9kYWwsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGltZWxpbmUsXG4gIFRyZWVTZWxlY3QsXG4gIG5vdGlmaWNhdGlvbixcbn0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3RpY2t5IGZyb20gXCJ3aWwtcmVhY3Qtc3RpY2t5XCI7XG5cbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZDJcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgSXRlbVVwZGF0ZSA9ICh7IGluaXRQcm9wcywgZGF0YVByb2ZpbGUsIHNpZGVtZW51LCBpdGVtaWQgfSkgPT4ge1xuICAvLyAxLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDIsIDIpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggSXRlbVwiO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtXSA9IEZvcm0udXNlRm9ybSgpO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtMl0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgeyBQYW5lbCB9ID0gQ29sbGFwc2U7XG5cbiAgLy8yLnVzZVN0YXRlXG4gIGNvbnN0IFt1cGRhdGVkYXRhLCBzZXR1cGRhdGVkYXRhXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgbG9jYXRpb246IFwiXCIsXG4gICAgaXNfZXhpc3Q6IHRydWUsXG4gICAgZGVza3JpcHNpOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICBtaWdfaWQ6IFwiXCIsXG4gICAgbm90ZXM6IFwiXCIsXG4gICAgYWRkaXRpb25hbF9hdHRyaWJ1dGVzOiBbXSxcbiAgICBpbnZlbnRvcnlfdmFsdWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXSxcbiAgICBhc3NldHM6IFtdLFxuICAgIG1hbnVmYWN0dXJlcnM6IFtdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczogW10sXG4gIH0pO1xuICBjb25zdCBbbW9kZWxkYXRhLCBzZXRtb2RlbGRhdGFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbc25pdGVtLCBzZXRzbml0ZW1dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbWFudWZmaWVsZGl0ZW0sIHNldG1hbnVmZmllbGRpdGVtXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmd1cGRhdGUsIHNldGxvYWRpbmd1cGRhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWx1cGRhdGUsIHNldG1vZGFsdXBkYXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkZmllbGQsIHNldGRpc2FibGVkZmllbGRdID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgLy9oYW5kbGVyXG4gIGNvbnN0IGhhbmRsZVVwZGF0ZUl0ZW0gPSAoKSA9PiB7XG4gICAgY29uc3QgaW52Y29sdW1ucyA9IHVwZGF0ZWRhdGEuaW52ZW50b3J5X3ZhbHVlcy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoZG9jLnZhbHVlKSxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGZpbmFscmVzID0ge1xuICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgIGludmVudG9yeV92YWx1ZXM6IGludmNvbHVtbnMsXG4gICAgfTtcbiAgICBzZXRsb2FkaW5ndXBkYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZmluYWxyZXMpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ3VwZGF0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsdXBkYXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcnQucHVzaChgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICBpZiAocHJvcCA9PT0gXCJhZGRpdGlvbmFsX2F0dHJpYnV0ZXNcIikge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnBhcnNlKGRvYy52YWx1ZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRbcHJvcF0gPSByZXMyLmRhdGFbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldGRpc2FibGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0LmFkZGl0aW9uYWxfYXR0cmlidXRlc1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2MpID0+IGRvYy5yZXF1aXJlZClcbiAgICAgICAgICAgICAgLmV2ZXJ5KFxuICAgICAgICAgICAgICAgIChkb2Nzb21lKSA9PlxuICAgICAgICAgICAgICAgICAgZG9jc29tZS52YWx1ZSAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgZG9jc29tZS52YWx1ZSAhPT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgZG9jc29tZS52YWx1ZSAhPT0gXCItXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY3NvbWUudmFsdWUuZGVmYXVsdCAhPT0gXCItXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY3NvbWUudmFsdWUuZGVmYXVsdC5sZW5ndGggIT09IDBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAuLi50LFxuICAgICAgICAgIGlkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICBpbnZlbnRvcnlfdmFsdWVzOiBbXSxcbiAgICAgICAgICBub3RlczogXCJcIixcbiAgICAgICAgfSk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gcmVzMi5kYXRhLm1vZGVsX2lkO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXMzKSA9PiB7XG4gICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHM/cm93cz01MGAsIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgIHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgICAgICBzZXRzbml0ZW0ocmVzMi5kYXRhLmRhdGEuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IGZhbHNlIDogdHJ1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRJbnZlbnRvcnlSZWxhdGlvbnNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPExheW91dFxuICAgICAgdG9rPXtpbml0UHJvcHN9XG4gICAgICBkYXRhUHJvZmlsZT17ZGF0YVByb2ZpbGV9XG4gICAgICBzaWRlbWVudT17c2lkZW1lbnV9XG4gICAgICBzdD17c3R9XG4gICAgICBwYXRoQXJyPXtwYXRoQXJyfVxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtYXV0byBncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy00XCJcbiAgICAgICAgaWQ9XCJjcmVhdGVBc3NldHNXcmFwcGVyXCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLTggcC0zXCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHQtNCBib3JkZXItdC0yIGJvcmRlci1iLTIgYmctd2hpdGVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggSXRlbSAtIHt1cGRhdGVkYXRhLm1pZ19pZH0gLXtcIiBcIn1cbiAgICAgICAgICAgICAgICB7dXBkYXRlZGF0YS5tb2RlbF9pbnZlbnRvcnk/Lm5hbWV9XG4gICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICA8TGluayBocmVmPXtgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIiAvKm9uQ2xpY2s9eygpID0+IHsgY29uc29sZS5sb2codXBkYXRlZGF0YSk7IGNvbnNvbGUubG9nKGRpc2FibGVkZmllbGQpIH19Ki9cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VGb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLTYgcHktMyBweC0xMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1cGRhdGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVzPXt1cGRhdGVkYXRhfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgey8qIDxGb3JtLkl0ZW0gbmFtZT1cIm1vZGVsX2lkXCIgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2RlbCB3YWppYiBkaXBpbGloJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5tb2RlbF9pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsZGF0YS5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPiAqL31cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICBuYW1lPVwibW9kZWxfaWRcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e1xuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bE1vZGVsXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbWwtMVwiPk5hbWEgTW9kZWw8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bE1vZGVsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGJnLWdyYXktMTAwIGJvcmRlciBwLTIgaC04XCI+XG4gICAgICAgICAgICAgICAgICAgIHt1cGRhdGVkYXRhLm1vZGVsX2ludmVudG9yeS5uYW1lfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm1vZGVsX2lkXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1sLTFcIj5Bc3NldCBUeXBlPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgcm91bmRlZC1zbSBmbGV4IGl0ZW1zLWNlbnRlciBiZy1ncmF5LTEwMCBib3JkZXIgcC0yIGgtOFwiPlxuICAgICAgICAgICAgICAgICAgICB7dXBkYXRlZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIHsvKiA8Rm9ybS5JdGVtIG5hbWU9XCJpbnZlbnRvcnlfbmFtZVwiIGxhYmVsPVwiTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdOYW1hIEl0ZW0gd2FqaWIgZGlpc2knLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBuYW1lPVwiaW52ZW50b3J5X25hbWVcIiBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuaW52ZW50b3J5X25hbWV9IG9uQ2hhbmdlPXsoZSkgPT4geyBzZXR1cGRhdGVkYXRhKHsgLi4udXBkYXRlZGF0YSwgaW52ZW50b3J5X25hbWU6IGUudGFyZ2V0LnZhbHVlIH0pIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT4gKi99XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm1pZ19pZFwiXG4gICAgICAgICAgICAgICAgICBsYWJlbD1cIk1JRyBJRFwiXG4gICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNSUcgSUQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJtaWdfaWRcIlxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEubWlnX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHsgLi4udXBkYXRlZGF0YSwgbWlnX2lkOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cInN0YXR1c19jb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9XCJLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIktvbmRpc2kgd2FqaWIgZGlwaWxpaFwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5zdGF0dXNfY29uZGl0aW9ufVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7IC4uLnVwZGF0ZWRhdGEsIHN0YXR1c19jb25kaXRpb246IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyZWVuLTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMSBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctcmVkLTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICBuYW1lPVwic3RhdHVzX3VzYWdlXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPVwiU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIHdhamliIGRpcGlsaWhcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuc3RhdHVzX3VzYWdlfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7IC4uLnVwZGF0ZWRhdGEsIHN0YXR1c191c2FnZTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsxfT5JbiBVc2VkPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+SW4gU3RvY2s8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5SZXBsYWNlbWVudDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIHtzbml0ZW0gPyAoXG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJzZXJpYWxfbnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJTZXJpYWwgTnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU2VyaWFsIE51bWJlciB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJzZXJpYWxfbnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAuLi51cGRhdGVkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxfbnVtYmVyOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwic2VyaWFsX251bWJlclwiIGxhYmVsPVwiU2VyaWFsIE51bWJlclwiPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuc2VyaWFsX251bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwic2VyaWFsX251bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsX251bWJlcjogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJsb2NhdGlvblwiIGxhYmVsPVwiTG9jYXRpb25cIj5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5sb2NhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1tpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMua2V5XX1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBMb2NhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoeyAuLi51cGRhdGVkYXRhLCBsb2NhdGlvbjogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cInZlbmRvcl9pZFwiIGxhYmVsPVwiVmVuZG9yXCI+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS52ZW5kb3JfaWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHsgLi4udXBkYXRlZGF0YSwgdmVuZG9yX2lkOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2ludnJlbGF0aW9ucy52ZW5kb3JzLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIHttYW51ZmZpZWxkaXRlbSA/IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiIGxhYmVsPVwiTWFudWZhY3R1cmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEubWFudWZhY3R1cmVyX2lkfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7aW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbCkgPT4gZG9jZmlsLmRlbGV0ZWRfYXQgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2tyaXBzaVwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt1cGRhdGVkYXRhLmRlc2tyaXBzaX1cbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2tyaXBzaVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2tyaXBzaTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItNiBweS0zIHB4LTEyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zXCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBJdGVtPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHt1cGRhdGVkYXRhLmFkZGl0aW9uYWxfYXR0cmlidXRlcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgZm9ybT17aW5zdGFuY2VGb3JtMn0+XG4gICAgICAgICAgICAgICAgICAgIHt1cGRhdGVkYXRhLmFkZGl0aW9uYWxfYXR0cmlidXRlcy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKGRvY2ludnZhbHVlLCBpZHhpbnZ2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY2ludnZhbHVlLnJlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17ZG9jaW52dmFsdWUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1sLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogYHJlZGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2k6IGRvY2ludnZhbHVlLnZhbHVlLm9wc2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tpZHhmaWVsZF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaTogZG9jaW52dmFsdWUudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vcHNpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLnZhbHVlLm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MyLCBpZHgyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2RvYzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtpZHgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlwaWxpaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUudmFsdWUub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzLCBpZHgzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NuYW1lKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbmFtZS5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIxXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIxLjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMS4yXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dG9yZW1vdmUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0b3JlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyLjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tpZHhmaWVsZF0udmFsdWUuZGVmYXVsdC5wdXNoKGlkeDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMi4yXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dG9yZW1vdmUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZS5kZWZhdWx0LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUuZGVmYXVsdC5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dG9yZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jM308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaXBpbGloXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qc3R5bGU9e2R5bmFtaWNmaWVsZGl0ZW1baWR4aW52dmFsdWVdLnZhbHVlID09PSBcIlwiID8geyBib3JkZXJDb2xvcjogYHJlZGAgfSA6IG51bGx9Ki8gZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1vbWVudChkb2NpbnZ2YWx1ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGRhdGUsIGRhdGVzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZXN0cmluZyA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVzdHJpbmcgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGVzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZGF0ZXN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlzYWJsZWRmaWVsZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiIHRleHQtcmVkLTUwMCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLm5hbWV9IGhhcnVzIGRpcGlsaWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlpc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcIlwiIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiXCIgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gYCR7dmFsdWV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaWlzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaWlzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJTdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaWlzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtkb2NpbnZ2YWx1ZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2RvY2ludnZhbHVlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID0gdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tpZHhmaWVsZF0udmFsdWUuZGVmYXVsdCA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaTogZG9jaW52dmFsdWUudmFsdWUub3BzaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbaWR4ZmllbGRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2k6IGRvY2ludnZhbHVlLnZhbHVlLm9wc2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS52YWx1ZS5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYzIsIGlkeDIpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2RvYzJ9IHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUudmFsdWUub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzLCBpZHgzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY25hbWUpID0+IGRvY25hbWUuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjEuMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjEuMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0b3JlbW92ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dG9yZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMi4xXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVtcC5pbnZlbnRvcnlfdmFsdWVzW2lkeGZpZWxkXS52YWx1ZS5kZWZhdWx0LnB1c2goaWR4MylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjIuMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0b3JlbW92ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlLmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlLmRlZmF1bHQuc3BsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0b3JlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MzfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1vbWVudChkb2NpbnZ2YWx1ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZGF0ZSwgZGF0ZXN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRlc3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVzdHJpbmcgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkYXRlc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBkYXRlc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jaW52dmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBgJHt2YWx1ZX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jaW52dmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiU3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID0gdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5ndWJhaCBpdGVtIFwie3VwZGF0ZWRhdGEuaW52ZW50b3J5X25hbWV9XCI/XG4gICAgICAgICAgPC9oMT5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbHVwZGF0ZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVwZGF0ZShmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlVXBkYXRlSXRlbX1cbiAgICAgICAgb2tCdXR0b25Qcm9wcz17eyBsb2FkaW5nOiBsb2FkaW5ndXBkYXRlIH19XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICB0ZW1wLm5vdGVzID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIGNvbnN0IGl0ZW1pZCA9IHBhcmFtcy5pdGVtSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtVXBkYXRlO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/update/[itemId].js */\"\n                }, void 0, false, void 0, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 21\n              }, _this),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\",\n                children: updatedata.model_inventory.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"model_id\",\n              label: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-2020802904\" + \" \" + \"flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-2020802904\" + \" \" + \"judulField\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"jsx-2020802904\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Asset Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"2020802904\",\n                  children: \".judulField.jsx-2020802904::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL3VwZGF0ZS9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwU3lCLEFBRzZELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy91cGRhdGUvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBRdWVzdGlvbkNpcmNsZU91dGxpbmVkIH0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIENoZWNrYm94LFxuICBDb2xsYXBzZSxcbiAgRGF0ZVBpY2tlcixcbiAgRW1wdHksXG4gIEZvcm0sXG4gIElucHV0LFxuICBJbnB1dE51bWJlcixcbiAgTW9kYWwsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGltZWxpbmUsXG4gIFRyZWVTZWxlY3QsXG4gIG5vdGlmaWNhdGlvbixcbn0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3RpY2t5IGZyb20gXCJ3aWwtcmVhY3Qtc3RpY2t5XCI7XG5cbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZDJcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgSXRlbVVwZGF0ZSA9ICh7IGluaXRQcm9wcywgZGF0YVByb2ZpbGUsIHNpZGVtZW51LCBpdGVtaWQgfSkgPT4ge1xuICAvLyAxLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDIsIDIpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggSXRlbVwiO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtXSA9IEZvcm0udXNlRm9ybSgpO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtMl0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgeyBQYW5lbCB9ID0gQ29sbGFwc2U7XG5cbiAgLy8yLnVzZVN0YXRlXG4gIGNvbnN0IFt1cGRhdGVkYXRhLCBzZXR1cGRhdGVkYXRhXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgbG9jYXRpb246IFwiXCIsXG4gICAgaXNfZXhpc3Q6IHRydWUsXG4gICAgZGVza3JpcHNpOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICBtaWdfaWQ6IFwiXCIsXG4gICAgbm90ZXM6IFwiXCIsXG4gICAgYWRkaXRpb25hbF9hdHRyaWJ1dGVzOiBbXSxcbiAgICBpbnZlbnRvcnlfdmFsdWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXSxcbiAgICBhc3NldHM6IFtdLFxuICAgIG1hbnVmYWN0dXJlcnM6IFtdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczogW10sXG4gIH0pO1xuICBjb25zdCBbbW9kZWxkYXRhLCBzZXRtb2RlbGRhdGFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbc25pdGVtLCBzZXRzbml0ZW1dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbWFudWZmaWVsZGl0ZW0sIHNldG1hbnVmZmllbGRpdGVtXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmd1cGRhdGUsIHNldGxvYWRpbmd1cGRhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWx1cGRhdGUsIHNldG1vZGFsdXBkYXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkZmllbGQsIHNldGRpc2FibGVkZmllbGRdID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgLy9oYW5kbGVyXG4gIGNvbnN0IGhhbmRsZVVwZGF0ZUl0ZW0gPSAoKSA9PiB7XG4gICAgY29uc3QgaW52Y29sdW1ucyA9IHVwZGF0ZWRhdGEuaW52ZW50b3J5X3ZhbHVlcy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoZG9jLnZhbHVlKSxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGZpbmFscmVzID0ge1xuICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgIGludmVudG9yeV92YWx1ZXM6IGludmNvbHVtbnMsXG4gICAgfTtcbiAgICBzZXRsb2FkaW5ndXBkYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZmluYWxyZXMpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ3VwZGF0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsdXBkYXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcnQucHVzaChgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICBpZiAocHJvcCA9PT0gXCJhZGRpdGlvbmFsX2F0dHJpYnV0ZXNcIikge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnBhcnNlKGRvYy52YWx1ZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRbcHJvcF0gPSByZXMyLmRhdGFbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldGRpc2FibGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0LmFkZGl0aW9uYWxfYXR0cmlidXRlc1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2MpID0+IGRvYy5yZXF1aXJlZClcbiAgICAgICAgICAgICAgLmV2ZXJ5KFxuICAgICAgICAgICAgICAgIChkb2Nzb21lKSA9PlxuICAgICAgICAgICAgICAgICAgZG9jc29tZS52YWx1ZSAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgZG9jc29tZS52YWx1ZSAhPT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgZG9jc29tZS52YWx1ZSAhPT0gXCItXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY3NvbWUudmFsdWUuZGVmYXVsdCAhPT0gXCItXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY3NvbWUudmFsdWUuZGVmYXVsdC5sZW5ndGggIT09IDBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAuLi50LFxuICAgICAgICAgIGlkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICBpbnZlbnRvcnlfdmFsdWVzOiBbXSxcbiAgICAgICAgICBub3RlczogXCJcIixcbiAgICAgICAgfSk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gcmVzMi5kYXRhLm1vZGVsX2lkO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXMzKSA9PiB7XG4gICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHM/cm93cz01MGAsIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgIHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgICAgICBzZXRzbml0ZW0ocmVzMi5kYXRhLmRhdGEuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IGZhbHNlIDogdHJ1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRJbnZlbnRvcnlSZWxhdGlvbnNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPExheW91dFxuICAgICAgdG9rPXtpbml0UHJvcHN9XG4gICAgICBkYXRhUHJvZmlsZT17ZGF0YVByb2ZpbGV9XG4gICAgICBzaWRlbWVudT17c2lkZW1lbnV9XG4gICAgICBzdD17c3R9XG4gICAgICBwYXRoQXJyPXtwYXRoQXJyfVxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtYXV0byBncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy00XCJcbiAgICAgICAgaWQ9XCJjcmVhdGVBc3NldHNXcmFwcGVyXCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLTggcC0zXCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHQtNCBib3JkZXItdC0yIGJvcmRlci1iLTIgYmctd2hpdGVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggSXRlbSAtIHt1cGRhdGVkYXRhLm1pZ19pZH0gLXtcIiBcIn1cbiAgICAgICAgICAgICAgICB7dXBkYXRlZGF0YS5tb2RlbF9pbnZlbnRvcnk/Lm5hbWV9XG4gICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICA8TGluayBocmVmPXtgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIiAvKm9uQ2xpY2s9eygpID0+IHsgY29uc29sZS5sb2codXBkYXRlZGF0YSk7IGNvbnNvbGUubG9nKGRpc2FibGVkZmllbGQpIH19Ki9cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VGb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLTYgcHktMyBweC0xMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1cGRhdGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVzPXt1cGRhdGVkYXRhfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgey8qIDxGb3JtLkl0ZW0gbmFtZT1cIm1vZGVsX2lkXCIgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2RlbCB3YWppYiBkaXBpbGloJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5tb2RlbF9pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsZGF0YS5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPiAqL31cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICBuYW1lPVwibW9kZWxfaWRcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e1xuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bE1vZGVsXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbWwtMVwiPk5hbWEgTW9kZWw8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bE1vZGVsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGJnLWdyYXktMTAwIGJvcmRlciBwLTIgaC04XCI+XG4gICAgICAgICAgICAgICAgICAgIHt1cGRhdGVkYXRhLm1vZGVsX2ludmVudG9yeS5uYW1lfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm1vZGVsX2lkXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1sLTFcIj5Bc3NldCBUeXBlPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgcm91bmRlZC1zbSBmbGV4IGl0ZW1zLWNlbnRlciBiZy1ncmF5LTEwMCBib3JkZXIgcC0yIGgtOFwiPlxuICAgICAgICAgICAgICAgICAgICB7dXBkYXRlZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIHsvKiA8Rm9ybS5JdGVtIG5hbWU9XCJpbnZlbnRvcnlfbmFtZVwiIGxhYmVsPVwiTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdOYW1hIEl0ZW0gd2FqaWIgZGlpc2knLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBuYW1lPVwiaW52ZW50b3J5X25hbWVcIiBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuaW52ZW50b3J5X25hbWV9IG9uQ2hhbmdlPXsoZSkgPT4geyBzZXR1cGRhdGVkYXRhKHsgLi4udXBkYXRlZGF0YSwgaW52ZW50b3J5X25hbWU6IGUudGFyZ2V0LnZhbHVlIH0pIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT4gKi99XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm1pZ19pZFwiXG4gICAgICAgICAgICAgICAgICBsYWJlbD1cIk1JRyBJRFwiXG4gICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNSUcgSUQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJtaWdfaWRcIlxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEubWlnX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHsgLi4udXBkYXRlZGF0YSwgbWlnX2lkOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cInN0YXR1c19jb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9XCJLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIktvbmRpc2kgd2FqaWIgZGlwaWxpaFwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5zdGF0dXNfY29uZGl0aW9ufVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7IC4uLnVwZGF0ZWRhdGEsIHN0YXR1c19jb25kaXRpb246IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyZWVuLTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMSBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctcmVkLTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICBuYW1lPVwic3RhdHVzX3VzYWdlXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPVwiU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIHdhamliIGRpcGlsaWhcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuc3RhdHVzX3VzYWdlfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7IC4uLnVwZGF0ZWRhdGEsIHN0YXR1c191c2FnZTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsxfT5JbiBVc2VkPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+SW4gU3RvY2s8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5SZXBsYWNlbWVudDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIHtzbml0ZW0gPyAoXG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJzZXJpYWxfbnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJTZXJpYWwgTnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU2VyaWFsIE51bWJlciB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJzZXJpYWxfbnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAuLi51cGRhdGVkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxfbnVtYmVyOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwic2VyaWFsX251bWJlclwiIGxhYmVsPVwiU2VyaWFsIE51bWJlclwiPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuc2VyaWFsX251bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwic2VyaWFsX251bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsX251bWJlcjogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJsb2NhdGlvblwiIGxhYmVsPVwiTG9jYXRpb25cIj5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5sb2NhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1tpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMua2V5XX1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBMb2NhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoeyAuLi51cGRhdGVkYXRhLCBsb2NhdGlvbjogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cInZlbmRvcl9pZFwiIGxhYmVsPVwiVmVuZG9yXCI+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS52ZW5kb3JfaWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHsgLi4udXBkYXRlZGF0YSwgdmVuZG9yX2lkOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2ludnJlbGF0aW9ucy52ZW5kb3JzLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIHttYW51ZmZpZWxkaXRlbSA/IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiIGxhYmVsPVwiTWFudWZhY3R1cmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEubWFudWZhY3R1cmVyX2lkfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7aW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbCkgPT4gZG9jZmlsLmRlbGV0ZWRfYXQgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2tyaXBzaVwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt1cGRhdGVkYXRhLmRlc2tyaXBzaX1cbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2tyaXBzaVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2tyaXBzaTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItNiBweS0zIHB4LTEyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zXCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBJdGVtPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHt1cGRhdGVkYXRhLmFkZGl0aW9uYWxfYXR0cmlidXRlcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgZm9ybT17aW5zdGFuY2VGb3JtMn0+XG4gICAgICAgICAgICAgICAgICAgIHt1cGRhdGVkYXRhLmFkZGl0aW9uYWxfYXR0cmlidXRlcy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKGRvY2ludnZhbHVlLCBpZHhpbnZ2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY2ludnZhbHVlLnJlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17ZG9jaW52dmFsdWUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1sLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogYHJlZGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2k6IGRvY2ludnZhbHVlLnZhbHVlLm9wc2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tpZHhmaWVsZF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaTogZG9jaW52dmFsdWUudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vcHNpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLnZhbHVlLm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MyLCBpZHgyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2RvYzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtpZHgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlwaWxpaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUudmFsdWUub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzLCBpZHgzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NuYW1lKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbmFtZS5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIxXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIxLjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMS4yXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dG9yZW1vdmUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0b3JlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyLjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tpZHhmaWVsZF0udmFsdWUuZGVmYXVsdC5wdXNoKGlkeDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMi4yXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dG9yZW1vdmUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZS5kZWZhdWx0LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUuZGVmYXVsdC5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dG9yZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jM308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaXBpbGloXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qc3R5bGU9e2R5bmFtaWNmaWVsZGl0ZW1baWR4aW52dmFsdWVdLnZhbHVlID09PSBcIlwiID8geyBib3JkZXJDb2xvcjogYHJlZGAgfSA6IG51bGx9Ki8gZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1vbWVudChkb2NpbnZ2YWx1ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGRhdGUsIGRhdGVzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZXN0cmluZyA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVzdHJpbmcgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGVzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZGF0ZXN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlzYWJsZWRmaWVsZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiIHRleHQtcmVkLTUwMCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLm5hbWV9IGhhcnVzIGRpcGlsaWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlpc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcIlwiIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiXCIgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gYCR7dmFsdWV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaWlzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaWlzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJTdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaWlzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtkb2NpbnZ2YWx1ZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2RvY2ludnZhbHVlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID0gdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tpZHhmaWVsZF0udmFsdWUuZGVmYXVsdCA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaTogZG9jaW52dmFsdWUudmFsdWUub3BzaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbaWR4ZmllbGRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2k6IGRvY2ludnZhbHVlLnZhbHVlLm9wc2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS52YWx1ZS5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYzIsIGlkeDIpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2RvYzJ9IHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUudmFsdWUub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzLCBpZHgzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXtkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY25hbWUpID0+IGRvY25hbWUuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjEuMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjEuMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0b3JlbW92ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dG9yZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMi4xXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVtcC5pbnZlbnRvcnlfdmFsdWVzW2lkeGZpZWxkXS52YWx1ZS5kZWZhdWx0LnB1c2goaWR4MylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLmRlZmF1bHQucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjIuMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0b3JlbW92ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlLmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlLmRlZmF1bHQuc3BsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0b3JlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MzfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1vbWVudChkb2NpbnZ2YWx1ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZGF0ZSwgZGF0ZXN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRlc3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVzdHJpbmcgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkYXRlc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBkYXRlc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jaW52dmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBgJHt2YWx1ZX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jaW52dmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiU3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID0gdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5ndWJhaCBpdGVtIFwie3VwZGF0ZWRhdGEuaW52ZW50b3J5X25hbWV9XCI/XG4gICAgICAgICAgPC9oMT5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbHVwZGF0ZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVwZGF0ZShmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlVXBkYXRlSXRlbX1cbiAgICAgICAgb2tCdXR0b25Qcm9wcz17eyBsb2FkaW5nOiBsb2FkaW5ndXBkYXRlIH19XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICB0ZW1wLm5vdGVzID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIGNvbnN0IGl0ZW1pZCA9IHBhcmFtcy5pdGVtSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtVXBkYXRlO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/update/[itemId].js */\"\n                }, void 0, false, void 0, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 21\n              }, _this),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\",\n                children: updatedata.model_inventory.asset.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"mig_id\",\n              label: \"MIG ID\",\n              rules: [{\n                required: true,\n                message: \"MIG ID wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                disabled: true,\n                name: \"mig_id\",\n                defaultValue: updatedata.mig_id,\n                onChange: function onChange(e) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    mig_id: e.target.value\n                  }));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"status_condition\",\n              label: \"Kondisi\",\n              rules: [{\n                required: true,\n                message: \"Kondisi wajib dipilih\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Select, {\n                disabled: true,\n                defaultValue: updatedata.status_condition,\n                onChange: function onChange(value) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    status_condition: value\n                  }));\n                },\n                children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: 1,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-1 flex w-full items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-3 h-3 rounded-full bg-green-500 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0\",\n                      children: \"Good\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 361,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: 2,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-1 flex w-full items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-3 h-3 rounded-full bg-gray-500 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 366,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0\",\n                      children: \"Grey\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 367,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: 3,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-1 flex w-full items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-3 h-3 rounded-full bg-red-500 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 372,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0\",\n                      children: \"Bad\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"status_usage\",\n              label: \"Status Pemakaian\",\n              rules: [{\n                required: true,\n                message: \"Status Pemakaian wajib dipilih\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Select, {\n                disabled: true,\n                defaultValue: updatedata.status_usage,\n                onChange: function onChange(value) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    status_usage: value\n                  }));\n                },\n                children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: 1,\n                  children: \"In Used\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: 2,\n                  children: \"In Stock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: 3,\n                  children: \"Replacement\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, _this), snitem ? /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"serial_number\",\n              label: \"Serial Number\",\n              rules: [{\n                required: true,\n                message: \"Serial Number wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                defaultValue: updatedata.serial_number,\n                name: \"serial_number\",\n                onChange: function onChange(e) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    serial_number: e.target.value\n                  }));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 19\n            }, _this) : /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"serial_number\",\n              label: \"Serial Number\",\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                defaultValue: updatedata.serial_number,\n                name: \"serial_number\",\n                onChange: function onChange(e) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    serial_number: e.target.value\n                  }));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"location\",\n              label: \"Location\",\n              children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                defaultValue: updatedata.location,\n                treeDefaultExpandedKeys: [invrelations.tree_companies.key],\n                placeholder: \"Pilih Location\",\n                treeData: [invrelations.tree_companies],\n                onChange: function onChange(value) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    location: value\n                  }));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"vendor_id\",\n              label: \"Vendor\",\n              children: /*#__PURE__*/_jsxDEV(_Select, {\n                defaultValue: updatedata.vendor_id,\n                onChange: function onChange(value) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    vendor_id: value\n                  }));\n                },\n                children: invrelations.vendors.map(function (doc, idx) {\n                  return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: doc.id,\n                    children: doc.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 25\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, _this), manuffielditem ? /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"manufacturer_id\",\n              label: \"Manufacturer\",\n              children: /*#__PURE__*/_jsxDEV(_Select, {\n                defaultValue: updatedata.manufacturer_id,\n                placeholder: \"Pilih Manufacturer\",\n                onChange: function onChange(value) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    manufacturer_id: value\n                  }));\n                },\n                children: invrelations.manufacturers.filter(function (docfil) {\n                  return docfil.deleted_at === null;\n                }).map(function (doc, idx) {\n                  return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: doc.id,\n                    children: doc.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 29\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 19\n            }, _this) : null, /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"deskripsi\",\n              label: \"Deskripsi\",\n              children: /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                defaultValue: updatedata.deskripsi,\n                rows: 4,\n                name: \"deskripsi\",\n                onChange: function onChange(e) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    deskripsi: e.target.value\n                  }));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-4 mb-6 py-3 px-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow-md border p-5 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 15\n          }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: updatedata.additional_attributes.length === 0 ? /*#__PURE__*/_jsxDEV(_Empty, {\n              image: _Empty.PRESENTED_IMAGE_SIMPLE\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 19\n            }, _this) : /*#__PURE__*/_jsxDEV(_Form, {\n              layout: \"vertical\",\n              form: instanceForm2,\n              children: updatedata.additional_attributes.map(function (docinvvalue, idxinvvalue) {\n                if (docinvvalue.required) {\n                  return /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: docinvvalue.name,\n                    label: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315966608\" + \" \" + \"flex\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"jsx-3315966608\" + \" \" + \"judulField\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 523,\n                        columnNumber: 35\n                      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-3315966608\" + \" \" + \"mb-0 ml-1\",\n                        children: docinvvalue.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 524,\n                        columnNumber: 35\n                      }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                        id: \"3315966608\",\n                        children: \".judulField.jsx-3315966608::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL3VwZGF0ZS9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErZ0JxQyxBQUdpRyxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvaXRlbXMvdXBkYXRlL1tpdGVtSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUXVlc3Rpb25DaXJjbGVPdXRsaW5lZCB9IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBDaGVja2JveCxcbiAgQ29sbGFwc2UsXG4gIERhdGVQaWNrZXIsXG4gIEVtcHR5LFxuICBGb3JtLFxuICBJbnB1dCxcbiAgSW5wdXROdW1iZXIsXG4gIE1vZGFsLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IEl0ZW1VcGRhdGUgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8gMS5Jbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBwYXRoQXJyID0gcnQucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnNsaWNlKDEpO1xuICBwYXRoQXJyLnNwbGljZSgyLCAyKTtcbiAgcGF0aEFycltwYXRoQXJyLmxlbmd0aCAtIDFdID0gXCJVYmFoIEl0ZW1cIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi51c2VTdGF0ZVxuICBjb25zdCBbdXBkYXRlZGF0YSwgc2V0dXBkYXRlZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIG1vZGVsX2lkOiBcIlwiLFxuICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgIHZlbmRvcl9pZDogXCJcIixcbiAgICBpbnZlbnRvcnlfbmFtZTogXCJcIixcbiAgICBzdGF0dXNfY29uZGl0aW9uOiBcIlwiLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBzZXJpYWxfbnVtYmVyOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiB0cnVlLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIG5vdGVzOiBcIlwiLFxuICAgIGFkZGl0aW9uYWxfYXR0cmlidXRlczogW10sXG4gICAgaW52ZW50b3J5X3ZhbHVlczogW10sXG4gIH0pO1xuICBjb25zdCBbaW52cmVsYXRpb25zLCBzZXRpbnZyZWxhdGlvbnNdID0gdXNlU3RhdGUoe1xuICAgIG1vZGVsczogW10sXG4gICAgYXNzZXRzOiBbXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXSxcbiAgICBzdGF0dXNfY29uZGl0aW9uOiBbXSxcbiAgICBzdGF0dXNfdXNhZ2U6IFtdLFxuICAgIHZlbmRvcnM6IFtdLFxuICAgIGNvbXBhbmllczogW10sXG4gICAgdHJlZV9jb21wYW5pZXM6IFtdLFxuICB9KTtcbiAgY29uc3QgW21vZGVsZGF0YSwgc2V0bW9kZWxkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3NuaXRlbSwgc2V0c25pdGVtXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW21hbnVmZmllbGRpdGVtLCBzZXRtYW51ZmZpZWxkaXRlbV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXBkYXRlLCBzZXRsb2FkaW5ndXBkYXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW21vZGFsdXBkYXRlLCBzZXRtb2RhbHVwZGF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGZpZWxkLCBzZXRkaXNhYmxlZGZpZWxkXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVVcGRhdGVJdGVtID0gKCkgPT4ge1xuICAgIGNvbnN0IGludmNvbHVtbnMgPSB1cGRhdGVkYXRhLmludmVudG9yeV92YWx1ZXMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGRvYy52YWx1ZSksXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBmaW5hbHJlcyA9IHtcbiAgICAgIC4uLnVwZGF0ZWRhdGEsXG4gICAgICBpbnZlbnRvcnlfdmFsdWVzOiBpbnZjb2x1bW5zLFxuICAgIH07XG4gICAgc2V0bG9hZGluZ3VwZGF0ZSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vdXBkYXRlSW52ZW50b3J5YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGZpbmFscmVzKSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmd1cGRhdGUoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVwZGF0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJ0LnB1c2goYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3VzZUVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ID0ge307XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gcmVzMi5kYXRhKSB7XG4gICAgICAgICAgaWYgKHByb3AgPT09IFwiYWRkaXRpb25hbF9hdHRyaWJ1dGVzXCIpIHtcbiAgICAgICAgICAgIHRbcHJvcF0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5wYXJzZShkb2MudmFsdWUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKChwcmV2KSA9PiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdC5hZGRpdGlvbmFsX2F0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgLmZpbHRlcigoZG9jKSA9PiBkb2MucmVxdWlyZWQpXG4gICAgICAgICAgICAgIC5ldmVyeShcbiAgICAgICAgICAgICAgICAoZG9jc29tZSkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY3NvbWUudmFsdWUgIT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgIGRvY3NvbWUudmFsdWUgIT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY3NvbWUudmFsdWUgIT09IFwiLVwiIHx8XG4gICAgICAgICAgICAgICAgICBkb2Nzb21lLnZhbHVlLmRlZmF1bHQgIT09IFwiLVwiIHx8XG4gICAgICAgICAgICAgICAgICBkb2Nzb21lLnZhbHVlLmRlZmF1bHQubGVuZ3RoICE9PSAwXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0dXBkYXRlZGF0YSh7XG4gICAgICAgICAgLi4udCxcbiAgICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgICAgaW52ZW50b3J5X3ZhbHVlczogW10sXG4gICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRwcmFsb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YS5tb2RlbF9pZDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9NTBgLCB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgc2V0c25pdGVtKHJlczIuZGF0YS5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGwgPyBmYWxzZSA6IHRydWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGludnJlbGF0aW9ucyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgc3Q9e3N0fVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04IHAtM1wiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBweS0yXCI+XG4gICAgICAgICAgICAgICAgRm9ybSBVYmFoIEl0ZW0gLSB7dXBkYXRlZGF0YS5taWdfaWR9IC17XCIgXCJ9XG4gICAgICAgICAgICAgICAge3VwZGF0ZWRhdGEubW9kZWxfaW52ZW50b3J5Py5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YH0+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCIgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKHVwZGF0ZWRhdGEpOyBjb25zb2xlLmxvZyhkaXNhYmxlZGZpZWxkKSB9fSovXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkZmllbGR9XG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlRm9ybS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi02IHB5LTMgcHgtMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybX1cbiAgICAgICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgb25GaW5pc2g9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXBkYXRlKHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17dXBkYXRlZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHsvKiA8Rm9ybS5JdGVtIG5hbWU9XCJtb2RlbF9pZFwiIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgd2FqaWIgZGlwaWxpaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEubW9kZWxfaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT4gKi99XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm1vZGVsX2lkXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxNb2RlbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1sLTFcIj5OYW1hIE1vZGVsPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxNb2RlbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgcm91bmRlZC1zbSBmbGV4IGl0ZW1zLWNlbnRlciBiZy1ncmF5LTEwMCBib3JkZXIgcC0yIGgtOFwiPlxuICAgICAgICAgICAgICAgICAgICB7dXBkYXRlZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJtb2RlbF9pZFwiXG4gICAgICAgICAgICAgICAgICBsYWJlbD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBtbC0xXCI+QXNzZXQgVHlwZTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAgICAgICAge3VwZGF0ZWRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICB7LyogPEZvcm0uSXRlbSBuYW1lPVwiaW52ZW50b3J5X25hbWVcIiBsYWJlbD1cIk5hbWEgSXRlbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTmFtYSBJdGVtIHdhamliIGRpaXNpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgbmFtZT1cImludmVudG9yeV9uYW1lXCIgZGVmYXVsdFZhbHVlPXt1cGRhdGVkYXRhLmludmVudG9yeV9uYW1lfSBvbkNoYW5nZT17KGUpID0+IHsgc2V0dXBkYXRlZGF0YSh7IC4uLnVwZGF0ZWRhdGEsIGludmVudG9yeV9uYW1lOiBlLnRhcmdldC52YWx1ZSB9KSB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+ICovfVxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJtaWdfaWRcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9XCJNSUcgSURcIlxuICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTUlHIElEIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibWlnX2lkXCJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt1cGRhdGVkYXRhLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7IC4uLnVwZGF0ZWRhdGEsIG1pZ19pZDogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJzdGF0dXNfY29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPVwiS29uZGlzaVwiXG4gICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJLb25kaXNpIHdhamliIGRpcGlsaWhcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuc3RhdHVzX2NvbmRpdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoeyAuLi51cGRhdGVkYXRhLCBzdGF0dXNfY29uZGl0aW9uOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+R3JleTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLXJlZC01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgbmFtZT1cInN0YXR1c191c2FnZVwiXG4gICAgICAgICAgICAgICAgICBsYWJlbD1cIlN0YXR1cyBQZW1ha2FpYW5cIlxuICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU3RhdHVzIFBlbWFrYWlhbiB3YWppYiBkaXBpbGloXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt1cGRhdGVkYXRhLnN0YXR1c191c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoeyAuLi51cGRhdGVkYXRhLCBzdGF0dXNfdXNhZ2U6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+SW4gVXNlZDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PkluIFN0b2NrPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+UmVwbGFjZW1lbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICB7c25pdGVtID8gKFxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwic2VyaWFsX251bWJlclwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiU2VyaWFsIE51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlNlcmlhbCBOdW1iZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEuc2VyaWFsX251bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwic2VyaWFsX251bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsX251bWJlcjogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cInNlcmlhbF9udW1iZXJcIiBsYWJlbD1cIlNlcmlhbCBOdW1iZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt1cGRhdGVkYXRhLnNlcmlhbF9udW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInNlcmlhbF9udW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVwZGF0ZWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbF9udW1iZXI6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibG9jYXRpb25cIiBsYWJlbD1cIkxvY2F0aW9uXCI+XG4gICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEubG9jYXRpb259XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kZWRLZXlzPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzLmtleV19XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTG9jYXRpb25cIlxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17W2ludnJlbGF0aW9ucy50cmVlX2NvbXBhbmllc119XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHsgLi4udXBkYXRlZGF0YSwgbG9jYXRpb246IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJ2ZW5kb3JfaWRcIiBsYWJlbD1cIlZlbmRvclwiPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VwZGF0ZWRhdGEudmVuZG9yX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7IC4uLnVwZGF0ZWRhdGEsIHZlbmRvcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpbnZyZWxhdGlvbnMudmVuZG9ycy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICB7bWFudWZmaWVsZGl0ZW0gPyAoXG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJtYW51ZmFjdHVyZXJfaWRcIiBsYWJlbD1cIk1hbnVmYWN0dXJlclwiPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt1cGRhdGVkYXRhLm1hbnVmYWN0dXJlcl9pZH1cbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVwZGF0ZWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge2ludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+IGRvY2ZpbC5kZWxldGVkX2F0ID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNrcmlwc2lcIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dXBkYXRlZGF0YS5kZXNrcmlwc2l9XG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNrcmlwc2lcIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVwZGF0ZWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNrcmlwc2k6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLTYgcHktMyBweC0xMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItM1wiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgSXRlbTwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7dXBkYXRlZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfT48L0VtcHR5PlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGZvcm09e2luc3RhbmNlRm9ybTJ9PlxuICAgICAgICAgICAgICAgICAgICB7dXBkYXRlZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKFxuICAgICAgICAgICAgICAgICAgICAgIChkb2NpbnZ2YWx1ZSwgaWR4aW52dmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2NpbnZ2YWx1ZS5yZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2RvY2ludnZhbHVlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBtbC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpOiBkb2NpbnZ2YWx1ZS52YWx1ZS5vcHNpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbaWR4ZmllbGRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2k6IGRvY2ludnZhbHVlLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3BzaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS52YWx1ZS5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aWR4Mn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlzYWJsZWRmaWVsZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiIHRleHQtcmVkLTUwMCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLm5hbWV9IGhhcnVzIGRpcGlsaWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLnZhbHVlLm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMywgaWR4MykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17ZG9jaW52dmFsdWUudmFsdWUuZGVmYXVsdC5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jbmFtZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY25hbWUuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2hlY2tlZCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMS4xXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjEuMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeHRvcmVtb3ZlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUuZGVmYXVsdC5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dG9yZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2hlY2tlZCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMi4xXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZW1wLmludmVudG9yeV92YWx1ZXNbaWR4ZmllbGRdLnZhbHVlLmRlZmF1bHQucHVzaChpZHgzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjIuMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeHRvcmVtb3ZlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0udmFsdWUuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlLmRlZmF1bHQuc3BsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRvcmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlwaWxpaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKnN0eWxlPXtkeW5hbWljZmllbGRpdGVtW2lkeGludnZhbHVlXS52YWx1ZSA9PT0gXCJcIiA/IHsgYm9yZGVyQ29sb3I6IGByZWRgIH0gOiBudWxsfSovIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtb21lbnQoZG9jaW52dmFsdWUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhkYXRlLCBkYXRlc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVzdHJpbmcgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlc3RyaW5nID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkYXRlc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZSA9IGRhdGVzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc2FibGVkZmllbGQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LXJlZC01MDAgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5uYW1lfSBoYXJ1cyBkaXBpbGloXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jaW52dmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlzYWJsZWRmaWVsZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiIHRleHQtcmVkLTUwMCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLm5hbWV9IGhhcnVzIGRpaXNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJcIiB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cGRhdGVkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcIlwiIHx8IHZhbHVlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZSA9IGAke3ZhbHVlfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlpc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlpc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiU3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jaW52dmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNhYmxlZGZpZWxkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1yZWQtNTAwIG1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUubmFtZX0gaGFydXMgZGlpc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17ZG9jaW52dmFsdWUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtkb2NpbnZ2YWx1ZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZW1wLmludmVudG9yeV92YWx1ZXNbaWR4ZmllbGRdLnZhbHVlLmRlZmF1bHQgPSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2k6IGRvY2ludnZhbHVlLnZhbHVlLm9wc2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW2lkeGZpZWxkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY2ludnZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGRvY2ludnZhbHVlLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpOiBkb2NpbnZ2YWx1ZS52YWx1ZS5vcHNpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUudmFsdWUub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MyLCBpZHgyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MyfSB2YWx1ZT17aWR4Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLnZhbHVlLm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMywgaWR4MykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17ZG9jaW52dmFsdWUudmFsdWUuZGVmYXVsdC5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGZpZWxkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NuYW1lKSA9PiBkb2NuYW1lLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHhmaWVsZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIxLjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIxLjJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dG9yZW1vdmUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUuZGVmYXVsdC5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRvcmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jaW52dmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjIuMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlbXAuaW52ZW50b3J5X3ZhbHVlc1tpZHhmaWVsZF0udmFsdWUuZGVmYXVsdC5wdXNoKGlkeDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS52YWx1ZS5kZWZhdWx0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyLjJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dG9yZW1vdmUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZS5kZWZhdWx0LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZS5kZWZhdWx0LnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dG9yZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jM308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY2ludnZhbHVlLnZhbHVlID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtb21lbnQoZG9jaW52dmFsdWUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGRhdGUsIGRhdGVzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0ZXN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPSB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlc3RyaW5nID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZGF0ZXN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZGF0ZXN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EYXRlUGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPSB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jaW52dmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPSB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gYCR7dmFsdWV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2ludnZhbHVlLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY2ludnZhbHVlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwZGF0ZWRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZmllbGQgPSB0ZW1wLmludmVudG9yeV92YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY25hbWUpID0+IGRvY25hbWUuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2NpbnZ2YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeGZpZWxkID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jaW52dmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogZG9jaW52dmFsdWUuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbnZlbnRvcnlfdmFsdWVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jaW52dmFsdWUuZGF0YV90eXBlID09PSBcIlN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jaW52dmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhmaWVsZCA9IHRlbXAuaW52ZW50b3J5X3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbmFtZSkgPT4gZG9jbmFtZS5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvY2ludnZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ZmllbGQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NpbnZ2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBkb2NpbnZ2YWx1ZS5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmludmVudG9yeV92YWx1ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ3ViYWggaXRlbSBcInt1cGRhdGVkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1cGRhdGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWx1cGRhdGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZVVwZGF0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3VwZGF0ZSB9fVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0dXBkYXRlZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgdGVtcC5ub3RlcyA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBpdGVtaWQgPSBwYXJhbXMuaXRlbUlkO1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXNHUCA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbkdQID0gYXdhaXQgcmVzb3VyY2VzR1AuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb25HUDtcblxuICAvLyBpZiAoIVsxMDcsIDEwOCwgMTA5LCAxMTAsIDExMSwgMTEyLCAxMzJdLmV2ZXJ5KChjdXJyKSA9PiBkYXRhUHJvZmlsZS5kYXRhLnJlZ2lzdGVyZWRfZmVhdHVyZS5pbmNsdWRlcyhjdXJyKSkpIHtcbiAgLy8gICAgIHJlcy53cml0ZUhlYWQoMzAyLCB7IExvY2F0aW9uOiAnL2Rhc2hib2FyZC9hZG1pbicgfSlcbiAgLy8gICAgIHJlcy5lbmQoKVxuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCIzXCIsXG4gICAgICBpdGVtaWQsXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSXRlbVVwZGF0ZTtcbiJdfQ== */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/update/[itemId].js */\"\n                      }, void 0, false, void 0, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 522,\n                      columnNumber: 33\n                    }, _this),\n                    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [docinvvalue.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(_Select, {\n                          allowClear: true,\n                          defaultValue: docinvvalue.value[\"default\"],\n                          style: {\n                            width: \"100%\",\n                            borderColor: \"red\"\n                          },\n                          onChange: function onChange(value, label) {\n                            if (typeof value === \"undefined\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(function (prev) {\n                                var temp = prev;\n                                var idxfield = temp.inventory_values.map(function (docname) {\n                                  return docname.id;\n                                }).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: {\n                                      \"default\": value,\n                                      opsi: docinvvalue.value.opsi\n                                    }\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield] = {\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: {\n                                      \"default\": value,\n                                      opsi: docinvvalue.value.opsi\n                                    }\n                                  };\n                                }\n\n                                return temp;\n                              });\n                            }\n                          },\n                          children: docinvvalue.value.opsi.map(function (doc2, idx2) {\n                            return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                              value: idx2,\n                              children: doc2\n                            }, doc2, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 589,\n                              columnNumber: 43\n                            }, _this);\n                          })\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 541,\n                          columnNumber: 37\n                        }, _this), disabledfield ? /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus dipilih\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 599,\n                          columnNumber: 39\n                        }, _this) : null]\n                      }, void 0, true), docinvvalue.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-full flex flex-col\",\n                        children: [docinvvalue.value.opsi.map(function (doc3, idx3) {\n                          return /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex mb-1\",\n                            children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                              defaultChecked: docinvvalue.value[\"default\"].includes(idx3),\n                              style: {\n                                marginRight: \"0.5rem\"\n                              },\n                              onChange: function onChange(e) {\n                                if (docinvvalue.value[\"default\"].length === 0) {\n                                  setdisabledfield(true);\n                                } else {\n                                  setdisabledfield(false);\n                                  setupdatedata(function (prev) {\n                                    var temp = prev;\n                                    var idxfield = temp.inventory_values.map(function (docname) {\n                                      return docname.id;\n                                    }).indexOf(docinvvalue.id);\n\n                                    if (idxfield === -1) {\n                                      console.log(\"1\");\n\n                                      if (e.target.checked === true) {\n                                        console.log(\"1.1\");\n                                        docinvvalue.value[\"default\"].push(idx3);\n                                        temp.inventory_values.push({\n                                          id: docinvvalue.id,\n                                          data_type: docinvvalue.data_type,\n                                          value: docinvvalue.value\n                                        });\n                                      } else {\n                                        console.log(\"1.2\");\n                                        var idxtoremove = docinvvalue.value[\"default\"].indexOf(idx3);\n                                        docinvvalue.value[\"default\"].splice(idxtoremove, 1);\n                                        temp.inventory_values.push({\n                                          id: docinvvalue.id,\n                                          data_type: docinvvalue.data_type,\n                                          value: docinvvalue.value\n                                        });\n                                      }\n                                    } else {\n                                      console.log(\"2\");\n\n                                      if (e.target.checked === true) {\n                                        console.log(\"2.1\"); // temp.inventory_values[idxfield].value.default.push(idx3)\n\n                                        docinvvalue.value[\"default\"].push(idx3);\n                                        temp.inventory_values[idxfield] = {\n                                          id: docinvvalue.id,\n                                          data_type: docinvvalue.data_type,\n                                          value: docinvvalue.value\n                                        };\n                                      } else {\n                                        console.log(\"2.2\");\n                                        var idxtoremove = temp.inventory_values[idxfield].value[\"default\"].indexOf(idx3);\n                                        temp.inventory_values[idxfield].value[\"default\"].splice(idxtoremove, 1);\n                                      }\n                                    }\n\n                                    return temp;\n                                  });\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 611,\n                              columnNumber: 45\n                            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"mb-0\",\n                              children: doc3\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 715,\n                              columnNumber: 45\n                            }, _this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 610,\n                            columnNumber: 43\n                          }, _this);\n                        }), disabledfield ? /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus dipilih\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 721,\n                          columnNumber: 39\n                        }, _this) : null]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 606,\n                        columnNumber: 35\n                      }, _this), docinvvalue.data_type === \"date\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(_DatePicker, {\n                          /*style={dynamicfielditem[idxinvvalue].value === \"\" ? { borderColor: `red` } : null}*/\n                          defaultValue: docinvvalue.value === \"\" ? null : moment(docinvvalue.value),\n                          onChange: function onChange(date, datestring) {\n                            if (datestring === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(function (prev) {\n                                var temp = prev;\n                                var idxfield = temp.inventory_values.map(function (docname) {\n                                  return docname.id;\n                                }).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: datestring === \"\" ? null : datestring\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = datestring;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 729,\n                          columnNumber: 37\n                        }, _this), disabledfield ? /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus dipilih\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 767,\n                          columnNumber: 39\n                        }, _this) : null]\n                      }, void 0, true), docinvvalue.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                          rows: 4,\n                          defaultValue: docinvvalue.value,\n                          onChange: function onChange(e) {\n                            if (e.target.value === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(function (prev) {\n                                var temp = prev;\n                                var idxfield = temp.inventory_values.map(function (docname) {\n                                  return docname.id;\n                                }).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: e.target.value\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = e.target.value;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 775,\n                          columnNumber: 37\n                        }, _this), disabledfield ? /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 807,\n                          columnNumber: 39\n                        }, _this) : null]\n                      }, void 0, true), docinvvalue.data_type === \"number\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(_InputNumber, {\n                          allowClear: true,\n                          defaultValue: docinvvalue.value,\n                          onChange: function onChange(value) {\n                            if (value === \"\" || value === null) {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(function (prev) {\n                                var temp = prev;\n                                var idxfield = temp.inventory_values.map(function (docname) {\n                                  return docname.id;\n                                }).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: value === \"\" || value === null ? \"\" : \"\".concat(value)\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = \"\".concat(value);\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 815,\n                          columnNumber: 37\n                        }, _this), disabledfield ? /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 850,\n                          columnNumber: 39\n                        }, _this) : null]\n                      }, void 0, true), docinvvalue.data_type === \"single\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(_Input, {\n                          defaultValue: docinvvalue.value,\n                          onChange: function onChange(e) {\n                            if (e.target.value === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(function (prev) {\n                                var temp = prev;\n                                var idxfield = temp.inventory_values.map(function (docname) {\n                                  return docname.id;\n                                }).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: e.target.value\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = e.target.value;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 858,\n                          columnNumber: 37\n                        }, _this), disabledfield ? /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 889,\n                          columnNumber: 39\n                        }, _this) : null]\n                      }, void 0, true), docinvvalue.data_type === \"String\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(_Input, {\n                          defaultValue: docinvvalue.value,\n                          onChange: function onChange(e) {\n                            if (e.target.value === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(function (prev) {\n                                var temp = prev;\n                                var idxfield = temp.inventory_values.map(function (docname) {\n                                  return docname.id;\n                                }).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: e.target.value\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = e.target.value;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 897,\n                          columnNumber: 37\n                        }, _this), disabledfield ? /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 928,\n                          columnNumber: 39\n                        }, _this) : null]\n                      }, void 0, true)]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 519,\n                    columnNumber: 29\n                  }, _this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: docinvvalue.name,\n                    label: docinvvalue.name,\n                    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [docinvvalue.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(_Select, {\n                        defaultValue: docinvvalue.value[\"default\"],\n                        style: {\n                          width: \"100%\"\n                        },\n                        onChange: function onChange(value, label) {\n                          setupdatedata(function (prev) {\n                            var temp = prev;\n                            var idxfield = temp.inventory_values.map(function (docname) {\n                              return docname.id;\n                            }).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              // temp.inventory_values[idxfield].value.default = value\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: {\n                                  \"default\": value,\n                                  opsi: docinvvalue.value.opsi\n                                }\n                              });\n                            } else {\n                              temp.inventory_values[idxfield] = {\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: {\n                                  \"default\": value,\n                                  opsi: docinvvalue.value.opsi\n                                }\n                              };\n                            }\n\n                            return temp;\n                          });\n                        },\n                        children: docinvvalue.value.opsi.map(function (doc2, idx2) {\n                          return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                            value: idx2,\n                            children: doc2\n                          }, doc2, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 980,\n                            columnNumber: 41\n                          }, _this);\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 945,\n                        columnNumber: 35\n                      }, _this), docinvvalue.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-full flex flex-col\",\n                        children: docinvvalue.value.opsi.map(function (doc3, idx3) {\n                          return /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex mb-1\",\n                            children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                              defaultChecked: docinvvalue.value[\"default\"].includes(idx3),\n                              style: {\n                                marginRight: \"0.5rem\"\n                              },\n                              onChange: function onChange(e) {\n                                setupdatedata(function (prev) {\n                                  var temp = prev;\n                                  var idxfield = temp.inventory_values.map(function (docname) {\n                                    return docname.id;\n                                  }).indexOf(docinvvalue.id);\n\n                                  if (idxfield === -1) {\n                                    console.log(\"1\");\n\n                                    if (e.target.checked === true) {\n                                      console.log(\"1.1\");\n                                      docinvvalue.value[\"default\"].push(idx3);\n                                      temp.inventory_values.push({\n                                        id: docinvvalue.id,\n                                        data_type: docinvvalue.data_type,\n                                        value: docinvvalue.value\n                                      });\n                                    } else {\n                                      console.log(\"1.2\");\n                                      var idxtoremove = docinvvalue.value[\"default\"].indexOf(idx3);\n                                      docinvvalue.value[\"default\"].splice(idxtoremove, 1);\n                                      temp.inventory_values.push({\n                                        id: docinvvalue.id,\n                                        data_type: docinvvalue.data_type,\n                                        value: docinvvalue.value\n                                      });\n                                    }\n                                  } else {\n                                    console.log(\"2\");\n\n                                    if (e.target.checked === true) {\n                                      console.log(\"2.1\"); // temp.inventory_values[idxfield].value.default.push(idx3)\n\n                                      docinvvalue.value[\"default\"].push(idx3);\n                                      temp.inventory_values[idxfield] = {\n                                        id: docinvvalue.id,\n                                        data_type: docinvvalue.data_type,\n                                        value: docinvvalue.value\n                                      };\n                                    } else {\n                                      console.log(\"2.2\");\n                                      var idxtoremove = temp.inventory_values[idxfield].value[\"default\"].indexOf(idx3);\n                                      temp.inventory_values[idxfield].value[\"default\"].splice(idxtoremove, 1);\n                                    }\n                                  }\n\n                                  return temp;\n                                });\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 993,\n                              columnNumber: 45\n                            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"mb-0\",\n                              children: doc3\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1084,\n                              columnNumber: 45\n                            }, _this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 992,\n                            columnNumber: 43\n                          }, _this);\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 988,\n                        columnNumber: 35\n                      }, _this), docinvvalue.data_type === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                        defaultValue: docinvvalue.value === \"\" ? null : moment(docinvvalue.value),\n                        onChange: function onChange(date, datestring) {\n                          console.log(datestring);\n                          setupdatedata(function (prev) {\n                            var temp = prev;\n                            var idxfield = temp.inventory_values.map(function (docname) {\n                              return docname.id;\n                            }).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: datestring === \"\" ? null : datestring\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = datestring;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1092,\n                        columnNumber: 35\n                      }, _this), docinvvalue.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                        rows: 4,\n                        defaultValue: docinvvalue.value,\n                        onChange: function onChange(e) {\n                          setupdatedata(function (prev) {\n                            var temp = prev;\n                            var idxfield = temp.inventory_values.map(function (docname) {\n                              return docname.id;\n                            }).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: e.target.value\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = e.target.value;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1125,\n                        columnNumber: 35\n                      }, _this), docinvvalue.data_type === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                        defaultValue: docinvvalue.value,\n                        onChange: function onChange(value) {\n                          setupdatedata(function (prev) {\n                            var temp = prev;\n                            var idxfield = temp.inventory_values.map(function (docname) {\n                              return docname.id;\n                            }).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: \"\".concat(value)\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = \"\".concat(value);\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1151,\n                        columnNumber: 35\n                      }, _this), docinvvalue.data_type === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                        defaultValue: docinvvalue.value,\n                        onChange: function onChange(e) {\n                          setupdatedata(function (prev) {\n                            var temp = prev;\n                            var idxfield = temp.inventory_values.map(function (docname) {\n                              return docname.id;\n                            }).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: e.target.value\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = e.target.value;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1176,\n                        columnNumber: 35\n                      }, _this), docinvvalue.data_type === \"String\" && /*#__PURE__*/_jsxDEV(_Input, {\n                        defaultValue: docinvvalue.value,\n                        onChange: function onChange(e) {\n                          setupdatedata(function (prev) {\n                            var temp = prev;\n                            var idxfield = temp.inventory_values.map(function (docname) {\n                              return docname.id;\n                            }).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: e.target.value\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = e.target.value;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1201,\n                        columnNumber: 35\n                      }, _this)]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 939,\n                    columnNumber: 29\n                  }, _this);\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-semibold\",\n        children: [\"Apakah anda yakin ingin mengubah item \\\"\", updatedata.inventory_name, \"\\\"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1240,\n        columnNumber: 11\n      }, _this),\n      visible: modalupdate,\n      onCancel: function onCancel() {\n        setmodalupdate(false);\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      onOk: handleUpdateItem,\n      okButtonProps: {\n        loading: loadingupdate\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1255,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Input, {\n            placeholder: \"Masukkan Notes\",\n            onChange: function onChange(e) {\n              setupdatedata(function (prev) {\n                var temp = prev;\n                temp.notes = e.target.value;\n                return temp;\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1256,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1254,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1253,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1238,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ItemUpdate, \"27uhw1gi5bIPZjPGS5zCDdq1guY=\", false, function () {\n  return [useRouter, _Form.useForm, _Form.useForm];\n});\n\n_c = ItemUpdate;\nexport var __N_SSP = true;\nexport default ItemUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemUpdate\");","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/update/[itemId].js"],"names":["QuestionCircleOutlined","moment","Link","useRouter","useEffect","useState","Sticky","Layout","st","ItemUpdate","initProps","dataProfile","sidemenu","itemid","rt","pathArr","pathname","split","slice","splice","length","useForm","instanceForm","instanceForm2","Panel","id","Number","model_id","is_consumable","vendor_id","inventory_name","status_condition","status_usage","serial_number","location","is_exist","deskripsi","manufacturer_id","mig_id","notes","additional_attributes","inventory_values","updatedata","setupdatedata","models","assets","manufacturers","vendors","companies","tree_companies","invrelations","setinvrelations","modeldata","setmodeldata","snitem","setsnitem","manuffielditem","setmanuffielditem","praloading","setpraloading","loadingupdate","setloadingupdate","modalupdate","setmodalupdate","disabledfield","setdisabledfield","handleUpdateItem","invcolumns","map","doc","idx","data_type","value","JSON","stringify","finalres","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","parse","body","then","res","json","res2","success","message","duration","push","t","prop","data","prev","filter","required","every","docsome","res3","model_inventory","name","submit","asset","e","target","key","docfil","deleted_at","PRESENTED_IMAGE_SIMPLE","docinvvalue","idxinvvalue","width","borderColor","label","temp","idxfield","docname","indexOf","opsi","doc2","idx2","doc3","idx3","includes","marginRight","console","log","checked","idxtoremove","date","datestring","loading"],"mappings":"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","sourcesContent":["import { QuestionCircleOutlined } from \"@ant-design/icons\";\nimport {\n  Button,\n  Checkbox,\n  Collapse,\n  DatePicker,\n  Empty,\n  Form,\n  Input,\n  InputNumber,\n  Modal,\n  Select,\n  Spin,\n  Timeline,\n  TreeSelect,\n  notification,\n} from \"antd\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\n\nimport Layout from \"../../../components/layout-dashboard2\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ItemUpdate = ({ initProps, dataProfile, sidemenu, itemid }) => {\n  // 1.Init\n  const rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 2);\n  pathArr[pathArr.length - 1] = \"Ubah Item\";\n  const [instanceForm] = Form.useForm();\n  const [instanceForm2] = Form.useForm();\n  const { Panel } = Collapse;\n\n  //2.useState\n  const [updatedata, setupdatedata] = useState({\n    id: Number(itemid),\n    model_id: \"\",\n    is_consumable: false,\n    vendor_id: \"\",\n    inventory_name: \"\",\n    status_condition: \"\",\n    status_usage: \"\",\n    serial_number: \"\",\n    location: \"\",\n    is_exist: true,\n    deskripsi: \"\",\n    manufacturer_id: \"\",\n    mig_id: \"\",\n    notes: \"\",\n    additional_attributes: [],\n    inventory_values: [],\n  });\n  const [invrelations, setinvrelations] = useState({\n    models: [],\n    assets: [],\n    manufacturers: [],\n    status_condition: [],\n    status_usage: [],\n    vendors: [],\n    companies: [],\n    tree_companies: [],\n  });\n  const [modeldata, setmodeldata] = useState([]);\n  const [snitem, setsnitem] = useState(false);\n  const [manuffielditem, setmanuffielditem] = useState(true);\n  const [praloading, setpraloading] = useState(true);\n  const [loadingupdate, setloadingupdate] = useState(false);\n  const [modalupdate, setmodalupdate] = useState(false);\n  const [disabledfield, setdisabledfield] = useState(true);\n\n  //handler\n  const handleUpdateItem = () => {\n    const invcolumns = updatedata.inventory_values.map((doc, idx) => {\n      if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n        return {\n          ...doc,\n          value: JSON.stringify(doc.value),\n        };\n      } else {\n        return { ...doc };\n      }\n    });\n    const finalres = {\n      ...updatedata,\n      inventory_values: invcolumns,\n    };\n    setloadingupdate(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateInventory`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(finalres),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingupdate(false);\n        setmodalupdate(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Item berhasil diubah\",\n            duration: 3,\n          });\n          rt.push(`/items/detail/${itemid}`);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n\n  //useEffect\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventory?id=${itemid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var t = {};\n        for (var prop in res2.data) {\n          if (prop === \"additional_attributes\") {\n            t[prop] = res2.data[prop].map((doc, idx) => {\n              if (\n                doc.data_type === \"dropdown\" ||\n                doc.data_type === \"checkbox\"\n              ) {\n                return {\n                  ...doc,\n                  value: JSON.parse(doc.value),\n                };\n              } else {\n                return { ...doc };\n              }\n            });\n          } else {\n            t[prop] = res2.data[prop];\n          }\n        }\n        setdisabledfield((prev) => {\n          if (\n            t.additional_attributes\n              .filter((doc) => doc.required)\n              .every(\n                (docsome) =>\n                  docsome.value !== null ||\n                  docsome.value !== \"\" ||\n                  docsome.value !== \"-\" ||\n                  docsome.value.default !== \"-\" ||\n                  docsome.value.default.length !== 0\n              )\n          ) {\n            return false;\n          } else {\n            return true;\n          }\n        });\n        setupdatedata({\n          ...t,\n          id: Number(itemid),\n          inventory_values: [],\n          notes: \"\",\n        });\n        setpraloading(false);\n        return res2.data.model_id;\n      })\n      .then((res3) => {\n        fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?rows=50`, {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        })\n          .then((res) => res.json())\n          .then((res2) => {\n            setmodeldata(res2.data.data);\n            setsnitem(res2.data.data.serial_number === null ? false : true);\n          });\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryRelations`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setinvrelations(res2.data);\n      });\n  }, []);\n\n  return (\n    <Layout\n      tok={initProps}\n      dataProfile={dataProfile}\n      sidemenu={sidemenu}\n      st={st}\n      pathArr={pathArr}\n    >\n      <div\n        className=\"w-full h-auto grid grid-cols-1 md:grid-cols-4\"\n        id=\"createAssetsWrapper\"\n      >\n        <div className=\" col-span-1 md:col-span-4 mb-8 p-3\">\n          <Sticky containerSelectorFocus=\"#createAgentsWrapper\">\n            <div className=\" col-span-4 flex justify-between pt-4 border-t-2 border-b-2 bg-white\">\n              <h1 className=\"font-bold text-xl py-2\">\n                Form Ubah Item - {updatedata.mig_id} -{\" \"}\n                {updatedata.model_inventory?.name}\n              </h1>\n              <div className=\"flex space-x-2\">\n                <Link href={`/items/detail/${itemid}`}>\n                  <Button\n                    type=\"default\" /*onClick={() => { console.log(updatedata); console.log(disabledfield) }}*/\n                  >\n                    Batal\n                  </Button>\n                </Link>\n                <Button\n                  disabled={disabledfield}\n                  type=\"primary\"\n                  onClick={() => {\n                    instanceForm.submit();\n                  }}\n                >\n                  Simpan\n                </Button>\n              </div>\n            </div>\n          </Sticky>\n        </div>\n        <div className=\"col-span-1 md:col-span-4 mb-6 py-3 px-12\">\n          <div className=\"shadow-md border p-5 flex flex-col rounded-md\">\n            {praloading ? (\n              <Spin />\n            ) : (\n              <Form\n                form={instanceForm}\n                layout=\"vertical\"\n                onFinish={() => {\n                  setmodalupdate(true);\n                }}\n                initialValues={updatedata}\n              >\n                {/* <Form.Item name=\"model_id\" label=\"Nama Model\"\n                                        rules={[\n                                            {\n                                                required: true,\n                                                message: 'Model wajib dipilih',\n                                            },\n                                        ]}>\n                                        <Select disabled defaultValue={updatedata.model_id}>\n                                            {\n                                                modeldata.map((doc, idx) => (\n                                                    <Select.Option value={doc.id}>{doc.name}</Select.Option>\n                                                ))\n                                            }\n                                        </Select>\n                                    </Form.Item> */}\n                <Form.Item\n                  name=\"model_id\"\n                  label={\n                    <div className=\"flex\">\n                      <span className=\"judulModel\"></span>\n                      <p className=\"mb-0 ml-1\">Nama Model</p>\n                      <style jsx>\n                        {`\n                                            .judulModel::before{\n                                                content: '*';\n                                                color: red;\n                                            }\n                                        `}\n                      </style>\n                    </div>\n                  }\n                >\n                  <div className=\"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\">\n                    {updatedata.model_inventory.name}\n                  </div>\n                </Form.Item>\n                <Form.Item\n                  name=\"model_id\"\n                  label={\n                    <div className=\"flex\">\n                      <span className=\"judulField\"></span>\n                      <p className=\"mb-0 ml-1\">Asset Type</p>\n                      <style jsx>\n                        {`\n                                            .judulField::before{\n                                                content: '*';\n                                                color: red;\n                                            }\n                                        `}\n                      </style>\n                    </div>\n                  }\n                >\n                  <div className=\"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\">\n                    {updatedata.model_inventory.asset.name}\n                  </div>\n                </Form.Item>\n                {/* <Form.Item name=\"inventory_name\" label=\"Nama Item\"\n                                        rules={[\n                                            {\n                                                required: true,\n                                                message: 'Nama Item wajib diisi',\n                                            },\n                                        ]}>\n                                        <Input name=\"inventory_name\" defaultValue={updatedata.inventory_name} onChange={(e) => { setupdatedata({ ...updatedata, inventory_name: e.target.value }) }} />\n                                    </Form.Item> */}\n                <Form.Item\n                  name=\"mig_id\"\n                  label=\"MIG ID\"\n                  rules={[\n                    {\n                      required: true,\n                      message: \"MIG ID wajib diisi\",\n                    },\n                  ]}\n                >\n                  <Input\n                    disabled\n                    name=\"mig_id\"\n                    defaultValue={updatedata.mig_id}\n                    onChange={(e) => {\n                      setupdatedata({ ...updatedata, mig_id: e.target.value });\n                    }}\n                  />\n                </Form.Item>\n                <Form.Item\n                  name=\"status_condition\"\n                  label=\"Kondisi\"\n                  rules={[\n                    {\n                      required: true,\n                      message: \"Kondisi wajib dipilih\",\n                    },\n                  ]}\n                >\n                  <Select\n                    disabled\n                    defaultValue={updatedata.status_condition}\n                    onChange={(value) => {\n                      setupdatedata({ ...updatedata, status_condition: value });\n                    }}\n                  >\n                    <Select.Option value={1}>\n                      <div className=\"p-1 flex w-full items-center\">\n                        <div className=\"w-3 h-3 rounded-full bg-green-500 mr-1\"></div>\n                        <p className=\"mb-0\">Good</p>\n                      </div>\n                    </Select.Option>\n                    <Select.Option value={2}>\n                      <div className=\"p-1 flex w-full items-center\">\n                        <div className=\"w-3 h-3 rounded-full bg-gray-500 mr-1\"></div>\n                        <p className=\"mb-0\">Grey</p>\n                      </div>\n                    </Select.Option>\n                    <Select.Option value={3}>\n                      <div className=\"p-1 flex w-full items-center\">\n                        <div className=\"w-3 h-3 rounded-full bg-red-500 mr-1\"></div>\n                        <p className=\"mb-0\">Bad</p>\n                      </div>\n                    </Select.Option>\n                  </Select>\n                </Form.Item>\n                <Form.Item\n                  name=\"status_usage\"\n                  label=\"Status Pemakaian\"\n                  rules={[\n                    {\n                      required: true,\n                      message: \"Status Pemakaian wajib dipilih\",\n                    },\n                  ]}\n                >\n                  <Select\n                    disabled\n                    defaultValue={updatedata.status_usage}\n                    onChange={(value) => {\n                      setupdatedata({ ...updatedata, status_usage: value });\n                    }}\n                  >\n                    <Select.Option value={1}>In Used</Select.Option>\n                    <Select.Option value={2}>In Stock</Select.Option>\n                    <Select.Option value={3}>Replacement</Select.Option>\n                  </Select>\n                </Form.Item>\n                {snitem ? (\n                  <Form.Item\n                    name=\"serial_number\"\n                    label=\"Serial Number\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Serial Number wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      defaultValue={updatedata.serial_number}\n                      name=\"serial_number\"\n                      onChange={(e) => {\n                        setupdatedata({\n                          ...updatedata,\n                          serial_number: e.target.value,\n                        });\n                      }}\n                    />\n                  </Form.Item>\n                ) : (\n                  <Form.Item name=\"serial_number\" label=\"Serial Number\">\n                    <Input\n                      defaultValue={updatedata.serial_number}\n                      name=\"serial_number\"\n                      onChange={(e) => {\n                        setupdatedata({\n                          ...updatedata,\n                          serial_number: e.target.value,\n                        });\n                      }}\n                    />\n                  </Form.Item>\n                )}\n                <Form.Item name=\"location\" label=\"Location\">\n                  <TreeSelect\n                    defaultValue={updatedata.location}\n                    treeDefaultExpandedKeys={[invrelations.tree_companies.key]}\n                    placeholder=\"Pilih Location\"\n                    treeData={[invrelations.tree_companies]}\n                    onChange={(value) => {\n                      setupdatedata({ ...updatedata, location: value });\n                    }}\n                  ></TreeSelect>\n                </Form.Item>\n                <Form.Item name=\"vendor_id\" label=\"Vendor\">\n                  <Select\n                    defaultValue={updatedata.vendor_id}\n                    onChange={(value) => {\n                      setupdatedata({ ...updatedata, vendor_id: value });\n                    }}\n                  >\n                    {invrelations.vendors.map((doc, idx) => {\n                      return (\n                        <Select.Option value={doc.id}>{doc.name}</Select.Option>\n                      );\n                    })}\n                  </Select>\n                </Form.Item>\n                {manuffielditem ? (\n                  <Form.Item name=\"manufacturer_id\" label=\"Manufacturer\">\n                    <Select\n                      defaultValue={updatedata.manufacturer_id}\n                      placeholder=\"Pilih Manufacturer\"\n                      onChange={(value) => {\n                        setupdatedata({\n                          ...updatedata,\n                          manufacturer_id: value,\n                        });\n                      }}\n                    >\n                      {invrelations.manufacturers\n                        .filter((docfil) => docfil.deleted_at === null)\n                        .map((doc, idx) => {\n                          return (\n                            <Select.Option value={doc.id}>\n                              {doc.name}\n                            </Select.Option>\n                          );\n                        })}\n                    </Select>\n                  </Form.Item>\n                ) : null}\n                <Form.Item name=\"deskripsi\" label=\"Deskripsi\">\n                  <Input.TextArea\n                    defaultValue={updatedata.deskripsi}\n                    rows={4}\n                    name=\"deskripsi\"\n                    onChange={(e) => {\n                      setupdatedata({\n                        ...updatedata,\n                        deskripsi: e.target.value,\n                      });\n                    }}\n                  />\n                </Form.Item>\n              </Form>\n            )}\n          </div>\n        </div>\n        <div className=\"col-span-1 md:col-span-4 mb-6 py-3 px-12\">\n          <div className=\"mb-3\">\n            <h1 className=\"font-bold text-xl\">Spesifikasi Item</h1>\n          </div>\n          <div className=\"shadow-md border p-5 flex flex-col rounded-md\">\n            {praloading ? (\n              <Spin />\n            ) : (\n              <>\n                {updatedata.additional_attributes.length === 0 ? (\n                  <Empty image={Empty.PRESENTED_IMAGE_SIMPLE}></Empty>\n                ) : (\n                  <Form layout=\"vertical\" form={instanceForm2}>\n                    {updatedata.additional_attributes.map(\n                      (docinvvalue, idxinvvalue) => {\n                        if (docinvvalue.required) {\n                          return (\n                            <Form.Item\n                              name={docinvvalue.name}\n                              label={\n                                <div className=\"flex\">\n                                  <span className=\"judulField\"></span>\n                                  <p className=\"mb-0 ml-1\">\n                                    {docinvvalue.name}\n                                  </p>\n                                  <style jsx>\n                                    {`\n                                                                                .judulField::before{\n                                                                                    content: '*';\n                                                                                    color: red;\n                                                                                }\n                                                                            `}\n                                  </style>\n                                </div>\n                              }\n                            >\n                              <>\n                                {docinvvalue.data_type === \"dropdown\" && (\n                                  <>\n                                    <Select\n                                      allowClear\n                                      defaultValue={docinvvalue.value.default}\n                                      style={{\n                                        width: `100%`,\n                                        borderColor: `red`,\n                                      }}\n                                      onChange={(value, label) => {\n                                        if (typeof value === \"undefined\") {\n                                          setdisabledfield(true);\n                                        } else {\n                                          setdisabledfield(false);\n                                          setupdatedata((prev) => {\n                                            var temp = prev;\n                                            const idxfield =\n                                              temp.inventory_values\n                                                .map((docname) => docname.id)\n                                                .indexOf(docinvvalue.id);\n                                            if (idxfield === -1) {\n                                              temp.inventory_values.push({\n                                                id: docinvvalue.id,\n                                                data_type:\n                                                  docinvvalue.data_type,\n                                                value: {\n                                                  default: value,\n                                                  opsi: docinvvalue.value.opsi,\n                                                },\n                                              });\n                                            } else {\n                                              temp.inventory_values[idxfield] =\n                                                {\n                                                  id: docinvvalue.id,\n                                                  data_type:\n                                                    docinvvalue.data_type,\n                                                  value: {\n                                                    default: value,\n                                                    opsi: docinvvalue.value\n                                                      .opsi,\n                                                  },\n                                                };\n                                            }\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    >\n                                      {docinvvalue.value.opsi.map(\n                                        (doc2, idx2) => (\n                                          <Select.Option\n                                            key={doc2}\n                                            value={idx2}\n                                          >\n                                            {doc2}\n                                          </Select.Option>\n                                        )\n                                      )}\n                                    </Select>\n                                    {disabledfield ? (\n                                      <p className=\" text-red-500 mb-0\">\n                                        {docinvvalue.name} harus dipilih\n                                      </p>\n                                    ) : null}\n                                  </>\n                                )}\n                                {docinvvalue.data_type === \"checkbox\" && (\n                                  <div className=\"w-full flex flex-col\">\n                                    {docinvvalue.value.opsi.map(\n                                      (doc3, idx3) => {\n                                        return (\n                                          <div className=\"flex mb-1\">\n                                            <Checkbox\n                                              defaultChecked={docinvvalue.value.default.includes(\n                                                idx3\n                                              )}\n                                              style={{ marginRight: `0.5rem` }}\n                                              onChange={(e) => {\n                                                if (\n                                                  docinvvalue.value.default\n                                                    .length === 0\n                                                ) {\n                                                  setdisabledfield(true);\n                                                } else {\n                                                  setdisabledfield(false);\n                                                  setupdatedata((prev) => {\n                                                    var temp = prev;\n                                                    const idxfield =\n                                                      temp.inventory_values\n                                                        .map(\n                                                          (docname) =>\n                                                            docname.id\n                                                        )\n                                                        .indexOf(\n                                                          docinvvalue.id\n                                                        );\n                                                    if (idxfield === -1) {\n                                                      console.log(\"1\");\n                                                      if (\n                                                        e.target.checked ===\n                                                        true\n                                                      ) {\n                                                        console.log(\"1.1\");\n                                                        docinvvalue.value.default.push(\n                                                          idx3\n                                                        );\n                                                        temp.inventory_values.push(\n                                                          {\n                                                            id: docinvvalue.id,\n                                                            data_type:\n                                                              docinvvalue.data_type,\n                                                            value:\n                                                              docinvvalue.value,\n                                                          }\n                                                        );\n                                                      } else {\n                                                        console.log(\"1.2\");\n                                                        var idxtoremove =\n                                                          docinvvalue.value.default.indexOf(\n                                                            idx3\n                                                          );\n                                                        docinvvalue.value.default.splice(\n                                                          idxtoremove,\n                                                          1\n                                                        );\n                                                        temp.inventory_values.push(\n                                                          {\n                                                            id: docinvvalue.id,\n                                                            data_type:\n                                                              docinvvalue.data_type,\n                                                            value:\n                                                              docinvvalue.value,\n                                                          }\n                                                        );\n                                                      }\n                                                    } else {\n                                                      console.log(\"2\");\n                                                      if (\n                                                        e.target.checked ===\n                                                        true\n                                                      ) {\n                                                        console.log(\"2.1\");\n                                                        // temp.inventory_values[idxfield].value.default.push(idx3)\n                                                        docinvvalue.value.default.push(\n                                                          idx3\n                                                        );\n                                                        temp.inventory_values[\n                                                          idxfield\n                                                        ] = {\n                                                          id: docinvvalue.id,\n                                                          data_type:\n                                                            docinvvalue.data_type,\n                                                          value:\n                                                            docinvvalue.value,\n                                                        };\n                                                      } else {\n                                                        console.log(\"2.2\");\n                                                        var idxtoremove =\n                                                          temp.inventory_values[\n                                                            idxfield\n                                                          ].value.default.indexOf(\n                                                            idx3\n                                                          );\n                                                        temp.inventory_values[\n                                                          idxfield\n                                                        ].value.default.splice(\n                                                          idxtoremove,\n                                                          1\n                                                        );\n                                                      }\n                                                    }\n                                                    return temp;\n                                                  });\n                                                }\n                                              }}\n                                            ></Checkbox>\n                                            <p className=\"mb-0\">{doc3}</p>\n                                          </div>\n                                        );\n                                      }\n                                    )}\n                                    {disabledfield ? (\n                                      <p className=\" text-red-500 mb-0\">\n                                        {docinvvalue.name} harus dipilih\n                                      </p>\n                                    ) : null}\n                                  </div>\n                                )}\n                                {docinvvalue.data_type === \"date\" && (\n                                  <>\n                                    <DatePicker\n                                      /*style={dynamicfielditem[idxinvvalue].value === \"\" ? { borderColor: `red` } : null}*/ defaultValue={\n                                        docinvvalue.value === \"\"\n                                          ? null\n                                          : moment(docinvvalue.value)\n                                      }\n                                      onChange={(date, datestring) => {\n                                        if (datestring === \"\") {\n                                          setdisabledfield(true);\n                                        } else {\n                                          setdisabledfield(false);\n                                          setupdatedata((prev) => {\n                                            var temp = prev;\n                                            const idxfield =\n                                              temp.inventory_values\n                                                .map((docname) => docname.id)\n                                                .indexOf(docinvvalue.id);\n                                            if (idxfield === -1) {\n                                              temp.inventory_values.push({\n                                                id: docinvvalue.id,\n                                                data_type:\n                                                  docinvvalue.data_type,\n                                                value:\n                                                  datestring === \"\"\n                                                    ? null\n                                                    : datestring,\n                                              });\n                                            } else {\n                                              temp.inventory_values[\n                                                idxfield\n                                              ].value = datestring;\n                                            }\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    ></DatePicker>\n                                    {disabledfield ? (\n                                      <p className=\" text-red-500 mb-0\">\n                                        {docinvvalue.name} harus dipilih\n                                      </p>\n                                    ) : null}\n                                  </>\n                                )}\n                                {docinvvalue.data_type === \"paragraph\" && (\n                                  <>\n                                    <Input.TextArea\n                                      rows={4}\n                                      defaultValue={docinvvalue.value}\n                                      onChange={(e) => {\n                                        if (e.target.value === \"\") {\n                                          setdisabledfield(true);\n                                        } else {\n                                          setdisabledfield(false);\n                                          setupdatedata((prev) => {\n                                            var temp = prev;\n                                            const idxfield =\n                                              temp.inventory_values\n                                                .map((docname) => docname.id)\n                                                .indexOf(docinvvalue.id);\n                                            if (idxfield === -1) {\n                                              temp.inventory_values.push({\n                                                id: docinvvalue.id,\n                                                data_type:\n                                                  docinvvalue.data_type,\n                                                value: e.target.value,\n                                              });\n                                            } else {\n                                              temp.inventory_values[\n                                                idxfield\n                                              ].value = e.target.value;\n                                            }\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    ></Input.TextArea>\n                                    {disabledfield ? (\n                                      <p className=\" text-red-500 mb-0\">\n                                        {docinvvalue.name} harus diisi\n                                      </p>\n                                    ) : null}\n                                  </>\n                                )}\n                                {docinvvalue.data_type === \"number\" && (\n                                  <>\n                                    <InputNumber\n                                      allowClear\n                                      defaultValue={docinvvalue.value}\n                                      onChange={(value) => {\n                                        if (value === \"\" || value === null) {\n                                          setdisabledfield(true);\n                                        } else {\n                                          setdisabledfield(false);\n                                          setupdatedata((prev) => {\n                                            var temp = prev;\n                                            const idxfield =\n                                              temp.inventory_values\n                                                .map((docname) => docname.id)\n                                                .indexOf(docinvvalue.id);\n                                            if (idxfield === -1) {\n                                              temp.inventory_values.push({\n                                                id: docinvvalue.id,\n                                                data_type:\n                                                  docinvvalue.data_type,\n                                                value:\n                                                  value === \"\" || value === null\n                                                    ? \"\"\n                                                    : `${value}`,\n                                              });\n                                            } else {\n                                              temp.inventory_values[\n                                                idxfield\n                                              ].value = `${value}`;\n                                            }\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    ></InputNumber>\n                                    {disabledfield ? (\n                                      <p className=\" text-red-500 mb-0\">\n                                        {docinvvalue.name} harus diisi\n                                      </p>\n                                    ) : null}\n                                  </>\n                                )}\n                                {docinvvalue.data_type === \"single\" && (\n                                  <>\n                                    <Input\n                                      defaultValue={docinvvalue.value}\n                                      onChange={(e) => {\n                                        if (e.target.value === \"\") {\n                                          setdisabledfield(true);\n                                        } else {\n                                          setdisabledfield(false);\n                                          setupdatedata((prev) => {\n                                            var temp = prev;\n                                            const idxfield =\n                                              temp.inventory_values\n                                                .map((docname) => docname.id)\n                                                .indexOf(docinvvalue.id);\n                                            if (idxfield === -1) {\n                                              temp.inventory_values.push({\n                                                id: docinvvalue.id,\n                                                data_type:\n                                                  docinvvalue.data_type,\n                                                value: e.target.value,\n                                              });\n                                            } else {\n                                              temp.inventory_values[\n                                                idxfield\n                                              ].value = e.target.value;\n                                            }\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    ></Input>\n                                    {disabledfield ? (\n                                      <p className=\" text-red-500 mb-0\">\n                                        {docinvvalue.name} harus diisi\n                                      </p>\n                                    ) : null}\n                                  </>\n                                )}\n                                {docinvvalue.data_type === \"String\" && (\n                                  <>\n                                    <Input\n                                      defaultValue={docinvvalue.value}\n                                      onChange={(e) => {\n                                        if (e.target.value === \"\") {\n                                          setdisabledfield(true);\n                                        } else {\n                                          setdisabledfield(false);\n                                          setupdatedata((prev) => {\n                                            var temp = prev;\n                                            const idxfield =\n                                              temp.inventory_values\n                                                .map((docname) => docname.id)\n                                                .indexOf(docinvvalue.id);\n                                            if (idxfield === -1) {\n                                              temp.inventory_values.push({\n                                                id: docinvvalue.id,\n                                                data_type:\n                                                  docinvvalue.data_type,\n                                                value: e.target.value,\n                                              });\n                                            } else {\n                                              temp.inventory_values[\n                                                idxfield\n                                              ].value = e.target.value;\n                                            }\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    ></Input>\n                                    {disabledfield ? (\n                                      <p className=\" text-red-500 mb-0\">\n                                        {docinvvalue.name} harus diisi\n                                      </p>\n                                    ) : null}\n                                  </>\n                                )}\n                              </>\n                            </Form.Item>\n                          );\n                        } else {\n                          return (\n                            <Form.Item\n                              name={docinvvalue.name}\n                              label={docinvvalue.name}\n                            >\n                              <>\n                                {docinvvalue.data_type === \"dropdown\" && (\n                                  <Select\n                                    defaultValue={docinvvalue.value.default}\n                                    style={{ width: `100%` }}\n                                    onChange={(value, label) => {\n                                      setupdatedata((prev) => {\n                                        var temp = prev;\n                                        const idxfield = temp.inventory_values\n                                          .map((docname) => docname.id)\n                                          .indexOf(docinvvalue.id);\n                                        if (idxfield === -1) {\n                                          // temp.inventory_values[idxfield].value.default = value\n                                          temp.inventory_values.push({\n                                            id: docinvvalue.id,\n                                            data_type: docinvvalue.data_type,\n                                            value: {\n                                              default: value,\n                                              opsi: docinvvalue.value.opsi,\n                                            },\n                                          });\n                                        } else {\n                                          temp.inventory_values[idxfield] = {\n                                            id: docinvvalue.id,\n                                            data_type: docinvvalue.data_type,\n                                            value: {\n                                              default: value,\n                                              opsi: docinvvalue.value.opsi,\n                                            },\n                                          };\n                                        }\n                                        return temp;\n                                      });\n                                    }}\n                                  >\n                                    {docinvvalue.value.opsi.map(\n                                      (doc2, idx2) => (\n                                        <Select.Option key={doc2} value={idx2}>\n                                          {doc2}\n                                        </Select.Option>\n                                      )\n                                    )}\n                                  </Select>\n                                )}\n                                {docinvvalue.data_type === \"checkbox\" && (\n                                  <div className=\"w-full flex flex-col\">\n                                    {docinvvalue.value.opsi.map(\n                                      (doc3, idx3) => {\n                                        return (\n                                          <div className=\"flex mb-1\">\n                                            <Checkbox\n                                              defaultChecked={docinvvalue.value.default.includes(\n                                                idx3\n                                              )}\n                                              style={{ marginRight: `0.5rem` }}\n                                              onChange={(e) => {\n                                                setupdatedata((prev) => {\n                                                  var temp = prev;\n                                                  const idxfield =\n                                                    temp.inventory_values\n                                                      .map(\n                                                        (docname) => docname.id\n                                                      )\n                                                      .indexOf(docinvvalue.id);\n                                                  if (idxfield === -1) {\n                                                    console.log(\"1\");\n                                                    if (\n                                                      e.target.checked === true\n                                                    ) {\n                                                      console.log(\"1.1\");\n                                                      docinvvalue.value.default.push(\n                                                        idx3\n                                                      );\n                                                      temp.inventory_values.push(\n                                                        {\n                                                          id: docinvvalue.id,\n                                                          data_type:\n                                                            docinvvalue.data_type,\n                                                          value:\n                                                            docinvvalue.value,\n                                                        }\n                                                      );\n                                                    } else {\n                                                      console.log(\"1.2\");\n                                                      var idxtoremove =\n                                                        docinvvalue.value.default.indexOf(\n                                                          idx3\n                                                        );\n                                                      docinvvalue.value.default.splice(\n                                                        idxtoremove,\n                                                        1\n                                                      );\n                                                      temp.inventory_values.push(\n                                                        {\n                                                          id: docinvvalue.id,\n                                                          data_type:\n                                                            docinvvalue.data_type,\n                                                          value:\n                                                            docinvvalue.value,\n                                                        }\n                                                      );\n                                                    }\n                                                  } else {\n                                                    console.log(\"2\");\n                                                    if (\n                                                      e.target.checked === true\n                                                    ) {\n                                                      console.log(\"2.1\");\n                                                      // temp.inventory_values[idxfield].value.default.push(idx3)\n                                                      docinvvalue.value.default.push(\n                                                        idx3\n                                                      );\n                                                      temp.inventory_values[\n                                                        idxfield\n                                                      ] = {\n                                                        id: docinvvalue.id,\n                                                        data_type:\n                                                          docinvvalue.data_type,\n                                                        value:\n                                                          docinvvalue.value,\n                                                      };\n                                                    } else {\n                                                      console.log(\"2.2\");\n                                                      var idxtoremove =\n                                                        temp.inventory_values[\n                                                          idxfield\n                                                        ].value.default.indexOf(\n                                                          idx3\n                                                        );\n                                                      temp.inventory_values[\n                                                        idxfield\n                                                      ].value.default.splice(\n                                                        idxtoremove,\n                                                        1\n                                                      );\n                                                    }\n                                                  }\n                                                  return temp;\n                                                });\n                                              }}\n                                            ></Checkbox>\n                                            <p className=\"mb-0\">{doc3}</p>\n                                          </div>\n                                        );\n                                      }\n                                    )}\n                                  </div>\n                                )}\n                                {docinvvalue.data_type === \"date\" && (\n                                  <DatePicker\n                                    defaultValue={\n                                      docinvvalue.value === \"\"\n                                        ? null\n                                        : moment(docinvvalue.value)\n                                    }\n                                    onChange={(date, datestring) => {\n                                      console.log(datestring);\n                                      setupdatedata((prev) => {\n                                        var temp = prev;\n                                        const idxfield = temp.inventory_values\n                                          .map((docname) => docname.id)\n                                          .indexOf(docinvvalue.id);\n                                        if (idxfield === -1) {\n                                          temp.inventory_values.push({\n                                            id: docinvvalue.id,\n                                            data_type: docinvvalue.data_type,\n                                            value:\n                                              datestring === \"\"\n                                                ? null\n                                                : datestring,\n                                          });\n                                        } else {\n                                          temp.inventory_values[\n                                            idxfield\n                                          ].value = datestring;\n                                        }\n                                        return temp;\n                                      });\n                                    }}\n                                  ></DatePicker>\n                                )}\n                                {docinvvalue.data_type === \"paragraph\" && (\n                                  <Input.TextArea\n                                    rows={4}\n                                    defaultValue={docinvvalue.value}\n                                    onChange={(e) => {\n                                      setupdatedata((prev) => {\n                                        var temp = prev;\n                                        const idxfield = temp.inventory_values\n                                          .map((docname) => docname.id)\n                                          .indexOf(docinvvalue.id);\n                                        if (idxfield === -1) {\n                                          temp.inventory_values.push({\n                                            id: docinvvalue.id,\n                                            data_type: docinvvalue.data_type,\n                                            value: e.target.value,\n                                          });\n                                        } else {\n                                          temp.inventory_values[\n                                            idxfield\n                                          ].value = e.target.value;\n                                        }\n                                        return temp;\n                                      });\n                                    }}\n                                  ></Input.TextArea>\n                                )}\n                                {docinvvalue.data_type === \"number\" && (\n                                  <InputNumber\n                                    defaultValue={docinvvalue.value}\n                                    onChange={(value) => {\n                                      setupdatedata((prev) => {\n                                        var temp = prev;\n                                        const idxfield = temp.inventory_values\n                                          .map((docname) => docname.id)\n                                          .indexOf(docinvvalue.id);\n                                        if (idxfield === -1) {\n                                          temp.inventory_values.push({\n                                            id: docinvvalue.id,\n                                            data_type: docinvvalue.data_type,\n                                            value: `${value}`,\n                                          });\n                                        } else {\n                                          temp.inventory_values[\n                                            idxfield\n                                          ].value = `${value}`;\n                                        }\n                                        return temp;\n                                      });\n                                    }}\n                                  ></InputNumber>\n                                )}\n                                {docinvvalue.data_type === \"single\" && (\n                                  <Input\n                                    defaultValue={docinvvalue.value}\n                                    onChange={(e) => {\n                                      setupdatedata((prev) => {\n                                        var temp = prev;\n                                        const idxfield = temp.inventory_values\n                                          .map((docname) => docname.id)\n                                          .indexOf(docinvvalue.id);\n                                        if (idxfield === -1) {\n                                          temp.inventory_values.push({\n                                            id: docinvvalue.id,\n                                            data_type: docinvvalue.data_type,\n                                            value: e.target.value,\n                                          });\n                                        } else {\n                                          temp.inventory_values[\n                                            idxfield\n                                          ].value = e.target.value;\n                                        }\n                                        return temp;\n                                      });\n                                    }}\n                                  ></Input>\n                                )}\n                                {docinvvalue.data_type === \"String\" && (\n                                  <Input\n                                    defaultValue={docinvvalue.value}\n                                    onChange={(e) => {\n                                      setupdatedata((prev) => {\n                                        var temp = prev;\n                                        const idxfield = temp.inventory_values\n                                          .map((docname) => docname.id)\n                                          .indexOf(docinvvalue.id);\n                                        if (idxfield === -1) {\n                                          temp.inventory_values.push({\n                                            id: docinvvalue.id,\n                                            data_type: docinvvalue.data_type,\n                                            value: e.target.value,\n                                          });\n                                        } else {\n                                          temp.inventory_values[\n                                            idxfield\n                                          ].value = e.target.value;\n                                        }\n                                        return temp;\n                                      });\n                                    }}\n                                  ></Input>\n                                )}\n                              </>\n                            </Form.Item>\n                          );\n                        }\n                      }\n                    )}\n                  </Form>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n      <Modal\n        title={\n          <h1 className=\"font-semibold\">\n            Apakah anda yakin ingin mengubah item \"{updatedata.inventory_name}\"?\n          </h1>\n        }\n        visible={modalupdate}\n        onCancel={() => {\n          setmodalupdate(false);\n        }}\n        okText=\"Ya\"\n        cancelText=\"Tidak\"\n        onOk={handleUpdateItem}\n        okButtonProps={{ loading: loadingupdate }}\n      >\n        <div className=\"flex flex-col\">\n          <div className=\"flex flex-col\">\n            <p className=\"mb-0\">Notes</p>\n            <Input\n              placeholder=\"Masukkan Notes\"\n              onChange={(e) => {\n                setupdatedata((prev) => {\n                  var temp = prev;\n                  temp.notes = e.target.value;\n                  return temp;\n                });\n              }}\n            ></Input>\n          </div>\n        </div>\n      </Modal>\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res, params }) {\n  const itemid = params.itemId;\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"3\",\n      itemid,\n    },\n  };\n}\n\nexport default ItemUpdate;\n"]},"metadata":{},"sourceType":"module"}