{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Empty from \"antd/lib/empty\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Select from \"antd/lib/select\";\nimport _Input from \"antd/lib/input\";\nimport _Spin from \"antd/lib/spin\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _Collapse from \"antd/lib/collapse\";\nimport _Form from \"antd/lib/form\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { QuestionCircleOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../components/layout-dashboard2\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ItemUpdate = ({\n  initProps,\n  dataProfile,\n  sidemenu,\n  itemid\n}) => {\n  var _updatedata$model_inv;\n\n  // 1.Init\n  const rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 2);\n  pathArr[pathArr.length - 1] = \"Ubah Item\";\n\n  const [instanceForm] = _Form.useForm();\n\n  const [instanceForm2] = _Form.useForm();\n\n  const {\n    Panel\n  } = _Collapse; //2.useState\n\n  const {\n    0: updatedata,\n    1: setupdatedata\n  } = useState({\n    id: Number(itemid),\n    model_id: \"\",\n    is_consumable: false,\n    vendor_id: \"\",\n    inventory_name: \"\",\n    status_condition: \"\",\n    status_usage: \"\",\n    serial_number: \"\",\n    location: \"\",\n    is_exist: true,\n    deskripsi: \"\",\n    manufacturer_id: \"\",\n    mig_id: \"\",\n    notes: \"\",\n    additional_attributes: [],\n    inventory_values: []\n  });\n  const {\n    0: invrelations,\n    1: setinvrelations\n  } = useState({\n    models: [],\n    assets: [],\n    manufacturers: [],\n    status_condition: [],\n    status_usage: [],\n    vendors: [],\n    companies: [],\n    tree_companies: []\n  });\n  const {\n    0: modeldata,\n    1: setmodeldata\n  } = useState([]);\n  const {\n    0: snitem,\n    1: setsnitem\n  } = useState(false);\n  const {\n    0: manuffielditem,\n    1: setmanuffielditem\n  } = useState(true);\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true);\n  const {\n    0: loadingupdate,\n    1: setloadingupdate\n  } = useState(false);\n  const {\n    0: modalupdate,\n    1: setmodalupdate\n  } = useState(false);\n  const {\n    0: disabledfield,\n    1: setdisabledfield\n  } = useState(true); //handler\n\n  const handleUpdateItem = () => {\n    const invcolumns = updatedata.inventory_values.map((doc, idx) => {\n      if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n        return _objectSpread(_objectSpread({}, doc), {}, {\n          value: JSON.stringify(doc.value)\n        });\n      } else {\n        return _objectSpread({}, doc);\n      }\n    });\n\n    const finalres = _objectSpread(_objectSpread({}, updatedata), {}, {\n      inventory_values: invcolumns\n    });\n\n    setloadingupdate(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateInventory`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(finalres)\n    }).then(res => res.json()).then(res2 => {\n      setloadingupdate(false);\n      setmodalupdate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Item berhasil diubah\",\n          duration: 3\n        });\n\n        rt.push(`/items/detail/${itemid}`);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventory?id=${itemid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      var t = {};\n\n      for (var prop in res2.data) {\n        if (prop === \"additional_attributes\") {\n          t[prop] = res2.data[prop].map((doc, idx) => {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return _objectSpread(_objectSpread({}, doc), {}, {\n                value: JSON.parse(doc.value)\n              });\n            } else {\n              return _objectSpread({}, doc);\n            }\n          });\n        } else {\n          t[prop] = res2.data[prop];\n        }\n      }\n\n      setdisabledfield(prev => {\n        if (t.additional_attributes.filter(doc => doc.required).every(docsome => docsome.value !== null || docsome.value !== \"\" || docsome.value !== \"-\" || docsome.value.default !== \"-\" || docsome.value.default.length !== 0)) {\n          return false;\n        } else {\n          return true;\n        }\n      });\n      setupdatedata(_objectSpread(_objectSpread({}, t), {}, {\n        id: Number(itemid),\n        inventory_values: [],\n        notes: \"\"\n      }));\n      setpraloading(false);\n      return res2.data.model_id;\n    }).then(res3 => {\n      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?rows=50`, {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(res => res.json()).then(res2 => {\n        setmodeldata(res2.data.data);\n        setsnitem(res2.data.data.serial_number === null ? false : true);\n      });\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryRelations`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setinvrelations(res2.data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxs(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8 p-3\",\n        children: /*#__PURE__*/_jsx(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" col-span-4 flex justify-between pt-4 border-t-2 border-b-2 bg-white\",\n            children: [/*#__PURE__*/_jsxs(\"h1\", {\n              className: \"font-bold text-xl py-2\",\n              children: [\"Form Ubah Item - \", updatedata.mig_id, \" -\", \" \", (_updatedata$model_inv = updatedata.model_inventory) === null || _updatedata$model_inv === void 0 ? void 0 : _updatedata$model_inv.name]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsx(Link, {\n                href: `/items/detail/${itemid}`,\n                children: /*#__PURE__*/_jsx(_Button, {\n                  type: \"default\"\n                  /*onClick={() => { console.log(updatedata); console.log(disabledfield) }}*/\n                  ,\n                  children: \"Batal\"\n                })\n              }), /*#__PURE__*/_jsx(_Button, {\n                disabled: disabledfield,\n                type: \"primary\",\n                onClick: () => {\n                  instanceForm.submit();\n                },\n                children: \"Simpan\"\n              })]\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-span-1 md:col-span-4 mb-6 py-3 px-12\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"shadow-md border p-5 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsx(_Spin, {}) : /*#__PURE__*/_jsxs(_Form, {\n            form: instanceForm,\n            layout: \"vertical\",\n            onFinish: () => {\n              setmodalupdate(true);\n            },\n            initialValues: updatedata,\n            children: [/*#__PURE__*/_jsx(_Form.Item, {\n              name: \"model_id\",\n              label: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-2971843529\" + \" \" + \"flex\",\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-2971843529\" + \" \" + \"judulModel\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-2971843529\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Nama Model\"\n                }), /*#__PURE__*/_jsx(_JSXStyle, {\n                  id: \"2971843529\",\n                  children: [\".judulModel.jsx-2971843529::before{content:'*';color:red;}\"]\n                })]\n              }),\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\",\n                children: updatedata.model_inventory.name\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"model_id\",\n              label: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-2020802904\" + \" \" + \"flex\",\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-2020802904\" + \" \" + \"judulField\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-2020802904\" + \" \" + \"mb-0 ml-1\",\n                  children: \"Asset Type\"\n                }), /*#__PURE__*/_jsx(_JSXStyle, {\n                  id: \"2020802904\",\n                  children: [\".judulField.jsx-2020802904::before{content:'*';color:red;}\"]\n                })]\n              }),\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\",\n                children: updatedata.model_inventory.asset.name\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"mig_id\",\n              label: \"MIG ID\",\n              rules: [{\n                required: true,\n                message: \"MIG ID wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsx(_Input, {\n                disabled: true,\n                name: \"mig_id\",\n                defaultValue: updatedata.mig_id,\n                onChange: e => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    mig_id: e.target.value\n                  }));\n                }\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"status_condition\",\n              label: \"Kondisi\",\n              rules: [{\n                required: true,\n                message: \"Kondisi wajib dipilih\"\n              }],\n              children: /*#__PURE__*/_jsxs(_Select, {\n                disabled: true,\n                defaultValue: updatedata.status_condition,\n                onChange: value => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    status_condition: value\n                  }));\n                },\n                children: [/*#__PURE__*/_jsx(_Select.Option, {\n                  value: 1,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"p-1 flex w-full items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-3 h-3 rounded-full bg-green-500 mr-1\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0\",\n                      children: \"Good\"\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 2,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"p-1 flex w-full items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-3 h-3 rounded-full bg-gray-500 mr-1\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0\",\n                      children: \"Grey\"\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 3,\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"p-1 flex w-full items-center\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-3 h-3 rounded-full bg-red-500 mr-1\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"mb-0\",\n                      children: \"Bad\"\n                    })]\n                  })\n                })]\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"status_usage\",\n              label: \"Status Pemakaian\",\n              rules: [{\n                required: true,\n                message: \"Status Pemakaian wajib dipilih\"\n              }],\n              children: /*#__PURE__*/_jsxs(_Select, {\n                disabled: true,\n                defaultValue: updatedata.status_usage,\n                onChange: value => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    status_usage: value\n                  }));\n                },\n                children: [/*#__PURE__*/_jsx(_Select.Option, {\n                  value: 1,\n                  children: \"In Used\"\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 2,\n                  children: \"In Stock\"\n                }), /*#__PURE__*/_jsx(_Select.Option, {\n                  value: 3,\n                  children: \"Replacement\"\n                })]\n              })\n            }), snitem ? /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"serial_number\",\n              label: \"Serial Number\",\n              rules: [{\n                required: true,\n                message: \"Serial Number wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsx(_Input, {\n                defaultValue: updatedata.serial_number,\n                name: \"serial_number\",\n                onChange: e => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    serial_number: e.target.value\n                  }));\n                }\n              })\n            }) : /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"serial_number\",\n              label: \"Serial Number\",\n              children: /*#__PURE__*/_jsx(_Input, {\n                defaultValue: updatedata.serial_number,\n                name: \"serial_number\",\n                onChange: e => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    serial_number: e.target.value\n                  }));\n                }\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"location\",\n              label: \"Location\",\n              children: /*#__PURE__*/_jsx(_TreeSelect, {\n                defaultValue: updatedata.location,\n                treeDefaultExpandedKeys: [invrelations.tree_companies.key],\n                placeholder: \"Pilih Location\",\n                treeData: [invrelations.tree_companies],\n                onChange: value => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    location: value\n                  }));\n                }\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"vendor_id\",\n              label: \"Vendor\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                defaultValue: updatedata.vendor_id,\n                onChange: value => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    vendor_id: value\n                  }));\n                },\n                children: invrelations.vendors.map((doc, idx) => {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: doc.name\n                  });\n                })\n              })\n            }), manuffielditem ? /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"manufacturer_id\",\n              label: \"Manufacturer\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                defaultValue: updatedata.manufacturer_id,\n                placeholder: \"Pilih Manufacturer\",\n                onChange: value => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    manufacturer_id: value\n                  }));\n                },\n                children: invrelations.manufacturers.filter(docfil => docfil.deleted_at === null).map((doc, idx) => {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: doc.id,\n                    children: doc.name\n                  });\n                })\n              })\n            }) : null, /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"deskripsi\",\n              label: \"Deskripsi\",\n              children: /*#__PURE__*/_jsx(_Input.TextArea, {\n                defaultValue: updatedata.deskripsi,\n                rows: 4,\n                name: \"deskripsi\",\n                onChange: e => {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    deskripsi: e.target.value\n                  }));\n                }\n              })\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-span-1 md:col-span-4 mb-6 py-3 px-12\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Item\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"shadow-md border p-5 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsx(_Spin, {}) : /*#__PURE__*/_jsx(_Fragment, {\n            children: updatedata.additional_attributes.length === 0 ? /*#__PURE__*/_jsx(_Empty, {\n              image: _Empty.PRESENTED_IMAGE_SIMPLE\n            }) : /*#__PURE__*/_jsx(_Form, {\n              layout: \"vertical\",\n              form: instanceForm2,\n              children: updatedata.additional_attributes.map((docinvvalue, idxinvvalue) => {\n                if (docinvvalue.required) {\n                  return /*#__PURE__*/_jsx(_Form.Item, {\n                    name: docinvvalue.name,\n                    label: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"jsx-3315966608\" + \" \" + \"flex\",\n                      children: [/*#__PURE__*/_jsx(\"span\", {\n                        className: \"jsx-3315966608\" + \" \" + \"judulField\"\n                      }), /*#__PURE__*/_jsx(\"p\", {\n                        className: \"jsx-3315966608\" + \" \" + \"mb-0 ml-1\",\n                        children: docinvvalue.name\n                      }), /*#__PURE__*/_jsx(_JSXStyle, {\n                        id: \"3315966608\",\n                        children: [\".judulField.jsx-3315966608::before{content:'*';color:red;}\"]\n                      })]\n                    }),\n                    children: /*#__PURE__*/_jsxs(_Fragment, {\n                      children: [docinvvalue.data_type === \"dropdown\" && /*#__PURE__*/_jsxs(_Fragment, {\n                        children: [/*#__PURE__*/_jsx(_Select, {\n                          allowClear: true,\n                          defaultValue: docinvvalue.value.default,\n                          style: {\n                            width: `100%`,\n                            borderColor: `red`\n                          },\n                          onChange: (value, label) => {\n                            if (typeof value === \"undefined\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(prev => {\n                                var temp = prev;\n                                const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: {\n                                      default: value,\n                                      opsi: docinvvalue.value.opsi\n                                    }\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield] = {\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: {\n                                      default: value,\n                                      opsi: docinvvalue.value.opsi\n                                    }\n                                  };\n                                }\n\n                                return temp;\n                              });\n                            }\n                          },\n                          children: docinvvalue.value.opsi.map((doc2, idx2) => /*#__PURE__*/_jsx(_Select.Option, {\n                            value: idx2,\n                            children: doc2\n                          }, doc2))\n                        }), disabledfield ? /*#__PURE__*/_jsxs(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus dipilih\"]\n                        }) : null]\n                      }), docinvvalue.data_type === \"checkbox\" && /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"w-full flex flex-col\",\n                        children: [docinvvalue.value.opsi.map((doc3, idx3) => {\n                          return /*#__PURE__*/_jsxs(\"div\", {\n                            className: \"flex mb-1\",\n                            children: [/*#__PURE__*/_jsx(_Checkbox, {\n                              defaultChecked: docinvvalue.value.default.includes(idx3),\n                              style: {\n                                marginRight: `0.5rem`\n                              },\n                              onChange: e => {\n                                if (docinvvalue.value.default.length === 0) {\n                                  setdisabledfield(true);\n                                } else {\n                                  setdisabledfield(false);\n                                  setupdatedata(prev => {\n                                    var temp = prev;\n                                    const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                    if (idxfield === -1) {\n                                      console.log(\"1\");\n\n                                      if (e.target.checked === true) {\n                                        console.log(\"1.1\");\n                                        docinvvalue.value.default.push(idx3);\n                                        temp.inventory_values.push({\n                                          id: docinvvalue.id,\n                                          data_type: docinvvalue.data_type,\n                                          value: docinvvalue.value\n                                        });\n                                      } else {\n                                        console.log(\"1.2\");\n                                        var idxtoremove = docinvvalue.value.default.indexOf(idx3);\n                                        docinvvalue.value.default.splice(idxtoremove, 1);\n                                        temp.inventory_values.push({\n                                          id: docinvvalue.id,\n                                          data_type: docinvvalue.data_type,\n                                          value: docinvvalue.value\n                                        });\n                                      }\n                                    } else {\n                                      console.log(\"2\");\n\n                                      if (e.target.checked === true) {\n                                        console.log(\"2.1\"); // temp.inventory_values[idxfield].value.default.push(idx3)\n\n                                        docinvvalue.value.default.push(idx3);\n                                        temp.inventory_values[idxfield] = {\n                                          id: docinvvalue.id,\n                                          data_type: docinvvalue.data_type,\n                                          value: docinvvalue.value\n                                        };\n                                      } else {\n                                        console.log(\"2.2\");\n                                        var idxtoremove = temp.inventory_values[idxfield].value.default.indexOf(idx3);\n                                        temp.inventory_values[idxfield].value.default.splice(idxtoremove, 1);\n                                      }\n                                    }\n\n                                    return temp;\n                                  });\n                                }\n                              }\n                            }), /*#__PURE__*/_jsx(\"p\", {\n                              className: \"mb-0\",\n                              children: doc3\n                            })]\n                          });\n                        }), disabledfield ? /*#__PURE__*/_jsxs(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus dipilih\"]\n                        }) : null]\n                      }), docinvvalue.data_type === \"date\" && /*#__PURE__*/_jsxs(_Fragment, {\n                        children: [/*#__PURE__*/_jsx(_DatePicker, {\n                          /*style={dynamicfielditem[idxinvvalue].value === \"\" ? { borderColor: `red` } : null}*/\n                          defaultValue: docinvvalue.value === \"\" ? null : moment(docinvvalue.value),\n                          onChange: (date, datestring) => {\n                            if (datestring === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(prev => {\n                                var temp = prev;\n                                const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: datestring === \"\" ? null : datestring\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = datestring;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }), disabledfield ? /*#__PURE__*/_jsxs(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus dipilih\"]\n                        }) : null]\n                      }), docinvvalue.data_type === \"paragraph\" && /*#__PURE__*/_jsxs(_Fragment, {\n                        children: [/*#__PURE__*/_jsx(_Input.TextArea, {\n                          rows: 4,\n                          defaultValue: docinvvalue.value,\n                          onChange: e => {\n                            if (e.target.value === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(prev => {\n                                var temp = prev;\n                                const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: e.target.value\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = e.target.value;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }), disabledfield ? /*#__PURE__*/_jsxs(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }) : null]\n                      }), docinvvalue.data_type === \"number\" && /*#__PURE__*/_jsxs(_Fragment, {\n                        children: [/*#__PURE__*/_jsx(_InputNumber, {\n                          allowClear: true,\n                          defaultValue: docinvvalue.value,\n                          onChange: value => {\n                            if (value === \"\" || value === null) {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(prev => {\n                                var temp = prev;\n                                const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: value === \"\" || value === null ? \"\" : `${value}`\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = `${value}`;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }), disabledfield ? /*#__PURE__*/_jsxs(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }) : null]\n                      }), docinvvalue.data_type === \"single\" && /*#__PURE__*/_jsxs(_Fragment, {\n                        children: [/*#__PURE__*/_jsx(_Input, {\n                          defaultValue: docinvvalue.value,\n                          onChange: e => {\n                            if (e.target.value === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(prev => {\n                                var temp = prev;\n                                const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: e.target.value\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = e.target.value;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }), disabledfield ? /*#__PURE__*/_jsxs(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }) : null]\n                      }), docinvvalue.data_type === \"String\" && /*#__PURE__*/_jsxs(_Fragment, {\n                        children: [/*#__PURE__*/_jsx(_Input, {\n                          defaultValue: docinvvalue.value,\n                          onChange: e => {\n                            if (e.target.value === \"\") {\n                              setdisabledfield(true);\n                            } else {\n                              setdisabledfield(false);\n                              setupdatedata(prev => {\n                                var temp = prev;\n                                const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                if (idxfield === -1) {\n                                  temp.inventory_values.push({\n                                    id: docinvvalue.id,\n                                    data_type: docinvvalue.data_type,\n                                    value: e.target.value\n                                  });\n                                } else {\n                                  temp.inventory_values[idxfield].value = e.target.value;\n                                }\n\n                                return temp;\n                              });\n                            }\n                          }\n                        }), disabledfield ? /*#__PURE__*/_jsxs(\"p\", {\n                          className: \" text-red-500 mb-0\",\n                          children: [docinvvalue.name, \" harus diisi\"]\n                        }) : null]\n                      })]\n                    })\n                  });\n                } else {\n                  return /*#__PURE__*/_jsx(_Form.Item, {\n                    name: docinvvalue.name,\n                    label: docinvvalue.name,\n                    children: /*#__PURE__*/_jsxs(_Fragment, {\n                      children: [docinvvalue.data_type === \"dropdown\" && /*#__PURE__*/_jsx(_Select, {\n                        defaultValue: docinvvalue.value.default,\n                        style: {\n                          width: `100%`\n                        },\n                        onChange: (value, label) => {\n                          setupdatedata(prev => {\n                            var temp = prev;\n                            const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              // temp.inventory_values[idxfield].value.default = value\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: {\n                                  default: value,\n                                  opsi: docinvvalue.value.opsi\n                                }\n                              });\n                            } else {\n                              temp.inventory_values[idxfield] = {\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: {\n                                  default: value,\n                                  opsi: docinvvalue.value.opsi\n                                }\n                              };\n                            }\n\n                            return temp;\n                          });\n                        },\n                        children: docinvvalue.value.opsi.map((doc2, idx2) => /*#__PURE__*/_jsx(_Select.Option, {\n                          value: idx2,\n                          children: doc2\n                        }, doc2))\n                      }), docinvvalue.data_type === \"checkbox\" && /*#__PURE__*/_jsx(\"div\", {\n                        className: \"w-full flex flex-col\",\n                        children: docinvvalue.value.opsi.map((doc3, idx3) => {\n                          return /*#__PURE__*/_jsxs(\"div\", {\n                            className: \"flex mb-1\",\n                            children: [/*#__PURE__*/_jsx(_Checkbox, {\n                              defaultChecked: docinvvalue.value.default.includes(idx3),\n                              style: {\n                                marginRight: `0.5rem`\n                              },\n                              onChange: e => {\n                                setupdatedata(prev => {\n                                  var temp = prev;\n                                  const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                                  if (idxfield === -1) {\n                                    console.log(\"1\");\n\n                                    if (e.target.checked === true) {\n                                      console.log(\"1.1\");\n                                      docinvvalue.value.default.push(idx3);\n                                      temp.inventory_values.push({\n                                        id: docinvvalue.id,\n                                        data_type: docinvvalue.data_type,\n                                        value: docinvvalue.value\n                                      });\n                                    } else {\n                                      console.log(\"1.2\");\n                                      var idxtoremove = docinvvalue.value.default.indexOf(idx3);\n                                      docinvvalue.value.default.splice(idxtoremove, 1);\n                                      temp.inventory_values.push({\n                                        id: docinvvalue.id,\n                                        data_type: docinvvalue.data_type,\n                                        value: docinvvalue.value\n                                      });\n                                    }\n                                  } else {\n                                    console.log(\"2\");\n\n                                    if (e.target.checked === true) {\n                                      console.log(\"2.1\"); // temp.inventory_values[idxfield].value.default.push(idx3)\n\n                                      docinvvalue.value.default.push(idx3);\n                                      temp.inventory_values[idxfield] = {\n                                        id: docinvvalue.id,\n                                        data_type: docinvvalue.data_type,\n                                        value: docinvvalue.value\n                                      };\n                                    } else {\n                                      console.log(\"2.2\");\n                                      var idxtoremove = temp.inventory_values[idxfield].value.default.indexOf(idx3);\n                                      temp.inventory_values[idxfield].value.default.splice(idxtoremove, 1);\n                                    }\n                                  }\n\n                                  return temp;\n                                });\n                              }\n                            }), /*#__PURE__*/_jsx(\"p\", {\n                              className: \"mb-0\",\n                              children: doc3\n                            })]\n                          });\n                        })\n                      }), docinvvalue.data_type === \"date\" && /*#__PURE__*/_jsx(_DatePicker, {\n                        defaultValue: docinvvalue.value === \"\" ? null : moment(docinvvalue.value),\n                        onChange: (date, datestring) => {\n                          console.log(datestring);\n                          setupdatedata(prev => {\n                            var temp = prev;\n                            const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: datestring === \"\" ? null : datestring\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = datestring;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }), docinvvalue.data_type === \"paragraph\" && /*#__PURE__*/_jsx(_Input.TextArea, {\n                        rows: 4,\n                        defaultValue: docinvvalue.value,\n                        onChange: e => {\n                          setupdatedata(prev => {\n                            var temp = prev;\n                            const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: e.target.value\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = e.target.value;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }), docinvvalue.data_type === \"number\" && /*#__PURE__*/_jsx(_InputNumber, {\n                        defaultValue: docinvvalue.value,\n                        onChange: value => {\n                          setupdatedata(prev => {\n                            var temp = prev;\n                            const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: `${value}`\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = `${value}`;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }), docinvvalue.data_type === \"single\" && /*#__PURE__*/_jsx(_Input, {\n                        defaultValue: docinvvalue.value,\n                        onChange: e => {\n                          setupdatedata(prev => {\n                            var temp = prev;\n                            const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: e.target.value\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = e.target.value;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }), docinvvalue.data_type === \"String\" && /*#__PURE__*/_jsx(_Input, {\n                        defaultValue: docinvvalue.value,\n                        onChange: e => {\n                          setupdatedata(prev => {\n                            var temp = prev;\n                            const idxfield = temp.inventory_values.map(docname => docname.id).indexOf(docinvvalue.id);\n\n                            if (idxfield === -1) {\n                              temp.inventory_values.push({\n                                id: docinvvalue.id,\n                                data_type: docinvvalue.data_type,\n                                value: e.target.value\n                              });\n                            } else {\n                              temp.inventory_values[idxfield].value = e.target.value;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      })]\n                    })\n                  });\n                }\n              })\n            })\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"h1\", {\n        className: \"font-semibold\",\n        children: [\"Apakah anda yakin ingin mengubah item \\\"\", updatedata.inventory_name, \"\\\"?\"]\n      }),\n      visible: modalupdate,\n      onCancel: () => {\n        setmodalupdate(false);\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      onOk: handleUpdateItem,\n      okButtonProps: {\n        loading: loadingupdate\n      },\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex flex-col\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }), /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"Masukkan Notes\",\n            onChange: e => {\n              setupdatedata(prev => {\n                var temp = prev;\n                temp.notes = e.target.value;\n                return temp;\n              });\n            }\n          })]\n        })\n      })\n    })]\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res,\n  params\n}) {\n  const itemid = params.itemId;\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"3\",\n      itemid\n    }\n  };\n}\nexport default ItemUpdate;","map":null,"metadata":{},"sourceType":"module"}