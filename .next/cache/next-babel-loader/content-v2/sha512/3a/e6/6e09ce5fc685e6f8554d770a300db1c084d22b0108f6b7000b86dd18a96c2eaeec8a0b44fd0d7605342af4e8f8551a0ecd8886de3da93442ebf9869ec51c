{"ast":null,"code":"import _Popconfirm from \"antd/lib/popconfirm\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Select from \"antd/lib/select\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport _Input from \"antd/lib/input\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _Form from \"antd/lib/form\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Layout from '../../../../components/layout-dashboard';\nimport { useRouter } from 'next/router';\nimport httpcookie from 'cookie';\nimport { DeleteOutlined, CalendarOutlined } from '@ant-design/icons';\nimport Sticky from 'wil-react-sticky';\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport st from '../../../../components/layout-dashboard.module.css';\n\nconst AssetsCreate = ({\n  sidemenu,\n  dataProfile,\n  initProps\n}) => {\n  //1. Init\n  const rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(3, 1);\n  pathArr[pathArr.length - 1] = \"Tambah Asset Type\";\n\n  const [instanceForm] = _Form.useForm();\n\n  const [instanceForm2] = _Form.useForm();\n\n  const {\n    idparent,\n    codeparent\n  } = rt.query; //helperFunctions\n\n  const searchAsset = (doc, code) => {\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].key === code) {\n        return doc[i];\n      }\n\n      if (doc[i].children) {\n        searchAsset(doc[i].children, code);\n      }\n    }\n  }; //useState\n  //data payload\n\n\n  const {\n    0: newdata,\n    1: setnewdata\n  } = useState({\n    name: \"\",\n    parent: idparent !== \"\" ? Number(idparent) : null,\n    description: \"\",\n    required_sn: false,\n    asset_columns: []\n  }); //data induk asset type\n\n  const {\n    0: assetdata,\n    1: setassetdata\n  } = useState([]); //state field dinamis\n\n  const {\n    0: fielddata,\n    1: setfielddata\n  } = useState([]); //state current field dinamis\n\n  const {\n    0: currentfield,\n    1: setcurrentfield\n  } = useState({\n    name: \"\",\n    data_type: \"\",\n    default: \"\",\n    required: false\n  }); //state is field added\n\n  const {\n    0: addedfield,\n    1: setaddedfield\n  } = useState([]);\n  const {\n    0: selectedfieldidx,\n    1: setselectedfieldidx\n  } = useState(-1);\n  const {\n    0: selectedfieldidxtrigger,\n    1: setselectedfieldidxtrigger\n  } = useState(false);\n  const {\n    0: newfieldidxtrigger,\n    1: setnewfieldidxtrigger\n  } = useState(false);\n  const {\n    0: currentdropdown,\n    1: setcurrentdropdown\n  } = useState([\"\", \"\"]);\n  const {\n    0: currentdropdown2,\n    1: setcurrentdropdown2\n  } = useState([\"\", \"\"]);\n  const {\n    0: currentdropdownidx,\n    1: setcurrentdropdownidx\n  } = useState(-1);\n  const {\n    0: currentdropdowntrigger,\n    1: setcurrentdropdowntrigger\n  } = useState(false);\n  const {\n    0: currentnondropdownidx,\n    1: setcurrentnondropdownidx\n  } = useState(-1);\n  const {\n    0: currentnondropdowntrigger,\n    1: setcurrentnondropdowntrigger\n  } = useState(false);\n  const {\n    0: loadingcreate,\n    1: setloadingcreate\n  } = useState(false);\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true);\n  const {\n    0: disabledaddfield,\n    1: setdisabledaddfield\n  } = useState(false);\n  const {\n    0: disabledsimpan,\n    1: setdisabledsimpan\n  } = useState(false);\n  const {\n    0: disabledtambah,\n    1: setdisabledtambah\n  } = useState(false);\n  const {\n    0: pointevent,\n    1: setpointevent\n  } = useState(\"\"); //handle\n\n  const onClickAddField = () => {\n    setfielddata([...fielddata, {\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false\n    }]);\n    setcurrentfield({\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false\n    });\n    setcurrentdropdown([\"\", \"\"]);\n    setcurrentdropdown2([\"\", \"\"]);\n    setdisabledaddfield(true);\n    setdisabledsimpan(true);\n    setdisabledtambah(true);\n    setpointevent(\"pointer-events-none\");\n  };\n\n  const handleCreateAsset = () => {\n    var t = {};\n\n    for (var prop in newdata) {\n      if (prop === \"asset_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === 'dropdown' || doc.data_type === 'checkbox') {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              default: JSON.stringify(doc.default)\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else {\n        t[prop] = newdata[prop];\n      }\n    }\n\n    setloadingcreate(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/addAsset`, {\n      method: 'POST',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(t)\n    }).then(res => res.json()).then(res2 => {\n      setloadingcreate(false);\n\n      if (res2.success) {\n        _notification['success']({\n          message: \"Asset Type berhasil ditambahkan\",\n          duration: 3\n        });\n\n        setTimeout(() => {\n          rt.push(`/admin/assets/detail/${res2.id}`);\n        }, 500);\n      } else if (!res2.success) {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(() => {\n    fetch(`https://boiling-thicket-46501.herokuapp.com/getAssets`, {\n      method: `GET`,\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setassetdata(res2.data);\n      setpraloading(false);\n      idparent !== \"\" ? setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n        parent: idparent\n      })) : null;\n    });\n  }, []);\n  useEffect(() => {\n    if (selectedfieldidx !== -1) {\n      setaddedfield(prev => {\n        prev[selectedfieldidx] = true;\n        return prev;\n      });\n    }\n  }, [selectedfieldidxtrigger]);\n  useEffect(() => {\n    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n      asset_columns: fielddata\n    }));\n  }, [newfieldidxtrigger]);\n  useEffect(() => {\n    if (currentnondropdownidx !== -1) {\n      setfielddata(prev => {\n        var temp = prev;\n        temp[currentnondropdownidx][\"default\"] = '-';\n        return temp;\n      });\n    }\n  }, [currentnondropdowntrigger]);\n  useEffect(() => {\n    if (currentdropdownidx !== -1) {\n      console.log(\"sini\");\n      setcurrentdropdown(prev => {\n        return currentdropdown2.filter((doc10, idx10) => idx10 !== currentdropdownidx);\n      });\n      setcurrentdropdown2(prev => prev.filter((doc11, idx11) => idx11 !== currentdropdownidx));\n    }\n  }, [currentdropdowntrigger]);\n  return /*#__PURE__*/_jsx(Layout, {\n    st: st,\n    tok: initProps,\n    sidemenu: sidemenu,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8\",\n        children: /*#__PURE__*/_jsx(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" col-span-4 flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white\",\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: \"font-semibold py-2\",\n              children: \"Form Tambah Asset Types\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsx(Link, {\n                href: `/admin/assets`,\n                children: /*#__PURE__*/_jsx(_Button, {\n                  type: \"default\"\n                  /*onClick={() => { console.log(newdata); console.log(fielddata); console.log(currentdropdown) }}*/\n                  ,\n                  children: \"Batal\"\n                })\n              }), /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                loading: loadingcreate,\n                onClick: instanceForm.submit,\n                disabled: disabledsimpan,\n                children: \"Simpan\"\n              })]\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-span-1 md:col-span-4 px-5 mb-8\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"shadow-md border p-8 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsx(_Spin, {}) : /*#__PURE__*/_jsxs(_Form, {\n            form: instanceForm,\n            layout: \"vertical\",\n            onFinish: handleCreateAsset,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n              children: [idparent !== \"\" ? /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-1559586498\" + \" \" + \"flex flex-col\",\n                children: [/*#__PURE__*/_jsxs(\"p\", {\n                  className: \"jsx-1559586498\" + \" \" + \"mb-2\",\n                  children: [/*#__PURE__*/_jsx(\"span\", {\n                    className: \"jsx-1559586498\" + \" \" + \"judulField1\"\n                  }), \"Induk Asset Type\"]\n                }), /*#__PURE__*/_jsx(_TreeSelect, {\n                  style: {\n                    marginRight: `1rem`\n                  },\n                  treeData: assetdata,\n                  defaultValue: codeparent !== \"\" ? codeparent : null,\n                  disabled: idparent !== \"\"\n                }), /*#__PURE__*/_jsx(_JSXStyle, {\n                  id: \"1559586498\",\n                  children: [\".judulField1.jsx-1559586498::before{content:'*';color:red;margin-right:5px;}\"]\n                })]\n              }) : /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"parent\",\n                label: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"jsx-3315758188\" + \" \" + \"flex\",\n                  children: [/*#__PURE__*/_jsx(\"span\", {\n                    className: \"jsx-3315758188\" + \" \" + \"judulField\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: \"jsx-3315758188\" + \" \" + \"mb-0 ml-1\",\n                    children: \"Induk Asset Type\"\n                  }), /*#__PURE__*/_jsx(_JSXStyle, {\n                    id: \"3315758188\",\n                    children: [\".judulField.jsx-3315758188::before{content:'*';color:red;}\"]\n                  })]\n                }),\n                children: /*#__PURE__*/_jsx(_TreeSelect, {\n                  style: {\n                    marginRight: `1rem`\n                  },\n                  dropdownStyle: {\n                    maxHeight: 400,\n                    overflow: 'auto'\n                  },\n                  treeData: assetdata,\n                  placeholder: \"Pilih parent\",\n                  treeDefaultExpandAll: true,\n                  onChange: (value, label, extra) => {\n                    typeof value === 'undefined' ? setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                      parent: null\n                    })) : setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                      parent: extra.allCheckedNodes[0].node.props.id\n                    }));\n                  },\n                  allowClear: true\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"name\",\n                label: \"Nama Asset Type\",\n                rules: [{\n                  required: true,\n                  message: 'Nama Asset wajib diisi'\n                }],\n                children: /*#__PURE__*/_jsx(_Input, {\n                  name: \"name\",\n                  onChange: e => {\n                    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                      name: e.target.value\n                    }));\n                  }\n                })\n              })]\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"description\",\n              label: \"Deskripsi\",\n              children: /*#__PURE__*/_jsx(_Input.TextArea, {\n                rows: 4,\n                name: \"description\",\n                onChange: e => {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    description: e.target.value\n                  }));\n                }\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsx(_Checkbox, {\n                style: {\n                  marginRight: `0.5rem`\n                },\n                onChange: e => {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    required_sn: e.target.checked\n                  }));\n                },\n                checked: newdata.required_sn\n              }), \" Serial Number wajib ada\"]\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \" col-span-1 md:col-span-4 px-5 flex flex-col\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Asset Type\"\n          })\n        }), fielddata.map((doc, idx) => {\n          return /*#__PURE__*/_jsx(_Fragment, {\n            children: addedfield[idx] === true ? /*#__PURE__*/_jsxs(\"div\", {\n              onClick: () => {\n                const temp = [...addedfield];\n                temp[idx] = false;\n\n                for (var i = 0; i < temp.length; i++) {\n                  if (i !== idx) {\n                    temp[i] = true;\n                  }\n                }\n\n                setaddedfield(temp);\n                setcurrentfield(fielddata[idx]);\n\n                if (doc.data_type === 'dropdown' || doc.data_type === 'checkbox') {\n                  setcurrentdropdown(doc.default.opsi);\n                  setcurrentdropdown2(doc.default.opsi);\n                }\n\n                if (fielddata[idx].data_type !== 'dropdown' || fielddata[idx].data_type !== 'checkbox') {\n                  if (fielddata[idx].name !== \"\" && fielddata[idx].data_type !== \"\") {\n                    setdisabledtambah(false);\n                  } else {\n                    setdisabledtambah(true);\n                  }\n                } else {\n                  if (doc.default.opsi.some(docopsi => docopsi === \"\")) {\n                    setdisabledtambah(true);\n                  } else {\n                    setdisabledtambah(false);\n                  }\n                }\n\n                setdisabledaddfield(true);\n                setdisabledsimpan(true);\n                setpointevent(\"pointer-events-none\");\n              },\n              className: \"jsx-28588772\" + \" \" + `${pointevent} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`,\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-28588772\" + \" \" + \"font-semibold mb-2\",\n                children: [doc.name, doc.required ? /*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"judulField\"\n                }) : null, \" \", /*#__PURE__*/_jsxs(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"text-gray-400\",\n                  children: [\"(\", doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === 'single' && ` Textbox`, doc.data_type === 'paragraph' && ` Text`, \")\"]\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-28588772\" + \" \" + 'rounded border w-full p-3',\n                children: doc.data_type === 'dropdown' || doc.data_type === 'checkbox' || doc.data_type === 'date' || doc.data_type === 'paragraph' ? /*#__PURE__*/_jsxs(_Fragment, {\n                  children: [doc.data_type === 'dropdown' && /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col z-50\",\n                    children: /*#__PURE__*/_jsx(_Select, {\n                      children: doc.default.opsi.map((docopsi, idxopsi) => {\n                        /*#__PURE__*/\n                        _jsx(_Select.Option, {\n                          children: idxopsi\n                        }, idxopsi);\n                      })\n                    })\n                  }), doc.data_type === 'checkbox' && /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col\",\n                    children: doc.default.opsi.map((docopsi, idxopsi) => /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"jsx-28588772\" + \" \" + \"flex items-center  mb-2\",\n                      children: [/*#__PURE__*/_jsx(_Checkbox, {\n                        style: {\n                          marginRight: `0.5rem`\n                        },\n                        disabled: true\n                      }), \" \", docopsi]\n                    }))\n                  }), doc.data_type === 'date' && /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex justify-between\",\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      className: \"jsx-28588772\" + \" \" + 'mb-0',\n                      children: doc.default\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"jsx-28588772\",\n                      children: /*#__PURE__*/_jsx(CalendarOutlined, {})\n                    })]\n                  }), doc.data_type === 'paragraph' && /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex h-20\"\n                  })]\n                }) : /*#__PURE__*/_jsx(_Fragment, {\n                  children: doc.default\n                })\n              }), /*#__PURE__*/_jsx(_JSXStyle, {\n                id: \"28588772\",\n                children: [\".judulField.jsx-28588772::before{content:'*';color:red;}\"]\n              })]\n            }, idx) : /*#__PURE__*/_jsx(\"div\", {\n              className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n              children: /*#__PURE__*/_jsxs(_Form, {\n                layout: \"vertical\",\n                initialValues: fielddata[idx],\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                  children: [/*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"name\",\n                    label: \"Nama Spesifikasi\",\n                    rules: [{\n                      required: true,\n                      message: 'Nama Field wajib diisi'\n                    }],\n                    children: /*#__PURE__*/_jsx(_Input, {\n                      required: true,\n                      name: \"name\",\n                      onChange: e => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          name: e.target.value\n                        }));\n\n                        if (e.target.value === \"\") {\n                          setdisabledtambah(true);\n                        } else if (e.target.value !== \"\" && currentfield.data_type !== \"\" && currentdropdown.every((doca, idxa) => doca !== \"\")) {\n                          setdisabledtambah(false);\n                        }\n                      }\n                    })\n                  }), /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"data_type\",\n                    label: \"Tipe Field\",\n                    rules: [{\n                      required: true,\n                      message: 'Tipe Field wajib diisi'\n                    }],\n                    children: /*#__PURE__*/_jsxs(_Select, {\n                      placeholder: \"Pilih Tipe Field\",\n                      onChange: value => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          data_type: value\n                        }));\n\n                        if (value === 'dropdown' || value === 'checkbox') {\n                          if (currentdropdown.every((doca, idxa) => doca !== \"\")) {\n                            setdisabledtambah(false);\n                          } else {\n                            setdisabledtambah(true);\n                          }\n                        } else {\n                          setdisabledtambah(false);\n                        }\n\n                        if (value === 'dropdown') {\n                          setcurrentdropdown([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n\n                        if (value === 'checkbox') {\n                          setcurrentdropdown([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n                      },\n                      name: \"data_type\",\n                      children: [/*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"dropdown\",\n                        children: \"Dropdown\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"number\",\n                        children: \"Number\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"paragraph\",\n                        children: \"Paragraph Text\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"checkbox\",\n                        children: \"Checkbox\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"single\",\n                        children: \"Single Textbox\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"date\",\n                        children: \"Date\"\n                      })]\n                    })\n                  })]\n                }), currentfield.data_type === \"dropdown\" ? /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col\",\n                  children: [currentdropdown.map((doc, idxx) => /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-11/12 mr-5\",\n                      children: /*#__PURE__*/_jsx(_Input, {\n                        style: {\n                          marginRight: `0.5rem`\n                        },\n                        defaultValue: doc,\n                        placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                        onChange: e => {\n                          setcurrentdropdown(prev => {\n                            const temp = prev;\n                            temp[idxx] = e.target.value;\n                            return temp;\n                          });\n                          setcurrentdropdown2(prev => {\n                            const temp = prev;\n                            temp[idxx] = e.target.value;\n                            return temp;\n                          });\n\n                          if (e.target.value !== \"\" && currentdropdown.every((doca, idxa) => doca !== \"\") && currentfield.name !== \"\") {\n                            setdisabledtambah(false);\n                          } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                            setdisabledtambah(true);\n                          }\n                        }\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-1/12 flex justify-around\",\n                      onClick: () => {\n                        setcurrentdropdown([]);\n                        setcurrentdropdowntrigger(prev => !prev);\n                        setcurrentdropdownidx(idxx);\n                      },\n                      children: /*#__PURE__*/_jsx(_Button, {\n                        color: \"black\",\n                        style: {\n                          border: `1px solid black`\n                        },\n                        children: \"-\"\n                      })\n                    })]\n                  }, idxx)), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"mx-auto my-3\",\n                    children: /*#__PURE__*/_jsx(_Button, {\n                      onClick: () => {\n                        setcurrentdropdown([...currentdropdown, \"\"]);\n                        setcurrentdropdown2([...currentdropdown2, \"\"]);\n                        setdisabledtambah(true);\n                      },\n                      children: \"+ Tambah Opsi\"\n                    })\n                  })]\n                }) : null, currentfield.data_type === \"checkbox\" ? /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col\",\n                  children: [currentdropdown.map((doc, idxx) => /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex mb-3\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-11/12 mr-5\",\n                      children: /*#__PURE__*/_jsx(_Input, {\n                        style: {\n                          marginRight: `0.5rem`\n                        },\n                        defaultValue: doc,\n                        placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                        onChange: e => {\n                          setcurrentdropdown(prev => {\n                            const temp = prev;\n                            temp[idxx] = e.target.value;\n                            return temp;\n                          });\n                          setcurrentdropdown2(prev => {\n                            const temp = prev;\n                            temp[idxx] = e.target.value;\n                            return temp;\n                          });\n\n                          if (e.target.value !== \"\" && currentdropdown.every((doca, idxa) => doca !== \"\") && currentfield.name !== \"\") {\n                            setdisabledtambah(false);\n                          } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                            setdisabledtambah(true);\n                          }\n                        }\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"w-1/12 flex justify-around\",\n                      onClick: () => {\n                        setcurrentdropdown([]);\n                        setcurrentdropdowntrigger(prev => !prev);\n                        setcurrentdropdownidx(idxx);\n                      },\n                      children: /*#__PURE__*/_jsx(_Button, {\n                        type: \"danger\",\n                        children: \"-\"\n                      })\n                    })]\n                  }, idxx)), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"mx-auto my-3\",\n                    children: /*#__PURE__*/_jsx(_Button, {\n                      onClick: () => {\n                        setcurrentdropdown([...currentdropdown, \"\"]);\n                        setcurrentdropdown2([...currentdropdown2, \"\"]);\n                        setdisabledtambah(true);\n                      },\n                      children: \"+ Tambah Opsi\"\n                    })\n                  })]\n                }) : null, /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex mt-4 justify-end\",\n                  children: [/*#__PURE__*/_jsx(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: `Apakah anda yakin ingin menghapus field ${doc.name === \"\" ? \"ini\" : doc.name}?`,\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: () => {\n                      setfielddata(prev => prev.filter((_, idxx) => idxx !== idx));\n                      setnewdata(prev => {\n                        var temp = prev;\n                        temp.asset_columns.splice(idx, 1);\n                        return temp;\n                      });\n                      setaddedfield(prev => {\n                        prev.splice(idx, 1);\n                        return prev;\n                      });\n                      setdisabledaddfield(false);\n                      setdisabledsimpan(false);\n                      setpointevent(\"\");\n                    },\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                      children: /*#__PURE__*/_jsx(DeleteOutlined, {\n                        style: {\n                          fontSize: `1.25rem`\n                        }\n                      })\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center mr-4\",\n                    children: [/*#__PURE__*/_jsx(_Checkbox, {\n                      checked: currentfield.required,\n                      style: {\n                        marginRight: `0.3rem`\n                      },\n                      onChange: e => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          required: e.target.checked\n                        }));\n                      }\n                    }), \" Required\"]\n                  }), /*#__PURE__*/_jsx(_Button, {\n                    type: \"primary\",\n                    disabled: disabledtambah,\n                    onClick: () => {\n                      setnewfieldidxtrigger(prev => !prev);\n\n                      if (currentfield.data_type === 'dropdown') {\n                        // setcurrentdropdownidx(idx)\n                        // setcurrentdropdowntrigger(prev => !prev)\n                        setfielddata(prev => {\n                          var temp = prev;\n                          temp[idx][\"default\"] = {\n                            default: \"-\",\n                            opsi: currentdropdown\n                          };\n                          return temp;\n                        });\n                      } else if (currentfield.data_type === 'checkbox') {\n                        setfielddata(prev => {\n                          var temp = prev;\n                          temp[idx][\"default\"] = {\n                            default: [],\n                            opsi: currentdropdown\n                          };\n                          return temp;\n                        });\n                      } else {\n                        setcurrentnondropdownidx(idx);\n                        setcurrentnondropdowntrigger(prev => !prev);\n                      }\n\n                      const temp = fielddata;\n                      temp[idx] = currentfield;\n                      setfielddata(temp);\n                      setaddedfield(prev => {\n                        if (prev[idx] === false) {\n                          setselectedfieldidxtrigger(prev => !prev);\n                          setselectedfieldidx(idx);\n                          prev[idx] = true;\n                          return prev;\n                        } else if (typeof prev[idx] === 'undefined') {\n                          const temp2 = [...prev, true];\n                          return temp2;\n                        }\n                      });\n                      setdisabledaddfield(false);\n                      setdisabledsimpan(false);\n                      setpointevent(\"\");\n                    },\n                    children: \"Tambah\"\n                  })]\n                })]\n              })\n            }, idx)\n          });\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsx(_Button, {\n            disabled: disabledaddfield,\n            type: \"dashed\",\n            style: {\n              width: `80%`,\n              height: `4rem`\n            },\n            onClick: onClickAddField,\n            children: \"+ Tambah Spesifikasi Asset Type\"\n          })\n        })]\n      })]\n    })\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: '/login'\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resources = await fetch(`https://boiling-thicket-46501.herokuapp.com/detailProfile`, {\n    method: `GET`,\n    headers: {\n      'Authorization': JSON.parse(initProps)\n    }\n  });\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"81\"\n    }\n  };\n}\nexport default AssetsCreate;","map":null,"metadata":{},"sourceType":"module"}