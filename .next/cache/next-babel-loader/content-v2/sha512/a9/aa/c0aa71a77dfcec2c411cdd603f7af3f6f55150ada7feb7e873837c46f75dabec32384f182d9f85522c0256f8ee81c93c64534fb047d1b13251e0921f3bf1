{"ast":null,"code":"import _Popconfirm from \"antd/lib/popconfirm\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _Empty from \"antd/lib/empty\";\nimport _Input from \"antd/lib/input\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Spin from \"antd/lib/spin\";\nimport _Button from \"antd/lib/button\";\nimport _notification from \"antd/lib/notification\";\nimport _Timeline from \"antd/lib/timeline\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport _Select from \"antd/lib/select\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _Collapse from \"antd/lib/collapse\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { CalendarOutlined, CloseCircleOutlined, PlusSquareTwoTone } from \"@ant-design/icons\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../../components/layout-dashboard\";\nimport st from \"../../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ModelsUpdate2 = ({\n  sidemenu,\n  dataProfile,\n  initProps,\n  modelid\n}) => {\n  //1.Init\n  const rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(3, 1);\n  pathArr[pathArr.length - 1] = \"Ubah Model\";\n\n  const [instanceForm] = _Form.useForm();\n\n  const [instanceForm2] = _Form.useForm();\n\n  const {\n    Panel\n  } = _Collapse; //2.Helper functions\n\n  const renderChildPartModel = item => {\n    return item.map((doc, idx) => {\n      return /*#__PURE__*/_jsxDEV(Children, {\n        doc: doc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 14\n      }, this);\n    });\n  };\n\n  const Children = ({\n    doc\n  }) => {\n    return /*#__PURE__*/_jsxDEV(_Timeline.Item, {\n      children: /*#__PURE__*/_jsxDEV(_Collapse, {\n        accordion: true,\n        children: /*#__PURE__*/_jsxDEV(Panel, {\n          header: doc.name,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-2733278964\" + \" \" + \"flex flex-col p-3\",\n            children: [doc.model_columns.map((docmc2, idx) => {\n              // var default2 = {}\n              // if (docmc2.data_type === 'dropdown' || docmc2.data_type === 'checkbox') {\n              //     default2 = JSON.parse(docmc2.default)\n              // }\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-2733278964\" + \" \" + \"flex flex-col mb-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"jsx-2733278964\" + \" \" + \"font-semibold mb-1\",\n                  children: [docmc2.name, \" \", docmc2.required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2733278964\" + \" \" + \"judulsn\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 27\n                  }, this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2733278964\" + \" \" + \"text-gray-400\",\n                    children: [\"(\", docmc2.data_type === \"single\" ? \"Single Textbox\" : docmc2.data_type.charAt(0).toUpperCase() + docmc2.data_type.slice(1), docmc2.data_type === \"paragraph\" && ` Text`, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 76,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2733278964\" + \" \" + \"w-full flex items-center my-auto px-2\",\n                  children: docmc2.data_type === \"dropdown\" || docmc2.data_type === \"checkbox\" || docmc2.data_type === \"date\" || docmc2.data_type === \"paragraph\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [docmc2.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(_Select, {\n                      disabled: true,\n                      style: {\n                        width: `100%`,\n                        backgroundColor: `rgba(229, 231, 235,1)`,\n                        color: `rgba(229, 231, 235,1)`\n                      },\n                      children: docmc2.default.opsi.map((doc2, idx2) => /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        disabled: true,\n                        value: idx2,\n                        children: doc2\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 101,\n                        columnNumber: 35\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 92,\n                      columnNumber: 31\n                    }, this), docmc2.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"w-full flex flex-col\",\n                      children: docmc2.default.opsi.map((doc3, idx3) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-2733278964\" + \" \" + \"flex mb-1\",\n                        children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                          disabled: true,\n                          style: {\n                            marginRight: `0.5rem`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 111,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-2733278964\" + \" \" + \"mb-0\",\n                          children: doc3\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 115,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 110,\n                        columnNumber: 35\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 108,\n                      columnNumber: 31\n                    }, this), docmc2.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"flex w-full items-center justify-between rounded bg-gray-100 h-10 px-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-2733278964\" + \" \" + \"mb-0\",\n                        children: docmc2.default\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 122,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-2733278964\",\n                        children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 124,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 123,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 31\n                    }, this), docmc2.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"flex h-20 rounded border bg-gray-100 w-full px-3\",\n                      children: docmc2.default\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-2733278964\" + \" \" + \"rounded border bg-gray-100 flex items-center w-full h-10 px-3\",\n                    children: docmc2.default\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 21\n              }, this);\n            }), doc.model_parts.length > 0 && renderChildPartModel(doc.model_parts)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"2733278964\",\n            children: \".judulassettype.jsx-2733278964::before{content:'*';color:red;}.judulsn.jsx-2733278964::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrSmlCLEFBR3lFLEFBSUEsWUFIRixBQUlBLFVBSGQsQUFJQSIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9hZG1pbi9tb2RlbHMvdXBkYXRlMi9bbW9kZWxJZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWxldGVPdXRsaW5lZCB9IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQ2FsZW5kYXJPdXRsaW5lZCxcbiAgQ2xvc2VDaXJjbGVPdXRsaW5lZCxcbiAgUGx1c1NxdWFyZVR3b1RvbmUsXG59IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBDaGVja2JveCxcbiAgQ29sbGFwc2UsXG4gIERhdGVQaWNrZXIsXG4gIEVtcHR5LFxuICBGb3JtLFxuICBJbnB1dCxcbiAgSW5wdXROdW1iZXIsXG4gIFBvcGNvbmZpcm0sXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGltZWxpbmUsXG4gIFRyZWVTZWxlY3QsXG4gIG5vdGlmaWNhdGlvbixcbn0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBNb2RhbCBmcm9tIFwiYW50ZC9saWIvbW9kYWwvTW9kYWxcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3RpY2t5IGZyb20gXCJ3aWwtcmVhY3Qtc3RpY2t5XCI7XG5cbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZFwiO1xuaW1wb3J0IHN0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQubW9kdWxlLmNzc1wiO1xuaW1wb3J0IGh0dHBjb29raWUgZnJvbSBcImNvb2tpZVwiO1xuXG5jb25zdCBNb2RlbHNVcGRhdGUyID0gKHsgc2lkZW1lbnUsIGRhdGFQcm9maWxlLCBpbml0UHJvcHMsIG1vZGVsaWQgfSkgPT4ge1xuICAvLzEuSW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMywgMSk7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiVWJhaCBNb2RlbFwiO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtXSA9IEZvcm0udXNlRm9ybSgpO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtMl0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgeyBQYW5lbCB9ID0gQ29sbGFwc2U7XG5cbiAgLy8yLkhlbHBlciBmdW5jdGlvbnNcbiAgY29uc3QgcmVuZGVyQ2hpbGRQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiBpdGVtLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgIHJldHVybiA8Q2hpbGRyZW4gZG9jPXtkb2N9PjwvQ2hpbGRyZW4+O1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IENoaWxkcmVuID0gKHsgZG9jIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRpbWVsaW5lLkl0ZW0+XG4gICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAge1xuICAgICAgICAgICAgPFBhbmVsIGhlYWRlcj17ZG9jLm5hbWV9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+UXVhbnRpdHkgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj48L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPntkb2MucXVhbnRpdHl9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX2NvbHVtbnMubWFwKChkb2NtYzIsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gdmFyIGRlZmF1bHQyID0ge31cbiAgICAgICAgICAgICAgICAgIC8vIGlmIChkb2NtYzIuZGF0YV90eXBlID09PSAnZHJvcGRvd24nIHx8IGRvY21jMi5kYXRhX3R5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgIC8vICAgICBkZWZhdWx0MiA9IEpTT04ucGFyc2UoZG9jbWMyLmRlZmF1bHQpXG4gICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bHNuXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvY21jMi5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGByZ2JhKDIyOSwgMjMxLCAyMzUsMSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0Lm9wc2kubWFwKChkb2MyLCBpZHgyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gZGlzYWJsZWQgdmFsdWU9e2lkeDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMywgaWR4MykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jM308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHJvdW5kZWQgYmctZ3JheS0xMDAgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jbWMyLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciB3LWZ1bGwgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgIHJlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgIH1cbiAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICApO1xuICB9O1xuXG4gIC8vMi51c2VTdGF0ZVxuICBjb25zdCBbbmV3ZGF0YSwgc2V0bmV3ZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgYXNzZXRfaWQ6IFwiXCIsXG4gICAgbmFtZTogXCJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IG51bGwsXG4gICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgIG1vZGVsX2NvbHVtbnM6IFtdLFxuICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICBhZGRfY29sdW1uczogW10sXG4gICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtuZXdkYXRhMiwgc2V0bmV3ZGF0YTJdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbZGVmYXVsdGRhdGEsIHNldGRlZmF1bHRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21hbnVmZGF0YSwgc2V0bWFudWZkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVsZGF0YSwgc2V0bW9kZWxkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YSwgc2V0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YTIsIHNldGZpZWxkZGF0YTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYSwgc2V0ZmllbGRkYXRhYV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGFhMiwgc2V0ZmllbGRkYXRhYTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9kZWxwYXJ0ZmllbGRkYXRhLCBzZXRtb2RlbHBhcnRmaWVsZGRhdGFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbY3VycmVudGZpZWxkLCBzZXRjdXJyZW50ZmllbGRdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZDIsIHNldGN1cnJlbnRmaWVsZDJdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRpZG1vZGVsLCBzZXRjdXJyZW50aWRtb2RlbF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2FkZGVkZmllbGQsIHNldGFkZGVkZmllbGRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDEsIHNldGFkZGVkZmllbGQxXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQyLCBzZXRhZGRlZGZpZWxkMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMywgc2V0YWRkZWRmaWVsZDNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeCwgc2V0YWRkZWRmaWVsZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlciwgc2V0YWRkZWRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDEsIHNldGFkZGVkZmllbGRpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMSwgc2V0YWRkZWRmaWVsZHRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgyLCBzZXRhZGRlZGZpZWxkaWR4Ml0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjIsIHNldGFkZGVkZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Mywgc2V0YWRkZWRmaWVsZGlkeDNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIzLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZSwgc2V0bG9hZGluZ2NyZWF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nY3JlYXRlbW9kZWwsIHNldGxvYWRpbmdjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nZ2V0bW9kZWwsIHNldGxvYWRpbmdnZXRtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nLCBzZXRwcmFsb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ3NwZWMsIHNldGxvYWRpbmdzcGVjXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjMiwgc2V0bG9hZGluZ3NwZWMyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bjIsIHNldGN1cnJlbnRkcm9wZG93bjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bm4yLCBzZXRjdXJyZW50ZHJvcGRvd25uMl0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bjIsIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2YWx1ZWRyb3Bkb3dudHJpZ2dlciwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMSwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjMsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIsIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnNpZHgsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlLCBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIxLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4MSwgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlMSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjb25jYXRmaWVsZHRyaWdnZXIyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2VkaXRwYXJ0LCBzZXRlZGl0cGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RhbGNyZWF0ZW1vZGVsLCBzZXRtb2RhbGNyZWF0ZW1vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25ld2RhdGF0cmlnZ2VyLCBzZXRuZXdkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlcjIsIHNldG5ld2RhdGF0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RlbHRyaWdnZXIsIHNldG1vZGVsdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRwYXJ0dHJpZ2dlciwgc2V0Y29uY2F0cGFydHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHZhbHVlLCBzZXRjb25jYXRwYXJ0dmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYXNzZXR0eXBlY29kZSwgc2V0YXNzZXR0eXBlY29kZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUyLCBzZXRhc3NldHR5cGVjb2RlMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RlZmF1bHRtb2RlbCwgc2V0ZGVmYXVsdG1vZGVsXSA9IHVzZVN0YXRlKHt9KTtcbiAgY29uc3QgW2Rpc2FibGVkdGFtYmFoLCBzZXRkaXNhYmxlZHRhbWJhaF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaDIsIHNldGRpc2FibGVkdGFtYmFoMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkLCBzZXRkaXNhYmxlZGFkZGZpZWxkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkYWRkZmllbGQyLCBzZXRkaXNhYmxlZGFkZGZpZWxkMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwb2ludGV2ZW50LCBzZXRwb2ludGV2ZW50XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcG9pbnRldmVudDIsIHNldHBvaW50ZXZlbnQyXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY2QyLCBzZXRjZDJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2NkaWR4LCBzZXRjZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHRyaWdnZXIsIHNldGNkdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjZDJwYXJ0LCBzZXRjZDJwYXJ0XSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZHBhcnRpZHgsIHNldGNkcGFydGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHBhcnR0cmlnZ2VyLCBzZXRjZHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NoYW5nZWFzc2V0LCBzZXRjaGFuZ2Vhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkZWZhdWx0YXNzZXQsIHNldGRlZmF1bHRhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmZXRjaGluZ3BhcnQsIHNldGZldGNoaW5ncGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwYWdlLCBzZXRwYWdlXSA9IHVzZVN0YXRlKDEpO1xuICAvL2NyZWF0ZSBtYW51ZmFjdHVyZXJcbiAgY29uc3QgW21vZGFsbWFudWYsIHNldG1vZGFsbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ21hbnVmLCBzZXRsb2FkaW5nbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRtYW51Ziwgc2V0ZGlzYWJsZWRtYW51Zl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3RyaWdnZXJtYW51Ziwgc2V0dHJpZ2dlcm1hbnVmXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RhdGFtYW51Ziwgc2V0ZGF0YW1hbnVmXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICB9KTtcblxuICAvLzMub25DaGFuZ2VcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkID0gKCkgPT4ge1xuICAgIHNldGZpZWxkZGF0YShbXG4gICAgICAuLi5maWVsZGRhdGEsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0YWRkZWRmaWVsZDEoWy4uLmFkZGVkZmllbGQxLCBmYWxzZV0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkMiA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGFhMihbXG4gICAgICAuLi5maWVsZGRhdGFhMixcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGF0YV90eXBlOiBcIlwiLFxuICAgICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQgPSAoaWQpID0+IHtcbiAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgc2V0bG9hZGluZ3NwZWModHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0YXNzZXRpZCA9IGRlZmF1bHRhc3NldC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKTtcbiAgICAgICAgICBjb25zdCBuZXdhc3NldGZpZWxkZGF0YTIgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wbyA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wbyA9IHRlbXBvXG4gICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgICAgLmNvbmNhdCh0ZW1wKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3YXNzZXRmaWVsZGRhdGEyLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICBhZGRfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRkZWZhdWx0ZGF0YSh7XG4gICAgICAgICAgICAuLi5kZWZhdWx0ZGF0YSxcbiAgICAgICAgICAgIGlkOiBkZWZhdWx0bW9kZWwuaWQsXG4gICAgICAgICAgICBuYW1lOiBkZWZhdWx0bW9kZWwubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZWZhdWx0bW9kZWwuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXJfaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXJfaWQsXG4gICAgICAgICAgICBjb3VudDogZGVmYXVsdG1vZGVsLmNvdW50LFxuICAgICAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICAgICAgaWQ6IHJlczIuZGF0YS5pZCxcbiAgICAgICAgICAgICAgbmFtZTogcmVzMi5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGNvZGU6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzMi5kYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjoge1xuICAgICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5pZCxcbiAgICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiBOdW1iZXIoaWQpLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogZGVmYXVsdGFzc2V0LFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3YXNzZXRmaWVsZGRhdGEyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0Y2hhbmdlYXNzZXQodGVtcCk7XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJpbmZvXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQW5kYSBUZWxhaCBNZW5ndWJhaCBBc3NldCBUeXBlXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgXCJIYWwgaW5pIG1lbWJ1YXQgZmllbGQgZGFyaSBhc3NldCB0eXBlIHRlcmthaXQgdGVyYmVudHVrIGRpIGZvcm0gaW5pIVwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIC8vIHNldGZpZWxkZGF0YTIodGVtcClcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tTZWxlY3RBc3NldDIgPSAoaWQpID0+IHtcbiAgICBzZXRsb2FkaW5nc3BlYzIodHJ1ZSk7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgYm9vbCA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm9vbC5wdXNoKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRhZGRlZGZpZWxkMyhib29sKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGFzc2V0dHlwZWNvZGUyKHJlczIuZGF0YS5pZCk7XG4gICAgICAgICAgLy8gc2V0bmV3ZGF0YXRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMyKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICAuLi5uZXdkYXRhMixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNC5oYW5kbGVcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWwgPSAoKSA9PiB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG5ld2RhdGEpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJ1cGRhdGVfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFkZF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikge1xuICAgICAgICB0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICAgIHNldGxvYWRpbmdjcmVhdGUodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L3VwZGF0ZU1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2NyZWF0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl1YmFoXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgcnQucHVzaChgL2FkbWluL21vZGVscy9kZXRhaWwvJHttb2RlbGlkfWApO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhMikge1xuICAgICAgaWYgKHByb3AgPT09IFwibW9kZWxfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhc3NldF9pZFwiKSBbKHRbcHJvcF0gPSBOdW1iZXIoYXNzZXR0eXBlY29kZTIpKV07XG4gICAgICBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGEyW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgc2V0bW9kZWx0cmlnZ2VyKHJlczIuaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUFkZE1hbnVmYWN0dXJlciA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nbWFudWYodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1hbnVmYWN0dXJlcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YW1hbnVmKSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdtYW51ZihmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1hbnVmYWN0dXJlciBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YW1hbnVmKHtcbiAgICAgICAgICAgIC4uLmRhdGFtYW51ZixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMyKTtcblxuICAgICAgICAgIHNldHRyaWdnZXJtYW51ZigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy81LnVzZUVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0YXNzZXRkYXRhKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNYW51ZmFjdHVyZXJzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXMyLmRhdGE7XG5cbiAgICAgICAgc2V0bWFudWZkYXRhKGRhdGEpO1xuXG4gICAgICAgIC8qKiBTZXQgbmV3IGluc2VydGVkIG1hbnVmYWN0dXJlciBhcyBkZWZhdWx0IHNlbGVjdGVkIG9wdGlvbiBpbiB0aGUgXCJNYW51ZmFjdHVyZXJcIiBkcm9wZG93biAqL1xuICAgICAgICBpZiAodHJpZ2dlcm1hbnVmID4gLTEpIHtcbiAgICAgICAgICBjb25zdCBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlciA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgICBjb25zdCBuZXdNYW51ZmFjdHVyZXJJZCA9IGxhdGVzdEluc2VydGVkTWFudWZhY3R1cmVyLmlkO1xuXG4gICAgICAgICAgLyoqIEZvcm0gY29udHJvbCB2YWx1ZSAqL1xuICAgICAgICAgIGluc3RhbmNlRm9ybS5zZXRGaWVsZHNWYWx1ZSh7IG1hbnVmYWN0dXJlcl9pZDogbmV3TWFudWZhY3R1cmVySWQgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YShwcmV2ID0+ICh7Li4ucHJldiwgbWFudWZhY3R1cmVyX2lkOiBuZXdNYW51ZmFjdHVyZXJJZCB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9LCBbdHJpZ2dlcm1hbnVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7bW9kZWxpZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9tb2RlbF9wYXJ0c1xuICAgICAgICBjb25zdCByZWN1cnNpdmVQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgIHZhciB0ZW1wMTEgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZW1wMSA9IHt9O1xuICAgICAgICAgICAgdGVtcDEgPSBpdGVtW2ldLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZW1wMTEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW1baV0sXG4gICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAxLFxuICAgICAgICAgICAgICBtb2RlbF9wYXJ0czpcbiAgICAgICAgICAgICAgICBpdGVtW2ldLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gcmVjdXJzaXZlUGFydE1vZGVsKGl0ZW1baV0ubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0ZW1wMTE7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHlvID0gcmVjdXJzaXZlUGFydE1vZGVsKHJlczIuZGF0YS5tb2RlbF9wYXJ0cyk7XG4gICAgICAgIGNvbnN0IHRlbXAyID0ge1xuICAgICAgICAgIC4uLnJlczIuZGF0YSxcbiAgICAgICAgICBhc3NldF9pZDogcmVzMi5kYXRhLmFzc2V0LmNvZGUsXG4gICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcCxcbiAgICAgICAgICBhZGRfY29sdW1uczogW10sXG4gICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0bmV3ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGFzc2V0KHRlbXApO1xuICAgICAgICBzZXRkZWZhdWx0bW9kZWwodGVtcDIpO1xuICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoeW8pO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRhZGRlZGZpZWxkKGFycik7XG4gICAgICAgIHNldGFzc2V0dHlwZWNvZGUocmVzMi5kYXRhLmFzc2V0X2lkKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwobW9kZWx0cmlnZ2VyKTtcbiAgICAgICAgbW9kZWx0cmlnZ2VyICE9PSBmYWxzZSA/IHNldGVkaXRwYXJ0KHRydWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICB9LCBbbW9kZWx0cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMSAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIxXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHtcbiAgICAgIC4uLm5ld2RhdGEsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEyLmNvbmNhdChmaWVsZGRhdGEpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHggIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZWFzc2V0LnNvbWUoXG4gICAgICAgICAgKGRvY3NvbWUpID0+IGRvY3NvbWUuaWQgPT09IGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZFxuICAgICAgICApIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2ZpZWxkZGF0YTIubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHgxICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjb25jYXRhZGRjb2x1bW5zaWR4MSA+IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoIC0gMSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlMS5pZCA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICBjaGFuZ2Vhc3NldCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtmaWVsZGRhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtjb25jYXRhZGRjb2x1bW5zaWR4MV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHhdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDEgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4MV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4MV0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgzICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDNdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4M10gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyM10pO1xuXG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMyAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyM11bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMiAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhLmNvbmNhdChmaWVsZGRhdGFhMiksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgyICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDJdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHRlbXAgPSBbXTtcbiAgICBpZiAoY29uY2F0cGFydHZhbHVlICE9PSAtMSkge1xuICAgICAgaWYgKGNvbmNhdHBhcnR2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX3BhcnRzOiBbXSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmNhdHBhcnR2YWx1ZS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgdmFyIGlkeHRlbXAgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICBpZiAoaWR4dGVtcCAhPT0gLTEgJiYgdGVtcFtpZHh0ZW1wXVtcImlkXCJdID09PSBkb2MuaWQpIHtcbiAgICAgICAgICAgIHZhciBpZHhvZiA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgdGVtcFtpZHhvZl0gPSB7XG4gICAgICAgICAgICAgIC4uLnRlbXBbaWR4b2ZdLFxuICAgICAgICAgICAgICBxdWFudGl0eTogdGVtcFtpZHhvZl0ucXVhbnRpdHkgKyBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaWR4dGVtcCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRlbXAucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYWRkX21vZGVsczogdGVtcCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRwYXJ0dHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMi5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkaWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QyKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RwYXJ0aWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMnBhcnQuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZHBhcnRpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RwYXJ0aWR4KSk7XG4gICAgfVxuICB9LCBbY2RwYXJ0dHJpZ2dlcl0pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC0yIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggTW9kZWwgLSB7bmV3ZGF0YS5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKG5ld2RhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyKTsgY29uc29sZS5sb2coZGVmYXVsdGRhdGEpOyBjb25zb2xlLmxvZyhkZWZhdWx0YXNzZXQpIH19Ki8gdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybS5zdWJtaXR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+SW5mb3JtYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluPjwvU3Bpbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWx9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bmV3ZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCIgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb25zdW1hYmxlOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLmlzX2NvbnN1bWFibGV9XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIE1vZGVsIENvbnN1bWFibGUgZGVuZ2FuIHNhdHVhbiBqdW1sYWhcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtsb2FkaW5nc3BlYyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGEyLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZmllbGRkYXRhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhMltpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggIT09IGZpZWxkZGF0YS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4VXBkYXRlQ29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhVcGRhdGVDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQxW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQxXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihpZGspICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YVtpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhMi5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtuZXdkYXRhLmlzX2NvbnN1bWFibGUgPT09IGZhbHNlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBtYi04IGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Lb25maWd1cmFzaSBQYXJ0IE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcGFuZWwke2lkeH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jLm1vZGVsX2NoaWxkLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTJcIj57ZG9jLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJNb2RlbCB0aWRhayBtZW1pbGlraSBwYXJ0IG1vZGVsIVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fT48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIE1vZGVsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRhcmkgTW9kZWwgUGFydCAke25ld2RhdGEubmFtZX0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0ZW1wID0gbW9kZWxwYXJ0ZmllbGRkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMikgPT4gZG9jMi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnNwbGljZShpZHhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLmluZGV4T2YoZG9jLmlkKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJlZGAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NldCBUeXBle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxhc3NldHR5cGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYmctZ3JheS0yMDAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gaC0xMiBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMsIGlkeG1jKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBteS1hdXRvIHB4LTIgcHktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctd2hpdGUgYm9yZGVyIHctMy8xMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS0xMDAgcm91bmRlZCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjAgcm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfcGFydHMubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lIHN0eWxlPXt7IG1hcmdpblRvcDogYDFyZW1gIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ2hpbGRQYXJ0TW9kZWwoZG9jLm1vZGVsX3BhcnRzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZWRpdHBhcnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbXktMyBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtNSB0ZXh0LWxnIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRpZG1vZGVsfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRpZG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ3BhcnQgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0TW9kZWxzP3Jvd3M9MTAmbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bW9kZWxkYXRhKFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBhdGF1IGNhcmkgbmFtYSBtb2R1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Qb3B1cFNjcm9sbD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsVG9wICsgZXZlbnQudGFyZ2V0Lm9mZnNldEhlaWdodCA9PT0gZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2V0cGFnZShwcmV2ID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9wYWdlPSR7cGFnZX0mcm93cz0xMGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzMiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY3JvbGxUbygwLCBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXMyLmRhdGEudG8gPj0gcmVzMi5kYXRhLnRvdGFsID8gc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhXSkgOiBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGEsIDxTcGluIHNpemU9XCJzbWFsbFwiIC8+XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MuaWR9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2dldG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7Y3VycmVudGlkbW9kZWx9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX2NvbHVtbnNcIl0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxwYXJ0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5tb2RlbF9wYXJ0cy5tYXAoKGRvYzIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXAzID0gZG9jMi5tb2RlbF9jb2x1bW5zLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYzMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBtYXAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX3BhcnRzXCJdID0gbW9kZWxwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJpZFwiXSA9IHJlczIuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJuYW1lXCJdID0gcmVzMi5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAxID0gWy4uLnRlbXAxLCB0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dmFsdWUocmVzMi5kYXRhLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHRyaWdnZXIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhMiA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzMpID0+IGRvYzMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGlkbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGRhdGEyID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudGlkbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZHhkYXRhMiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubWFwKChkb2MxKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jMS5pZCA9PT0gY3VycmVudGlkbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMS5xdWFudGl0eSA9IGRvYzEucXVhbnRpdHkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICArIFRhbWJhaCBQYXJ0IE1vZGVsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTW9kZWw8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtMi5zdWJtaXR9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZW1vZGVsfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjcmVhdGVtb2RlbH1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBtYi04XCI+XG4gICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybTJ9XG4gICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MigwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YTIucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdzcGVjMiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj4gOiBudWxsfSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj4oe2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgPyBcIlNpbmdsZSBUZXh0Ym94XCIgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTcgZmxleCBqdXN0aWZ5LWNlbnRlciBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXSA9IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBkZWZhdWx0VmFsdWU9e2RvY2N9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlciBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXS5wdXNoKGlkeHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IHtkb2NjfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXIgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBkYXRlU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgIHtsb2FkaW5nc3BlYzIgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkM1tpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDModGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jeHgsIGlkeHgpID0+IGRvY3h4LmlkICE9PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZmllbGRkYXRhYTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDJbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQyXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhYS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGQyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTWFudWZhY3R1cmVyPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkbWFudWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWFudWZhY3R1cmVyfVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdtYW51Zn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbWFudWZ9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIE1hbnVmYWN0dXJlciA8c3BhbiBjbGFzc05hbWU9XCJuYW1hbWFudVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YW1hbnVmLm5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTmFtYSBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZG1hbnVmKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRhdGFtYW51Zih7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYW1hbnU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBtb2RlbGlkID0gcGFyYW1zLm1vZGVsSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbiA9IGF3YWl0IHJlc291cmNlcy5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbjtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjgyXCIsXG4gICAgICBtb2RlbGlkLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsc1VwZGF0ZTI7XG4iXX0= */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n          }, void 0, false, void 0, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this);\n  }; //2.useState\n\n\n  const {\n    0: newdata,\n    1: setnewdata\n  } = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: null,\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: []\n  });\n  const {\n    0: newdata2,\n    1: setnewdata2\n  } = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: \"\",\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: []\n  });\n  const {\n    0: defaultdata,\n    1: setdefaultdata\n  } = useState([]);\n  const {\n    0: assetdata,\n    1: setassetdata\n  } = useState([]);\n  const {\n    0: manufdata,\n    1: setmanufdata\n  } = useState([]);\n  const {\n    0: modeldata,\n    1: setmodeldata\n  } = useState([]);\n  const {\n    0: fielddata,\n    1: setfielddata\n  } = useState([]);\n  const {\n    0: fielddata2,\n    1: setfielddata2\n  } = useState([]);\n  const {\n    0: fielddataa,\n    1: setfielddataa\n  } = useState([]);\n  const {\n    0: fielddataa2,\n    1: setfielddataa2\n  } = useState([]);\n  const {\n    0: modelpartfielddata,\n    1: setmodelpartfielddata\n  } = useState([]);\n  const {\n    0: currentfield,\n    1: setcurrentfield\n  } = useState({\n    name: \"\",\n    data_type: \"\",\n    default: \"single\",\n    required: false\n  });\n  const {\n    0: currentfield2,\n    1: setcurrentfield2\n  } = useState({\n    name: \"\",\n    data_type: \"\",\n    default: \"single\",\n    required: false\n  });\n  const {\n    0: currentidmodel,\n    1: setcurrentidmodel\n  } = useState(\"\");\n  const {\n    0: addedfield,\n    1: setaddedfield\n  } = useState([]);\n  const {\n    0: addedfield1,\n    1: setaddedfield1\n  } = useState([]);\n  const {\n    0: addedfield2,\n    1: setaddedfield2\n  } = useState([]);\n  const {\n    0: addedfield3,\n    1: setaddedfield3\n  } = useState([]);\n  const {\n    0: addedfieldidx,\n    1: setaddedfieldidx\n  } = useState(-1);\n  const {\n    0: addedfieldtrigger,\n    1: setaddedfieldtrigger\n  } = useState(false);\n  const {\n    0: addedfieldidx1,\n    1: setaddedfieldidx1\n  } = useState(-1);\n  const {\n    0: addedfieldtrigger1,\n    1: setaddedfieldtrigger1\n  } = useState(false);\n  const {\n    0: addedfieldidx2,\n    1: setaddedfieldidx2\n  } = useState(-1);\n  const {\n    0: addedfieldtrigger2,\n    1: setaddedfieldtrigger2\n  } = useState(false);\n  const {\n    0: addedfieldidx3,\n    1: setaddedfieldidx3\n  } = useState(-1);\n  const {\n    0: addedfieldtrigger3,\n    1: setaddedfieldtrigger3\n  } = useState(false);\n  const {\n    0: loadingcreate,\n    1: setloadingcreate\n  } = useState(false);\n  const {\n    0: loadingcreatemodel,\n    1: setloadingcreatemodel\n  } = useState(false);\n  const {\n    0: loadinggetmodel,\n    1: setloadinggetmodel\n  } = useState(false);\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true);\n  const {\n    0: loadingspec,\n    1: setloadingspec\n  } = useState(false);\n  const {\n    0: loadingspec2,\n    1: setloadingspec2\n  } = useState(false);\n  const {\n    0: currentdropdown2,\n    1: setcurrentdropdown2\n  } = useState([\"\", \"\"]);\n  const {\n    0: currentdropdownn2,\n    1: setcurrentdropdownn2\n  } = useState([\"\", \"\"]);\n  const {\n    0: currentcheckeddropdown2,\n    1: setcurrentcheckeddropdown2\n  } = useState(\"\");\n  const {\n    0: currentcheckeddropdownn2,\n    1: setcurrentcheckeddropdownn2\n  } = useState(\"\");\n  const {\n    0: valuedropdowntrigger,\n    1: setvaluedropdowntrigger\n  } = useState(false);\n  const {\n    0: valuedropdowntrigger1,\n    1: setvaluedropdowntrigger1\n  } = useState(false);\n  const {\n    0: valuedropdowntrigger2,\n    1: setvaluedropdowntrigger2\n  } = useState(false);\n  const {\n    0: valuedropdowntrigger3,\n    1: setvaluedropdowntrigger3\n  } = useState(false);\n  const {\n    0: idxdropdowntrigger,\n    1: setidxdropdowntrigger\n  } = useState(-1);\n  const {\n    0: idxdropdowntrigger1,\n    1: setidxdropdowntrigger1\n  } = useState(-1);\n  const {\n    0: idxdropdowntrigger2,\n    1: setidxdropdowntrigger2\n  } = useState(-1);\n  const {\n    0: idxdropdowntrigger3,\n    1: setidxdropdowntrigger3\n  } = useState(-1);\n  const {\n    0: concatfieldtrigger,\n    1: setconcatfieldtrigger\n  } = useState(false);\n  const {\n    0: concataddcolumnstrigger,\n    1: setconcataddcolumnstrigger\n  } = useState(false);\n  const {\n    0: concataddcolumnsidx,\n    1: setconcataddcolumnsidx\n  } = useState(-1);\n  const {\n    0: concataddcolumnsvalue,\n    1: setconcataddcolumnsvalue\n  } = useState(-1);\n  const {\n    0: concataddcolumnstrigger1,\n    1: setconcataddcolumnstrigger1\n  } = useState(false);\n  const {\n    0: concataddcolumnsidx1,\n    1: setconcataddcolumnsidx1\n  } = useState(-1);\n  const {\n    0: concataddcolumnsvalue1,\n    1: setconcataddcolumnsvalue1\n  } = useState(-1);\n  const {\n    0: concatfieldtrigger2,\n    1: setconcatfieldtrigger2\n  } = useState(false);\n  const {\n    0: editpart,\n    1: seteditpart\n  } = useState(false);\n  const {\n    0: modalcreatemodel,\n    1: setmodalcreatemodel\n  } = useState(false);\n  const {\n    0: newdatatrigger,\n    1: setnewdatatrigger\n  } = useState(false);\n  const {\n    0: newdatatrigger2,\n    1: setnewdatatrigger2\n  } = useState(false);\n  const {\n    0: modeltrigger,\n    1: setmodeltrigger\n  } = useState(false);\n  const {\n    0: concatparttrigger,\n    1: setconcatparttrigger\n  } = useState(false);\n  const {\n    0: concatpartvalue,\n    1: setconcatpartvalue\n  } = useState(-1);\n  const {\n    0: assettypecode,\n    1: setassettypecode\n  } = useState(\"\");\n  const {\n    0: assettypecode2,\n    1: setassettypecode2\n  } = useState(\"\");\n  const {\n    0: defaultmodel,\n    1: setdefaultmodel\n  } = useState({});\n  const {\n    0: disabledtambah,\n    1: setdisabledtambah\n  } = useState(false);\n  const {\n    0: disabledtambah2,\n    1: setdisabledtambah2\n  } = useState(false);\n  const {\n    0: disabledaddfield,\n    1: setdisabledaddfield\n  } = useState(false);\n  const {\n    0: disabledaddfield2,\n    1: setdisabledaddfield2\n  } = useState(false);\n  const {\n    0: pointevent,\n    1: setpointevent\n  } = useState(\"\");\n  const {\n    0: pointevent2,\n    1: setpointevent2\n  } = useState(\"\");\n  const {\n    0: cd2,\n    1: setcd2\n  } = useState([\"\", \"\"]);\n  const {\n    0: cdidx,\n    1: setcdidx\n  } = useState(-1);\n  const {\n    0: cdtrigger,\n    1: setcdtrigger\n  } = useState(false);\n  const {\n    0: cd2part,\n    1: setcd2part\n  } = useState([\"\", \"\"]);\n  const {\n    0: cdpartidx,\n    1: setcdpartidx\n  } = useState(-1);\n  const {\n    0: cdparttrigger,\n    1: setcdparttrigger\n  } = useState(false);\n  const {\n    0: changeasset,\n    1: setchangeasset\n  } = useState([]);\n  const {\n    0: defaultasset,\n    1: setdefaultasset\n  } = useState([]);\n  const {\n    0: fetchingpart,\n    1: setfetchingpart\n  } = useState(false);\n  const {\n    0: page,\n    1: setpage\n  } = useState(1); //create manufacturer\n\n  const {\n    0: modalmanuf,\n    1: setmodalmanuf\n  } = useState(false);\n  const {\n    0: loadingmanuf,\n    1: setloadingmanuf\n  } = useState(false);\n  const {\n    0: disabledmanuf,\n    1: setdisabledmanuf\n  } = useState(true);\n  const {\n    0: triggermanuf,\n    1: settriggermanuf\n  } = useState(-1);\n  const {\n    0: datamanuf,\n    1: setdatamanuf\n  } = useState({\n    name: \"\"\n  }); //3.onChange\n\n  const onClickAddField = () => {\n    setfielddata([...fielddata, {\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false\n    }]);\n    setcurrentfield({\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false\n    });\n    setaddedfield1([...addedfield1, false]);\n    setcurrentdropdown2([\"\", \"\"]);\n    setcd2([\"\", \"\"]);\n    setcurrentcheckeddropdown2([]);\n    setdisabledaddfield(true);\n    setdisabledtambah(true);\n    setpointevent(\"pointer-events-none\");\n  };\n\n  const onClickAddField2 = () => {\n    setfielddataa2([...fielddataa2, {\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false\n    }]);\n    setcurrentfield2({\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false\n    });\n    setcurrentdropdownn2([\"\", \"\"]);\n    setcd2part([\"\", \"\"]);\n    setcurrentcheckeddropdownn2([]);\n    setdisabledaddfield2(true);\n    setdisabledtambah2(true);\n    setpointevent2(\"pointer-events-none\");\n  };\n\n  const onClickSelectAsset = id => {\n    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n      asset_id: Number(id)\n    }));\n    setloadingspec(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAsset?id=${id}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      var temp = [];\n\n      if (res2.success) {\n        temp = res2.data.asset_columns.map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              default: doc.default === \"\" || doc.default === \"-\" ? doc.default : JSON.parse(doc.default)\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n        const defaultassetid = defaultasset.map(docmap => docmap.id);\n        const newassetfielddata2 = newdata.model_columns.filter(docfilter => defaultassetid.includes(docfilter.id)).concat(temp);\n        const newfieldmap = newdata.model_columns.filter(docnewfield => typeof docnewfield.id === \"undefined\");\n        setfielddata2(prev => {\n          var tempo = prev;\n          tempo = tempo.filter(docfilter => defaultassetid.includes(docfilter.id)).concat(temp);\n          return tempo;\n        });\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          id: defaultmodel.id,\n          name: defaultmodel.name,\n          description: defaultmodel.description,\n          model_columns: newassetfielddata2.concat(newfieldmap),\n          add_columns: temp.concat(newfieldmap),\n          required_sn: res2.data.required_sn\n        }));\n        setdefaultdata(_objectSpread(_objectSpread({}, defaultdata), {}, {\n          id: defaultmodel.id,\n          name: defaultmodel.name,\n          description: defaultmodel.description,\n          manufacturer_id: defaultmodel.manufacturer_id,\n          count: defaultmodel.count,\n          asset: {\n            id: res2.data.id,\n            name: res2.data.name,\n            code: res2.data.code,\n            description: res2.data.description\n          },\n          manufacturer: {\n            id: defaultmodel.manufacturer.id,\n            name: defaultmodel.manufacturer.name\n          },\n          asset_id: Number(id),\n          model_columns: defaultasset,\n          add_columns: [],\n          update_columns: [],\n          delete_column_ids: [],\n          add_models: [],\n          delete_model_ids: [],\n          required_sn: res2.data.required_sn\n        }));\n        var arr = [];\n\n        for (var i = 0; i < newassetfielddata2.length; i++) {\n          arr.push(true);\n        }\n\n        setchangeasset(temp);\n        setaddedfield(arr);\n        setloadingspec(false);\n        setdisabledaddfield(false);\n\n        _notification[\"info\"]({\n          message: \"Anda Telah Mengubah Asset Type\",\n          description: \"Hal ini membuat field dari asset type terkait terbentuk di form ini!\",\n          duration: 0\n        });\n      } else {\n        temp = []; // setfielddata2(temp)\n\n        const newfieldmap = newdata.model_columns.filter(docnewfield => typeof docnewfield.id === \"undefined\");\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          model_columns: newdata.model_columns.concat(newfieldmap),\n          required_sn: false,\n          asset_id: 0\n        }));\n        setloadingspec(false);\n        setdisabledaddfield(true);\n      }\n    });\n  };\n\n  const onClickSelectAsset2 = id => {\n    setloadingspec2(true);\n    setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n      asset_id: Number(id)\n    }));\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAsset?id=${id}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      var temp = [];\n\n      if (res2.success) {\n        temp = res2.data.asset_columns.map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              default: JSON.parse(doc.default)\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n        var bool = [];\n\n        for (var i = 0; i < temp.length; i++) {\n          bool.push(true);\n        }\n\n        setaddedfield3(bool);\n        setfielddataa(temp);\n        const newfieldmap = newdata2.model_columns.filter(docnewfield => typeof docnewfield.id === \"undefined\");\n        setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n          required_sn: res2.data.required_sn,\n          asset_id: res2.data.code,\n          model_columns: temp.concat(newfieldmap)\n        }));\n        setassettypecode2(res2.data.id); // setnewdatatrigger2(prev => !prev)\n\n        setloadingspec2(false);\n        setdisabledaddfield2(false);\n      } else {\n        temp = [];\n        const newfieldmap = newdata2.model_columns.filter(docnewfield => typeof docnewfield.id === \"undefined\");\n        setfielddataa(temp);\n        setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n          model_columns: temp.concat(newfieldmap),\n          required_sn: false,\n          asset_id: 0\n        }));\n        setloadingspec2(false);\n      }\n    });\n  }; //4.handle\n\n\n  const handleCreateModel = () => {\n    var t = {};\n\n    for (var prop in newdata) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              default: JSON.stringify(doc.default)\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"update_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              default: JSON.stringify(doc.default)\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"add_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              default: JSON.stringify(doc.default)\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"asset_id\") {\n        t[prop] = Number(assettypecode);\n      } else {\n        t[prop] = newdata[prop];\n      }\n    }\n\n    setloadingcreate(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateModel`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(t)\n    }).then(res => res.json()).then(res2 => {\n      setloadingcreate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Model berhasil diubah\",\n          duration: 3\n        });\n\n        setTimeout(() => {\n          setmodalcreatemodel(false);\n          rt.push(`/admin/models/detail/${modelid}`);\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  const handleCreateModelinModel = () => {\n    var t = {};\n\n    for (var prop in newdata2) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata2[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              default: JSON.stringify(doc.default)\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      } else if (prop === \"asset_id\") [t[prop] = Number(assettypecode2)];else {\n        t[prop] = newdata2[prop];\n      }\n    }\n\n    setloadingcreatemodel(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addModel`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(t)\n    }).then(res => res.json()).then(res2 => {\n      setloadingcreatemodel(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Model berhasil ditambahkan\",\n          duration: 3\n        });\n\n        setnewdata2({\n          asset_id: \"\",\n          name: \"\",\n          description: \"\",\n          manufacturer_id: \"\",\n          required_sn: false,\n          is_consumable: false,\n          model_columns: [],\n          model_parts: []\n        });\n        setmodalcreatemodel(false);\n        seteditpart(false);\n        setmodeltrigger(res2.id);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  const handleAddManufacturer = () => {\n    setloadingmanuf(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addManufacturer`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datamanuf)\n    }).then(res => res.json()).then(res2 => {\n      setloadingmanuf(false);\n      setmodalmanuf(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Manufacturer berhasil ditambahkan\",\n          duration: 2\n        });\n\n        setdatamanuf(_objectSpread(_objectSpread({}, datamanuf), {}, {\n          name: \"\"\n        }));\n        console.log(res2);\n        settriggermanuf(prev => prev + 1);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //5.useEffect\n\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setassetdata(res2.data);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getManufacturers`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      const data = res2.data;\n      setmanufdata(data);\n      /** Set new inserted manufacturer as default selected option in the \"Manufacturer\" dropdown */\n\n      if (triggermanuf > -1) {\n        const latestInsertedManufacturer = data[data.length - 1];\n        const newManufacturerId = latestInsertedManufacturer.id;\n        /** Form control value */\n\n        instanceForm.setFieldsValue({\n          manufacturer_id: newManufacturerId\n        });\n        setnewdata(prev => _objectSpread(_objectSpread({}, prev), {}, {\n          manufacturer_id: newManufacturerId\n        }));\n      }\n    });\n  }, [triggermanuf]);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModel?id=${modelid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      const temp = res2.data.model_columns.map((doc, idx) => {\n        if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n          return _objectSpread(_objectSpread({}, doc), {}, {\n            default: doc.default === \"\" || doc.default === \"-\" ? doc.default : JSON.parse(doc.default)\n          });\n        } else {\n          return _objectSpread({}, doc);\n        }\n      }); //model_parts\n\n      const recursivePartModel = item => {\n        var temp11 = [];\n\n        for (var i = 0; i < item.length; i++) {\n          var temp1 = {};\n          temp1 = item[i].model_columns.map((doc, idx) => {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return _objectSpread(_objectSpread({}, doc), {}, {\n                default: doc.default === \"\" || doc.default === \"-\" ? doc.default : JSON.parse(doc.default)\n              });\n            } else {\n              return _objectSpread({}, doc);\n            }\n          });\n          temp11.push(_objectSpread(_objectSpread({}, item[i]), {}, {\n            model_columns: temp1,\n            model_parts: item[i].model_parts.length > 0 ? recursivePartModel(item[i].model_parts) : []\n          }));\n        }\n\n        return temp11;\n      };\n\n      const yo = recursivePartModel(res2.data.model_parts);\n\n      const temp2 = _objectSpread(_objectSpread({}, res2.data), {}, {\n        asset_id: res2.data.asset.code,\n        model_columns: temp,\n        add_columns: [],\n        update_columns: [],\n        delete_column_ids: [],\n        add_models: [],\n        delete_model_ids: []\n      });\n\n      setnewdata(temp2);\n      setdefaultdata(temp2);\n      setdefaultasset(temp);\n      setdefaultmodel(temp2);\n      setfielddata2(temp);\n      setmodelpartfielddata(yo);\n      var arr = [];\n\n      for (var i = 0; i < res2.data.model_columns.length; i++) {\n        arr.push(true);\n      }\n\n      setaddedfield(arr);\n      setassettypecode(res2.data.asset_id);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setmodeldata(res2.data.data);\n      setcurrentidmodel(modeltrigger);\n      modeltrigger !== false ? seteditpart(true) : null;\n    });\n  }, [modeltrigger]); //checkbox dropdown dari model utama yang field asset\n\n  useEffect(() => {\n    if (idxdropdowntrigger !== -1) {\n      setfielddata2(prev => {\n        const temp = prev;\n        temp[idxdropdowntrigger][\"default\"] = {\n          default: currentcheckeddropdown2,\n          opsi: currentdropdown2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger]); //checkbox dropdown dari model utama yang field buat sendiri\n\n  useEffect(() => {\n    if (idxdropdowntrigger1 !== -1) {\n      setfielddata(prev => {\n        const temp = prev; // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n\n        temp[idxdropdowntrigger1][\"default\"] = {\n          default: currentcheckeddropdown2,\n          opsi: currentdropdown2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger1]);\n  useEffect(() => {\n    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n      model_columns: fielddata2.concat(fielddata)\n    }));\n  }, [concatfieldtrigger]);\n  useEffect(() => {\n    if (concataddcolumnsidx !== -1) {\n      if (changeasset.some(docsome => docsome.id === concataddcolumnsvalue.id) || typeof concataddcolumnsvalue.id === \"undefined\") {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (newdata.add_columns.map(docadd => docadd.name).indexOf(currentfield.name) === -1) {\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns.push(fielddata2[fielddata2.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          const idxaddcolumn = newdata.add_columns.map(docadd2 => docadd2.name).indexOf(currentfield.name); // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (newdata.update_columns.map(docup => docup.id).indexOf(currentfield.id) === -1) {\n          setnewdata(prev => {\n            var temp = prev;\n            temp.update_columns.push(fielddata2[concataddcolumnsidx]);\n            return temp;\n          });\n        } else {\n          const idxupcolumn = newdata.update_columns.map(docadd2 => docadd2.id).indexOf(currentfield.id);\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger]);\n  useEffect(() => {\n    if (concataddcolumnsidx1 !== -1) {\n      if (concataddcolumnsidx1 > defaultdata.model_columns.length - 1 || typeof concataddcolumnsvalue1.id === \"undefined\" || changeasset === true) {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (newdata.add_columns.map(docadd => docadd.name).indexOf(currentfield.name) === -1) {\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns.push(fielddata[fielddata.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          const idxaddcolumn = newdata.add_columns.map(docadd2 => docadd2.name).indexOf(currentfield.name); // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (newdata.update_columns.map(docup => docup.id).indexOf(currentfield.id) === -1) {\n          setnewdata(prev => {\n            var temp = prev;\n            temp.update_columns.push(fielddata[concataddcolumnsidx1]);\n            return temp;\n          });\n        } else {\n          const idxupcolumn = newdata.update_columns.map(docadd2 => docadd2.id).indexOf(currentfield.id);\n\n          if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2\n                },\n                required: currentfield.required\n              };\n              return temp;\n            });\n          } else {\n            setnewdata(prev => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger1]);\n  useEffect(() => {\n    if (addedfieldidx !== -1) {\n      setaddedfield(prev => {\n        if (prev[addedfieldidx] === false) {\n          prev[addedfieldidx] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger]);\n  useEffect(() => {\n    if (addedfieldidx1 !== -1) {\n      setaddedfield1(prev => {\n        if (prev[addedfieldidx1] === false) {\n          prev[addedfieldidx1] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx1] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger1]);\n  useEffect(() => {\n    if (addedfieldidx3 !== -1) {\n      setaddedfield3(prev => {\n        if (prev[addedfieldidx3] === false) {\n          prev[addedfieldidx3] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx3] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger3]); //checkbox dropdown dari model baru yang field asset\n\n  useEffect(() => {\n    if (idxdropdowntrigger3 !== -1) {\n      setfielddataa(prev => {\n        const temp = prev; // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n\n        temp[idxdropdowntrigger3][\"default\"] = {\n          default: currentcheckeddropdownn2,\n          opsi: currentdropdownn2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger3]); //checkbox dropdown dari model baru yang field buat sendiri\n\n  useEffect(() => {\n    if (idxdropdowntrigger2 !== -1) {\n      setfielddataa2(prev => {\n        const temp = prev;\n        temp[idxdropdowntrigger2][\"default\"] = {\n          default: currentcheckeddropdownn2,\n          opsi: currentdropdownn2\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger2]);\n  useEffect(() => {\n    setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n      model_columns: fielddataa.concat(fielddataa2)\n    }));\n  }, [concatfieldtrigger2]);\n  useEffect(() => {\n    if (addedfieldidx2 !== -1) {\n      setaddedfield2(prev => {\n        if (prev[addedfieldidx2] === false) {\n          prev[addedfieldidx2] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx2] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger2]);\n  useEffect(() => {\n    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n      model_columns: fielddata\n    }));\n  }, [newdatatrigger]);\n  useEffect(() => {\n    setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n      model_columns: fielddataa\n    }));\n  }, [newdatatrigger2]);\n  useEffect(() => {\n    var temp = [];\n\n    if (concatpartvalue !== -1) {\n      if (concatpartvalue.length === 0) {\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          model_parts: []\n        }));\n      } else {\n        concatpartvalue.map((doc, idx) => {\n          var idxtemp = temp.map(doc => doc.id).indexOf(doc.id);\n\n          if (idxtemp !== -1 && temp[idxtemp][\"id\"] === doc.id) {\n            var idxof = temp.map(doc => doc.id).indexOf(doc.id);\n            temp[idxof] = _objectSpread(_objectSpread({}, temp[idxof]), {}, {\n              quantity: temp[idxof].quantity + doc.quantity\n            });\n          } else if (idxtemp === -1) {\n            temp.push({\n              id: doc.id,\n              quantity: doc.quantity\n            });\n          }\n        });\n        setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n          add_models: temp\n        }));\n      }\n    }\n  }, [concatparttrigger]);\n  useEffect(() => {\n    if (cdidx !== -1) {\n      setcurrentdropdown2(prev => {\n        return cd2.filter((doc10, idx10) => idx10 !== cdidx);\n      });\n      setcd2(prev => prev.filter((doc11, idx11) => idx11 !== cdidx));\n    }\n  }, [cdtrigger]);\n  useEffect(() => {\n    if (cdpartidx !== -1) {\n      setcurrentdropdownn2(prev => {\n        return cd2part.filter((doc10, idx10) => idx10 !== cdpartidx);\n      });\n      setcd2part(prev => prev.filter((doc11, idx11) => idx11 !== cdpartidx));\n    }\n  }, [cdparttrigger]);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    st: st,\n    tok: initProps,\n    sidemenu: sidemenu,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8\",\n        children: /*#__PURE__*/_jsxDEV(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" col-span-4 flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-semibold py-2\",\n              children: [\"Form Ubah Model - \", newdata.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1201,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                href: `/admin/models/detail/${modelid}`,\n                children: /*#__PURE__*/_jsxDEV(_Button, {\n                  /*onClick={() => { console.log(newdata); console.log(fielddata); console.log(fielddata2); console.log(defaultdata); console.log(defaultasset) }}*/\n                  type: \"default\",\n                  children: \"Batal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1206,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1205,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                loading: loadingcreate,\n                disabled: disabledaddfield,\n                onClick: instanceForm.submit,\n                children: \"Simpan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1212,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1204,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1200,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1199,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Informasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1226,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow-md border p-8 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1230,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Form, {\n            form: instanceForm,\n            layout: \"vertical\",\n            onFinish: handleCreateModel,\n            initialValues: newdata,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                name: \"asset_id\",\n                label: \"Asset Type\",\n                rules: [{\n                  required: true,\n                  message: \"Asset Type wajib diisi\"\n                }],\n                children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                  style: {\n                    marginRight: `1rem`\n                  },\n                  dropdownStyle: {\n                    maxHeight: 400,\n                    overflow: \"auto\"\n                  },\n                  treeData: assetdata,\n                  placeholder: \"Pilih Asset Type\",\n                  treeDefaultExpandAll: true,\n                  onChange: (value, label, extra) => {\n                    if (typeof value !== \"undefined\") {\n                      onClickSelectAsset(extra.allCheckedNodes[0].node.props.id);\n                    } else {\n                      onClickSelectAsset(0);\n                    }\n                  },\n                  allowClear: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1249,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1239,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                name: \"name\",\n                label: \"Nama Model\",\n                rules: [{\n                  required: true,\n                  message: \"Nama Model wajib diisi\"\n                }],\n                children: /*#__PURE__*/_jsxDEV(_Input, {\n                  name: \"name\",\n                  onChange: e => {\n                    setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                      name: e.target.value\n                    }));\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1277,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1267,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" w-11/12 mr-2\",\n                children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"manufacturer_id\",\n                  label: \"Manufacturer\",\n                  children: /*#__PURE__*/_jsxDEV(_Select, {\n                    placeholder: \"Pilih Manufacturer\",\n                    onChange: value => {\n                      console.log(value);\n                      setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                        manufacturer_id: value\n                      }));\n                    },\n                    children: manufdata.map((doc, idx) => {\n                      return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: doc.id,\n                        children: doc.name\n                      }, idx, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1297,\n                        columnNumber: 29\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1288,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1287,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1286,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-1/12 flex pt-2 my-auto items-center justify-center cursor-pointer\",\n                onClick: () => {\n                  setmodalmanuf(true);\n                },\n                children: /*#__PURE__*/_jsxDEV(PlusSquareTwoTone, {\n                  style: {\n                    fontSize: `1.5rem`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1311,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1305,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1285,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"description\",\n              label: \"Deskripsi\",\n              children: /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                rows: 4,\n                name: \"description\",\n                onChange: e => {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    description: e.target.value\n                  }));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1315,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1314,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex mb-5\",\n              children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                style: {\n                  marginRight: `0.5rem`\n                },\n                onChange: e => {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    required_sn: e.target.checked\n                  }));\n                },\n                checked: newdata.required_sn\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1324,\n                columnNumber: 19\n              }, this), \" \", \"Serial Number wajib ada\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1323,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                style: {\n                  marginRight: `0.5rem`\n                },\n                onChange: e => {\n                  setnewdata(_objectSpread(_objectSpread({}, newdata), {}, {\n                    is_consumable: e.target.checked\n                  }));\n                },\n                checked: newdata.is_consumable\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1334,\n                columnNumber: 19\n              }, this), \" \", \"Model Consumable dengan satuan jumlah\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1333,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1232,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1352,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1351,\n          columnNumber: 11\n        }, this), loadingspec ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1355,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: fielddata2.length === 0 ? /*#__PURE__*/_jsxDEV(_Empty, {\n            image: _Empty.PRESENTED_IMAGE_SIMPLE\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1359,\n            columnNumber: 17\n          }, this) : fielddata2.map((doc, idx) => {\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: addedfield[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  const temp = [...addedfield];\n                  temp[idx] = false;\n\n                  for (var i = 0; i < temp.length; i++) {\n                    if (i !== idx) {\n                      temp[i] = true;\n                    }\n                  }\n\n                  setaddedfield(temp);\n                  setcurrentfield(fielddata2[idx]);\n\n                  if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                    setcurrentdropdown2(doc.default.opsi);\n                    setcurrentcheckeddropdown2(doc.default.default);\n                  }\n\n                  if (fielddata2[idx].data_type !== \"dropdown\" || fielddata2[idx].data_type !== \"checkbox\") {\n                    setcd2(doc.default.opsi);\n\n                    if (fielddata2[idx].name !== \"\" && fielddata2[idx].data_type !== \"\") {\n                      setdisabledtambah(false);\n                    } else {\n                      setdisabledtambah(true);\n                    }\n                  } else {\n                    if (doc.default.opsi.some(docopsi => docopsi === \"\")) {\n                      setdisabledtambah(true);\n                    } else {\n                      setdisabledtambah(false);\n                    }\n                  }\n\n                  setdisabledaddfield(true);\n                  setpointevent(\"pointer-events-none\");\n                },\n                className: \"jsx-3315758188\" + \" \" + `${pointevent} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-3315758188\" + \" \" + \"font-semibold mb-2\",\n                  children: [doc.name, fielddata2[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-3315758188\" + \" \" + \"judulField\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1416,\n                    columnNumber: 31\n                  }, this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-3315758188\" + \" \" + \"text-gray-400 text-sm\",\n                    children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && ` Text`, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1418,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1413,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-3315758188\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                  children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"paragraph\" || doc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex flex-col w-full\",\n                      children: doc.default.opsi.map((dok, idk) => {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-3315758188\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                            disabled: true,\n                            checked: doc.default.default === idk ? true : false,\n                            style: {\n                              marginRight: `0.5rem`\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1441,\n                            columnNumber: 43\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1450,\n                            columnNumber: 43\n                          }, this)]\n                        }, idk, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1437,\n                          columnNumber: 41\n                        }, this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1434,\n                      columnNumber: 35\n                    }, this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex flex-col w-full\",\n                      children: doc.default.opsi.map((dok, idk) => {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-3315758188\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                            disabled: true,\n                            checked: doc.default.default.indexOf(idk) !== -1 ? true : false,\n                            style: {\n                              marginRight: `0.5rem`\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1464,\n                            columnNumber: 43\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1475,\n                            columnNumber: 43\n                          }, this)]\n                        }, idk, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1460,\n                          columnNumber: 41\n                        }, this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1457,\n                      columnNumber: 35\n                    }, this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex justify-between w-full px-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                        children: doc.default\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1483,\n                        columnNumber: 37\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-3315758188\",\n                        children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1485,\n                          columnNumber: 39\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1484,\n                        columnNumber: 37\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1482,\n                      columnNumber: 35\n                    }, this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-3315758188\" + \" \" + \"flex h-20\",\n                      children: doc.default\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1490,\n                      columnNumber: 35\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"jsx-3315758188\" + \" \" + \"mb-0\",\n                    children: doc.default\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1494,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1427,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"3315758188\",\n                  children: \".judulField.jsx-3315758188::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5OUM2QixBQUdxRixZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuXG4gICAgICAgIHNldG1hbnVmZGF0YShkYXRhKTtcblxuICAgICAgICAvKiogU2V0IG5ldyBpbnNlcnRlZCBtYW51ZmFjdHVyZXIgYXMgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gdGhlIFwiTWFudWZhY3R1cmVyXCIgZHJvcGRvd24gKi9cbiAgICAgICAgaWYgKHRyaWdnZXJtYW51ZiA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgbGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIgPSBkYXRhW2RhdGEubGVuZ3RoIC0gMV07XG4gICAgICAgICAgY29uc3QgbmV3TWFudWZhY3R1cmVySWQgPSBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZDtcblxuICAgICAgICAgIC8qKiBGb3JtIGNvbnRyb2wgdmFsdWUgKi9cbiAgICAgICAgICBpbnN0YW5jZUZvcm0uc2V0RmllbGRzVmFsdWUoeyBtYW51ZmFjdHVyZXJfaWQ6IG5ld01hbnVmYWN0dXJlcklkIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEocHJldiA9PiAoey4uLnByZXYsIG1hbnVmYWN0dXJlcl9pZDogbmV3TWFudWZhY3R1cmVySWQgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSwgW3RyaWdnZXJtYW51Zl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke21vZGVsaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSByZXMyLmRhdGEubW9kZWxfY29sdW1ucy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgID8gZG9jLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vbW9kZWxfcGFydHNcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICAgICAgICB2YXIgdGVtcDExID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGVtcDEgPSB7fTtcbiAgICAgICAgICAgIHRlbXAxID0gaXRlbVtpXS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQgPT09IFwiXCIgfHwgZG9jLmRlZmF1bHQgPT09IFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGVtcDExLnB1c2goe1xuICAgICAgICAgICAgICAuLi5pdGVtW2ldLFxuICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wMSxcbiAgICAgICAgICAgICAgbW9kZWxfcGFydHM6XG4gICAgICAgICAgICAgICAgaXRlbVtpXS5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICA/IHJlY3Vyc2l2ZVBhcnRNb2RlbChpdGVtW2ldLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGVtcDExO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB5byA9IHJlY3Vyc2l2ZVBhcnRNb2RlbChyZXMyLmRhdGEubW9kZWxfcGFydHMpO1xuICAgICAgICBjb25zdCB0ZW1wMiA9IHtcbiAgICAgICAgICAuLi5yZXMyLmRhdGEsXG4gICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5hc3NldC5jb2RlLFxuICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAsXG4gICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHNldG5ld2RhdGEodGVtcDIpO1xuICAgICAgICBzZXRkZWZhdWx0ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRhc3NldCh0ZW1wKTtcbiAgICAgICAgc2V0ZGVmYXVsdG1vZGVsKHRlbXAyKTtcbiAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKHlvKTtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICBzZXRhc3NldHR5cGVjb2RlKHJlczIuZGF0YS5hc3NldF9pZCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKG1vZGVsdHJpZ2dlcik7XG4gICAgICAgIG1vZGVsdHJpZ2dlciAhPT0gZmFsc2UgPyBzZXRlZGl0cGFydCh0cnVlKSA6IG51bGw7XG4gICAgICB9KTtcbiAgfSwgW21vZGVsdHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBhc3NldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXJdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIHV0YW1hIHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjEgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyMV1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7XG4gICAgICAuLi5uZXdkYXRhLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhMi5jb25jYXQoZmllbGRkYXRhKSxcbiAgICB9KTtcbiAgfSwgW2NvbmNhdGZpZWxkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4ICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjaGFuZ2Vhc3NldC5zb21lKFxuICAgICAgICAgIChkb2Nzb21lKSA9PiBkb2Nzb21lLmlkID09PSBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWRcbiAgICAgICAgKSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICApIHtcbiAgICAgICAgLy8gaWYgKChmaWVsZGRhdGEyLmxlbmd0aCAtIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoKSA+PSBuZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkKSA9PiBkb2NhZGQubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goZmllbGRkYXRhMltmaWVsZGRhdGEyLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4MSAhPT0gLTEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29uY2F0YWRkY29sdW1uc2lkeDEgPiBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCAtIDEgfHxcbiAgICAgICAgdHlwZW9mIGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEuaWQgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgICAgY2hhbmdlYXNzZXQgPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbZmllbGRkYXRhLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbY29uY2F0YWRkY29sdW1uc2lkeDFdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4XSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgxICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDEoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDFdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDFdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4MV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MyAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQzKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgzXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgzXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjNdKTtcblxuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgYmFydSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjMgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAvLyB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWVkcm9wZG93bnRyaWdnZXJ9YFxuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjNdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHtcbiAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYS5jb25jYXQoZmllbGRkYXRhYTIpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MiAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQyKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgyXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgyXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YWEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciB0ZW1wID0gW107XG4gICAgaWYgKGNvbmNhdHBhcnR2YWx1ZSAhPT0gLTEpIHtcbiAgICAgIGlmIChjb25jYXRwYXJ0dmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9wYXJ0czogW10gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25jYXRwYXJ0dmFsdWUubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIHZhciBpZHh0ZW1wID0gdGVtcC5tYXAoKGRvYykgPT4gZG9jLmlkKS5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgaWYgKGlkeHRlbXAgIT09IC0xICYmIHRlbXBbaWR4dGVtcF1bXCJpZFwiXSA9PT0gZG9jLmlkKSB7XG4gICAgICAgICAgICB2YXIgaWR4b2YgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgIHRlbXBbaWR4b2ZdID0ge1xuICAgICAgICAgICAgICAuLi50ZW1wW2lkeG9mXSxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IHRlbXBbaWR4b2ZdLnF1YW50aXR5ICsgZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlkeHRlbXAgPT09IC0xKSB7XG4gICAgICAgICAgICB0ZW1wLnB1c2goe1xuICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICBxdWFudGl0eTogZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFkZF9tb2RlbHM6IHRlbXAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0cGFydHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RpZHggIT09IC0xKSB7XG4gICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDIuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZGlkeCk7XG4gICAgICB9KTtcbiAgICAgIHNldGNkMigocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkaWR4KSk7XG4gICAgfVxuICB9LCBbY2R0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNkcGFydGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDJwYXJ0LmZpbHRlcigoZG9jMTAsIGlkeDEwKSA9PiBpZHgxMCAhPT0gY2RwYXJ0aWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QycGFydCgocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkcGFydGlkeCkpO1xuICAgIH1cbiAgfSwgW2NkcGFydHRyaWdnZXJdKTtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0XG4gICAgICBzdD17c3R9XG4gICAgICB0b2s9e2luaXRQcm9wc31cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICAgIHBhdGhBcnI9e3BhdGhBcnJ9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTRcIlxuICAgICAgICBpZD1cImNyZWF0ZUFzc2V0c1dyYXBwZXJcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItOFwiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtMiBwdC00IGJvcmRlci10LTIgYm9yZGVyLWItMiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBweS0yXCI+XG4gICAgICAgICAgICAgICAgRm9ybSBVYmFoIE1vZGVsIC0ge25ld2RhdGEubmFtZX1cbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9e2AvYWRtaW4vbW9kZWxzL2RldGFpbC8ke21vZGVsaWR9YH0+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC8qb25DbGljaz17KCkgPT4geyBjb25zb2xlLmxvZyhuZXdkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhMik7IGNvbnNvbGUubG9nKGRlZmF1bHRkYXRhKTsgY29uc29sZS5sb2coZGVmYXVsdGFzc2V0KSB9fSovIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nY3JlYXRlfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtpbnN0YW5jZUZvcm0uc3VibWl0fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvU3RpY2t5PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkluZm9ybWFzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgICAgICA8U3Bpbj48L1NwaW4+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybX1cbiAgICAgICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsfVxuICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZXM9e25ld2RhdGF9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFzc2V0IFR5cGUgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93blN0eWxlPXt7IG1heEhlaWdodDogNDAwLCBvdmVyZmxvdzogXCJhdXRvXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLmFsbENoZWNrZWROb2Rlc1swXS5ub2RlLnByb3BzLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiIGxhYmVsPVwiTWFudWZhY3R1cmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IHB0LTIgbXktYXV0byBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxtYW51Zih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBkZXNjcmlwdGlvbjogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5yZXF1aXJlZF9zbn1cbiAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5pc19jb25zdW1hYmxlfVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBNb2RlbCBDb25zdW1hYmxlIGRlbmdhbiBzYXR1YW4ganVtbGFoXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlNwZXNpZmlrYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7bG9hZGluZ3NwZWMgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhMi5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfT48L0VtcHR5PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGZpZWxkZGF0YTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZFtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKGZpZWxkZGF0YTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGEyW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICE9PSBmaWVsZGRhdGEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeFVwZGF0ZUNvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4VXBkYXRlQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2ZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkMVtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMV07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0ID09PSBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0LmluZGV4T2YoaWRrKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21vbWVudChmaWVsZGRhdGFbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YTIubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jZGVmKSA9PiBkb2NkZWYuaWQgPT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX2NvbHVtbl9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSB0ZW1wLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRlbXAuYWRkX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUxKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7bmV3ZGF0YS5pc19jb25zdW1hYmxlID09PSBmYWxzZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgbWItOCBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+S29uZmlndXJhc2kgUGFydCBNb2RlbDwvaDE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHttb2RlbHBhcnRmaWVsZGRhdGEubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17YHBhbmVsJHtpZHh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRvYy5tb2RlbF9jaGlsZC5sZW5ndGggPT09IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtci0yXCI+e2RvYy5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJyaWdodFwiIHRpdGxlPVwiTW9kZWwgdGlkYWsgbWVtaWxpa2kgcGFydCBtb2RlbCFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgPEV4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX0+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBNb2RlbCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBkYXJpIE1vZGVsIFBhcnQgJHtuZXdkYXRhLm5hbWV9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dGVtcCA9IG1vZGVscGFydGZpZWxkZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhID0gdGVtcC5hZGRfbW9kZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzIpID0+IGRvYzIuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC5hZGRfbW9kZWxzW2lkeGRhdGFdLnF1YW50aXR5ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5zcGxpY2UoaWR4ZGF0YSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3BhcnRzKSA9PiBkb2NwYXJ0cy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvYy5pZCkgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX21vZGVsX2lkcy5pbmRleE9mKGRvYy5pZCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZWRgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXNzZXQgVHlwZXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsYXNzZXR0eXBlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e2RvYy5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfY29sdW1ucy5tYXAoKGRvY21jLCBpZHhtYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGFyQXQoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgbXktYXV0byBweC0yIHB5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdC5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2ksIGlkeG9wc2kpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeG9wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLXdoaXRlIGJvcmRlciB3LTMvMTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gcHgtMiBweS0xIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhvcHNpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRlZmF1bHQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJnLWdyYXktMTAwIHJvdW5kZWQgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIHctZnVsbCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaW1lbGluZSBzdHlsZT17eyBtYXJnaW5Ub3A6IGAxcmVtYCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2VkaXRwYXJ0ID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG15LTMgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTUgdGV4dC1sZyBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50aWRtb2RlbH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtjdXJyZW50aWRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hpbmdwYXJ0ID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VhcmNoPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9L2dldE1vZGVscz9yb3dzPTEwJm5hbWU9JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldG1vZGVsZGF0YShbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ3BhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gYXRhdSBjYXJpIG5hbWEgbW9kdWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uUG9wdXBTY3JvbGw9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoZXZlbnQudGFyZ2V0LnNjcm9sbFRvcCArIGV2ZW50LnRhcmdldC5vZmZzZXRIZWlnaHQgPT09IGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNldHBhZ2UocHJldiA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHM/cGFnZT0ke3BhZ2V9JnJvd3M9MTBgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlczIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2Nyb2xsVG8oMCwgZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLnRvID49IHJlczIuZGF0YS50b3RhbCA/IHNldG1vZGVsZGF0YShbLi4ubW9kZWxkYXRhLCByZXMyLmRhdGEuZGF0YV0pIDogc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhLCA8U3BpbiBzaXplPVwic21hbGxcIiAvPl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9kZWxkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17ZG9jLmlkfSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQbHVzU3F1YXJlVHdvVG9uZSBzdHlsZT17eyBmb250U2l6ZTogYDEuNXJlbWAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdnZXRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke2N1cnJlbnRpZG1vZGVsfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9jb2x1bW5zXCJdID0gcmVzMi5kYXRhW3Byb3BdLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVscGFydHMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubW9kZWxfcGFydHMubWFwKChkb2MyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwMyA9IGRvYzIubW9kZWxfY29sdW1ucy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MzIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbWFwMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9wYXJ0c1wiXSA9IG1vZGVscGFydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wiaWRcIl0gPSByZXMyLmRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibmFtZVwiXSA9IHJlczIuZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wMSA9IFsuLi50ZW1wMSwgdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHZhbHVlKHJlczIuZGF0YS5tb2RlbF9wYXJ0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldGNvbmNhdHBhcnR0cmlnZ2VyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZGF0YTIgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MzKSA9PiBkb2MzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRpZG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhkYXRhMiA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRpZG1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaWR4ZGF0YTIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLm1hcCgoZG9jMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYzEuaWQgPT09IGN1cnJlbnRpZG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzEucXVhbnRpdHkgPSBkb2MxLnF1YW50aXR5ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bG9hZGluZ2dldG1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgKyBUYW1iYWggUGFydCBNb2RlbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGQyfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybTIuc3VibWl0fVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGVtb2RlbH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsY3JlYXRlbW9kZWx9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgbWItOFwiPlxuICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICBmb3JtPXtpbnN0YW5jZUZvcm0yfVxuICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQyKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgIGxhYmVsPVwiTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWFudWZhY3R1cmVyIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEyLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nc3BlYzIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpZHh9IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+IDogbnVsbH0gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+KHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiID8gXCJTaW5nbGUgVGV4dGJveFwiIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctZnVsbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy03IGZsZXgganVzdGlmeS1jZW50ZXIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0gPSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gZGVmYXVsdFZhbHVlPXtkb2NjfSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfSBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXIgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJwYXJhZ3JhcGhcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWEgcm93cz17NH0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNoZWNrYm94XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaSBkaWJhd2FoIGluaTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvY2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0ucHVzaChpZHh4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPiB7ZG9jY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZGF0ZVN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICB7bG9hZGluZ3NwZWMyID8gKFxuICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2ZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDNbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQzKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3h4LCBpZHh4KSA9PiBkb2N4eC5pZCAhPT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQyLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIzKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAge2ZpZWxkZGF0YWEyLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQyW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnQyfSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMl07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWEyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YWEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YWEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYTIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkMn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBUYW1iYWggU3Blc2lmaWthc2kgTW9kZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1hbnVmYWN0dXJlcjwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZG1hbnVmfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZE1hbnVmYWN0dXJlcn1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nbWFudWZ9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbG1hbnVmfVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxtYW51ZihmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXs5MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBNYW51ZmFjdHVyZXIgPHNwYW4gY2xhc3NOYW1lPVwibmFtYW1hbnVcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFtYW51Zi5uYW1lfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5hbWEgTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRtYW51Zih0cnVlKVxuICAgICAgICAgICAgICAgICAgOiBzZXRkaXNhYmxlZG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhbWFudWYoeyBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFtYW51OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcywgcGFyYW1zIH0pIHtcbiAgY29uc3QgbW9kZWxpZCA9IHBhcmFtcy5tb2RlbElkO1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXMgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGV0YWlsUHJvZmlsZWAsXG4gICAge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9XG4gICk7XG4gIGNvbnN0IHJlc2pzb24gPSBhd2FpdCByZXNvdXJjZXMuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb247XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCI4MlwiLFxuICAgICAgbW9kZWxpZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbHNVcGRhdGUyO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n                }, void 0, false, void 0, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1365,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n                children: /*#__PURE__*/_jsxDEV(_Form, {\n                  layout: \"vertical\",\n                  initialValues: currentfield,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"name\",\n                      label: \"Nama Spesifikasi\",\n                      rules: [{\n                        required: true,\n                        message: \"Nama Spesifikasi wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Input, {\n                        required: true,\n                        name: \"name\",\n                        onChange: e => {\n                          setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                            name: e.target.value\n                          }));\n\n                          if (e.target.value === \"\") {\n                            setdisabledtambah(true);\n                          } else if (e.target.value !== \"\" && currentfield.data_type !== \"\" && currentdropdown2.every((doca, idxa) => doca !== \"\")) {\n                            setdisabledtambah(false);\n                          }\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1523,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1513,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"data_type\",\n                      label: \"Tipe Field\",\n                      rules: [{\n                        required: true,\n                        message: \"Tipe Field wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Select, {\n                        placeholder: \"Pilih Tipe Field\",\n                        onChange: value => {\n                          setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                            data_type: value\n                          }));\n\n                          if (value === \"dropdown\" || value === \"checkbox\") {\n                            if (currentdropdown2.every((doca, idxa) => doca !== \"\")) {\n                              setdisabledtambah(false);\n                            } else {\n                              setdisabledtambah(true);\n                            }\n                          } else {\n                            setdisabledtambah(false);\n                          }\n\n                          if (value === \"dropdown\") {\n                            setcurrentcheckeddropdown2(\"\");\n                            setcurrentdropdown2([\"\", \"\"]);\n                            setdisabledtambah(true);\n                          }\n\n                          if (value === \"checkbox\") {\n                            setcurrentcheckeddropdown2([]);\n                            setcurrentdropdown2([\"\", \"\"]);\n                            setcd2([\"\", \"\"]);\n                            setdisabledtambah(true);\n                          }\n                        },\n                        name: \"data_type\",\n                        children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"dropdown\",\n                          children: \"Dropdown\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1592,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"number\",\n                          children: \"Number\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1595,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"paragraph\",\n                          children: \"Paragraph Text\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1598,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"checkbox\",\n                          children: \"Checkbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1601,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"single\",\n                          children: \"Single Textbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1604,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"date\",\n                          children: \"Date\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1607,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1555,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1545,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1512,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"default\",\n                    label: \"Default\",\n                    children: [currentfield.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1617,\n                        columnNumber: 35\n                      }, this), currentdropdown2.map((doc, idxx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            checked: currentcheckeddropdown2 === idxx ? true : false,\n                            onChange: e => {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdown2(idxx);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1624,\n                            columnNumber: 41\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1623,\n                          columnNumber: 39\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: `0.5rem`\n                            },\n                            defaultValue: doc,\n                            placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                            onChange: e => {\n                              setcurrentdropdown2(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdown2.every((doca, idxa) => doca !== \"\") && currentfield.name !== \"\") {\n                                setdisabledtambah(false);\n                              } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                                setdisabledtambah(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1638,\n                            columnNumber: 41\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1637,\n                          columnNumber: 39\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: () => {\n                            setcurrentdropdown2([]);\n                            setcdtrigger(prev => !prev);\n                            setcdidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1680,\n                            columnNumber: 41\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1672,\n                          columnNumber: 39\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1622,\n                        columnNumber: 37\n                      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: () => {\n                            setcurrentdropdown2([...currentdropdown2, \"\"]);\n                            setcd2([...cd2, \"\"]);\n                            setdisabledtambah(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1685,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1684,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1616,\n                      columnNumber: 33\n                    }, this) : null, currentfield.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1703,\n                        columnNumber: 35\n                      }, this), currentdropdown2.map((doc, idxx) => {\n                        const idxchecked = currentcheckeddropdown2.includes(idxx);\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-7 flex items-center\",\n                            children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                              defaultChecked: idxchecked,\n                              onChange: e => {\n                                if (e.target.checked === true) {\n                                  setcurrentcheckeddropdown2(prev => {\n                                    var temp = prev;\n                                    temp.push(idxx);\n                                    return temp;\n                                  });\n                                } else {\n                                  setcurrentcheckeddropdown2(prev => {\n                                    var temp = prev;\n                                    const index = temp.indexOf(idxx);\n                                    temp.splice(index, 1);\n                                    return temp;\n                                  });\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1713,\n                              columnNumber: 43\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1712,\n                            columnNumber: 41\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-10/12 mr-5\",\n                            children: /*#__PURE__*/_jsxDEV(_Input, {\n                              style: {\n                                marginRight: `0.5rem`\n                              },\n                              defaultValue: doc,\n                              placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                              onChange: e => {\n                                setcurrentdropdown2(prev => {\n                                  const temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n                                setcd2(prev => {\n                                  const temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n\n                                if (e.target.value !== \"\" && currentdropdown2.every((doca, idxa) => doca !== \"\") && currentfield.name !== \"\") {\n                                  setdisabledtambah(false);\n                                } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                                  setdisabledtambah(true);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1739,\n                              columnNumber: 43\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1738,\n                            columnNumber: 41\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-1/12 flex justify-around\",\n                            onClick: () => {\n                              setcurrentdropdown2([]);\n                              setcdtrigger(prev => !prev);\n                              setcdidx(idxx);\n                            },\n                            children: /*#__PURE__*/_jsxDEV(_Button, {\n                              type: \"danger\",\n                              children: \"-\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1781,\n                              columnNumber: 43\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1773,\n                            columnNumber: 41\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1711,\n                          columnNumber: 39\n                        }, this);\n                      }), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: () => {\n                            setcurrentdropdown2([...currentdropdown2, \"\"]);\n                            setcd2([...cd2, \"\"]);\n                            setdisabledtambah(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1787,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1786,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1702,\n                      columnNumber: 33\n                    }, this) : null, currentfield.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                      style: {\n                        width: `30%`\n                      },\n                      defaultValue: fielddata2[idx].default,\n                      placeholder: `Masukkan default ${currentfield.name}`,\n                      onChange: value => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          default: `${value}`\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1804,\n                      columnNumber: 33\n                    }, this), currentfield.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                      rows: 4,\n                      placeholder: `Masukkan default ${currentfield.name}`,\n                      defaultValue: fielddata2[idx].default,\n                      onChange: e => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          default: e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1818,\n                      columnNumber: 33\n                    }, this), currentfield.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: `Masukkan default ${currentfield.name}`,\n                      defaultValue: fielddata2[idx].default,\n                      onChange: e => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          default: e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1832,\n                      columnNumber: 33\n                    }, this), currentfield.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: `Masukkan default ${currentfield.name}`,\n                      defaultValue: fielddata2[idx].default,\n                      onChange: e => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          default: e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1845,\n                      columnNumber: 33\n                    }, this), currentfield.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                      defaultValue: moment(fielddata2[idx].default),\n                      style: {\n                        width: `30%`\n                      },\n                      placeholder: `Masukkan default ${currentfield.name}`,\n                      onChange: (value, dateString) => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          default: dateString\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1858,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1613,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1871,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex mt-4 justify-end\",\n                    children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                      placement: \"bottom\",\n                      title: `Apakah anda yakin ingin menghapus field ${doc.name === \"\" ? \"ini\" : doc.name}?`,\n                      okText: \"Ya\",\n                      cancelText: \"Tidak\",\n                      onConfirm: () => {\n                        setfielddata2(prev => prev.filter((_, idxx) => idxx !== idx));\n                        setnewdata(prev => {\n                          var temp = prev;\n                          temp.model_columns = temp.model_columns.filter((_, idxx) => idxx !== fielddata.length + idx);\n                          return temp;\n                        });\n\n                        if (defaultdata.model_columns.some(docdef => docdef.id === doc.id)) {\n                          setnewdata(prev => {\n                            var temp = prev;\n                            temp.delete_column_ids.push(doc.id);\n                            const idxUpdateColumns = temp.update_columns.map(docmap => docmap.id).indexOf(doc.id);\n                            temp.update_columns.splice(idxUpdateColumns, 1);\n                            const idxtemp = defaultdata.model_columns.map(doctemp => doctemp.id).indexOf(doc.id);\n                            temp.model_columns.splice(idxtemp, 1);\n                            return temp;\n                          });\n                        } else {\n                          setnewdata(prev => {\n                            var temp = prev;\n                            const idxtemp = temp.add_columns.map(doctemp => doctemp.name).indexOf(doc.name);\n                            idxtemp !== -1 ? temp.add_columns.splice(idxtemp, 1) : null;\n                            return temp;\n                          });\n                        }\n\n                        setaddedfield(prev => {\n                          prev.splice(idx, 1);\n                          return prev;\n                        });\n                        setdisabledaddfield(false);\n                        setpointevent(\"\");\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                        children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                          style: {\n                            fontSize: `1.25rem`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1936,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1935,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1873,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \" flex items-center mr-4\",\n                      children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                        checked: currentfield.required,\n                        style: {\n                          marginRight: `0.5rem`\n                        },\n                        onChange: e => {\n                          setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                            required: e.target.checked\n                          }));\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1942,\n                        columnNumber: 33\n                      }, this), \" \", \"Required\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1941,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                      disabled: disabledtambah,\n                      type: \"primary\",\n                      onClick: () => {\n                        if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n                          setidxdropdowntrigger(idx);\n                          setvaluedropdowntrigger(prev => !prev);\n                        }\n\n                        setconcataddcolumnsidx(idx);\n                        setconcataddcolumnsvalue(doc);\n                        setconcataddcolumnstrigger(prev => !prev);\n                        const temp = fielddata2;\n                        temp[idx] = currentfield;\n                        setfielddata2(temp);\n                        setaddedfieldidx(idx);\n                        setaddedfieldtrigger(prev => !prev);\n                        setconcatfieldtrigger(prev => !prev);\n                        setdisabledaddfield(false);\n                        setpointevent(\"\");\n                      },\n                      children: \"Tambah\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1954,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1872,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1511,\n                  columnNumber: 27\n                }, this)\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1507,\n                columnNumber: 25\n              }, this)\n            }, void 0, false);\n          })\n        }, void 0, false), fielddata.map((doc, idx) => {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: addedfield1[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => {\n                const temp = [...addedfield1];\n                temp[idx] = false;\n\n                for (var i = 0; i < temp.length; i++) {\n                  if (i !== idx) {\n                    temp[i] = true;\n                  }\n                }\n\n                setaddedfield1(temp);\n                setcurrentfield(fielddata[idx]);\n\n                if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                  setcurrentdropdown2(doc.default.opsi);\n                  setcurrentcheckeddropdown2(doc.default.default);\n                }\n\n                if (fielddata[idx].data_type !== \"dropdown\" || fielddata[idx].data_type !== \"checkbox\") {\n                  setcd2(doc.default.opsi);\n\n                  if (fielddata[idx].name !== \"\" && fielddata[idx].data_type !== \"\") {\n                    setdisabledtambah(false);\n                  } else {\n                    setdisabledtambah(true);\n                  }\n                } else {\n                  if (doc.default.opsi.some(docopsi => docopsi === \"\")) {\n                    setdisabledtambah(true);\n                  } else {\n                    setdisabledtambah(false);\n                  }\n                }\n\n                setdisabledaddfield(true);\n                setpointevent(\"pointer-events-none\");\n              },\n              className: \"jsx-618540288\" + \" \" + `${pointevent} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-618540288\" + \" \" + \"font-semibold mb-2\",\n                children: [doc.name, fielddata[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-618540288\" + \" \" + \"judulField\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2043,\n                  columnNumber: 25\n                }, this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-618540288\" + \" \" + \"text-gray-400 text-sm\",\n                  children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && ` Text`, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2045,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2040,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-618540288\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"paragraph\" || doc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex flex-col w-full\",\n                    children: doc.default.opsi.map((dok, idk) => {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-618540288\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                          disabled: true,\n                          checked: doc.default.default === idk ? true : false,\n                          style: {\n                            marginRight: `0.5rem`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2068,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2077,\n                          columnNumber: 37\n                        }, this)]\n                      }, idk, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2064,\n                        columnNumber: 35\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2061,\n                    columnNumber: 29\n                  }, this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex flex-col w-full\",\n                    children: doc.default.opsi.map((dok, idk) => {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-618540288\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                          disabled: true,\n                          checked: doc.default.default.indexOf(idk) !== -1 ? true : false,\n                          style: {\n                            marginRight: `0.5rem`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2091,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2100,\n                          columnNumber: 37\n                        }, this)]\n                      }, idk, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2087,\n                        columnNumber: 35\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2084,\n                    columnNumber: 29\n                  }, this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex justify-between w-full px-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                      children: doc.default\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2108,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-618540288\",\n                      children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2110,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2109,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2107,\n                    columnNumber: 29\n                  }, this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-618540288\" + \" \" + \"flex h-20\",\n                    children: doc.default\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2115,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"jsx-618540288\" + \" \" + \"mb-0\",\n                  children: doc.default\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2119,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2054,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                id: \"618540288\",\n                children: \".judulField.jsx-618540288::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwa0V1QixBQUdxRSxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuXG4gICAgICAgIHNldG1hbnVmZGF0YShkYXRhKTtcblxuICAgICAgICAvKiogU2V0IG5ldyBpbnNlcnRlZCBtYW51ZmFjdHVyZXIgYXMgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gdGhlIFwiTWFudWZhY3R1cmVyXCIgZHJvcGRvd24gKi9cbiAgICAgICAgaWYgKHRyaWdnZXJtYW51ZiA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgbGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIgPSBkYXRhW2RhdGEubGVuZ3RoIC0gMV07XG4gICAgICAgICAgY29uc3QgbmV3TWFudWZhY3R1cmVySWQgPSBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZDtcblxuICAgICAgICAgIC8qKiBGb3JtIGNvbnRyb2wgdmFsdWUgKi9cbiAgICAgICAgICBpbnN0YW5jZUZvcm0uc2V0RmllbGRzVmFsdWUoeyBtYW51ZmFjdHVyZXJfaWQ6IG5ld01hbnVmYWN0dXJlcklkIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEocHJldiA9PiAoey4uLnByZXYsIG1hbnVmYWN0dXJlcl9pZDogbmV3TWFudWZhY3R1cmVySWQgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSwgW3RyaWdnZXJtYW51Zl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke21vZGVsaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSByZXMyLmRhdGEubW9kZWxfY29sdW1ucy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgID8gZG9jLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vbW9kZWxfcGFydHNcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICAgICAgICB2YXIgdGVtcDExID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGVtcDEgPSB7fTtcbiAgICAgICAgICAgIHRlbXAxID0gaXRlbVtpXS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQgPT09IFwiXCIgfHwgZG9jLmRlZmF1bHQgPT09IFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGVtcDExLnB1c2goe1xuICAgICAgICAgICAgICAuLi5pdGVtW2ldLFxuICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wMSxcbiAgICAgICAgICAgICAgbW9kZWxfcGFydHM6XG4gICAgICAgICAgICAgICAgaXRlbVtpXS5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICA/IHJlY3Vyc2l2ZVBhcnRNb2RlbChpdGVtW2ldLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGVtcDExO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB5byA9IHJlY3Vyc2l2ZVBhcnRNb2RlbChyZXMyLmRhdGEubW9kZWxfcGFydHMpO1xuICAgICAgICBjb25zdCB0ZW1wMiA9IHtcbiAgICAgICAgICAuLi5yZXMyLmRhdGEsXG4gICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5hc3NldC5jb2RlLFxuICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAsXG4gICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHNldG5ld2RhdGEodGVtcDIpO1xuICAgICAgICBzZXRkZWZhdWx0ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRhc3NldCh0ZW1wKTtcbiAgICAgICAgc2V0ZGVmYXVsdG1vZGVsKHRlbXAyKTtcbiAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKHlvKTtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICBzZXRhc3NldHR5cGVjb2RlKHJlczIuZGF0YS5hc3NldF9pZCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKG1vZGVsdHJpZ2dlcik7XG4gICAgICAgIG1vZGVsdHJpZ2dlciAhPT0gZmFsc2UgPyBzZXRlZGl0cGFydCh0cnVlKSA6IG51bGw7XG4gICAgICB9KTtcbiAgfSwgW21vZGVsdHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBhc3NldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXJdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIHV0YW1hIHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjEgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyMV1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7XG4gICAgICAuLi5uZXdkYXRhLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhMi5jb25jYXQoZmllbGRkYXRhKSxcbiAgICB9KTtcbiAgfSwgW2NvbmNhdGZpZWxkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4ICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjaGFuZ2Vhc3NldC5zb21lKFxuICAgICAgICAgIChkb2Nzb21lKSA9PiBkb2Nzb21lLmlkID09PSBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWRcbiAgICAgICAgKSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICApIHtcbiAgICAgICAgLy8gaWYgKChmaWVsZGRhdGEyLmxlbmd0aCAtIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoKSA+PSBuZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkKSA9PiBkb2NhZGQubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goZmllbGRkYXRhMltmaWVsZGRhdGEyLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4MSAhPT0gLTEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29uY2F0YWRkY29sdW1uc2lkeDEgPiBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCAtIDEgfHxcbiAgICAgICAgdHlwZW9mIGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEuaWQgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgICAgY2hhbmdlYXNzZXQgPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbZmllbGRkYXRhLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbY29uY2F0YWRkY29sdW1uc2lkeDFdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4XSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgxICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDEoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDFdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDFdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4MV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MyAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQzKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgzXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgzXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjNdKTtcblxuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgYmFydSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjMgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAvLyB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWVkcm9wZG93bnRyaWdnZXJ9YFxuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjNdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHtcbiAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYS5jb25jYXQoZmllbGRkYXRhYTIpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MiAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQyKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgyXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgyXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YWEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciB0ZW1wID0gW107XG4gICAgaWYgKGNvbmNhdHBhcnR2YWx1ZSAhPT0gLTEpIHtcbiAgICAgIGlmIChjb25jYXRwYXJ0dmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9wYXJ0czogW10gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25jYXRwYXJ0dmFsdWUubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIHZhciBpZHh0ZW1wID0gdGVtcC5tYXAoKGRvYykgPT4gZG9jLmlkKS5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgaWYgKGlkeHRlbXAgIT09IC0xICYmIHRlbXBbaWR4dGVtcF1bXCJpZFwiXSA9PT0gZG9jLmlkKSB7XG4gICAgICAgICAgICB2YXIgaWR4b2YgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgIHRlbXBbaWR4b2ZdID0ge1xuICAgICAgICAgICAgICAuLi50ZW1wW2lkeG9mXSxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IHRlbXBbaWR4b2ZdLnF1YW50aXR5ICsgZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlkeHRlbXAgPT09IC0xKSB7XG4gICAgICAgICAgICB0ZW1wLnB1c2goe1xuICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICBxdWFudGl0eTogZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFkZF9tb2RlbHM6IHRlbXAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0cGFydHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RpZHggIT09IC0xKSB7XG4gICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDIuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZGlkeCk7XG4gICAgICB9KTtcbiAgICAgIHNldGNkMigocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkaWR4KSk7XG4gICAgfVxuICB9LCBbY2R0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNkcGFydGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDJwYXJ0LmZpbHRlcigoZG9jMTAsIGlkeDEwKSA9PiBpZHgxMCAhPT0gY2RwYXJ0aWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QycGFydCgocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkcGFydGlkeCkpO1xuICAgIH1cbiAgfSwgW2NkcGFydHRyaWdnZXJdKTtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0XG4gICAgICBzdD17c3R9XG4gICAgICB0b2s9e2luaXRQcm9wc31cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICAgIHBhdGhBcnI9e3BhdGhBcnJ9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTRcIlxuICAgICAgICBpZD1cImNyZWF0ZUFzc2V0c1dyYXBwZXJcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItOFwiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtMiBwdC00IGJvcmRlci10LTIgYm9yZGVyLWItMiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBweS0yXCI+XG4gICAgICAgICAgICAgICAgRm9ybSBVYmFoIE1vZGVsIC0ge25ld2RhdGEubmFtZX1cbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9e2AvYWRtaW4vbW9kZWxzL2RldGFpbC8ke21vZGVsaWR9YH0+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC8qb25DbGljaz17KCkgPT4geyBjb25zb2xlLmxvZyhuZXdkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhMik7IGNvbnNvbGUubG9nKGRlZmF1bHRkYXRhKTsgY29uc29sZS5sb2coZGVmYXVsdGFzc2V0KSB9fSovIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nY3JlYXRlfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtpbnN0YW5jZUZvcm0uc3VibWl0fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvU3RpY2t5PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkluZm9ybWFzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgICAgICA8U3Bpbj48L1NwaW4+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybX1cbiAgICAgICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsfVxuICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZXM9e25ld2RhdGF9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFzc2V0IFR5cGUgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93blN0eWxlPXt7IG1heEhlaWdodDogNDAwLCBvdmVyZmxvdzogXCJhdXRvXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLmFsbENoZWNrZWROb2Rlc1swXS5ub2RlLnByb3BzLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiIGxhYmVsPVwiTWFudWZhY3R1cmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IHB0LTIgbXktYXV0byBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxtYW51Zih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBkZXNjcmlwdGlvbjogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5yZXF1aXJlZF9zbn1cbiAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5pc19jb25zdW1hYmxlfVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBNb2RlbCBDb25zdW1hYmxlIGRlbmdhbiBzYXR1YW4ganVtbGFoXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlNwZXNpZmlrYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7bG9hZGluZ3NwZWMgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhMi5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfT48L0VtcHR5PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGZpZWxkZGF0YTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZFtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKGZpZWxkZGF0YTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGEyW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICE9PSBmaWVsZGRhdGEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeFVwZGF0ZUNvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4VXBkYXRlQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2ZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkMVtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMV07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0ID09PSBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0LmluZGV4T2YoaWRrKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21vbWVudChmaWVsZGRhdGFbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YTIubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jZGVmKSA9PiBkb2NkZWYuaWQgPT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX2NvbHVtbl9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSB0ZW1wLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRlbXAuYWRkX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUxKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7bmV3ZGF0YS5pc19jb25zdW1hYmxlID09PSBmYWxzZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgbWItOCBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+S29uZmlndXJhc2kgUGFydCBNb2RlbDwvaDE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHttb2RlbHBhcnRmaWVsZGRhdGEubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17YHBhbmVsJHtpZHh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRvYy5tb2RlbF9jaGlsZC5sZW5ndGggPT09IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtci0yXCI+e2RvYy5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJyaWdodFwiIHRpdGxlPVwiTW9kZWwgdGlkYWsgbWVtaWxpa2kgcGFydCBtb2RlbCFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgPEV4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX0+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBNb2RlbCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBkYXJpIE1vZGVsIFBhcnQgJHtuZXdkYXRhLm5hbWV9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dGVtcCA9IG1vZGVscGFydGZpZWxkZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhID0gdGVtcC5hZGRfbW9kZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzIpID0+IGRvYzIuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC5hZGRfbW9kZWxzW2lkeGRhdGFdLnF1YW50aXR5ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5zcGxpY2UoaWR4ZGF0YSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3BhcnRzKSA9PiBkb2NwYXJ0cy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvYy5pZCkgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX21vZGVsX2lkcy5pbmRleE9mKGRvYy5pZCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZWRgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXNzZXQgVHlwZXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsYXNzZXR0eXBlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e2RvYy5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfY29sdW1ucy5tYXAoKGRvY21jLCBpZHhtYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGFyQXQoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgbXktYXV0byBweC0yIHB5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdC5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2ksIGlkeG9wc2kpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeG9wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLXdoaXRlIGJvcmRlciB3LTMvMTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gcHgtMiBweS0xIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhvcHNpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRlZmF1bHQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJnLWdyYXktMTAwIHJvdW5kZWQgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIHctZnVsbCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaW1lbGluZSBzdHlsZT17eyBtYXJnaW5Ub3A6IGAxcmVtYCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2VkaXRwYXJ0ID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG15LTMgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTUgdGV4dC1sZyBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50aWRtb2RlbH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtjdXJyZW50aWRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hpbmdwYXJ0ID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VhcmNoPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9L2dldE1vZGVscz9yb3dzPTEwJm5hbWU9JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldG1vZGVsZGF0YShbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ3BhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gYXRhdSBjYXJpIG5hbWEgbW9kdWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uUG9wdXBTY3JvbGw9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoZXZlbnQudGFyZ2V0LnNjcm9sbFRvcCArIGV2ZW50LnRhcmdldC5vZmZzZXRIZWlnaHQgPT09IGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNldHBhZ2UocHJldiA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHM/cGFnZT0ke3BhZ2V9JnJvd3M9MTBgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlczIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2Nyb2xsVG8oMCwgZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLnRvID49IHJlczIuZGF0YS50b3RhbCA/IHNldG1vZGVsZGF0YShbLi4ubW9kZWxkYXRhLCByZXMyLmRhdGEuZGF0YV0pIDogc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhLCA8U3BpbiBzaXplPVwic21hbGxcIiAvPl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9kZWxkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17ZG9jLmlkfSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQbHVzU3F1YXJlVHdvVG9uZSBzdHlsZT17eyBmb250U2l6ZTogYDEuNXJlbWAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdnZXRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke2N1cnJlbnRpZG1vZGVsfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9jb2x1bW5zXCJdID0gcmVzMi5kYXRhW3Byb3BdLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVscGFydHMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubW9kZWxfcGFydHMubWFwKChkb2MyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwMyA9IGRvYzIubW9kZWxfY29sdW1ucy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MzIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbWFwMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9wYXJ0c1wiXSA9IG1vZGVscGFydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wiaWRcIl0gPSByZXMyLmRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibmFtZVwiXSA9IHJlczIuZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wMSA9IFsuLi50ZW1wMSwgdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHZhbHVlKHJlczIuZGF0YS5tb2RlbF9wYXJ0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldGNvbmNhdHBhcnR0cmlnZ2VyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZGF0YTIgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MzKSA9PiBkb2MzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRpZG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhkYXRhMiA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRpZG1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaWR4ZGF0YTIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLm1hcCgoZG9jMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYzEuaWQgPT09IGN1cnJlbnRpZG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzEucXVhbnRpdHkgPSBkb2MxLnF1YW50aXR5ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bG9hZGluZ2dldG1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgKyBUYW1iYWggUGFydCBNb2RlbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGQyfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybTIuc3VibWl0fVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGVtb2RlbH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsY3JlYXRlbW9kZWx9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgbWItOFwiPlxuICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICBmb3JtPXtpbnN0YW5jZUZvcm0yfVxuICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQyKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgIGxhYmVsPVwiTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWFudWZhY3R1cmVyIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEyLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nc3BlYzIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpZHh9IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+IDogbnVsbH0gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+KHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiID8gXCJTaW5nbGUgVGV4dGJveFwiIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctZnVsbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy03IGZsZXgganVzdGlmeS1jZW50ZXIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0gPSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gZGVmYXVsdFZhbHVlPXtkb2NjfSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfSBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXIgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJwYXJhZ3JhcGhcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWEgcm93cz17NH0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNoZWNrYm94XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaSBkaWJhd2FoIGluaTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvY2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0ucHVzaChpZHh4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPiB7ZG9jY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZGF0ZVN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICB7bG9hZGluZ3NwZWMyID8gKFxuICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2ZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDNbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQzKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3h4LCBpZHh4KSA9PiBkb2N4eC5pZCAhPT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQyLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIzKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAge2ZpZWxkZGF0YWEyLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQyW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnQyfSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMl07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWEyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YWEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YWEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYTIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkMn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBUYW1iYWggU3Blc2lmaWthc2kgTW9kZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1hbnVmYWN0dXJlcjwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZG1hbnVmfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZE1hbnVmYWN0dXJlcn1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nbWFudWZ9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbG1hbnVmfVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxtYW51ZihmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXs5MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBNYW51ZmFjdHVyZXIgPHNwYW4gY2xhc3NOYW1lPVwibmFtYW1hbnVcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFtYW51Zi5uYW1lfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5hbWEgTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRtYW51Zih0cnVlKVxuICAgICAgICAgICAgICAgICAgOiBzZXRkaXNhYmxlZG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhbWFudWYoeyBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFtYW51OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcywgcGFyYW1zIH0pIHtcbiAgY29uc3QgbW9kZWxpZCA9IHBhcmFtcy5tb2RlbElkO1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXMgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGV0YWlsUHJvZmlsZWAsXG4gICAge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9XG4gICk7XG4gIGNvbnN0IHJlc2pzb24gPSBhd2FpdCByZXNvdXJjZXMuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb247XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCI4MlwiLFxuICAgICAgbW9kZWxpZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbHNVcGRhdGUyO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n              }, void 0, false, void 0, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1994,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(_Form, {\n                layout: \"vertical\",\n                initialValues: currentfield,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"name\",\n                    label: \"Nama Spesifikasi\",\n                    rules: [{\n                      required: true,\n                      message: \"Nama Spesifikasi wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Input, {\n                      required: true,\n                      name: \"name\",\n                      onChange: e => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          name: e.target.value\n                        }));\n\n                        if (e.target.value === \"\") {\n                          setdisabledtambah(true);\n                        } else if (e.target.value !== \"\" && currentfield.data_type !== \"\" && currentdropdown2.every((doca, idxa) => doca !== \"\")) {\n                          setdisabledtambah(false);\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2148,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2138,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"data_type\",\n                    label: \"Tipe Field\",\n                    rules: [{\n                      required: true,\n                      message: \"Tipe Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Select, {\n                      placeholder: \"Pilih Tipe Field\",\n                      onChange: value => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          data_type: value\n                        }));\n\n                        if (value === \"dropdown\" || value === \"checkbox\") {\n                          if (currentdropdown2.every((doca, idxa) => doca !== \"\")) {\n                            setdisabledtambah(false);\n                          } else {\n                            setdisabledtambah(true);\n                          }\n                        } else {\n                          setdisabledtambah(false);\n                        }\n\n                        if (value === \"dropdown\") {\n                          setcurrentcheckeddropdown2(\"\");\n                          setcurrentdropdown2([\"\", \"\"]);\n                          setcd2([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n\n                        if (value === \"checkbox\") {\n                          setcurrentcheckeddropdown2([]);\n                          setcurrentdropdown2([\"\", \"\"]);\n                          setcd2([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n                      },\n                      name: \"data_type\",\n                      children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"dropdown\",\n                        children: \"Dropdown\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2218,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"number\",\n                        children: \"Number\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2221,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"paragraph\",\n                        children: \"Paragraph Text\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2224,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"checkbox\",\n                        children: \"Checkbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2227,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"single\",\n                        children: \"Single Textbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2230,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"date\",\n                        children: \"Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2233,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2180,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2170,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2137,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"default\",\n                  label: \"Default\",\n                  children: [currentfield.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2240,\n                      columnNumber: 29\n                    }, this), currentdropdown2.map((doc, idxx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-7 flex items-center\",\n                        children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                          checked: currentcheckeddropdown2 === idxx ? true : false,\n                          onChange: e => {\n                            if (e.target.checked === true) {\n                              setcurrentcheckeddropdown2(idxx);\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2247,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2246,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-10/12 mr-5\",\n                        children: /*#__PURE__*/_jsxDEV(_Input, {\n                          style: {\n                            marginRight: `0.5rem`\n                          },\n                          defaultValue: doc,\n                          placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                          onChange: e => {\n                            setcurrentdropdown2(prev => {\n                              const temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n                            setcd2(prev => {\n                              const temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n\n                            if (e.target.value !== \"\" && currentdropdown2.every((doca, idxa) => doca !== \"\") && currentfield.name !== \"\") {\n                              setdisabledtambah(false);\n                            } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                              setdisabledtambah(true);\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2261,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2260,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-1/12 flex justify-around\",\n                        onClick: () => {\n                          setcurrentdropdown2([]);\n                          setcdtrigger(prev => !prev);\n                          setcdidx(idxx);\n                        },\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          type: \"danger\",\n                          children: \"-\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2301,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2293,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2245,\n                      columnNumber: 31\n                    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: () => {\n                          setcurrentdropdown2([...currentdropdown2, \"\"]);\n                          setcd2([...cd2, \"\"]);\n                          setdisabledtambah(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2306,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2305,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2239,\n                    columnNumber: 27\n                  }, this) : null, currentfield.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2323,\n                      columnNumber: 29\n                    }, this), currentdropdown2.map((doc, idxx) => {\n                      const idxchecked = currentcheckeddropdown2.includes(idxx);\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            defaultChecked: idxchecked,\n                            onChange: e => {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdown2(prev => {\n                                  var temp = prev;\n                                  temp.push(idxx);\n                                  return temp;\n                                });\n                              } else {\n                                setcurrentcheckeddropdown2(prev => {\n                                  var temp = prev;\n                                  const index = temp.indexOf(idxx);\n                                  temp.splice(index, 1);\n                                  return temp;\n                                });\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2333,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2332,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: `0.5rem`\n                            },\n                            defaultValue: doc,\n                            placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                            onChange: e => {\n                              setcurrentdropdown2(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdown2.every((doca, idxa) => doca !== \"\") && currentfield.name !== \"\") {\n                                setdisabledtambah(false);\n                              } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                                setdisabledtambah(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2354,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2353,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: () => {\n                            setcurrentdropdown2([]);\n                            setcdtrigger(prev => !prev);\n                            setcdidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2396,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2388,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2331,\n                        columnNumber: 33\n                      }, this);\n                    }), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: () => {\n                          setcurrentdropdown2([...currentdropdown2, \"\"]);\n                          setcd2([...cd2, \"\"]);\n                          setdisabledtambah(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2402,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2401,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2322,\n                    columnNumber: 27\n                  }, this) : null, currentfield.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                    style: {\n                      width: `30%`\n                    },\n                    defaultValue: fielddata[idx].default,\n                    placeholder: `Masukkan default ${currentfield.name}`,\n                    onChange: value => {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        default: `${value}`\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2418,\n                    columnNumber: 27\n                  }, this), currentfield.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                    rows: 4,\n                    placeholder: `Masukkan default ${currentfield.name}`,\n                    defaultValue: fielddata[idx].default,\n                    onChange: e => {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        default: e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2432,\n                    columnNumber: 27\n                  }, this), currentfield.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: `Masukkan default ${currentfield.name}`,\n                    defaultValue: fielddata[idx].default,\n                    onChange: e => {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        default: e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2445,\n                    columnNumber: 27\n                  }, this), currentfield.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: `Masukkan default ${currentfield.name}`,\n                    defaultValue: fielddata[idx].default,\n                    onChange: e => {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        default: e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2457,\n                    columnNumber: 27\n                  }, this), currentfield.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                    defaultValue: moment(fielddata[idx].default),\n                    style: {\n                      width: `30%`\n                    },\n                    placeholder: `Masukkan default ${currentfield.name}`,\n                    onChange: (value, dateString) => {\n                      setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                        default: dateString\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2469,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2237,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2482,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex mt-4 justify-end\",\n                  children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: `Apakah anda yakin ingin menghapus field ${doc.name === \"\" ? \"ini\" : doc.name}?`,\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: () => {\n                      setfielddata(prev => prev.filter((_, idxx) => idxx !== idx));\n                      setnewdata(prev => {\n                        var temp = prev;\n                        temp.model_columns = temp.model_columns.filter((_, idxx) => idxx !== fielddata2.length + idx);\n                        return temp;\n                      });\n\n                      if (defaultdata.model_columns.some(docdef => docdef.id === doc.id)) {\n                        setnewdata(prev => {\n                          var temp = prev;\n                          temp.delete_column_ids.push(doc.id);\n                          const idxtemp = defaultdata.model_columns.map(doctemp => doctemp.id).indexOf(doc.id);\n                          temp.model_columns.splice(idxtemp, 1);\n                          return temp;\n                        });\n                      } else {\n                        setnewdata(prev => {\n                          var temp = prev;\n                          const idxtemp = temp.add_columns.map(doctemp => doctemp.name).indexOf(doc.name);\n                          idxtemp !== -1 ? temp.add_columns.splice(idxtemp, 1) : null;\n                          return temp;\n                        });\n                      }\n\n                      setaddedfield1(prev => {\n                        prev.splice(idx, 1);\n                        return prev;\n                      });\n                      setdisabledaddfield(false);\n                      setpointevent(\"\");\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                      children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                        style: {\n                          fontSize: `1.25rem`\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2537,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2536,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2484,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \" flex items-center mr-4\",\n                    children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                      checked: currentfield.required,\n                      style: {\n                        marginRight: `0.5rem`\n                      },\n                      onChange: e => {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          required: e.target.checked\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2543,\n                      columnNumber: 27\n                    }, this), \" \", \"Required\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2542,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                    disabled: disabledtambah,\n                    type: \"primary\",\n                    onClick: () => {\n                      if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n                        setidxdropdowntrigger1(idx);\n                        setvaluedropdowntrigger1(prev => !prev);\n                      }\n\n                      setconcataddcolumnsidx1(idx);\n                      setconcataddcolumnsvalue1(doc);\n                      setconcataddcolumnstrigger1(prev => !prev);\n                      const temp = fielddata;\n                      temp[idx] = currentfield;\n                      setfielddata(temp);\n                      setaddedfieldidx1(idx);\n                      setaddedfieldtrigger1(prev => !prev);\n                      setconcatfieldtrigger(prev => !prev);\n                      setdisabledaddfield(false);\n                      setpointevent(\"\");\n                    },\n                    children: \"Tambah\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2555,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2483,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2136,\n                columnNumber: 21\n              }, this)\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2132,\n              columnNumber: 19\n            }, this)\n          }, void 0, false);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"dashed\",\n            disabled: disabledaddfield,\n            style: {\n              width: `80%`,\n              height: `4rem`\n            },\n            onClick: onClickAddField,\n            children: \"+ Tambah Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2589,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2588,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1350,\n        columnNumber: 9\n      }, this), newdata.is_consumable === false && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" mb-8 col-span-1 md:col-span-4 px-5 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Konfigurasi Part Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2602,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2601,\n          columnNumber: 13\n        }, this), modelpartfielddata.length === 0 ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(_Collapse, {\n            accordion: true,\n            children: modelpartfielddata.map((doc, idx) => {\n              return /*#__PURE__*/_jsxDEV(Panel, {\n                id: `panel${idx}`,\n                header: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  className: \"jsx-2733278964\",\n                  children: doc.name // ?\n                  // <>\n                  //     {\n                  //         doc.model_child.length === 0 ?\n                  //             <div className=\"flex items-center w-6/12\">\n                  //                 <span className=\"mr-2\">{doc.name}</span>\n                  //                 <Tooltip placement=\"right\" title=\"Model tidak memiliki part model!\">\n                  //                     <ExclamationCircleOutlined style={{ color: `brown` }}></ExclamationCircleOutlined>\n                  //                 </Tooltip>\n                  //             </div>\n                  //             :\n                  //             doc.name\n                  //     }\n                  // </>\n                  // :\n                  // \"-\"\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2613,\n                  columnNumber: 27\n                }, this),\n                extra: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2733278964\" + \" \" + \"absolute top-2 right-2\",\n                  children: /*#__PURE__*/_jsxDEV(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: `Apakah anda yakin ingin menghapus Model ${doc.name === \"\" ? \"ini\" : doc.name} dari Model Part ${newdata.name}?`,\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: () => {\n                      // console.log(doc)\n                      setnewdata(prev => {\n                        var temp = prev;\n                        var idxtemp = modelpartfielddata.map(doctemp => doctemp.id).indexOf(doc.id);\n\n                        if (defaultdata.model_parts.map(docparts => docparts.id).includes(doc.id) === false && idxtemp !== -1) {\n                          const idxdata = temp.add_models.map(doc2 => doc2.id).indexOf(doc.id);\n\n                          if (temp.add_models[idxdata].quantity > 1) {\n                            temp.add_models[idxdata].quantity -= 1;\n                          } else {\n                            temp.add_models.splice(idxdata, 1);\n                          }\n                        }\n\n                        if (defaultdata.model_parts.map(docparts => docparts.id).includes(doc.id) === true && idxtemp !== -1) {\n                          if (temp.delete_model_ids.indexOf(doc.id) === -1) {\n                            temp.delete_model_ids.push(doc.id);\n                          }\n                        }\n\n                        return temp;\n                      });\n                      setmodelpartfielddata(prev => prev.filter((_, idxx) => idxx !== idx));\n                    },\n                    children: /*#__PURE__*/_jsxDEV(CloseCircleOutlined, {\n                      style: {\n                        color: `red`\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2686,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2637,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2636,\n                  columnNumber: 27\n                }, this),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2733278964\" + \" \" + \"flex flex-col p-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-2733278964\" + \" \" + \"flex flex-col mb-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      className: \"jsx-2733278964\" + \" \" + \"font-semibold mb-1\",\n                      children: [\"Asset Type\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"jsx-2733278964\" + \" \" + \"judulassettype\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2695,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2693,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"rounded bg-gray-200 w-full flex items-center my-auto h-12 px-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-2733278964\" + \" \" + \"mb-0 text-sm\",\n                        children: doc.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2698,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2697,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2692,\n                    columnNumber: 27\n                  }, this), doc.model_columns.map((docmc, idxmc) => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2733278964\" + \" \" + \"flex flex-col mb-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        className: \"jsx-2733278964\" + \" \" + \"font-semibold mb-1\",\n                        children: [docmc.name, \" \", docmc.required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"jsx-2733278964\" + \" \" + \"judulsn\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2707,\n                          columnNumber: 37\n                        }, this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"jsx-2733278964\" + \" \" + \"text-gray-400\",\n                          children: docmc.data_type ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: [\"(\", docmc.data_type.charAt(0).toUpperCase() + docmc.data_type.slice(1), \")\"]\n                          }, void 0, true) : \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2709,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2704,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-2733278964\" + \" \" + \"w-full flex flex-col justify-center my-auto px-2 py-1\",\n                        children: docmc.data_type === \"dropdown\" || docmc.data_type === \"checkbox\" || docmc.data_type === \"paragraph\" || docmc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: [docmc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: docmc.default.opsi.map((docopsi, idxopsi) => /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"jsx-2733278964\" + \" \" + \"rounded bg-white border w-3/12 flex items-center my-auto px-2 py-1 mb-1\",\n                              children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                                disabled: true,\n                                checked: idxopsi === docmc.default.default,\n                                style: {\n                                  marginRight: `0.5rem`\n                                }\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2738,\n                                columnNumber: 49\n                              }, this), docopsi]\n                            }, idxopsi, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2734,\n                              columnNumber: 47\n                            }, this))\n                          }, void 0, false), docmc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: docmc.default.opsi.map((docopsi, idxopsi) => /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"jsx-2733278964\" + \" \" + \"rounded w-full flex items-center my-auto px-2 py-1 mb-1\",\n                              children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                                disabled: true,\n                                checked: idxopsi === docmc.default.default,\n                                style: {\n                                  marginRight: `0.5rem`\n                                }\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2762,\n                                columnNumber: 49\n                              }, this), docopsi]\n                            }, idxopsi, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2758,\n                              columnNumber: 47\n                            }, this))\n                          }, void 0, false), docmc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"jsx-2733278964\" + \" \" + \"flex w-full items-center justify-between bg-gray-100 rounded h-10 px-3\",\n                            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                              className: \"jsx-2733278964\" + \" \" + \"mb-0\",\n                              children: docmc.default\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2780,\n                              columnNumber: 43\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"jsx-2733278964\",\n                              children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2784,\n                                columnNumber: 45\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2783,\n                              columnNumber: 43\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2779,\n                            columnNumber: 41\n                          }, this), docmc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"jsx-2733278964\" + \" \" + \"flex h-20 rounded border bg-gray-100 w-full px-3\",\n                            children: docmc.default\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2789,\n                            columnNumber: 41\n                          }, this)]\n                        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-2733278964\" + \" \" + \"rounded border bg-gray-100 flex items-center w-full h-10 px-3\",\n                          children: docmc.default\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2795,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2724,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2703,\n                      columnNumber: 31\n                    }, this);\n                  }), doc.model_parts.length === 0 ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(_Timeline, {\n                      style: {\n                        marginTop: `1rem`\n                      },\n                      children: renderChildPartModel(doc.model_parts)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2805,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2691,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"2733278964\",\n                  children: \".judulassettype.jsx-2733278964::before{content:'*';color:red;}.judulsn.jsx-2733278964::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEydkYyQixBQUd5RSxBQUlBLFlBSEYsQUFJQSxVQUhkLEFBSUEiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuXG4gICAgICAgIHNldG1hbnVmZGF0YShkYXRhKTtcblxuICAgICAgICAvKiogU2V0IG5ldyBpbnNlcnRlZCBtYW51ZmFjdHVyZXIgYXMgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gdGhlIFwiTWFudWZhY3R1cmVyXCIgZHJvcGRvd24gKi9cbiAgICAgICAgaWYgKHRyaWdnZXJtYW51ZiA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgbGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIgPSBkYXRhW2RhdGEubGVuZ3RoIC0gMV07XG4gICAgICAgICAgY29uc3QgbmV3TWFudWZhY3R1cmVySWQgPSBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZDtcblxuICAgICAgICAgIC8qKiBGb3JtIGNvbnRyb2wgdmFsdWUgKi9cbiAgICAgICAgICBpbnN0YW5jZUZvcm0uc2V0RmllbGRzVmFsdWUoeyBtYW51ZmFjdHVyZXJfaWQ6IG5ld01hbnVmYWN0dXJlcklkIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEocHJldiA9PiAoey4uLnByZXYsIG1hbnVmYWN0dXJlcl9pZDogbmV3TWFudWZhY3R1cmVySWQgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSwgW3RyaWdnZXJtYW51Zl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke21vZGVsaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSByZXMyLmRhdGEubW9kZWxfY29sdW1ucy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgID8gZG9jLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vbW9kZWxfcGFydHNcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICAgICAgICB2YXIgdGVtcDExID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGVtcDEgPSB7fTtcbiAgICAgICAgICAgIHRlbXAxID0gaXRlbVtpXS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQgPT09IFwiXCIgfHwgZG9jLmRlZmF1bHQgPT09IFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGVtcDExLnB1c2goe1xuICAgICAgICAgICAgICAuLi5pdGVtW2ldLFxuICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wMSxcbiAgICAgICAgICAgICAgbW9kZWxfcGFydHM6XG4gICAgICAgICAgICAgICAgaXRlbVtpXS5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICA/IHJlY3Vyc2l2ZVBhcnRNb2RlbChpdGVtW2ldLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGVtcDExO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB5byA9IHJlY3Vyc2l2ZVBhcnRNb2RlbChyZXMyLmRhdGEubW9kZWxfcGFydHMpO1xuICAgICAgICBjb25zdCB0ZW1wMiA9IHtcbiAgICAgICAgICAuLi5yZXMyLmRhdGEsXG4gICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5hc3NldC5jb2RlLFxuICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAsXG4gICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHNldG5ld2RhdGEodGVtcDIpO1xuICAgICAgICBzZXRkZWZhdWx0ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRhc3NldCh0ZW1wKTtcbiAgICAgICAgc2V0ZGVmYXVsdG1vZGVsKHRlbXAyKTtcbiAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKHlvKTtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICBzZXRhc3NldHR5cGVjb2RlKHJlczIuZGF0YS5hc3NldF9pZCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKG1vZGVsdHJpZ2dlcik7XG4gICAgICAgIG1vZGVsdHJpZ2dlciAhPT0gZmFsc2UgPyBzZXRlZGl0cGFydCh0cnVlKSA6IG51bGw7XG4gICAgICB9KTtcbiAgfSwgW21vZGVsdHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBhc3NldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXJdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIHV0YW1hIHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjEgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyMV1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7XG4gICAgICAuLi5uZXdkYXRhLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhMi5jb25jYXQoZmllbGRkYXRhKSxcbiAgICB9KTtcbiAgfSwgW2NvbmNhdGZpZWxkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4ICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjaGFuZ2Vhc3NldC5zb21lKFxuICAgICAgICAgIChkb2Nzb21lKSA9PiBkb2Nzb21lLmlkID09PSBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWRcbiAgICAgICAgKSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICApIHtcbiAgICAgICAgLy8gaWYgKChmaWVsZGRhdGEyLmxlbmd0aCAtIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoKSA+PSBuZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkKSA9PiBkb2NhZGQubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goZmllbGRkYXRhMltmaWVsZGRhdGEyLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4MSAhPT0gLTEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29uY2F0YWRkY29sdW1uc2lkeDEgPiBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCAtIDEgfHxcbiAgICAgICAgdHlwZW9mIGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEuaWQgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgICAgY2hhbmdlYXNzZXQgPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbZmllbGRkYXRhLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbY29uY2F0YWRkY29sdW1uc2lkeDFdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4XSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgxICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDEoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDFdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDFdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4MV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MyAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQzKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgzXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgzXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjNdKTtcblxuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgYmFydSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjMgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAvLyB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWVkcm9wZG93bnRyaWdnZXJ9YFxuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjNdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHtcbiAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYS5jb25jYXQoZmllbGRkYXRhYTIpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MiAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQyKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgyXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgyXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YWEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciB0ZW1wID0gW107XG4gICAgaWYgKGNvbmNhdHBhcnR2YWx1ZSAhPT0gLTEpIHtcbiAgICAgIGlmIChjb25jYXRwYXJ0dmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9wYXJ0czogW10gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25jYXRwYXJ0dmFsdWUubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIHZhciBpZHh0ZW1wID0gdGVtcC5tYXAoKGRvYykgPT4gZG9jLmlkKS5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgaWYgKGlkeHRlbXAgIT09IC0xICYmIHRlbXBbaWR4dGVtcF1bXCJpZFwiXSA9PT0gZG9jLmlkKSB7XG4gICAgICAgICAgICB2YXIgaWR4b2YgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgIHRlbXBbaWR4b2ZdID0ge1xuICAgICAgICAgICAgICAuLi50ZW1wW2lkeG9mXSxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IHRlbXBbaWR4b2ZdLnF1YW50aXR5ICsgZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlkeHRlbXAgPT09IC0xKSB7XG4gICAgICAgICAgICB0ZW1wLnB1c2goe1xuICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICBxdWFudGl0eTogZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFkZF9tb2RlbHM6IHRlbXAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0cGFydHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RpZHggIT09IC0xKSB7XG4gICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDIuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZGlkeCk7XG4gICAgICB9KTtcbiAgICAgIHNldGNkMigocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkaWR4KSk7XG4gICAgfVxuICB9LCBbY2R0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNkcGFydGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDJwYXJ0LmZpbHRlcigoZG9jMTAsIGlkeDEwKSA9PiBpZHgxMCAhPT0gY2RwYXJ0aWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QycGFydCgocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkcGFydGlkeCkpO1xuICAgIH1cbiAgfSwgW2NkcGFydHRyaWdnZXJdKTtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0XG4gICAgICBzdD17c3R9XG4gICAgICB0b2s9e2luaXRQcm9wc31cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICAgIHBhdGhBcnI9e3BhdGhBcnJ9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTRcIlxuICAgICAgICBpZD1cImNyZWF0ZUFzc2V0c1dyYXBwZXJcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItOFwiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtMiBwdC00IGJvcmRlci10LTIgYm9yZGVyLWItMiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBweS0yXCI+XG4gICAgICAgICAgICAgICAgRm9ybSBVYmFoIE1vZGVsIC0ge25ld2RhdGEubmFtZX1cbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9e2AvYWRtaW4vbW9kZWxzL2RldGFpbC8ke21vZGVsaWR9YH0+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC8qb25DbGljaz17KCkgPT4geyBjb25zb2xlLmxvZyhuZXdkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhMik7IGNvbnNvbGUubG9nKGRlZmF1bHRkYXRhKTsgY29uc29sZS5sb2coZGVmYXVsdGFzc2V0KSB9fSovIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nY3JlYXRlfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtpbnN0YW5jZUZvcm0uc3VibWl0fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvU3RpY2t5PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkluZm9ybWFzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgICAgICA8U3Bpbj48L1NwaW4+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybX1cbiAgICAgICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsfVxuICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZXM9e25ld2RhdGF9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFzc2V0IFR5cGUgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93blN0eWxlPXt7IG1heEhlaWdodDogNDAwLCBvdmVyZmxvdzogXCJhdXRvXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLmFsbENoZWNrZWROb2Rlc1swXS5ub2RlLnByb3BzLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiIGxhYmVsPVwiTWFudWZhY3R1cmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IHB0LTIgbXktYXV0byBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxtYW51Zih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBkZXNjcmlwdGlvbjogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5yZXF1aXJlZF9zbn1cbiAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5pc19jb25zdW1hYmxlfVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBNb2RlbCBDb25zdW1hYmxlIGRlbmdhbiBzYXR1YW4ganVtbGFoXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlNwZXNpZmlrYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7bG9hZGluZ3NwZWMgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhMi5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfT48L0VtcHR5PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGZpZWxkZGF0YTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZFtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKGZpZWxkZGF0YTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGEyW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICE9PSBmaWVsZGRhdGEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeFVwZGF0ZUNvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4VXBkYXRlQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2ZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkMVtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMV07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0ID09PSBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0LmluZGV4T2YoaWRrKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21vbWVudChmaWVsZGRhdGFbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YTIubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jZGVmKSA9PiBkb2NkZWYuaWQgPT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX2NvbHVtbl9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSB0ZW1wLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRlbXAuYWRkX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUxKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7bmV3ZGF0YS5pc19jb25zdW1hYmxlID09PSBmYWxzZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgbWItOCBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+S29uZmlndXJhc2kgUGFydCBNb2RlbDwvaDE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHttb2RlbHBhcnRmaWVsZGRhdGEubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17YHBhbmVsJHtpZHh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRvYy5tb2RlbF9jaGlsZC5sZW5ndGggPT09IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtci0yXCI+e2RvYy5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJyaWdodFwiIHRpdGxlPVwiTW9kZWwgdGlkYWsgbWVtaWxpa2kgcGFydCBtb2RlbCFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgPEV4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX0+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBNb2RlbCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBkYXJpIE1vZGVsIFBhcnQgJHtuZXdkYXRhLm5hbWV9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dGVtcCA9IG1vZGVscGFydGZpZWxkZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhID0gdGVtcC5hZGRfbW9kZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzIpID0+IGRvYzIuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC5hZGRfbW9kZWxzW2lkeGRhdGFdLnF1YW50aXR5ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5zcGxpY2UoaWR4ZGF0YSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3BhcnRzKSA9PiBkb2NwYXJ0cy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvYy5pZCkgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX21vZGVsX2lkcy5pbmRleE9mKGRvYy5pZCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZWRgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXNzZXQgVHlwZXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsYXNzZXR0eXBlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e2RvYy5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfY29sdW1ucy5tYXAoKGRvY21jLCBpZHhtYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGFyQXQoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgbXktYXV0byBweC0yIHB5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdC5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2ksIGlkeG9wc2kpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeG9wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLXdoaXRlIGJvcmRlciB3LTMvMTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gcHgtMiBweS0xIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhvcHNpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRlZmF1bHQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJnLWdyYXktMTAwIHJvdW5kZWQgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIHctZnVsbCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaW1lbGluZSBzdHlsZT17eyBtYXJnaW5Ub3A6IGAxcmVtYCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2VkaXRwYXJ0ID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG15LTMgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTUgdGV4dC1sZyBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50aWRtb2RlbH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtjdXJyZW50aWRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hpbmdwYXJ0ID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VhcmNoPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9L2dldE1vZGVscz9yb3dzPTEwJm5hbWU9JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldG1vZGVsZGF0YShbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ3BhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gYXRhdSBjYXJpIG5hbWEgbW9kdWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uUG9wdXBTY3JvbGw9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoZXZlbnQudGFyZ2V0LnNjcm9sbFRvcCArIGV2ZW50LnRhcmdldC5vZmZzZXRIZWlnaHQgPT09IGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNldHBhZ2UocHJldiA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHM/cGFnZT0ke3BhZ2V9JnJvd3M9MTBgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlczIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2Nyb2xsVG8oMCwgZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLnRvID49IHJlczIuZGF0YS50b3RhbCA/IHNldG1vZGVsZGF0YShbLi4ubW9kZWxkYXRhLCByZXMyLmRhdGEuZGF0YV0pIDogc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhLCA8U3BpbiBzaXplPVwic21hbGxcIiAvPl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9kZWxkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17ZG9jLmlkfSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQbHVzU3F1YXJlVHdvVG9uZSBzdHlsZT17eyBmb250U2l6ZTogYDEuNXJlbWAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdnZXRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke2N1cnJlbnRpZG1vZGVsfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9jb2x1bW5zXCJdID0gcmVzMi5kYXRhW3Byb3BdLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVscGFydHMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubW9kZWxfcGFydHMubWFwKChkb2MyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwMyA9IGRvYzIubW9kZWxfY29sdW1ucy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MzIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbWFwMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9wYXJ0c1wiXSA9IG1vZGVscGFydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wiaWRcIl0gPSByZXMyLmRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibmFtZVwiXSA9IHJlczIuZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wMSA9IFsuLi50ZW1wMSwgdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHZhbHVlKHJlczIuZGF0YS5tb2RlbF9wYXJ0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldGNvbmNhdHBhcnR0cmlnZ2VyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZGF0YTIgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MzKSA9PiBkb2MzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRpZG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhkYXRhMiA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRpZG1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaWR4ZGF0YTIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLm1hcCgoZG9jMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYzEuaWQgPT09IGN1cnJlbnRpZG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzEucXVhbnRpdHkgPSBkb2MxLnF1YW50aXR5ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bG9hZGluZ2dldG1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgKyBUYW1iYWggUGFydCBNb2RlbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGQyfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybTIuc3VibWl0fVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGVtb2RlbH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsY3JlYXRlbW9kZWx9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgbWItOFwiPlxuICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICBmb3JtPXtpbnN0YW5jZUZvcm0yfVxuICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQyKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgIGxhYmVsPVwiTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWFudWZhY3R1cmVyIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEyLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nc3BlYzIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpZHh9IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+IDogbnVsbH0gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+KHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiID8gXCJTaW5nbGUgVGV4dGJveFwiIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctZnVsbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy03IGZsZXgganVzdGlmeS1jZW50ZXIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0gPSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gZGVmYXVsdFZhbHVlPXtkb2NjfSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfSBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXIgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJwYXJhZ3JhcGhcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWEgcm93cz17NH0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNoZWNrYm94XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaSBkaWJhd2FoIGluaTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvY2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0ucHVzaChpZHh4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPiB7ZG9jY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZGF0ZVN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICB7bG9hZGluZ3NwZWMyID8gKFxuICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2ZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDNbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQzKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3h4LCBpZHh4KSA9PiBkb2N4eC5pZCAhPT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQyLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIzKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAge2ZpZWxkZGF0YWEyLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQyW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnQyfSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMl07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWEyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YWEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YWEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYTIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkMn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBUYW1iYWggU3Blc2lmaWthc2kgTW9kZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1hbnVmYWN0dXJlcjwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZG1hbnVmfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZE1hbnVmYWN0dXJlcn1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nbWFudWZ9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbG1hbnVmfVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxtYW51ZihmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXs5MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBNYW51ZmFjdHVyZXIgPHNwYW4gY2xhc3NOYW1lPVwibmFtYW1hbnVcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFtYW51Zi5uYW1lfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5hbWEgTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRtYW51Zih0cnVlKVxuICAgICAgICAgICAgICAgICAgOiBzZXRkaXNhYmxlZG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhbWFudWYoeyBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFtYW51OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcywgcGFyYW1zIH0pIHtcbiAgY29uc3QgbW9kZWxpZCA9IHBhcmFtcy5tb2RlbElkO1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXMgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGV0YWlsUHJvZmlsZWAsXG4gICAge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9XG4gICk7XG4gIGNvbnN0IHJlc2pzb24gPSBhd2FpdCByZXNvdXJjZXMuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb247XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCI4MlwiLFxuICAgICAgbW9kZWxpZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbHNVcGRhdGUyO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n                }, void 0, false, void 0, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2609,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2606,\n            columnNumber: 17\n          }, this)\n        }, void 0, false), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: editpart ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shadow-md border p-8 mx-3 md:mx-8 my-3 flex flex-col rounded-md relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-2 right-5 text-lg cursor-pointer\",\n              onClick: () => {\n                seteditpart(false);\n              },\n              children: \"x\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2832,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(_Form, {\n              layout: \"vertical\",\n              initialValues: currentidmodel,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \" w-11/12 mr-3\",\n                  children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"id\",\n                    label: \"Nama Model\",\n                    rules: [{\n                      required: true,\n                      message: \"Nama Model wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Select, {\n                      defaultValue: currentidmodel,\n                      notFoundContent: fetchingpart ? /*#__PURE__*/_jsxDEV(_Spin, {\n                        size: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2856,\n                        columnNumber: 46\n                      }, this) : null,\n                      onSearch: value => {\n                        setfetchingpart(true);\n                        fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?rows=10&name=${value !== \"\" ? value : \"\"}`, {\n                          method: `GET`,\n                          headers: {\n                            Authorization: JSON.parse(initProps)\n                          }\n                        }).then(res => res.json()).then(res2 => {\n                          res2.data.length === 0 ? setmodeldata([]) : setmodeldata(res2.data.data);\n                          setfetchingpart(false);\n                        });\n                      },\n                      showSearch: true,\n                      optionFilterProp: \"children\",\n                      placeholder: \"Masukkan atau cari nama modul\",\n                      onChange: value => {\n                        setcurrentidmodel(value);\n                      },\n                      name: \"id\",\n                      filterOption: (input, opt) => opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0 // onPopupScroll={(event) => {\n                      //     if (event.target.scrollTop + event.target.offsetHeight === event.target.scrollHeight) {\n                      //         setpage(prev => prev + 1)\n                      //         fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?page=${page}&rows=10`, {\n                      //             method: `GET`,\n                      //             headers: {\n                      //                 'Authorization': JSON.parse(initProps),\n                      //             },\n                      //         })\n                      //             .then(res => res.json())\n                      //             .then(res2 => {\n                      //                 event.target.scrollTo(0, event.target.scrollHeight)\n                      //                 res2.data.to >= res2.data.total ? setmodeldata([...modeldata, res2.data.data]) : setmodeldata([...modeldata, res2.data.data, <Spin size=\"small\" />])\n                      //             })\n                      //     }\n                      // }}\n                      ,\n                      children: modeldata.map((doc, idx) => {\n                        return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: doc.id,\n                          children: doc.name\n                        }, doc.id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2912,\n                          columnNumber: 33\n                        }, this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2853,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2843,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2842,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-1/12 flex pt-2 my-auto items-center cursor-pointer\",\n                  onClick: () => {\n                    setmodalcreatemodel(true);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(PlusSquareTwoTone, {\n                    style: {\n                      fontSize: `1.5rem`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2926,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2920,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2841,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2929,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex mt-4 justify-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                  onClick: () => {\n                    seteditpart(false);\n                    setcurrentidmodel(\"\");\n                  },\n                  children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                    style: {\n                      fontSize: `1.25rem`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2938,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2931,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                  loading: loadinggetmodel,\n                  type: \"primary\",\n                  onClick: () => {\n                    seteditpart(false);\n                    setloadinggetmodel(true);\n                    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModel?id=${currentidmodel}`, {\n                      method: `GET`,\n                      headers: {\n                        Authorization: JSON.parse(initProps)\n                      }\n                    }).then(res => res.json()).then(res2 => {\n                      setmodelpartfielddata(prev => {\n                        var temp1 = prev;\n                        var t = {};\n\n                        for (var prop in res2.data) {\n                          if (prop === \"model_columns\") {\n                            t[\"model_columns\"] = res2.data[prop].map((doc, idx) => {\n                              if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                                return _objectSpread(_objectSpread({}, doc), {}, {\n                                  default: JSON.parse(doc.default)\n                                });\n                              } else {\n                                return _objectSpread({}, doc);\n                              }\n                            });\n                          } else {\n                            const modelparts = res2.data.model_parts.map(doc2 => {\n                              const map3 = doc2.model_columns.map(doc3 => {\n                                if (doc3.data_type === \"dropdown\" || doc3.data_type === \"checkbox\") {\n                                  return _objectSpread(_objectSpread({}, doc3), {}, {\n                                    default: JSON.parse(doc3.default)\n                                  });\n                                } else {\n                                  return _objectSpread({}, doc3);\n                                }\n                              });\n                              return _objectSpread(_objectSpread({}, doc2), {}, {\n                                model_columns: map3\n                              });\n                            });\n                            t[\"model_parts\"] = modelparts;\n                            t[\"id\"] = res2.data.id;\n                            t[\"name\"] = res2.data.name;\n                          }\n                        }\n\n                        temp1 = [...temp1, t];\n                        return temp1;\n                      }); // setconcatpartvalue(res2.data.model_parts)\n                      // setconcatparttrigger(prev => !prev)\n\n                      setnewdata(prev => {\n                        var temp = prev;\n                        const idxdata2 = temp.add_models.map(doc3 => doc3.id).indexOf(currentidmodel);\n\n                        if (temp.add_models.length === 0 || idxdata2 === -1) {\n                          temp.add_models.push({\n                            id: currentidmodel,\n                            quantity: 1\n                          });\n                        } else if (idxdata2 !== -1) {\n                          temp.add_models.map(doc1 => {\n                            if (doc1.id === currentidmodel) {\n                              doc1.quantity = doc1.quantity + 1;\n                            }\n                          });\n                        }\n\n                        return temp;\n                      });\n                      setloadinggetmodel(false);\n                      setcurrentidmodel(\"\");\n                    });\n                  },\n                  children: \"Tambah\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2942,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2930,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2840,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2831,\n            columnNumber: 17\n          }, this) : null\n        }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"dashed\",\n            style: {\n              width: `80%`,\n              height: `4rem`\n            },\n            onClick: () => {\n              seteditpart(true);\n            },\n            children: \"+ Tambah Part Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3049,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3048,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2600,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Form Tambah Model\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3065,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(_Button, {\n            type: \"default\",\n            onClick: () => {\n              setmodalcreatemodel(false);\n            },\n            style: {\n              marginRight: `1rem`\n            },\n            children: \"Batal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3067,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"primary\",\n            disabled: disabledaddfield2,\n            onClick: instanceForm2.submit,\n            loading: loadingcreatemodel,\n            children: \"Simpan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3076,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3066,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3064,\n        columnNumber: 11\n      }, this),\n      visible: modalcreatemodel,\n      footer: null,\n      onCancel: () => {\n        setmodalcreatemodel(false);\n      },\n      width: 900,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shadow-md border p-8 flex flex-col rounded-md mb-8\",\n        children: /*#__PURE__*/_jsxDEV(_Form, {\n          form: instanceForm2,\n          layout: \"vertical\",\n          onFinish: handleCreateModelinModel,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"asset_id\",\n              label: \"Asset Type\",\n              rules: [{\n                required: true,\n                message: \"Asset Type wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                style: {\n                  marginRight: `1rem`\n                },\n                dropdownStyle: {\n                  maxHeight: 400,\n                  overflow: \"auto\"\n                },\n                treeData: assetdata,\n                placeholder: \"Pilih Asset Type\",\n                treeDefaultExpandAll: true,\n                onChange: (value, label, extra) => {\n                  if (typeof value !== \"undefined\") {\n                    onClickSelectAsset2(extra.allCheckedNodes[0].node.props.id);\n                  } else {\n                    onClickSelectAsset2(0);\n                  }\n                },\n                allowClear: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3111,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"name\",\n              label: \"Nama Model\",\n              rules: [{\n                required: true,\n                message: \"Nama Model wajib diisi\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                name: \"name\",\n                onChange: e => {\n                  setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                    name: e.target.value\n                  }));\n                },\n                allowClear: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3139,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3129,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"manufacturer_id\",\n            label: \"Manufacturer\",\n            rules: [{\n              required: true,\n              message: \"Manufacturer wajib diisi\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(_Select, {\n              placeholder: \"Pilih Manufacturer\",\n              onChange: value => {\n                setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                  manufacturer_id: value\n                }));\n              },\n              name: \"manufacturer_id\",\n              children: manufdata.map((doc, idx) => {\n                return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3167,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3158,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3148,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            name: \"description\",\n            label: \"Deskripsi\",\n            children: /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n              rows: 4,\n              name: \"description\",\n              onChange: e => {\n                setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                  description: e.target.value\n                }));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3175,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n              style: {\n                marginRight: `0.5rem`\n              },\n              onChange: e => {\n                setnewdata2(_objectSpread(_objectSpread({}, newdata2), {}, {\n                  required_sn: e.target.checked\n                }));\n              },\n              checked: newdata2.required_sn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3184,\n              columnNumber: 15\n            }, this), \" \", \"Serial Number wajib ada\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3095,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3094,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3197,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3196,\n          columnNumber: 11\n        }, this), loadingspec2 ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3332,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: fielddataa.map((doc, idx) => {\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: addedfield3[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  const temp = [...addedfield3];\n                  temp[idx] = false;\n\n                  for (var i = 0; i < temp.length; i++) {\n                    if (i !== idx) {\n                      temp[i] = true;\n                    }\n                  }\n\n                  setaddedfield3(temp);\n                  setcurrentfield2(fielddataa[idx]);\n\n                  if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                    setcurrentdropdownn2(doc.default.opsi);\n                    setcd2part(doc.default.opsi);\n                    setcurrentcheckeddropdownn2(doc.default.default);\n                  }\n\n                  if (fielddataa[idx].data_type !== \"dropdown\" || fielddataa[idx].data_type !== \"checkbox\") {\n                    if (fielddataa[idx].name !== \"\" && fielddataa[idx].data_type !== \"\") {\n                      setdisabledtambah2(false);\n                    } else {\n                      setdisabledtambah2(true);\n                    }\n                  } else {\n                    if (doc.default.opsi.some(docopsi => docopsi === \"\")) {\n                      setdisabledtambah2(true);\n                    } else {\n                      setdisabledtambah2(false);\n                    }\n                  }\n\n                  setdisabledaddfield2(true);\n                  setpointevent2(\"pointer-events-none\");\n                },\n                className: \"jsx-2751146913\" + \" \" + `${pointevent2} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2751146913\" + \" \" + \"font-semibold mb-2\",\n                  children: [doc.name, fielddataa[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2751146913\" + \" \" + \"judulField\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3388,\n                    columnNumber: 29\n                  }, this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"jsx-2751146913\" + \" \" + \"text-gray-400 text-sm\",\n                    children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && ` Text`, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3390,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3385,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jsx-2751146913\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                  children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex flex-col w-full\",\n                      children: doc.default.opsi.map((dok, idk) => {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-2751146913\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3413,\n                            columnNumber: 41\n                          }, this)\n                        }, idk, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3409,\n                          columnNumber: 39\n                        }, this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3406,\n                      columnNumber: 33\n                    }, this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex flex-col w-full\",\n                      children: doc.default.opsi.map((dok, idk) => {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"jsx-2751146913\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                          children: /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                            children: dok\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3427,\n                            columnNumber: 41\n                          }, this)\n                        }, idk, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3423,\n                          columnNumber: 39\n                        }, this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3420,\n                      columnNumber: 33\n                    }, this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex justify-between w-full px-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                        children: doc.default\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3435,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-2751146913\",\n                        children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3437,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3436,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3434,\n                      columnNumber: 33\n                    }, this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-2751146913\" + \" \" + \"flex h-20\",\n                      children: doc.default\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3442,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"jsx-2751146913\" + \" \" + \"mb-0\",\n                    children: doc.default\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3446,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3399,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                  id: \"2751146913\",\n                  children: \".judulField.jsx-2751146913::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5M0cyQixBQUdpRSxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuXG4gICAgICAgIHNldG1hbnVmZGF0YShkYXRhKTtcblxuICAgICAgICAvKiogU2V0IG5ldyBpbnNlcnRlZCBtYW51ZmFjdHVyZXIgYXMgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gdGhlIFwiTWFudWZhY3R1cmVyXCIgZHJvcGRvd24gKi9cbiAgICAgICAgaWYgKHRyaWdnZXJtYW51ZiA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgbGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIgPSBkYXRhW2RhdGEubGVuZ3RoIC0gMV07XG4gICAgICAgICAgY29uc3QgbmV3TWFudWZhY3R1cmVySWQgPSBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZDtcblxuICAgICAgICAgIC8qKiBGb3JtIGNvbnRyb2wgdmFsdWUgKi9cbiAgICAgICAgICBpbnN0YW5jZUZvcm0uc2V0RmllbGRzVmFsdWUoeyBtYW51ZmFjdHVyZXJfaWQ6IG5ld01hbnVmYWN0dXJlcklkIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEocHJldiA9PiAoey4uLnByZXYsIG1hbnVmYWN0dXJlcl9pZDogbmV3TWFudWZhY3R1cmVySWQgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSwgW3RyaWdnZXJtYW51Zl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke21vZGVsaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSByZXMyLmRhdGEubW9kZWxfY29sdW1ucy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgID8gZG9jLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vbW9kZWxfcGFydHNcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICAgICAgICB2YXIgdGVtcDExID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGVtcDEgPSB7fTtcbiAgICAgICAgICAgIHRlbXAxID0gaXRlbVtpXS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQgPT09IFwiXCIgfHwgZG9jLmRlZmF1bHQgPT09IFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGVtcDExLnB1c2goe1xuICAgICAgICAgICAgICAuLi5pdGVtW2ldLFxuICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wMSxcbiAgICAgICAgICAgICAgbW9kZWxfcGFydHM6XG4gICAgICAgICAgICAgICAgaXRlbVtpXS5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICA/IHJlY3Vyc2l2ZVBhcnRNb2RlbChpdGVtW2ldLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGVtcDExO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB5byA9IHJlY3Vyc2l2ZVBhcnRNb2RlbChyZXMyLmRhdGEubW9kZWxfcGFydHMpO1xuICAgICAgICBjb25zdCB0ZW1wMiA9IHtcbiAgICAgICAgICAuLi5yZXMyLmRhdGEsXG4gICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5hc3NldC5jb2RlLFxuICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAsXG4gICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHNldG5ld2RhdGEodGVtcDIpO1xuICAgICAgICBzZXRkZWZhdWx0ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRhc3NldCh0ZW1wKTtcbiAgICAgICAgc2V0ZGVmYXVsdG1vZGVsKHRlbXAyKTtcbiAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKHlvKTtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICBzZXRhc3NldHR5cGVjb2RlKHJlczIuZGF0YS5hc3NldF9pZCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKG1vZGVsdHJpZ2dlcik7XG4gICAgICAgIG1vZGVsdHJpZ2dlciAhPT0gZmFsc2UgPyBzZXRlZGl0cGFydCh0cnVlKSA6IG51bGw7XG4gICAgICB9KTtcbiAgfSwgW21vZGVsdHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBhc3NldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXJdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIHV0YW1hIHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjEgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyMV1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7XG4gICAgICAuLi5uZXdkYXRhLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhMi5jb25jYXQoZmllbGRkYXRhKSxcbiAgICB9KTtcbiAgfSwgW2NvbmNhdGZpZWxkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4ICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjaGFuZ2Vhc3NldC5zb21lKFxuICAgICAgICAgIChkb2Nzb21lKSA9PiBkb2Nzb21lLmlkID09PSBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWRcbiAgICAgICAgKSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICApIHtcbiAgICAgICAgLy8gaWYgKChmaWVsZGRhdGEyLmxlbmd0aCAtIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoKSA+PSBuZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkKSA9PiBkb2NhZGQubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goZmllbGRkYXRhMltmaWVsZGRhdGEyLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4MSAhPT0gLTEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29uY2F0YWRkY29sdW1uc2lkeDEgPiBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCAtIDEgfHxcbiAgICAgICAgdHlwZW9mIGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEuaWQgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgICAgY2hhbmdlYXNzZXQgPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbZmllbGRkYXRhLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbY29uY2F0YWRkY29sdW1uc2lkeDFdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4XSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgxICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDEoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDFdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDFdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4MV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MyAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQzKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgzXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgzXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjNdKTtcblxuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgYmFydSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjMgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAvLyB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWVkcm9wZG93bnRyaWdnZXJ9YFxuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjNdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHtcbiAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYS5jb25jYXQoZmllbGRkYXRhYTIpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MiAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQyKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgyXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgyXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YWEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciB0ZW1wID0gW107XG4gICAgaWYgKGNvbmNhdHBhcnR2YWx1ZSAhPT0gLTEpIHtcbiAgICAgIGlmIChjb25jYXRwYXJ0dmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9wYXJ0czogW10gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25jYXRwYXJ0dmFsdWUubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIHZhciBpZHh0ZW1wID0gdGVtcC5tYXAoKGRvYykgPT4gZG9jLmlkKS5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgaWYgKGlkeHRlbXAgIT09IC0xICYmIHRlbXBbaWR4dGVtcF1bXCJpZFwiXSA9PT0gZG9jLmlkKSB7XG4gICAgICAgICAgICB2YXIgaWR4b2YgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgIHRlbXBbaWR4b2ZdID0ge1xuICAgICAgICAgICAgICAuLi50ZW1wW2lkeG9mXSxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IHRlbXBbaWR4b2ZdLnF1YW50aXR5ICsgZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlkeHRlbXAgPT09IC0xKSB7XG4gICAgICAgICAgICB0ZW1wLnB1c2goe1xuICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICBxdWFudGl0eTogZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFkZF9tb2RlbHM6IHRlbXAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0cGFydHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RpZHggIT09IC0xKSB7XG4gICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDIuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZGlkeCk7XG4gICAgICB9KTtcbiAgICAgIHNldGNkMigocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkaWR4KSk7XG4gICAgfVxuICB9LCBbY2R0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNkcGFydGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDJwYXJ0LmZpbHRlcigoZG9jMTAsIGlkeDEwKSA9PiBpZHgxMCAhPT0gY2RwYXJ0aWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QycGFydCgocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkcGFydGlkeCkpO1xuICAgIH1cbiAgfSwgW2NkcGFydHRyaWdnZXJdKTtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0XG4gICAgICBzdD17c3R9XG4gICAgICB0b2s9e2luaXRQcm9wc31cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICAgIHBhdGhBcnI9e3BhdGhBcnJ9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTRcIlxuICAgICAgICBpZD1cImNyZWF0ZUFzc2V0c1dyYXBwZXJcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItOFwiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtMiBwdC00IGJvcmRlci10LTIgYm9yZGVyLWItMiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBweS0yXCI+XG4gICAgICAgICAgICAgICAgRm9ybSBVYmFoIE1vZGVsIC0ge25ld2RhdGEubmFtZX1cbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9e2AvYWRtaW4vbW9kZWxzL2RldGFpbC8ke21vZGVsaWR9YH0+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC8qb25DbGljaz17KCkgPT4geyBjb25zb2xlLmxvZyhuZXdkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhMik7IGNvbnNvbGUubG9nKGRlZmF1bHRkYXRhKTsgY29uc29sZS5sb2coZGVmYXVsdGFzc2V0KSB9fSovIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nY3JlYXRlfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtpbnN0YW5jZUZvcm0uc3VibWl0fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvU3RpY2t5PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkluZm9ybWFzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgICAgICA8U3Bpbj48L1NwaW4+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybX1cbiAgICAgICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsfVxuICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZXM9e25ld2RhdGF9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFzc2V0IFR5cGUgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93blN0eWxlPXt7IG1heEhlaWdodDogNDAwLCBvdmVyZmxvdzogXCJhdXRvXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLmFsbENoZWNrZWROb2Rlc1swXS5ub2RlLnByb3BzLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiIGxhYmVsPVwiTWFudWZhY3R1cmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IHB0LTIgbXktYXV0byBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxtYW51Zih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBkZXNjcmlwdGlvbjogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5yZXF1aXJlZF9zbn1cbiAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5pc19jb25zdW1hYmxlfVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBNb2RlbCBDb25zdW1hYmxlIGRlbmdhbiBzYXR1YW4ganVtbGFoXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlNwZXNpZmlrYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7bG9hZGluZ3NwZWMgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhMi5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfT48L0VtcHR5PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGZpZWxkZGF0YTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZFtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKGZpZWxkZGF0YTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGEyW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICE9PSBmaWVsZGRhdGEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeFVwZGF0ZUNvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4VXBkYXRlQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2ZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkMVtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMV07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0ID09PSBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0LmluZGV4T2YoaWRrKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21vbWVudChmaWVsZGRhdGFbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YTIubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jZGVmKSA9PiBkb2NkZWYuaWQgPT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX2NvbHVtbl9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSB0ZW1wLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRlbXAuYWRkX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUxKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7bmV3ZGF0YS5pc19jb25zdW1hYmxlID09PSBmYWxzZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgbWItOCBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+S29uZmlndXJhc2kgUGFydCBNb2RlbDwvaDE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHttb2RlbHBhcnRmaWVsZGRhdGEubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17YHBhbmVsJHtpZHh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRvYy5tb2RlbF9jaGlsZC5sZW5ndGggPT09IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtci0yXCI+e2RvYy5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJyaWdodFwiIHRpdGxlPVwiTW9kZWwgdGlkYWsgbWVtaWxpa2kgcGFydCBtb2RlbCFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgPEV4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX0+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBNb2RlbCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBkYXJpIE1vZGVsIFBhcnQgJHtuZXdkYXRhLm5hbWV9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dGVtcCA9IG1vZGVscGFydGZpZWxkZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhID0gdGVtcC5hZGRfbW9kZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzIpID0+IGRvYzIuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC5hZGRfbW9kZWxzW2lkeGRhdGFdLnF1YW50aXR5ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5zcGxpY2UoaWR4ZGF0YSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3BhcnRzKSA9PiBkb2NwYXJ0cy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvYy5pZCkgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX21vZGVsX2lkcy5pbmRleE9mKGRvYy5pZCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZWRgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXNzZXQgVHlwZXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsYXNzZXR0eXBlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e2RvYy5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfY29sdW1ucy5tYXAoKGRvY21jLCBpZHhtYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGFyQXQoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgbXktYXV0byBweC0yIHB5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdC5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2ksIGlkeG9wc2kpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeG9wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLXdoaXRlIGJvcmRlciB3LTMvMTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gcHgtMiBweS0xIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhvcHNpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRlZmF1bHQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJnLWdyYXktMTAwIHJvdW5kZWQgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIHctZnVsbCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaW1lbGluZSBzdHlsZT17eyBtYXJnaW5Ub3A6IGAxcmVtYCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2VkaXRwYXJ0ID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG15LTMgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTUgdGV4dC1sZyBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50aWRtb2RlbH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtjdXJyZW50aWRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hpbmdwYXJ0ID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VhcmNoPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9L2dldE1vZGVscz9yb3dzPTEwJm5hbWU9JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldG1vZGVsZGF0YShbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ3BhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gYXRhdSBjYXJpIG5hbWEgbW9kdWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uUG9wdXBTY3JvbGw9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoZXZlbnQudGFyZ2V0LnNjcm9sbFRvcCArIGV2ZW50LnRhcmdldC5vZmZzZXRIZWlnaHQgPT09IGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNldHBhZ2UocHJldiA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHM/cGFnZT0ke3BhZ2V9JnJvd3M9MTBgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlczIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2Nyb2xsVG8oMCwgZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLnRvID49IHJlczIuZGF0YS50b3RhbCA/IHNldG1vZGVsZGF0YShbLi4ubW9kZWxkYXRhLCByZXMyLmRhdGEuZGF0YV0pIDogc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhLCA8U3BpbiBzaXplPVwic21hbGxcIiAvPl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9kZWxkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17ZG9jLmlkfSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQbHVzU3F1YXJlVHdvVG9uZSBzdHlsZT17eyBmb250U2l6ZTogYDEuNXJlbWAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdnZXRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke2N1cnJlbnRpZG1vZGVsfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9jb2x1bW5zXCJdID0gcmVzMi5kYXRhW3Byb3BdLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVscGFydHMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubW9kZWxfcGFydHMubWFwKChkb2MyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwMyA9IGRvYzIubW9kZWxfY29sdW1ucy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MzIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbWFwMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9wYXJ0c1wiXSA9IG1vZGVscGFydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wiaWRcIl0gPSByZXMyLmRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibmFtZVwiXSA9IHJlczIuZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wMSA9IFsuLi50ZW1wMSwgdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHZhbHVlKHJlczIuZGF0YS5tb2RlbF9wYXJ0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldGNvbmNhdHBhcnR0cmlnZ2VyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZGF0YTIgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MzKSA9PiBkb2MzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRpZG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhkYXRhMiA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRpZG1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaWR4ZGF0YTIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLm1hcCgoZG9jMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYzEuaWQgPT09IGN1cnJlbnRpZG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzEucXVhbnRpdHkgPSBkb2MxLnF1YW50aXR5ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bG9hZGluZ2dldG1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgKyBUYW1iYWggUGFydCBNb2RlbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGQyfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybTIuc3VibWl0fVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGVtb2RlbH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsY3JlYXRlbW9kZWx9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgbWItOFwiPlxuICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICBmb3JtPXtpbnN0YW5jZUZvcm0yfVxuICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQyKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgIGxhYmVsPVwiTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWFudWZhY3R1cmVyIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEyLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nc3BlYzIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpZHh9IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+IDogbnVsbH0gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+KHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiID8gXCJTaW5nbGUgVGV4dGJveFwiIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctZnVsbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy03IGZsZXgganVzdGlmeS1jZW50ZXIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0gPSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gZGVmYXVsdFZhbHVlPXtkb2NjfSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfSBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXIgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJwYXJhZ3JhcGhcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWEgcm93cz17NH0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNoZWNrYm94XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaSBkaWJhd2FoIGluaTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvY2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0ucHVzaChpZHh4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPiB7ZG9jY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZGF0ZVN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICB7bG9hZGluZ3NwZWMyID8gKFxuICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2ZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDNbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQzKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3h4LCBpZHh4KSA9PiBkb2N4eC5pZCAhPT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQyLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIzKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAge2ZpZWxkZGF0YWEyLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQyW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnQyfSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMl07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWEyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YWEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YWEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYTIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkMn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBUYW1iYWggU3Blc2lmaWthc2kgTW9kZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1hbnVmYWN0dXJlcjwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZG1hbnVmfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZE1hbnVmYWN0dXJlcn1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nbWFudWZ9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbG1hbnVmfVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxtYW51ZihmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXs5MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBNYW51ZmFjdHVyZXIgPHNwYW4gY2xhc3NOYW1lPVwibmFtYW1hbnVcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFtYW51Zi5uYW1lfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5hbWEgTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRtYW51Zih0cnVlKVxuICAgICAgICAgICAgICAgICAgOiBzZXRkaXNhYmxlZG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhbWFudWYoeyBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFtYW51OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcywgcGFyYW1zIH0pIHtcbiAgY29uc3QgbW9kZWxpZCA9IHBhcmFtcy5tb2RlbElkO1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXMgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGV0YWlsUHJvZmlsZWAsXG4gICAge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9XG4gICk7XG4gIGNvbnN0IHJlc2pzb24gPSBhd2FpdCByZXNvdXJjZXMuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb247XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCI4MlwiLFxuICAgICAgbW9kZWxpZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbHNVcGRhdGUyO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n                }, void 0, false, void 0, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3339,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n                children: /*#__PURE__*/_jsxDEV(_Form, {\n                  layout: \"vertical\",\n                  initialValues: currentfield2,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"name\",\n                      label: \"Nama Field\",\n                      rules: [{\n                        required: true,\n                        message: \"Nama Field wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Input, {\n                        required: true,\n                        name: \"name\",\n                        onChange: e => {\n                          setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                            name: e.target.value\n                          }));\n\n                          if (e.target.value === \"\") {\n                            setdisabledtambah2(true);\n                          } else if (e.target.value !== \"\" && currentfield2.data_type !== \"\" && currentdropdownn2.every((doca, idxa) => doca !== \"\")) {\n                            setdisabledtambah2(false);\n                          }\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3475,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3465,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                      name: \"data_type\",\n                      label: \"Tipe Field\",\n                      rules: [{\n                        required: true,\n                        message: \"Tipe Field wajib diisi\"\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(_Select, {\n                        placeholder: \"Pilih Tipe Field\",\n                        onChange: value => {\n                          setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                            data_type: value\n                          }));\n\n                          if (value === \"dropdown\" || value === \"checkbox\") {\n                            if (currentdropdownn2.every((doca, idxa) => doca !== \"\")) {\n                              setdisabledtambah2(false);\n                            } else {\n                              setdisabledtambah2(true);\n                            }\n                          } else {\n                            setdisabledtambah2(false);\n                          }\n\n                          if (value === \"dropdown\") {\n                            setcurrentcheckeddropdownn2(\"\");\n                            setcurrentdropdownn2([\"\", \"\"]);\n                            setcd2part([\"\", \"\"]);\n                            setdisabledtambah2(true);\n                          }\n\n                          if (value === \"checkbox\") {\n                            setcurrentcheckeddropdownn2([]);\n                            setcurrentdropdownn2([\"\", \"\"]);\n                            setcd2part([\"\", \"\"]);\n                            setdisabledtambah2(true);\n                          }\n                        },\n                        name: \"data_type\",\n                        children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"dropdown\",\n                          children: \"Dropdown\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3545,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"number\",\n                          children: \"Number\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3548,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"paragraph\",\n                          children: \"Paragraph Text\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3551,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"checkbox\",\n                          children: \"Checkbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3554,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"single\",\n                          children: \"Single Textbox\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3557,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                          value: \"date\",\n                          children: \"Date\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3560,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3507,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3497,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3464,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"default\",\n                    label: \"Default\",\n                    children: [currentfield2.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3570,\n                        columnNumber: 33\n                      }, this), currentdropdownn2.map((doc, idxx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            checked: currentcheckeddropdownn2 === idxx ? true : false,\n                            onChange: e => {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdownn2(idxx);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3577,\n                            columnNumber: 39\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3576,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: `0.5rem`\n                            },\n                            defaultValue: doc,\n                            placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                            onChange: e => {\n                              setcurrentdropdownn2(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2part(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdownn2.every((doca, idxa) => doca !== \"\") && currentfield2.name !== \"\") {\n                                setdisabledtambah2(false);\n                              } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                                setdisabledtambah2(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3591,\n                            columnNumber: 39\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3590,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: () => {\n                            setcurrentdropdownn2([]);\n                            setcdparttrigger(prev => !prev);\n                            setcdpartidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3633,\n                            columnNumber: 39\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3625,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3575,\n                        columnNumber: 35\n                      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: () => {\n                            setcurrentdropdownn2([...currentdropdownn2, \"\"]);\n                            setcd2part([...cd2part, \"\"]);\n                            setdisabledtambah2(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3638,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3637,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3569,\n                      columnNumber: 31\n                    }, this) : null, currentfield2.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3656,\n                        columnNumber: 33\n                      }, this), currentdropdownn2.map((doc, idxx) => {\n                        const idxchecked = currentcheckeddropdownn2.includes(idxx);\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-7 flex items-center\",\n                            children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                              defaultChecked: idxchecked,\n                              onChange: e => {\n                                if (e.target.checked === true) {\n                                  setcurrentcheckeddropdownn2(prev => {\n                                    var temp = prev;\n                                    temp.push(idxx);\n                                    return temp;\n                                  });\n                                } else {\n                                  setcurrentcheckeddropdownn2(prev => {\n                                    var temp = prev;\n                                    const index = temp.indexOf(idxx);\n                                    temp.splice(index, 1);\n                                    return temp;\n                                  });\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3666,\n                              columnNumber: 41\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3665,\n                            columnNumber: 39\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-10/12 mr-5\",\n                            children: /*#__PURE__*/_jsxDEV(_Input, {\n                              style: {\n                                marginRight: `0.5rem`\n                              },\n                              defaultValue: doc,\n                              placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                              onChange: e => {\n                                setcurrentdropdownn2(prev => {\n                                  const temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n                                setcd2part(prev => {\n                                  const temp = prev;\n                                  temp[idxx] = e.target.value;\n                                  return temp;\n                                });\n\n                                if (e.target.value !== \"\" && currentdropdownn2.every((doca, idxa) => doca !== \"\") && currentfield2.name !== \"\") {\n                                  setdisabledtambah2(false);\n                                } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                                  setdisabledtambah2(true);\n                                }\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3692,\n                              columnNumber: 41\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3691,\n                            columnNumber: 39\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-1/12 flex justify-around\",\n                            onClick: () => {\n                              setcurrentdropdownn2([]);\n                              setcdparttrigger(prev => !prev);\n                              setcdpartidx(idxx);\n                            },\n                            children: /*#__PURE__*/_jsxDEV(_Button, {\n                              type: \"danger\",\n                              children: \"-\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 3734,\n                              columnNumber: 41\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3726,\n                            columnNumber: 39\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3664,\n                          columnNumber: 37\n                        }, this);\n                      }), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mx-auto my-3\",\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          onClick: () => {\n                            setcurrentdropdownn2([...currentdropdownn2, \"\"]);\n                            setcd2part([...cd2part, \"\"]);\n                            setdisabledtambah2(true);\n                          },\n                          children: \"+ Tambah Opsi\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3740,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3739,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3655,\n                      columnNumber: 31\n                    }, this) : null, currentfield2.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                      style: {\n                        width: `30%`\n                      },\n                      defaultValue: fielddataa[idx].default,\n                      placeholder: `Masukkan default ${currentfield2.name}`,\n                      onChange: value => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          default: `${value}`\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3757,\n                      columnNumber: 31\n                    }, this), currentfield2.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                      rows: 4,\n                      placeholder: `Masukkan default ${currentfield2.name}`,\n                      defaultValue: fielddataa[idx].default,\n                      onChange: e => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          default: e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3771,\n                      columnNumber: 31\n                    }, this), currentfield2.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: `Masukkan default ${currentfield2.name}`,\n                      defaultValue: fielddataa[idx].default,\n                      onChange: e => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          default: e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3785,\n                      columnNumber: 31\n                    }, this), currentfield2.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                      placeholder: `Masukkan default ${currentfield2.name}`,\n                      defaultValue: fielddataa[idx].default,\n                      onChange: e => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          default: e.target.value\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3798,\n                      columnNumber: 31\n                    }, this), currentfield2.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                      defaultValue: fielddataa[idx].default,\n                      style: {\n                        width: `30%`\n                      },\n                      placeholder: `Masukkan default ${currentfield2.name}`,\n                      onChange: (value, dateString) => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          default: dateString\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3811,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3566,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3824,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex mt-4 justify-end\",\n                    children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                      placement: \"bottom\",\n                      title: `Apakah anda yakin ingin menghapus field ${doc.name === \"\" ? \"ini\" : doc.name}?`,\n                      okText: \"Ya\",\n                      cancelText: \"Tidak\",\n                      onConfirm: () => {\n                        setfielddataa(prev => prev.filter((_, idxx) => idxx !== idx));\n                        setnewdata2(prev => {\n                          var temp = prev;\n                          temp.model_columns = temp.model_columns.filter((docxx, idxx) => docxx.id !== doc.id);\n                          return temp;\n                        });\n                        setaddedfield3(prev => {\n                          prev.splice(idx, 1);\n                          return prev;\n                        });\n                        setdisabledaddfield2(false);\n                        setpointevent2(\"\");\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                        children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                          style: {\n                            fontSize: `1.25rem`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3854,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3853,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3826,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \" flex items-center mr-4\",\n                      children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                        checked: currentfield2.required,\n                        style: {\n                          marginRight: `0.5rem`\n                        },\n                        onChange: e => {\n                          setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                            required: e.target.checked\n                          }));\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3860,\n                        columnNumber: 31\n                      }, this), \" \", \"Required\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3859,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                      disabled: disabledtambah2,\n                      type: \"primary\",\n                      onClick: () => {\n                        if (currentfield2.data_type === \"dropdown\" || currentfield2.data_type === \"checkbox\") {\n                          setidxdropdowntrigger3(idx);\n                          setvaluedropdowntrigger3(prev => !prev);\n                        }\n\n                        const temp = fielddataa;\n                        temp[idx] = currentfield2;\n                        setfielddataa(temp);\n                        setaddedfieldidx3(idx);\n                        setaddedfieldtrigger3(prev => !prev);\n                        setconcatfieldtrigger2(prev => !prev);\n                        setdisabledaddfield2(false);\n                        setpointevent2(\"\");\n                      },\n                      children: \"Tambah\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3872,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3825,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3463,\n                  columnNumber: 25\n                }, this)\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3459,\n                columnNumber: 23\n              }, this)\n            }, void 0, false);\n          })\n        }, void 0, false), fielddataa2.map((doc, idx) => {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: addedfield2[idx] === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => {\n                const temp = [...addedfield2];\n                temp[idx] = false;\n\n                for (var i = 0; i < temp.length; i++) {\n                  if (i !== idx) {\n                    temp[i] = true;\n                  }\n                }\n\n                setaddedfield2(temp);\n                setcurrentfield2(fielddataa2[idx]);\n\n                if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                  setcurrentdropdownn2(doc.default.opsi);\n                  setcd2part(doc.default.opsi);\n                  setcurrentcheckeddropdownn2(doc.default.default);\n                }\n\n                if (fielddataa2[idx].data_type !== \"dropdown\" || fielddataa2[idx].data_type !== \"checkbox\") {\n                  if (fielddataa2[idx].name !== \"\" && fielddataa2[idx].data_type !== \"\") {\n                    setdisabledtambah2(false);\n                  } else {\n                    setdisabledtambah2(true);\n                  }\n                } else {\n                  if (doc.default.opsi.some(docopsi => docopsi === \"\")) {\n                    setdisabledtambah2(true);\n                  } else {\n                    setdisabledtambah2(false);\n                  }\n                }\n\n                setdisabledaddfield2(true);\n                setpointevent2(\"pointer-events-none\");\n              },\n              className: \"jsx-28588772\" + \" \" + `${pointevent2} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-28588772\" + \" \" + \"font-semibold mb-2\",\n                children: [doc.name, fielddataa2[idx].required ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"judulField\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3958,\n                  columnNumber: 25\n                }, this) : null, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"text-gray-400 text-sm\",\n                  children: [\"(\", doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"paragraph\" && ` Text`, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3960,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3955,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-28588772\" + \" \" + \"rounded border w-full pl-3 py-2 flex items-center my-auto\",\n                children: doc.data_type === \"checkbox\" || doc.data_type === \"dropdown\" || doc.data_type === \"paragraph\" || doc.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col w-full\",\n                    children: doc.default.opsi.map((dok, idk) => {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-28588772\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3983,\n                          columnNumber: 37\n                        }, this)\n                      }, idk, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3979,\n                        columnNumber: 35\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3976,\n                    columnNumber: 29\n                  }, this), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col w-full\",\n                    children: doc.default.opsi.map((dok, idk) => {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"jsx-28588772\" + \" \" + \"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                          children: dok\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3997,\n                          columnNumber: 37\n                        }, this)\n                      }, idk, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3993,\n                        columnNumber: 35\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3990,\n                    columnNumber: 29\n                  }, this), doc.data_type === \"date\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex justify-between w-full px-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                      children: doc.default\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4005,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"jsx-28588772\",\n                      children: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4007,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4006,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4004,\n                    columnNumber: 29\n                  }, this), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex h-20\",\n                    children: doc.default\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4012,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                  children: doc.default\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4016,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3969,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n                id: \"28588772\",\n                children: \".judulField.jsx-28588772::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtN0h1QixBQUd5RSxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvYWRtaW4vbW9kZWxzL3VwZGF0ZTIvW21vZGVsSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVsZXRlT3V0bGluZWQgfSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIENhbGVuZGFyT3V0bGluZWQsXG4gIENsb3NlQ2lyY2xlT3V0bGluZWQsXG4gIFBsdXNTcXVhcmVUd29Ub25lLFxufSBmcm9tIFwiQGFudC1kZXNpZ24vaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJ1dHRvbixcbiAgQ2hlY2tib3gsXG4gIENvbGxhcHNlLFxuICBEYXRlUGlja2VyLFxuICBFbXB0eSxcbiAgRm9ybSxcbiAgSW5wdXQsXG4gIElucHV0TnVtYmVyLFxuICBQb3Bjb25maXJtLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRpbWVsaW5lLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcImFudGQvbGliL21vZGFsL01vZGFsXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmRcIjtcbmltcG9ydCBzdCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkLm1vZHVsZS5jc3NcIjtcbmltcG9ydCBodHRwY29va2llIGZyb20gXCJjb29raWVcIjtcblxuY29uc3QgTW9kZWxzVXBkYXRlMiA9ICh7IHNpZGVtZW51LCBkYXRhUHJvZmlsZSwgaW5pdFByb3BzLCBtb2RlbGlkIH0pID0+IHtcbiAgLy8xLkluaXRcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDMsIDEpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIlViYWggTW9kZWxcIjtcbiAgY29uc3QgW2luc3RhbmNlRm9ybV0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgW2luc3RhbmNlRm9ybTJdID0gRm9ybS51c2VGb3JtKCk7XG4gIGNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG4gIC8vMi5IZWxwZXIgZnVuY3Rpb25zXG4gIGNvbnN0IHJlbmRlckNoaWxkUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gPENoaWxkcmVuIGRvYz17ZG9jfT48L0NoaWxkcmVuPjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBDaGlsZHJlbiA9ICh7IGRvYyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUaW1lbGluZS5JdGVtPlxuICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2RvYy5uYW1lfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHAtM1wiPlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlF1YW50aXR5IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBiZy1ncmF5LTIwMCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBoLTEyIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLnF1YW50aXR5fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMyLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIHZhciBkZWZhdWx0MiA9IHt9XG4gICAgICAgICAgICAgICAgICAvLyBpZiAoZG9jbWMyLmRhdGFfdHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCBkb2NtYzIuZGF0YV90eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAvLyAgICAgZGVmYXVsdDIgPSBKU09OLnBhcnNlKGRvY21jMi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2NtYzIuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgMTAwJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogYHJnYmEoMjI5LCAyMzEsIDIzNSwxKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMiwgaWR4MikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGRpc2FibGVkIHZhbHVlPXtpZHgyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHQub3BzaS5tYXAoKGRvYzMsIGlkeDMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYzN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIGJnLWdyYXktMTAwIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvY21jMi5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMCByb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAge2RvYy5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICByZW5kZXJDaGlsZFBhcnRNb2RlbChkb2MubW9kZWxfcGFydHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgPC9QYW5lbD5cbiAgICAgICAgICB9XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgKTtcbiAgfTtcblxuICAvLzIudXNlU3RhdGVcbiAgY29uc3QgW25ld2RhdGEsIHNldG5ld2RhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBudWxsLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbbmV3ZGF0YTIsIHNldG5ld2RhdGEyXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogXCJcIixcbiAgICBhc3NldF9pZDogXCJcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgbW9kZWxfcGFydHM6IFtdLFxuICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgIGRlbGV0ZV9tb2RlbF9pZHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW2RlZmF1bHRkYXRhLCBzZXRkZWZhdWx0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51ZmRhdGEsIHNldG1hbnVmZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbGRhdGEsIHNldG1vZGVsZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEsIHNldGZpZWxkZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGEyLCBzZXRmaWVsZGRhdGEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YWEsIHNldGZpZWxkZGF0YWFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYTIsIHNldGZpZWxkZGF0YWEyXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscGFydGZpZWxkZGF0YSwgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZCwgc2V0Y3VycmVudGZpZWxkXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50ZmllbGQyLCBzZXRjdXJyZW50ZmllbGQyXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICBkZWZhdWx0OiBcInNpbmdsZVwiLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgfSk7XG4gIGNvbnN0IFtjdXJyZW50aWRtb2RlbCwgc2V0Y3VycmVudGlkbW9kZWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthZGRlZGZpZWxkLCBzZXRhZGRlZGZpZWxkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQxLCBzZXRhZGRlZGZpZWxkMV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMiwgc2V0YWRkZWRmaWVsZDJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDMsIHNldGFkZGVkZmllbGQzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgsIHNldGFkZGVkZmllbGRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIsIHNldGFkZGVkZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgxLCBzZXRhZGRlZGZpZWxkaWR4MV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjEsIHNldGFkZGVkZmllbGR0cmlnZ2VyMV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Miwgc2V0YWRkZWRmaWVsZGlkeDJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIyLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDMsIHNldGFkZGVkZmllbGRpZHgzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMywgc2V0YWRkZWRmaWVsZHRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdjcmVhdGUsIHNldGxvYWRpbmdjcmVhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZW1vZGVsLCBzZXRsb2FkaW5nY3JlYXRlbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2dldG1vZGVsLCBzZXRsb2FkaW5nZ2V0bW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJhbG9hZGluZywgc2V0cHJhbG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjLCBzZXRsb2FkaW5nc3BlY10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nc3BlYzIsIHNldGxvYWRpbmdzcGVjMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd24yLCBzZXRjdXJyZW50ZHJvcGRvd24yXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjdXJyZW50ZHJvcGRvd25uMiwgc2V0Y3VycmVudGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd24yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2N1cnJlbnRjaGVja2VkZHJvcGRvd25uMiwgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIsIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMSwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMiwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMywgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlciwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjEsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMiwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIzLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIzXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGZpZWxkdHJpZ2dlciwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4LCBzZXRjb25jYXRhZGRjb2x1bW5zaWR4XSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMSwgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc2lkeDEsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnN2YWx1ZTEsIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyMiwgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlZGl0cGFydCwgc2V0ZWRpdHBhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kYWxjcmVhdGVtb2RlbCwgc2V0bW9kYWxjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlciwgc2V0bmV3ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3ZGF0YXRyaWdnZXIyLCBzZXRuZXdkYXRhdHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx0cmlnZ2VyLCBzZXRtb2RlbHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHRyaWdnZXIsIHNldGNvbmNhdHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdHBhcnR2YWx1ZSwgc2V0Y29uY2F0cGFydHZhbHVlXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUsIHNldGFzc2V0dHlwZWNvZGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVjb2RlMiwgc2V0YXNzZXR0eXBlY29kZTJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkZWZhdWx0bW9kZWwsIHNldGRlZmF1bHRtb2RlbF0gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaCwgc2V0ZGlzYWJsZWR0YW1iYWhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWR0YW1iYWgyLCBzZXRkaXNhYmxlZHRhbWJhaDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGRmaWVsZCwgc2V0ZGlzYWJsZWRhZGRmaWVsZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkMiwgc2V0ZGlzYWJsZWRhZGRmaWVsZDJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcG9pbnRldmVudCwgc2V0cG9pbnRldmVudF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3BvaW50ZXZlbnQyLCBzZXRwb2ludGV2ZW50Ml0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NkMiwgc2V0Y2QyXSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZGlkeCwgc2V0Y2RpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2R0cmlnZ2VyLCBzZXRjZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2QycGFydCwgc2V0Y2QycGFydF0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY2RwYXJ0aWR4LCBzZXRjZHBhcnRpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY2RwYXJ0dHJpZ2dlciwgc2V0Y2RwYXJ0dHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2Vhc3NldCwgc2V0Y2hhbmdlYXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGVmYXVsdGFzc2V0LCBzZXRkZWZhdWx0YXNzZXRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmV0Y2hpbmdwYXJ0LCBzZXRmZXRjaGluZ3BhcnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0cGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgLy9jcmVhdGUgbWFudWZhY3R1cmVyXG4gIGNvbnN0IFttb2RhbG1hbnVmLCBzZXRtb2RhbG1hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdtYW51Ziwgc2V0bG9hZGluZ21hbnVmXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkbWFudWYsIHNldGRpc2FibGVkbWFudWZdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt0cmlnZ2VybWFudWYsIHNldHRyaWdnZXJtYW51Zl0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtkYXRhbWFudWYsIHNldGRhdGFtYW51Zl0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogXCJcIixcbiAgfSk7XG5cbiAgLy8zLm9uQ2hhbmdlXG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZCA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGEoW1xuICAgICAgLi4uZmllbGRkYXRhLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGFkZGVkZmllbGQxKFsuLi5hZGRlZGZpZWxkMSwgZmFsc2VdKTtcbiAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tBZGRGaWVsZDIgPSAoKSA9PiB7XG4gICAgc2V0ZmllbGRkYXRhYTIoW1xuICAgICAgLi4uZmllbGRkYXRhYTIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBkYXRhX3R5cGU6IFwiXCIsXG4gICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja1NlbGVjdEFzc2V0ID0gKGlkKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIHNldGxvYWRpbmdzcGVjKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdGFzc2V0aWQgPSBkZWZhdWx0YXNzZXQubWFwKChkb2NtYXApID0+IGRvY21hcC5pZCk7XG4gICAgICAgICAgY29uc3QgbmV3YXNzZXRmaWVsZGRhdGEyID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAuY29uY2F0KHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChkb2NuZXdmaWVsZCkgPT4gdHlwZW9mIGRvY25ld2ZpZWxkLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICB2YXIgdGVtcG8gPSBwcmV2O1xuICAgICAgICAgICAgdGVtcG8gPSB0ZW1wb1xuICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWx0ZXIpID0+IGRlZmF1bHRhc3NldGlkLmluY2x1ZGVzKGRvY2ZpbHRlci5pZCkpXG4gICAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcG87XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlZmF1bHRtb2RlbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2Fzc2V0ZmllbGRkYXRhMi5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGVmYXVsdGRhdGEoe1xuICAgICAgICAgICAgLi4uZGVmYXVsdGRhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBkZWZhdWx0bW9kZWwubWFudWZhY3R1cmVyX2lkLFxuICAgICAgICAgICAgY291bnQ6IGRlZmF1bHRtb2RlbC5jb3VudCxcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgIGlkOiByZXMyLmRhdGEuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHJlczIuZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBjb2RlOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlczIuZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NldF9pZDogTnVtYmVyKGlkKSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IGRlZmF1bHRhc3NldCxcbiAgICAgICAgICAgIGFkZF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICAgIGFkZF9tb2RlbHM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2Fzc2V0ZmllbGRkYXRhMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldGNoYW5nZWFzc2V0KHRlbXApO1xuICAgICAgICAgIHNldGFkZGVkZmllbGQoYXJyKTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiaW5mb1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFuZGEgVGVsYWggTWVuZ3ViYWggQXNzZXQgVHlwZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgIFwiSGFsIGluaSBtZW1idWF0IGZpZWxkIGRhcmkgYXNzZXQgdHlwZSB0ZXJrYWl0IHRlcmJlbnR1ayBkaSBmb3JtIGluaSFcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICAvLyBzZXRmaWVsZGRhdGEyKHRlbXApXG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IG5ld2RhdGEubW9kZWxfY29sdW1ucy5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMoZmFsc2UpO1xuICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQyID0gKGlkKSA9PiB7XG4gICAgc2V0bG9hZGluZ3NwZWMyKHRydWUpO1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGFzc2V0X2lkOiBOdW1iZXIoaWQpIH0pO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldD9pZD0ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgdGVtcCA9IHJlczIuZGF0YS5hc3NldF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGJvb2wgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvb2wucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZDMoYm9vbCk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICAgIGFzc2V0X2lkOiByZXMyLmRhdGEuY29kZSxcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRhc3NldHR5cGVjb2RlMihyZXMyLmRhdGEuaWQpO1xuICAgICAgICAgIC8vIHNldG5ld2RhdGF0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEyLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YWEodGVtcCk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYzIoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLzQuaGFuZGxlXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhKSB7XG4gICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwidXBkYXRlX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhZGRfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFzc2V0X2lkXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IE51bWJlcihhc3NldHR5cGVjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS91cGRhdGVNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGUoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgIHJ0LnB1c2goYC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbCA9ICgpID0+IHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3ZGF0YTIpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YTJbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikgWyh0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUyKSldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0bG9hZGluZ2NyZWF0ZW1vZGVsKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNb2RlbGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1vZGVsIGJlcmhhc2lsIGRpdGFtYmFoa2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICBhc3NldF9pZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9pZDogXCJcIixcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogW10sXG4gICAgICAgICAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgIHNldG1vZGVsdHJpZ2dlcihyZXMyLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRNYW51ZmFjdHVyZXIgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ21hbnVmKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRNYW51ZmFjdHVyZXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFtYW51ZiksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nbWFudWYoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGFtYW51Zih7XG4gICAgICAgICAgICAuLi5kYXRhbWFudWYsXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cbiAgICAgICAgICBzZXR0cmlnZ2VybWFudWYoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNS51c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TWFudWZhY3R1cmVyc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzMi5kYXRhO1xuXG4gICAgICAgIHNldG1hbnVmZGF0YShkYXRhKTtcblxuICAgICAgICAvKiogU2V0IG5ldyBpbnNlcnRlZCBtYW51ZmFjdHVyZXIgYXMgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gdGhlIFwiTWFudWZhY3R1cmVyXCIgZHJvcGRvd24gKi9cbiAgICAgICAgaWYgKHRyaWdnZXJtYW51ZiA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgbGF0ZXN0SW5zZXJ0ZWRNYW51ZmFjdHVyZXIgPSBkYXRhW2RhdGEubGVuZ3RoIC0gMV07XG4gICAgICAgICAgY29uc3QgbmV3TWFudWZhY3R1cmVySWQgPSBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlci5pZDtcblxuICAgICAgICAgIC8qKiBGb3JtIGNvbnRyb2wgdmFsdWUgKi9cbiAgICAgICAgICBpbnN0YW5jZUZvcm0uc2V0RmllbGRzVmFsdWUoeyBtYW51ZmFjdHVyZXJfaWQ6IG5ld01hbnVmYWN0dXJlcklkIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEocHJldiA9PiAoey4uLnByZXYsIG1hbnVmYWN0dXJlcl9pZDogbmV3TWFudWZhY3R1cmVySWQgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSwgW3RyaWdnZXJtYW51Zl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke21vZGVsaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSByZXMyLmRhdGEubW9kZWxfY29sdW1ucy5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgID8gZG9jLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vbW9kZWxfcGFydHNcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlUGFydE1vZGVsID0gKGl0ZW0pID0+IHtcbiAgICAgICAgICB2YXIgdGVtcDExID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGVtcDEgPSB7fTtcbiAgICAgICAgICAgIHRlbXAxID0gaXRlbVtpXS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQgPT09IFwiXCIgfHwgZG9jLmRlZmF1bHQgPT09IFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGVtcDExLnB1c2goe1xuICAgICAgICAgICAgICAuLi5pdGVtW2ldLFxuICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiB0ZW1wMSxcbiAgICAgICAgICAgICAgbW9kZWxfcGFydHM6XG4gICAgICAgICAgICAgICAgaXRlbVtpXS5tb2RlbF9wYXJ0cy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICA/IHJlY3Vyc2l2ZVBhcnRNb2RlbChpdGVtW2ldLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGVtcDExO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB5byA9IHJlY3Vyc2l2ZVBhcnRNb2RlbChyZXMyLmRhdGEubW9kZWxfcGFydHMpO1xuICAgICAgICBjb25zdCB0ZW1wMiA9IHtcbiAgICAgICAgICAuLi5yZXMyLmRhdGEsXG4gICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5hc3NldC5jb2RlLFxuICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAsXG4gICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICAgICAgICBkZWxldGVfY29sdW1uX2lkczogW10sXG4gICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHNldG5ld2RhdGEodGVtcDIpO1xuICAgICAgICBzZXRkZWZhdWx0ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRhc3NldCh0ZW1wKTtcbiAgICAgICAgc2V0ZGVmYXVsdG1vZGVsKHRlbXAyKTtcbiAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgc2V0bW9kZWxwYXJ0ZmllbGRkYXRhKHlvKTtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJyLnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICBzZXRhc3NldHR5cGVjb2RlKHJlczIuZGF0YS5hc3NldF9pZCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVsZGF0YShyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKG1vZGVsdHJpZ2dlcik7XG4gICAgICAgIG1vZGVsdHJpZ2dlciAhPT0gZmFsc2UgPyBzZXRlZGl0cGFydCh0cnVlKSA6IG51bGw7XG4gICAgICB9KTtcbiAgfSwgW21vZGVsdHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBhc3NldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpZHhkcm9wZG93bnRyaWdnZXIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXJdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIHV0YW1hIHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjEgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyMV1bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7XG4gICAgICAuLi5uZXdkYXRhLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhMi5jb25jYXQoZmllbGRkYXRhKSxcbiAgICB9KTtcbiAgfSwgW2NvbmNhdGZpZWxkdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4ICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjaGFuZ2Vhc3NldC5zb21lKFxuICAgICAgICAgIChkb2Nzb21lKSA9PiBkb2Nzb21lLmlkID09PSBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWRcbiAgICAgICAgKSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlLmlkID09PSBcInVuZGVmaW5lZFwiXG4gICAgICApIHtcbiAgICAgICAgLy8gaWYgKChmaWVsZGRhdGEyLmxlbmd0aCAtIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoKSA+PSBuZXdkYXRhLmFkZF9jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS5hZGRfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkKSA9PiBkb2NhZGQubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zLnB1c2goZmllbGRkYXRhMltmaWVsZGRhdGEyLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb25jYXRhZGRjb2x1bW5zaWR4MSAhPT0gLTEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29uY2F0YWRkY29sdW1uc2lkeDEgPiBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCAtIDEgfHxcbiAgICAgICAgdHlwZW9mIGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEuaWQgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgICAgY2hhbmdlYXNzZXQgPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbZmllbGRkYXRhLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChjdXJyZW50ZmllbGQpO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpZHhhZGRjb2x1bW4gPSBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3ZGF0YS5hc3NldF9jb2x1bW5zLmxlbmd0aCtcIjpcIitjb25jYXRhZGRjb2x1bW5zaWR4K1wiO1wiK25ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogY3VycmVudGZpZWxkLmRhdGFfdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogY3VycmVudGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1uc1tpZHhhZGRjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZmllbGRkYXRhMltjb25jYXRhZGRjb2x1bW5zaWR4XSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY3VwKSA9PiBkb2N1cC5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnMucHVzaChmaWVsZGRhdGFbY29uY2F0YWRkY29sdW1uc2lkeDFdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeHVwY29sdW1uID0gbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jYWRkMikgPT4gZG9jYWRkMi5pZClcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5pZCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IHtcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudGZpZWxkLmlkLFxuICAgICAgICAgICAgICAgIG1vZGVsX2lkOiBjdXJyZW50ZmllbGQubW9kZWxfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zW2lkeHVwY29sdW1uXSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4XSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgxICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDEoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDFdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDFdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4MV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MyAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQzKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgzXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgzXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjNdKTtcblxuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgYmFydSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjMgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAvLyB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcl1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWVkcm9wZG93bnRyaWdnZXJ9YFxuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjNdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYnVhdCBzZW5kaXJpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlcjIgIT09IC0xKSB7XG4gICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLFxuICAgICAgICAgIG9wc2k6IGN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3ZhbHVlZHJvcGRvd250cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHtcbiAgICAgIC4uLm5ld2RhdGEyLFxuICAgICAgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYS5jb25jYXQoZmllbGRkYXRhYTIpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyMl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4MiAhPT0gLTEpIHtcbiAgICAgIHNldGFkZGVkZmllbGQyKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChwcmV2W2FkZGVkZmllbGRpZHgyXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHgyXSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdGVtcDIgPSBbLi4ucHJldiwgdHJ1ZV07XG4gICAgICAgICAgcmV0dXJuIHRlbXAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthZGRlZGZpZWxkdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YWEgfSk7XG4gIH0sIFtuZXdkYXRhdHJpZ2dlcjJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciB0ZW1wID0gW107XG4gICAgaWYgKGNvbmNhdHBhcnR2YWx1ZSAhPT0gLTEpIHtcbiAgICAgIGlmIChjb25jYXRwYXJ0dmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtb2RlbF9wYXJ0czogW10gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25jYXRwYXJ0dmFsdWUubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIHZhciBpZHh0ZW1wID0gdGVtcC5tYXAoKGRvYykgPT4gZG9jLmlkKS5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgaWYgKGlkeHRlbXAgIT09IC0xICYmIHRlbXBbaWR4dGVtcF1bXCJpZFwiXSA9PT0gZG9jLmlkKSB7XG4gICAgICAgICAgICB2YXIgaWR4b2YgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgIHRlbXBbaWR4b2ZdID0ge1xuICAgICAgICAgICAgICAuLi50ZW1wW2lkeG9mXSxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IHRlbXBbaWR4b2ZdLnF1YW50aXR5ICsgZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlkeHRlbXAgPT09IC0xKSB7XG4gICAgICAgICAgICB0ZW1wLnB1c2goe1xuICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICBxdWFudGl0eTogZG9jLnF1YW50aXR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGFkZF9tb2RlbHM6IHRlbXAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uY2F0cGFydHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RpZHggIT09IC0xKSB7XG4gICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDIuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZGlkeCk7XG4gICAgICB9KTtcbiAgICAgIHNldGNkMigocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkaWR4KSk7XG4gICAgfVxuICB9LCBbY2R0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNkcGFydGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgIHJldHVybiBjZDJwYXJ0LmZpbHRlcigoZG9jMTAsIGlkeDEwKSA9PiBpZHgxMCAhPT0gY2RwYXJ0aWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QycGFydCgocHJldikgPT4gcHJldi5maWx0ZXIoKGRvYzExLCBpZHgxMSkgPT4gaWR4MTEgIT09IGNkcGFydGlkeCkpO1xuICAgIH1cbiAgfSwgW2NkcGFydHRyaWdnZXJdKTtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0XG4gICAgICBzdD17c3R9XG4gICAgICB0b2s9e2luaXRQcm9wc31cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICAgIHBhdGhBcnI9e3BhdGhBcnJ9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTRcIlxuICAgICAgICBpZD1cImNyZWF0ZUFzc2V0c1dyYXBwZXJcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItOFwiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtMiBwdC00IGJvcmRlci10LTIgYm9yZGVyLWItMiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBweS0yXCI+XG4gICAgICAgICAgICAgICAgRm9ybSBVYmFoIE1vZGVsIC0ge25ld2RhdGEubmFtZX1cbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9e2AvYWRtaW4vbW9kZWxzL2RldGFpbC8ke21vZGVsaWR9YH0+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC8qb25DbGljaz17KCkgPT4geyBjb25zb2xlLmxvZyhuZXdkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhKTsgY29uc29sZS5sb2coZmllbGRkYXRhMik7IGNvbnNvbGUubG9nKGRlZmF1bHRkYXRhKTsgY29uc29sZS5sb2coZGVmYXVsdGFzc2V0KSB9fSovIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nY3JlYXRlfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtpbnN0YW5jZUZvcm0uc3VibWl0fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvU3RpY2t5PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkluZm9ybWFzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgICAgICA8U3Bpbj48L1NwaW4+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Rm9ybVxuICAgICAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybX1cbiAgICAgICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsfVxuICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZXM9e25ld2RhdGF9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFzc2V0IFR5cGUgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93blN0eWxlPXt7IG1heEhlaWdodDogNDAwLCBvdmVyZmxvdzogXCJhdXRvXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLmFsbENoZWNrZWROb2Rlc1swXS5ub2RlLnByb3BzLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiIGxhYmVsPVwiTWFudWZhY3R1cmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2RvYy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IHB0LTIgbXktYXV0byBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxtYW51Zih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIkRlc2tyaXBzaVwiPlxuICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCBkZXNjcmlwdGlvbjogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoeyAuLi5uZXdkYXRhLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5yZXF1aXJlZF9zbn1cbiAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YS5pc19jb25zdW1hYmxlfVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBNb2RlbCBDb25zdW1hYmxlIGRlbmdhbiBzYXR1YW4ganVtbGFoXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBtYi04IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlNwZXNpZmlrYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7bG9hZGluZ3NwZWMgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhMi5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfT48L0VtcHR5PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGZpZWxkZGF0YTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZFtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKGZpZWxkZGF0YTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhMltpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGEyW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm51bWJlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICE9PSBmaWVsZGRhdGEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeFVwZGF0ZUNvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4VXBkYXRlQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4KGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2ZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkMVtpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50fSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMV07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0ID09PSBpZGtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5kZWZhdWx0LmluZGV4T2YoaWRrKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIFNwZXNpZmlrYXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBTcGVzaWZpa2FzaSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBoYW55YSBkaXBpbGloIDEgKHNhdHUpIGRhcmkgYmViZXJhcGEgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd24yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd24yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhjaGVja2VkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e21vbWVudChmaWVsZGRhdGFbaWR4XS5kZWZhdWx0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YTIubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jZGVmKSA9PiBkb2NkZWYuaWQgPT09IGRvYy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX2NvbHVtbl9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSB0ZW1wLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRlbXAuYWRkX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUxKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0YWRkY29sdW1uc3RyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgxKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIxKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiZGFzaGVkXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGR9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7bmV3ZGF0YS5pc19jb25zdW1hYmxlID09PSBmYWxzZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgbWItOCBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgcHgtNSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTVcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+S29uZmlndXJhc2kgUGFydCBNb2RlbDwvaDE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHttb2RlbHBhcnRmaWVsZGRhdGEubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q29sbGFwc2UgYWNjb3JkaW9uPlxuICAgICAgICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17YHBhbmVsJHtpZHh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRvYy5tb2RlbF9jaGlsZC5sZW5ndGggPT09IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtci0yXCI+e2RvYy5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9XCJyaWdodFwiIHRpdGxlPVwiTW9kZWwgdGlkYWsgbWVtaWxpa2kgcGFydCBtb2RlbCFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgPEV4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX0+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBNb2RlbCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBkYXJpIE1vZGVsIFBhcnQgJHtuZXdkYXRhLm5hbWV9P2B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4dGVtcCA9IG1vZGVscGFydGZpZWxkZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhID0gdGVtcC5hZGRfbW9kZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzIpID0+IGRvYzIuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC5hZGRfbW9kZWxzW2lkeGRhdGFdLnF1YW50aXR5ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5zcGxpY2UoaWR4ZGF0YSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3BhcnRzKSA9PiBkb2NwYXJ0cy5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvYy5pZCkgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZGVsZXRlX21vZGVsX2lkcy5pbmRleE9mKGRvYy5pZCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZWRgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXNzZXQgVHlwZXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsYXNzZXR0eXBlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e2RvYy5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfY29sdW1ucy5tYXAoKGRvY21jLCBpZHhtYykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLm5hbWV9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsc25cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGFyQXQoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgbXktYXV0byBweC0yIHB5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdC5vcHNpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY29wc2ksIGlkeG9wc2kpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeG9wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLXdoaXRlIGJvcmRlciB3LTMvMTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gcHgtMiBweS0xIG1iLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhvcHNpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRlZmF1bHQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJnLWdyYXktMTAwIHJvdW5kZWQgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIHctZnVsbCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaW1lbGluZSBzdHlsZT17eyBtYXJnaW5Ub3A6IGAxcmVtYCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxhc3NldHR5cGU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsc246OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2VkaXRwYXJ0ID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG15LTMgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTUgdGV4dC1sZyBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50aWRtb2RlbH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy0xMS8xMiBtci0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtjdXJyZW50aWRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hpbmdwYXJ0ID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VhcmNoPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9L2dldE1vZGVscz9yb3dzPTEwJm5hbWU9JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldG1vZGVsZGF0YShbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ3BhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gYXRhdSBjYXJpIG5hbWEgbW9kdWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uUG9wdXBTY3JvbGw9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoZXZlbnQudGFyZ2V0LnNjcm9sbFRvcCArIGV2ZW50LnRhcmdldC5vZmZzZXRIZWlnaHQgPT09IGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNldHBhZ2UocHJldiA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHM/cGFnZT0ke3BhZ2V9JnJvd3M9MTBgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIC50aGVuKHJlczIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2Nyb2xsVG8oMCwgZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmVzMi5kYXRhLnRvID49IHJlczIuZGF0YS50b3RhbCA/IHNldG1vZGVsZGF0YShbLi4ubW9kZWxkYXRhLCByZXMyLmRhdGEuZGF0YV0pIDogc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhLCA8U3BpbiBzaXplPVwic21hbGxcIiAvPl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9kZWxkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17ZG9jLmlkfSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQbHVzU3F1YXJlVHdvVG9uZSBzdHlsZT17eyBmb250U2l6ZTogYDEuNXJlbWAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50aWRtb2RlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERlbGV0ZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdnZXRtb2RlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZWRpdHBhcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbD9pZD0ke2N1cnJlbnRpZG1vZGVsfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAxID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJtb2RlbF9jb2x1bW5zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9jb2x1bW5zXCJdID0gcmVzMi5kYXRhW3Byb3BdLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVscGFydHMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMyLmRhdGEubW9kZWxfcGFydHMubWFwKChkb2MyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwMyA9IGRvYzIubW9kZWxfY29sdW1ucy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jMykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MzIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kb2MyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbWFwMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJtb2RlbF9wYXJ0c1wiXSA9IG1vZGVscGFydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wiaWRcIl0gPSByZXMyLmRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W1wibmFtZVwiXSA9IHJlczIuZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wMSA9IFsuLi50ZW1wMSwgdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHZhbHVlKHJlczIuZGF0YS5tb2RlbF9wYXJ0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldGNvbmNhdHBhcnR0cmlnZ2VyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ZGF0YTIgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2MzKSA9PiBkb2MzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRpZG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVscy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhkYXRhMiA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRpZG1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaWR4ZGF0YTIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLm1hcCgoZG9jMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYzEuaWQgPT09IGN1cnJlbnRpZG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzEucXVhbnRpdHkgPSBkb2MxLnF1YW50aXR5ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bG9hZGluZ2dldG1vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgKyBUYW1iYWggUGFydCBNb2RlbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkYWRkZmllbGQyfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybTIuc3VibWl0fVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGVtb2RlbH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsY3JlYXRlbW9kZWx9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgbWItOFwiPlxuICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICBmb3JtPXtpbnN0YW5jZUZvcm0yfVxuICAgICAgICAgICAgbGF5b3V0PVwidmVydGljYWxcIlxuICAgICAgICAgICAgb25GaW5pc2g9e2hhbmRsZUNyZWF0ZU1vZGVsaW5Nb2RlbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwiYXNzZXRfaWRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPVwiQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQyKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIE1vZGVsIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgIGxhYmVsPVwiTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWFudWZhY3R1cmVyIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCBtYW51ZmFjdHVyZXJfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgbmFtZT1cIm1hbnVmYWN0dXJlcl9pZFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bWFudWZkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMih7IC4uLm5ld2RhdGEyLCByZXF1aXJlZF9zbjogZS50YXJnZXQuY2hlY2tlZCB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e25ld2RhdGEyLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgU2VyaWFsIE51bWJlciB3YWppYiBhZGFcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nc3BlYzIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpZHh9IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+IDogbnVsbH0gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+KHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiID8gXCJTaW5nbGUgVGV4dGJveFwiIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctZnVsbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcGRvd25cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy03IGZsZXgganVzdGlmeS1jZW50ZXIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0gPSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gZGVmYXVsdFZhbHVlPXtkb2NjfSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfSBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXIgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gYCR7dmFsdWV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJwYXJhZ3JhcGhcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWEgcm93cz17NH0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNoZWNrYm94XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaSBkaWJhd2FoIGluaTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvY2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXVtcImRlZmF1bHRcIl0ucHVzaChpZHh4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPiB7ZG9jY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdHJpbmdcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic2luZ2xlXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZGF0ZVN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICB7bG9hZGluZ3NwZWMyID8gKFxuICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2ZpZWxkZGF0YWEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDNbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbLi4uYWRkZWRmaWVsZDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQzKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YWFbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bEZpZWxkOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRmaWVsZDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZWZhdWx0XCIgbGFiZWw9XCJEZWZhdWx0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc2kgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLmluY2x1ZGVzKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0TnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGAke3ZhbHVlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dE51bWJlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbXQtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmllbGQgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3h4LCBpZHh4KSA9PiBkb2N4eC5pZCAhPT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmb250U2l6ZTogYDEuMjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3Bjb25maXJtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdXJyZW50ZmllbGQyLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDMoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZHRyaWdnZXIzKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAge2ZpZWxkZGF0YWEyLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQyW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnQyfSBzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkMl07XG4gICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKGZpZWxkZGF0YWEyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoZG9jLmRlZmF1bHQuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLnNvbWUoKGRvY29wc2kpID0+IGRvY29wc2kgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRpcGUgRmllbGQgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiZHJvcGRvd25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRyb3Bkb3duXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wibnVtYmVyXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInBhcmFncmFwaFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFncmFwaCBUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImNoZWNrYm94XCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wic2luZ2xlXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2luZ2xlIFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZGF0ZVwifT5EYXRlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrYm94XCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgZGFwYXQgZGlwaWxpaCBsZWJpaCBkYXJpIDEgKHNhdHUpIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQ9e2lkeGNoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBkYXRlU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0RhdGVQaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMigocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID0gdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF8sIGlkeHgpID0+IGlkeHggIT09IGZpZWxkZGF0YWEubGVuZ3RoICsgaWR4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIyKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpZWxkZGF0YWEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYTIodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgODAlYCwgaGVpZ2h0OiBgNHJlbWAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DbGlja0FkZEZpZWxkMn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKyBUYW1iYWggU3Blc2lmaWthc2kgTW9kZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPkZvcm0gVGFtYmFoIE1hbnVmYWN0dXJlcjwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZG1hbnVmfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZE1hbnVmYWN0dXJlcn1cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nbWFudWZ9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbG1hbnVmfVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxtYW51ZihmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXs5MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBNYW51ZmFjdHVyZXIgPHNwYW4gY2xhc3NOYW1lPVwibmFtYW1hbnVcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFtYW51Zi5uYW1lfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5hbWEgTWFudWZhY3R1cmVyXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRtYW51Zih0cnVlKVxuICAgICAgICAgICAgICAgICAgOiBzZXRkaXNhYmxlZG1hbnVmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhbWFudWYoeyBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFtYW51OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcywgcGFyYW1zIH0pIHtcbiAgY29uc3QgbW9kZWxpZCA9IHBhcmFtcy5tb2RlbElkO1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXMgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGV0YWlsUHJvZmlsZWAsXG4gICAge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9XG4gICk7XG4gIGNvbnN0IHJlc2pzb24gPSBhd2FpdCByZXNvdXJjZXMuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb247XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCI4MlwiLFxuICAgICAgbW9kZWxpZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbHNVcGRhdGUyO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n              }, void 0, false, void 0, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3909,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(_Form, {\n                layout: \"vertical\",\n                initialValues: currentfield2,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"name\",\n                    label: \"Nama Field\",\n                    rules: [{\n                      required: true,\n                      message: \"Nama Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Input, {\n                      required: true,\n                      name: \"name\",\n                      onChange: e => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          name: e.target.value\n                        }));\n\n                        if (e.target.value === \"\") {\n                          setdisabledtambah2(true);\n                        } else if (e.target.value !== \"\" && currentfield2.data_type !== \"\" && currentdropdownn2.every((doca, idxa) => doca !== \"\")) {\n                          setdisabledtambah2(false);\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4045,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4035,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                    name: \"data_type\",\n                    label: \"Tipe Field\",\n                    rules: [{\n                      required: true,\n                      message: \"Tipe Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(_Select, {\n                      placeholder: \"Pilih Tipe Field\",\n                      onChange: value => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          data_type: value\n                        }));\n\n                        if (value === \"dropdown\" || value === \"checkbox\") {\n                          if (currentdropdownn2.every((doca, idxa) => doca !== \"\")) {\n                            setdisabledtambah2(false);\n                          } else {\n                            setdisabledtambah2(true);\n                          }\n                        } else {\n                          setdisabledtambah2(false);\n                        }\n\n                        if (value === \"dropdown\") {\n                          setcurrentcheckeddropdownn2(\"\");\n                          setcurrentdropdownn2([\"\", \"\"]);\n                          setcd2part([\"\", \"\"]);\n                          setdisabledtambah2(true);\n                        }\n\n                        if (value === \"checkbox\") {\n                          setcurrentcheckeddropdownn2([]);\n                          setcurrentdropdownn2([\"\", \"\"]);\n                          setcd2part([\"\", \"\"]);\n                          setdisabledtambah2(true);\n                        }\n                      },\n                      name: \"data_type\",\n                      children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"dropdown\",\n                        children: \"Dropdown\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4115,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"number\",\n                        children: \"Number\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4118,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"paragraph\",\n                        children: \"Paragraph Text\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4121,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"checkbox\",\n                        children: \"Checkbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4124,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"single\",\n                        children: \"Single Textbox\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4127,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                        value: \"date\",\n                        children: \"Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4130,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4077,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4067,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4034,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"default\",\n                  label: \"Default\",\n                  children: [currentfield2.data_type.toLowerCase() === \"dropdown\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4138,\n                      columnNumber: 29\n                    }, this), currentdropdownn2.map((doc, idxx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-7 flex items-center\",\n                        children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                          checked: currentcheckeddropdownn2 === idxx ? true : false,\n                          onChange: e => {\n                            if (e.target.checked === true) {\n                              setcurrentcheckeddropdownn2(idxx);\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4145,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4144,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-10/12 mr-5\",\n                        children: /*#__PURE__*/_jsxDEV(_Input, {\n                          style: {\n                            marginRight: `0.5rem`\n                          },\n                          defaultValue: doc,\n                          placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                          onChange: e => {\n                            setcurrentdropdownn2(prev => {\n                              const temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n                            setcd2part(prev => {\n                              const temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n\n                            if (e.target.value !== \"\" && currentdropdownn2.every((doca, idxa) => doca !== \"\") && currentfield2.name !== \"\") {\n                              setdisabledtambah2(false);\n                            } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                              setdisabledtambah2(true);\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4159,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4158,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-1/12 flex justify-around\",\n                        onClick: () => {\n                          setcurrentdropdownn2([]);\n                          setcdparttrigger(prev => !prev);\n                          setcdpartidx(idxx);\n                        },\n                        children: /*#__PURE__*/_jsxDEV(_Button, {\n                          type: \"danger\",\n                          children: \"-\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4199,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4191,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4143,\n                      columnNumber: 31\n                    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: () => {\n                          setcurrentdropdownn2([...currentdropdownn2, \"\"]);\n                          setcd2part([...cd2part, \"\"]);\n                          setdisabledtambah2(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4204,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4203,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4137,\n                    columnNumber: 27\n                  }, this) : null, currentfield2.data_type.toLowerCase() === \"checkbox\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4222,\n                      columnNumber: 29\n                    }, this), currentdropdownn2.map((doc, idxx) => {\n                      const idxchecked = currentcheckeddropdownn2.includes(idxx);\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-7 flex items-center\",\n                          children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                            defaultChecked: idxchecked,\n                            onChange: e => {\n                              if (e.target.checked === true) {\n                                setcurrentcheckeddropdownn2(prev => {\n                                  var temp = prev;\n                                  temp.push(idxx);\n                                  return temp;\n                                });\n                              } else {\n                                setcurrentcheckeddropdownn2(prev => {\n                                  var temp = prev;\n                                  const index = temp.indexOf(idxx);\n                                  temp.splice(index, 1);\n                                  return temp;\n                                });\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4232,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4231,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-10/12 mr-5\",\n                          children: /*#__PURE__*/_jsxDEV(_Input, {\n                            style: {\n                              marginRight: `0.5rem`\n                            },\n                            defaultValue: doc,\n                            placeholder: `Masukkan opsi ke-${idxx + 1}`,\n                            onChange: e => {\n                              setcurrentdropdownn2(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n                              setcd2part(prev => {\n                                const temp = prev;\n                                temp[idxx] = e.target.value;\n                                return temp;\n                              });\n\n                              if (e.target.value !== \"\" && currentdropdownn2.every((doca, idxa) => doca !== \"\") && currentfield2.name !== \"\") {\n                                setdisabledtambah2(false);\n                              } else if (e.target.value === \"\" || currentfield2.name === \"\") {\n                                setdisabledtambah2(true);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4257,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4256,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-1/12 flex justify-around\",\n                          onClick: () => {\n                            setcurrentdropdownn2([]);\n                            setcdparttrigger(prev => !prev);\n                            setcdpartidx(idxx);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(_Button, {\n                            type: \"danger\",\n                            children: \"-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 4299,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 4291,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4230,\n                        columnNumber: 33\n                      }, this);\n                    }), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mx-auto my-3\",\n                      children: /*#__PURE__*/_jsxDEV(_Button, {\n                        onClick: () => {\n                          setcurrentdropdownn2([...currentdropdownn2, \"\"]);\n                          setcd2part([...cd2part, \"\"]);\n                          setdisabledtambah2(true);\n                        },\n                        children: \"+ Tambah Opsi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4305,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4304,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4221,\n                    columnNumber: 27\n                  }, this) : null, currentfield2.data_type.toLowerCase() === \"number\" && /*#__PURE__*/_jsxDEV(_InputNumber, {\n                    style: {\n                      width: `30%`\n                    },\n                    defaultValue: fielddataa2[idx].default,\n                    placeholder: `Masukkan default ${currentfield2.name}`,\n                    onChange: value => {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        default: `${value}`\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4321,\n                    columnNumber: 27\n                  }, this), currentfield2.data_type.toLowerCase() === \"paragraph\" && /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n                    rows: 4,\n                    placeholder: `Masukkan default ${currentfield2.name}`,\n                    defaultValue: fielddataa2[idx].default,\n                    onChange: e => {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        default: e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4335,\n                    columnNumber: 27\n                  }, this), currentfield2.data_type.toLowerCase() === \"string\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: `Masukkan default ${currentfield2.name}`,\n                    defaultValue: fielddataa2[idx].default,\n                    onChange: e => {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        default: e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4348,\n                    columnNumber: 27\n                  }, this), currentfield2.data_type.toLowerCase() === \"single\" && /*#__PURE__*/_jsxDEV(_Input, {\n                    placeholder: `Masukkan default ${currentfield2.name}`,\n                    defaultValue: fielddataa2[idx].default,\n                    onChange: e => {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        default: e.target.value\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4360,\n                    columnNumber: 27\n                  }, this), currentfield2.data_type.toLowerCase() === \"date\" && /*#__PURE__*/_jsxDEV(_DatePicker, {\n                    style: {\n                      width: `30%`\n                    },\n                    placeholder: `Masukkan default ${currentfield2.name}`,\n                    onChange: (value, dateString) => {\n                      setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                        default: dateString\n                      }));\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4372,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4134,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4384,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex mt-4 justify-end\",\n                  children: [/*#__PURE__*/_jsxDEV(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: `Apakah anda yakin ingin menghapus field ${doc.name === \"\" ? \"ini\" : doc.name}?`,\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: () => {\n                      setfielddataa2(prev => prev.filter((_, idxx) => idxx !== idx));\n                      setnewdata2(prev => {\n                        var temp = prev;\n                        temp.model_columns = temp.model_columns.filter((_, idxx) => idxx !== fielddataa.length + idx);\n                        return temp;\n                      });\n                      setaddedfield2(prev => {\n                        prev.splice(idx, 1);\n                        return prev;\n                      });\n                      setdisabledaddfield2(false);\n                      setpointevent2(\"\");\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                      children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                        style: {\n                          fontSize: `1.25rem`\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4413,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4412,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4386,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \" flex items-center mr-4\",\n                    children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                      checked: currentfield2.required,\n                      style: {\n                        marginRight: `0.5rem`\n                      },\n                      onChange: e => {\n                        setcurrentfield2(_objectSpread(_objectSpread({}, currentfield2), {}, {\n                          required: e.target.checked\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4419,\n                      columnNumber: 27\n                    }, this), \" \", \"Required\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4418,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                    type: \"primary\",\n                    disabled: disabledtambah2,\n                    onClick: () => {\n                      if (currentfield2.data_type === \"dropdown\" || currentfield2.data_type === \"checkbox\") {\n                        setidxdropdowntrigger2(idx);\n                        setvaluedropdowntrigger2(prev => !prev);\n                      }\n\n                      const temp = fielddataa2;\n                      temp[idx] = currentfield2;\n                      setfielddataa2(temp);\n                      setaddedfieldidx2(idx);\n                      setaddedfieldtrigger2(prev => !prev);\n                      setconcatfieldtrigger2(prev => !prev);\n                      setdisabledaddfield2(false);\n                      setpointevent2(\"\");\n                    },\n                    children: \"Tambah\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4431,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4385,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4033,\n                columnNumber: 21\n              }, this)\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4029,\n              columnNumber: 19\n            }, this)\n          }, void 0, false);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"dashed\",\n            disabled: disabledaddfield2,\n            style: {\n              width: `80%`,\n              height: `4rem`\n            },\n            onClick: onClickAddField2,\n            children: \"+ Tambah Spesifikasi Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4462,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4461,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3062,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Form Tambah Manufacturer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4476,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(_Button, {\n            type: \"default\",\n            onClick: () => {\n              setmodalmanuf(false);\n            },\n            style: {\n              marginRight: `1rem`\n            },\n            children: \"Batal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4478,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"primary\",\n            disabled: disabledmanuf,\n            onClick: handleAddManufacturer,\n            loading: loadingmanuf,\n            children: \"Simpan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4487,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4477,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4475,\n        columnNumber: 11\n      }, this),\n      visible: modalmanuf,\n      footer: null,\n      onCancel: () => {\n        setmodalmanuf(false);\n      },\n      width: 900,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-842967156\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-842967156\" + \" \" + \"mb-0\",\n            children: [\"Nama Manufacturer \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-842967156\" + \" \" + \"namamanu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4508,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4507,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Input, {\n            value: datamanuf.name,\n            placeholder: \"Masukkan Nama Manufacturer\",\n            onChange: e => {\n              e.target.value === \"\" ? setdisabledmanuf(true) : setdisabledmanuf(false);\n              setdatamanuf({\n                name: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4510,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"842967156\",\n            children: \".namamanu.jsx-842967156::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2FkbWluL21vZGVscy91cGRhdGUyL1ttb2RlbElkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3NkllLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9hZG1pbi9tb2RlbHMvdXBkYXRlMi9bbW9kZWxJZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWxldGVPdXRsaW5lZCB9IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQ2FsZW5kYXJPdXRsaW5lZCxcbiAgQ2xvc2VDaXJjbGVPdXRsaW5lZCxcbiAgUGx1c1NxdWFyZVR3b1RvbmUsXG59IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBDaGVja2JveCxcbiAgQ29sbGFwc2UsXG4gIERhdGVQaWNrZXIsXG4gIEVtcHR5LFxuICBGb3JtLFxuICBJbnB1dCxcbiAgSW5wdXROdW1iZXIsXG4gIFBvcGNvbmZpcm0sXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGltZWxpbmUsXG4gIFRyZWVTZWxlY3QsXG4gIG5vdGlmaWNhdGlvbixcbn0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBNb2RhbCBmcm9tIFwiYW50ZC9saWIvbW9kYWwvTW9kYWxcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3RpY2t5IGZyb20gXCJ3aWwtcmVhY3Qtc3RpY2t5XCI7XG5cbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZFwiO1xuaW1wb3J0IHN0IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQubW9kdWxlLmNzc1wiO1xuaW1wb3J0IGh0dHBjb29raWUgZnJvbSBcImNvb2tpZVwiO1xuXG5jb25zdCBNb2RlbHNVcGRhdGUyID0gKHsgc2lkZW1lbnUsIGRhdGFQcm9maWxlLCBpbml0UHJvcHMsIG1vZGVsaWQgfSkgPT4ge1xuICAvLzEuSW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMywgMSk7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiVWJhaCBNb2RlbFwiO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtXSA9IEZvcm0udXNlRm9ybSgpO1xuICBjb25zdCBbaW5zdGFuY2VGb3JtMl0gPSBGb3JtLnVzZUZvcm0oKTtcbiAgY29uc3QgeyBQYW5lbCB9ID0gQ29sbGFwc2U7XG5cbiAgLy8yLkhlbHBlciBmdW5jdGlvbnNcbiAgY29uc3QgcmVuZGVyQ2hpbGRQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgIHJldHVybiBpdGVtLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgIHJldHVybiA8Q2hpbGRyZW4gZG9jPXtkb2N9PjwvQ2hpbGRyZW4+O1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IENoaWxkcmVuID0gKHsgZG9jIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRpbWVsaW5lLkl0ZW0+XG4gICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAge1xuICAgICAgICAgICAgPFBhbmVsIGhlYWRlcj17ZG9jLm5hbWV9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0zXCI+XG4gICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+UXVhbnRpdHkgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj48L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJnLWdyYXktMjAwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIGgtMTIgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPntkb2MucXVhbnRpdHl9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX2NvbHVtbnMubWFwKChkb2NtYzIsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gdmFyIGRlZmF1bHQyID0ge31cbiAgICAgICAgICAgICAgICAgIC8vIGlmIChkb2NtYzIuZGF0YV90eXBlID09PSAnZHJvcGRvd24nIHx8IGRvY21jMi5kYXRhX3R5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgIC8vICAgICBkZWZhdWx0MiA9IEpTT04ucGFyc2UoZG9jbWMyLmRlZmF1bHQpXG4gICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bHNuXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvY21jMi5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jMi5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGByZ2JhKDIyOSwgMjMxLCAyMzUsMSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBgcmdiYSgyMjksIDIzMSwgMjM1LDEpYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0Lm9wc2kubWFwKChkb2MyLCBpZHgyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gZGlzYWJsZWQgdmFsdWU9e2lkeDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdC5vcHNpLm1hcCgoZG9jMywgaWR4MykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jM308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMyLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHJvdW5kZWQgYmctZ3JheS0xMDAgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jbWMyLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhck91dGxpbmVkPjwvQ2FsZW5kYXJPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIHctZnVsbCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYzIuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciB3LWZ1bGwgaC0xMCBweC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jMi5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICB7ZG9jLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgIHJlbmRlckNoaWxkUGFydE1vZGVsKGRvYy5tb2RlbF9wYXJ0cyl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgIH1cbiAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICApO1xuICB9O1xuXG4gIC8vMi51c2VTdGF0ZVxuICBjb25zdCBbbmV3ZGF0YSwgc2V0bmV3ZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgYXNzZXRfaWQ6IFwiXCIsXG4gICAgbmFtZTogXCJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IG51bGwsXG4gICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgIGlzX2NvbnN1bWFibGU6IGZhbHNlLFxuICAgIG1vZGVsX2NvbHVtbnM6IFtdLFxuICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICBhZGRfY29sdW1uczogW10sXG4gICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgIHVwZGF0ZV9jb2x1bW5zOiBbXSxcbiAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtuZXdkYXRhMiwgc2V0bmV3ZGF0YTJdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICBpc19jb25zdW1hYmxlOiBmYWxzZSxcbiAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICBtb2RlbF9wYXJ0czogW10sXG4gICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICB1cGRhdGVfY29sdW1uczogW10sXG4gICAgYWRkX21vZGVsczogW10sXG4gICAgZGVsZXRlX21vZGVsX2lkczogW10sXG4gIH0pO1xuICBjb25zdCBbZGVmYXVsdGRhdGEsIHNldGRlZmF1bHRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21hbnVmZGF0YSwgc2V0bWFudWZkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVsZGF0YSwgc2V0bW9kZWxkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YSwgc2V0ZmllbGRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2ZpZWxkZGF0YTIsIHNldGZpZWxkZGF0YTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZmllbGRkYXRhYSwgc2V0ZmllbGRkYXRhYV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmaWVsZGRhdGFhMiwgc2V0ZmllbGRkYXRhYTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9kZWxwYXJ0ZmllbGRkYXRhLCBzZXRtb2RlbHBhcnRmaWVsZGRhdGFdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbY3VycmVudGZpZWxkLCBzZXRjdXJyZW50ZmllbGRdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRmaWVsZDIsIHNldGN1cnJlbnRmaWVsZDJdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZGF0YV90eXBlOiBcIlwiLFxuICAgIGRlZmF1bHQ6IFwic2luZ2xlXCIsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgW2N1cnJlbnRpZG1vZGVsLCBzZXRjdXJyZW50aWRtb2RlbF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2FkZGVkZmllbGQsIHNldGFkZGVkZmllbGRdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZDEsIHNldGFkZGVkZmllbGQxXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2FkZGVkZmllbGQyLCBzZXRhZGRlZGZpZWxkMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkMywgc2V0YWRkZWRmaWVsZDNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeCwgc2V0YWRkZWRmaWVsZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlciwgc2V0YWRkZWRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWRkZWRmaWVsZGlkeDEsIHNldGFkZGVkZmllbGRpZHgxXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FkZGVkZmllbGR0cmlnZ2VyMSwgc2V0YWRkZWRmaWVsZHRyaWdnZXIxXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FkZGVkZmllbGRpZHgyLCBzZXRhZGRlZGZpZWxkaWR4Ml0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkdHJpZ2dlcjIsIHNldGFkZGVkZmllbGR0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthZGRlZGZpZWxkaWR4Mywgc2V0YWRkZWRmaWVsZGlkeDNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWRkZWRmaWVsZHRyaWdnZXIzLCBzZXRhZGRlZGZpZWxkdHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2NyZWF0ZSwgc2V0bG9hZGluZ2NyZWF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nY3JlYXRlbW9kZWwsIHNldGxvYWRpbmdjcmVhdGVtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nZ2V0bW9kZWwsIHNldGxvYWRpbmdnZXRtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nLCBzZXRwcmFsb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ3NwZWMsIHNldGxvYWRpbmdzcGVjXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdzcGVjMiwgc2V0bG9hZGluZ3NwZWMyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bjIsIHNldGN1cnJlbnRkcm9wZG93bjJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2N1cnJlbnRkcm9wZG93bm4yLCBzZXRjdXJyZW50ZHJvcGRvd25uMl0gPSB1c2VTdGF0ZShbXCJcIiwgXCJcIl0pO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bjIsIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY3VycmVudGNoZWNrZWRkcm9wZG93bm4yLCBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2YWx1ZWRyb3Bkb3dudHJpZ2dlciwgc2V0dmFsdWVkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIxLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWVkcm9wZG93bnRyaWdnZXIzLCBzZXR2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaWR4ZHJvcGRvd250cmlnZ2VyMSwgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtpZHhkcm9wZG93bnRyaWdnZXIyLCBzZXRpZHhkcm9wZG93bnRyaWdnZXIyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2lkeGRyb3Bkb3dudHJpZ2dlcjMsIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjNdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0ZmllbGR0cmlnZ2VyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIsIHNldGNvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbmNhdGFkZGNvbHVtbnNpZHgsIHNldGNvbmNhdGFkZGNvbHVtbnNpZHhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlLCBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3RyaWdnZXIxLCBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjFdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRhZGRjb2x1bW5zaWR4MSwgc2V0Y29uY2F0YWRkY29sdW1uc2lkeDFdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbY29uY2F0YWRkY29sdW1uc3ZhbHVlMSwgc2V0Y29uY2F0YWRkY29sdW1uc3ZhbHVlMV0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjb25jYXRmaWVsZHRyaWdnZXIyLCBzZXRjb25jYXRmaWVsZHRyaWdnZXIyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2VkaXRwYXJ0LCBzZXRlZGl0cGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RhbGNyZWF0ZW1vZGVsLCBzZXRtb2RhbGNyZWF0ZW1vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25ld2RhdGF0cmlnZ2VyLCBzZXRuZXdkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdkYXRhdHJpZ2dlcjIsIHNldG5ld2RhdGF0cmlnZ2VyMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RlbHRyaWdnZXIsIHNldG1vZGVsdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb25jYXRwYXJ0dHJpZ2dlciwgc2V0Y29uY2F0cGFydHRyaWdnZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29uY2F0cGFydHZhbHVlLCBzZXRjb25jYXRwYXJ0dmFsdWVdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYXNzZXR0eXBlY29kZSwgc2V0YXNzZXR0eXBlY29kZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2Fzc2V0dHlwZWNvZGUyLCBzZXRhc3NldHR5cGVjb2RlMl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RlZmF1bHRtb2RlbCwgc2V0ZGVmYXVsdG1vZGVsXSA9IHVzZVN0YXRlKHt9KTtcbiAgY29uc3QgW2Rpc2FibGVkdGFtYmFoLCBzZXRkaXNhYmxlZHRhbWJhaF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHRhbWJhaDIsIHNldGRpc2FibGVkdGFtYmFoMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZGZpZWxkLCBzZXRkaXNhYmxlZGFkZGZpZWxkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkYWRkZmllbGQyLCBzZXRkaXNhYmxlZGFkZGZpZWxkMl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwb2ludGV2ZW50LCBzZXRwb2ludGV2ZW50XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcG9pbnRldmVudDIsIHNldHBvaW50ZXZlbnQyXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY2QyLCBzZXRjZDJdID0gdXNlU3RhdGUoW1wiXCIsIFwiXCJdKTtcbiAgY29uc3QgW2NkaWR4LCBzZXRjZGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHRyaWdnZXIsIHNldGNkdHJpZ2dlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjZDJwYXJ0LCBzZXRjZDJwYXJ0XSA9IHVzZVN0YXRlKFtcIlwiLCBcIlwiXSk7XG4gIGNvbnN0IFtjZHBhcnRpZHgsIHNldGNkcGFydGlkeF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtjZHBhcnR0cmlnZ2VyLCBzZXRjZHBhcnR0cmlnZ2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NoYW5nZWFzc2V0LCBzZXRjaGFuZ2Vhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkZWZhdWx0YXNzZXQsIHNldGRlZmF1bHRhc3NldF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtmZXRjaGluZ3BhcnQsIHNldGZldGNoaW5ncGFydF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwYWdlLCBzZXRwYWdlXSA9IHVzZVN0YXRlKDEpO1xuICAvL2NyZWF0ZSBtYW51ZmFjdHVyZXJcbiAgY29uc3QgW21vZGFsbWFudWYsIHNldG1vZGFsbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ21hbnVmLCBzZXRsb2FkaW5nbWFudWZdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRtYW51Ziwgc2V0ZGlzYWJsZWRtYW51Zl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3RyaWdnZXJtYW51Ziwgc2V0dHJpZ2dlcm1hbnVmXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RhdGFtYW51Ziwgc2V0ZGF0YW1hbnVmXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICB9KTtcblxuICAvLzMub25DaGFuZ2VcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkID0gKCkgPT4ge1xuICAgIHNldGZpZWxkZGF0YShbXG4gICAgICAuLi5maWVsZGRhdGEsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgICAgZGVmYXVsdDogXCJcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0YWRkZWRmaWVsZDEoWy4uLmFkZGVkZmllbGQxLCBmYWxzZV0pO1xuICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgfTtcbiAgY29uc3Qgb25DbGlja0FkZEZpZWxkMiA9ICgpID0+IHtcbiAgICBzZXRmaWVsZGRhdGFhMihbXG4gICAgICAuLi5maWVsZGRhdGFhMixcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGF0YV90eXBlOiBcIlwiLFxuICAgICAgICBkZWZhdWx0OiBcIlwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGRhdGFfdHlwZTogXCJcIixcbiAgICAgIGRlZmF1bHQ6IFwiXCIsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKFtdKTtcbiAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgc2V0cG9pbnRldmVudDIoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICB9O1xuICBjb25zdCBvbkNsaWNrU2VsZWN0QXNzZXQgPSAoaWQpID0+IHtcbiAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgc2V0bG9hZGluZ3NwZWModHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0YXNzZXRpZCA9IGRlZmF1bHRhc3NldC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmlkKTtcbiAgICAgICAgICBjb25zdCBuZXdhc3NldGZpZWxkZGF0YTIgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgIC5jb25jYXQodGVtcCk7XG4gICAgICAgICAgY29uc3QgbmV3ZmllbGRtYXAgPSBuZXdkYXRhLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGRvY25ld2ZpZWxkKSA9PiB0eXBlb2YgZG9jbmV3ZmllbGQuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHZhciB0ZW1wbyA9IHByZXY7XG4gICAgICAgICAgICB0ZW1wbyA9IHRlbXBvXG4gICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbHRlcikgPT4gZGVmYXVsdGFzc2V0aWQuaW5jbHVkZXMoZG9jZmlsdGVyLmlkKSlcbiAgICAgICAgICAgICAgLmNvbmNhdCh0ZW1wKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVmYXVsdG1vZGVsLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3YXNzZXRmaWVsZGRhdGEyLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICBhZGRfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IHJlczIuZGF0YS5yZXF1aXJlZF9zbixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRkZWZhdWx0ZGF0YSh7XG4gICAgICAgICAgICAuLi5kZWZhdWx0ZGF0YSxcbiAgICAgICAgICAgIGlkOiBkZWZhdWx0bW9kZWwuaWQsXG4gICAgICAgICAgICBuYW1lOiBkZWZhdWx0bW9kZWwubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZWZhdWx0bW9kZWwuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXJfaWQ6IGRlZmF1bHRtb2RlbC5tYW51ZmFjdHVyZXJfaWQsXG4gICAgICAgICAgICBjb3VudDogZGVmYXVsdG1vZGVsLmNvdW50LFxuICAgICAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICAgICAgaWQ6IHJlczIuZGF0YS5pZCxcbiAgICAgICAgICAgICAgbmFtZTogcmVzMi5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGNvZGU6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzMi5kYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjoge1xuICAgICAgICAgICAgICBpZDogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5pZCxcbiAgICAgICAgICAgICAgbmFtZTogZGVmYXVsdG1vZGVsLm1hbnVmYWN0dXJlci5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiBOdW1iZXIoaWQpLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogZGVmYXVsdGFzc2V0LFxuICAgICAgICAgICAgYWRkX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgICAgZGVsZXRlX2NvbHVtbl9pZHM6IFtdLFxuICAgICAgICAgICAgYWRkX21vZGVsczogW10sXG4gICAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiByZXMyLmRhdGEucmVxdWlyZWRfc24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3YXNzZXRmaWVsZGRhdGEyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0Y2hhbmdlYXNzZXQodGVtcCk7XG4gICAgICAgICAgc2V0YWRkZWRmaWVsZChhcnIpO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJpbmZvXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQW5kYSBUZWxhaCBNZW5ndWJhaCBBc3NldCBUeXBlXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgXCJIYWwgaW5pIG1lbWJ1YXQgZmllbGQgZGFyaSBhc3NldCB0eXBlIHRlcmthaXQgdGVyYmVudHVrIGRpIGZvcm0gaW5pIVwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIC8vIHNldGZpZWxkZGF0YTIodGVtcClcbiAgICAgICAgICBjb25zdCBuZXdmaWVsZG1hcCA9IG5ld2RhdGEubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YSh7XG4gICAgICAgICAgICAuLi5uZXdkYXRhLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogbmV3ZGF0YS5tb2RlbF9jb2x1bW5zLmNvbmNhdChuZXdmaWVsZG1hcCksXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogZmFsc2UsXG4gICAgICAgICAgICBhc3NldF9pZDogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRsb2FkaW5nc3BlYyhmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IG9uQ2xpY2tTZWxlY3RBc3NldDIgPSAoaWQpID0+IHtcbiAgICBzZXRsb2FkaW5nc3BlYzIodHJ1ZSk7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgYXNzZXRfaWQ6IE51bWJlcihpZCkgfSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0P2lkPSR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wID0gW107XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0ZW1wID0gcmVzMi5kYXRhLmFzc2V0X2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5wYXJzZShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgYm9vbCA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm9vbC5wdXNoKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRhZGRlZGZpZWxkMyhib29sKTtcbiAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICAgICAgICByZXF1aXJlZF9zbjogcmVzMi5kYXRhLnJlcXVpcmVkX3NuLFxuICAgICAgICAgICAgYXNzZXRfaWQ6IHJlczIuZGF0YS5jb2RlLFxuICAgICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcC5jb25jYXQobmV3ZmllbGRtYXApLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGFzc2V0dHlwZWNvZGUyKHJlczIuZGF0YS5pZCk7XG4gICAgICAgICAgLy8gc2V0bmV3ZGF0YXRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgc2V0bG9hZGluZ3NwZWMyKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgIGNvbnN0IG5ld2ZpZWxkbWFwID0gbmV3ZGF0YTIubW9kZWxfY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZG9jbmV3ZmllbGQpID0+IHR5cGVvZiBkb2NuZXdmaWVsZC5pZCA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0ZmllbGRkYXRhYSh0ZW1wKTtcbiAgICAgICAgICBzZXRuZXdkYXRhMih7XG4gICAgICAgICAgICAuLi5uZXdkYXRhMixcbiAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAuY29uY2F0KG5ld2ZpZWxkbWFwKSxcbiAgICAgICAgICAgIHJlcXVpcmVkX3NuOiBmYWxzZSxcbiAgICAgICAgICAgIGFzc2V0X2lkOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGxvYWRpbmdzcGVjMihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vNC5oYW5kbGVcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWwgPSAoKSA9PiB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG5ld2RhdGEpIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICB0W3Byb3BdID0gbmV3ZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJ1cGRhdGVfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnN0cmluZ2lmeShkb2MuZGVmYXVsdCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBcImFkZF9jb2x1bW5zXCIpIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF0ubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHwgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04uc3RyaW5naWZ5KGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IFwiYXNzZXRfaWRcIikge1xuICAgICAgICB0W3Byb3BdID0gTnVtYmVyKGFzc2V0dHlwZWNvZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGFbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICAgIHNldGxvYWRpbmdjcmVhdGUodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L3VwZGF0ZU1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2NyZWF0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl1YmFoXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgcnQucHVzaChgL2FkbWluL21vZGVscy9kZXRhaWwvJHttb2RlbGlkfWApO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsID0gKCkgPT4ge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBuZXdkYXRhMikge1xuICAgICAgaWYgKHByb3AgPT09IFwibW9kZWxfY29sdW1uc1wiKSB7XG4gICAgICAgIHRbcHJvcF0gPSBuZXdkYXRhMltwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fCBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgZGVmYXVsdDogSlNPTi5zdHJpbmdpZnkoZG9jLmRlZmF1bHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uZG9jIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gXCJhc3NldF9pZFwiKSBbKHRbcHJvcF0gPSBOdW1iZXIoYXNzZXR0eXBlY29kZTIpKV07XG4gICAgICBlbHNlIHtcbiAgICAgICAgdFtwcm9wXSA9IG5ld2RhdGEyW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXRsb2FkaW5nY3JlYXRlbW9kZWwodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1vZGVsYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTW9kZWwgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG5ld2RhdGEyKHtcbiAgICAgICAgICAgIGFzc2V0X2lkOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgICAgICAgICAgcmVxdWlyZWRfc246IGZhbHNlLFxuICAgICAgICAgICAgaXNfY29uc3VtYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBbXSxcbiAgICAgICAgICAgIG1vZGVsX3BhcnRzOiBbXSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGNyZWF0ZW1vZGVsKGZhbHNlKTtcbiAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgc2V0bW9kZWx0cmlnZ2VyKHJlczIuaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUFkZE1hbnVmYWN0dXJlciA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nbWFudWYodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2FkZE1hbnVmYWN0dXJlcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YW1hbnVmKSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdtYW51ZihmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1hbnVmYWN0dXJlciBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YW1hbnVmKHtcbiAgICAgICAgICAgIC4uLmRhdGFtYW51ZixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMyKTtcblxuICAgICAgICAgIHNldHRyaWdnZXJtYW51ZigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy81LnVzZUVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBc3NldHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0YXNzZXRkYXRhKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNYW51ZmFjdHVyZXJzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXMyLmRhdGE7XG5cbiAgICAgICAgc2V0bWFudWZkYXRhKGRhdGEpO1xuXG4gICAgICAgIC8qKiBTZXQgbmV3IGluc2VydGVkIG1hbnVmYWN0dXJlciBhcyBkZWZhdWx0IHNlbGVjdGVkIG9wdGlvbiBpbiB0aGUgXCJNYW51ZmFjdHVyZXJcIiBkcm9wZG93biAqL1xuICAgICAgICBpZiAodHJpZ2dlcm1hbnVmID4gLTEpIHtcbiAgICAgICAgICBjb25zdCBsYXRlc3RJbnNlcnRlZE1hbnVmYWN0dXJlciA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgICBjb25zdCBuZXdNYW51ZmFjdHVyZXJJZCA9IGxhdGVzdEluc2VydGVkTWFudWZhY3R1cmVyLmlkO1xuXG4gICAgICAgICAgLyoqIEZvcm0gY29udHJvbCB2YWx1ZSAqL1xuICAgICAgICAgIGluc3RhbmNlRm9ybS5zZXRGaWVsZHNWYWx1ZSh7IG1hbnVmYWN0dXJlcl9pZDogbmV3TWFudWZhY3R1cmVySWQgfSk7XG4gICAgICAgICAgc2V0bmV3ZGF0YShwcmV2ID0+ICh7Li4ucHJldiwgbWFudWZhY3R1cmVyX2lkOiBuZXdNYW51ZmFjdHVyZXJJZCB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9LCBbdHJpZ2dlcm1hbnVmXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7bW9kZWxpZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHJlczIuZGF0YS5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8IGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0ID09PSBcIlwiIHx8IGRvYy5kZWZhdWx0ID09PSBcIi1cIlxuICAgICAgICAgICAgICAgICAgPyBkb2MuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9tb2RlbF9wYXJ0c1xuICAgICAgICBjb25zdCByZWN1cnNpdmVQYXJ0TW9kZWwgPSAoaXRlbSkgPT4ge1xuICAgICAgICAgIHZhciB0ZW1wMTEgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZW1wMSA9IHt9O1xuICAgICAgICAgICAgdGVtcDEgPSBpdGVtW2ldLm1vZGVsX2NvbHVtbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdCA9PT0gXCJcIiB8fCBkb2MuZGVmYXVsdCA9PT0gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZW1wMTEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW1baV0sXG4gICAgICAgICAgICAgIG1vZGVsX2NvbHVtbnM6IHRlbXAxLFxuICAgICAgICAgICAgICBtb2RlbF9wYXJ0czpcbiAgICAgICAgICAgICAgICBpdGVtW2ldLm1vZGVsX3BhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gcmVjdXJzaXZlUGFydE1vZGVsKGl0ZW1baV0ubW9kZWxfcGFydHMpXG4gICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0ZW1wMTE7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHlvID0gcmVjdXJzaXZlUGFydE1vZGVsKHJlczIuZGF0YS5tb2RlbF9wYXJ0cyk7XG4gICAgICAgIGNvbnN0IHRlbXAyID0ge1xuICAgICAgICAgIC4uLnJlczIuZGF0YSxcbiAgICAgICAgICBhc3NldF9pZDogcmVzMi5kYXRhLmFzc2V0LmNvZGUsXG4gICAgICAgICAgbW9kZWxfY29sdW1uczogdGVtcCxcbiAgICAgICAgICBhZGRfY29sdW1uczogW10sXG4gICAgICAgICAgdXBkYXRlX2NvbHVtbnM6IFtdLFxuICAgICAgICAgIGRlbGV0ZV9jb2x1bW5faWRzOiBbXSxcbiAgICAgICAgICBhZGRfbW9kZWxzOiBbXSxcbiAgICAgICAgICBkZWxldGVfbW9kZWxfaWRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgc2V0bmV3ZGF0YSh0ZW1wMik7XG4gICAgICAgIHNldGRlZmF1bHRkYXRhKHRlbXAyKTtcbiAgICAgICAgc2V0ZGVmYXVsdGFzc2V0KHRlbXApO1xuICAgICAgICBzZXRkZWZhdWx0bW9kZWwodGVtcDIpO1xuICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICBzZXRtb2RlbHBhcnRmaWVsZGRhdGEoeW8pO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzMi5kYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRhZGRlZGZpZWxkKGFycik7XG4gICAgICAgIHNldGFzc2V0dHlwZWNvZGUocmVzMi5kYXRhLmFzc2V0X2lkKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bW9kZWxkYXRhKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwobW9kZWx0cmlnZ2VyKTtcbiAgICAgICAgbW9kZWx0cmlnZ2VyICE9PSBmYWxzZSA/IHNldGVkaXRwYXJ0KHRydWUpIDogbnVsbDtcbiAgICAgIH0pO1xuICB9LCBbbW9kZWx0cmlnZ2VyXSk7XG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCB1dGFtYSB5YW5nIGZpZWxkIGFzc2V0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlkeGRyb3Bkb3dudHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcl0pO1xuICAvL2NoZWNrYm94IGRyb3Bkb3duIGRhcmkgbW9kZWwgdXRhbWEgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMSAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgLy8gdGVtcFtpZHhkcm9wZG93bnRyaWdnZXJdW1wiZGVmYXVsdFwiXSA9IGAke3ZhbHVlZHJvcGRvd250cmlnZ2VyfWBcbiAgICAgICAgdGVtcFtpZHhkcm9wZG93bnRyaWdnZXIxXVtcImRlZmF1bHRcIl0gPSB7XG4gICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjFdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRuZXdkYXRhKHtcbiAgICAgIC4uLm5ld2RhdGEsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGEyLmNvbmNhdChmaWVsZGRhdGEpLFxuICAgIH0pO1xuICB9LCBbY29uY2F0ZmllbGR0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHggIT09IC0xKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZWFzc2V0LnNvbWUoXG4gICAgICAgICAgKGRvY3NvbWUpID0+IGRvY3NvbWUuaWQgPT09IGNvbmNhdGFkZGNvbHVtbnN2YWx1ZS5pZFxuICAgICAgICApIHx8XG4gICAgICAgIHR5cGVvZiBjb25jYXRhZGRjb2x1bW5zdmFsdWUuaWQgPT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICAvLyBpZiAoKGZpZWxkZGF0YTIubGVuZ3RoIC0gZGVmYXVsdGRhdGEubW9kZWxfY29sdW1ucy5sZW5ndGgpID49IG5ld2RhdGEuYWRkX2NvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdkYXRhLmFkZF9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQpID0+IGRvY2FkZC5uYW1lKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLm5hbWUpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAuYWRkX2NvbHVtbnMucHVzaChmaWVsZGRhdGEyW2ZpZWxkZGF0YTIubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YTJbY29uY2F0YWRkY29sdW1uc2lkeF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbmNhdGFkZGNvbHVtbnNpZHgxICE9PSAtMSkge1xuICAgICAgaWYgKFxuICAgICAgICBjb25jYXRhZGRjb2x1bW5zaWR4MSA+IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMubGVuZ3RoIC0gMSB8fFxuICAgICAgICB0eXBlb2YgY29uY2F0YWRkY29sdW1uc3ZhbHVlMS5pZCA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICBjaGFuZ2Vhc3NldCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIC8vIGlmICgoZmllbGRkYXRhMi5sZW5ndGggLSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLmxlbmd0aCkgPj0gbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZCkgPT4gZG9jYWRkLm5hbWUpXG4gICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50ZmllbGQubmFtZSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtmaWVsZGRhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgdGVtcC5hZGRfY29sdW1ucy5wdXNoKGN1cnJlbnRmaWVsZCk7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGlkeGFkZGNvbHVtbiA9IG5ld2RhdGEuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgIC5tYXAoKGRvY2FkZDIpID0+IGRvY2FkZDIubmFtZSlcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRmaWVsZC5uYW1lKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdkYXRhLmFzc2V0X2NvbHVtbnMubGVuZ3RoK1wiOlwiK2NvbmNhdGFkZGNvbHVtbnNpZHgrXCI7XCIrbmV3ZGF0YS5hZGRfY29sdW1ucy5sZW5ndGgpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudGZpZWxkLm5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YV90eXBlOiBjdXJyZW50ZmllbGQuZGF0YV90eXBlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBjdXJyZW50ZmllbGQucmVxdWlyZWQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICB0ZW1wLmFkZF9jb2x1bW5zW2lkeGFkZGNvbHVtbl0gPSBjdXJyZW50ZmllbGQ7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyW2NvbmNhdGFkZGNvbHVtbnNpZHhdKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3ZGF0YS51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgLm1hcCgoZG9jdXApID0+IGRvY3VwLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1ucy5wdXNoKGZpZWxkZGF0YVtjb25jYXRhZGRjb2x1bW5zaWR4MV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWR4dXBjb2x1bW4gPSBuZXdkYXRhLnVwZGF0ZV9jb2x1bW5zXG4gICAgICAgICAgICAubWFwKChkb2NhZGQyKSA9PiBkb2NhZGQyLmlkKVxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGZpZWxkLmlkKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50ZmllbGQuaWQsXG4gICAgICAgICAgICAgICAgbW9kZWxfaWQ6IGN1cnJlbnRmaWVsZC5tb2RlbF9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50ZmllbGQubmFtZSxcbiAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogY3VycmVudGNoZWNrZWRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGN1cnJlbnRmaWVsZC5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgIHRlbXAudXBkYXRlX2NvbHVtbnNbaWR4dXBjb2x1bW5dID0gY3VycmVudGZpZWxkO1xuICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmNhdGFkZGNvbHVtbnN0cmlnZ2VyMV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhZGRlZGZpZWxkaWR4ICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBwcmV2W2FkZGVkZmllbGRpZHhdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWRkZWRmaWVsZGlkeDEgIT09IC0xKSB7XG4gICAgICBzZXRhZGRlZGZpZWxkMSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldlthZGRlZGZpZWxkaWR4MV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcHJldlthZGRlZGZpZWxkaWR4MV0gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2W2FkZGVkZmllbGRpZHgxXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRlbXAyID0gWy4uLnByZXYsIHRydWVdO1xuICAgICAgICAgIHJldHVybiB0ZW1wMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWRkZWRmaWVsZHRyaWdnZXIxXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgzICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDMoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDNdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDNdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4M10gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyM10pO1xuXG4gIC8vY2hlY2tib3ggZHJvcGRvd24gZGFyaSBtb2RlbCBiYXJ1IHlhbmcgZmllbGQgYXNzZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMyAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgIC8vIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyXVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZWRyb3Bkb3dudHJpZ2dlcn1gXG4gICAgICAgIHRlbXBbaWR4ZHJvcGRvd250cmlnZ2VyM11bXCJkZWZhdWx0XCJdID0ge1xuICAgICAgICAgIGRlZmF1bHQ6IGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMixcbiAgICAgICAgICBvcHNpOiBjdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFt2YWx1ZWRyb3Bkb3dudHJpZ2dlcjNdKTtcbiAgLy9jaGVja2JveCBkcm9wZG93biBkYXJpIG1vZGVsIGJhcnUgeWFuZyBmaWVsZCBidWF0IHNlbmRpcmlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWR4ZHJvcGRvd250cmlnZ2VyMiAhPT0gLTEpIHtcbiAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICB0ZW1wW2lkeGRyb3Bkb3dudHJpZ2dlcjJdW1wiZGVmYXVsdFwiXSA9IHtcbiAgICAgICAgICBkZWZhdWx0OiBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIsXG4gICAgICAgICAgb3BzaTogY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbdmFsdWVkcm9wZG93bnRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoe1xuICAgICAgLi4ubmV3ZGF0YTIsXG4gICAgICBtb2RlbF9jb2x1bW5zOiBmaWVsZGRhdGFhLmNvbmNhdChmaWVsZGRhdGFhMiksXG4gICAgfSk7XG4gIH0sIFtjb25jYXRmaWVsZHRyaWdnZXIyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFkZGVkZmllbGRpZHgyICE9PSAtMSkge1xuICAgICAgc2V0YWRkZWRmaWVsZDIoKHByZXYpID0+IHtcbiAgICAgICAgaWYgKHByZXZbYWRkZWRmaWVsZGlkeDJdID09PSBmYWxzZSkge1xuICAgICAgICAgIHByZXZbYWRkZWRmaWVsZGlkeDJdID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJldlthZGRlZGZpZWxkaWR4Ml0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wMiA9IFsuLi5wcmV2LCB0cnVlXTtcbiAgICAgICAgICByZXR1cm4gdGVtcDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FkZGVkZmllbGR0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX2NvbHVtbnM6IGZpZWxkZGF0YSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgbW9kZWxfY29sdW1uczogZmllbGRkYXRhYSB9KTtcbiAgfSwgW25ld2RhdGF0cmlnZ2VyMl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHRlbXAgPSBbXTtcbiAgICBpZiAoY29uY2F0cGFydHZhbHVlICE9PSAtMSkge1xuICAgICAgaWYgKGNvbmNhdHBhcnR2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1vZGVsX3BhcnRzOiBbXSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmNhdHBhcnR2YWx1ZS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgdmFyIGlkeHRlbXAgPSB0ZW1wLm1hcCgoZG9jKSA9PiBkb2MuaWQpLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICBpZiAoaWR4dGVtcCAhPT0gLTEgJiYgdGVtcFtpZHh0ZW1wXVtcImlkXCJdID09PSBkb2MuaWQpIHtcbiAgICAgICAgICAgIHZhciBpZHhvZiA9IHRlbXAubWFwKChkb2MpID0+IGRvYy5pZCkuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgdGVtcFtpZHhvZl0gPSB7XG4gICAgICAgICAgICAgIC4uLnRlbXBbaWR4b2ZdLFxuICAgICAgICAgICAgICBxdWFudGl0eTogdGVtcFtpZHhvZl0ucXVhbnRpdHkgKyBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaWR4dGVtcCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRlbXAucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBkb2MucXVhbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgYWRkX21vZGVsczogdGVtcCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25jYXRwYXJ0dHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjZGlkeCAhPT0gLTEpIHtcbiAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMi5maWx0ZXIoKGRvYzEwLCBpZHgxMCkgPT4gaWR4MTAgIT09IGNkaWR4KTtcbiAgICAgIH0pO1xuICAgICAgc2V0Y2QyKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RpZHgpKTtcbiAgICB9XG4gIH0sIFtjZHRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2RwYXJ0aWR4ICE9PSAtMSkge1xuICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoKHByZXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGNkMnBhcnQuZmlsdGVyKChkb2MxMCwgaWR4MTApID0+IGlkeDEwICE9PSBjZHBhcnRpZHgpO1xuICAgICAgfSk7XG4gICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiBwcmV2LmZpbHRlcigoZG9jMTEsIGlkeDExKSA9PiBpZHgxMSAhPT0gY2RwYXJ0aWR4KSk7XG4gICAgfVxuICB9LCBbY2RwYXJ0dHJpZ2dlcl0pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgc2lkZW1lbnU9e3NpZGVtZW51fVxuICAgICAgZGF0YVByb2ZpbGU9e2RhdGFQcm9maWxlfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC0yIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTJcIj5cbiAgICAgICAgICAgICAgICBGb3JtIFViYWggTW9kZWwgLSB7bmV3ZGF0YS5uYW1lfVxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9hZG1pbi9tb2RlbHMvZGV0YWlsLyR7bW9kZWxpZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrPXsoKSA9PiB7IGNvbnNvbGUubG9nKG5ld2RhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEpOyBjb25zb2xlLmxvZyhmaWVsZGRhdGEyKTsgY29uc29sZS5sb2coZGVmYXVsdGRhdGEpOyBjb25zb2xlLmxvZyhkZWZhdWx0YXNzZXQpIH19Ki8gdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjcmVhdGV9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2luc3RhbmNlRm9ybS5zdWJtaXR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+SW5mb3JtYXNpIE1vZGVsPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgIDxTcGluPjwvU3Bpbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxGb3JtXG4gICAgICAgICAgICAgICAgZm9ybT17aW5zdGFuY2VGb3JtfVxuICAgICAgICAgICAgICAgIGxheW91dD1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWx9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bmV3ZGF0YX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFzc2V0X2lkXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgVHlwZSB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZEFsbFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0QXNzZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiTmFtYSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHsgLi4ubmV3ZGF0YSwgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCIgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIE1hbnVmYWN0dXJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIGtleT17aWR4fSB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXggcHQtMiBteS1hdXRvIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG1hbnVmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UGx1c1NxdWFyZVR3b1RvbmUgc3R5bGU9e3sgZm9udFNpemU6IGAxLjVyZW1gIH19IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtIG5hbWU9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwiRGVza3JpcHNpXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIGRlc2NyaXB0aW9uOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSh7IC4uLm5ld2RhdGEsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLnJlcXVpcmVkX3NufVxuICAgICAgICAgICAgICAgICAgLz57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19jb25zdW1hYmxlOiBlLnRhcmdldC5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdkYXRhLmlzX2NvbnN1bWFibGV9XG4gICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgIE1vZGVsIENvbnN1bWFibGUgZGVuZ2FuIHNhdHVhbiBqdW1sYWhcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IG1iLTggZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+U3Blc2lmaWthc2kgTW9kZWw8L2gxPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtsb2FkaW5nc3BlYyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtmaWVsZGRhdGEyLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9PjwvRW1wdHk+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgZmllbGRkYXRhMi5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoZmllbGRkYXRhMltpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGRvYy5kZWZhdWx0LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0ubmFtZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGEyW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpZWxkZGF0YTJbaWR4XS5yZXF1aXJlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlNpbmdsZSBUZXh0Ym94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgYCBUZXh0YH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciB3LWZ1bGwgcGwtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdCA9PT0gaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgbWItMSB3LTMvMTIgcHktMSBwbC0zIGZsZXggaXRlbXMtY2VudGVyIGZsZXgtd3JhcCBteS1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQuZGVmYXVsdC5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRhdGFfdHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhZ3JhcGggVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbmdsZSBUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNpIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3duMi5tYXAoKGRvYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMiA9PT0gaWR4eFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3duMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFsuLi5jZDIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmluZGV4T2YoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkaWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3duMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd24yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoWy4uLmNkMiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaW5nbGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXttb21lbnQoZmllbGRkYXRhMltpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YTIoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5tb2RlbF9jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggIT09IGZpZWxkZGF0YS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnMuc29tZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2RlZikgPT4gZG9jZGVmLmlkID09PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9jb2x1bW5faWRzLnB1c2goZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4VXBkYXRlQ29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51cGRhdGVfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnVwZGF0ZV9jb2x1bW5zLnNwbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhVcGRhdGVDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IGRlZmF1bHRkYXRhLm1vZGVsX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHh0ZW1wID0gdGVtcC5hZGRfY29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY3RlbXApID0+IGRvY3RlbXAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHRlbXAgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZW1wLmFkZF9jb2x1bW5zLnNwbGljZShpZHh0ZW1wLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9EZWxldGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBmbGV4IGl0ZW1zLWNlbnRlciBtci00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZC5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRpZHhkcm9wZG93bnRyaWdnZXIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnNpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdmFsdWUoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGRpZHgoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2FkZGVkZmllbGQxW2lkeF0gPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3BvaW50ZXZlbnR9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQxXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZChmaWVsZGRhdGFbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDIoZG9jLmRlZmF1bHQub3BzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YVtpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRlZmF1bHQub3BzaS5zb21lKChkb2NvcHNpKSA9PiBkb2NvcHNpID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQoXCJwb2ludGVyLWV2ZW50cy1ub25lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhW2lkeF0ucmVxdWlyZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJqdWR1bEZpZWxkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTaW5nbGUgVGV4dGJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jLmRhdGFfdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIGAgVGV4dGB9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgdy1mdWxsIHBsLTMgcHktMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQgPT09IGlka1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0LmRlZmF1bHQuaW5kZXhPZihpZGspICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MuZGVmYXVsdH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLTIwXCI+e2RvYy5kZWZhdWx0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGR9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgU3Blc2lmaWthc2lcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOYW1hIFNwZXNpZmlrYXNpIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGlsaWggVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd24yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGhhbnlhIGRpcGlsaWggMSAoc2F0dSkgZGFyaSBiZWJlcmFwYSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7aWR4eCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2R0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bjIubWFwKChkb2MsIGlkeHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGNoZWNrZWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3duMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeHggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3duMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZC5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd24yKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMihbLi4uY2QyLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgVGFtYmFoIE9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZC5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17bW9tZW50KGZpZWxkZGF0YVtpZHhdLmRlZmF1bHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhMi5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NkZWYpID0+IGRvY2RlZi5pZCA9PT0gZG9jLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfY29sdW1uX2lkcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeHRlbXAgPSBkZWZhdWx0ZGF0YS5tb2RlbF9jb2x1bW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jdGVtcCkgPT4gZG9jdGVtcC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuc3BsaWNlKGlkeHRlbXAsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4dGVtcCA9IHRlbXAuYWRkX2NvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHh0ZW1wICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGVtcC5hZGRfY29sdW1ucy5zcGxpY2UoaWR4dGVtcCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQxKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHRhbWJhaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMSgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zaWR4MShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGFkZGNvbHVtbnN2YWx1ZTEoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRhZGRjb2x1bW5zdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGN1cnJlbnRmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGEodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZGlkeDEoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBtdC01XCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZH1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICsgVGFtYmFoIFNwZXNpZmlrYXNpIE1vZGVsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtuZXdkYXRhLmlzX2NvbnN1bWFibGUgPT09IGZhbHNlICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBtYi04IGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBweC01IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5Lb25maWd1cmFzaSBQYXJ0IE1vZGVsPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge21vZGVscGFydGZpZWxkZGF0YS5sZW5ndGggPT09IDAgPyBudWxsIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxDb2xsYXBzZSBhY2NvcmRpb24+XG4gICAgICAgICAgICAgICAgICB7bW9kZWxwYXJ0ZmllbGRkYXRhLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcGFuZWwke2lkeH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZG9jLm1vZGVsX2NoaWxkLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTJcIj57ZG9jLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCJNb2RlbCB0aWRhayBtZW1pbGlraSBwYXJ0IG1vZGVsIVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fT48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCItXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9wY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIE1vZGVsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5uYW1lID09PSBcIlwiID8gXCJpbmlcIiA6IGRvYy5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGRhcmkgTW9kZWwgUGFydCAke25ld2RhdGEubmFtZX0/YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRuZXdkYXRhKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHh0ZW1wID0gbW9kZWxwYXJ0ZmllbGRkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2N0ZW1wKSA9PiBkb2N0ZW1wLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0ZGF0YS5tb2RlbF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChkb2NwYXJ0cykgPT4gZG9jcGFydHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2MuaWQpID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeGRhdGEgPSB0ZW1wLmFkZF9tb2RlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jMikgPT4gZG9jMi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoZG9jLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wLmFkZF9tb2RlbHNbaWR4ZGF0YV0ucXVhbnRpdHkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuYWRkX21vZGVsc1tpZHhkYXRhXS5xdWFudGl0eSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLnNwbGljZShpZHhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGRhdGEubW9kZWxfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jcGFydHMpID0+IGRvY3BhcnRzLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jLmlkKSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4dGVtcCAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5kZWxldGVfbW9kZWxfaWRzLmluZGV4T2YoZG9jLmlkKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmRlbGV0ZV9tb2RlbF9pZHMucHVzaChkb2MuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmZpbHRlcigoXywgaWR4eCkgPT4gaWR4eCAhPT0gaWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJlZGAgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBc3NldCBUeXBle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxhc3NldHR5cGVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYmctZ3JheS0yMDAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIG15LWF1dG8gaC0xMiBweC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57ZG9jLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5tb2RlbF9jb2x1bW5zLm1hcCgoZG9jbWMsIGlkeG1jKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMubmFtZX17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxzblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlLnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBteS1hdXRvIHB4LTIgcHktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0Lm9wc2kubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jb3BzaSwgaWR4b3BzaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4b3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctd2hpdGUgYm9yZGVyIHctMy8xMiBmbGV4IGl0ZW1zLWNlbnRlciBteS1hdXRvIHB4LTIgcHktMSBtYi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4b3BzaSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NtYy5kZWZhdWx0LmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiBgMC41cmVtYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jb3BzaX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHQub3BzaS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NvcHNpLCBpZHhvcHNpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHhvcHNpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCB3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0byBweC0yIHB5LTEgbWItMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeG9wc2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jbWMuZGVmYXVsdC5kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogYDAuNXJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY29wc2l9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZ3JheS0xMDAgcm91bmRlZCBoLTEwIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY21jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjAgcm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2NtYy5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXIgYmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdy1mdWxsIGgtMTAgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbWMuZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubW9kZWxfcGFydHMubGVuZ3RoID09PSAwID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lIHN0eWxlPXt7IG1hcmdpblRvcDogYDFyZW1gIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyQ2hpbGRQYXJ0TW9kZWwoZG9jLm1vZGVsX3BhcnRzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qdWR1bGFzc2V0dHlwZTo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxzbjo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZWRpdHBhcnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbXktMyBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWQgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtNSB0ZXh0LWxnIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8Rm9ybSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e2N1cnJlbnRpZG1vZGVsfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTExLzEyIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIE1vZGVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBNb2RlbCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRpZG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ3BhcnQgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0TW9kZWxzP3Jvd3M9MTAmbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bW9kZWxkYXRhKFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRtb2RlbGRhdGEocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5ncGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBhdGF1IGNhcmkgbmFtYSBtb2R1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Qb3B1cFNjcm9sbD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsVG9wICsgZXZlbnQudGFyZ2V0Lm9mZnNldEhlaWdodCA9PT0gZXZlbnQudGFyZ2V0LnNjcm9sbEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2V0cGFnZShwcmV2ID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9wYWdlPSR7cGFnZX0mcm93cz0xMGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgLnRoZW4ocmVzMiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY3JvbGxUbygwLCBldmVudC50YXJnZXQuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXMyLmRhdGEudG8gPj0gcmVzMi5kYXRhLnRvdGFsID8gc2V0bW9kZWxkYXRhKFsuLi5tb2RlbGRhdGEsIHJlczIuZGF0YS5kYXRhXSkgOiBzZXRtb2RlbGRhdGEoWy4uLm1vZGVsZGF0YSwgcmVzMi5kYXRhLmRhdGEsIDxTcGluIHNpemU9XCJzbWFsbFwiIC8+XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlbGRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtkb2MuaWR9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBwdC0yIG15LWF1dG8gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBsdXNTcXVhcmVUd29Ub25lIHN0eWxlPXt7IGZvbnRTaXplOiBgMS41cmVtYCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXItNCBob3Zlcjp0ZXh0LXJlZC01MDAgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRpZG1vZGVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2dldG1vZGVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRlZGl0cGFydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGxvYWRpbmdnZXRtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVsP2lkPSR7Y3VycmVudGlkbW9kZWx9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscGFydGZpZWxkZGF0YSgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDEgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSBcIm1vZGVsX2NvbHVtbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX2NvbHVtbnNcIl0gPSByZXMyLmRhdGFbcHJvcF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBKU09OLnBhcnNlKGRvYy5kZWZhdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxwYXJ0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS5tb2RlbF9wYXJ0cy5tYXAoKGRvYzIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXAzID0gZG9jMi5tb2RlbF9jb2x1bW5zLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2MzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MzLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZG9jMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzMuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYzMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRvYzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9jb2x1bW5zOiBtYXAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcIm1vZGVsX3BhcnRzXCJdID0gbW9kZWxwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJpZFwiXSA9IHJlczIuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbXCJuYW1lXCJdID0gcmVzMi5kYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAxID0gWy4uLnRlbXAxLCB0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRjb25jYXRwYXJ0dmFsdWUocmVzMi5kYXRhLm1vZGVsX3BhcnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0Y29uY2F0cGFydHRyaWdnZXIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhkYXRhMiA9IHRlbXAuYWRkX21vZGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGRvYzMpID0+IGRvYzMuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudGlkbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5hZGRfbW9kZWxzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeGRhdGEyID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudGlkbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZHhkYXRhMiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmFkZF9tb2RlbHMubWFwKChkb2MxKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jMS5pZCA9PT0gY3VycmVudGlkbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jMS5xdWFudGl0eSA9IGRvYzEucXVhbnRpdHkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRsb2FkaW5nZ2V0bW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGlkbW9kZWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtNVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldGVkaXRwYXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICArIFRhbWJhaCBQYXJ0IE1vZGVsXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTW9kZWw8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjcmVhdGVtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGRmaWVsZDJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aW5zdGFuY2VGb3JtMi5zdWJtaXR9XG4gICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NyZWF0ZW1vZGVsfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjcmVhdGVtb2RlbH1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY3JlYXRlbW9kZWwoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICB3aWR0aD17OTAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNoYWRvdy1tZCBib3JkZXIgcC04IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBtYi04XCI+XG4gICAgICAgICAgPEZvcm1cbiAgICAgICAgICAgIGZvcm09e2luc3RhbmNlRm9ybTJ9XG4gICAgICAgICAgICBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBvbkZpbmlzaD17aGFuZGxlQ3JlYXRlTW9kZWxpbk1vZGVsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJhc3NldF9pZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBc3NldCBUeXBlIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgICB0cmVlRGF0YT17YXNzZXRkYXRhfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBBc3NldCBUeXBlXCJcbiAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tTZWxlY3RBc3NldDIoXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdEFzc2V0MigwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgTW9kZWxcIlxuICAgICAgICAgICAgICAgIHJ1bGVzPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5hbWEgTW9kZWwgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW51ZmFjdHVyZXIgd2FqaWIgZGlpc2lcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIG1hbnVmYWN0dXJlcl9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBuYW1lPVwibWFudWZhY3R1cmVyX2lkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttYW51ZmRhdGEubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCJEZXNrcmlwc2lcIj5cbiAgICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0bmV3ZGF0YTIoeyAuLi5uZXdkYXRhMiwgZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKHsgLi4ubmV3ZGF0YTIsIHJlcXVpcmVkX3NuOiBlLnRhcmdldC5jaGVja2VkIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3ZGF0YTIucmVxdWlyZWRfc259XG4gICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICBTZXJpYWwgTnVtYmVyIHdhamliIGFkYVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IHB4LTUgbWItOCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5TcGVzaWZpa2FzaSBNb2RlbDwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdzcGVjMiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj4gOiBudWxsfSA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj4oe2RvYy5kYXRhX3R5cGUgPT09IFwic2luZ2xlXCIgPyBcIlNpbmdsZSBUZXh0Ym94XCIgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX0pPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkcm9wZG93blwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkRlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2kgZGliYXdhaCBpbmk8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2NjLCBpZHh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB3LTcgZmxleCBqdXN0aWZ5LWNlbnRlciBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXSA9IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBkZWZhdWx0VmFsdWU9e2RvY2N9IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke2lkeHggKyAxfWB9IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlciBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX0gcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBgJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtkb2MubmFtZX1gfSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIocHJldiA9PiAhcHJldilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2hlY2tib3hcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5EZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpIGRpYmF3YWggaW5pPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9jYywgaWR4eCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fSBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF1bXCJkZWZhdWx0XCJdW1wiZGVmYXVsdFwiXS5wdXNoKGlkeHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IHtkb2NjfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInN0cmluZ1wiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdW1wiZGVmYXVsdFwiXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaW5nbGVcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2RvYy5uYW1lfWB9IG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMihwcmV2ID0+ICFwcmV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhdGVQaWNrZXIgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7ZG9jLm5hbWV9YH0gb25DaGFuZ2U9eyh2YWx1ZSwgZGF0ZVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmllbGRkYXRhYShwcmV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XVtcImRlZmF1bHRcIl0gPSBkYXRlU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjb25jYXRmaWVsZHRyaWdnZXIyKHByZXYgPT4gIXByZXYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgIHtsb2FkaW5nc3BlYzIgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZmllbGRkYXRhYS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHthZGRlZGZpZWxkM1tpZHhdID09PSB0cnVlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwb2ludGV2ZW50Mn0gc2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kIGN1cnNvci1wb2ludGVyYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IFsuLi5hZGRlZGZpZWxkM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0YWRkZWRmaWVsZDModGVtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYVtpZHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYVtpZHhdLmRhdGFfdHlwZSAhPT0gXCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkZGF0YWFbaWR4XS5uYW1lICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhW2lkeF0uZGF0YV90eXBlICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRhZGRmaWVsZDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwicG9pbnRlci1ldmVudHMtbm9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmllbGRkYXRhYVtpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImp1ZHVsRmllbGRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInNpbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkb2MuZGF0YV90eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZS5zbGljZSgxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGVmYXVsdC5vcHNpLm1hcCgoZG9rLCBpZGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2t9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kZWZhdWx0Lm9wc2kubWFwKChkb2ssIGlkaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aWRrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIG1iLTEgdy0zLzEyIHB5LTEgcGwtMyBmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LXdyYXAgbXktYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2Rva308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB3LWZ1bGwgcHgtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJPdXRsaW5lZD48L0NhbGVuZGFyT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMjBcIj57ZG9jLmRlZmF1bHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmp1ZHVsRmllbGQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaGFkb3ctbWQgYm9yZGVyIHAtOCBteC0zIG1kOm14LTggbWItNSBmbGV4IGZsZXgtY29sIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtIGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17Y3VycmVudGZpZWxkMn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk5hbWEgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwiVGlwZSBGaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaXBlIEZpZWxkIHdhamliIGRpaXNpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQaWxpaCBUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImRyb3Bkb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkcm9wZG93blwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcIm51bWJlclwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJwYXJhZ3JhcGhcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJjaGVja2JveFwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcInNpbmdsZVwifT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtcImRhdGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT1cImRlZmF1bHRcIiBsYWJlbD1cIkRlZmF1bHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzaSBkaWJhd2FoIGluaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIgPT09IGlkeHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMC8xMiBtci01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZG9jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gb3BzaSBrZS0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeHhdID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID09PSBcIlwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIubmFtZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMS8xMiBmbGV4IGp1c3RpZnktYXJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnR0cmlnZ2VyKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0aWR4KGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJkYW5nZXJcIj4tPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGRyb3Bkb3dubjIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoWy4uLmNkMnBhcnQsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFRhbWJhaCBPcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2JveFwiID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0IGRhcGF0IGRpcGlsaWggbGViaWggZGFyaSAxIChzYXR1KSBvcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRkcm9wZG93bm4yLm1hcCgoZG9jLCBpZHh4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIuaW5jbHVkZXMoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuaW5kZXhPZihpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRkcm9wZG93bm4yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFsuLi5jZDJwYXJ0LCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAzMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYCR7dmFsdWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0TnVtYmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYVtpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2luZ2xlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGVcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWFbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDMwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtdC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvcGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBmaWVsZCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MubmFtZSA9PT0gXCJcIiA/IFwiaW5pXCIgOiBkb2MubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuZmlsdGVyKChfLCBpZHh4KSA9PiBpZHh4ICE9PSBpZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAubW9kZWxfY29sdW1ucyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jeHgsIGlkeHgpID0+IGRvY3h4LmlkICE9PSBkb2MuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG1yLTQgaG92ZXI6dGV4dC1yZWQtNTAwIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgMS4yNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGVsZXRlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcGNvbmZpcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmxleCBpdGVtcy1jZW50ZXIgbXItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRmaWVsZDIucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR0YW1iYWgyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aWR4ZHJvcGRvd250cmlnZ2VyMyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMygocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaWVsZGRhdGFhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBjdXJyZW50ZmllbGQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MyhpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkdHJpZ2dlcjMoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y29uY2F0ZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvaW50ZXZlbnQyKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYW1iYWhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZmllbGRkYXRhYTIubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICB7YWRkZWRmaWVsZDJbaWR4XSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cG9pbnRldmVudDJ9IHNoYWRvdy1tZCBib3JkZXIgcC04IG14LTMgbWQ6bXgtOCBtYi01IGZsZXggZmxleC1jb2wgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlcmB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gWy4uLmFkZGVkZmllbGQyXTtcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wW2lkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGQyKHRlbXApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoZmllbGRkYXRhYTJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKGRvYy5kZWZhdWx0Lm9wc2kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChkb2MuZGVmYXVsdC5vcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihkb2MuZGVmYXVsdC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZGRhdGFhMltpZHhdLm5hbWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRkYXRhYTJbaWR4XS5kYXRhX3R5cGUgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kZWZhdWx0Lm9wc2kuc29tZSgoZG9jb3BzaSkgPT4gZG9jb3BzaSA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcInBvaW50ZXItZXZlbnRzLW5vbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2RvYy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHtmaWVsZGRhdGFhMltpZHhdLnJlcXVpcmVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwianVkdWxGaWVsZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJzaW5nbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiU2luZ2xlIFRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvYy5kYXRhX3R5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJiBgIFRleHRgfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyIHctZnVsbCBwbC0zIHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgbXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRlZmF1bHQub3BzaS5tYXAoKGRvaywgaWRrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZGt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlciBtYi0xIHctMy8xMiBweS0xIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgZmxleC13cmFwIG15LWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9rfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdy1mdWxsIHB4LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLmRlZmF1bHR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyT3V0bGluZWQ+PC9DYWxlbmRhck91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuZGF0YV90eXBlID09PSBcInBhcmFncmFwaFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0yMFwiPntkb2MuZGVmYXVsdH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e2RvYy5kZWZhdWx0fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVkdWxGaWVsZDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2hhZG93LW1kIGJvcmRlciBwLTggbXgtMyBtZDpteC04IG1iLTUgZmxleCBmbGV4LWNvbCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXtjdXJyZW50ZmllbGQyfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybS5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJOYW1hIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTmFtYSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5kYXRhX3R5cGUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGRyb3Bkb3dubjIuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCJUaXBlIEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGlwZSBGaWVsZCB3YWppYiBkaWlzaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpbGloIFRpcGUgRmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZHJvcGRvd25uMi5ldmVyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NhLCBpZHhhKSA9PiBkb2NhICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJkcm9wZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGRyb3Bkb3dubjIoW1wiXCIsIFwiXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXCJcIiwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZDJwYXJ0KFtcIlwiLCBcIlwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiZHJvcGRvd25cIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJudW1iZXJcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wicGFyYWdyYXBoXCJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYWdyYXBoIFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e1wiY2hlY2tib3hcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJzaW5nbGVcIn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW5nbGUgVGV4dGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17XCJkYXRlXCJ9PkRhdGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPVwiZGVmYXVsdFwiIGxhYmVsPVwiRGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRyb3Bkb3duXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQgaGFueWEgZGlwaWxpaCAxIChzYXR1KSBkYXJpIGJlYmVyYXBhIG9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYmF3YWggaW5pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGRyb3Bkb3dubjIubWFwKChkb2MsIGlkeHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy03IGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGNoZWNrZWRkcm9wZG93bm4yID09PSBpZHh4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGNoZWNrZWRkcm9wZG93bm4yKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0NoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwLzEyIG1yLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtkb2N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIG9wc2kga2UtJHtpZHh4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydCgocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRvY2EsIGlkeGEpID0+IGRvY2EgIT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPT09IFwiXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ZmllbGQyLm5hbWUgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWR0YW1iYWgyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xLzEyIGZsZXgganVzdGlmeS1hcm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydHRyaWdnZXIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkcGFydGlkeChpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwiZGFuZ2VyXCI+LTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tib3hcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBkYXBhdCBkaXBpbGloIGxlYmloIGRhcmkgMSAoc2F0dSkgb3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGliYXdhaCBpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZHJvcGRvd25uMi5tYXAoKGRvYywgaWR4eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4Y2hlY2tlZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMi5pbmNsdWRlcyhpZHh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17aWR4Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRjaGVja2VkZHJvcGRvd25uMihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50Y2hlY2tlZGRyb3Bkb3dubjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGVtcC5pbmRleE9mKGlkeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAvMTIgbXItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RvY31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBvcHNpIGtlLSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4eCArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gcHJldjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaWR4eF0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNkMnBhcnQoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHh4XSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRkcm9wZG93bm4yLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZG9jYSwgaWR4YSkgPT4gZG9jYSAhPT0gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudGZpZWxkMi5uYW1lID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHRhbWJhaDIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEvMTIgZmxleCBqdXN0aWZ5LWFyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRkcm9wZG93bm4yKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2RwYXJ0dHJpZ2dlcigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjZHBhcnRpZHgoaWR4eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPi08L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZHJvcGRvd25uMihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZHJvcGRvd25uMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2QycGFydChbLi4uY2QycGFydCwgXCJcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdGFtYmFoMih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUYW1iYWggT3BzaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dE51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBgJHt2YWx1ZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXROdW1iZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZmllbGRkYXRhYTJbaWR4XS5kZWZhdWx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y3VycmVudGZpZWxkMih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRmaWVsZDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRmaWVsZDIuZGF0YV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1hc3Vra2FuIGRlZmF1bHQgJHtjdXJyZW50ZmllbGQyLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2ZpZWxkZGF0YWEyW2lkeF0uZGVmYXVsdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50ZmllbGQyLmRhdGFfdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInNpbmdsZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BNYXN1a2thbiBkZWZhdWx0ICR7Y3VycmVudGZpZWxkMi5uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZGRhdGFhMltpZHhdLmRlZmF1bHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjdXJyZW50ZmllbGQyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudGZpZWxkMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudGZpZWxkMi5kYXRhX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMzAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtgTWFzdWtrYW4gZGVmYXVsdCAke2N1cnJlbnRmaWVsZDIubmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGRhdGVTdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBkYXRlU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvRGF0ZVBpY2tlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG10LTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3Bjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGZpZWxkICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLm5hbWUgPT09IFwiXCIgPyBcImluaVwiIDogZG9jLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT9gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZpZWxkZGF0YWEyKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5maWx0ZXIoKF8sIGlkeHgpID0+IGlkeHggIT09IGlkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG5ld2RhdGEyKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHByZXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLm1vZGVsX2NvbHVtbnMgPSB0ZW1wLm1vZGVsX2NvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXywgaWR4eCkgPT4gaWR4eCAhPT0gZmllbGRkYXRhYS5sZW5ndGggKyBpZHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkMigocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkYWRkZmllbGQyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb2ludGV2ZW50MihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtci00IGhvdmVyOnRleHQtcmVkLTUwMCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udFNpemU6IGAxLjI1cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L0RlbGV0ZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wY29uZmlybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGZsZXggaXRlbXMtY2VudGVyIG1yLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudGZpZWxkMi5yZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGN1cnJlbnRmaWVsZDIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50ZmllbGQyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZS50YXJnZXQuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdGFtYmFoMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRmaWVsZDIuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGlkeGRyb3Bkb3dudHJpZ2dlcjIoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHZhbHVlZHJvcGRvd250cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZmllbGRkYXRhYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFtpZHhdID0gY3VycmVudGZpZWxkMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmaWVsZGRhdGFhMih0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRhZGRlZGZpZWxkaWR4MihpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGFkZGVkZmllbGR0cmlnZ2VyMigocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGNvbmNhdGZpZWxkdHJpZ2dlcjIoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZGFkZGZpZWxkMihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9pbnRldmVudDIoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGp1c3RpZnktY2VudGVyIG10LTVcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImRhc2hlZFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZGZpZWxkMn1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGA4MCVgLCBoZWlnaHQ6IGA0cmVtYCB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrQWRkRmllbGQyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICArIFRhbWJhaCBTcGVzaWZpa2FzaSBNb2RlbFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+Rm9ybSBUYW1iYWggTWFudWZhY3R1cmVyPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldG1vZGFsbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkbWFudWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWFudWZhY3R1cmVyfVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdtYW51Zn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbWFudWZ9XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbG1hbnVmKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezkwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIE1hbnVmYWN0dXJlciA8c3BhbiBjbGFzc05hbWU9XCJuYW1hbWFudVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YW1hbnVmLm5hbWV9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTmFtYSBNYW51ZmFjdHVyZXJcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZG1hbnVmKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkbWFudWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRhdGFtYW51Zih7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYW1hbnU6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICBjb25zdCBtb2RlbGlkID0gcGFyYW1zLm1vZGVsSWQ7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbiA9IGF3YWl0IHJlc291cmNlcy5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbjtcblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjgyXCIsXG4gICAgICBtb2RlbGlkLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsc1VwZGF0ZTI7XG4iXX0= */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js */\"\n          }, void 0, false, void 0, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4506,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4505,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4473,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1187,\n    columnNumber: 5\n  }, this);\n};\n\nexport async function getServerSideProps({\n  req,\n  res,\n  params\n}) {\n  const modelid = params.modelId;\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resources = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"82\",\n      modelid\n    }\n  };\n}\nexport default ModelsUpdate2;","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/update2/[modelId].js"],"names":["DeleteOutlined","CalendarOutlined","CloseCircleOutlined","PlusSquareTwoTone","Modal","moment","Link","useRouter","useEffect","useState","Sticky","Layout","st","httpcookie","ModelsUpdate2","sidemenu","dataProfile","initProps","modelid","rt","pathArr","pathname","split","slice","splice","length","instanceForm","useForm","instanceForm2","Panel","renderChildPartModel","item","map","doc","idx","Children","name","model_columns","docmc2","required","data_type","charAt","toUpperCase","width","backgroundColor","color","default","opsi","doc2","idx2","doc3","idx3","marginRight","model_parts","newdata","setnewdata","id","asset_id","description","manufacturer_id","required_sn","is_consumable","add_columns","delete_column_ids","update_columns","add_models","delete_model_ids","newdata2","setnewdata2","defaultdata","setdefaultdata","assetdata","setassetdata","manufdata","setmanufdata","modeldata","setmodeldata","fielddata","setfielddata","fielddata2","setfielddata2","fielddataa","setfielddataa","fielddataa2","setfielddataa2","modelpartfielddata","setmodelpartfielddata","currentfield","setcurrentfield","currentfield2","setcurrentfield2","currentidmodel","setcurrentidmodel","addedfield","setaddedfield","addedfield1","setaddedfield1","addedfield2","setaddedfield2","addedfield3","setaddedfield3","addedfieldidx","setaddedfieldidx","addedfieldtrigger","setaddedfieldtrigger","addedfieldidx1","setaddedfieldidx1","addedfieldtrigger1","setaddedfieldtrigger1","addedfieldidx2","setaddedfieldidx2","addedfieldtrigger2","setaddedfieldtrigger2","addedfieldidx3","setaddedfieldidx3","addedfieldtrigger3","setaddedfieldtrigger3","loadingcreate","setloadingcreate","loadingcreatemodel","setloadingcreatemodel","loadinggetmodel","setloadinggetmodel","praloading","setpraloading","loadingspec","setloadingspec","loadingspec2","setloadingspec2","currentdropdown2","setcurrentdropdown2","currentdropdownn2","setcurrentdropdownn2","currentcheckeddropdown2","setcurrentcheckeddropdown2","currentcheckeddropdownn2","setcurrentcheckeddropdownn2","valuedropdowntrigger","setvaluedropdowntrigger","valuedropdowntrigger1","setvaluedropdowntrigger1","valuedropdowntrigger2","setvaluedropdowntrigger2","valuedropdowntrigger3","setvaluedropdowntrigger3","idxdropdowntrigger","setidxdropdowntrigger","idxdropdowntrigger1","setidxdropdowntrigger1","idxdropdowntrigger2","setidxdropdowntrigger2","idxdropdowntrigger3","setidxdropdowntrigger3","concatfieldtrigger","setconcatfieldtrigger","concataddcolumnstrigger","setconcataddcolumnstrigger","concataddcolumnsidx","setconcataddcolumnsidx","concataddcolumnsvalue","setconcataddcolumnsvalue","concataddcolumnstrigger1","setconcataddcolumnstrigger1","concataddcolumnsidx1","setconcataddcolumnsidx1","concataddcolumnsvalue1","setconcataddcolumnsvalue1","concatfieldtrigger2","setconcatfieldtrigger2","editpart","seteditpart","modalcreatemodel","setmodalcreatemodel","newdatatrigger","setnewdatatrigger","newdatatrigger2","setnewdatatrigger2","modeltrigger","setmodeltrigger","concatparttrigger","setconcatparttrigger","concatpartvalue","setconcatpartvalue","assettypecode","setassettypecode","assettypecode2","setassettypecode2","defaultmodel","setdefaultmodel","disabledtambah","setdisabledtambah","disabledtambah2","setdisabledtambah2","disabledaddfield","setdisabledaddfield","disabledaddfield2","setdisabledaddfield2","pointevent","setpointevent","pointevent2","setpointevent2","cd2","setcd2","cdidx","setcdidx","cdtrigger","setcdtrigger","cd2part","setcd2part","cdpartidx","setcdpartidx","cdparttrigger","setcdparttrigger","changeasset","setchangeasset","defaultasset","setdefaultasset","fetchingpart","setfetchingpart","page","setpage","modalmanuf","setmodalmanuf","loadingmanuf","setloadingmanuf","disabledmanuf","setdisabledmanuf","triggermanuf","settriggermanuf","datamanuf","setdatamanuf","onClickAddField","onClickAddField2","onClickSelectAsset","Number","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","then","res","json","res2","temp","success","data","asset_columns","defaultassetid","docmap","newassetfielddata2","filter","docfilter","includes","concat","newfieldmap","docnewfield","prev","tempo","count","asset","code","manufacturer","arr","i","push","message","duration","onClickSelectAsset2","bool","handleCreateModel","t","prop","stringify","body","setTimeout","handleCreateModelinModel","handleAddManufacturer","console","log","latestInsertedManufacturer","newManufacturerId","setFieldsValue","recursivePartModel","temp11","temp1","yo","temp2","some","docsome","docadd","indexOf","idxaddcolumn","docadd2","docup","idxupcolumn","model_id","idxtemp","idxof","quantity","doc10","idx10","doc11","idx11","submit","maxHeight","overflow","value","label","extra","allCheckedNodes","node","props","e","target","fontSize","checked","PRESENTED_IMAGE_SIMPLE","docopsi","dok","idk","every","doca","idxa","toLowerCase","idxx","idxchecked","index","dateString","_","docdef","idxUpdateColumns","doctemp","height","docparts","idxdata","docmc","idxmc","idxopsi","marginTop","input","opt","children","modelparts","map3","idxdata2","doc1","docxx","getServerSideProps","req","params","modelId","cookie","redirect","permanent","destination","cookiesJSON1","token","resources","resjson"],"mappings":"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","sourcesContent":["import { DeleteOutlined } from \"@ant-design/icons\";\nimport {\n  CalendarOutlined,\n  CloseCircleOutlined,\n  PlusSquareTwoTone,\n} from \"@ant-design/icons\";\nimport {\n  Button,\n  Checkbox,\n  Collapse,\n  DatePicker,\n  Empty,\n  Form,\n  Input,\n  InputNumber,\n  Popconfirm,\n  Select,\n  Spin,\n  Timeline,\n  TreeSelect,\n  notification,\n} from \"antd\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\n\nimport Layout from \"../../../../components/layout-dashboard\";\nimport st from \"../../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ModelsUpdate2 = ({ sidemenu, dataProfile, initProps, modelid }) => {\n  //1.Init\n  const rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(3, 1);\n  pathArr[pathArr.length - 1] = \"Ubah Model\";\n  const [instanceForm] = Form.useForm();\n  const [instanceForm2] = Form.useForm();\n  const { Panel } = Collapse;\n\n  //2.Helper functions\n  const renderChildPartModel = (item) => {\n    return item.map((doc, idx) => {\n      return <Children doc={doc}></Children>;\n    });\n  };\n\n  const Children = ({ doc }) => {\n    return (\n      <Timeline.Item>\n        <Collapse accordion>\n          {\n            <Panel header={doc.name}>\n              <div className=\"flex flex-col p-3\">\n                {/* <div className=\"flex flex-col mb-5\">\n                                    <h1 className=\"font-semibold mb-1\">Quantity <span className=\"judulsn\"></span></h1>\n                                    <div className=\"rounded bg-gray-200 w-full flex items-center my-auto h-12 px-2\">\n                                        <p className=\"mb-0 text-sm\">{doc.quantity}</p>\n                                    </div>\n                                </div> */}\n                {doc.model_columns.map((docmc2, idx) => {\n                  // var default2 = {}\n                  // if (docmc2.data_type === 'dropdown' || docmc2.data_type === 'checkbox') {\n                  //     default2 = JSON.parse(docmc2.default)\n                  // }\n                  return (\n                    <div className=\"flex flex-col mb-5\">\n                      <h1 className=\"font-semibold mb-1\">\n                        {docmc2.name}{\" \"}\n                        {docmc2.required ? (\n                          <span className=\"judulsn\"></span>\n                        ) : null}{\" \"}\n                        <span className=\"text-gray-400\">\n                          (\n                          {docmc2.data_type === \"single\"\n                            ? \"Single Textbox\"\n                            : docmc2.data_type.charAt(0).toUpperCase() +\n                              docmc2.data_type.slice(1)}\n                          {docmc2.data_type === \"paragraph\" && ` Text`})\n                        </span>\n                      </h1>\n                      <div className=\"w-full flex items-center my-auto px-2\">\n                        {docmc2.data_type === \"dropdown\" ||\n                        docmc2.data_type === \"checkbox\" ||\n                        docmc2.data_type === \"date\" ||\n                        docmc2.data_type === \"paragraph\" ? (\n                          <>\n                            {docmc2.data_type === \"dropdown\" && (\n                              <Select\n                                disabled\n                                style={{\n                                  width: `100%`,\n                                  backgroundColor: `rgba(229, 231, 235,1)`,\n                                  color: `rgba(229, 231, 235,1)`,\n                                }}\n                              >\n                                {docmc2.default.opsi.map((doc2, idx2) => (\n                                  <Select.Option disabled value={idx2}>\n                                    {doc2}\n                                  </Select.Option>\n                                ))}\n                              </Select>\n                            )}\n                            {docmc2.data_type === \"checkbox\" && (\n                              <div className=\"w-full flex flex-col\">\n                                {docmc2.default.opsi.map((doc3, idx3) => (\n                                  <div className=\"flex mb-1\">\n                                    <Checkbox\n                                      disabled\n                                      style={{ marginRight: `0.5rem` }}\n                                    ></Checkbox>\n                                    <p className=\"mb-0\">{doc3}</p>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                            {docmc2.data_type === \"date\" && (\n                              <div className=\"flex w-full items-center justify-between rounded bg-gray-100 h-10 px-3\">\n                                <p className=\"mb-0\">{docmc2.default}</p>\n                                <div>\n                                  <CalendarOutlined></CalendarOutlined>\n                                </div>\n                              </div>\n                            )}\n                            {docmc2.data_type === \"paragraph\" && (\n                              <div className=\"flex h-20 rounded border bg-gray-100 w-full px-3\">\n                                {docmc2.default}\n                              </div>\n                            )}\n                          </>\n                        ) : (\n                          <div className=\"rounded border bg-gray-100 flex items-center w-full h-10 px-3\">\n                            {docmc2.default}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n                {doc.model_parts.length > 0 &&\n                  renderChildPartModel(doc.model_parts)}\n              </div>\n              <style jsx>\n                {`\n                                                        .judulassettype::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                        .judulsn::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n              </style>\n            </Panel>\n          }\n        </Collapse>\n      </Timeline.Item>\n    );\n  };\n\n  //2.useState\n  const [newdata, setnewdata] = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: null,\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: [],\n  });\n  const [newdata2, setnewdata2] = useState({\n    id: \"\",\n    asset_id: \"\",\n    name: \"\",\n    description: \"\",\n    manufacturer_id: \"\",\n    required_sn: false,\n    is_consumable: false,\n    model_columns: [],\n    model_parts: [],\n    add_columns: [],\n    delete_column_ids: [],\n    update_columns: [],\n    add_models: [],\n    delete_model_ids: [],\n  });\n  const [defaultdata, setdefaultdata] = useState([]);\n  const [assetdata, setassetdata] = useState([]);\n  const [manufdata, setmanufdata] = useState([]);\n  const [modeldata, setmodeldata] = useState([]);\n  const [fielddata, setfielddata] = useState([]);\n  const [fielddata2, setfielddata2] = useState([]);\n  const [fielddataa, setfielddataa] = useState([]);\n  const [fielddataa2, setfielddataa2] = useState([]);\n  const [modelpartfielddata, setmodelpartfielddata] = useState([]);\n  const [currentfield, setcurrentfield] = useState({\n    name: \"\",\n    data_type: \"\",\n    default: \"single\",\n    required: false,\n  });\n  const [currentfield2, setcurrentfield2] = useState({\n    name: \"\",\n    data_type: \"\",\n    default: \"single\",\n    required: false,\n  });\n  const [currentidmodel, setcurrentidmodel] = useState(\"\");\n  const [addedfield, setaddedfield] = useState([]);\n  const [addedfield1, setaddedfield1] = useState([]);\n  const [addedfield2, setaddedfield2] = useState([]);\n  const [addedfield3, setaddedfield3] = useState([]);\n  const [addedfieldidx, setaddedfieldidx] = useState(-1);\n  const [addedfieldtrigger, setaddedfieldtrigger] = useState(false);\n  const [addedfieldidx1, setaddedfieldidx1] = useState(-1);\n  const [addedfieldtrigger1, setaddedfieldtrigger1] = useState(false);\n  const [addedfieldidx2, setaddedfieldidx2] = useState(-1);\n  const [addedfieldtrigger2, setaddedfieldtrigger2] = useState(false);\n  const [addedfieldidx3, setaddedfieldidx3] = useState(-1);\n  const [addedfieldtrigger3, setaddedfieldtrigger3] = useState(false);\n  const [loadingcreate, setloadingcreate] = useState(false);\n  const [loadingcreatemodel, setloadingcreatemodel] = useState(false);\n  const [loadinggetmodel, setloadinggetmodel] = useState(false);\n  const [praloading, setpraloading] = useState(true);\n  const [loadingspec, setloadingspec] = useState(false);\n  const [loadingspec2, setloadingspec2] = useState(false);\n  const [currentdropdown2, setcurrentdropdown2] = useState([\"\", \"\"]);\n  const [currentdropdownn2, setcurrentdropdownn2] = useState([\"\", \"\"]);\n  const [currentcheckeddropdown2, setcurrentcheckeddropdown2] = useState(\"\");\n  const [currentcheckeddropdownn2, setcurrentcheckeddropdownn2] = useState(\"\");\n  const [valuedropdowntrigger, setvaluedropdowntrigger] = useState(false);\n  const [valuedropdowntrigger1, setvaluedropdowntrigger1] = useState(false);\n  const [valuedropdowntrigger2, setvaluedropdowntrigger2] = useState(false);\n  const [valuedropdowntrigger3, setvaluedropdowntrigger3] = useState(false);\n  const [idxdropdowntrigger, setidxdropdowntrigger] = useState(-1);\n  const [idxdropdowntrigger1, setidxdropdowntrigger1] = useState(-1);\n  const [idxdropdowntrigger2, setidxdropdowntrigger2] = useState(-1);\n  const [idxdropdowntrigger3, setidxdropdowntrigger3] = useState(-1);\n  const [concatfieldtrigger, setconcatfieldtrigger] = useState(false);\n  const [concataddcolumnstrigger, setconcataddcolumnstrigger] = useState(false);\n  const [concataddcolumnsidx, setconcataddcolumnsidx] = useState(-1);\n  const [concataddcolumnsvalue, setconcataddcolumnsvalue] = useState(-1);\n  const [concataddcolumnstrigger1, setconcataddcolumnstrigger1] =\n    useState(false);\n  const [concataddcolumnsidx1, setconcataddcolumnsidx1] = useState(-1);\n  const [concataddcolumnsvalue1, setconcataddcolumnsvalue1] = useState(-1);\n  const [concatfieldtrigger2, setconcatfieldtrigger2] = useState(false);\n  const [editpart, seteditpart] = useState(false);\n  const [modalcreatemodel, setmodalcreatemodel] = useState(false);\n  const [newdatatrigger, setnewdatatrigger] = useState(false);\n  const [newdatatrigger2, setnewdatatrigger2] = useState(false);\n  const [modeltrigger, setmodeltrigger] = useState(false);\n  const [concatparttrigger, setconcatparttrigger] = useState(false);\n  const [concatpartvalue, setconcatpartvalue] = useState(-1);\n  const [assettypecode, setassettypecode] = useState(\"\");\n  const [assettypecode2, setassettypecode2] = useState(\"\");\n  const [defaultmodel, setdefaultmodel] = useState({});\n  const [disabledtambah, setdisabledtambah] = useState(false);\n  const [disabledtambah2, setdisabledtambah2] = useState(false);\n  const [disabledaddfield, setdisabledaddfield] = useState(false);\n  const [disabledaddfield2, setdisabledaddfield2] = useState(false);\n  const [pointevent, setpointevent] = useState(\"\");\n  const [pointevent2, setpointevent2] = useState(\"\");\n  const [cd2, setcd2] = useState([\"\", \"\"]);\n  const [cdidx, setcdidx] = useState(-1);\n  const [cdtrigger, setcdtrigger] = useState(false);\n  const [cd2part, setcd2part] = useState([\"\", \"\"]);\n  const [cdpartidx, setcdpartidx] = useState(-1);\n  const [cdparttrigger, setcdparttrigger] = useState(false);\n  const [changeasset, setchangeasset] = useState([]);\n  const [defaultasset, setdefaultasset] = useState([]);\n  const [fetchingpart, setfetchingpart] = useState(false);\n  const [page, setpage] = useState(1);\n  //create manufacturer\n  const [modalmanuf, setmodalmanuf] = useState(false);\n  const [loadingmanuf, setloadingmanuf] = useState(false);\n  const [disabledmanuf, setdisabledmanuf] = useState(true);\n  const [triggermanuf, settriggermanuf] = useState(-1);\n  const [datamanuf, setdatamanuf] = useState({\n    name: \"\",\n  });\n\n  //3.onChange\n  const onClickAddField = () => {\n    setfielddata([\n      ...fielddata,\n      {\n        name: \"\",\n        data_type: \"\",\n        default: \"\",\n        required: false,\n      },\n    ]);\n    setcurrentfield({\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false,\n    });\n    setaddedfield1([...addedfield1, false]);\n    setcurrentdropdown2([\"\", \"\"]);\n    setcd2([\"\", \"\"]);\n    setcurrentcheckeddropdown2([]);\n    setdisabledaddfield(true);\n    setdisabledtambah(true);\n    setpointevent(\"pointer-events-none\");\n  };\n  const onClickAddField2 = () => {\n    setfielddataa2([\n      ...fielddataa2,\n      {\n        name: \"\",\n        data_type: \"\",\n        default: \"\",\n        required: false,\n      },\n    ]);\n    setcurrentfield2({\n      name: \"\",\n      data_type: \"\",\n      default: \"\",\n      required: false,\n    });\n    setcurrentdropdownn2([\"\", \"\"]);\n    setcd2part([\"\", \"\"]);\n    setcurrentcheckeddropdownn2([]);\n    setdisabledaddfield2(true);\n    setdisabledtambah2(true);\n    setpointevent2(\"pointer-events-none\");\n  };\n  const onClickSelectAsset = (id) => {\n    setnewdata({ ...newdata, asset_id: Number(id) });\n    setloadingspec(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAsset?id=${id}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var temp = [];\n        if (res2.success) {\n          temp = res2.data.asset_columns.map((doc, idx) => {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return {\n                ...doc,\n                default:\n                  doc.default === \"\" || doc.default === \"-\"\n                    ? doc.default\n                    : JSON.parse(doc.default),\n              };\n            } else {\n              return { ...doc };\n            }\n          });\n          const defaultassetid = defaultasset.map((docmap) => docmap.id);\n          const newassetfielddata2 = newdata.model_columns\n            .filter((docfilter) => defaultassetid.includes(docfilter.id))\n            .concat(temp);\n          const newfieldmap = newdata.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setfielddata2((prev) => {\n            var tempo = prev;\n            tempo = tempo\n              .filter((docfilter) => defaultassetid.includes(docfilter.id))\n              .concat(temp);\n            return tempo;\n          });\n          setnewdata({\n            ...newdata,\n            id: defaultmodel.id,\n            name: defaultmodel.name,\n            description: defaultmodel.description,\n            model_columns: newassetfielddata2.concat(newfieldmap),\n            add_columns: temp.concat(newfieldmap),\n            required_sn: res2.data.required_sn,\n          });\n          setdefaultdata({\n            ...defaultdata,\n            id: defaultmodel.id,\n            name: defaultmodel.name,\n            description: defaultmodel.description,\n            manufacturer_id: defaultmodel.manufacturer_id,\n            count: defaultmodel.count,\n            asset: {\n              id: res2.data.id,\n              name: res2.data.name,\n              code: res2.data.code,\n              description: res2.data.description,\n            },\n            manufacturer: {\n              id: defaultmodel.manufacturer.id,\n              name: defaultmodel.manufacturer.name,\n            },\n            asset_id: Number(id),\n            model_columns: defaultasset,\n            add_columns: [],\n            update_columns: [],\n            delete_column_ids: [],\n            add_models: [],\n            delete_model_ids: [],\n            required_sn: res2.data.required_sn,\n          });\n          var arr = [];\n          for (var i = 0; i < newassetfielddata2.length; i++) {\n            arr.push(true);\n          }\n          setchangeasset(temp);\n          setaddedfield(arr);\n          setloadingspec(false);\n          setdisabledaddfield(false);\n          notification[\"info\"]({\n            message: \"Anda Telah Mengubah Asset Type\",\n            description:\n              \"Hal ini membuat field dari asset type terkait terbentuk di form ini!\",\n            duration: 0,\n          });\n        } else {\n          temp = [];\n          // setfielddata2(temp)\n          const newfieldmap = newdata.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setnewdata({\n            ...newdata,\n            model_columns: newdata.model_columns.concat(newfieldmap),\n            required_sn: false,\n            asset_id: 0,\n          });\n          setloadingspec(false);\n          setdisabledaddfield(true);\n        }\n      });\n  };\n  const onClickSelectAsset2 = (id) => {\n    setloadingspec2(true);\n    setnewdata2({ ...newdata2, asset_id: Number(id) });\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAsset?id=${id}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var temp = [];\n        if (res2.success) {\n          temp = res2.data.asset_columns.map((doc, idx) => {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return {\n                ...doc,\n                default: JSON.parse(doc.default),\n              };\n            } else {\n              return { ...doc };\n            }\n          });\n          var bool = [];\n          for (var i = 0; i < temp.length; i++) {\n            bool.push(true);\n          }\n          setaddedfield3(bool);\n          setfielddataa(temp);\n          const newfieldmap = newdata2.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setnewdata2({\n            ...newdata2,\n            required_sn: res2.data.required_sn,\n            asset_id: res2.data.code,\n            model_columns: temp.concat(newfieldmap),\n          });\n          setassettypecode2(res2.data.id);\n          // setnewdatatrigger2(prev => !prev)\n          setloadingspec2(false);\n          setdisabledaddfield2(false);\n        } else {\n          temp = [];\n          const newfieldmap = newdata2.model_columns.filter(\n            (docnewfield) => typeof docnewfield.id === \"undefined\"\n          );\n          setfielddataa(temp);\n          setnewdata2({\n            ...newdata2,\n            model_columns: temp.concat(newfieldmap),\n            required_sn: false,\n            asset_id: 0,\n          });\n          setloadingspec2(false);\n        }\n      });\n  };\n\n  //4.handle\n  const handleCreateModel = () => {\n    var t = {};\n    for (var prop in newdata) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"update_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"add_columns\") {\n        t[prop] = newdata[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"asset_id\") {\n        t[prop] = Number(assettypecode);\n      } else {\n        t[prop] = newdata[prop];\n      }\n    }\n    setloadingcreate(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateModel`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(t),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingcreate(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Model berhasil diubah\",\n            duration: 3,\n          });\n          setTimeout(() => {\n            setmodalcreatemodel(false);\n            rt.push(`/admin/models/detail/${modelid}`);\n          }, 500);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleCreateModelinModel = () => {\n    var t = {};\n    for (var prop in newdata2) {\n      if (prop === \"model_columns\") {\n        t[prop] = newdata2[prop].map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default: JSON.stringify(doc.default),\n            };\n          } else {\n            return { ...doc };\n          }\n        });\n      } else if (prop === \"asset_id\") [(t[prop] = Number(assettypecode2))];\n      else {\n        t[prop] = newdata2[prop];\n      }\n    }\n    setloadingcreatemodel(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addModel`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(t),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingcreatemodel(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Model berhasil ditambahkan\",\n            duration: 3,\n          });\n          setnewdata2({\n            asset_id: \"\",\n            name: \"\",\n            description: \"\",\n            manufacturer_id: \"\",\n            required_sn: false,\n            is_consumable: false,\n            model_columns: [],\n            model_parts: [],\n          });\n          setmodalcreatemodel(false);\n          seteditpart(false);\n          setmodeltrigger(res2.id);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleAddManufacturer = () => {\n    setloadingmanuf(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addManufacturer`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(datamanuf),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingmanuf(false);\n        setmodalmanuf(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Manufacturer berhasil ditambahkan\",\n            duration: 2,\n          });\n          setdatamanuf({\n            ...datamanuf,\n            name: \"\",\n          });\n\n          console.log(res2);\n\n          settriggermanuf((prev) => prev + 1);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n\n  //5.useEffect\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setassetdata(res2.data);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getManufacturers`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        const data = res2.data;\n\n        setmanufdata(data);\n\n        /** Set new inserted manufacturer as default selected option in the \"Manufacturer\" dropdown */\n        if (triggermanuf > -1) {\n          const latestInsertedManufacturer = data[data.length - 1];\n          const newManufacturerId = latestInsertedManufacturer.id;\n\n          /** Form control value */\n          instanceForm.setFieldsValue({ manufacturer_id: newManufacturerId });\n          setnewdata(prev => ({...prev, manufacturer_id: newManufacturerId }));\n        }\n      });\n  }, [triggermanuf]);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModel?id=${modelid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        const temp = res2.data.model_columns.map((doc, idx) => {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return {\n              ...doc,\n              default:\n                doc.default === \"\" || doc.default === \"-\"\n                  ? doc.default\n                  : JSON.parse(doc.default),\n            };\n          } else {\n            return {\n              ...doc,\n            };\n          }\n        });\n        //model_parts\n        const recursivePartModel = (item) => {\n          var temp11 = [];\n          for (var i = 0; i < item.length; i++) {\n            var temp1 = {};\n            temp1 = item[i].model_columns.map((doc, idx) => {\n              if (\n                doc.data_type === \"dropdown\" ||\n                doc.data_type === \"checkbox\"\n              ) {\n                return {\n                  ...doc,\n                  default:\n                    doc.default === \"\" || doc.default === \"-\"\n                      ? doc.default\n                      : JSON.parse(doc.default),\n                };\n              } else {\n                return {\n                  ...doc,\n                };\n              }\n            });\n            temp11.push({\n              ...item[i],\n              model_columns: temp1,\n              model_parts:\n                item[i].model_parts.length > 0\n                  ? recursivePartModel(item[i].model_parts)\n                  : [],\n            });\n          }\n          return temp11;\n        };\n        const yo = recursivePartModel(res2.data.model_parts);\n        const temp2 = {\n          ...res2.data,\n          asset_id: res2.data.asset.code,\n          model_columns: temp,\n          add_columns: [],\n          update_columns: [],\n          delete_column_ids: [],\n          add_models: [],\n          delete_model_ids: [],\n        };\n        setnewdata(temp2);\n        setdefaultdata(temp2);\n        setdefaultasset(temp);\n        setdefaultmodel(temp2);\n        setfielddata2(temp);\n        setmodelpartfielddata(yo);\n        var arr = [];\n        for (var i = 0; i < res2.data.model_columns.length; i++) {\n          arr.push(true);\n        }\n        setaddedfield(arr);\n        setassettypecode(res2.data.asset_id);\n        setpraloading(false);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setmodeldata(res2.data.data);\n        setcurrentidmodel(modeltrigger);\n        modeltrigger !== false ? seteditpart(true) : null;\n      });\n  }, [modeltrigger]);\n  //checkbox dropdown dari model utama yang field asset\n  useEffect(() => {\n    if (idxdropdowntrigger !== -1) {\n      setfielddata2((prev) => {\n        const temp = prev;\n        temp[idxdropdowntrigger][\"default\"] = {\n          default: currentcheckeddropdown2,\n          opsi: currentdropdown2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger]);\n  //checkbox dropdown dari model utama yang field buat sendiri\n  useEffect(() => {\n    if (idxdropdowntrigger1 !== -1) {\n      setfielddata((prev) => {\n        const temp = prev;\n        // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n        temp[idxdropdowntrigger1][\"default\"] = {\n          default: currentcheckeddropdown2,\n          opsi: currentdropdown2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger1]);\n  useEffect(() => {\n    setnewdata({\n      ...newdata,\n      model_columns: fielddata2.concat(fielddata),\n    });\n  }, [concatfieldtrigger]);\n  useEffect(() => {\n    if (concataddcolumnsidx !== -1) {\n      if (\n        changeasset.some(\n          (docsome) => docsome.id === concataddcolumnsvalue.id\n        ) ||\n        typeof concataddcolumnsvalue.id === \"undefined\"\n      ) {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (\n          newdata.add_columns\n            .map((docadd) => docadd.name)\n            .indexOf(currentfield.name) === -1\n        ) {\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(fielddata2[fielddata2.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          const idxaddcolumn = newdata.add_columns\n            .map((docadd2) => docadd2.name)\n            .indexOf(currentfield.name);\n          // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (\n          newdata.update_columns\n            .map((docup) => docup.id)\n            .indexOf(currentfield.id) === -1\n        ) {\n          setnewdata((prev) => {\n            var temp = prev;\n            temp.update_columns.push(fielddata2[concataddcolumnsidx]);\n            return temp;\n          });\n        } else {\n          const idxupcolumn = newdata.update_columns\n            .map((docadd2) => docadd2.id)\n            .indexOf(currentfield.id);\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger]);\n  useEffect(() => {\n    if (concataddcolumnsidx1 !== -1) {\n      if (\n        concataddcolumnsidx1 > defaultdata.model_columns.length - 1 ||\n        typeof concataddcolumnsvalue1.id === \"undefined\" ||\n        changeasset === true\n      ) {\n        // if ((fielddata2.length - defaultdata.model_columns.length) >= newdata.add_columns.length) {\n        if (\n          newdata.add_columns\n            .map((docadd) => docadd.name)\n            .indexOf(currentfield.name) === -1\n        ) {\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(fielddata[fielddata.length - 1]);\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns.push(currentfield);\n              return temp;\n            });\n          }\n        } else {\n          const idxaddcolumn = newdata.add_columns\n            .map((docadd2) => docadd2.name)\n            .indexOf(currentfield.name);\n          // console.log(newdata.asset_columns.length+\":\"+concataddcolumnsidx+\";\"+newdata.add_columns.length)\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = {\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.add_columns[idxaddcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      } else {\n        // console.log(fielddata2[concataddcolumnsidx])\n        if (\n          newdata.update_columns\n            .map((docup) => docup.id)\n            .indexOf(currentfield.id) === -1\n        ) {\n          setnewdata((prev) => {\n            var temp = prev;\n            temp.update_columns.push(fielddata[concataddcolumnsidx1]);\n            return temp;\n          });\n        } else {\n          const idxupcolumn = newdata.update_columns\n            .map((docadd2) => docadd2.id)\n            .indexOf(currentfield.id);\n          if (\n            currentfield.data_type === \"dropdown\" ||\n            currentfield.data_type === \"checkbox\"\n          ) {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = {\n                id: currentfield.id,\n                model_id: currentfield.model_id,\n                name: currentfield.name,\n                data_type: currentfield.data_type,\n                default: {\n                  default: currentcheckeddropdown2,\n                  opsi: currentdropdown2,\n                },\n                required: currentfield.required,\n              };\n              return temp;\n            });\n          } else {\n            setnewdata((prev) => {\n              var temp = prev;\n              temp.update_columns[idxupcolumn] = currentfield;\n              return temp;\n            });\n          }\n        }\n      }\n    }\n  }, [concataddcolumnstrigger1]);\n  useEffect(() => {\n    if (addedfieldidx !== -1) {\n      setaddedfield((prev) => {\n        if (prev[addedfieldidx] === false) {\n          prev[addedfieldidx] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger]);\n  useEffect(() => {\n    if (addedfieldidx1 !== -1) {\n      setaddedfield1((prev) => {\n        if (prev[addedfieldidx1] === false) {\n          prev[addedfieldidx1] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx1] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger1]);\n  useEffect(() => {\n    if (addedfieldidx3 !== -1) {\n      setaddedfield3((prev) => {\n        if (prev[addedfieldidx3] === false) {\n          prev[addedfieldidx3] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx3] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger3]);\n\n  //checkbox dropdown dari model baru yang field asset\n  useEffect(() => {\n    if (idxdropdowntrigger3 !== -1) {\n      setfielddataa((prev) => {\n        const temp = prev;\n        // temp[idxdropdowntrigger][\"default\"] = `${valuedropdowntrigger}`\n        temp[idxdropdowntrigger3][\"default\"] = {\n          default: currentcheckeddropdownn2,\n          opsi: currentdropdownn2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger3]);\n  //checkbox dropdown dari model baru yang field buat sendiri\n  useEffect(() => {\n    if (idxdropdowntrigger2 !== -1) {\n      setfielddataa2((prev) => {\n        const temp = prev;\n        temp[idxdropdowntrigger2][\"default\"] = {\n          default: currentcheckeddropdownn2,\n          opsi: currentdropdownn2,\n        };\n        return temp;\n      });\n    }\n  }, [valuedropdowntrigger2]);\n  useEffect(() => {\n    setnewdata2({\n      ...newdata2,\n      model_columns: fielddataa.concat(fielddataa2),\n    });\n  }, [concatfieldtrigger2]);\n  useEffect(() => {\n    if (addedfieldidx2 !== -1) {\n      setaddedfield2((prev) => {\n        if (prev[addedfieldidx2] === false) {\n          prev[addedfieldidx2] = true;\n          return prev;\n        } else if (typeof prev[addedfieldidx2] === \"undefined\") {\n          const temp2 = [...prev, true];\n          return temp2;\n        }\n      });\n    }\n  }, [addedfieldtrigger2]);\n\n  useEffect(() => {\n    setnewdata({ ...newdata, model_columns: fielddata });\n  }, [newdatatrigger]);\n  useEffect(() => {\n    setnewdata2({ ...newdata2, model_columns: fielddataa });\n  }, [newdatatrigger2]);\n\n  useEffect(() => {\n    var temp = [];\n    if (concatpartvalue !== -1) {\n      if (concatpartvalue.length === 0) {\n        setnewdata({ ...newdata, model_parts: [] });\n      } else {\n        concatpartvalue.map((doc, idx) => {\n          var idxtemp = temp.map((doc) => doc.id).indexOf(doc.id);\n          if (idxtemp !== -1 && temp[idxtemp][\"id\"] === doc.id) {\n            var idxof = temp.map((doc) => doc.id).indexOf(doc.id);\n            temp[idxof] = {\n              ...temp[idxof],\n              quantity: temp[idxof].quantity + doc.quantity,\n            };\n          } else if (idxtemp === -1) {\n            temp.push({\n              id: doc.id,\n              quantity: doc.quantity,\n            });\n          }\n        });\n        setnewdata({ ...newdata, add_models: temp });\n      }\n    }\n  }, [concatparttrigger]);\n  useEffect(() => {\n    if (cdidx !== -1) {\n      setcurrentdropdown2((prev) => {\n        return cd2.filter((doc10, idx10) => idx10 !== cdidx);\n      });\n      setcd2((prev) => prev.filter((doc11, idx11) => idx11 !== cdidx));\n    }\n  }, [cdtrigger]);\n  useEffect(() => {\n    if (cdpartidx !== -1) {\n      setcurrentdropdownn2((prev) => {\n        return cd2part.filter((doc10, idx10) => idx10 !== cdpartidx);\n      });\n      setcd2part((prev) => prev.filter((doc11, idx11) => idx11 !== cdpartidx));\n    }\n  }, [cdparttrigger]);\n  return (\n    <Layout\n      st={st}\n      tok={initProps}\n      sidemenu={sidemenu}\n      dataProfile={dataProfile}\n      pathArr={pathArr}\n    >\n      <div\n        className=\"w-full h-auto grid grid-cols-1 md:grid-cols-4\"\n        id=\"createAssetsWrapper\"\n      >\n        <div className=\" col-span-1 md:col-span-4 mb-8\">\n          <Sticky containerSelectorFocus=\"#createAgentsWrapper\">\n            <div className=\" col-span-4 flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white\">\n              <h1 className=\"font-semibold py-2\">\n                Form Ubah Model - {newdata.name}\n              </h1>\n              <div className=\"flex space-x-2\">\n                <Link href={`/admin/models/detail/${modelid}`}>\n                  <Button\n                    /*onClick={() => { console.log(newdata); console.log(fielddata); console.log(fielddata2); console.log(defaultdata); console.log(defaultasset) }}*/ type=\"default\"\n                  >\n                    Batal\n                  </Button>\n                </Link>\n                <Button\n                  type=\"primary\"\n                  loading={loadingcreate}\n                  disabled={disabledaddfield}\n                  onClick={instanceForm.submit}\n                >\n                  Simpan\n                </Button>\n              </div>\n            </div>\n          </Sticky>\n        </div>\n        <div className=\"col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\">\n          <div className=\"mb-5\">\n            <h1 className=\"font-bold text-xl\">Informasi Model</h1>\n          </div>\n          <div className=\"shadow-md border p-8 flex flex-col rounded-md\">\n            {praloading ? (\n              <Spin></Spin>\n            ) : (\n              <Form\n                form={instanceForm}\n                layout=\"vertical\"\n                onFinish={handleCreateModel}\n                initialValues={newdata}\n              >\n                <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                  <Form.Item\n                    name=\"asset_id\"\n                    label=\"Asset Type\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Asset Type wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <TreeSelect\n                      style={{ marginRight: `1rem` }}\n                      dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                      treeData={assetdata}\n                      placeholder=\"Pilih Asset Type\"\n                      treeDefaultExpandAll\n                      onChange={(value, label, extra) => {\n                        if (typeof value !== \"undefined\") {\n                          onClickSelectAsset(\n                            extra.allCheckedNodes[0].node.props.id\n                          );\n                        } else {\n                          onClickSelectAsset(0);\n                        }\n                      }}\n                      allowClear\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    name=\"name\"\n                    label=\"Nama Model\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Nama Model wajib diisi\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      name=\"name\"\n                      onChange={(e) => {\n                        setnewdata({ ...newdata, name: e.target.value });\n                      }}\n                    />\n                  </Form.Item>\n                </div>\n                <div className=\"flex mb-2\">\n                  <div className=\" w-11/12 mr-2\">\n                    <Form.Item name=\"manufacturer_id\" label=\"Manufacturer\">\n                      <Select\n                        placeholder=\"Pilih Manufacturer\"\n                        onChange={(value) => {\n                          console.log(value);\n                          setnewdata({ ...newdata, manufacturer_id: value });\n                        }}\n                      >\n                        {manufdata.map((doc, idx) => {\n                          return (\n                            <Select.Option key={idx} value={doc.id}>\n                              {doc.name}\n                            </Select.Option>\n                          );\n                        })}\n                      </Select>\n                    </Form.Item>\n                  </div>\n                  <div\n                    className=\"w-1/12 flex pt-2 my-auto items-center justify-center cursor-pointer\"\n                    onClick={() => {\n                      setmodalmanuf(true);\n                    }}\n                  >\n                    <PlusSquareTwoTone style={{ fontSize: `1.5rem` }} />\n                  </div>\n                </div>\n                <Form.Item name=\"description\" label=\"Deskripsi\">\n                  <Input.TextArea\n                    rows={4}\n                    name=\"description\"\n                    onChange={(e) => {\n                      setnewdata({ ...newdata, description: e.target.value });\n                    }}\n                  />\n                </Form.Item>\n                <div className=\"flex mb-5\">\n                  <Checkbox\n                    style={{ marginRight: `0.5rem` }}\n                    onChange={(e) => {\n                      setnewdata({ ...newdata, required_sn: e.target.checked });\n                    }}\n                    checked={newdata.required_sn}\n                  />{\" \"}\n                  Serial Number wajib ada\n                </div>\n                <div className=\"flex\">\n                  <Checkbox\n                    style={{ marginRight: `0.5rem` }}\n                    onChange={(e) => {\n                      setnewdata({\n                        ...newdata,\n                        is_consumable: e.target.checked,\n                      });\n                    }}\n                    checked={newdata.is_consumable}\n                  />{\" \"}\n                  Model Consumable dengan satuan jumlah\n                </div>\n              </Form>\n            )}\n          </div>\n        </div>\n        <div className=\" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\">\n          <div className=\"mb-5\">\n            <h1 className=\"font-bold text-xl\">Spesifikasi Model</h1>\n          </div>\n          {loadingspec ? (\n            <Spin />\n          ) : (\n            <>\n              {fielddata2.length === 0 ? (\n                <Empty image={Empty.PRESENTED_IMAGE_SIMPLE}></Empty>\n              ) : (\n                fielddata2.map((doc, idx) => {\n                  return (\n                    <>\n                      {addedfield[idx] === true ? (\n                        <div\n                          key={idx}\n                          className={`${pointevent} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                          onClick={() => {\n                            const temp = [...addedfield];\n                            temp[idx] = false;\n                            for (var i = 0; i < temp.length; i++) {\n                              if (i !== idx) {\n                                temp[i] = true;\n                              }\n                            }\n                            setaddedfield(temp);\n                            setcurrentfield(fielddata2[idx]);\n                            if (\n                              doc.data_type === \"dropdown\" ||\n                              doc.data_type === \"checkbox\"\n                            ) {\n                              setcurrentdropdown2(doc.default.opsi);\n                              setcurrentcheckeddropdown2(doc.default.default);\n                            }\n                            if (\n                              fielddata2[idx].data_type !== \"dropdown\" ||\n                              fielddata2[idx].data_type !== \"checkbox\"\n                            ) {\n                              setcd2(doc.default.opsi);\n                              if (\n                                fielddata2[idx].name !== \"\" &&\n                                fielddata2[idx].data_type !== \"\"\n                              ) {\n                                setdisabledtambah(false);\n                              } else {\n                                setdisabledtambah(true);\n                              }\n                            } else {\n                              if (\n                                doc.default.opsi.some(\n                                  (docopsi) => docopsi === \"\"\n                                )\n                              ) {\n                                setdisabledtambah(true);\n                              } else {\n                                setdisabledtambah(false);\n                              }\n                            }\n                            setdisabledaddfield(true);\n                            setpointevent(\"pointer-events-none\");\n                          }}\n                        >\n                          <div className=\"font-semibold mb-2\">\n                            {doc.name}\n                            {fielddata2[idx].required ? (\n                              <span className=\"judulField\"></span>\n                            ) : null}{\" \"}\n                            <span className=\"text-gray-400 text-sm\">\n                              (\n                              {doc.data_type === \"single\"\n                                ? \"Single Textbox\"\n                                : doc.data_type.charAt(0).toUpperCase() +\n                                  doc.data_type.slice(1)}\n                              {doc.data_type === \"paragraph\" && ` Text`})\n                            </span>\n                          </div>\n                          <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                            {doc.data_type === \"checkbox\" ||\n                            doc.data_type === \"dropdown\" ||\n                            doc.data_type === \"paragraph\" ||\n                            doc.data_type === \"date\" ? (\n                              <>\n                                {doc.data_type === \"dropdown\" && (\n                                  <div className=\"flex flex-col w-full\">\n                                    {doc.default.opsi.map((dok, idk) => {\n                                      return (\n                                        <div\n                                          key={idk}\n                                          className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                        >\n                                          <Checkbox\n                                            disabled\n                                            checked={\n                                              doc.default.default === idk\n                                                ? true\n                                                : false\n                                            }\n                                            style={{ marginRight: `0.5rem` }}\n                                          />\n                                          <p className=\"mb-0\">{dok}</p>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                )}\n                                {doc.data_type === \"checkbox\" && (\n                                  <div className=\"flex flex-col w-full\">\n                                    {doc.default.opsi.map((dok, idk) => {\n                                      return (\n                                        <div\n                                          key={idk}\n                                          className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                        >\n                                          <Checkbox\n                                            disabled\n                                            checked={\n                                              doc.default.default.indexOf(\n                                                idk\n                                              ) !== -1\n                                                ? true\n                                                : false\n                                            }\n                                            style={{ marginRight: `0.5rem` }}\n                                          />\n                                          <p className=\"mb-0\">{dok}</p>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                )}\n                                {doc.data_type === \"date\" && (\n                                  <div className=\"flex justify-between w-full px-3\">\n                                    <p className=\"mb-0\">{doc.default}</p>\n                                    <div>\n                                      <CalendarOutlined></CalendarOutlined>\n                                    </div>\n                                  </div>\n                                )}\n                                {doc.data_type === \"paragraph\" && (\n                                  <div className=\"flex h-20\">{doc.default}</div>\n                                )}\n                              </>\n                            ) : (\n                              <p className=\"mb-0\">{doc.default}</p>\n                            )}\n                          </div>\n                          <style jsx>\n                            {`\n                                                                    .judulField::before{\n                                                                        content: '*';\n                                                                        color: red;\n                                                                    }\n                                                                `}\n                          </style>\n                        </div>\n                      ) : (\n                        <div\n                          key={idx}\n                          className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                        >\n                          <Form layout=\"vertical\" initialValues={currentfield}>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                              <Form.Item\n                                name=\"name\"\n                                label=\"Nama Spesifikasi\"\n                                rules={[\n                                  {\n                                    required: true,\n                                    message: \"Nama Spesifikasi wajib diisi\",\n                                  },\n                                ]}\n                              >\n                                <Input\n                                  required\n                                  name=\"name\"\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      name: e.target.value,\n                                    });\n                                    if (e.target.value === \"\") {\n                                      setdisabledtambah(true);\n                                    } else if (\n                                      e.target.value !== \"\" &&\n                                      currentfield.data_type !== \"\" &&\n                                      currentdropdown2.every(\n                                        (doca, idxa) => doca !== \"\"\n                                      )\n                                    ) {\n                                      setdisabledtambah(false);\n                                    }\n                                  }}\n                                />\n                              </Form.Item>\n                              <Form.Item\n                                name=\"data_type\"\n                                label=\"Tipe Field\"\n                                rules={[\n                                  {\n                                    required: true,\n                                    message: \"Tipe Field wajib diisi\",\n                                  },\n                                ]}\n                              >\n                                <Select\n                                  placeholder=\"Pilih Tipe Field\"\n                                  onChange={(value) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      data_type: value,\n                                    });\n                                    if (\n                                      value === \"dropdown\" ||\n                                      value === \"checkbox\"\n                                    ) {\n                                      if (\n                                        currentdropdown2.every(\n                                          (doca, idxa) => doca !== \"\"\n                                        )\n                                      ) {\n                                        setdisabledtambah(false);\n                                      } else {\n                                        setdisabledtambah(true);\n                                      }\n                                    } else {\n                                      setdisabledtambah(false);\n                                    }\n                                    if (value === \"dropdown\") {\n                                      setcurrentcheckeddropdown2(\"\");\n                                      setcurrentdropdown2([\"\", \"\"]);\n                                      setdisabledtambah(true);\n                                    }\n                                    if (value === \"checkbox\") {\n                                      setcurrentcheckeddropdown2([]);\n                                      setcurrentdropdown2([\"\", \"\"]);\n                                      setcd2([\"\", \"\"]);\n                                      setdisabledtambah(true);\n                                    }\n                                  }}\n                                  name=\"data_type\"\n                                >\n                                  <Select.Option value={\"dropdown\"}>\n                                    Dropdown\n                                  </Select.Option>\n                                  <Select.Option value={\"number\"}>\n                                    Number\n                                  </Select.Option>\n                                  <Select.Option value={\"paragraph\"}>\n                                    Paragraph Text\n                                  </Select.Option>\n                                  <Select.Option value={\"checkbox\"}>\n                                    Checkbox\n                                  </Select.Option>\n                                  <Select.Option value={\"single\"}>\n                                    Single Textbox\n                                  </Select.Option>\n                                  <Select.Option value={\"date\"}>\n                                    Date\n                                  </Select.Option>\n                                </Select>\n                              </Form.Item>\n                            </div>\n                            <Form.Item name=\"default\" label=\"Default\">\n                              {currentfield.data_type.toLowerCase() ===\n                              \"dropdown\" ? (\n                                <div className=\"flex flex-col\">\n                                  <h1>\n                                    Default hanya dipilih 1 (satu) dari beberapa\n                                    opsi dibawah ini\n                                  </h1>\n                                  {currentdropdown2.map((doc, idxx) => (\n                                    <div className=\"flex mb-3\">\n                                      <div className=\"w-7 flex items-center\">\n                                        <Checkbox\n                                          checked={\n                                            currentcheckeddropdown2 === idxx\n                                              ? true\n                                              : false\n                                          }\n                                          onChange={(e) => {\n                                            if (e.target.checked === true) {\n                                              setcurrentcheckeddropdown2(idxx);\n                                            }\n                                          }}\n                                        ></Checkbox>\n                                      </div>\n                                      <div className=\"w-10/12 mr-5\">\n                                        <Input\n                                          style={{ marginRight: `0.5rem` }}\n                                          defaultValue={doc}\n                                          placeholder={`Masukkan opsi ke-${\n                                            idxx + 1\n                                          }`}\n                                          onChange={(e) => {\n                                            setcurrentdropdown2((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            setcd2((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            if (\n                                              e.target.value !== \"\" &&\n                                              currentdropdown2.every(\n                                                (doca, idxa) => doca !== \"\"\n                                              ) &&\n                                              currentfield.name !== \"\"\n                                            ) {\n                                              setdisabledtambah(false);\n                                            } else if (\n                                              e.target.value === \"\" ||\n                                              currentfield.name === \"\"\n                                            ) {\n                                              setdisabledtambah(true);\n                                            }\n                                          }}\n                                        />\n                                      </div>\n                                      <div\n                                        className=\"w-1/12 flex justify-around\"\n                                        onClick={() => {\n                                          setcurrentdropdown2([]);\n                                          setcdtrigger((prev) => !prev);\n                                          setcdidx(idxx);\n                                        }}\n                                      >\n                                        <Button type=\"danger\">-</Button>\n                                      </div>\n                                    </div>\n                                  ))}\n                                  <div className=\"mx-auto my-3\">\n                                    <Button\n                                      onClick={() => {\n                                        setcurrentdropdown2([\n                                          ...currentdropdown2,\n                                          \"\",\n                                        ]);\n                                        setcd2([...cd2, \"\"]);\n                                        setdisabledtambah(true);\n                                      }}\n                                    >\n                                      + Tambah Opsi\n                                    </Button>\n                                  </div>\n                                </div>\n                              ) : null}\n                              {currentfield.data_type.toLowerCase() ===\n                              \"checkbox\" ? (\n                                <div className=\"flex flex-col\">\n                                  <h1>\n                                    Default dapat dipilih lebih dari 1 (satu)\n                                    opsi dibawah ini\n                                  </h1>\n                                  {currentdropdown2.map((doc, idxx) => {\n                                    const idxchecked =\n                                      currentcheckeddropdown2.includes(idxx);\n                                    return (\n                                      <div className=\"flex mb-3\">\n                                        <div className=\"w-7 flex items-center\">\n                                          <Checkbox\n                                            defaultChecked={idxchecked}\n                                            onChange={(e) => {\n                                              if (e.target.checked === true) {\n                                                setcurrentcheckeddropdown2(\n                                                  (prev) => {\n                                                    var temp = prev;\n                                                    temp.push(idxx);\n                                                    return temp;\n                                                  }\n                                                );\n                                              } else {\n                                                setcurrentcheckeddropdown2(\n                                                  (prev) => {\n                                                    var temp = prev;\n                                                    const index =\n                                                      temp.indexOf(idxx);\n                                                    temp.splice(index, 1);\n                                                    return temp;\n                                                  }\n                                                );\n                                              }\n                                            }}\n                                          ></Checkbox>\n                                        </div>\n                                        <div className=\"w-10/12 mr-5\">\n                                          <Input\n                                            style={{ marginRight: `0.5rem` }}\n                                            defaultValue={doc}\n                                            placeholder={`Masukkan opsi ke-${\n                                              idxx + 1\n                                            }`}\n                                            onChange={(e) => {\n                                              setcurrentdropdown2((prev) => {\n                                                const temp = prev;\n                                                temp[idxx] = e.target.value;\n                                                return temp;\n                                              });\n                                              setcd2((prev) => {\n                                                const temp = prev;\n                                                temp[idxx] = e.target.value;\n                                                return temp;\n                                              });\n                                              if (\n                                                e.target.value !== \"\" &&\n                                                currentdropdown2.every(\n                                                  (doca, idxa) => doca !== \"\"\n                                                ) &&\n                                                currentfield.name !== \"\"\n                                              ) {\n                                                setdisabledtambah(false);\n                                              } else if (\n                                                e.target.value === \"\" ||\n                                                currentfield.name === \"\"\n                                              ) {\n                                                setdisabledtambah(true);\n                                              }\n                                            }}\n                                          />\n                                        </div>\n                                        <div\n                                          className=\"w-1/12 flex justify-around\"\n                                          onClick={() => {\n                                            setcurrentdropdown2([]);\n                                            setcdtrigger((prev) => !prev);\n                                            setcdidx(idxx);\n                                          }}\n                                        >\n                                          <Button type=\"danger\">-</Button>\n                                        </div>\n                                      </div>\n                                    );\n                                  })}\n                                  <div className=\"mx-auto my-3\">\n                                    <Button\n                                      onClick={() => {\n                                        setcurrentdropdown2([\n                                          ...currentdropdown2,\n                                          \"\",\n                                        ]);\n                                        setcd2([...cd2, \"\"]);\n                                        setdisabledtambah(true);\n                                      }}\n                                    >\n                                      + Tambah Opsi\n                                    </Button>\n                                  </div>\n                                </div>\n                              ) : null}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"number\" && (\n                                <InputNumber\n                                  style={{ width: `30%` }}\n                                  defaultValue={fielddata2[idx].default}\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  onChange={(value) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: `${value}`,\n                                    });\n                                  }}\n                                ></InputNumber>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"paragraph\" && (\n                                <Input.TextArea\n                                  rows={4}\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  defaultValue={fielddata2[idx].default}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: e.target.value,\n                                    });\n                                  }}\n                                ></Input.TextArea>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"string\" && (\n                                <Input\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  defaultValue={fielddata2[idx].default}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: e.target.value,\n                                    });\n                                  }}\n                                ></Input>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"single\" && (\n                                <Input\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  defaultValue={fielddata2[idx].default}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: e.target.value,\n                                    });\n                                  }}\n                                ></Input>\n                              )}\n                              {currentfield.data_type.toLowerCase() ===\n                                \"date\" && (\n                                <DatePicker\n                                  defaultValue={moment(fielddata2[idx].default)}\n                                  style={{ width: `30%` }}\n                                  placeholder={`Masukkan default ${currentfield.name}`}\n                                  onChange={(value, dateString) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      default: dateString,\n                                    });\n                                  }}\n                                ></DatePicker>\n                              )}\n                            </Form.Item>\n                            <hr />\n                            <div className=\"flex mt-4 justify-end\">\n                              <Popconfirm\n                                placement=\"bottom\"\n                                title={`Apakah anda yakin ingin menghapus field ${\n                                  doc.name === \"\" ? \"ini\" : doc.name\n                                }?`}\n                                okText=\"Ya\"\n                                cancelText=\"Tidak\"\n                                onConfirm={() => {\n                                  setfielddata2((prev) =>\n                                    prev.filter((_, idxx) => idxx !== idx)\n                                  );\n                                  setnewdata((prev) => {\n                                    var temp = prev;\n                                    temp.model_columns =\n                                      temp.model_columns.filter(\n                                        (_, idxx) =>\n                                          idxx !== fielddata.length + idx\n                                      );\n                                    return temp;\n                                  });\n                                  if (\n                                    defaultdata.model_columns.some(\n                                      (docdef) => docdef.id === doc.id\n                                    )\n                                  ) {\n                                    setnewdata((prev) => {\n                                      var temp = prev;\n                                      temp.delete_column_ids.push(doc.id);\n                                      const idxUpdateColumns =\n                                        temp.update_columns\n                                          .map((docmap) => docmap.id)\n                                          .indexOf(doc.id);\n                                      temp.update_columns.splice(\n                                        idxUpdateColumns,\n                                        1\n                                      );\n                                      const idxtemp = defaultdata.model_columns\n                                        .map((doctemp) => doctemp.id)\n                                        .indexOf(doc.id);\n                                      temp.model_columns.splice(idxtemp, 1);\n                                      return temp;\n                                    });\n                                  } else {\n                                    setnewdata((prev) => {\n                                      var temp = prev;\n                                      const idxtemp = temp.add_columns\n                                        .map((doctemp) => doctemp.name)\n                                        .indexOf(doc.name);\n                                      idxtemp !== -1\n                                        ? temp.add_columns.splice(idxtemp, 1)\n                                        : null;\n                                      return temp;\n                                    });\n                                  }\n                                  setaddedfield((prev) => {\n                                    prev.splice(idx, 1);\n                                    return prev;\n                                  });\n                                  setdisabledaddfield(false);\n                                  setpointevent(\"\");\n                                }}\n                              >\n                                <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                                  <DeleteOutlined\n                                    style={{ fontSize: `1.25rem` }}\n                                  ></DeleteOutlined>\n                                </div>\n                              </Popconfirm>\n                              <div className=\" flex items-center mr-4\">\n                                <Checkbox\n                                  checked={currentfield.required}\n                                  style={{ marginRight: `0.5rem` }}\n                                  onChange={(e) => {\n                                    setcurrentfield({\n                                      ...currentfield,\n                                      required: e.target.checked,\n                                    });\n                                  }}\n                                />{\" \"}\n                                Required\n                              </div>\n                              <Button\n                                disabled={disabledtambah}\n                                type=\"primary\"\n                                onClick={() => {\n                                  if (\n                                    currentfield.data_type === \"dropdown\" ||\n                                    currentfield.data_type === \"checkbox\"\n                                  ) {\n                                    setidxdropdowntrigger(idx);\n                                    setvaluedropdowntrigger((prev) => !prev);\n                                  }\n                                  setconcataddcolumnsidx(idx);\n                                  setconcataddcolumnsvalue(doc);\n                                  setconcataddcolumnstrigger((prev) => !prev);\n                                  const temp = fielddata2;\n                                  temp[idx] = currentfield;\n                                  setfielddata2(temp);\n                                  setaddedfieldidx(idx);\n                                  setaddedfieldtrigger((prev) => !prev);\n                                  setconcatfieldtrigger((prev) => !prev);\n                                  setdisabledaddfield(false);\n                                  setpointevent(\"\");\n                                }}\n                              >\n                                Tambah\n                              </Button>\n                            </div>\n                          </Form>\n                        </div>\n                      )}\n                    </>\n                  );\n                })\n              )}\n            </>\n          )}\n          {fielddata.map((doc, idx) => {\n            return (\n              <>\n                {addedfield1[idx] === true ? (\n                  <div\n                    key={idx}\n                    className={`${pointevent} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                    onClick={() => {\n                      const temp = [...addedfield1];\n                      temp[idx] = false;\n                      for (var i = 0; i < temp.length; i++) {\n                        if (i !== idx) {\n                          temp[i] = true;\n                        }\n                      }\n                      setaddedfield1(temp);\n                      setcurrentfield(fielddata[idx]);\n                      if (\n                        doc.data_type === \"dropdown\" ||\n                        doc.data_type === \"checkbox\"\n                      ) {\n                        setcurrentdropdown2(doc.default.opsi);\n                        setcurrentcheckeddropdown2(doc.default.default);\n                      }\n                      if (\n                        fielddata[idx].data_type !== \"dropdown\" ||\n                        fielddata[idx].data_type !== \"checkbox\"\n                      ) {\n                        setcd2(doc.default.opsi);\n                        if (\n                          fielddata[idx].name !== \"\" &&\n                          fielddata[idx].data_type !== \"\"\n                        ) {\n                          setdisabledtambah(false);\n                        } else {\n                          setdisabledtambah(true);\n                        }\n                      } else {\n                        if (\n                          doc.default.opsi.some((docopsi) => docopsi === \"\")\n                        ) {\n                          setdisabledtambah(true);\n                        } else {\n                          setdisabledtambah(false);\n                        }\n                      }\n                      setdisabledaddfield(true);\n                      setpointevent(\"pointer-events-none\");\n                    }}\n                  >\n                    <div className=\"font-semibold mb-2\">\n                      {doc.name}\n                      {fielddata[idx].required ? (\n                        <span className=\"judulField\"></span>\n                      ) : null}{\" \"}\n                      <span className=\"text-gray-400 text-sm\">\n                        (\n                        {doc.data_type === \"single\"\n                          ? \"Single Textbox\"\n                          : doc.data_type.charAt(0).toUpperCase() +\n                            doc.data_type.slice(1)}\n                        {doc.data_type === \"paragraph\" && ` Text`})\n                      </span>\n                    </div>\n                    <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                      {doc.data_type === \"checkbox\" ||\n                      doc.data_type === \"dropdown\" ||\n                      doc.data_type === \"paragraph\" ||\n                      doc.data_type === \"date\" ? (\n                        <>\n                          {doc.data_type === \"dropdown\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <Checkbox\n                                      disabled\n                                      checked={\n                                        doc.default.default === idk\n                                          ? true\n                                          : false\n                                      }\n                                      style={{ marginRight: `0.5rem` }}\n                                    />\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"checkbox\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <Checkbox\n                                      disabled\n                                      checked={\n                                        doc.default.default.indexOf(idk) !== -1\n                                          ? true\n                                          : false\n                                      }\n                                      style={{ marginRight: `0.5rem` }}\n                                    />\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"date\" && (\n                            <div className=\"flex justify-between w-full px-3\">\n                              <p className=\"mb-0\">{doc.default}</p>\n                              <div>\n                                <CalendarOutlined></CalendarOutlined>\n                              </div>\n                            </div>\n                          )}\n                          {doc.data_type === \"paragraph\" && (\n                            <div className=\"flex h-20\">{doc.default}</div>\n                          )}\n                        </>\n                      ) : (\n                        <p className=\"mb-0\">{doc.default}</p>\n                      )}\n                    </div>\n                    <style jsx>\n                      {`\n                                                    .judulField::before{\n                                                        content: '*';\n                                                        color: red;\n                                                    }\n                                                `}\n                    </style>\n                  </div>\n                ) : (\n                  <div\n                    key={idx}\n                    className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                  >\n                    <Form layout=\"vertical\" initialValues={currentfield}>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                        <Form.Item\n                          name=\"name\"\n                          label=\"Nama Spesifikasi\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Nama Spesifikasi wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Input\n                            required\n                            name=\"name\"\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                name: e.target.value,\n                              });\n                              if (e.target.value === \"\") {\n                                setdisabledtambah(true);\n                              } else if (\n                                e.target.value !== \"\" &&\n                                currentfield.data_type !== \"\" &&\n                                currentdropdown2.every(\n                                  (doca, idxa) => doca !== \"\"\n                                )\n                              ) {\n                                setdisabledtambah(false);\n                              }\n                            }}\n                          />\n                        </Form.Item>\n                        <Form.Item\n                          name=\"data_type\"\n                          label=\"Tipe Field\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Tipe Field wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Select\n                            placeholder=\"Pilih Tipe Field\"\n                            onChange={(value) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                data_type: value,\n                              });\n                              if (\n                                value === \"dropdown\" ||\n                                value === \"checkbox\"\n                              ) {\n                                if (\n                                  currentdropdown2.every(\n                                    (doca, idxa) => doca !== \"\"\n                                  )\n                                ) {\n                                  setdisabledtambah(false);\n                                } else {\n                                  setdisabledtambah(true);\n                                }\n                              } else {\n                                setdisabledtambah(false);\n                              }\n                              if (value === \"dropdown\") {\n                                setcurrentcheckeddropdown2(\"\");\n                                setcurrentdropdown2([\"\", \"\"]);\n                                setcd2([\"\", \"\"]);\n                                setdisabledtambah(true);\n                              }\n                              if (value === \"checkbox\") {\n                                setcurrentcheckeddropdown2([]);\n                                setcurrentdropdown2([\"\", \"\"]);\n                                setcd2([\"\", \"\"]);\n                                setdisabledtambah(true);\n                              }\n                            }}\n                            name=\"data_type\"\n                          >\n                            <Select.Option value={\"dropdown\"}>\n                              Dropdown\n                            </Select.Option>\n                            <Select.Option value={\"number\"}>\n                              Number\n                            </Select.Option>\n                            <Select.Option value={\"paragraph\"}>\n                              Paragraph Text\n                            </Select.Option>\n                            <Select.Option value={\"checkbox\"}>\n                              Checkbox\n                            </Select.Option>\n                            <Select.Option value={\"single\"}>\n                              Single Textbox\n                            </Select.Option>\n                            <Select.Option value={\"date\"}>Date</Select.Option>\n                          </Select>\n                        </Form.Item>\n                      </div>\n                      <Form.Item name=\"default\" label=\"Default\">\n                        {currentfield.data_type.toLowerCase() === \"dropdown\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default hanya dipilih 1 (satu) dari beberapa opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdown2.map((doc, idxx) => (\n                              <div className=\"flex mb-3\">\n                                <div className=\"w-7 flex items-center\">\n                                  <Checkbox\n                                    checked={\n                                      currentcheckeddropdown2 === idxx\n                                        ? true\n                                        : false\n                                    }\n                                    onChange={(e) => {\n                                      if (e.target.checked === true) {\n                                        setcurrentcheckeddropdown2(idxx);\n                                      }\n                                    }}\n                                  ></Checkbox>\n                                </div>\n                                <div className=\"w-10/12 mr-5\">\n                                  <Input\n                                    style={{ marginRight: `0.5rem` }}\n                                    defaultValue={doc}\n                                    placeholder={`Masukkan opsi ke-${idxx + 1}`}\n                                    onChange={(e) => {\n                                      setcurrentdropdown2((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      setcd2((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      if (\n                                        e.target.value !== \"\" &&\n                                        currentdropdown2.every(\n                                          (doca, idxa) => doca !== \"\"\n                                        ) &&\n                                        currentfield.name !== \"\"\n                                      ) {\n                                        setdisabledtambah(false);\n                                      } else if (\n                                        e.target.value === \"\" ||\n                                        currentfield.name === \"\"\n                                      ) {\n                                        setdisabledtambah(true);\n                                      }\n                                    }}\n                                  />\n                                </div>\n                                <div\n                                  className=\"w-1/12 flex justify-around\"\n                                  onClick={() => {\n                                    setcurrentdropdown2([]);\n                                    setcdtrigger((prev) => !prev);\n                                    setcdidx(idxx);\n                                  }}\n                                >\n                                  <Button type=\"danger\">-</Button>\n                                </div>\n                              </div>\n                            ))}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdown2([\n                                    ...currentdropdown2,\n                                    \"\",\n                                  ]);\n                                  setcd2([...cd2, \"\"]);\n                                  setdisabledtambah(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield.data_type.toLowerCase() === \"checkbox\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default dapat dipilih lebih dari 1 (satu) opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdown2.map((doc, idxx) => {\n                              const idxchecked =\n                                currentcheckeddropdown2.includes(idxx);\n                              return (\n                                <div className=\"flex mb-3\">\n                                  <div className=\"w-7 flex items-center\">\n                                    <Checkbox\n                                      defaultChecked={idxchecked}\n                                      onChange={(e) => {\n                                        if (e.target.checked === true) {\n                                          setcurrentcheckeddropdown2((prev) => {\n                                            var temp = prev;\n                                            temp.push(idxx);\n                                            return temp;\n                                          });\n                                        } else {\n                                          setcurrentcheckeddropdown2((prev) => {\n                                            var temp = prev;\n                                            const index = temp.indexOf(idxx);\n                                            temp.splice(index, 1);\n                                            return temp;\n                                          });\n                                        }\n                                      }}\n                                    ></Checkbox>\n                                  </div>\n                                  <div className=\"w-10/12 mr-5\">\n                                    <Input\n                                      style={{ marginRight: `0.5rem` }}\n                                      defaultValue={doc}\n                                      placeholder={`Masukkan opsi ke-${\n                                        idxx + 1\n                                      }`}\n                                      onChange={(e) => {\n                                        setcurrentdropdown2((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        setcd2((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        if (\n                                          e.target.value !== \"\" &&\n                                          currentdropdown2.every(\n                                            (doca, idxa) => doca !== \"\"\n                                          ) &&\n                                          currentfield.name !== \"\"\n                                        ) {\n                                          setdisabledtambah(false);\n                                        } else if (\n                                          e.target.value === \"\" ||\n                                          currentfield.name === \"\"\n                                        ) {\n                                          setdisabledtambah(true);\n                                        }\n                                      }}\n                                    />\n                                  </div>\n                                  <div\n                                    className=\"w-1/12 flex justify-around\"\n                                    onClick={() => {\n                                      setcurrentdropdown2([]);\n                                      setcdtrigger((prev) => !prev);\n                                      setcdidx(idxx);\n                                    }}\n                                  >\n                                    <Button type=\"danger\">-</Button>\n                                  </div>\n                                </div>\n                              );\n                            })}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdown2([\n                                    ...currentdropdown2,\n                                    \"\",\n                                  ]);\n                                  setcd2([...cd2, \"\"]);\n                                  setdisabledtambah(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield.data_type.toLowerCase() === \"number\" && (\n                          <InputNumber\n                            style={{ width: `30%` }}\n                            defaultValue={fielddata[idx].default}\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            onChange={(value) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: `${value}`,\n                              });\n                            }}\n                          ></InputNumber>\n                        )}\n                        {currentfield.data_type.toLowerCase() ===\n                          \"paragraph\" && (\n                          <Input.TextArea\n                            rows={4}\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            defaultValue={fielddata[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input.TextArea>\n                        )}\n                        {currentfield.data_type.toLowerCase() === \"string\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            defaultValue={fielddata[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield.data_type.toLowerCase() === \"single\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            defaultValue={fielddata[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield.data_type.toLowerCase() === \"date\" && (\n                          <DatePicker\n                            defaultValue={moment(fielddata[idx].default)}\n                            style={{ width: `30%` }}\n                            placeholder={`Masukkan default ${currentfield.name}`}\n                            onChange={(value, dateString) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                default: dateString,\n                              });\n                            }}\n                          ></DatePicker>\n                        )}\n                      </Form.Item>\n                      <hr />\n                      <div className=\"flex mt-4 justify-end\">\n                        <Popconfirm\n                          placement=\"bottom\"\n                          title={`Apakah anda yakin ingin menghapus field ${\n                            doc.name === \"\" ? \"ini\" : doc.name\n                          }?`}\n                          okText=\"Ya\"\n                          cancelText=\"Tidak\"\n                          onConfirm={() => {\n                            setfielddata((prev) =>\n                              prev.filter((_, idxx) => idxx !== idx)\n                            );\n                            setnewdata((prev) => {\n                              var temp = prev;\n                              temp.model_columns = temp.model_columns.filter(\n                                (_, idxx) => idxx !== fielddata2.length + idx\n                              );\n                              return temp;\n                            });\n                            if (\n                              defaultdata.model_columns.some(\n                                (docdef) => docdef.id === doc.id\n                              )\n                            ) {\n                              setnewdata((prev) => {\n                                var temp = prev;\n                                temp.delete_column_ids.push(doc.id);\n                                const idxtemp = defaultdata.model_columns\n                                  .map((doctemp) => doctemp.id)\n                                  .indexOf(doc.id);\n                                temp.model_columns.splice(idxtemp, 1);\n                                return temp;\n                              });\n                            } else {\n                              setnewdata((prev) => {\n                                var temp = prev;\n                                const idxtemp = temp.add_columns\n                                  .map((doctemp) => doctemp.name)\n                                  .indexOf(doc.name);\n                                idxtemp !== -1\n                                  ? temp.add_columns.splice(idxtemp, 1)\n                                  : null;\n                                return temp;\n                              });\n                            }\n                            setaddedfield1((prev) => {\n                              prev.splice(idx, 1);\n                              return prev;\n                            });\n                            setdisabledaddfield(false);\n                            setpointevent(\"\");\n                          }}\n                        >\n                          <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                            <DeleteOutlined\n                              style={{ fontSize: `1.25rem` }}\n                            ></DeleteOutlined>\n                          </div>\n                        </Popconfirm>\n                        <div className=\" flex items-center mr-4\">\n                          <Checkbox\n                            checked={currentfield.required}\n                            style={{ marginRight: `0.5rem` }}\n                            onChange={(e) => {\n                              setcurrentfield({\n                                ...currentfield,\n                                required: e.target.checked,\n                              });\n                            }}\n                          />{\" \"}\n                          Required\n                        </div>\n                        <Button\n                          disabled={disabledtambah}\n                          type=\"primary\"\n                          onClick={() => {\n                            if (\n                              currentfield.data_type === \"dropdown\" ||\n                              currentfield.data_type === \"checkbox\"\n                            ) {\n                              setidxdropdowntrigger1(idx);\n                              setvaluedropdowntrigger1((prev) => !prev);\n                            }\n                            setconcataddcolumnsidx1(idx);\n                            setconcataddcolumnsvalue1(doc);\n                            setconcataddcolumnstrigger1((prev) => !prev);\n                            const temp = fielddata;\n                            temp[idx] = currentfield;\n                            setfielddata(temp);\n                            setaddedfieldidx1(idx);\n                            setaddedfieldtrigger1((prev) => !prev);\n                            setconcatfieldtrigger((prev) => !prev);\n                            setdisabledaddfield(false);\n                            setpointevent(\"\");\n                          }}\n                        >\n                          Tambah\n                        </Button>\n                      </div>\n                    </Form>\n                  </div>\n                )}\n              </>\n            );\n          })}\n          <div className=\"w-full flex justify-center mt-5\">\n            <Button\n              type=\"dashed\"\n              disabled={disabledaddfield}\n              style={{ width: `80%`, height: `4rem` }}\n              onClick={onClickAddField}\n            >\n              + Tambah Spesifikasi Model\n            </Button>\n          </div>\n        </div>\n        {newdata.is_consumable === false && (\n          <div className=\" mb-8 col-span-1 md:col-span-4 px-5 flex flex-col\">\n            <div className=\"mb-5\">\n              <h1 className=\"font-bold text-xl\">Konfigurasi Part Model</h1>\n            </div>\n            {modelpartfielddata.length === 0 ? null : (\n              <>\n                <Collapse accordion>\n                  {modelpartfielddata.map((doc, idx) => {\n                    return (\n                      <Panel\n                        id={`panel${idx}`}\n                        key={idx}\n                        header={\n                          <strong>\n                            {\n                              doc.name\n                              // ?\n                              // <>\n                              //     {\n                              //         doc.model_child.length === 0 ?\n                              //             <div className=\"flex items-center w-6/12\">\n                              //                 <span className=\"mr-2\">{doc.name}</span>\n                              //                 <Tooltip placement=\"right\" title=\"Model tidak memiliki part model!\">\n                              //                     <ExclamationCircleOutlined style={{ color: `brown` }}></ExclamationCircleOutlined>\n                              //                 </Tooltip>\n                              //             </div>\n                              //             :\n                              //             doc.name\n                              //     }\n                              // </>\n                              // :\n                              // \"-\"\n                            }\n                          </strong>\n                        }\n                        extra={\n                          <div className=\"absolute top-2 right-2\">\n                            <Popconfirm\n                              placement=\"bottom\"\n                              title={`Apakah anda yakin ingin menghapus Model ${\n                                doc.name === \"\" ? \"ini\" : doc.name\n                              } dari Model Part ${newdata.name}?`}\n                              okText=\"Ya\"\n                              cancelText=\"Tidak\"\n                              onConfirm={() => {\n                                // console.log(doc)\n                                setnewdata((prev) => {\n                                  var temp = prev;\n                                  var idxtemp = modelpartfielddata\n                                    .map((doctemp) => doctemp.id)\n                                    .indexOf(doc.id);\n                                  if (\n                                    defaultdata.model_parts\n                                      .map((docparts) => docparts.id)\n                                      .includes(doc.id) === false &&\n                                    idxtemp !== -1\n                                  ) {\n                                    const idxdata = temp.add_models\n                                      .map((doc2) => doc2.id)\n                                      .indexOf(doc.id);\n                                    if (temp.add_models[idxdata].quantity > 1) {\n                                      temp.add_models[idxdata].quantity -= 1;\n                                    } else {\n                                      temp.add_models.splice(idxdata, 1);\n                                    }\n                                  }\n                                  if (\n                                    defaultdata.model_parts\n                                      .map((docparts) => docparts.id)\n                                      .includes(doc.id) === true &&\n                                    idxtemp !== -1\n                                  ) {\n                                    if (\n                                      temp.delete_model_ids.indexOf(doc.id) ===\n                                      -1\n                                    ) {\n                                      temp.delete_model_ids.push(doc.id);\n                                    }\n                                  }\n                                  return temp;\n                                });\n                                setmodelpartfielddata((prev) =>\n                                  prev.filter((_, idxx) => idxx !== idx)\n                                );\n                              }}\n                            >\n                              <CloseCircleOutlined style={{ color: `red` }} />\n                            </Popconfirm>\n                          </div>\n                        }\n                      >\n                        <div className=\"flex flex-col p-3\">\n                          <div className=\"flex flex-col mb-5\">\n                            <h1 className=\"font-semibold mb-1\">\n                              Asset Type{\" \"}\n                              <span className=\"judulassettype\"></span>\n                            </h1>\n                            <div className=\"rounded bg-gray-200 w-full flex items-center my-auto h-12 px-2\">\n                              <p className=\"mb-0 text-sm\">{doc.name}</p>\n                            </div>\n                          </div>\n                          {doc.model_columns.map((docmc, idxmc) => {\n                            return (\n                              <div className=\"flex flex-col mb-5\">\n                                <h1 className=\"font-semibold mb-1\">\n                                  {docmc.name}{\" \"}\n                                  {docmc.required ? (\n                                    <span className=\"judulsn\"></span>\n                                  ) : null}{\" \"}\n                                  <span className=\"text-gray-400\">\n                                    {docmc.data_type ? (\n                                      <>\n                                        (\n                                        {docmc.data_type\n                                          .charAt(0)\n                                          .toUpperCase() +\n                                          docmc.data_type.slice(1)}\n                                        )\n                                      </>\n                                    ) : (\n                                      \"\"\n                                    )}\n                                  </span>\n                                </h1>\n                                <div className=\"w-full flex flex-col justify-center my-auto px-2 py-1\">\n                                  {docmc.data_type === \"dropdown\" ||\n                                  docmc.data_type === \"checkbox\" ||\n                                  docmc.data_type === \"paragraph\" ||\n                                  docmc.data_type === \"date\" ? (\n                                    <>\n                                      {docmc.data_type === \"dropdown\" && (\n                                        <>\n                                          {docmc.default.opsi.map(\n                                            (docopsi, idxopsi) => (\n                                              <div\n                                                key={idxopsi}\n                                                className=\"rounded bg-white border w-3/12 flex items-center my-auto px-2 py-1 mb-1\"\n                                              >\n                                                <Checkbox\n                                                  disabled\n                                                  checked={\n                                                    idxopsi ===\n                                                    docmc.default.default\n                                                  }\n                                                  style={{\n                                                    marginRight: `0.5rem`,\n                                                  }}\n                                                />\n                                                {docopsi}\n                                              </div>\n                                            )\n                                          )}\n                                        </>\n                                      )}\n                                      {docmc.data_type === \"checkbox\" && (\n                                        <>\n                                          {docmc.default.opsi.map(\n                                            (docopsi, idxopsi) => (\n                                              <div\n                                                key={idxopsi}\n                                                className=\"rounded w-full flex items-center my-auto px-2 py-1 mb-1\"\n                                              >\n                                                <Checkbox\n                                                  disabled\n                                                  checked={\n                                                    idxopsi ===\n                                                    docmc.default.default\n                                                  }\n                                                  style={{\n                                                    marginRight: `0.5rem`,\n                                                  }}\n                                                />\n                                                {docopsi}\n                                              </div>\n                                            )\n                                          )}\n                                        </>\n                                      )}\n                                      {docmc.data_type === \"date\" && (\n                                        <div className=\"flex w-full items-center justify-between bg-gray-100 rounded h-10 px-3\">\n                                          <p className=\"mb-0\">\n                                            {docmc.default}\n                                          </p>\n                                          <div>\n                                            <CalendarOutlined></CalendarOutlined>\n                                          </div>\n                                        </div>\n                                      )}\n                                      {docmc.data_type === \"paragraph\" && (\n                                        <div className=\"flex h-20 rounded border bg-gray-100 w-full px-3\">\n                                          {docmc.default}\n                                        </div>\n                                      )}\n                                    </>\n                                  ) : (\n                                    <div className=\"rounded border bg-gray-100 flex items-center w-full h-10 px-3\">\n                                      {docmc.default}\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            );\n                          })}\n                          {doc.model_parts.length === 0 ? null : (\n                            <>\n                              <Timeline style={{ marginTop: `1rem` }}>\n                                {renderChildPartModel(doc.model_parts)}\n                              </Timeline>\n                            </>\n                          )}\n                        </div>\n                        <style jsx>\n                          {`\n                                                        .judulassettype::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                        .judulsn::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n                        </style>\n                      </Panel>\n                    );\n                  })}\n                </Collapse>\n              </>\n            )}\n            <>\n              {editpart ? (\n                <div className=\"shadow-md border p-8 mx-3 md:mx-8 my-3 flex flex-col rounded-md relative\">\n                  <div\n                    className=\"absolute top-2 right-5 text-lg cursor-pointer\"\n                    onClick={() => {\n                      seteditpart(false);\n                    }}\n                  >\n                    x\n                  </div>\n                  <Form layout=\"vertical\" initialValues={currentidmodel}>\n                    <div className=\"flex mb-2\">\n                      <div className=\" w-11/12 mr-3\">\n                        <Form.Item\n                          name=\"id\"\n                          label=\"Nama Model\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Nama Model wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Select\n                            defaultValue={currentidmodel}\n                            notFoundContent={\n                              fetchingpart ? <Spin size=\"small\" /> : null\n                            }\n                            onSearch={(value) => {\n                              setfetchingpart(true);\n                              fetch(\n                                `${\n                                  process.env.NEXT_PUBLIC_BACKEND_URL\n                                }/getModels?rows=10&name=${\n                                  value !== \"\" ? value : \"\"\n                                }`,\n                                {\n                                  method: `GET`,\n                                  headers: {\n                                    Authorization: JSON.parse(initProps),\n                                  },\n                                }\n                              )\n                                .then((res) => res.json())\n                                .then((res2) => {\n                                  res2.data.length === 0\n                                    ? setmodeldata([])\n                                    : setmodeldata(res2.data.data);\n                                  setfetchingpart(false);\n                                });\n                            }}\n                            showSearch\n                            optionFilterProp=\"children\"\n                            placeholder=\"Masukkan atau cari nama modul\"\n                            onChange={(value) => {\n                              setcurrentidmodel(value);\n                            }}\n                            name=\"id\"\n                            filterOption={(input, opt) =>\n                              opt.children\n                                .toLowerCase()\n                                .indexOf(input.toLowerCase()) >= 0\n                            }\n                            // onPopupScroll={(event) => {\n                            //     if (event.target.scrollTop + event.target.offsetHeight === event.target.scrollHeight) {\n                            //         setpage(prev => prev + 1)\n                            //         fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?page=${page}&rows=10`, {\n                            //             method: `GET`,\n                            //             headers: {\n                            //                 'Authorization': JSON.parse(initProps),\n                            //             },\n                            //         })\n                            //             .then(res => res.json())\n                            //             .then(res2 => {\n                            //                 event.target.scrollTo(0, event.target.scrollHeight)\n                            //                 res2.data.to >= res2.data.total ? setmodeldata([...modeldata, res2.data.data]) : setmodeldata([...modeldata, res2.data.data, <Spin size=\"small\" />])\n                            //             })\n                            //     }\n                            // }}\n                          >\n                            {modeldata.map((doc, idx) => {\n                              return (\n                                <Select.Option key={doc.id} value={doc.id}>\n                                  {doc.name}\n                                </Select.Option>\n                              );\n                            })}\n                          </Select>\n                        </Form.Item>\n                      </div>\n                      <div\n                        className=\"w-1/12 flex pt-2 my-auto items-center cursor-pointer\"\n                        onClick={() => {\n                          setmodalcreatemodel(true);\n                        }}\n                      >\n                        <PlusSquareTwoTone style={{ fontSize: `1.5rem` }} />\n                      </div>\n                    </div>\n                    <hr />\n                    <div className=\"flex mt-4 justify-end\">\n                      <div\n                        className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\"\n                        onClick={() => {\n                          seteditpart(false);\n                          setcurrentidmodel(\"\");\n                        }}\n                      >\n                        <DeleteOutlined\n                          style={{ fontSize: `1.25rem` }}\n                        ></DeleteOutlined>\n                      </div>\n                      <Button\n                        loading={loadinggetmodel}\n                        type=\"primary\"\n                        onClick={() => {\n                          seteditpart(false);\n                          setloadinggetmodel(true);\n                          fetch(\n                            `${process.env.NEXT_PUBLIC_BACKEND_URL}/getModel?id=${currentidmodel}`,\n                            {\n                              method: `GET`,\n                              headers: {\n                                Authorization: JSON.parse(initProps),\n                              },\n                            }\n                          )\n                            .then((res) => res.json())\n                            .then((res2) => {\n                              setmodelpartfielddata((prev) => {\n                                var temp1 = prev;\n                                var t = {};\n                                for (var prop in res2.data) {\n                                  if (prop === \"model_columns\") {\n                                    t[\"model_columns\"] = res2.data[prop].map(\n                                      (doc, idx) => {\n                                        if (\n                                          doc.data_type === \"dropdown\" ||\n                                          doc.data_type === \"checkbox\"\n                                        ) {\n                                          return {\n                                            ...doc,\n                                            default: JSON.parse(doc.default),\n                                          };\n                                        } else {\n                                          return { ...doc };\n                                        }\n                                      }\n                                    );\n                                  } else {\n                                    const modelparts =\n                                      res2.data.model_parts.map((doc2) => {\n                                        const map3 = doc2.model_columns.map(\n                                          (doc3) => {\n                                            if (\n                                              doc3.data_type === \"dropdown\" ||\n                                              doc3.data_type === \"checkbox\"\n                                            ) {\n                                              return {\n                                                ...doc3,\n                                                default: JSON.parse(\n                                                  doc3.default\n                                                ),\n                                              };\n                                            } else {\n                                              return { ...doc3 };\n                                            }\n                                          }\n                                        );\n                                        return {\n                                          ...doc2,\n                                          model_columns: map3,\n                                        };\n                                      });\n                                    t[\"model_parts\"] = modelparts;\n                                    t[\"id\"] = res2.data.id;\n                                    t[\"name\"] = res2.data.name;\n                                  }\n                                }\n                                temp1 = [...temp1, t];\n                                return temp1;\n                              });\n                              // setconcatpartvalue(res2.data.model_parts)\n                              // setconcatparttrigger(prev => !prev)\n                              setnewdata((prev) => {\n                                var temp = prev;\n                                const idxdata2 = temp.add_models\n                                  .map((doc3) => doc3.id)\n                                  .indexOf(currentidmodel);\n                                if (\n                                  temp.add_models.length === 0 ||\n                                  idxdata2 === -1\n                                ) {\n                                  temp.add_models.push({\n                                    id: currentidmodel,\n                                    quantity: 1,\n                                  });\n                                } else if (idxdata2 !== -1) {\n                                  temp.add_models.map((doc1) => {\n                                    if (doc1.id === currentidmodel) {\n                                      doc1.quantity = doc1.quantity + 1;\n                                    }\n                                  });\n                                }\n                                return temp;\n                              });\n                              setloadinggetmodel(false);\n                              setcurrentidmodel(\"\");\n                            });\n                        }}\n                      >\n                        Tambah\n                      </Button>\n                    </div>\n                  </Form>\n                </div>\n              ) : null}\n            </>\n            <div className=\"w-full flex justify-center mt-5\">\n              <Button\n                type=\"dashed\"\n                style={{ width: `80%`, height: `4rem` }}\n                onClick={() => {\n                  seteditpart(true);\n                }}\n              >\n                + Tambah Part Model\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">Form Tambah Model</h1>\n            <div className=\"flex\">\n              <Button\n                type=\"default\"\n                onClick={() => {\n                  setmodalcreatemodel(false);\n                }}\n                style={{ marginRight: `1rem` }}\n              >\n                Batal\n              </Button>\n              <Button\n                type=\"primary\"\n                disabled={disabledaddfield2}\n                onClick={instanceForm2.submit}\n                loading={loadingcreatemodel}\n              >\n                Simpan\n              </Button>\n            </div>\n          </div>\n        }\n        visible={modalcreatemodel}\n        footer={null}\n        onCancel={() => {\n          setmodalcreatemodel(false);\n        }}\n        width={900}\n      >\n        <div className=\"shadow-md border p-8 flex flex-col rounded-md mb-8\">\n          <Form\n            form={instanceForm2}\n            layout=\"vertical\"\n            onFinish={handleCreateModelinModel}\n          >\n            <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n              <Form.Item\n                name=\"asset_id\"\n                label=\"Asset Type\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Asset Type wajib diisi\",\n                  },\n                ]}\n              >\n                <TreeSelect\n                  style={{ marginRight: `1rem` }}\n                  dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                  treeData={assetdata}\n                  placeholder=\"Pilih Asset Type\"\n                  treeDefaultExpandAll\n                  onChange={(value, label, extra) => {\n                    if (typeof value !== \"undefined\") {\n                      onClickSelectAsset2(\n                        extra.allCheckedNodes[0].node.props.id\n                      );\n                    } else {\n                      onClickSelectAsset2(0);\n                    }\n                  }}\n                  allowClear\n                />\n              </Form.Item>\n              <Form.Item\n                name=\"name\"\n                label=\"Nama Model\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Nama Model wajib diisi\",\n                  },\n                ]}\n              >\n                <Input\n                  name=\"name\"\n                  onChange={(e) => {\n                    setnewdata2({ ...newdata2, name: e.target.value });\n                  }}\n                  allowClear\n                />\n              </Form.Item>\n            </div>\n            <Form.Item\n              name=\"manufacturer_id\"\n              label=\"Manufacturer\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Manufacturer wajib diisi\",\n                },\n              ]}\n            >\n              <Select\n                placeholder=\"Pilih Manufacturer\"\n                onChange={(value) => {\n                  setnewdata2({ ...newdata2, manufacturer_id: value });\n                }}\n                name=\"manufacturer_id\"\n              >\n                {manufdata.map((doc, idx) => {\n                  return (\n                    <Select.Option key={idx} value={doc.id}>\n                      {doc.name}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            </Form.Item>\n            <Form.Item name=\"description\" label=\"Deskripsi\">\n              <Input.TextArea\n                rows={4}\n                name=\"description\"\n                onChange={(e) => {\n                  setnewdata2({ ...newdata2, description: e.target.value });\n                }}\n              />\n            </Form.Item>\n            <div className=\"flex\">\n              <Checkbox\n                style={{ marginRight: `0.5rem` }}\n                onChange={(e) => {\n                  setnewdata2({ ...newdata2, required_sn: e.target.checked });\n                }}\n                checked={newdata2.required_sn}\n              />{\" \"}\n              Serial Number wajib ada\n            </div>\n          </Form>\n        </div>\n        <div className=\" col-span-1 md:col-span-4 px-5 mb-8 flex flex-col\">\n          <div className=\"mb-5\">\n            <h1 className=\"font-bold text-xl\">Spesifikasi Model</h1>\n          </div>\n          {/* {\n                        loadingspec2 ?\n                            <Spin />\n                            :\n                            <>\n                                {\n                                    fielddataa.map((doc, idx) => {\n                                        return (\n                                            <div key={idx} className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\">\n                                                <div className=\"font-semibold mb-2\">\n                                                    {doc.name}\n                                                    {fielddataa[idx].required ? <span className=\"judulField\"></span> : null} <span className=\"text-gray-400 text-sm\">({doc.data_type === \"single\" ? \"Single Textbox\" : doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1)})</span>\n                                                </div>\n                                                <div className='w-full'>\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"dropdown\" &&\n                                                        <div className=\"flex flex-col\">\n                                                            <h1>Default hanya dipilih 1 (satu) dari beberapa opsi dibawah ini</h1>\n                                                            {\n                                                                doc.default.opsi.map((docc, idxx) => (\n                                                                    <div className=\"flex mb-3\">\n                                                                        <div className=\" w-7 flex justify-center mr-5\">\n                                                                            <Checkbox onChange={(e) => {\n                                                                                if (e.target.checked === true) {\n                                                                                    setfielddataa(prev => {\n                                                                                        var temp = prev\n                                                                                        temp[idx][\"default\"][\"default\"] = idxx\n                                                                                        return temp\n                                                                                    })\n                                                                                }\n                                                                            }} />\n                                                                        </div>\n                                                                        <div className=\"w-10/12 mr-5\">\n                                                                            <Input style={{ marginRight: `0.5rem` }} defaultValue={docc} placeholder={`Masukkan opsi ke-${idxx + 1}`} disabled\n                                                                            />\n                                                                        </div>\n                                                                    </div>\n                                                                ))\n                                                            }\n                                                        </div>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === 'number' &&\n                                                        <InputNumber style={{ width: `30%` }} placeholder={`Masukkan default ${doc.name}`} onChange={(value) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = `${value}`\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></InputNumber>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"paragraph\" &&\n                                                        <Input.TextArea rows={4} placeholder={`Masukkan default ${doc.name}`} onChange={(e) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = e.target.value\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></Input.TextArea>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"checkbox\" &&\n                                                        <div className=\"flex flex-col\">\n                                                            <h1>Default dapat dipilih lebih dari 1 (satu) opsi dibawah ini</h1>\n                                                            {\n                                                                doc.default.opsi.map((docc, idxx) => (\n                                                                    <div className=\"flex mb-3\">\n                                                                        <Checkbox style={{ marginRight: `0.5rem` }} onChange={(e) => {\n                                                                            if (e.target.checked === true) {\n                                                                                setfielddataa(prev => {\n                                                                                    var temp = prev\n                                                                                    temp[idx][\"default\"][\"default\"].push(idxx)\n                                                                                    return temp\n                                                                                })\n                                                                            }\n                                                                        }} /> {docc}\n                                                                    </div>\n                                                                ))\n                                                            }\n                                                        </div>\n                                                    }\n                                                    {\n                                                        (doc.data_type.toLowerCase() === \"string\") &&\n                                                        <Input placeholder={`Masukkan default ${doc.name}`} onChange={(e) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = e.target.value\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></Input>\n                                                    }\n                                                    {\n                                                        (doc.data_type.toLowerCase() === \"single\") &&\n                                                        <Input placeholder={`Masukkan default ${doc.name}`} onChange={(e) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = e.target.value\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></Input>\n                                                    }\n                                                    {\n                                                        doc.data_type.toLowerCase() === \"date\" &&\n                                                        <DatePicker placeholder={`Masukkan default ${doc.name}`} onChange={(value, dateString) => {\n                                                            setfielddataa(prev => {\n                                                                const temp = prev\n                                                                temp[idx][\"default\"] = dateString\n                                                                return temp\n                                                            })\n                                                            setconcatfieldtrigger2(prev => !prev)\n                                                        }}></DatePicker>\n                                                    }\n                                                </div>\n                                                <style jsx>\n                                                    {`\n                                                        .judulField::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n                                                </style>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </>\n                    } */}\n          {loadingspec2 ? (\n            <Spin />\n          ) : (\n            <>\n              {fielddataa.map((doc, idx) => {\n                return (\n                  <>\n                    {addedfield3[idx] === true ? (\n                      <div\n                        key={idx}\n                        className={`${pointevent2} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                        onClick={() => {\n                          const temp = [...addedfield3];\n                          temp[idx] = false;\n                          for (var i = 0; i < temp.length; i++) {\n                            if (i !== idx) {\n                              temp[i] = true;\n                            }\n                          }\n                          setaddedfield3(temp);\n                          setcurrentfield2(fielddataa[idx]);\n                          if (\n                            doc.data_type === \"dropdown\" ||\n                            doc.data_type === \"checkbox\"\n                          ) {\n                            setcurrentdropdownn2(doc.default.opsi);\n                            setcd2part(doc.default.opsi);\n                            setcurrentcheckeddropdownn2(doc.default.default);\n                          }\n                          if (\n                            fielddataa[idx].data_type !== \"dropdown\" ||\n                            fielddataa[idx].data_type !== \"checkbox\"\n                          ) {\n                            if (\n                              fielddataa[idx].name !== \"\" &&\n                              fielddataa[idx].data_type !== \"\"\n                            ) {\n                              setdisabledtambah2(false);\n                            } else {\n                              setdisabledtambah2(true);\n                            }\n                          } else {\n                            if (\n                              doc.default.opsi.some((docopsi) => docopsi === \"\")\n                            ) {\n                              setdisabledtambah2(true);\n                            } else {\n                              setdisabledtambah2(false);\n                            }\n                          }\n                          setdisabledaddfield2(true);\n                          setpointevent2(\"pointer-events-none\");\n                        }}\n                      >\n                        <div className=\"font-semibold mb-2\">\n                          {doc.name}\n                          {fielddataa[idx].required ? (\n                            <span className=\"judulField\"></span>\n                          ) : null}{\" \"}\n                          <span className=\"text-gray-400 text-sm\">\n                            (\n                            {doc.data_type === \"single\"\n                              ? \"Single Textbox\"\n                              : doc.data_type.charAt(0).toUpperCase() +\n                                doc.data_type.slice(1)}\n                            {doc.data_type === \"paragraph\" && ` Text`})\n                          </span>\n                        </div>\n                        <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                          {doc.data_type === \"checkbox\" ||\n                          doc.data_type === \"dropdown\" ||\n                          doc.data_type === \"checkbox\" ||\n                          doc.data_type === \"dropdown\" ? (\n                            <>\n                              {doc.data_type === \"dropdown\" && (\n                                <div className=\"flex flex-col w-full\">\n                                  {doc.default.opsi.map((dok, idk) => {\n                                    return (\n                                      <div\n                                        key={idk}\n                                        className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                      >\n                                        <p className=\"mb-0\">{dok}</p>\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              )}\n                              {doc.data_type === \"checkbox\" && (\n                                <div className=\"flex flex-col w-full\">\n                                  {doc.default.opsi.map((dok, idk) => {\n                                    return (\n                                      <div\n                                        key={idk}\n                                        className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                      >\n                                        <p className=\"mb-0\">{dok}</p>\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              )}\n                              {doc.data_type === \"date\" && (\n                                <div className=\"flex justify-between w-full px-3\">\n                                  <p className=\"mb-0\">{doc.default}</p>\n                                  <div>\n                                    <CalendarOutlined></CalendarOutlined>\n                                  </div>\n                                </div>\n                              )}\n                              {doc.data_type === \"paragraph\" && (\n                                <div className=\"flex h-20\">{doc.default}</div>\n                              )}\n                            </>\n                          ) : (\n                            <p className=\"mb-0\">{doc.default}</p>\n                          )}\n                        </div>\n                        <style jsx>\n                          {`\n                                                .judulField::before{\n                                                    content: '*';\n                                                    color: red;\n                                                }\n                                            `}\n                        </style>\n                      </div>\n                    ) : (\n                      <div\n                        key={idx}\n                        className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                      >\n                        <Form layout=\"vertical\" initialValues={currentfield2}>\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                            <Form.Item\n                              name=\"name\"\n                              label=\"Nama Field\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: \"Nama Field wajib diisi\",\n                                },\n                              ]}\n                            >\n                              <Input\n                                required\n                                name=\"name\"\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    name: e.target.value,\n                                  });\n                                  if (e.target.value === \"\") {\n                                    setdisabledtambah2(true);\n                                  } else if (\n                                    e.target.value !== \"\" &&\n                                    currentfield2.data_type !== \"\" &&\n                                    currentdropdownn2.every(\n                                      (doca, idxa) => doca !== \"\"\n                                    )\n                                  ) {\n                                    setdisabledtambah2(false);\n                                  }\n                                }}\n                              />\n                            </Form.Item>\n                            <Form.Item\n                              name=\"data_type\"\n                              label=\"Tipe Field\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: \"Tipe Field wajib diisi\",\n                                },\n                              ]}\n                            >\n                              <Select\n                                placeholder=\"Pilih Tipe Field\"\n                                onChange={(value) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    data_type: value,\n                                  });\n                                  if (\n                                    value === \"dropdown\" ||\n                                    value === \"checkbox\"\n                                  ) {\n                                    if (\n                                      currentdropdownn2.every(\n                                        (doca, idxa) => doca !== \"\"\n                                      )\n                                    ) {\n                                      setdisabledtambah2(false);\n                                    } else {\n                                      setdisabledtambah2(true);\n                                    }\n                                  } else {\n                                    setdisabledtambah2(false);\n                                  }\n                                  if (value === \"dropdown\") {\n                                    setcurrentcheckeddropdownn2(\"\");\n                                    setcurrentdropdownn2([\"\", \"\"]);\n                                    setcd2part([\"\", \"\"]);\n                                    setdisabledtambah2(true);\n                                  }\n                                  if (value === \"checkbox\") {\n                                    setcurrentcheckeddropdownn2([]);\n                                    setcurrentdropdownn2([\"\", \"\"]);\n                                    setcd2part([\"\", \"\"]);\n                                    setdisabledtambah2(true);\n                                  }\n                                }}\n                                name=\"data_type\"\n                              >\n                                <Select.Option value={\"dropdown\"}>\n                                  Dropdown\n                                </Select.Option>\n                                <Select.Option value={\"number\"}>\n                                  Number\n                                </Select.Option>\n                                <Select.Option value={\"paragraph\"}>\n                                  Paragraph Text\n                                </Select.Option>\n                                <Select.Option value={\"checkbox\"}>\n                                  Checkbox\n                                </Select.Option>\n                                <Select.Option value={\"single\"}>\n                                  Single Textbox\n                                </Select.Option>\n                                <Select.Option value={\"date\"}>\n                                  Date\n                                </Select.Option>\n                              </Select>\n                            </Form.Item>\n                          </div>\n                          <Form.Item name=\"default\" label=\"Default\">\n                            {currentfield2.data_type.toLowerCase() ===\n                            \"dropdown\" ? (\n                              <div className=\"flex flex-col\">\n                                <h1>\n                                  Default hanya dipilih 1 (satu) dari beberapa\n                                  opsi dibawah ini\n                                </h1>\n                                {currentdropdownn2.map((doc, idxx) => (\n                                  <div className=\"flex mb-3\">\n                                    <div className=\"w-7 flex items-center\">\n                                      <Checkbox\n                                        checked={\n                                          currentcheckeddropdownn2 === idxx\n                                            ? true\n                                            : false\n                                        }\n                                        onChange={(e) => {\n                                          if (e.target.checked === true) {\n                                            setcurrentcheckeddropdownn2(idxx);\n                                          }\n                                        }}\n                                      ></Checkbox>\n                                    </div>\n                                    <div className=\"w-10/12 mr-5\">\n                                      <Input\n                                        style={{ marginRight: `0.5rem` }}\n                                        defaultValue={doc}\n                                        placeholder={`Masukkan opsi ke-${\n                                          idxx + 1\n                                        }`}\n                                        onChange={(e) => {\n                                          setcurrentdropdownn2((prev) => {\n                                            const temp = prev;\n                                            temp[idxx] = e.target.value;\n                                            return temp;\n                                          });\n                                          setcd2part((prev) => {\n                                            const temp = prev;\n                                            temp[idxx] = e.target.value;\n                                            return temp;\n                                          });\n                                          if (\n                                            e.target.value !== \"\" &&\n                                            currentdropdownn2.every(\n                                              (doca, idxa) => doca !== \"\"\n                                            ) &&\n                                            currentfield2.name !== \"\"\n                                          ) {\n                                            setdisabledtambah2(false);\n                                          } else if (\n                                            e.target.value === \"\" ||\n                                            currentfield2.name === \"\"\n                                          ) {\n                                            setdisabledtambah2(true);\n                                          }\n                                        }}\n                                      />\n                                    </div>\n                                    <div\n                                      className=\"w-1/12 flex justify-around\"\n                                      onClick={() => {\n                                        setcurrentdropdownn2([]);\n                                        setcdparttrigger((prev) => !prev);\n                                        setcdpartidx(idxx);\n                                      }}\n                                    >\n                                      <Button type=\"danger\">-</Button>\n                                    </div>\n                                  </div>\n                                ))}\n                                <div className=\"mx-auto my-3\">\n                                  <Button\n                                    onClick={() => {\n                                      setcurrentdropdownn2([\n                                        ...currentdropdownn2,\n                                        \"\",\n                                      ]);\n                                      setcd2part([...cd2part, \"\"]);\n                                      setdisabledtambah2(true);\n                                    }}\n                                  >\n                                    + Tambah Opsi\n                                  </Button>\n                                </div>\n                              </div>\n                            ) : null}\n                            {currentfield2.data_type.toLowerCase() ===\n                            \"checkbox\" ? (\n                              <div className=\"flex flex-col\">\n                                <h1>\n                                  Default dapat dipilih lebih dari 1 (satu) opsi\n                                  dibawah ini\n                                </h1>\n                                {currentdropdownn2.map((doc, idxx) => {\n                                  const idxchecked =\n                                    currentcheckeddropdownn2.includes(idxx);\n                                  return (\n                                    <div className=\"flex mb-3\">\n                                      <div className=\"w-7 flex items-center\">\n                                        <Checkbox\n                                          defaultChecked={idxchecked}\n                                          onChange={(e) => {\n                                            if (e.target.checked === true) {\n                                              setcurrentcheckeddropdownn2(\n                                                (prev) => {\n                                                  var temp = prev;\n                                                  temp.push(idxx);\n                                                  return temp;\n                                                }\n                                              );\n                                            } else {\n                                              setcurrentcheckeddropdownn2(\n                                                (prev) => {\n                                                  var temp = prev;\n                                                  const index =\n                                                    temp.indexOf(idxx);\n                                                  temp.splice(index, 1);\n                                                  return temp;\n                                                }\n                                              );\n                                            }\n                                          }}\n                                        ></Checkbox>\n                                      </div>\n                                      <div className=\"w-10/12 mr-5\">\n                                        <Input\n                                          style={{ marginRight: `0.5rem` }}\n                                          defaultValue={doc}\n                                          placeholder={`Masukkan opsi ke-${\n                                            idxx + 1\n                                          }`}\n                                          onChange={(e) => {\n                                            setcurrentdropdownn2((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            setcd2part((prev) => {\n                                              const temp = prev;\n                                              temp[idxx] = e.target.value;\n                                              return temp;\n                                            });\n                                            if (\n                                              e.target.value !== \"\" &&\n                                              currentdropdownn2.every(\n                                                (doca, idxa) => doca !== \"\"\n                                              ) &&\n                                              currentfield2.name !== \"\"\n                                            ) {\n                                              setdisabledtambah2(false);\n                                            } else if (\n                                              e.target.value === \"\" ||\n                                              currentfield2.name === \"\"\n                                            ) {\n                                              setdisabledtambah2(true);\n                                            }\n                                          }}\n                                        />\n                                      </div>\n                                      <div\n                                        className=\"w-1/12 flex justify-around\"\n                                        onClick={() => {\n                                          setcurrentdropdownn2([]);\n                                          setcdparttrigger((prev) => !prev);\n                                          setcdpartidx(idxx);\n                                        }}\n                                      >\n                                        <Button type=\"danger\">-</Button>\n                                      </div>\n                                    </div>\n                                  );\n                                })}\n                                <div className=\"mx-auto my-3\">\n                                  <Button\n                                    onClick={() => {\n                                      setcurrentdropdownn2([\n                                        ...currentdropdownn2,\n                                        \"\",\n                                      ]);\n                                      setcd2part([...cd2part, \"\"]);\n                                      setdisabledtambah2(true);\n                                    }}\n                                  >\n                                    + Tambah Opsi\n                                  </Button>\n                                </div>\n                              </div>\n                            ) : null}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"number\" && (\n                              <InputNumber\n                                style={{ width: `30%` }}\n                                defaultValue={fielddataa[idx].default}\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                onChange={(value) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: `${value}`,\n                                  });\n                                }}\n                              ></InputNumber>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"paragraph\" && (\n                              <Input.TextArea\n                                rows={4}\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                defaultValue={fielddataa[idx].default}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: e.target.value,\n                                  });\n                                }}\n                              ></Input.TextArea>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"string\" && (\n                              <Input\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                defaultValue={fielddataa[idx].default}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: e.target.value,\n                                  });\n                                }}\n                              ></Input>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"single\" && (\n                              <Input\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                defaultValue={fielddataa[idx].default}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: e.target.value,\n                                  });\n                                }}\n                              ></Input>\n                            )}\n                            {currentfield2.data_type.toLowerCase() ===\n                              \"date\" && (\n                              <DatePicker\n                                defaultValue={fielddataa[idx].default}\n                                style={{ width: `30%` }}\n                                placeholder={`Masukkan default ${currentfield2.name}`}\n                                onChange={(value, dateString) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    default: dateString,\n                                  });\n                                }}\n                              ></DatePicker>\n                            )}\n                          </Form.Item>\n                          <hr />\n                          <div className=\"flex mt-4 justify-end\">\n                            <Popconfirm\n                              placement=\"bottom\"\n                              title={`Apakah anda yakin ingin menghapus field ${\n                                doc.name === \"\" ? \"ini\" : doc.name\n                              }?`}\n                              okText=\"Ya\"\n                              cancelText=\"Tidak\"\n                              onConfirm={() => {\n                                setfielddataa((prev) =>\n                                  prev.filter((_, idxx) => idxx !== idx)\n                                );\n                                setnewdata2((prev) => {\n                                  var temp = prev;\n                                  temp.model_columns =\n                                    temp.model_columns.filter(\n                                      (docxx, idxx) => docxx.id !== doc.id\n                                    );\n                                  return temp;\n                                });\n                                setaddedfield3((prev) => {\n                                  prev.splice(idx, 1);\n                                  return prev;\n                                });\n                                setdisabledaddfield2(false);\n                                setpointevent2(\"\");\n                              }}\n                            >\n                              <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                                <DeleteOutlined\n                                  style={{ fontSize: `1.25rem` }}\n                                ></DeleteOutlined>\n                              </div>\n                            </Popconfirm>\n                            <div className=\" flex items-center mr-4\">\n                              <Checkbox\n                                checked={currentfield2.required}\n                                style={{ marginRight: `0.5rem` }}\n                                onChange={(e) => {\n                                  setcurrentfield2({\n                                    ...currentfield2,\n                                    required: e.target.checked,\n                                  });\n                                }}\n                              />{\" \"}\n                              Required\n                            </div>\n                            <Button\n                              disabled={disabledtambah2}\n                              type=\"primary\"\n                              onClick={() => {\n                                if (\n                                  currentfield2.data_type === \"dropdown\" ||\n                                  currentfield2.data_type === \"checkbox\"\n                                ) {\n                                  setidxdropdowntrigger3(idx);\n                                  setvaluedropdowntrigger3((prev) => !prev);\n                                }\n                                const temp = fielddataa;\n                                temp[idx] = currentfield2;\n                                setfielddataa(temp);\n                                setaddedfieldidx3(idx);\n                                setaddedfieldtrigger3((prev) => !prev);\n                                setconcatfieldtrigger2((prev) => !prev);\n                                setdisabledaddfield2(false);\n                                setpointevent2(\"\");\n                              }}\n                            >\n                              Tambah\n                            </Button>\n                          </div>\n                        </Form>\n                      </div>\n                    )}\n                  </>\n                );\n              })}\n            </>\n          )}\n\n          {fielddataa2.map((doc, idx) => {\n            return (\n              <>\n                {addedfield2[idx] === true ? (\n                  <div\n                    key={idx}\n                    className={`${pointevent2} shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer`}\n                    onClick={() => {\n                      const temp = [...addedfield2];\n                      temp[idx] = false;\n                      for (var i = 0; i < temp.length; i++) {\n                        if (i !== idx) {\n                          temp[i] = true;\n                        }\n                      }\n                      setaddedfield2(temp);\n                      setcurrentfield2(fielddataa2[idx]);\n                      if (\n                        doc.data_type === \"dropdown\" ||\n                        doc.data_type === \"checkbox\"\n                      ) {\n                        setcurrentdropdownn2(doc.default.opsi);\n                        setcd2part(doc.default.opsi);\n                        setcurrentcheckeddropdownn2(doc.default.default);\n                      }\n                      if (\n                        fielddataa2[idx].data_type !== \"dropdown\" ||\n                        fielddataa2[idx].data_type !== \"checkbox\"\n                      ) {\n                        if (\n                          fielddataa2[idx].name !== \"\" &&\n                          fielddataa2[idx].data_type !== \"\"\n                        ) {\n                          setdisabledtambah2(false);\n                        } else {\n                          setdisabledtambah2(true);\n                        }\n                      } else {\n                        if (\n                          doc.default.opsi.some((docopsi) => docopsi === \"\")\n                        ) {\n                          setdisabledtambah2(true);\n                        } else {\n                          setdisabledtambah2(false);\n                        }\n                      }\n                      setdisabledaddfield2(true);\n                      setpointevent2(\"pointer-events-none\");\n                    }}\n                  >\n                    <div className=\"font-semibold mb-2\">\n                      {doc.name}\n                      {fielddataa2[idx].required ? (\n                        <span className=\"judulField\"></span>\n                      ) : null}{\" \"}\n                      <span className=\"text-gray-400 text-sm\">\n                        (\n                        {doc.data_type === \"single\"\n                          ? \"Single Textbox\"\n                          : doc.data_type.charAt(0).toUpperCase() +\n                            doc.data_type.slice(1)}\n                        {doc.data_type === \"paragraph\" && ` Text`})\n                      </span>\n                    </div>\n                    <div className=\"rounded border w-full pl-3 py-2 flex items-center my-auto\">\n                      {doc.data_type === \"checkbox\" ||\n                      doc.data_type === \"dropdown\" ||\n                      doc.data_type === \"paragraph\" ||\n                      doc.data_type === \"date\" ? (\n                        <>\n                          {doc.data_type === \"dropdown\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"checkbox\" && (\n                            <div className=\"flex flex-col w-full\">\n                              {doc.default.opsi.map((dok, idk) => {\n                                return (\n                                  <div\n                                    key={idk}\n                                    className=\"rounded border mb-1 w-3/12 py-1 pl-3 flex items-center flex-wrap my-auto\"\n                                  >\n                                    <p className=\"mb-0\">{dok}</p>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          )}\n                          {doc.data_type === \"date\" && (\n                            <div className=\"flex justify-between w-full px-3\">\n                              <p className=\"mb-0\">{doc.default}</p>\n                              <div>\n                                <CalendarOutlined></CalendarOutlined>\n                              </div>\n                            </div>\n                          )}\n                          {doc.data_type === \"paragraph\" && (\n                            <div className=\"flex h-20\">{doc.default}</div>\n                          )}\n                        </>\n                      ) : (\n                        <p className=\"mb-0\">{doc.default}</p>\n                      )}\n                    </div>\n                    <style jsx>\n                      {`\n                                                        .judulField::before{\n                                                            content: '*';\n                                                            color: red;\n                                                        }\n                                                    `}\n                    </style>\n                  </div>\n                ) : (\n                  <div\n                    key={idx}\n                    className=\"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\"\n                  >\n                    <Form layout=\"vertical\" initialValues={currentfield2}>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 space-x-2\">\n                        <Form.Item\n                          name=\"name\"\n                          label=\"Nama Field\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Nama Field wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Input\n                            required\n                            name=\"name\"\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                name: e.target.value,\n                              });\n                              if (e.target.value === \"\") {\n                                setdisabledtambah2(true);\n                              } else if (\n                                e.target.value !== \"\" &&\n                                currentfield2.data_type !== \"\" &&\n                                currentdropdownn2.every(\n                                  (doca, idxa) => doca !== \"\"\n                                )\n                              ) {\n                                setdisabledtambah2(false);\n                              }\n                            }}\n                          />\n                        </Form.Item>\n                        <Form.Item\n                          name=\"data_type\"\n                          label=\"Tipe Field\"\n                          rules={[\n                            {\n                              required: true,\n                              message: \"Tipe Field wajib diisi\",\n                            },\n                          ]}\n                        >\n                          <Select\n                            placeholder=\"Pilih Tipe Field\"\n                            onChange={(value) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                data_type: value,\n                              });\n                              if (\n                                value === \"dropdown\" ||\n                                value === \"checkbox\"\n                              ) {\n                                if (\n                                  currentdropdownn2.every(\n                                    (doca, idxa) => doca !== \"\"\n                                  )\n                                ) {\n                                  setdisabledtambah2(false);\n                                } else {\n                                  setdisabledtambah2(true);\n                                }\n                              } else {\n                                setdisabledtambah2(false);\n                              }\n                              if (value === \"dropdown\") {\n                                setcurrentcheckeddropdownn2(\"\");\n                                setcurrentdropdownn2([\"\", \"\"]);\n                                setcd2part([\"\", \"\"]);\n                                setdisabledtambah2(true);\n                              }\n                              if (value === \"checkbox\") {\n                                setcurrentcheckeddropdownn2([]);\n                                setcurrentdropdownn2([\"\", \"\"]);\n                                setcd2part([\"\", \"\"]);\n                                setdisabledtambah2(true);\n                              }\n                            }}\n                            name=\"data_type\"\n                          >\n                            <Select.Option value={\"dropdown\"}>\n                              Dropdown\n                            </Select.Option>\n                            <Select.Option value={\"number\"}>\n                              Number\n                            </Select.Option>\n                            <Select.Option value={\"paragraph\"}>\n                              Paragraph Text\n                            </Select.Option>\n                            <Select.Option value={\"checkbox\"}>\n                              Checkbox\n                            </Select.Option>\n                            <Select.Option value={\"single\"}>\n                              Single Textbox\n                            </Select.Option>\n                            <Select.Option value={\"date\"}>Date</Select.Option>\n                          </Select>\n                        </Form.Item>\n                      </div>\n                      <Form.Item name=\"default\" label=\"Default\">\n                        {currentfield2.data_type.toLowerCase() ===\n                        \"dropdown\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default hanya dipilih 1 (satu) dari beberapa opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdownn2.map((doc, idxx) => (\n                              <div className=\"flex mb-3\">\n                                <div className=\"w-7 flex items-center\">\n                                  <Checkbox\n                                    checked={\n                                      currentcheckeddropdownn2 === idxx\n                                        ? true\n                                        : false\n                                    }\n                                    onChange={(e) => {\n                                      if (e.target.checked === true) {\n                                        setcurrentcheckeddropdownn2(idxx);\n                                      }\n                                    }}\n                                  ></Checkbox>\n                                </div>\n                                <div className=\"w-10/12 mr-5\">\n                                  <Input\n                                    style={{ marginRight: `0.5rem` }}\n                                    defaultValue={doc}\n                                    placeholder={`Masukkan opsi ke-${idxx + 1}`}\n                                    onChange={(e) => {\n                                      setcurrentdropdownn2((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      setcd2part((prev) => {\n                                        const temp = prev;\n                                        temp[idxx] = e.target.value;\n                                        return temp;\n                                      });\n                                      if (\n                                        e.target.value !== \"\" &&\n                                        currentdropdownn2.every(\n                                          (doca, idxa) => doca !== \"\"\n                                        ) &&\n                                        currentfield2.name !== \"\"\n                                      ) {\n                                        setdisabledtambah2(false);\n                                      } else if (\n                                        e.target.value === \"\" ||\n                                        currentfield2.name === \"\"\n                                      ) {\n                                        setdisabledtambah2(true);\n                                      }\n                                    }}\n                                  />\n                                </div>\n                                <div\n                                  className=\"w-1/12 flex justify-around\"\n                                  onClick={() => {\n                                    setcurrentdropdownn2([]);\n                                    setcdparttrigger((prev) => !prev);\n                                    setcdpartidx(idxx);\n                                  }}\n                                >\n                                  <Button type=\"danger\">-</Button>\n                                </div>\n                              </div>\n                            ))}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdownn2([\n                                    ...currentdropdownn2,\n                                    \"\",\n                                  ]);\n                                  setcd2part([...cd2part, \"\"]);\n                                  setdisabledtambah2(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield2.data_type.toLowerCase() ===\n                        \"checkbox\" ? (\n                          <div className=\"flex flex-col\">\n                            <h1>\n                              Default dapat dipilih lebih dari 1 (satu) opsi\n                              dibawah ini\n                            </h1>\n                            {currentdropdownn2.map((doc, idxx) => {\n                              const idxchecked =\n                                currentcheckeddropdownn2.includes(idxx);\n                              return (\n                                <div className=\"flex mb-3\">\n                                  <div className=\"w-7 flex items-center\">\n                                    <Checkbox\n                                      defaultChecked={idxchecked}\n                                      onChange={(e) => {\n                                        if (e.target.checked === true) {\n                                          setcurrentcheckeddropdownn2(\n                                            (prev) => {\n                                              var temp = prev;\n                                              temp.push(idxx);\n                                              return temp;\n                                            }\n                                          );\n                                        } else {\n                                          setcurrentcheckeddropdownn2(\n                                            (prev) => {\n                                              var temp = prev;\n                                              const index = temp.indexOf(idxx);\n                                              temp.splice(index, 1);\n                                              return temp;\n                                            }\n                                          );\n                                        }\n                                      }}\n                                    ></Checkbox>\n                                  </div>\n                                  <div className=\"w-10/12 mr-5\">\n                                    <Input\n                                      style={{ marginRight: `0.5rem` }}\n                                      defaultValue={doc}\n                                      placeholder={`Masukkan opsi ke-${\n                                        idxx + 1\n                                      }`}\n                                      onChange={(e) => {\n                                        setcurrentdropdownn2((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        setcd2part((prev) => {\n                                          const temp = prev;\n                                          temp[idxx] = e.target.value;\n                                          return temp;\n                                        });\n                                        if (\n                                          e.target.value !== \"\" &&\n                                          currentdropdownn2.every(\n                                            (doca, idxa) => doca !== \"\"\n                                          ) &&\n                                          currentfield2.name !== \"\"\n                                        ) {\n                                          setdisabledtambah2(false);\n                                        } else if (\n                                          e.target.value === \"\" ||\n                                          currentfield2.name === \"\"\n                                        ) {\n                                          setdisabledtambah2(true);\n                                        }\n                                      }}\n                                    />\n                                  </div>\n                                  <div\n                                    className=\"w-1/12 flex justify-around\"\n                                    onClick={() => {\n                                      setcurrentdropdownn2([]);\n                                      setcdparttrigger((prev) => !prev);\n                                      setcdpartidx(idxx);\n                                    }}\n                                  >\n                                    <Button type=\"danger\">-</Button>\n                                  </div>\n                                </div>\n                              );\n                            })}\n                            <div className=\"mx-auto my-3\">\n                              <Button\n                                onClick={() => {\n                                  setcurrentdropdownn2([\n                                    ...currentdropdownn2,\n                                    \"\",\n                                  ]);\n                                  setcd2part([...cd2part, \"\"]);\n                                  setdisabledtambah2(true);\n                                }}\n                              >\n                                + Tambah Opsi\n                              </Button>\n                            </div>\n                          </div>\n                        ) : null}\n                        {currentfield2.data_type.toLowerCase() === \"number\" && (\n                          <InputNumber\n                            style={{ width: `30%` }}\n                            defaultValue={fielddataa2[idx].default}\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            onChange={(value) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: `${value}`,\n                              });\n                            }}\n                          ></InputNumber>\n                        )}\n                        {currentfield2.data_type.toLowerCase() ===\n                          \"paragraph\" && (\n                          <Input.TextArea\n                            rows={4}\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            defaultValue={fielddataa2[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input.TextArea>\n                        )}\n                        {currentfield2.data_type.toLowerCase() === \"string\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            defaultValue={fielddataa2[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield2.data_type.toLowerCase() === \"single\" && (\n                          <Input\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            defaultValue={fielddataa2[idx].default}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: e.target.value,\n                              });\n                            }}\n                          ></Input>\n                        )}\n                        {currentfield2.data_type.toLowerCase() === \"date\" && (\n                          <DatePicker\n                            style={{ width: `30%` }}\n                            placeholder={`Masukkan default ${currentfield2.name}`}\n                            onChange={(value, dateString) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                default: dateString,\n                              });\n                            }}\n                          ></DatePicker>\n                        )}\n                      </Form.Item>\n                      <hr />\n                      <div className=\"flex mt-4 justify-end\">\n                        <Popconfirm\n                          placement=\"bottom\"\n                          title={`Apakah anda yakin ingin menghapus field ${\n                            doc.name === \"\" ? \"ini\" : doc.name\n                          }?`}\n                          okText=\"Ya\"\n                          cancelText=\"Tidak\"\n                          onConfirm={() => {\n                            setfielddataa2((prev) =>\n                              prev.filter((_, idxx) => idxx !== idx)\n                            );\n                            setnewdata2((prev) => {\n                              var temp = prev;\n                              temp.model_columns = temp.model_columns.filter(\n                                (_, idxx) => idxx !== fielddataa.length + idx\n                              );\n                              return temp;\n                            });\n                            setaddedfield2((prev) => {\n                              prev.splice(idx, 1);\n                              return prev;\n                            });\n                            setdisabledaddfield2(false);\n                            setpointevent2(\"\");\n                          }}\n                        >\n                          <div className=\"flex items-center mr-4 hover:text-red-500 cursor-pointer\">\n                            <DeleteOutlined\n                              style={{ fontSize: `1.25rem` }}\n                            ></DeleteOutlined>\n                          </div>\n                        </Popconfirm>\n                        <div className=\" flex items-center mr-4\">\n                          <Checkbox\n                            checked={currentfield2.required}\n                            style={{ marginRight: `0.5rem` }}\n                            onChange={(e) => {\n                              setcurrentfield2({\n                                ...currentfield2,\n                                required: e.target.checked,\n                              });\n                            }}\n                          />{\" \"}\n                          Required\n                        </div>\n                        <Button\n                          type=\"primary\"\n                          disabled={disabledtambah2}\n                          onClick={() => {\n                            if (\n                              currentfield2.data_type === \"dropdown\" ||\n                              currentfield2.data_type === \"checkbox\"\n                            ) {\n                              setidxdropdowntrigger2(idx);\n                              setvaluedropdowntrigger2((prev) => !prev);\n                            }\n                            const temp = fielddataa2;\n                            temp[idx] = currentfield2;\n                            setfielddataa2(temp);\n                            setaddedfieldidx2(idx);\n                            setaddedfieldtrigger2((prev) => !prev);\n                            setconcatfieldtrigger2((prev) => !prev);\n                            setdisabledaddfield2(false);\n                            setpointevent2(\"\");\n                          }}\n                        >\n                          Tambah\n                        </Button>\n                      </div>\n                    </Form>\n                  </div>\n                )}\n              </>\n            );\n          })}\n          <div className=\"w-full flex justify-center mt-5\">\n            <Button\n              type=\"dashed\"\n              disabled={disabledaddfield2}\n              style={{ width: `80%`, height: `4rem` }}\n              onClick={onClickAddField2}\n            >\n              + Tambah Spesifikasi Model\n            </Button>\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">Form Tambah Manufacturer</h1>\n            <div className=\"flex\">\n              <Button\n                type=\"default\"\n                onClick={() => {\n                  setmodalmanuf(false);\n                }}\n                style={{ marginRight: `1rem` }}\n              >\n                Batal\n              </Button>\n              <Button\n                type=\"primary\"\n                disabled={disabledmanuf}\n                onClick={handleAddManufacturer}\n                loading={loadingmanuf}\n              >\n                Simpan\n              </Button>\n            </div>\n          </div>\n        }\n        visible={modalmanuf}\n        footer={null}\n        onCancel={() => {\n          setmodalmanuf(false);\n        }}\n        width={900}\n      >\n        <div className=\"flex flex-col mb-3\">\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Nama Manufacturer <span className=\"namamanu\"></span>\n            </p>\n            <Input\n              value={datamanuf.name}\n              placeholder=\"Masukkan Nama Manufacturer\"\n              onChange={(e) => {\n                e.target.value === \"\"\n                  ? setdisabledmanuf(true)\n                  : setdisabledmanuf(false);\n                setdatamanuf({ name: e.target.value });\n              }}\n            ></Input>\n            <style jsx>\n              {`\n                                .namamanu::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n        </div>\n      </Modal>\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res, params }) {\n  const modelid = params.modelId;\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resources = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"82\",\n      modelid,\n    },\n  };\n}\n\nexport default ModelsUpdate2;\n"]},"metadata":{},"sourceType":"module"}