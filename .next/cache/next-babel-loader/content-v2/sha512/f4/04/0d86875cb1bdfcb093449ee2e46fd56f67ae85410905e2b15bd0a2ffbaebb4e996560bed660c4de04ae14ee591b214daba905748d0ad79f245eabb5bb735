{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _message from \"antd/lib/message\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/login/index.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nexport var __N_SSP = true;\nexport default function Home(_ref) {\n  _s();\n\n  var initProps = _ref.initProps;\n  // console.log(\"token di login abis dari logout: \" + jscookie.get('token'))\n  var rt = useRouter();\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n      formdata = _useState[0],\n      setFormdata = _useState[1];\n\n  var _useState2 = useState(false),\n      alerterror = _useState2[0],\n      setAlerterror = _useState2[1];\n\n  var _useState3 = useState(false),\n      loadinglogin = _useState3[0],\n      setLoadinglogin = _useState3[1];\n\n  var onChangeLogin = function onChangeLogin(e) {\n    setFormdata(_objectSpread(_objectSpread({}, formdata), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleLogin = function handleLogin() {\n    setLoadinglogin(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/login\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      // body: new URLSearchParams(formdata)\n      body: JSON.stringify(formdata)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setLoadinglogin(false);\n\n      if (res2.data) {\n        _notification[\"success\"]({\n          message: \"Selamat datang di MIGSYS\",\n          duration: 3\n        }); // console.log(\"token: \" + res2.data.token)\n\n        /** Token will be expired in 1 day */\n\n\n        Cookies.set(\"token\", JSON.stringify(res2.data.token), {\n          expires: 1\n        }); // console.log(\"token di session: \" + JSON.parse(jscookie.get('token')))\n\n        rt.push(\"/dashboard/home\");\n      } else if (!res2.success) {\n        // console.log(\"masuk ke error login\")\n        _message.error({\n          content: res2.message.errorInfo.status_detail,\n          style: {\n            marginTop: \"1rem\"\n          }\n        }, 5);\n\n        setAlerterror(true);\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-xl bg-blue-600 h-screen\"\n      /*style={{background:`linear-gradient(#035ea3, #198e07)`}}*/\n      ,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-20 relative\",\n        id: \"wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mx-auto bg-white rounded-lg w-10/12 md:w-5/12 max-h-80 md:max-h-80 text-black shadow-lg px-3 md:px-5 pt-10 pb-1 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"mb-5 font-mont text-xl font-semibold\",\n            children: \"LogIn MIGSYS v3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Form, {\n            name: \"email\",\n            className: \"loginForm\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: handleLogin,\n            children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"email\",\n              rules: [{\n                required: true,\n                message: \"Please input your Email!\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {\n                  className: \"site-form-item-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 27\n                }, this),\n                name: \"email\",\n                value: formdata,\n                placeholder: \"Email\",\n                onChange: onChangeLogin\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"password\",\n              rules: [{\n                required: true,\n                message: \"Password!\"\n              }],\n              style: {\n                marginBottom: \"3rem\"\n              },\n              children: /*#__PURE__*/_jsxDEV(_Input.Password, {\n                prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n                  className: \"site-form-item-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 27\n                }, this),\n                name: \"password\",\n                value: formdata,\n                placeholder: \"Password\",\n                type: \"password\",\n                onChange: onChangeLogin\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              style: {\n                justifyContent: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                loading: loadinglogin,\n                className: \"login-form-button\",\n                style: {\n                  width: \"100%\"\n                },\n                children: \"Log in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" flex justify-center items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \" mb-5 text-primary hover:text-secondary cursor-pointer\",\n              onClick: function onClick() {\n                rt.push(\"/requestForgetPassword\");\n              },\n              children: \"Lupa Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Home, \"KqIUhbyPPpQJbHO4JRmo9XUAWz8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/login/index.js"],"names":["LockOutlined","UserOutlined","Cookies","useRouter","useState","Home","initProps","rt","email","password","formdata","setFormdata","alerterror","setAlerterror","loadinglogin","setLoadinglogin","onChangeLogin","e","target","name","value","handleLogin","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","body","JSON","stringify","then","res","json","res2","data","message","duration","set","token","expires","push","success","error","content","errorInfo","status_detail","style","marginTop","remember","required","marginBottom","justifyContent","width"],"mappings":"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","sourcesContent":["import { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport { Button, Input, message } from \"antd\";\nimport { Form, notification } from \"antd\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\n\nimport httpcookie from \"cookie\";\n\nexport default function Home({ initProps }) {\n  // console.log(\"token di login abis dari logout: \" + jscookie.get('token'))\n  const rt = useRouter();\n  const [formdata, setFormdata] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [alerterror, setAlerterror] = useState(false);\n  const [loadinglogin, setLoadinglogin] = useState(false);\n  const onChangeLogin = (e) => {\n    setFormdata({\n      ...formdata,\n      [e.target.name]: e.target.value,\n    });\n  };\n  const handleLogin = () => {\n    setLoadinglogin(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      // body: new URLSearchParams(formdata)\n      body: JSON.stringify(formdata),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setLoadinglogin(false);\n        if (res2.data) {\n          notification[\"success\"]({\n            message: \"Selamat datang di MIGSYS\",\n            duration: 3,\n          });\n          // console.log(\"token: \" + res2.data.token)\n          /** Token will be expired in 1 day */\n          Cookies.set(\"token\", JSON.stringify(res2.data.token), { expires: 1 });\n          // console.log(\"token di session: \" + JSON.parse(jscookie.get('token')))\n          rt.push(\"/dashboard/home\");\n        } else if (!res2.success) {\n          // console.log(\"masuk ke error login\")\n          message.error(\n            {\n              content: res2.message.errorInfo.status_detail,\n              style: {\n                marginTop: `1rem`,\n              },\n            },\n            5\n          );\n          setAlerterror(true);\n        }\n      });\n  };\n  return (\n    <>\n      {/* {\n        spin1 ?\n          <Spin size=\"large\"> */}\n      <div\n        className=\"container-xl bg-blue-600 h-screen\" /*style={{background:`linear-gradient(#035ea3, #198e07)`}}*/\n      >\n        <div className=\"pt-20 relative\" id=\"wrapper\">\n          <div className=\"mx-auto bg-white rounded-lg w-10/12 md:w-5/12 max-h-80 md:max-h-80 text-black shadow-lg px-3 md:px-5 pt-10 pb-1 text-center\">\n            <h1 className=\"mb-5 font-mont text-xl font-semibold\">\n              LogIn MIGSYS v3\n            </h1>\n            <Form\n              name=\"email\"\n              className=\"loginForm\"\n              initialValues={{ remember: true }}\n              onFinish={handleLogin}\n            >\n              <Form.Item\n                name=\"email\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Please input your Email!\",\n                  },\n                ]}\n              >\n                <Input\n                  prefix={<UserOutlined className=\"site-form-item-icon\" />}\n                  name=\"email\"\n                  value={formdata}\n                  placeholder=\"Email\"\n                  onChange={onChangeLogin}\n                />\n              </Form.Item>\n              <Form.Item\n                name=\"password\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Password!\",\n                  },\n                ]}\n                style={{ marginBottom: `3rem` }}\n              >\n                <Input.Password\n                  prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                  name=\"password\"\n                  value={formdata}\n                  placeholder=\"Password\"\n                  type=\"password\"\n                  onChange={onChangeLogin}\n                />\n              </Form.Item>\n              <Form.Item style={{ justifyContent: `center` }}>\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  loading={loadinglogin}\n                  className=\"login-form-button\"\n                  style={{ width: `100%` }}\n                >\n                  Log in\n                </Button>\n              </Form.Item>\n            </Form>\n            <div className=\" flex justify-center items-center\">\n              <p\n                className=\" mb-5 text-primary hover:text-secondary cursor-pointer\"\n                onClick={() => {\n                  rt.push(`/requestForgetPassword`);\n                }}\n              >\n                Lupa Password\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* </Spin> */}\n      {/* } */}\n    </>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const initProps = {};\n  if (req && req.headers) {\n    if (req.headers.cookie) {\n      const cookies = req.headers.cookie;\n      const cookiesJSON1 = httpcookie.parse(cookies);\n      if (cookiesJSON1.token) {\n        return {\n          redirect: {\n            permanent: false,\n            destination: \"/dashboard/home\",\n          },\n        };\n      }\n    }\n    // if (typeof cookies === 'string') {\n    //   const cookiesJSON = httpcookie.parse(cookies);\n    //   initProps.token = cookiesJSON.token;\n    // }\n  }\n  return {\n    props: {\n      initProps,\n    },\n  };\n}\n"]},"metadata":{},"sourceType":"module"}