{"ast":null,"code":"import _Table from \"antd/lib/table\";\nimport _Select from \"antd/lib/select\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Spin from \"antd/lib/spin\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Tooltip from \"antd/lib/tooltip\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { ExclamationCircleOutlined, SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../components/layout-dashboard2\";\nimport st from \"../../components/layout-dashboard.module.css\";\nimport { createKeyPressHandler } from \"../../lib/helper\";\nimport httpcookie from \"cookie\";\n\nconst ItemsIndex = ({\n  dataProfile,\n  sidemenu,\n  initProps\n}) => {\n  // 1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  var asset_id1 = \"\",\n      model_id1 = \"\",\n      status_condition1 = \"\",\n      status_usage1 = \"\",\n      name1 = \"\",\n      migid1 = \"\",\n      location_id1 = \"\";\n  const {\n    asset_id,\n    model_id,\n    status_condition,\n    status_usage,\n    name,\n    mig_id,\n    location_id,\n    sort_by,\n    sort_type\n  } = rt.query;\n\n  if (asset_id) {\n    asset_id1 = asset_id;\n  }\n\n  if (model_id) {\n    model_id1 = model_id;\n  }\n\n  if (status_condition) {\n    status_condition1 = status_condition;\n  }\n\n  if (status_usage) {\n    status_usage1 = status_usage;\n  }\n\n  if (name) {\n    name1 = name;\n  }\n\n  if (mig_id) {\n    migid1 = mig_id;\n  }\n\n  if (location_id) {\n    location_id1 = location_id;\n  } //2.useState\n\n\n  const {\n    0: displaydata,\n    1: setdisplaydata\n  } = useState([]);\n  const {\n    0: displayentiredata,\n    1: setdisplayentiredata\n  } = useState({\n    success: false,\n    message: \"\",\n    data: {\n      current_page: 0,\n      data: [],\n      first_page_url: \"\",\n      from: 0,\n      last_page: 0,\n      last_page_url: \"\",\n      next_page_url: null,\n      path: \"\",\n      per_page: \"\",\n      prev_page_url: \"\",\n      to: 0,\n      total: 0\n    }\n  });\n  const {\n    0: invrelations,\n    1: setinvrelations\n  } = useState({\n    models: [],\n    assets: [],\n    manufacturers: [],\n    status_condition: [],\n    status_usage: [],\n    companies: []\n  });\n  const {\n    0: assetdata,\n    1: setassetdata\n  } = useState([]);\n  const {\n    0: displaydata1,\n    1: setdisplaydata1\n  } = useState([]);\n  const {\n    0: displaydata2,\n    1: setdisplaydata2\n  } = useState([]);\n  const {\n    0: namasearchact,\n    1: setnamasearchact\n  } = useState(name1 === \"\" ? false : true);\n  const {\n    0: namavalue,\n    1: setnamavalue\n  } = useState(null);\n  const {\n    0: migidact,\n    1: setmigidact\n  } = useState(migid1 === \"\" ? false : true);\n  const {\n    0: migidvalue,\n    1: setmigidvalue\n  } = useState(null);\n  const {\n    0: locationact,\n    1: setlocationact\n  } = useState(location_id1 === \"\" ? false : true);\n  const {\n    0: locationvalue,\n    1: setlocationvalue\n  } = useState(null);\n  const {\n    0: assettypefilteract,\n    1: setassettypefilteract\n  } = useState(asset_id1 === \"\" ? false : true);\n  const {\n    0: assettypevalue,\n    1: setassettypevalue\n  } = useState(null);\n  const {\n    0: modelfilteract,\n    1: setmodelfilteract\n  } = useState(model_id1 === \"\" ? false : true);\n  const {\n    0: modelvalue,\n    1: setmodelvalue\n  } = useState(model_id1 === \"\" ? null : Number(model_id1));\n  const {\n    0: kondisifilteract,\n    1: setkondisifilteract\n  } = useState(status_condition1 === \"\" ? false : true);\n  const {\n    0: kondisivalue,\n    1: setkondisivalue\n  } = useState(null);\n  const {\n    0: pemakaianfilteract,\n    1: setpemakaianfilteract\n  } = useState(status_usage1 === \"\" ? false : true);\n  const {\n    0: pemakaianvalue,\n    1: setpemakaianvalue\n  } = useState(null);\n  const {\n    0: namaasset,\n    1: setnamaasset\n  } = useState(asset_id1);\n  const {\n    0: defasset,\n    1: setdefasset\n  } = useState(null);\n  const {\n    0: rowstate,\n    1: setrowstate\n  } = useState(0);\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true);\n  const {\n    0: praloading2,\n    1: setpraloading2\n  } = useState(true);\n  const {\n    0: modelfilter,\n    1: setmodelfilter\n  } = useState([]);\n  const {\n    0: fetchingmodel,\n    1: setfetchingmodel\n  } = useState(false); //3.Define\n\n  const columnsTable = [{\n    title: \"MIG ID\",\n    dataIndex: \"mig_id\",\n    sorter: (a, b) => a.mig_id.length - b.mig_id.length,\n    defaultSortOrder: `${sort_type && sort_by === \"mig_id\" ? sort_type === \"asc\" ? \"ascend\" : \"descend\" : null}`\n  }, {\n    title: \"Asset Type\",\n    dataIndex: \"asset_name\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 mr-1\",\n            children: record.model_inventory.asset.asset_name\n          }), record.model_inventory.asset.deleted_at !== null ? /*#__PURE__*/_jsx(_Tooltip, {\n            placement: \"right\",\n            title: \"Asset Type telah dihapus, segera lakukan pengubahan Asset Type!\",\n            children: /*#__PURE__*/_jsx(ExclamationCircleOutlined, {\n              style: {\n                color: `red`\n              }\n            })\n          }) : null]\n        })\n      };\n    }\n  }, {\n    title: \"Model\",\n    dataIndex: \"model_name\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 mr-1\",\n            children: record.model_inventory.name\n          }), record.model_inventory.deleted_at !== null ? /*#__PURE__*/_jsx(_Tooltip, {\n            placement: \"right\",\n            title: \"Model telah dihapus, segera lakukan pengubahan Model!\",\n            children: /*#__PURE__*/_jsx(ExclamationCircleOutlined, {\n              style: {\n                color: `red`\n              }\n            })\n          }) : null]\n        })\n      };\n    }\n  }, {\n    title: \"Lokasi\",\n    dataIndex: \"location\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex items-center\",\n          children: /*#__PURE__*/_jsx(\"p\", {\n            className: \"mb-0 mr-1\",\n            children: record.location_inventory.id === 0 ? \"-\" : record.location_inventory.name\n          })\n        })\n      };\n    }\n  }, {\n    title: \"Kondisi\",\n    dataIndex: \"status_condition\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"w-full flex\",\n          children: [record.status_condition.id === 1 && /*#__PURE__*/_jsxs(\"div\", {\n            className: \"p-1 flex w-full items-center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-3 h-3 rounded-full bg-green-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"Good\"\n            })]\n          }), record.status_condition.id === 2 && /*#__PURE__*/_jsxs(\"div\", {\n            className: \"p-1 flex w-full items-center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-3 h-3 rounded-full bg-gray-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"Grey\"\n            })]\n          }), record.status_condition.id === 3 && /*#__PURE__*/_jsxs(\"div\", {\n            className: \"p-1 flex w-full items-center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w-3 h-3 rounded-full bg-red-500 mr-1\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-0\",\n              children: \"Bad\"\n            })]\n          })]\n        })\n      };\n    },\n    sorter: (a, b) => a.status_condition.id - b.status_condition.id,\n    defaultSortOrder: `${sort_type && sort_by === \"status_condition\" ? sort_type === \"asc\" ? \"ascend\" : \"descend\" : null}`\n  }, {\n    title: \"Status Pemakaian\",\n    dataIndex: \"status_usage\",\n    align: \"center\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"justify-center flex\",\n          children: [record.status_usage.id === 1 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md w-7/12 h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\",\n            children: \"In Used\"\n          }), record.status_usage.id === 2 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md w-7/12 h-auto px-1 text-center py-1 bg-green-100 border border-green-200 text-green-600\",\n            children: \"In Stock\"\n          }), record.status_usage.id === 3 && /*#__PURE__*/_jsx(\"div\", {\n            className: \"rounded-md w-7/12 h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\",\n            children: \"Replacement\"\n          })]\n        })\n      };\n    },\n    sorter: (a, b) => a.status_usage.id - b.status_usage.id,\n    defaultSortOrder: `${sort_type && sort_by === \"mig_id\" ? sort_type === \"asc\" ? \"ascend\" : \"descend\" : null}`\n  }]; //3.onChange\n  //search nama\n\n  const onChangeSearch = e => {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `items?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=${modelfilteract ? model_id1 : \"\"}&status_condition=${kondisifilteract ? status_condition1 : \"\"}&status_usage=${pemakaianfilteract ? status_usage1 : \"\"}&name=&mig_id=${migidact ? migid1 : \"\"}&location_id=${locationact ? location_id1 : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  }; //search mig id\n\n\n  const onChangeMigid = e => {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `items?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=${modelfilteract ? model_id1 : \"\"}&status_condition=${kondisifilteract ? status_condition1 : \"\"}&status_usage=${pemakaianfilteract ? status_usage1 : \"\"}&name=${namasearchact ? name1 : \"\"}&mig_id=&location_id=${locationact ? location_id1 : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setmigidact(false);\n    } else {\n      setmigidact(true);\n      setmigidvalue(e.target.value);\n    }\n  }; //search location\n\n\n  const onChangeLocation = id => {\n    if (typeof id === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `items?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=${modelfilteract ? model_id1 : \"\"}&status_condition=${kondisifilteract ? status_condition1 : \"\"}&status_usage=${pemakaianfilteract ? status_usage1 : \"\"}&name=${namasearchact ? name1 : \"\"}&mig_id=${migidact ? migid1 : \"\"}&location_id=&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setlocationact(false);\n    } else {\n      setlocationact(true);\n      setlocationvalue(id);\n    }\n  }; //search asset type\n\n\n  const onChangeAssetType = id => {\n    if (typeof id === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `items?asset_id=&model_id=&status_condition=${kondisifilteract ? status_condition1 : \"\"}&status_usage=${pemakaianfilteract ? status_usage1 : \"\"}&name=${namasearchact ? name1 : \"\"}&mig_id=${migidact ? migid1 : \"\"}&mig_id=${migidact ? migid1 : \"\"}&location_id=${locationact ? location_id1 : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setassettypefilteract(false);\n    } else {\n      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?rows=100&asset_id=${id}`, {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(res => res.json()).then(res2 => {\n        res2.data.length === 0 ? setmodelfilter([]) : setmodelfilter(res2.data.data);\n      });\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  }; //search model\n\n\n  const onChangeModel = idmodel => {\n    if (typeof idmodel === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `items?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=&status_condition=${kondisifilteract ? status_condition1 : \"\"}&status_usage=${pemakaianfilteract ? status_usage1 : \"\"}&name=${namasearchact ? name1 : \"\"}&mig_id=${migidact ? migid1 : \"\"}&location_id=${locationact ? location_id1 : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setmodelfilteract(false);\n    } else {\n      setmodelfilteract(true);\n      setmodelvalue(idmodel);\n    }\n  }; //search kondisi\n\n\n  const onChangeKondisi = idkondisi => {\n    if (typeof idkondisi === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `items?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=${modelfilteract ? model_id1 : \"\"}&status_condition=&status_usage=${pemakaianfilteract ? status_usage1 : \"\"}&name=${namasearchact ? name1 : \"\"}&mig_id=${migidact ? migid1 : \"\"}&location_id=${locationact ? location_id1 : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setkondisifilteract(false);\n    } else {\n      setkondisifilteract(true);\n      setkondisivalue(idkondisi);\n    }\n  }; //search Pemakaian\n\n\n  const onChangePemakaian = idpemakaian => {\n    if (typeof idpemakaian === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `items?asset_id=${assettypefilteract ? asset_id1 : \"\"}&model_id=${modelfilteract ? model_id1 : \"\"}&status_condition=${kondisifilteract ? status_condition1 : \"\"}&status_usage=&name=${namasearchact ? name1 : \"\"}&mig_id=${migidact ? migid1 : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setpemakaianfilteract(false);\n    } else {\n      setpemakaianfilteract(true);\n      setpemakaianvalue(idpemakaian);\n    }\n  };\n\n  const onFinalClick = () => {\n    // var datatemp = displaydata1\n    // if (assettypefilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.asset_name.toLowerCase() === assettypevalue.toLowerCase()\n    //     })\n    // }\n    // if (modelfilteract) {\n    //     datatemp = datatemp.filter(flt => flt.model_id === modelvalue)\n    // }\n    // if (kondisifilteract) {\n    //     datatemp = datatemp.filter(flt => flt.status_condition.id === kondisivalue)\n    // }\n    // if (pemakaianfilteract) {\n    //     datatemp = datatemp.filter(flt => flt.status_usage.id === pemakaianvalue)\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.inventory_name.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // setdisplaydata(datatemp)\n    window.location.href = `/items?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue === null ? model_id1 : modelvalue : \"\"}&status_condition=${kondisifilteract ? kondisivalue === \"\" ? status_condition1 : kondisivalue : \"\"}&status_usage=${pemakaianfilteract ? pemakaianvalue === \"\" ? status_usage1 : pemakaianvalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&mig_id=${migidact ? migidvalue === \"\" ? migid1 : migidvalue : \"\"}&location_id=${locationact ? locationvalue === \"\" ? location_id1 : locationvalue : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`; // setpraloading(true)\n    // fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventories?rows=100&asset_id=${assettypefilteract ? assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue : \"\"}&status_condition=${kondisifilteract ? kondisivalue : \"\"}&status_usage=${pemakaianfilteract ? pemakaianvalue : \"\"}&name=${namasearchact ? namavalue : \"\"}`, {\n    //     method: `GET`,\n    //     headers: {\n    //         'Authorization': JSON.parse(initProps),\n    //     },\n    // })\n    //     .then(res => res.json())\n    //     .then(res2 => {\n    //         setdisplaydata(res2.data.data)\n    //         setpraloading(false)\n    //     })\n  }; //4.handler\n\n\n  const {\n    onKeyPressHandler\n  } = createKeyPressHandler(onFinalClick, \"Enter\"); //5.useEffect\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventories?asset_id=${asset_id1}&model_id=${model_id1}&status_condition=${status_condition1}&status_usage=${status_usage1}&name=${name1}&mig_id=${migid1}&location_id=${location_id1}&sort_by=${sort_by}&sort_type=${sort_type}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdisplayentiredata(res2);\n      setdisplaydata(res2.data.data);\n      setdisplaydata1(res2.data.data);\n      setdisplaydata2(res2.data.data);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryRelations`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setinvrelations(res2.data); // setmodelfilter(res2.data.models)\n\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?rows=50&asset_id=${asset_id1 === \"\" ? \"\" : asset_id1}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      res2.data.length === 0 ? setmodelfilter([]) : setmodelfilter(res2.data.data);\n      setpraloading2(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      var selectedAsset = {};\n\n      const recursiveSearchAsset = (doc, key) => {\n        for (var i = 0; i < doc.length; i++) {\n          if (doc[i].id === key) {\n            selectedAsset = doc[i];\n          } else {\n            if (doc[i].children) {\n              recursiveSearchAsset(doc[i].children, key);\n            }\n          }\n        }\n      };\n\n      recursiveSearchAsset(res2.data, Number(namaasset));\n      setdefasset(selectedAsset.key);\n      setassetdata(res2.data); // setpraloading(false)\n    });\n  }, []);\n  return /*#__PURE__*/_jsxs(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"font-bold text-2xl w-auto\",\n          children: \"Items\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/items/create\",\n          children: /*#__PURE__*/_jsx(_Button, {\n            size: \"large\",\n            type: \"primary\",\n            children: \"Tambah\"\n          })\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n        children: [praloading ? null : /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex mb-8\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" w-full mr-1 grid grid-cols-12\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-2 mr-1\",\n              children: /*#__PURE__*/_jsx(_Input, {\n                style: {\n                  width: `100%`,\n                  marginRight: `0.5rem`\n                },\n                defaultValue: migid1,\n                placeholder: \"Cari MIG ID\",\n                onChange: onChangeMigid,\n                allowClear: true,\n                onKeyPress: onKeyPressHandler\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-2 mr-1\",\n              children: /*#__PURE__*/_jsx(_TreeSelect, {\n                allowClear: true,\n                dropdownStyle: {\n                  maxHeight: 400,\n                  overflow: \"auto\"\n                },\n                defaultValue: asset_id1 === \"\" ? null : defasset,\n                treeData: assetdata,\n                placeholder: \"Cari Asset Type\",\n                treeDefaultExpandAll: true,\n                style: {\n                  width: `100%`\n                },\n                onChange: (value, label, extra) => {\n                  if (typeof value === \"undefined\") {\n                    onChangeAssetType();\n                  } else {\n                    onChangeAssetType(extra.allCheckedNodes[0].node.props.id);\n                    setnamaasset(extra.allCheckedNodes[0].node.props.title); // setmodelfilter(prev => {\n                    //     return invrelations.models.filter(docfil => docfil.asset_id === extra.allCheckedNodes[0].node.props.id)\n                    // })\n\n                    modelvalue !== null ? setmodelvalue(null) : null;\n                  }\n                }\n              })\n            }), praloading2 ? /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsx(_Spin, {})\n            }) : /*#__PURE__*/_jsxs(\"div\", {\n              className: \"col-span-2 mr-1 flex flex-col\",\n              children: [/*#__PURE__*/_jsx(_Select, {\n                showSearch: true,\n                optionFilterProp: \"children\",\n                notFoundContent: fetchingmodel ? /*#__PURE__*/_jsx(_Spin, {\n                  size: \"small\"\n                }) : null,\n                onSearch: value => {\n                  setfetchingmodel(true);\n                  fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getFilterModels?name=${value !== \"\" ? value : \"\"}`, {\n                    method: `GET`,\n                    headers: {\n                      Authorization: JSON.parse(initProps)\n                    }\n                  }).then(res => res.json()).then(res2 => {\n                    setmodelfilter(res2.data);\n                    setfetchingmodel(false);\n                  });\n                },\n                filterOption: (input, opt) => opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                disabled: modelfilter.length === 0,\n                placeholder: \"Cari Model\",\n                style: {\n                  width: `100%`\n                },\n                defaultValue: model_id1 === \"\" || asset_id1 === \"\" ? null : Number(model_id1),\n                allowClear: true,\n                onChange: value => {\n                  if (typeof value === \"undefined\") {\n                    onChangeModel();\n                  } else {\n                    onChangeModel(value);\n                  }\n                },\n                children: modelfilter.map((docmodels, idxmodels) => {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: docmodels.id,\n                    children: docmodels.name\n                  });\n                })\n              }), modelfilter.length === 0 && /*#__PURE__*/_jsx(\"p\", {\n                className: \"mb-0 text-red-500 text-sm\",\n                children: \"Model kosong\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-2 mr-1\",\n              children: /*#__PURE__*/_jsx(_TreeSelect, {\n                allowClear: true,\n                dropdownStyle: {\n                  maxHeight: 400,\n                  overflow: \"auto\"\n                },\n                defaultValue: location_id1 === \"\" ? null : Number(location_id1),\n                treeData: [invrelations.tree_companies],\n                placeholder: \"Cari Lokasi\",\n                treeDefaultExpandAll: true,\n                style: {\n                  width: `100%`\n                },\n                onChange: (value, label, extra) => {\n                  if (typeof value === \"undefined\") {\n                    onChangeLocation();\n                  } else {\n                    onChangeLocation(extra.allCheckedNodes[0].node.props.id);\n                    setnamaasset(extra.allCheckedNodes[0].node.props.title);\n                  }\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-1 mr-1\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                placeholder: \"Kondisi\",\n                style: {\n                  width: `100%`\n                },\n                defaultValue: status_condition1 === \"\" ? null : Number(status_condition1),\n                allowClear: true,\n                onChange: value => {\n                  if (typeof value === \"undefined\") {\n                    onChangeKondisi();\n                  } else {\n                    onChangeKondisi(value);\n                  }\n                },\n                children: invrelations.status_condition.map((docconds, idxconds) => {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: docconds.id,\n                    children: docconds.name\n                  });\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-2 mr-1\",\n              children: /*#__PURE__*/_jsx(_Select, {\n                placeholder: \"Pemakaian\",\n                style: {\n                  width: `100%`\n                },\n                defaultValue: status_usage1 === \"\" ? null : Number(status_usage1),\n                allowClear: true,\n                onChange: value => {\n                  if (typeof value === \"undefined\") {\n                    onChangePemakaian();\n                  } else {\n                    onChangePemakaian(value);\n                  }\n                },\n                children: invrelations.status_usage.map((docusage, idxusage) => {\n                  return /*#__PURE__*/_jsx(_Select.Option, {\n                    value: docusage.id,\n                    children: docusage.name\n                  });\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" col-span-1\",\n              children: /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                style: {\n                  width: `100%`\n                },\n                onClick: onFinalClick,\n                children: /*#__PURE__*/_jsx(SearchOutlined, {})\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(_Table, {\n          className: \"tableTypeTask\",\n          pagination: {\n            pageSize: 10,\n            total: displayentiredata.data.total,\n            onChange: (page, pageSize) => {\n              setpraloading(true);\n              fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventories?page=${page}&rows=10&asset_id=${asset_id1}&model_id=${model_id1}&status_condition=${status_condition1}&status_usage=${status_usage1}&name=${name1}&mig_id=${migid1}&location_id=${location_id1}&sort_by=${sort_by}&sort_type=${sort_type}`, {\n                method: `GET`,\n                headers: {\n                  Authorization: JSON.parse(initProps)\n                }\n              }).then(res => res.json()).then(res2 => {\n                setdisplayentiredata(res2);\n                setdisplaydata(res2.data.data);\n                setdisplaydata1(res2.data.data);\n                setdisplaydata2(res2.data.data);\n                setpraloading(false);\n              });\n            }\n          },\n          scroll: {\n            x: 200\n          },\n          dataSource: displaydata,\n          columns: columnsTable,\n          loading: praloading,\n          onRow: (record, rowIndex) => {\n            return {\n              onMouseOver: event => {\n                setrowstate(record.id);\n              },\n              onClick: event => {\n                // {\n                //     [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                rt.push(`/items/detail/${record.id}`); //         :\n                //         null\n                // }\n              }\n            };\n          },\n          rowClassName: (record, idx) => {\n            return record.id === rowstate ? `cursor-pointer` : ``;\n          },\n          onChange: (pagination, filters, sorter, extra) => {\n            // console.log('params', pagination, filters, sorter, extra);\n            if (extra.action === \"sort\") {\n              if (sorter.column) {\n                if (sorter.column.dataIndex === \"mig_id\") {\n                  window.location.href = `/items?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue === null ? model_id1 : modelvalue : \"\"}&status_condition=${kondisifilteract ? kondisivalue === \"\" ? status_condition1 : kondisivalue : \"\"}&status_usage=${pemakaianfilteract ? pemakaianvalue === \"\" ? status_usage1 : pemakaianvalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&mig_id=${migidact ? migidvalue === \"\" ? migid1 : migidvalue : \"\"}&location_id=${locationact ? locationvalue === \"\" ? location_id1 : locationvalue : \"\"}&sort_by=mig_id&sort_type=${sorter.order === \"ascend\" ? \"asc\" : \"desc\"}`;\n                } else if (sorter.column.dataIndex === \"status_usage\") {\n                  window.location.href = `/items?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue === null ? model_id1 : modelvalue : \"\"}&status_condition=${kondisifilteract ? kondisivalue === \"\" ? status_condition1 : kondisivalue : \"\"}&status_usage=${pemakaianfilteract ? pemakaianvalue === \"\" ? status_usage1 : pemakaianvalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&mig_id=${migidact ? migidvalue === \"\" ? migid1 : migidvalue : \"\"}&location_id=${locationact ? locationvalue === \"\" ? location_id1 : locationvalue : \"\"}&sort_by=status_usage&sort_type=${sorter.order === \"ascend\" ? \"asc\" : \"desc\"}`;\n                } else if (sorter.column.dataIndex === \"status_condition\") {\n                  window.location.href = `/items?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue === null ? model_id1 : modelvalue : \"\"}&status_condition=${kondisifilteract ? kondisivalue === \"\" ? status_condition1 : kondisivalue : \"\"}&status_usage=${pemakaianfilteract ? pemakaianvalue === \"\" ? status_usage1 : pemakaianvalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&mig_id=${migidact ? migidvalue === \"\" ? migid1 : migidvalue : \"\"}&location_id=${locationact ? locationvalue === \"\" ? location_id1 : locationvalue : \"\"}&sort_by=status_condition&sort_type=${sorter.order === \"ascend\" ? \"asc\" : \"desc\"}`;\n                } else if (sorter.column.dataIndex === \"name\") {\n                  window.location.href = `/items?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue === null ? model_id1 : modelvalue : \"\"}&status_condition=${kondisifilteract ? kondisivalue === \"\" ? status_condition1 : kondisivalue : \"\"}&status_usage=${pemakaianfilteract ? pemakaianvalue === \"\" ? status_usage1 : pemakaianvalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&mig_id=${migidact ? migidvalue === \"\" ? migid1 : migidvalue : \"\"}&location_id=${locationact ? locationvalue === \"\" ? location_id1 : locationvalue : \"\"}&sort_by=name&sort_type=${sorter.order === \"ascend\" ? \"asc\" : \"desc\"}`;\n                }\n              } else {\n                window.location.href = `/items?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&model_id=${modelfilteract ? modelvalue === null ? model_id1 : modelvalue : \"\"}&status_condition=${kondisifilteract ? kondisivalue === \"\" ? status_condition1 : kondisivalue : \"\"}&status_usage=${pemakaianfilteract ? pemakaianvalue === \"\" ? status_usage1 : pemakaianvalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&mig_id=${migidact ? migidvalue === \"\" ? migid1 : migidvalue : \"\"}&location_id=${locationact ? locationvalue === \"\" ? location_id1 : locationvalue : \"\"}&sort_by=&sort_type=`;\n              }\n            }\n          }\n        })]\n      })\n    })]\n  });\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"3\"\n    }\n  };\n}\nexport default ItemsIndex;","map":null,"metadata":{},"sourceType":"module"}