{"ast":null,"code":"import _Input from \"antd/lib/input\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Button from \"antd/lib/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _Select from \"antd/lib/select\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/requesters/update/[userId]/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { EditOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../../../components/layout-dashboard\";\nimport st from \"../../../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction modifData(dataa) {\n  for (var i = 0; i < dataa.length; i++) {\n    dataa[i][\"key\"] = dataa[i].id;\n    dataa[i][\"value\"] = dataa[i].id;\n    dataa[i][\"title\"] = dataa[i].name;\n    dataa[i][\"children\"] = dataa[i].members;\n    delete dataa[i].members;\n    if (dataa[i].children) [modifData(dataa[i].children)];\n  }\n\n  return dataa;\n}\n\nfunction RequestersUpdate({\n  initProps,\n  dataProfile,\n  dataDetailRequester,\n  dataRoles,\n  sidemenu,\n  userid\n}) {\n  const rt = useRouter();\n  const tok = initProps; // var pathArr = rt.pathname.split(\"/\").slice(1)\n  // pathArr[pathArr.length - 1] = dataDetailRequester.data.fullname\n\n  const [instanceForm] = _Form.useForm();\n\n  const {\n    Option\n  } = _Select;\n  const {\n    0: loadingfoto,\n    1: setLoadingfoto\n  } = useState(false); // const [data1, setData1] = useState({\n  //     id: dataDetailRequester.data.user_id,\n  //     fullname: dataDetailRequester.data.fullname,\n  //     role: dataDetailRequester.data.role,\n  //     phone_number: dataDetailRequester.data.phone_number,\n  //     profile_image: dataDetailRequester.data.profile_image === \"\" ? `/default-users.jpeg` : dataDetailRequester.data.profile_image\n  // })\n\n  const {\n    0: data1,\n    1: setData1\n  } = useState({\n    id: \"\",\n    fullname: \"\",\n    role: \"\",\n    phone_number: \"\",\n    profile_image: `/default-users.jpeg`,\n    company_id: 0,\n    email: \"\",\n    role_ids: [],\n    position: \"\"\n  });\n  const {\n    0: idrole,\n    1: setidrole\n  } = useState(0);\n  const {\n    0: patharr,\n    1: setpatharr\n  } = useState([]);\n  const {\n    0: preloading,\n    1: setpreloading\n  } = useState(true);\n  const {\n    0: datacompanylist,\n    1: setdatacompanylist\n  } = useState([]);\n  const {\n    0: companyid,\n    1: setcompanyid\n  } = useState(0); // const [datarole, setdatarole] = useState({\n  //     account_id: dataDetailRequester.data.user_id,\n  //     role_ids: [dataDetailRequester.data.feature_roles[0]]\n  // })\n\n  const {\n    0: datarole,\n    1: setdatarole\n  } = useState({\n    account_id: Number(data1.id),\n    role_ids: []\n  });\n  const {\n    0: datapass,\n    1: setDatapass\n  } = useState({\n    user_id: data1.id,\n    new_password: \"\"\n  });\n  const {\n    0: loadingupdate,\n    1: setLoadingupdate\n  } = useState(false);\n  const {\n    0: dataraw1,\n    1: setdataraw1\n  } = useState({\n    data: []\n  });\n\n  const onChangeRole = value => {\n    // const arr = []\n    // arr.push(value)\n    // setdatarole({\n    //     ...datarole,\n    //     role_ids: arr\n    // })\n    setData1(_objectSpread(_objectSpread({}, data1), {}, {\n      role_ids: value\n    }));\n  };\n\n  const onChangeEditAgents = e => {\n    setData1(_objectSpread(_objectSpread({}, data1), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const onChangeEditFoto = async e => {\n    setLoadingfoto(true);\n    const foto = e.target.files;\n    const formdata = new FormData();\n    formdata.append(\"file\", foto[0]);\n    formdata.append(\"upload_preset\", \"migsys\");\n    const fetching = await fetch(`https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload`, {\n      method: \"POST\",\n      body: formdata\n    });\n    const datajson = await fetching.json();\n    setData1(_objectSpread(_objectSpread({}, data1), {}, {\n      profile_image: datajson.secure_url\n    }));\n    setLoadingfoto(false);\n  };\n\n  const handleSubmitEditAccount = () => {\n    setLoadingupdate(true); // if ([133].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n    // fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateFeatureRequester`, {\n    //     method: 'PUT',\n    //     headers: {\n    //         'Authorization': JSON.parse(tok),\n    //         'Content-Type': 'application/json'\n    //     },\n    //     body: JSON.stringify(datarole)\n    // })\n    //     .then(res => res.json())\n    //     .then(res2 => {\n    //         setLoadingupdate(false)\n    //     })\n    // }\n    // if ([116].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateRequesterDetail`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data1)\n    }).then(res => res.json()).then(res2 => {\n      setLoadingupdate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(() => {\n          rt.push(`/admin/requesters/detail/${data1.id}`);\n        }, 300);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n      }\n    }); // }\n  };\n\n  const handleActivationRequesters = status => {\n    var keaktifan = false;\n\n    if (status === \"aktif\") {\n      keaktifan = false;\n      setloadingubahaktif(true);\n    } else if (status === \"nonAktif\") {\n      keaktifan = true;\n      setloadingubahnonaktif(true);\n    }\n\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/requesterActivation`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user_id: data1.id,\n        is_enabled: keaktifan\n      })\n    }).then(res => res.json()).then(res2 => {\n      if (res2.success) {\n        setVisible(false);\n        setVisiblenon(false);\n\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(() => {\n          if (status === \"aktif\") {\n            setloadingubahaktif(false);\n          } else if (status === \"nonAktif\") {\n            setloadingubahnonaktif(false);\n          }\n\n          rt.push(`/admin/requesters/${data1.id}`);\n        }, 500);\n      } else if (!res2.success) {\n        setVisible(false);\n        setVisiblenon(false);\n\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  const handleUbahPassword = () => {\n    setloadingubahpass(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/changeRequesterPassword`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datapass)\n    }).then(res => res.json()).then(res2 => {\n      if (res2.success) {\n        setVisibleubahpass(false);\n\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(() => {\n          setloadingubahpass(false);\n          rt.push(`/admin/requesters/${data1.id}`);\n        }, 500);\n      } else if (!res2.success) {\n        setVisibleubahpass(false);\n\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterDetail?account_id=${userid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      } // body: JSON.stringify({\n      //     account_id: userid\n      // })\n\n    }).then(res => res.json()).then(res2 => {\n      var temp = {\n        id: res2.data.id,\n        fullname: res2.data.name,\n        role: res2.data.role,\n        phone_number: res2.data.phone_number,\n        profile_image: res2.data.profile_image === \"\" || res2.data.profile_image === \"-\" ? `/default-users.jpeg` : res2.data.profile_image,\n        company_id: res2.data.company_id,\n        email: res2.data.email,\n        role_ids: res2.data.roles.map(docmap => docmap.id),\n        position: res2.data.position\n      };\n      setData1(temp);\n      setdatarole(_objectSpread(_objectSpread({}, datarole), {}, {\n        account_id: res2.data.id\n      }));\n      setidrole(res2.data.roles.map(docmap => docmap.id));\n      var pathArr = rt.pathname.split(\"/\").slice(1);\n      pathArr.splice(3, 1);\n      pathArr[pathArr.length - 1] = `Ubah Profil Requester - ` + res2.data.name;\n      setpatharr(pathArr);\n      setcompanyid(res2.data.company.id);\n    }).then(() => {\n      fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRoles`, {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(res => res.json()).then(res2 => {\n        setdataraw1(res2);\n        setpreloading(false);\n      });\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getLocations`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdatacompanylist(res2.data.children);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: tok,\n    dataProfile: dataProfile,\n    pathArr: patharr,\n    sidemenu: sidemenu,\n    dataDetailAccount: data1,\n    st: st,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-4\",\n        children: /*#__PURE__*/_jsxDEV(Sticky, {\n          containerSelectorFocus: \"#formAgentsWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white mb-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-semibold py-2\",\n              children: \"Ubah Profil Requester\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                href: `/admin/requesters/detail/${data1.id}`,\n                children: /*#__PURE__*/_jsxDEV(_Button, {\n                  disabled: preloading,\n                  type: \"default\",\n                  children: \"Batal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 17\n              }, this),\n              /*#__PURE__*/\n              // [116, 133].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n              _jsxDEV(_Button, {\n                disabled: preloading,\n                type: \"primary\",\n                loading: loadingupdate,\n                onClick: instanceForm.submit,\n                children: \"Simpan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-3 flex flex-col\",\n        id: \"formAgentsWrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shadow-lg flex flex-col rounded-md w-full h-auto p-4 mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b border-black p-4 font-semibold mb-5 flex\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" mr-3 md:mr-5 pt-1\",\n              children: [\"Ubah Profil Requester - \", data1.fullname]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 col-span-1 md:col-span-1 flex flex-col items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: data1.profile_image,\n                alt: \"imageProfile\",\n                className: \" object-cover w-32 h-32 rounded-full mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this),\n              /*#__PURE__*/\n              // [116].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n              _jsxDEV(\"label\", {\n                className: \"custom-file-upload py-2 px-2 inline-block cursor-pointer text-sm text-black border rounded-sm bg-white hover:border-blue-500 hover:text-blue-500 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  style: {\n                    display: `none`\n                  },\n                  name: \"profile_image\",\n                  onChange: onChangeEditFoto\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 21\n                }, this), loadingfoto ? /*#__PURE__*/_jsxDEV(LoadingOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(EditOutlined, {\n                  style: {\n                    fontSize: `1.2rem`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 23\n                }, this), \"Ganti Foto\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this), preloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 col-span-1 md:col-span-3\",\n              children: /*#__PURE__*/_jsxDEV(_Form, {\n                layout: \"vertical\",\n                initialValues: data1,\n                form: instanceForm,\n                onFinish: handleSubmitEditAccount,\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Asal Lokasi\",\n                  name: \"company_id\",\n                  rules: [{\n                    required: true,\n                    message: \"Asal lokasi wajib diisi\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                    allowClear: true,\n                    dropdownStyle: {\n                      maxHeight: 400,\n                      overflow: \"auto\"\n                    },\n                    treeData: datacompanylist,\n                    placeholder: \"Pilih Asal Lokasi\",\n                    treeDefaultExpandAll: true,\n                    defaultValue: companyid,\n                    disabled: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Nama Lengkap\",\n                  required: true,\n                  tooltip: \"Wajib diisi\",\n                  name: \"fullname\",\n                  rules: [{\n                    required: true,\n                    message: \"Nama Lengkap wajib diisi\"\n                  }],\n                  children:\n                  /*#__PURE__*/\n                  // [116].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                  _jsxDEV(_Input, {\n                    defaultValue: data1.fullname,\n                    onChange: onChangeEditAgents,\n                    name: \"fullname\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 445,\n                    columnNumber: 25\n                  }, this) // :\n                  // <div className=\"col-span-1 flex flex-col mb-5\">\n                  //     <h1 className=\"font-semibold text-sm\">Nama Lengkap:</h1>\n                  //     <h1 className=\"text-sm font-normal text-black\">{data1.fullname}</h1>\n                  // </div>\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Email\",\n                  required: true,\n                  name: \"email\",\n                  rules: [{\n                    required: true,\n                    message: \"Email wajib diisi\"\n                  }, {\n                    pattern: /(\\-)|(^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$)/,\n                    message: \"Email belum diisi dengan benar\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    disabled: true,\n                    value: data1.email,\n                    name: `email`,\n                    onChange: onChangeEditAgents\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 473,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"Posisi\",\n                  required: true,\n                  name: \"position\",\n                  rules: [{\n                    required: true,\n                    message: \"Posisi wajib diisi\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    value: data1.position,\n                    name: `position`,\n                    onChange: onChangeEditAgents\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 491,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  label: \"No. Handphone\",\n                  required: true,\n                  tooltip: \"Wajib diisi\",\n                  name: \"phone_number\",\n                  rules: [{\n                    required: true,\n                    message: \"No. Handphone wajib diisi\"\n                  }, {\n                    pattern: /(\\-)|(^\\d*$)/,\n                    message: \"No. Handphone harus berisi angka\"\n                  }],\n                  children:\n                  /*#__PURE__*/\n                  // [116].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                  _jsxDEV(_Input, {\n                    defaultValue: data1.phone_number,\n                    onChange: onChangeEditAgents,\n                    name: \"phone_number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 515,\n                    columnNumber: 25\n                  }, this) // :\n                  // <div className=\"col-span-1 flex flex-col mb-5\">\n                  //     <h1 className=\"font-semibold text-sm\">Nomor Telepon:</h1>\n                  //     <h1 className=\"text-sm font-normal text-black\">{data1.phone_number}</h1>\n                  // </div>\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"font-semibold\",\n                  children: \"Role:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 21\n                }, this),\n                /*#__PURE__*/\n                // [133].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                _jsxDEV(_Select, {\n                  mode: \"multiple\",\n                  onChange: value => {\n                    onChangeRole(value);\n                  },\n                  defaultValue: idrole,\n                  style: {\n                    width: `100%`\n                  },\n                  children: dataraw1.data.map((doc, idx) => {\n                    return /*#__PURE__*/_jsxDEV(Option, {\n                      value: doc.id,\n                      children: doc.name\n                    }, idx, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 540,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 23\n                }, this) // :\n                // <Select disabled onChange={(value) => { onChangeRole(value) }} defaultValue={idrole} style={{ width: `100%` }}>\n                //     {\n                //         dataraw1.data.map((doc, idx) => {\n                //             return (\n                //                 <Option key={idx} value={doc.id}>{doc.name}</Option>\n                //             )\n                //         })\n                //     }\n                // </Select>\n                ]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n}\n\nexport async function getServerSideProps({\n  req,\n  res,\n  resolvedUrl,\n  params\n}) {\n  // const userid = resolvedUrl.split(\"/\").slice(1)[2]\n  const userid = params.userId;\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resources = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjson = await resources.json();\n  const dataProfile = resjson; // if (!([114, 115, 116, 118, 133].every((curr) => dataProfile.data.registered_feature.includes(curr)))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n  // const resourcesDA = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterDetail`, {\n  //     method: `POST`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps),\n  //         'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify({\n  //         account_id: userid\n  //     })\n  // })\n  // const resjsonDA = await resourcesDA.json()\n  // if (!resjsonDA) {\n  //     res.writeHead(302, { Location: '/admin/requesters' })\n  //     res.end()\n  // }\n  // const dataDetailRequester = resjsonDA\n  // const resourcesRoles = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRoles`, {\n  //     method: `GET`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps)\n  //     }\n  // })\n  // const resjsonRoles = await resourcesRoles.json()\n  // const dataRoles = resjsonRoles\n\n  return {\n    props: {\n      initProps,\n      // dataDetailRequester,\n      dataProfile,\n      // dataRoles,\n      sidemenu: \"62\",\n      userid\n    }\n  };\n}\nexport default RequestersUpdate;","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/requesters/update/[userId]/index.js"],"names":["EditOutlined","LoadingOutlined","Link","useRouter","useEffect","useState","Sticky","Layout","st","httpcookie","modifData","dataa","i","length","id","name","members","children","RequestersUpdate","initProps","dataProfile","dataDetailRequester","dataRoles","sidemenu","userid","rt","tok","instanceForm","useForm","Option","loadingfoto","setLoadingfoto","data1","setData1","fullname","role","phone_number","profile_image","company_id","email","role_ids","position","idrole","setidrole","patharr","setpatharr","preloading","setpreloading","datacompanylist","setdatacompanylist","companyid","setcompanyid","datarole","setdatarole","account_id","Number","datapass","setDatapass","user_id","new_password","loadingupdate","setLoadingupdate","dataraw1","setdataraw1","data","onChangeRole","value","onChangeEditAgents","e","target","onChangeEditFoto","foto","files","formdata","FormData","append","fetching","fetch","method","body","datajson","json","secure_url","handleSubmitEditAccount","process","env","NEXT_PUBLIC_BACKEND_URL","headers","Authorization","JSON","parse","stringify","then","res","res2","success","message","duration","setTimeout","push","errorInfo","status_detail","handleActivationRequesters","status","keaktifan","setloadingubahaktif","setloadingubahnonaktif","is_enabled","setVisible","setVisiblenon","handleUbahPassword","setloadingubahpass","setVisibleubahpass","temp","roles","map","docmap","pathArr","pathname","split","slice","splice","company","submit","display","fontSize","required","maxHeight","overflow","pattern","width","doc","idx","getServerSideProps","req","resolvedUrl","params","userId","cookie","redirect","permanent","destination","cookiesJSON1","token","resources","resjson","props"],"mappings":"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","sourcesContent":["import { EditOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { Button, Form, Input, Select, TreeSelect, notification } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\n\nimport Layout from \"../../../../../components/layout-dashboard\";\nimport st from \"../../../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction modifData(dataa) {\n  for (var i = 0; i < dataa.length; i++) {\n    dataa[i][\"key\"] = dataa[i].id;\n    dataa[i][\"value\"] = dataa[i].id;\n    dataa[i][\"title\"] = dataa[i].name;\n    dataa[i][\"children\"] = dataa[i].members;\n    delete dataa[i].members;\n    if (dataa[i].children) [modifData(dataa[i].children)];\n  }\n  return dataa;\n}\n\nfunction RequestersUpdate({\n  initProps,\n  dataProfile,\n  dataDetailRequester,\n  dataRoles,\n  sidemenu,\n  userid,\n}) {\n  const rt = useRouter();\n  const tok = initProps;\n  // var pathArr = rt.pathname.split(\"/\").slice(1)\n  // pathArr[pathArr.length - 1] = dataDetailRequester.data.fullname\n  const [instanceForm] = Form.useForm();\n  const { Option } = Select;\n\n  const [loadingfoto, setLoadingfoto] = useState(false);\n  // const [data1, setData1] = useState({\n  //     id: dataDetailRequester.data.user_id,\n  //     fullname: dataDetailRequester.data.fullname,\n  //     role: dataDetailRequester.data.role,\n  //     phone_number: dataDetailRequester.data.phone_number,\n  //     profile_image: dataDetailRequester.data.profile_image === \"\" ? `/default-users.jpeg` : dataDetailRequester.data.profile_image\n  // })\n  const [data1, setData1] = useState({\n    id: \"\",\n    fullname: \"\",\n    role: \"\",\n    phone_number: \"\",\n    profile_image: `/default-users.jpeg`,\n    company_id: 0,\n    email: \"\",\n    role_ids: [],\n    position: \"\",\n  });\n  const [idrole, setidrole] = useState(0);\n  const [patharr, setpatharr] = useState([]);\n  const [preloading, setpreloading] = useState(true);\n  const [datacompanylist, setdatacompanylist] = useState([]);\n  const [companyid, setcompanyid] = useState(0);\n  // const [datarole, setdatarole] = useState({\n  //     account_id: dataDetailRequester.data.user_id,\n  //     role_ids: [dataDetailRequester.data.feature_roles[0]]\n  // })\n  const [datarole, setdatarole] = useState({\n    account_id: Number(data1.id),\n    role_ids: [],\n  });\n  const [datapass, setDatapass] = useState({\n    user_id: data1.id,\n    new_password: \"\",\n  });\n  const [loadingupdate, setLoadingupdate] = useState(false);\n  const [dataraw1, setdataraw1] = useState({ data: [] });\n\n  const onChangeRole = (value) => {\n    // const arr = []\n    // arr.push(value)\n    // setdatarole({\n    //     ...datarole,\n    //     role_ids: arr\n    // })\n    setData1({ ...data1, role_ids: value });\n  };\n  const onChangeEditAgents = (e) => {\n    setData1({\n      ...data1,\n      [e.target.name]: e.target.value,\n    });\n  };\n  const onChangeEditFoto = async (e) => {\n    setLoadingfoto(true);\n    const foto = e.target.files;\n    const formdata = new FormData();\n    formdata.append(\"file\", foto[0]);\n    formdata.append(\"upload_preset\", \"migsys\");\n    const fetching = await fetch(\n      `https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload`,\n      {\n        method: \"POST\",\n        body: formdata,\n      }\n    );\n    const datajson = await fetching.json();\n    setData1({\n      ...data1,\n      profile_image: datajson.secure_url,\n    });\n    setLoadingfoto(false);\n  };\n  const handleSubmitEditAccount = () => {\n    setLoadingupdate(true);\n    // if ([133].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n    // fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateFeatureRequester`, {\n    //     method: 'PUT',\n    //     headers: {\n    //         'Authorization': JSON.parse(tok),\n    //         'Content-Type': 'application/json'\n    //     },\n    //     body: JSON.stringify(datarole)\n    // })\n    //     .then(res => res.json())\n    //     .then(res2 => {\n    //         setLoadingupdate(false)\n    //     })\n    // }\n    // if ([116].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/updateRequesterDetail`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data1),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setLoadingupdate(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: res2.message,\n            duration: 3,\n          });\n          setTimeout(() => {\n            rt.push(`/admin/requesters/detail/${data1.id}`);\n          }, 300);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message.errorInfo.status_detail,\n            duration: 3,\n          });\n        }\n      });\n    // }\n  };\n  const handleActivationRequesters = (status) => {\n    var keaktifan = false;\n    if (status === \"aktif\") {\n      keaktifan = false;\n      setloadingubahaktif(true);\n    } else if (status === \"nonAktif\") {\n      keaktifan = true;\n      setloadingubahnonaktif(true);\n    }\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/requesterActivation`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user_id: data1.id,\n        is_enabled: keaktifan,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        if (res2.success) {\n          setVisible(false);\n          setVisiblenon(false);\n          notification[\"success\"]({\n            message: res2.message,\n            duration: 3,\n          });\n          setTimeout(() => {\n            if (status === \"aktif\") {\n              setloadingubahaktif(false);\n            } else if (status === \"nonAktif\") {\n              setloadingubahnonaktif(false);\n            }\n            rt.push(`/admin/requesters/${data1.id}`);\n          }, 500);\n        } else if (!res2.success) {\n          setVisible(false);\n          setVisiblenon(false);\n          notification[\"error\"]({\n            message: res2.message.errorInfo.status_detail,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleUbahPassword = () => {\n    setloadingubahpass(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/changeRequesterPassword`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(tok),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(datapass),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        if (res2.success) {\n          setVisibleubahpass(false);\n          notification[\"success\"]({\n            message: res2.message,\n            duration: 3,\n          });\n          setTimeout(() => {\n            setloadingubahpass(false);\n            rt.push(`/admin/requesters/${data1.id}`);\n          }, 500);\n        } else if (!res2.success) {\n          setVisibleubahpass(false);\n          notification[\"error\"]({\n            message: res2.message.errorInfo.status_detail,\n            duration: 3,\n          });\n        }\n      });\n  };\n\n  //useEffect\n  useEffect(() => {\n    fetch(\n      `${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterDetail?account_id=${userid}`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n          \"Content-Type\": \"application/json\",\n        },\n        // body: JSON.stringify({\n        //     account_id: userid\n        // })\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        var temp = {\n          id: res2.data.id,\n          fullname: res2.data.name,\n          role: res2.data.role,\n          phone_number: res2.data.phone_number,\n          profile_image:\n            res2.data.profile_image === \"\" || res2.data.profile_image === \"-\"\n              ? `/default-users.jpeg`\n              : res2.data.profile_image,\n          company_id: res2.data.company_id,\n          email: res2.data.email,\n          role_ids: res2.data.roles.map((docmap) => docmap.id),\n          position: res2.data.position,\n        };\n        setData1(temp);\n        setdatarole({ ...datarole, account_id: res2.data.id });\n        setidrole(res2.data.roles.map((docmap) => docmap.id));\n        var pathArr = rt.pathname.split(\"/\").slice(1);\n        pathArr.splice(3, 1);\n        pathArr[pathArr.length - 1] =\n          `Ubah Profil Requester - ` + res2.data.name;\n        setpatharr(pathArr);\n        setcompanyid(res2.data.company.id);\n      })\n      .then(() => {\n        fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRoles`, {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        })\n          .then((res) => res.json())\n          .then((res2) => {\n            setdataraw1(res2);\n            setpreloading(false);\n          });\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getLocations`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setdatacompanylist(res2.data.children);\n      });\n  }, []);\n\n  return (\n    <Layout\n      tok={tok}\n      dataProfile={dataProfile}\n      pathArr={patharr}\n      sidemenu={sidemenu}\n      dataDetailAccount={data1}\n      st={st}\n    >\n      <div className=\"w-full h-auto grid grid-cols-1 md:grid-cols-4\">\n        <div className=\"col-span-1 md:col-span-4\">\n          <Sticky containerSelectorFocus=\"#formAgentsWrapper\">\n            <div className=\"flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white mb-8\">\n              <h1 className=\"font-semibold py-2\">Ubah Profil Requester</h1>\n              <div className=\"flex space-x-2\">\n                <Link href={`/admin/requesters/detail/${data1.id}`}>\n                  <Button disabled={preloading} type=\"default\">\n                    Batal\n                  </Button>\n                </Link>\n                {\n                  // [116, 133].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n                  <Button\n                    disabled={preloading}\n                    type=\"primary\"\n                    loading={loadingupdate}\n                    onClick={instanceForm.submit}\n                  >\n                    Simpan\n                  </Button>\n                }\n              </div>\n            </div>\n          </Sticky>\n        </div>\n        <div\n          className=\" col-span-1 md:col-span-3 flex flex-col\"\n          id=\"formAgentsWrapper\"\n        >\n          <div className=\"shadow-lg flex flex-col rounded-md w-full h-auto p-4 mb-5\">\n            <div className=\"border-b border-black p-4 font-semibold mb-5 flex\">\n              <div className=\" mr-3 md:mr-5 pt-1\">\n                Ubah Profil Requester - {data1.fullname}\n              </div>\n              {/* {\n                                [114].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                                    <div className=\"pt-1\">\n                                        {\n                                            dataDetailRequester.data.attribute.is_enabled ?\n                                                <Switch checked={true} onChange={() => { setVisible(true) }} checkedChildren={\"AKTIF\"}></Switch>\n                                                :\n                                                <Switch checked={false} onChange={() => { setVisiblenon(true) }} unCheckedChildren={\"NON-AKTIF\"}></Switch>\n                                        }\n                                    </div>\n                                    :\n                                    <div className=\"pt-1\">\n                                        {\n                                            dataDetailRequester.data.attribute.is_enabled ?\n                                                <Switch disabled checked={true} onChange={() => { setVisible(true) }} checkedChildren={\"AKTIF\"}></Switch>\n                                                :\n                                                <Switch disabled checked={false} onChange={() => { setVisiblenon(true) }} unCheckedChildren={\"NON-AKTIF\"}></Switch>\n                                        }\n                                    </div>\n                            } */}\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-4\">\n              <div className=\"p-3 col-span-1 md:col-span-1 flex flex-col items-center\">\n                <img\n                  src={data1.profile_image}\n                  alt=\"imageProfile\"\n                  className=\" object-cover w-32 h-32 rounded-full mb-4\"\n                />\n                {\n                  // [116].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n                  <label className=\"custom-file-upload py-2 px-2 inline-block cursor-pointer text-sm text-black border rounded-sm bg-white hover:border-blue-500 hover:text-blue-500 mb-3\">\n                    <input\n                      type=\"file\"\n                      style={{ display: `none` }}\n                      name=\"profile_image\"\n                      onChange={onChangeEditFoto}\n                    />\n                    {loadingfoto ? (\n                      <LoadingOutlined />\n                    ) : (\n                      <EditOutlined style={{ fontSize: `1.2rem` }} />\n                    )}\n                    Ganti Foto\n                  </label>\n                }\n                {/* {\n                                    [115].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n                                    <div className=\"w-full h-auto\">\n                                        <button className=\"w-full h-auto py-2 text-center bg-primary hover:bg-secondary text-white rounded-sm\" onClick={() => { setVisibleubahpass(true) }}>\n                                            Ubah Password\n                                        </button>\n                                    </div >\n                                } */}\n              </div>\n              {preloading ? null : (\n                <div className=\"p-3 col-span-1 md:col-span-3\">\n                  <Form\n                    layout=\"vertical\"\n                    initialValues={data1}\n                    form={instanceForm}\n                    onFinish={handleSubmitEditAccount}\n                  >\n                    <Form.Item\n                      label=\"Asal Lokasi\"\n                      name=\"company_id\"\n                      rules={[\n                        {\n                          required: true,\n                          message: \"Asal lokasi wajib diisi\",\n                        },\n                      ]}\n                    >\n                      <TreeSelect\n                        allowClear\n                        dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                        treeData={datacompanylist}\n                        placeholder=\"Pilih Asal Lokasi\"\n                        treeDefaultExpandAll\n                        defaultValue={companyid}\n                        disabled\n                      />\n                    </Form.Item>\n                    <Form.Item\n                      label=\"Nama Lengkap\"\n                      required\n                      tooltip=\"Wajib diisi\"\n                      name=\"fullname\"\n                      rules={[\n                        {\n                          required: true,\n                          message: \"Nama Lengkap wajib diisi\",\n                        },\n                      ]}\n                    >\n                      {\n                        // [116].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                        <Input\n                          defaultValue={data1.fullname}\n                          onChange={onChangeEditAgents}\n                          name=\"fullname\"\n                        />\n                        // :\n                        // <div className=\"col-span-1 flex flex-col mb-5\">\n                        //     <h1 className=\"font-semibold text-sm\">Nama Lengkap:</h1>\n                        //     <h1 className=\"text-sm font-normal text-black\">{data1.fullname}</h1>\n                        // </div>\n                      }\n                    </Form.Item>\n                    <Form.Item\n                      label=\"Email\"\n                      required\n                      name=\"email\"\n                      rules={[\n                        {\n                          required: true,\n                          message: \"Email wajib diisi\",\n                        },\n                        {\n                          pattern:\n                            /(\\-)|(^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$)/,\n                          message: \"Email belum diisi dengan benar\",\n                        },\n                      ]}\n                    >\n                      <Input\n                        disabled\n                        value={data1.email}\n                        name={`email`}\n                        onChange={onChangeEditAgents}\n                      />\n                    </Form.Item>\n                    <Form.Item\n                      label=\"Posisi\"\n                      required\n                      name=\"position\"\n                      rules={[\n                        {\n                          required: true,\n                          message: \"Posisi wajib diisi\",\n                        },\n                      ]}\n                    >\n                      <Input\n                        value={data1.position}\n                        name={`position`}\n                        onChange={onChangeEditAgents}\n                      />\n                    </Form.Item>\n                    <Form.Item\n                      label=\"No. Handphone\"\n                      required\n                      tooltip=\"Wajib diisi\"\n                      name=\"phone_number\"\n                      rules={[\n                        {\n                          required: true,\n                          message: \"No. Handphone wajib diisi\",\n                        },\n                        {\n                          pattern: /(\\-)|(^\\d*$)/,\n                          message: \"No. Handphone harus berisi angka\",\n                        },\n                      ]}\n                    >\n                      {\n                        // [116].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                        <Input\n                          defaultValue={data1.phone_number}\n                          onChange={onChangeEditAgents}\n                          name=\"phone_number\"\n                        />\n                        // :\n                        // <div className=\"col-span-1 flex flex-col mb-5\">\n                        //     <h1 className=\"font-semibold text-sm\">Nomor Telepon:</h1>\n                        //     <h1 className=\"text-sm font-normal text-black\">{data1.phone_number}</h1>\n                        // </div>\n                      }\n                    </Form.Item>\n                    <h1 className=\"font-semibold\">Role:</h1>\n                    {\n                      // [133].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                      <Select\n                        mode=\"multiple\"\n                        onChange={(value) => {\n                          onChangeRole(value);\n                        }}\n                        defaultValue={idrole}\n                        style={{ width: `100%` }}\n                      >\n                        {dataraw1.data.map((doc, idx) => {\n                          return (\n                            <Option key={idx} value={doc.id}>\n                              {doc.name}\n                            </Option>\n                          );\n                        })}\n                      </Select>\n                      // :\n                      // <Select disabled onChange={(value) => { onChangeRole(value) }} defaultValue={idrole} style={{ width: `100%` }}>\n                      //     {\n                      //         dataraw1.data.map((doc, idx) => {\n                      //             return (\n                      //                 <Option key={idx} value={doc.id}>{doc.name}</Option>\n                      //             )\n                      //         })\n                      //     }\n                      // </Select>\n                    }\n                    {/* <Form.Item label=\"Role\" required tooltip=\"Wajib diisi\" name=\"role\" initialValue={data1.role}\n                                        rules={[\n                                            {\n                                                required: true,\n                                                message: 'Role harus diisi',\n                                            },\n                                        ]}>\n                                        <input type=\"number\" defaultValue={data1.role} name={'role'} onChange={onChangeEditAgents} />\n                                    </Form.Item> */}\n                  </Form>\n                </div>\n              )}\n            </div>\n          </div>\n          {/* <div className=\"shadow-lg flex flex-col rounded-md w-full h-auto p-4 mb-14\">\n                        <div className=\"border-b border-black p-4 font-semibold mb-5\">\n                            Detail Perusahaan\n                        </div>\n                        <div className=\"grid grid-cols-1 md:grid-cols-4\">\n                            <div className=\"p-3 col-span-1 md:col-span-1\">\n                                <img src={dataDetailAccount.data.data.company.image_logo} alt=\"imageProfile\" className=\" object-cover w-32 h-32 rounded-full\" />\n                            </div>\n                            <div className=\"col-span-1 md:col-span-3 p-3 space-y-4\">\n                                <div>\n                                    <h1 className=\"font-semibold text-sm\">ID Perusahaan:</h1>\n                                    <h1 className=\"font-normal text-sm\">{dataDetailAccount.data.data.company.company_id}</h1>\n                                </div>\n                                <div>\n                                    <h1 className=\"font-semibold text-sm\">Nama Perusahaan:</h1>\n                                    <h1 className=\"font-normal text-sm\">{dataDetailAccount.data.data.company.company_name}</h1>\n                                </div>\n                            </div>\n                        </div>\n                    </div> */}\n          {/* <div className=\"w-full p-3 md:p-5 h-auto\">\n                        {\n                            dataDetailAccount.data.data.attribute.is_enabled ?\n                                <button className=\" w-full h-auto py-2 text-center bg-red-600 text-white hover:bg-red-800 rounded-md\" onClick={() => { setVisible(true) }}>\n                                    Non Aktifkan Akun\n                                </button>\n                                :\n                                <button className=\" w-full h-auto py-2 text-center bg-blue-600 text-white hover:bg-blue-800 rounded-md\" onClick={() => { setVisiblenon(true) }}>\n                                    Aktifkan Akun\n                                </button>\n                        }\n                    </div > */}\n          {/* <Modal\n                        title=\"Konfirmasi untuk menon-aktifkan akun\"\n                        visible={visible}\n                        onOk={() => { handleActivationRequesters(\"aktif\") }}\n                        onCancel={() => setVisible(false)}\n                        okButtonProps={{ disabled: loadingubahaktif }}\n                    >\n                        Apakah anda yakin ingin menon-aktifkan akun agent <strong>{dataDetailRequester.data.fullname}</strong>?\n                    </Modal>\n                    <Modal\n                        title=\"Konfirmasi untuk mengakaktifkan akun\"\n                        visible={visiblenon}\n                        onOk={() => { handleActivationRequesters(\"nonAktif\") }}\n                        onCancel={() => setVisiblenon(false)}\n                        okButtonProps={{ disabled: loadingubahnonaktif }}\n                    >\n                        Apakah anda yakin ingin melakukan aktivasi akun agent <strong>{dataDetailRequester.data.fullname}</strong>?`\n                    </Modal>\n                    <Modal\n                        title=\"Ubah Password\"\n                        visible={visibleubahpass}\n                        onOk={handleUbahPassword}\n                        onCancel={() => setVisibleubahpass(false)}\n                        destroyOnClose={true}\n                        okButtonProps={{ disabled: loadingubahpass }}\n                    >\n                        <Input.Password name=\"new_password\" value={datapass.new_password} placeholder=\"Password Baru\" type=\"password\" onChange={(e) => { setDatapass({ ...datapass, [e.target.name]: e.target.value }) }} style={{ marginBottom: `2rem` }} />\n                    </Modal> */}\n        </div>\n        {/* <div className=\"col-span-1 md:col-span-1 hidden md:flex flex-col space-y-4 p-4\">\n                    <div className=\"font-semibold text-base\">Requesters</div>\n                    <p className=\"font-normal text-sm\">\n                        This page lets you handpick a set of requesters and add them to your help desk. These requesters will have selective privileges to submit requests to your helpdesk. You can restrict access such that only people who have been added here are allowed to login to your self-service portal and access your knowledge base. <br /> <br />\n                        You can fill in the details of each of your new requesters manually or import a list of users from a CSV file. Once you have populated your list, your agents can open up each of your requesters and view their ticket history and contact information.\n                    </p>\n                </div> */}\n      </div>\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ req, res, resolvedUrl, params }) {\n  // const userid = resolvedUrl.split(\"/\").slice(1)[2]\n  const userid = params.userId;\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n\n  const resources = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjson = await resources.json();\n  const dataProfile = resjson;\n\n  // if (!([114, 115, 116, 118, 133].every((curr) => dataProfile.data.registered_feature.includes(curr)))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  // const resourcesDA = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRequesterDetail`, {\n  //     method: `POST`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps),\n  //         'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify({\n  //         account_id: userid\n  //     })\n  // })\n  // const resjsonDA = await resourcesDA.json()\n  // if (!resjsonDA) {\n  //     res.writeHead(302, { Location: '/admin/requesters' })\n  //     res.end()\n  // }\n  // const dataDetailRequester = resjsonDA\n\n  // const resourcesRoles = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRoles`, {\n  //     method: `GET`,\n  //     headers: {\n  //         'Authorization': JSON.parse(initProps)\n  //     }\n  // })\n  // const resjsonRoles = await resourcesRoles.json()\n  // const dataRoles = resjsonRoles\n\n  return {\n    props: {\n      initProps,\n      // dataDetailRequester,\n      dataProfile,\n      // dataRoles,\n      sidemenu: \"62\",\n      userid,\n    },\n  };\n}\n\nexport default RequestersUpdate;\n"]},"metadata":{},"sourceType":"module"}