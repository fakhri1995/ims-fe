{"ast":null,"code":"import _Table from \"antd/lib/table\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/index.js\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ModelsIndex = ({\n  initProps,\n  dataProfile,\n  sidemenu\n}) => {\n  // 1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  var asset_id1 = \"\",\n      name1 = \"\";\n  const {\n    asset_id,\n    name,\n    sort_by,\n    sort_type\n  } = rt.query;\n\n  if (asset_id) {\n    asset_id1 = asset_id;\n  }\n\n  if (name) {\n    name1 = name;\n  } //2.useState\n\n\n  const {\n    0: displayentiredata,\n    1: setdisplayentiredata\n  } = useState({\n    success: false,\n    message: \"\",\n    data: {\n      current_page: 0,\n      data: [],\n      first_page_url: \"\",\n      from: 0,\n      last_page: 0,\n      last_page_url: \"\",\n      next_page_url: null,\n      path: \"\",\n      per_page: \"\",\n      prev_page_url: \"\",\n      to: 0,\n      total: 0\n    }\n  });\n  const {\n    0: displaydata,\n    1: setdisplaydata\n  } = useState([]);\n  const {\n    0: assetdata,\n    1: setassetdata\n  } = useState([]);\n  const {\n    0: displaydata1,\n    1: setdisplaydata1\n  } = useState([]);\n  const {\n    0: displaydata2,\n    1: setdisplaydata2\n  } = useState([]);\n  const {\n    0: namasearchact,\n    1: setnamasearchact\n  } = useState(name1 === \"\" ? false : true);\n  const {\n    0: namavalue,\n    1: setnamavalue\n  } = useState(null);\n  const {\n    0: assettypefilteract,\n    1: setassettypefilteract\n  } = useState(asset_id1 === \"\" ? false : true);\n  const {\n    0: assettypevalue,\n    1: setassettypevalue\n  } = useState(null);\n  const {\n    0: namaasset,\n    1: setnamaasset\n  } = useState(asset_id1);\n  const {\n    0: defasset,\n    1: setdefasset\n  } = useState(null);\n  const {\n    0: rowstate,\n    1: setrowstate\n  } = useState(0);\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true); //3.Define\n\n  const columnsTable = [{\n    title: \"Nama\",\n    dataIndex: \"name\",\n    sorter: (a, b) => a.name.length - b.name.length,\n    defaultSortOrder: `${sort_type && sort_by === \"name\" ? sort_type === \"asc\" ? \"ascend\" : \"descend\" : null}`\n  }, {\n    title: \"Asset Type\",\n    dataIndex: \"asset_name\"\n  }, {\n    title: \"Jumlah Item\",\n    dataIndex: \"count\",\n    sorter: (a, b) => a.count - b.count,\n    defaultSortOrder: `${sort_type && sort_by === \"count\" ? sort_type === \"asc\" ? \"ascend\" : \"descend\" : null}`\n  }]; //3.onChange\n\n  const onChangeSearch = e => {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `/admin/models?asset_id=${assettypefilteract ? asset_id1 : \"\"}&name=&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n\n  const onChangeAssetType = id => {\n    if (typeof id === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `/admin/models?asset_id=&name=${namasearchact ? name1 : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setassettypefilteract(false);\n    } else {\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  };\n\n  const onFinalClick = () => {\n    // var datatemp = displaydata1\n    // if (assettypefilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return (flt.asset_id === Number(assettypevalue)) || (flt.asset_name.replaceAll(/\\s+\\/\\s+/g, \"/\").split(\"/\")[0] === namaasset)\n    //     })\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.name.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // setdisplaydata(datatemp)\n    window.location.href = `/admin/models?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&name=${namasearchact ? namavalue === null ? name1 : namavalue : \"\"}&sort_by=${sort_by}&sort_type=${sort_type}`;\n  }; //4.handler\n  //5.useEffect\n\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?asset_id=${asset_id1}&name=${name1}&sort_by=${sort_by}&sort_type=${sort_type}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      setdisplayentiredata(res2);\n      setdisplaydata(res2.data.data);\n      setdisplaydata1(res2.data.data);\n      setdisplaydata2(res2.data.data);\n      console.log(assettypefilteract, namasearchact);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      var selectedAsset = {};\n\n      const recursiveSearchAsset = (doc, key) => {\n        for (var i = 0; i < doc.length; i++) {\n          if (doc[i].id === key) {\n            selectedAsset = doc[i];\n          } else {\n            if (doc[i].children) {\n              recursiveSearchAsset(doc[i].children, key);\n            }\n          }\n        }\n      };\n\n      recursiveSearchAsset(res2.data, Number(namaasset));\n      setdefasset(selectedAsset.key);\n      setassetdata(res2.data);\n      setpraloading(false);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-base w-auto\",\n          children: \"Models\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/admin/models/create\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            size: \"large\",\n            type: \"primary\",\n            children: \"Tambah\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n        children: [praloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" w-10/12 mr-1 grid grid-cols-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-4 mr-1\",\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                style: {\n                  width: `100%`,\n                  marginRight: `0.5rem`\n                },\n                defaultValue: name1,\n                placeholder: \"Cari Nama Model\",\n                onChange: onChangeSearch,\n                allowClear: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-2 mr-1\",\n              children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                allowClear: true,\n                dropdownStyle: {\n                  maxHeight: 400,\n                  overflow: \"auto\"\n                },\n                defaultValue: namaasset === \"\" ? null : defasset,\n                treeData: assetdata,\n                placeholder: \"Cari Asset Type\",\n                treeDefaultExpandAll: true,\n                style: {\n                  width: `100%`,\n                  marginRight: `0.5rem`\n                },\n                onChange: (value, label, extra) => {\n                  if (typeof value === \"undefined\") {\n                    onChangeAssetType();\n                  } else {\n                    onChangeAssetType(extra.allCheckedNodes[0].node.props.id);\n                    setnamaasset(extra.allCheckedNodes[0].node.props.title);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-2/12\",\n            children: /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              style: {\n                width: `100%`\n              },\n              onClick: onFinalClick,\n              children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(_Table, {\n          className: \"tableTypeTask\",\n          pagination: {\n            pageSize: 10,\n            total: displayentiredata.data.total,\n            onChange: (page, pageSize) => {\n              setpraloading(true);\n              fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?page=${page}&rows=10&asset_id=${asset_id1}&name=${name1}&sort_by=${sort_by}&sort_type=${sort_type}`, {\n                method: `GET`,\n                headers: {\n                  Authorization: JSON.parse(initProps)\n                }\n              }).then(res => res.json()).then(res2 => {\n                setdisplayentiredata(res2);\n                setdisplaydata(res2.data.data);\n                setdisplaydata1(res2.data.data);\n                setdisplaydata2(res2.data.data);\n                setpraloading(false);\n              });\n            }\n          },\n          scroll: {\n            x: 200\n          },\n          dataSource: displaydata,\n          columns: columnsTable,\n          loading: praloading,\n          onRow: (record, rowIndex) => {\n            return {\n              onMouseOver: event => {\n                setrowstate(record.id);\n              },\n              onClick: event => {\n                // {\n                //     [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                rt.push(`/admin/models/detail/${record.id}`); //         :\n                //         null\n                // }\n              }\n            };\n          },\n          rowClassName: (record, idx) => {\n            return record.id === rowstate ? `cursor-pointer` : ``;\n          },\n          onChange: (pagination, filters, sorter, extra) => {\n            // console.log('params', pagination, filters, sorter, extra);\n            if (extra.action === \"sort\") {\n              if (sorter.column) {\n                if (sorter.column.dataIndex === \"name\") {\n                  window.location.href = `/admin/models?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&sort_by=name&sort_type=${sorter.order === \"ascend\" ? \"asc\" : \"desc\"}`;\n                } else if (sorter.column.dataIndex === \"count\") {\n                  window.location.href = `/admin/models?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&sort_by=count&sort_type=${sorter.order === \"ascend\" ? \"asc\" : \"desc\"}`;\n                }\n              } else {\n                window.location.href = `/admin/models?asset_id=${assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\"}&name=${namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\"}&sort_by=&sort_type=`;\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"82\"\n    }\n  };\n}\nexport default ModelsIndex;","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/index.js"],"names":["SearchOutlined","Link","useRouter","useEffect","useState","Layout","st","httpcookie","ModelsIndex","initProps","dataProfile","sidemenu","rt","pathArr","pathname","split","slice","asset_id1","name1","asset_id","name","sort_by","sort_type","query","displayentiredata","setdisplayentiredata","success","message","data","current_page","first_page_url","from","last_page","last_page_url","next_page_url","path","per_page","prev_page_url","to","total","displaydata","setdisplaydata","assetdata","setassetdata","displaydata1","setdisplaydata1","displaydata2","setdisplaydata2","namasearchact","setnamasearchact","namavalue","setnamavalue","assettypefilteract","setassettypefilteract","assettypevalue","setassettypevalue","namaasset","setnamaasset","defasset","setdefasset","rowstate","setrowstate","praloading","setpraloading","columnsTable","title","dataIndex","sorter","a","b","length","defaultSortOrder","count","onChangeSearch","e","target","value","window","location","href","onChangeAssetType","id","onFinalClick","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","then","res","json","res2","console","log","selectedAsset","recursiveSearchAsset","doc","key","i","children","Number","width","marginRight","maxHeight","overflow","label","extra","allCheckedNodes","node","props","pageSize","onChange","page","x","record","rowIndex","onMouseOver","event","onClick","push","idx","pagination","filters","action","column","order","getServerSideProps","req","cookie","redirect","permanent","destination","cookiesJSON1","token","resourcesGP","resjsonGP"],"mappings":"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","sourcesContent":["import { SearchOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Table, TreeSelect } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\n\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ModelsIndex = ({ initProps, dataProfile, sidemenu }) => {\n  // 1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  var asset_id1 = \"\",\n    name1 = \"\";\n  const { asset_id, name, sort_by, sort_type } = rt.query;\n  if (asset_id) {\n    asset_id1 = asset_id;\n  }\n  if (name) {\n    name1 = name;\n  }\n\n  //2.useState\n  const [displayentiredata, setdisplayentiredata] = useState({\n    success: false,\n    message: \"\",\n    data: {\n      current_page: 0,\n      data: [],\n      first_page_url: \"\",\n      from: 0,\n      last_page: 0,\n      last_page_url: \"\",\n      next_page_url: null,\n      path: \"\",\n      per_page: \"\",\n      prev_page_url: \"\",\n      to: 0,\n      total: 0,\n    },\n  });\n  const [displaydata, setdisplaydata] = useState([]);\n  const [assetdata, setassetdata] = useState([]);\n  const [displaydata1, setdisplaydata1] = useState([]);\n  const [displaydata2, setdisplaydata2] = useState([]);\n  const [namasearchact, setnamasearchact] = useState(\n    name1 === \"\" ? false : true\n  );\n  const [namavalue, setnamavalue] = useState(null);\n  const [assettypefilteract, setassettypefilteract] = useState(\n    asset_id1 === \"\" ? false : true\n  );\n  const [assettypevalue, setassettypevalue] = useState(null);\n  const [namaasset, setnamaasset] = useState(asset_id1);\n  const [defasset, setdefasset] = useState(null);\n  const [rowstate, setrowstate] = useState(0);\n  const [praloading, setpraloading] = useState(true);\n\n  //3.Define\n  const columnsTable = [\n    {\n      title: \"Nama\",\n      dataIndex: \"name\",\n      sorter: (a, b) => a.name.length - b.name.length,\n      defaultSortOrder: `${\n        sort_type && sort_by === \"name\"\n          ? sort_type === \"asc\"\n            ? \"ascend\"\n            : \"descend\"\n          : null\n      }`,\n    },\n    {\n      title: \"Asset Type\",\n      dataIndex: \"asset_name\",\n    },\n    {\n      title: \"Jumlah Item\",\n      dataIndex: \"count\",\n      sorter: (a, b) => a.count - b.count,\n      defaultSortOrder: `${\n        sort_type && sort_by === \"count\"\n          ? sort_type === \"asc\"\n            ? \"ascend\"\n            : \"descend\"\n          : null\n      }`,\n    },\n  ];\n\n  //3.onChange\n  const onChangeSearch = (e) => {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `/admin/models?asset_id=${\n        assettypefilteract ? asset_id1 : \"\"\n      }&name=&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n  const onChangeAssetType = (id) => {\n    if (typeof id === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `/admin/models?asset_id=&name=${\n        namasearchact ? name1 : \"\"\n      }&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setassettypefilteract(false);\n    } else {\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  };\n  const onFinalClick = () => {\n    // var datatemp = displaydata1\n    // if (assettypefilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return (flt.asset_id === Number(assettypevalue)) || (flt.asset_name.replaceAll(/\\s+\\/\\s+/g, \"/\").split(\"/\")[0] === namaasset)\n    //     })\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.name.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // setdisplaydata(datatemp)\n    window.location.href = `/admin/models?asset_id=${\n      assettypefilteract\n        ? assettypevalue === null\n          ? asset_id1\n          : assettypevalue\n        : \"\"\n    }&name=${\n      namasearchact ? (namavalue === null ? name1 : namavalue) : \"\"\n    }&sort_by=${sort_by}&sort_type=${sort_type}`;\n  };\n\n  //4.handler\n\n  //5.useEffect\n  useEffect(() => {\n    fetch(\n      `${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?asset_id=${asset_id1}&name=${name1}&sort_by=${sort_by}&sort_type=${sort_type}`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        setdisplayentiredata(res2);\n        setdisplaydata(res2.data.data);\n        setdisplaydata1(res2.data.data);\n        setdisplaydata2(res2.data.data);\n        console.log(assettypefilteract, namasearchact);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var selectedAsset = {};\n        const recursiveSearchAsset = (doc, key) => {\n          for (var i = 0; i < doc.length; i++) {\n            if (doc[i].id === key) {\n              selectedAsset = doc[i];\n            } else {\n              if (doc[i].children) {\n                recursiveSearchAsset(doc[i].children, key);\n              }\n            }\n          }\n        };\n        recursiveSearchAsset(res2.data, Number(namaasset));\n        setdefasset(selectedAsset.key);\n        setassetdata(res2.data);\n        setpraloading(false);\n      });\n  }, []);\n\n  return (\n    <Layout\n      tok={initProps}\n      dataProfile={dataProfile}\n      sidemenu={sidemenu}\n      st={st}\n      pathArr={pathArr}\n    >\n      <div className=\"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\">\n        <div className=\" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\">\n          <div className=\"font-semibold text-base w-auto\">Models</div>\n        </div>\n        <div className=\" col-span-1 md:col-span-1 flex md:justify-end items-center\">\n          <Link href={\"/admin/models/create\"}>\n            <Button size=\"large\" type=\"primary\">\n              Tambah\n            </Button>\n          </Link>\n        </div>\n      </div>\n      <div className=\"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\">\n        <div className=\"md:col-span-5 col-span-1 flex flex-col py-3\">\n          {praloading ? null : (\n            <div className=\"flex mb-8\">\n              <div className=\" w-10/12 mr-1 grid grid-cols-6\">\n                <div className=\"col-span-4 mr-1\">\n                  <Input\n                    style={{ width: `100%`, marginRight: `0.5rem` }}\n                    defaultValue={name1}\n                    placeholder=\"Cari Nama Model\"\n                    onChange={onChangeSearch}\n                    allowClear\n                  ></Input>\n                </div>\n                <div className=\"col-span-2 mr-1\">\n                  <TreeSelect\n                    allowClear\n                    dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                    defaultValue={namaasset === \"\" ? null : defasset}\n                    treeData={assetdata}\n                    placeholder=\"Cari Asset Type\"\n                    treeDefaultExpandAll\n                    style={{ width: `100%`, marginRight: `0.5rem` }}\n                    onChange={(value, label, extra) => {\n                      if (typeof value === \"undefined\") {\n                        onChangeAssetType();\n                      } else {\n                        onChangeAssetType(\n                          extra.allCheckedNodes[0].node.props.id\n                        );\n                        setnamaasset(extra.allCheckedNodes[0].node.props.title);\n                      }\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"w-2/12\">\n                <Button\n                  type=\"primary\"\n                  style={{ width: `100%` }}\n                  onClick={onFinalClick}\n                >\n                  <SearchOutlined />\n                </Button>\n              </div>\n            </div>\n          )}\n          <Table\n            className=\"tableTypeTask\"\n            pagination={{\n              pageSize: 10,\n              total: displayentiredata.data.total,\n              onChange: (page, pageSize) => {\n                setpraloading(true);\n                fetch(\n                  `${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?page=${page}&rows=10&asset_id=${asset_id1}&name=${name1}&sort_by=${sort_by}&sort_type=${sort_type}`,\n                  {\n                    method: `GET`,\n                    headers: {\n                      Authorization: JSON.parse(initProps),\n                    },\n                  }\n                )\n                  .then((res) => res.json())\n                  .then((res2) => {\n                    setdisplayentiredata(res2);\n                    setdisplaydata(res2.data.data);\n                    setdisplaydata1(res2.data.data);\n                    setdisplaydata2(res2.data.data);\n                    setpraloading(false);\n                  });\n              },\n            }}\n            scroll={{ x: 200 }}\n            dataSource={displaydata}\n            columns={columnsTable}\n            loading={praloading}\n            onRow={(record, rowIndex) => {\n              return {\n                onMouseOver: (event) => {\n                  setrowstate(record.id);\n                },\n                onClick: (event) => {\n                  // {\n                  //     [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                  rt.push(`/admin/models/detail/${record.id}`);\n                  //         :\n                  //         null\n                  // }\n                },\n              };\n            }}\n            rowClassName={(record, idx) => {\n              return record.id === rowstate ? `cursor-pointer` : ``;\n            }}\n            onChange={(pagination, filters, sorter, extra) => {\n              // console.log('params', pagination, filters, sorter, extra);\n              if (extra.action === \"sort\") {\n                if (sorter.column) {\n                  if (sorter.column.dataIndex === \"name\") {\n                    window.location.href = `/admin/models?asset_id=${\n                      assettypefilteract\n                        ? assettypevalue === null\n                          ? asset_id1\n                          : assettypevalue\n                        : \"\"\n                    }&name=${\n                      namasearchact\n                        ? namavalue === \"\"\n                          ? name1\n                          : namavalue\n                        : \"\"\n                    }&sort_by=name&sort_type=${\n                      sorter.order === \"ascend\" ? \"asc\" : \"desc\"\n                    }`;\n                  } else if (sorter.column.dataIndex === \"count\") {\n                    window.location.href = `/admin/models?asset_id=${\n                      assettypefilteract\n                        ? assettypevalue === null\n                          ? asset_id1\n                          : assettypevalue\n                        : \"\"\n                    }&name=${\n                      namasearchact\n                        ? namavalue === \"\"\n                          ? name1\n                          : namavalue\n                        : \"\"\n                    }&sort_by=count&sort_type=${\n                      sorter.order === \"ascend\" ? \"asc\" : \"desc\"\n                    }`;\n                  }\n                } else {\n                  window.location.href = `/admin/models?asset_id=${\n                    assettypefilteract\n                      ? assettypevalue === null\n                        ? asset_id1\n                        : assettypevalue\n                      : \"\"\n                  }&name=${\n                    namasearchact ? (namavalue === \"\" ? name1 : namavalue) : \"\"\n                  }&sort_by=&sort_type=`;\n                }\n              }\n            }}\n          ></Table>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res }) {\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"82\",\n    },\n  };\n}\n\nexport default ModelsIndex;\n"]},"metadata":{},"sourceType":"module"}