{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _Table from \"antd/lib/table\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/tmp/mig/ims-fe/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Select from \"antd/lib/select\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { DeleteOutlined, EditOutlined, PlusCircleTwoTone } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\n\nfunction Financial(_ref) {\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      dataGetDepreciations = _ref.dataGetDepreciations,\n      sidemenu = _ref.sidemenu;\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  var Option = _Select.Option; //data Table\n\n  var columns = [{\n    title: \"Nama\",\n    dataIndex: \"nama\",\n    key: \"nama\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.nama\n        })\n      };\n    }\n  }, {\n    title: \"Tipe\",\n    dataIndex: \"jenis\",\n    key: \"jenis\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.jenis\n        })\n      };\n    }\n  }, {\n    title: \"Tahun Penggunaan\",\n    dataIndex: \"tahun_penggunaan\",\n    key: \"tahun_penggunaan\",\n    align: \"center\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex justify-center\",\n          children: text\n        })\n      };\n    }\n  }, {\n    title: \"Deskripsi\",\n    dataIndex: \"deskripsi\",\n    key: \"deskripsi\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.deskripsi\n        })\n      };\n    }\n  }, {\n    dataIndex: \"status\",\n    key: \"status\",\n    render: function render(text, record, index) {\n      return {\n        props: {\n          style: {\n            backgroundColor: index % 2 == 1 ? \"#f2f2f2\" : \"#fff\"\n          }\n        },\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \" flex\",\n          children: [[171].every(function (curr) {\n            return dataProfile.data.registered_feature.includes(curr);\n          }) && /*#__PURE__*/_jsx(_Button, {\n            onClick: function onClick() {\n              setdataedit({\n                id: record.id,\n                nama: record.nama,\n                jenis: record.jenis,\n                tahun_penggunaan: record.tahun_penggunaan,\n                deskripsi: record.deskripsi\n              });\n              setmodaledit(true);\n            },\n            style: {\n              paddingTop: \"0\",\n              paddingBottom: \"0.3rem\",\n              marginRight: \"1rem\"\n            },\n            children: /*#__PURE__*/_jsx(EditOutlined, {})\n          }), [172].every(function (curr) {\n            return dataProfile.data.registered_feature.includes(curr);\n          }) && /*#__PURE__*/_jsx(_Button, {\n            danger: true,\n            onClick: function onClick() {\n              setmodaldelete(true);\n              setiddelete(record.id);\n            },\n            loading: loadingdelete,\n            style: {\n              paddingTop: \"0\",\n              paddingBottom: \"0.3rem\"\n            },\n            children: /*#__PURE__*/_jsx(DeleteOutlined, {})\n          })]\n        })\n      };\n    }\n  }];\n  var dataListDepreciationsMap = dataGetDepreciations.data.map(function (doc, idx) {\n    return {\n      id: doc.id,\n      nama: doc.nama,\n      jenis: doc.jenis,\n      tahun_penggunaan: doc.tahun_penggunaan,\n      deskripsi: doc.deskripsi\n    };\n  }); //useState\n\n  var _useState = useState({}),\n      recordrow = _useState[0],\n      setrecordrow = _useState[1];\n\n  var _useState2 = useState({\n    nama: \"\",\n    jenis: \"\",\n    tahun_penggunaan: 0,\n    deskripsi: \"\"\n  }),\n      datacreate = _useState2[0],\n      setdatacreate = _useState2[1];\n\n  var _useState3 = useState({\n    id: recordrow.id,\n    nama: recordrow.nama,\n    jenis: recordrow.jenis,\n    tahun_penggunaan: recordrow.tahun_penggunaan,\n    deskripsi: recordrow.deskripsi\n  }),\n      dataedit = _useState3[0],\n      setdataedit = _useState3[1];\n\n  var datacell = [];\n\n  for (var i = 0; i < dataGetDepreciations.data.length; i++) {\n    datacell.push(false);\n  }\n\n  var _useState4 = useState(true),\n      tambahbtn = _useState4[0],\n      settambahbtn = _useState4[1];\n\n  var _useState5 = useState(datacell),\n      hoverbtn = _useState5[0],\n      sethoverbtn = _useState5[1];\n\n  var _useState6 = useState(datacell),\n      editarea = _useState6[0],\n      seteditarea = _useState6[1];\n\n  var _useState7 = useState(0),\n      iddelete = _useState7[0],\n      setiddelete = _useState7[1];\n\n  var _useState8 = useState(false),\n      loadingcreate = _useState8[0],\n      setloadingcreate = _useState8[1];\n\n  var _useState9 = useState(false),\n      loadingdelete = _useState9[0],\n      setloadingdelete = _useState9[1];\n\n  var _useState10 = useState(false),\n      loadingedit = _useState10[0],\n      setloadingedit = _useState10[1];\n\n  var _useState11 = useState(false),\n      modaldelete = _useState11[0],\n      setmodaldelete = _useState11[1];\n\n  var _useState12 = useState(false),\n      modaledit = _useState12[0],\n      setmodaledit = _useState12[1]; //events\n\n\n  var onHoverCell = function onHoverCell(e, idx) {\n    console.log(\"over:\" + idx + hoverbtn[idx]);\n    var temp = hoverbtn;\n    temp[idx] = true;\n    sethoverbtn(temp);\n  };\n\n  var onLeaveCell = function onLeaveCell(e, idx) {\n    console.log(\"leave:\" + idx + hoverbtn[idx]);\n    var temp = hoverbtn;\n    temp[idx] = false;\n    sethoverbtn(temp);\n  };\n\n  var onChangeCreate = function onChangeCreate(e) {\n    setdatacreate(_objectSpread(_objectSpread({}, datacreate), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var onChangeEdit = function onChangeEdit(e) {\n    setdataedit(_objectSpread(_objectSpread({}, dataedit), {}, _defineProperty({}, e.target.name, e.target.value)));\n  }; //handler\n\n\n  var handleCancelUpdate = function handleCancelUpdate(index) {\n    var temp = editarea;\n    temp[index] = false;\n    seteditarea(temp);\n    console.log(\"cancel \" + editarea[index]);\n  };\n\n  var handleCreate = function handleCreate() {\n    setloadingcreate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addDepreciation\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datacreate)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingcreate(false);\n      settambahbtn(true);\n      setdatacreate({\n        nama: \"\",\n        jenis: \"\",\n        tahun_penggunaan: 0,\n        deskripsi: \"\"\n      });\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(function () {\n          rt.push(\"/admin/financial\");\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleDelete = function handleDelete() {\n    setloadingdelete(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/deleteDepreciation\"), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: iddelete\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingdelete(false);\n      setmodaldelete(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(function () {\n          rt.push(\"/admin/financial\");\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleEdit = function handleEdit() {\n    setloadingedit(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/updateDepreciation\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataedit)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingedit(false);\n      setmodaledit(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: res2.message,\n          duration: 3\n        });\n\n        setTimeout(function () {\n          rt.push(\"/admin/financial\");\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    pathArr: pathArr,\n    st: st,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"w-full grid grid-cols-5 border-t border-opacity-30 border-gray-500 bg-white\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-span-5 lg:col-span-5 flex flex-col\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"border-b border-opacity-30 border-gray-400 flex items-center p-4 mb-5\",\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"font-semibold\",\n            children: \"Financial\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"border-b w-full mb-3\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \" border-b-4 border-gray-400 p-1 w-24\",\n              children: \"Depreciation\"\n            })\n          }), !tambahbtn ? /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex flex-col mb-4\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"flex items-center font-bold mb-6\",\n              children: \"Tambah Depresiasi Baru\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" flex flex-col\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full\",\n                children: /*#__PURE__*/_jsxs(_Form, {\n                  layout: \"vertical\",\n                  onFinish: handleCreate,\n                  initialValues: datacreate,\n                  style: {\n                    width: \"100%\"\n                  },\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"w-full md:grid md:grid-cols-3\",\n                    children: [/*#__PURE__*/_jsx(_Form.Item, {\n                      label: \"Nama\",\n                      name: \"nama\",\n                      rules: [{\n                        required: true,\n                        message: \"Nama wajib diisi\"\n                      }],\n                      style: {\n                        marginRight: \"1rem\"\n                      },\n                      children: /*#__PURE__*/_jsx(_Input, {\n                        name: \"nama\",\n                        onChange: onChangeCreate,\n                        defaultValue: datacreate.nama\n                      })\n                    }), /*#__PURE__*/_jsx(_Form.Item, {\n                      label: \"Tipe\",\n                      name: \"jenis\",\n                      rules: [{\n                        required: true,\n                        message: \"Wajib diisi\"\n                      }],\n                      style: {\n                        marginRight: \"1rem\"\n                      },\n                      children: /*#__PURE__*/_jsxs(_Select, {\n                        defaultValue: datacreate.jenis,\n                        onChange: function onChange(value) {\n                          setdatacreate(_objectSpread(_objectSpread({}, datacreate), {}, {\n                            jenis: value\n                          }));\n                        },\n                        children: [/*#__PURE__*/_jsx(Option, {\n                          value: \"Declining Balance\",\n                          children: \"Declining Balance\"\n                        }), /*#__PURE__*/_jsx(Option, {\n                          value: \"Staright Line\",\n                          children: \"Staright Line\"\n                        }), /*#__PURE__*/_jsx(Option, {\n                          value: \"Sum of Years Digit\",\n                          children: \"Sum of Years Digit\"\n                        })]\n                      })\n                    }), /*#__PURE__*/_jsx(_Form.Item, {\n                      label: \"Daya Tahan (tahun)\",\n                      name: \"tahun_penggunaan\",\n                      rules: [{\n                        required: true,\n                        message: \"Wajib diisi\"\n                      }],\n                      style: {\n                        marginRight: \"1rem\"\n                      },\n                      children: /*#__PURE__*/_jsx(_Input, {\n                        name: \"tahun_penggunaan\",\n                        onChange: onChangeCreate,\n                        defaultValue: datacreate.tahun_penggunaan\n                      })\n                    })]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"mb-2\",\n                    children: /*#__PURE__*/_jsx(_Form.Item, {\n                      label: \"Deskripsi\",\n                      name: \"deskripsi\",\n                      children: /*#__PURE__*/_jsx(_Input.TextArea, {\n                        name: \"deskripsi\",\n                        onChange: onChangeCreate,\n                        defaultValue: datacreate.deskripsi,\n                        style: {\n                          width: \"100%\"\n                        }\n                      })\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"flex justify-end items-center\",\n                    children: [/*#__PURE__*/_jsx(_Button, {\n                      type: \"default\",\n                      onClick: function onClick() {\n                        settambahbtn(true);\n                      },\n                      size: \"middle\",\n                      style: {\n                        marginRight: \"1rem\"\n                      },\n                      children: \"Cancel\"\n                    }), /*#__PURE__*/_jsx(_Button, {\n                      type: \"primary\",\n                      htmlType: \"submit\",\n                      loading: loadingcreate,\n                      size: \"middle\",\n                      children: \"Save\"\n                    })]\n                  })]\n                })\n              })\n            })]\n          }) : null, /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \" font-semibold text-gray-400\",\n              children: \"Semua Depresiasi\"\n            }), tambahbtn ?\n            /*#__PURE__*/\n            // <button className={`${tambahbtn} text-blue-500 hover:text-blue-700 text-sm flex items-center`} onClick={() => { settambahbtn(false) }}>\n            //     <PlusCircleTwoTone style={{ marginRight: `0.2rem`, marginTop: `0.1rem` }} /> Tambah Baru\n            // </button>\n            _jsx(_Fragment, {\n              children: [170].every(function (curr) {\n                return dataProfile.data.registered_feature.includes(curr);\n              }) && /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                onClick: function onClick() {\n                  settambahbtn(false);\n                },\n                children: \"Add New\"\n              })\n            }) : null]\n          }), /*#__PURE__*/_jsx(_Table, {\n            columns: columns,\n            dataSource: dataListDepreciationsMap,\n            pagination: {\n              pageSize: 8\n            },\n            scroll: {\n              x: 300\n            }\n          }), /*#__PURE__*/_jsx(_Modal, {\n            title: \"Konfirmasi hapus depresiasi\",\n            visible: modaldelete,\n            okButtonProps: {\n              disabled: loadingdelete\n            },\n            onCancel: function onCancel() {\n              setmodaldelete(false);\n            },\n            onOk: handleDelete,\n            maskClosable: false,\n            style: {\n              top: \"3rem\"\n            },\n            width: 500,\n            destroyOnClose: true,\n            children: \"Yakin ingin hapus depresiasi ini?\"\n          }), /*#__PURE__*/_jsx(_Modal, {\n            title: \"Edit Depresiasi\",\n            visible: modaledit,\n            onCancel: function onCancel() {\n              setmodaledit(false);\n            },\n            footer: null,\n            maskClosable: false,\n            style: {\n              top: \"3rem\"\n            },\n            width: 700,\n            destroyOnClose: true,\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex flex-col mb-4\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"flex items-center font-bold mb-3\",\n                children: \"Edit Depresiasi\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \" flex flex-col\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"w-full\",\n                  children: /*#__PURE__*/_jsxs(_Form, {\n                    layout: \"vertical\",\n                    onFinish: handleEdit,\n                    initialValues: dataedit,\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \" w-full md:grid grid-cols-3\",\n                      children: [/*#__PURE__*/_jsx(_Form.Item, {\n                        label: \"Nama\",\n                        name: \"nama\",\n                        rules: [{\n                          required: true,\n                          message: \"Nama wajib diisi\"\n                        }],\n                        style: {\n                          marginRight: \"1rem\"\n                        },\n                        children: /*#__PURE__*/_jsx(_Input, {\n                          name: \"nama\",\n                          onChange: onChangeEdit,\n                          defaultValue: dataedit.nama\n                        })\n                      }), /*#__PURE__*/_jsx(_Form.Item, {\n                        label: \"Tipe\",\n                        name: \"jenis\",\n                        rules: [{\n                          required: true,\n                          message: \"Wajib diisi\"\n                        }],\n                        style: {\n                          marginRight: \"1rem\"\n                        },\n                        children: /*#__PURE__*/_jsxs(_Select, {\n                          defaultValue: dataedit.jenis,\n                          onChange: function onChange(value) {\n                            setdataedit(_objectSpread(_objectSpread({}, dataedit), {}, {\n                              jenis: value\n                            }));\n                          },\n                          children: [/*#__PURE__*/_jsx(Option, {\n                            value: \"Declining Balance\",\n                            children: \"Declining Balance\"\n                          }), /*#__PURE__*/_jsx(Option, {\n                            value: \"Staright Line\",\n                            children: \"Staright Line\"\n                          }), /*#__PURE__*/_jsx(Option, {\n                            value: \"Sum of Years Digit\",\n                            children: \"Sum of Years Digit\"\n                          })]\n                        })\n                      }), /*#__PURE__*/_jsx(_Form.Item, {\n                        label: \"Daya Tahan (tahun)\",\n                        name: \"tahun_penggunaan\",\n                        rules: [{\n                          required: true,\n                          message: \"Wajib diisi\"\n                        }],\n                        style: {\n                          marginRight: \"1rem\"\n                        },\n                        children: /*#__PURE__*/_jsx(_Input, {\n                          name: \"tahun_penggunaan\",\n                          onChange: onChangeEdit,\n                          defaultValue: dataedit.tahun_penggunaan\n                        })\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mb-2\",\n                      children: /*#__PURE__*/_jsx(_Form.Item, {\n                        label: \"Deskripsi\",\n                        name: \"deskripsi\",\n                        children: /*#__PURE__*/_jsx(_Input.TextArea, {\n                          name: \"deskripsi\",\n                          onChange: onChangeEdit,\n                          defaultValue: dataedit.deskripsi,\n                          style: {\n                            width: \"100%\"\n                          }\n                        })\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex justify-end items-center\",\n                      children: [/*#__PURE__*/_jsx(_Button, {\n                        type: \"default\",\n                        onClick: function onClick() {\n                          setmodaledit(false);\n                        },\n                        size: \"middle\",\n                        style: {\n                          marginRight: \"1rem\"\n                        },\n                        children: \"Cancel\"\n                      }), /*#__PURE__*/_jsx(_Button, {\n                        type: \"primary\",\n                        htmlType: \"submit\",\n                        loading: loadingedit,\n                        size: \"middle\",\n                        children: \"Save\"\n                      })]\n                    })]\n                  })\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    })\n  });\n}\n\nexport var __N_SSP = true;\nexport default Financial;","map":null,"metadata":{},"sourceType":"module"}