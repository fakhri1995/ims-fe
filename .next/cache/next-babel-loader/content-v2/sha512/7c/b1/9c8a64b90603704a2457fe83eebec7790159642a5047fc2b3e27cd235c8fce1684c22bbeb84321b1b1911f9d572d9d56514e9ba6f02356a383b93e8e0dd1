{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _message from \"antd/lib/message\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nexport var __N_SSP = true;\nexport default function Home(_ref) {\n  var initProps = _ref.initProps;\n  // console.log(\"token di login abis dari logout: \" + jscookie.get('token'))\n  var rt = useRouter();\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n      formdata = _useState[0],\n      setFormdata = _useState[1];\n\n  var _useState2 = useState(false),\n      alerterror = _useState2[0],\n      setAlerterror = _useState2[1];\n\n  var _useState3 = useState(false),\n      loadinglogin = _useState3[0],\n      setLoadinglogin = _useState3[1];\n\n  var onChangeLogin = function onChangeLogin(e) {\n    setFormdata(_objectSpread(_objectSpread({}, formdata), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleLogin = function handleLogin() {\n    setLoadinglogin(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/login\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      // body: new URLSearchParams(formdata)\n      body: JSON.stringify(formdata)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setLoadinglogin(false);\n\n      if (res2.data) {\n        _notification[\"success\"]({\n          message: \"Selamat datang di MIGSYS\",\n          duration: 3\n        }); // console.log(\"token: \" + res2.data.token)\n\n        /** Token will be expired in 1 day */\n\n\n        Cookies.set(\"token\", JSON.stringify(res2.data.token), {\n          expires: 1\n        }); // console.log(\"token di session: \" + JSON.parse(jscookie.get('token')))\n\n        rt.push(\"/dashboard/home\");\n      } else if (!res2.success) {\n        // console.log(\"masuk ke error login\")\n        _message.error({\n          content: res2.message.errorInfo.status_detail,\n          style: {\n            marginTop: \"1rem\"\n          }\n        }, 5);\n\n        setAlerterror(true);\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-xl bg-blue-600 h-screen\"\n      /*style={{background:`linear-gradient(#035ea3, #198e07)`}}*/\n      ,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"pt-20 relative\",\n        id: \"wrapper\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mx-auto bg-white rounded-lg w-10/12 md:w-5/12 max-h-80 md:max-h-80 text-black shadow-lg px-3 md:px-5 pt-10 pb-1 text-center\",\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"mb-5 font-mont text-xl font-semibold\",\n            children: \"LogIn MIGSYS v3\"\n          }), /*#__PURE__*/_jsxs(_Form, {\n            name: \"email\",\n            className: \"loginForm\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: handleLogin,\n            children: [/*#__PURE__*/_jsx(_Form.Item, {\n              name: \"email\",\n              rules: [{\n                required: true,\n                message: \"Please input your Email!\"\n              }],\n              children: /*#__PURE__*/_jsx(_Input, {\n                prefix: /*#__PURE__*/_jsx(UserOutlined, {\n                  className: \"site-form-item-icon\"\n                }),\n                name: \"email\",\n                value: formdata,\n                placeholder: \"Email\",\n                onChange: onChangeLogin\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"password\",\n              rules: [{\n                required: true,\n                message: \"Password!\"\n              }],\n              style: {\n                marginBottom: \"3rem\"\n              },\n              children: /*#__PURE__*/_jsx(_Input.Password, {\n                prefix: /*#__PURE__*/_jsx(LockOutlined, {\n                  className: \"site-form-item-icon\"\n                }),\n                name: \"password\",\n                value: formdata,\n                placeholder: \"Password\",\n                type: \"password\",\n                onChange: onChangeLogin\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              style: {\n                justifyContent: \"center\"\n              },\n              children: /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                loading: loadinglogin,\n                className: \"login-form-button\",\n                style: {\n                  width: \"100%\"\n                },\n                children: \"Log in\"\n              })\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \" flex justify-center items-center\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: \" mb-5 text-primary hover:text-secondary cursor-pointer\",\n              onClick: function onClick() {\n                rt.push(\"/requestForgetPassword\");\n              },\n              children: \"Lupa Password\"\n            })\n          })]\n        })\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}