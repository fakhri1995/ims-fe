{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Empty from \"antd/lib/empty\";\nimport _Spin from \"antd/lib/spin\";\nimport _Input from \"antd/lib/input\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _notification from \"antd/lib/notification\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { DeleteOutlined, EditOutlined, SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\n\nvar ManufacturersIndex = function ManufacturersIndex(_ref) {\n  var dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu,\n      initProps = _ref.initProps;\n  // 1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1); //2.useState\n\n  var _useState = useState([]),\n      displaydata = _useState[0],\n      setdisplaydata = _useState[1];\n\n  var _useState2 = useState([]),\n      displaydata2 = _useState2[0],\n      setdisplaydata2 = _useState2[1];\n\n  var _useState3 = useState([]),\n      displaydata3 = _useState3[0],\n      setdisplaydata3 = _useState3[1];\n\n  var _useState4 = useState(0),\n      displaytrigger = _useState4[0],\n      setdisplaytrigger = _useState4[1];\n\n  var _useState5 = useState(true),\n      praloading = _useState5[0],\n      setpraloading = _useState5[1];\n\n  var _useState6 = useState(false),\n      namasearchact = _useState6[0],\n      setnamasearchact = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      namavalue = _useState7[0],\n      setnamavalue = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      hover = _useState8[0],\n      sethover = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      hovercolor = _useState9[0],\n      sethovercolor = _useState9[1]; //Tambah\n\n\n  var _useState10 = useState({\n    name: \"\"\n  }),\n      dataadd = _useState10[0],\n      setdataadd = _useState10[1];\n\n  var _useState11 = useState(false),\n      modaladd = _useState11[0],\n      setmodaladd = _useState11[1];\n\n  var _useState12 = useState(false),\n      loadingadd = _useState12[0],\n      setloadingadd = _useState12[1];\n\n  var _useState13 = useState(true),\n      disabledadd = _useState13[0],\n      setdisabledadd = _useState13[1]; //Ubah\n\n\n  var _useState14 = useState({\n    id: \"\",\n    name: \"\"\n  }),\n      dataupdate = _useState14[0],\n      setdataupdate = _useState14[1];\n\n  var _useState15 = useState(false),\n      modalupdate = _useState15[0],\n      setmodalupdate = _useState15[1];\n\n  var _useState16 = useState(false),\n      loadingupdate = _useState16[0],\n      setloadingupdate = _useState16[1];\n\n  var _useState17 = useState(true),\n      disabledupdate = _useState17[0],\n      setdisabledupdate = _useState17[1]; //Hapus\n\n\n  var _useState18 = useState({\n    id: \"\"\n  }),\n      datadelete = _useState18[0],\n      setdatadelete = _useState18[1];\n\n  var _useState19 = useState(false),\n      modaldelete = _useState19[0],\n      setmodaldelete = _useState19[1];\n\n  var _useState20 = useState(false),\n      loadingdelete = _useState20[0],\n      setloadingdelete = _useState20[1]; //3.onChange\n  //search nama\n\n\n  var onChangeSearch = function onChangeSearch(e) {\n    if (e.target.value === \"\") {\n      setdisplaydata(displaydata3);\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n\n  var onFinalClick = function onFinalClick() {\n    var datatemp = displaydata2;\n\n    if (namasearchact) {\n      datatemp = datatemp.filter(function (flt) {\n        return flt.name.toLowerCase().includes(namavalue.toLowerCase());\n      });\n    }\n\n    setdisplaydata(datatemp);\n  }; //4.handler\n\n\n  var handleAddManufacturer = function handleAddManufacturer() {\n    setloadingadd(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addManufacturer\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataadd)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingadd(false);\n      setmodaladd(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Manufacturer berhasil ditambahkan\",\n          duration: 2\n        });\n\n        setdataadd(_objectSpread(_objectSpread({}, dataadd), {}, {\n          name: \"\"\n        }));\n        setdisplaytrigger(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleUpdateManufacturer = function handleUpdateManufacturer() {\n    setloadingupdate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/updateManufacturer\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataupdate)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingupdate(false);\n      setmodalupdate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Manufacturer berhasil diubah\",\n          duration: 2\n        });\n\n        setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n          name: \"\"\n        }));\n        setdisplaytrigger(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleDeleteManufacturer = function handleDeleteManufacturer() {\n    setloadingdelete(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/deleteManufacturer\"), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(datadelete)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingdelete(false);\n      setmodaldelete(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Manufacturer berhasil dihapus\",\n          duration: 2\n        });\n\n        setdisplaytrigger(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //5.useEffect\n\n\n  useEffect(function () {\n    setpraloading(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getManufacturers\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdisplaydata(res2.data);\n      setdisplaydata2(res2.data);\n      setdisplaydata3(res2.data);\n      setpraloading(false);\n    });\n  }, [displaytrigger]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    tok: initProps,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full grid grid-cols-1 md:grid-cols-3 border-t border-b bg-white mb-5 p-4\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"font-semibold text-base w-auto\",\n          children: \"Manufacturer\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n        children: /*#__PURE__*/_jsx(_Button, {\n          onClick: function onClick() {\n            setmodaladd(true);\n          },\n          size: \"large\",\n          type: \"primary\",\n          children: \"Tambah\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"md:col-span-5 col-span-1 flex flex-col py-3 px-10\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex mb-8\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" w-full mr-1 grid grid-cols-12\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"col-span-11 mr-1\",\n              children: /*#__PURE__*/_jsx(_Input, {\n                style: {\n                  width: \"100%\",\n                  marginRight: \"0.5rem\"\n                },\n                placeholder: \"Cari Nama Manufacturer\",\n                onChange: onChangeSearch,\n                allowClear: true\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \" col-span-1\",\n              children: /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                style: {\n                  width: \"100%\"\n                },\n                onClick: onFinalClick,\n                children: /*#__PURE__*/_jsx(SearchOutlined, {})\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \" flex flex-col rounded shadow border\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"flex w-full p-4 font-semibold items-center text-base border-b bg-gray-100\",\n            children: \"Nama Manufacturer\"\n          }), praloading ? /*#__PURE__*/_jsx(\"div\", {\n            className: \"h-20 flex justify-center items-center\",\n            children: /*#__PURE__*/_jsx(_Spin, {})\n          }) : /*#__PURE__*/_jsx(_Fragment, {\n            children: displaydata.length > 0 ? displaydata.map(function (doc, idx) {\n              return /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex justify-between w-full p-4 items-center text-sm border-b \".concat(idx === hover && hovercolor),\n                onMouseOver: function onMouseOver() {\n                  sethover(idx);\n                  sethovercolor(\"bg-gray-50\");\n                },\n                onMouseLeave: function onMouseLeave() {\n                  sethover(\"\");\n                  sethovercolor(\"\");\n                },\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"mb-0\",\n                  children: doc.name\n                }), idx === hover && /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex items-center pr-5\",\n                  children: [/*#__PURE__*/_jsx(EditOutlined, {\n                    onClick: function onClick() {\n                      setdataupdate({\n                        id: doc.id,\n                        name: doc.name\n                      });\n                      setmodalupdate(true);\n                      setdisabledupdate(false);\n                    },\n                    style: {\n                      fontSize: \"1.2rem\",\n                      color: \"rgb(15,146,255)\",\n                      cursor: \"pointer\",\n                      marginRight: \"1rem\"\n                    }\n                  }), /*#__PURE__*/_jsx(DeleteOutlined, {\n                    onClick: function onClick() {\n                      setdatadelete({\n                        id: doc.id\n                      });\n                      setdataupdate({\n                        id: doc.id,\n                        name: doc.name\n                      });\n                      setmodaldelete(true);\n                    },\n                    style: {\n                      fontSize: \"1.2rem\",\n                      color: \"red\",\n                      cursor: \"pointer\"\n                    }\n                  })]\n                })]\n              });\n            }) : /*#__PURE__*/_jsx(\"div\", {\n              className: \"w-full\",\n              children: /*#__PURE__*/_jsx(_Empty, {\n                image: _Empty.PRESENTED_IMAGE_SIMPLE\n              })\n            })\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Form Tambah Manufacturer\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"danger\",\n              onClick: function onClick() {\n                setmodaladd(false);\n                setdataadd(_objectSpread(_objectSpread({}, dataadd), {}, {\n                  name: \"\"\n                }));\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              type: \"primary\",\n              disabled: disabledadd,\n              onClick: handleAddManufacturer,\n              loading: loadingadd,\n              children: \"Simpan\"\n            })]\n          })\n        })]\n      }),\n      visible: modaladd,\n      onCancel: function onCancel() {\n        setmodaladd(false);\n      },\n      footer: null,\n      width: 700,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-842967156\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-842967156\" + \" \" + \"mb-0\",\n            children: [\"Nama Manufacturer \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-842967156\" + \" \" + \"namamanu\"\n            })]\n          }), /*#__PURE__*/_jsx(_Input, {\n            value: dataadd.name,\n            placeholder: \"Masukkan Nama Manufacturer\",\n            onChange: function onChange(e) {\n              e.target.value === \"\" ? setdisabledadd(true) : setdisabledadd(false);\n              setdataadd({\n                name: e.target.value\n              });\n            }\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"842967156\",\n            children: [\".namamanu.jsx-842967156::before{content:'*';color:red;}\"]\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: \"Form Ubah Manufacturer\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(_Button, {\n              type: \"danger\",\n              onClick: function onClick() {\n                setmodalupdate(false);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }), /*#__PURE__*/_jsx(_Button, {\n              type: \"primary\",\n              disabled: disabledupdate,\n              onClick: handleUpdateManufacturer,\n              loading: loadingupdate,\n              children: \"Simpan\"\n            })]\n          })\n        })]\n      }),\n      visible: modalupdate,\n      onCancel: function onCancel() {\n        setmodalupdate(false);\n      },\n      footer: null,\n      width: 700,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-842967156\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-842967156\" + \" \" + \"mb-0\",\n            children: [\"Nama Manufacturer \", /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-842967156\" + \" \" + \"namamanu\"\n            })]\n          }), /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"Masukkan Nama Manufacturer\",\n            value: dataupdate.name,\n            defaultValue: dataupdate.name,\n            onChange: function onChange(e) {\n              e.target.value === \"\" ? setdisabledupdate(true) : setdisabledupdate(false);\n              setdataupdate(_objectSpread(_objectSpread({}, dataupdate), {}, {\n                name: e.target.value\n              }));\n            }\n          }), /*#__PURE__*/_jsx(_JSXStyle, {\n            id: \"842967156\",\n            children: [\".namamanu.jsx-842967156::before{content:'*';color:red;}\"]\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsxs(_Modal, {\n      title: \"Konfirmasi Hapus Manufacturer\",\n      visible: modaldelete,\n      onCancel: function onCancel() {\n        setmodaldelete(false);\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      onOk: handleDeleteManufacturer,\n      okButtonProps: {\n        loading: loadingdelete\n      },\n      children: [\"Apakah Anda yakin ingin menghapus Manufacturer \\\"\", /*#__PURE__*/_jsx(\"strong\", {\n        children: dataupdate.name\n      }), \"\\\"?\"]\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default ManufacturersIndex;","map":null,"metadata":{},"sourceType":"module"}