{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _Radio from \"antd/lib/radio\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Select from \"antd/lib/select\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport _Input from \"antd/lib/input\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Spin from \"antd/lib/spin\";\nimport _Button from \"antd/lib/button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CalendarOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../../components/layout-dashboard\";\nimport st from \"../../../../components/layout-dashboard.module.css\";\n\nvar AssetUpdate = function AssetUpdate(_ref) {\n  var sidemenu = _ref.sidemenu,\n      dataProfile = _ref.dataProfile,\n      initProps = _ref.initProps,\n      assettypeid = _ref.assettypeid;\n  //1. Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(3, 1);\n  pathArr[pathArr.length - 1] = \"Ubah Asset Type\";\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      instanceForm = _Form$useForm2[0];\n\n  var _rt$query = rt.query,\n      idparent = _rt$query.idparent,\n      codeparent = _rt$query.codeparent; //useState\n\n  var _useState = useState({\n    id: \"\",\n    name: \"\",\n    code: \"\",\n    parent: \"\",\n    required_sn: false,\n    description: \"\",\n    asset_columns: []\n  }),\n      displaydata = _useState[0],\n      setdisplaydata = _useState[1];\n\n  var _useState2 = useState({\n    id: Number(assettypeid),\n    name: \"\",\n    code: \"\",\n    parent: \"\",\n    required_sn: false,\n    description: \"\",\n    update_columns: [],\n    add_columns: [],\n    delete_column_ids: [],\n    action: false,\n    is_deleted: false\n  }),\n      updatedata = _useState2[0],\n      setupdatedata = _useState2[1];\n\n  var _useState3 = useState([]),\n      assetdata = _useState3[0],\n      setassetdata = _useState3[1];\n\n  var _useState4 = useState([]),\n      fielddata = _useState4[0],\n      setfielddata = _useState4[1];\n\n  var _useState5 = useState([]),\n      newfielddata = _useState5[0],\n      setnewfielddata = _useState5[1];\n\n  var _useState6 = useState([]),\n      deletefielddata = _useState6[0],\n      setdeletefielddata = _useState6[1];\n\n  var _useState7 = useState([]),\n      updatefielddata = _useState7[0],\n      setupdatefielddata = _useState7[1];\n\n  var _useState8 = useState([\"\", \"\"]),\n      currentdropdown = _useState8[0],\n      setcurrentdropdown = _useState8[1];\n\n  var _useState9 = useState([\"\", \"\"]),\n      currentdropdown2 = _useState9[0],\n      setcurrentdropdown2 = _useState9[1];\n\n  var _useState10 = useState(-1),\n      cdidx = _useState10[0],\n      setcdidx = _useState10[1];\n\n  var _useState11 = useState(false),\n      cdtrigger = _useState11[0],\n      setcdtrigger = _useState11[1];\n\n  var _useState12 = useState(-1),\n      currentdropdownidx = _useState12[0],\n      setcurrentdropdownidx = _useState12[1];\n\n  var _useState13 = useState(false),\n      currentdropdowntrigger = _useState13[0],\n      setcurrentdropdowntrigger = _useState13[1];\n\n  var _useState14 = useState(-1),\n      currentnondropdownidx = _useState14[0],\n      setcurrentnondropdownidx = _useState14[1];\n\n  var _useState15 = useState(false),\n      currentnondropdowntrigger = _useState15[0],\n      setcurrentnondropdowntrigger = _useState15[1];\n\n  var _useState16 = useState({\n    name: \"\",\n    data_type: \"\",\n    \"default\": \"-\",\n    required: false\n  }),\n      currentfield = _useState16[0],\n      setcurrentfield = _useState16[1];\n\n  var _useState17 = useState([]),\n      addedfield = _useState17[0],\n      setaddedfield = _useState17[1];\n\n  var _useState18 = useState(-1),\n      selectedfieldidx = _useState18[0],\n      setselectedfieldidx = _useState18[1];\n\n  var _useState19 = useState(false),\n      selectedfieldidxtrigger = _useState19[0],\n      setselectedfieldidxtrigger = _useState19[1];\n\n  var _useState20 = useState(false),\n      loadingupdate = _useState20[0],\n      setloadingupdate = _useState20[1];\n\n  var _useState21 = useState(true),\n      praloading = _useState21[0],\n      setpraloading = _useState21[1];\n\n  var _useState22 = useState(false),\n      disabledaddfield = _useState22[0],\n      setdisabledaddfield = _useState22[1];\n\n  var _useState23 = useState(false),\n      disabledsimpan = _useState23[0],\n      setdisabledsimpan = _useState23[1];\n\n  var _useState24 = useState(false),\n      disabledtambah = _useState24[0],\n      setdisabledtambah = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      pointevent = _useState25[0],\n      setpointevent = _useState25[1];\n\n  var _useState26 = useState(false),\n      modalubahinduk = _useState26[0],\n      setmodalubahinduk = _useState26[1];\n\n  var _useState27 = useState(false),\n      loadingmodalchild = _useState27[0],\n      setloadingmodalchild = _useState27[1];\n\n  var _useState28 = useState(0),\n      selectedinduk = _useState28[0],\n      setselectedinduk = _useState28[1];\n\n  var _useState29 = useState(true),\n      disabledchild = _useState29[0],\n      setdisabledchild = _useState29[1];\n\n  var _useState30 = useState([]),\n      childassettype = _useState30[0],\n      setchildassettype = _useState30[1];\n\n  var _useState31 = useState(Number(assettypeid)),\n      childvalue = _useState31[0],\n      setchildvalue = _useState31[1];\n\n  var _useState32 = useState(0),\n      childbound = _useState32[0],\n      setchildbound = _useState32[1];\n\n  var _useState33 = useState(Number(idparent)),\n      idparentstate = _useState33[0],\n      setidparentstate = _useState33[1]; //handle\n\n\n  var onClickAddField = function onClickAddField() {\n    setfielddata([].concat(_toConsumableArray(fielddata), [{\n      id: -1,\n      name: \"\",\n      data_type: \"\",\n      \"default\": \"\",\n      required: false\n    }]));\n    setcurrentfield({\n      id: \"\",\n      name: \"\",\n      data_type: \"\",\n      \"default\": \"\",\n      required: false\n    });\n    setaddedfield([].concat(_toConsumableArray(addedfield), [false]));\n    setcurrentdropdown([\"\", \"\"]);\n    setdisabledaddfield(true);\n    setdisabledsimpan(true);\n    setdisabledtambah(true);\n    setpointevent(\"pointer-events-none\");\n  };\n\n  var handleUpdateAsset = function handleUpdateAsset() {\n    var t = {};\n\n    for (var prop in updatedata) {\n      if (prop === \"add_columns\") {\n        t[prop] = updatedata[prop].map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": JSON.stringify(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      }\n\n      if (prop === \"update_columns\") {\n        t[prop] = updatedata[prop].map(function (doc, idx) {\n          if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n            return _objectSpread(_objectSpread({}, doc), {}, {\n              \"default\": JSON.stringify(doc[\"default\"])\n            });\n          } else {\n            return _objectSpread({}, doc);\n          }\n        });\n      }\n\n      if (prop === \"parent\") {\n        t[prop] = idparentstate;\n      } else {\n        t[prop] = updatedata[prop];\n      }\n    }\n\n    setloadingupdate(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/updateAsset\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(t)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingupdate(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Asset Type berhasil diubah\",\n          duration: 3\n        });\n\n        setTimeout(function () {\n          rt.push(\"/admin/assets/detail/\".concat(assettypeid));\n        }, 500);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAsset?id=\").concat(assettypeid), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdisplaydata(_objectSpread(_objectSpread({}, res2.data), {}, {\n        update_columns: [],\n        add_columns: [],\n        delete_column_ids: [],\n        parent: codeparent\n      }));\n      setupdatedata(_objectSpread(_objectSpread({}, res2.data), {}, {\n        update_columns: [],\n        add_columns: [],\n        delete_column_ids: [],\n        parent: codeparent\n      }));\n      var assetcolmap = res2.data.asset_columns.map(function (doc, idx) {\n        return {\n          id: doc.id,\n          name: doc.name,\n          data_type: doc.data_type,\n          \"default\": doc[\"default\"] === null ? doc[\"default\"] : doc[\"default\"].indexOf(\"{\") !== -1 ? JSON.parse(doc[\"default\"]) : doc[\"default\"],\n          required: doc.required\n        };\n      });\n      setfielddata(assetcolmap);\n      var boolarr = [];\n\n      for (var i = 0; i < res2.data.asset_columns.length; i++) {\n        boolarr.push(true);\n      }\n\n      setaddedfield(boolarr);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAssets\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setassetdata(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    if (selectedfieldidx !== -1) {\n      setaddedfield(function (prev) {\n        prev[selectedfieldidx] = true;\n        return prev;\n      });\n      setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n        add_columns: newfielddata,\n        delete_column_ids: deletefielddata,\n        update_columns: updatefielddata\n      }));\n      setupdatedata(function (prev) {\n        var temp = prev;\n        delete temp.asset_columns;\n        return temp;\n      });\n    }\n  }, [selectedfieldidxtrigger]);\n  useEffect(function () {\n    if (currentdropdownidx !== -1) {\n      if (currentfield.data_type === \"dropdown\") {\n        setfielddata(function (prev) {\n          var temp = prev;\n          temp[currentdropdownidx][\"default\"] = {\n            \"default\": \"-\",\n            opsi: currentdropdown\n          };\n          return temp;\n        });\n      } else if (currentfield.data_type === \"checkbox\") {\n        setfielddata(function (prev) {\n          var temp = prev;\n          temp[currentdropdownidx][\"default\"] = {\n            \"default\": [],\n            opsi: currentdropdown\n          };\n          return temp;\n        });\n      }\n    }\n  }, [currentdropdowntrigger]);\n  useEffect(function () {\n    if (currentnondropdownidx !== -1) {\n      setfielddata(function (prev) {\n        var temp = prev;\n        temp[currentnondropdownidx][\"default\"] = \"-\";\n        return temp;\n      });\n    }\n  }, [currentnondropdowntrigger]);\n  useEffect(function () {\n    if (cdidx !== -1) {\n      setcurrentdropdown(function (prev) {\n        return currentdropdown2.filter(function (doc10, idx10) {\n          return idx10 !== cdidx;\n        });\n      });\n      setcurrentdropdown2(function (prev) {\n        return prev.filter(function (doc11, idx11) {\n          return idx11 !== cdidx;\n        });\n      });\n    }\n  }, [cdtrigger]);\n  useEffect(function () {\n    if (childbound !== 0) {\n      setloadingmodalchild(true);\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAssets\"), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        var child = [];\n\n        var searchChild = function searchChild(dataa) {\n          for (var i = 0; i < dataa.length; i++) {\n            if (dataa[i][\"id\"] === Number(childvalue)) {\n              if (dataa[i][\"children\"]) {\n                child = dataa[i][\"children\"];\n              }\n            } else {\n              if (dataa[i][\"children\"]) {\n                searchChild(dataa[i][\"children\"]);\n              }\n            }\n          }\n        };\n\n        searchChild(res2.data);\n        child.length > 0 ? setmodalubahinduk(true) : null;\n        setchildassettype(child);\n        setloadingmodalchild(false);\n      });\n    }\n  }, [childbound]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    tok: initProps,\n    sidemenu: sidemenu,\n    pathArr: pathArr,\n    st: st,\n    dataProfile: dataProfile,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8\",\n        children: /*#__PURE__*/_jsx(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \" col-span-4 flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white\",\n            children: [/*#__PURE__*/_jsxs(\"h1\", {\n              className: \"font-semibold py-2\",\n              children: [\"Form Ubah Asset Type\", \" \", praloading ? null : \"- \".concat(displaydata.name)]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsx(Link, {\n                href: \"/admin/assets/detail/\".concat(assettypeid),\n                children: /*#__PURE__*/_jsx(_Button, {\n                  /*onClick={() => { console.log(updatedata); console.log(displaydata); console.log(currentfield); console.log(currentdropdown) }}*/\n                  type: \"default\",\n                  children: \"Batal\"\n                })\n              }), /*#__PURE__*/_jsx(_Button, {\n                type: \"primary\",\n                loading: loadingupdate,\n                onClick: instanceForm.submit,\n                disabled: disabledsimpan,\n                children: \"Simpan\"\n              })]\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-span-1 md:col-span-4 px-5 mb-8\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"shadow-md border p-8 flex flex-col rounded-md\",\n          children: praloading ? /*#__PURE__*/_jsx(_Spin, {}) : /*#__PURE__*/_jsxs(_Form, {\n            form: instanceForm,\n            layout: \"vertical\",\n            onFinish: handleUpdateAsset,\n            initialValues: updatedata,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n              children: [/*#__PURE__*/_jsx(_Form.Item, {\n                name: \"parent\",\n                label: \"Induk Asset Type\",\n                children: /*#__PURE__*/_jsx(_TreeSelect, {\n                  style: {\n                    marginRight: \"1rem\"\n                  },\n                  dropdownStyle: {\n                    maxHeight: 400,\n                    overflow: \"auto\"\n                  },\n                  treeData: assetdata,\n                  defaultValue: codeparent !== \"\" ? codeparent : \"-\",\n                  treeDefaultExpandAll: true,\n                  allowClear: true,\n                  onChange: function onChange(value, label, extra) {\n                    setidparentstate(extra.allCheckedNodes[0].node.props.id);\n                    setchildbound(function (prev) {\n                      return prev + 1;\n                    });\n                    setselectedinduk(extra.allCheckedNodes[0].node.props);\n                  }\n                })\n              }), /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"name\",\n                label: \"Nama Asset Type\",\n                rules: [{\n                  required: true,\n                  message: \"Nama Asset wajib diisi\"\n                }],\n                children: /*#__PURE__*/_jsx(_Input, {\n                  name: \"name\",\n                  onChange: function onChange(e) {\n                    setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                      name: e.target.value\n                    }));\n                  }\n                })\n              })]\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"description\",\n              label: \"Deskripsi\",\n              children: /*#__PURE__*/_jsx(_Input.TextArea, {\n                rows: 4,\n                name: \"description\",\n                onChange: function onChange(e) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    description: e.target.value\n                  }));\n                }\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsx(_Checkbox, {\n                style: {\n                  marginRight: \"0.5rem\"\n                },\n                onChange: function onChange(e) {\n                  setupdatedata(_objectSpread(_objectSpread({}, updatedata), {}, {\n                    required_sn: e.target.checked\n                  }));\n                },\n                checked: updatedata.required_sn\n              }), \" \", \"Serial Number wajib ada\"]\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \" col-span-1 md:col-span-4 px-5 flex flex-col\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mb-5\",\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            className: \"font-bold text-xl\",\n            children: \"Spesifikasi Asset Type\"\n          })\n        }), fielddata.map(function (doc, idx) {\n          return /*#__PURE__*/_jsx(_Fragment, {\n            children: addedfield[idx] === true ? /*#__PURE__*/_jsxs(\"div\", {\n              onClick: function onClick() {\n                var temp = _toConsumableArray(addedfield);\n\n                temp[idx] = false;\n\n                for (var i = 0; i < temp.length; i++) {\n                  if (i !== idx) {\n                    temp[i] = true;\n                  }\n                }\n\n                setaddedfield(temp);\n                setcurrentfield(fielddata[idx]);\n\n                if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n                  setcurrentdropdown(doc[\"default\"].opsi);\n                }\n\n                if (fielddata[idx].data_type !== \"dropdown\" || fielddata[idx].data_type !== \"checkbox\") {\n                  if (fielddata[idx].name !== \"\" && fielddata[idx].data_type !== \"\") {\n                    setdisabledtambah(false);\n                  } else {\n                    setdisabledtambah(true);\n                  }\n                } else {\n                  if (doc[\"default\"].opsi.some(function (docopsi) {\n                    return docopsi === \"\";\n                  })) {\n                    setdisabledtambah(true);\n                  } else {\n                    setdisabledtambah(false);\n                  }\n                }\n\n                setdisabledaddfield(true);\n                setdisabledsimpan(true);\n                setpointevent(\"pointer-events-none\");\n              },\n              className: \"jsx-28588772\" + \" \" + \"\".concat(pointevent, \" shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md cursor-pointer\"),\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-28588772\" + \" \" + \"font-semibold mb-2\",\n                children: [doc.name, fielddata[idx].required ? /*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"judulField\"\n                }) : null, \" \", /*#__PURE__*/_jsxs(\"span\", {\n                  className: \"jsx-28588772\" + \" \" + \"text-gray-400\",\n                  children: [\"(\", doc.data_type.charAt(0).toUpperCase() + doc.data_type.slice(1), doc.data_type === \"single\" && \" Textbox\", doc.data_type === \"paragraph\" && \" Text\", \")\"]\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-28588772\" + \" \" + \"rounded border w-full p-3\",\n                children: doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\" || doc.data_type === \"date\" || doc.data_type === \"paragraph\" ? /*#__PURE__*/_jsxs(_Fragment, {\n                  children: [doc.data_type === \"dropdown\" && /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col z-50\",\n                    children: /*#__PURE__*/_jsx(_Select, {\n                      children: doc[\"default\"].opsi.map(function (docopsi, idxopsi) {\n                        /*#__PURE__*/\n                        _jsx(_Select.Option, {\n                          children: idxopsi\n                        }, idxopsi);\n                      })\n                    })\n                  }), doc.data_type === \"checkbox\" && /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex flex-col\",\n                    children: doc[\"default\"].opsi.map(function (docopsi, idxopsi) {\n                      return /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"jsx-28588772\" + \" \" + \"flex items-center  mb-2\",\n                        children: [/*#__PURE__*/_jsx(_Checkbox, {\n                          style: {\n                            marginRight: \"0.5rem\"\n                          },\n                          disabled: true\n                        }), \" \", docopsi]\n                      });\n                    })\n                  }), doc.data_type === \"date\" && /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex justify-between\",\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      className: \"jsx-28588772\" + \" \" + \"mb-0\",\n                      children: doc[\"default\"]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"jsx-28588772\",\n                      children: /*#__PURE__*/_jsx(CalendarOutlined, {})\n                    })]\n                  }), doc.data_type === \"paragraph\" && /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-28588772\" + \" \" + \"flex h-20\"\n                  })]\n                }) : /*#__PURE__*/_jsx(_Fragment, {\n                  children: doc[\"default\"]\n                })\n              }), /*#__PURE__*/_jsx(_JSXStyle, {\n                id: \"28588772\",\n                children: [\".judulField.jsx-28588772::before{content:'*';color:red;}\"]\n              })]\n            }, idx) : /*#__PURE__*/_jsx(\"div\", {\n              className: \"shadow-md border p-8 mx-3 md:mx-8 mb-5 flex flex-col rounded-md\",\n              children: /*#__PURE__*/_jsxs(_Form, {\n                layout: \"vertical\",\n                initialValues: fielddata[idx],\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 space-x-2\",\n                  children: [/*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"name\",\n                    label: \"Nama Spesifikasi\",\n                    rules: [{\n                      required: true,\n                      message: \"Nama Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsx(_Input, {\n                      required: true,\n                      name: \"name\",\n                      onChange: function onChange(e) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          name: e.target.value\n                        }));\n\n                        if (e.target.value === \"\") {\n                          setdisabledtambah(true);\n                        } else if (e.target.value !== \"\" && currentfield.data_type !== \"\" && currentdropdown.every(function (doca, idxa) {\n                          return doca !== \"\";\n                        })) {\n                          setdisabledtambah(false);\n                        }\n                      }\n                    })\n                  }), /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"data_type\",\n                    label: \"Tipe Field\",\n                    rules: [{\n                      required: true,\n                      message: \"Tipe Field wajib diisi\"\n                    }],\n                    children: /*#__PURE__*/_jsxs(_Select, {\n                      placeholder: \"Pilih Tipe Field\",\n                      onChange: function onChange(value) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          data_type: value\n                        }));\n\n                        if (value === \"dropdown\" || value === \"checkbox\") {\n                          if (currentdropdown.every(function (doca, idxa) {\n                            return doca !== \"\";\n                          })) {\n                            setdisabledtambah(false);\n                          } else {\n                            setdisabledtambah(true);\n                          }\n                        } else {\n                          setdisabledtambah(false);\n                        }\n\n                        if (value === \"dropdown\") {\n                          setcurrentdropdown([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n\n                        if (value === \"checkbox\") {\n                          setcurrentdropdown([\"\", \"\"]);\n                          setdisabledtambah(true);\n                        }\n                      },\n                      name: \"data_type\",\n                      children: [/*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"dropdown\",\n                        children: \"Dropdown\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"number\",\n                        children: \"Number\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"paragraph\",\n                        children: \"Paragraph Text\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"checkbox\",\n                        children: \"Checkbox\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"single\",\n                        children: \"Single Textbox\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"date\",\n                        children: \"Date\"\n                      })]\n                    })\n                  })]\n                }), currentfield.data_type === \"dropdown\" ? /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col\",\n                  children: [currentdropdown.map(function (doc, idxx) {\n                    return /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex mb-3\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"w-11/12 mr-5\",\n                        children: /*#__PURE__*/_jsx(_Input, {\n                          style: {\n                            marginRight: \"0.5rem\"\n                          },\n                          defaultValue: doc,\n                          placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                          onChange: function onChange(e) {\n                            setcurrentdropdown(function (prev) {\n                              var temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n                            setcurrentdropdown2(function (prev) {\n                              var temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n\n                            if (e.target.value !== \"\" && currentdropdown.every(function (doca, idxa) {\n                              return doca !== \"\";\n                            }) && currentfield.name !== \"\") {\n                              setdisabledtambah(false);\n                            } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                              setdisabledtambah(true);\n                            }\n                          }\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"w-1/12 flex justify-around\",\n                        onClick: function onClick() {\n                          setcurrentdropdown([]);\n                          setcdidx(idxx);\n                          setcdtrigger(function (prev) {\n                            return !prev;\n                          });\n                        },\n                        children: /*#__PURE__*/_jsx(_Button, {\n                          type: \"danger\",\n                          children: \"-\"\n                        })\n                      })]\n                    }, idxx);\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"mx-auto my-3\",\n                    children: /*#__PURE__*/_jsx(_Button, {\n                      onClick: function onClick() {\n                        setcurrentdropdown([].concat(_toConsumableArray(currentdropdown), [\"\"]));\n                        setcurrentdropdown2([].concat(_toConsumableArray(currentdropdown2), [\"\"]));\n                        setdisabledtambah(true);\n                      },\n                      children: \"+ Tambah Opsi\"\n                    })\n                  })]\n                }) : null, currentfield.data_type === \"checkbox\" ? /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex flex-col\",\n                  children: [currentdropdown.map(function (doc, idxx) {\n                    return /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"flex mb-3\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"w-11/12 mr-5\",\n                        children: /*#__PURE__*/_jsx(_Input, {\n                          style: {\n                            marginRight: \"0.5rem\"\n                          },\n                          defaultValue: doc,\n                          placeholder: \"Masukkan opsi ke-\".concat(idxx + 1),\n                          onChange: function onChange(e) {\n                            setcurrentdropdown(function (prev) {\n                              var temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n                            setcurrentdropdown2(function (prev) {\n                              var temp = prev;\n                              temp[idxx] = e.target.value;\n                              return temp;\n                            });\n\n                            if (e.target.value !== \"\" && currentdropdown.every(function (doca, idxa) {\n                              return doca !== \"\";\n                            }) && currentfield.name !== \"\") {\n                              setdisabledtambah(false);\n                            } else if (e.target.value === \"\" || currentfield.name === \"\") {\n                              setdisabledtambah(true);\n                            }\n                          }\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"w-1/12 flex justify-around\",\n                        onClick: function onClick() {\n                          setcurrentdropdown([]);\n                          setcdidx(idxx);\n                          setcdtrigger(function (prev) {\n                            return !prev;\n                          });\n                        },\n                        children: /*#__PURE__*/_jsx(_Button, {\n                          type: \"danger\",\n                          children: \"-\"\n                        })\n                      })]\n                    }, idxx);\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"mx-auto my-3\",\n                    children: /*#__PURE__*/_jsx(_Button, {\n                      onClick: function onClick() {\n                        setcurrentdropdown([].concat(_toConsumableArray(currentdropdown), [\"\"]));\n                        setcurrentdropdown2([].concat(_toConsumableArray(currentdropdown2), [\"\"]));\n                        setdisabledtambah(true);\n                      },\n                      children: \"+ Tambah Opsi\"\n                    })\n                  })]\n                }) : null, /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex mt-4 justify-end\",\n                  children: [/*#__PURE__*/_jsx(_Popconfirm, {\n                    placement: \"bottom\",\n                    title: \"Apakah anda yakin ingin menghapus field \".concat(doc.name === \"\" ? \"ini\" : doc.name, \"?\"),\n                    okText: \"Ya\",\n                    cancelText: \"Tidak\",\n                    onConfirm: function onConfirm() {\n                      if (displaydata.asset_columns.some(function (docc) {\n                        return docc.id === doc.id;\n                      })) {\n                        setdeletefielddata([].concat(_toConsumableArray(deletefielddata), [doc.id]));\n                        setselectedfieldidxtrigger(idx);\n                        setselectedfieldidx(idx);\n                      } else {\n                        setnewfielddata(function (prev) {\n                          var temp = prev;\n                          var idxtemp = temp.map(function (docc) {\n                            return docc.name;\n                          }).indexOf(doc.name);\n                          temp.splice(idxtemp, 1);\n                        });\n                        setselectedfieldidxtrigger(idx);\n                        setselectedfieldidx(idx);\n                      }\n\n                      setfielddata(function (prev) {\n                        return prev.filter(function (_, idxx) {\n                          return idxx !== idx;\n                        });\n                      });\n                      setaddedfield(function (prev) {\n                        prev.splice(idx, 1);\n                        return prev;\n                      });\n                      setdisabledaddfield(false);\n                      setdisabledsimpan(false);\n                      setpointevent(\"\");\n                    },\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"flex items-center mr-4 hover:text-red-500 cursor-pointer\",\n                      children: /*#__PURE__*/_jsx(DeleteOutlined, {\n                        style: {\n                          fontSize: \"1.25rem\"\n                        }\n                      })\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" flex items-center mr-4\",\n                    children: [/*#__PURE__*/_jsx(_Checkbox, {\n                      checked: currentfield.required,\n                      style: {\n                        marginRight: \"0.3rem\"\n                      },\n                      onChange: function onChange(e) {\n                        setcurrentfield(_objectSpread(_objectSpread({}, currentfield), {}, {\n                          required: e.target.checked\n                        }));\n                      }\n                    }), \" \", \"Required\"]\n                  }), /*#__PURE__*/_jsx(_Button, {\n                    type: \"primary\",\n                    disabled: disabledtambah,\n                    onClick: function onClick() {\n                      if (displaydata.asset_columns.map(function (docc) {\n                        return docc.id;\n                      }).includes(doc.id) === false) {\n                        if (updatedata.add_columns.map(function (docname) {\n                          return docname.name;\n                        }).indexOf(doc.name) === -1) {\n                          if (currentfield.data_type === \"dropdown\") {\n                            var newwdd = _objectSpread(_objectSpread({}, currentfield), {}, {\n                              \"default\": JSON.stringify({\n                                \"default\": \"-\",\n                                opsi: currentdropdown\n                              })\n                            });\n\n                            setnewfielddata([].concat(_toConsumableArray(newfielddata), [newwdd]));\n                          } else if (currentfield.data_type === \"checkbox\") {\n                            var newwcb = _objectSpread(_objectSpread({}, currentfield), {}, {\n                              \"default\": JSON.stringify({\n                                \"default\": [],\n                                opsi: currentdropdown\n                              })\n                            });\n\n                            setnewfielddata([].concat(_toConsumableArray(newfielddata), [newwcb]));\n                          } else {\n                            setnewfielddata([].concat(_toConsumableArray(newfielddata), [currentfield]));\n                          }\n                        } else {\n                          setnewfielddata(function (prev) {\n                            var temp = prev;\n                            var idxnewfield = updatedata.add_columns.map(function (docname) {\n                              return docname.name;\n                            }).indexOf(doc.name);\n\n                            if (currentfield.data_type === \"dropdown\") {\n                              temp[idxnewfield] = _objectSpread(_objectSpread({}, currentfield), {}, {\n                                \"default\": JSON.stringify({\n                                  \"default\": \"-\",\n                                  opsi: currentdropdown\n                                })\n                              });\n                            } else if (currentfield.data_type === \"checkbox\") {\n                              temp[idxnewfield] = _objectSpread(_objectSpread({}, currentfield), {}, {\n                                \"default\": JSON.stringify({\n                                  \"default\": [],\n                                  opsi: currentdropdown\n                                })\n                              });\n                            } else {\n                              temp[idxnewfield] = currentfield;\n                            }\n\n                            return temp;\n                          });\n                        }\n                      } else {\n                        var idxupdatefield = updatefielddata.map(function (docv) {\n                          return docv.id;\n                        }).indexOf(doc.id);\n\n                        if (idxupdatefield === -1) {\n                          if (currentfield.data_type === \"dropdown\") {\n                            setupdatefielddata([].concat(_toConsumableArray(updatefielddata), [_objectSpread(_objectSpread({}, currentfield), {}, {\n                              \"default\": JSON.stringify({\n                                \"default\": \"-\",\n                                opsi: currentdropdown\n                              })\n                            })]));\n                          } else if (currentfield.data_type === \"checkbox\") {\n                            setupdatefielddata([].concat(_toConsumableArray(updatefielddata), [_objectSpread(_objectSpread({}, currentfield), {}, {\n                              \"default\": JSON.stringify({\n                                \"default\": [],\n                                opsi: currentdropdown\n                              })\n                            })]));\n                          } else {\n                            setupdatefielddata([].concat(_toConsumableArray(updatefielddata), [currentfield]));\n                          }\n                        } else {\n                          setupdatefielddata(function (prev) {\n                            var temp = prev;\n\n                            if (currentfield.data_type === \"dropdown\") {\n                              temp[idxupdatefield] = _objectSpread(_objectSpread({}, currentfield), {}, {\n                                \"default\": JSON.stringify({\n                                  \"default\": \"-\",\n                                  opsi: currentdropdown\n                                })\n                              });\n                            } else if (currentfield.data_type === \"checkbox\") {\n                              temp[idxupdatefield] = _objectSpread(_objectSpread({}, currentfield), {}, {\n                                \"default\": JSON.stringify({\n                                  \"default\": [],\n                                  opsi: currentdropdown\n                                })\n                              });\n                            } else {\n                              temp[idxupdatefield] = _objectSpread(_objectSpread({}, currentfield), {}, {\n                                \"default\": \"-\"\n                              });\n                            }\n\n                            return temp;\n                          });\n                        }\n                      }\n\n                      if (currentfield.data_type === \"dropdown\" || currentfield.data_type === \"checkbox\") {\n                        setcurrentdropdownidx(idx);\n                        setcurrentdropdowntrigger(function (prev) {\n                          return !prev;\n                        });\n                      } else {\n                        setcurrentnondropdownidx(idx);\n                        setcurrentnondropdowntrigger(function (prev) {\n                          return !prev;\n                        });\n                      }\n\n                      var temp = fielddata;\n                      temp[idx] = currentfield;\n                      setfielddata(temp);\n\n                      if (addedfield[idx] === false) {\n                        setselectedfieldidxtrigger(function (prev) {\n                          return !prev;\n                        });\n                        setselectedfieldidx(idx);\n                      } else if (typeof (addedfield[idx] === \"undefined\")) {\n                        setaddedfield([].concat(_toConsumableArray(addedfield), [true]));\n                      } // setaddedfield(prev => {\n                      //     if (prev[idx] === false) {\n                      //         console.log(\"sini1\")\n                      //         setselectedfieldidxtrigger(idx)\n                      //         setselectedfieldidx(idx)\n                      //         prev[idx] = true\n                      //         return prev\n                      //     }\n                      //     else if (typeof (prev[idx]) === 'undefined') {\n                      //         console.log(\"situ2\")\n                      //         const temp2 = [...prev, true]\n                      //         return temp2\n                      //     }\n                      // })\n\n\n                      setdisabledaddfield(false);\n                      setdisabledsimpan(false);\n                      setpointevent(\"\");\n                    },\n                    children: \"Tambah\"\n                  })]\n                })]\n              })\n            }, idx)\n          });\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"w-full flex justify-center mt-5\",\n          children: /*#__PURE__*/_jsx(_Button, {\n            type: \"dashed\",\n            disabled: disabledaddfield,\n            style: {\n              width: \"80%\",\n              height: \"4rem\"\n            },\n            onClick: onClickAddField,\n            children: \"+ Tambah Spesifikasi Asset Type\"\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: /*#__PURE__*/_jsx(\"strong\", {\n        children: \"Konfirmasi Ubah Induk Asset Type\"\n      }),\n      visible: modalubahinduk,\n      okText: \"Simpan\",\n      cancelText: \"Batal\",\n      onCancel: function onCancel() {\n        setmodalubahinduk(false);\n      },\n      width: 600,\n      onOk: function onOk() {\n        setchildvalue(selectedinduk.id);\n        setupdatedata(function (prev) {\n          var temp = prev;\n          temp.parent = idparentstate;\n          return temp;\n        });\n        setmodalubahinduk(false);\n      },\n      okButtonProps: {\n        disabled: disabledchild\n      },\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex flex-col p-5\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          id: \"step1\",\n          className: \"rounded border bg-gray-50 p-5 flex flex-col\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"mb-2\",\n            children: [/*#__PURE__*/_jsxs(\"h5\", {\n              className: \" text-xs font-semibold\",\n              children: [\"Berikut adalah child dari asset type \\\"\", displaydata.name, \"\\\":\"]\n            }), /*#__PURE__*/_jsx(\"ul\", {\n              children: childassettype.length === 0 ? /*#__PURE__*/_jsx(_Fragment, {\n                children: \"-\"\n              }) : /*#__PURE__*/_jsx(_Fragment, {\n                children: loadingmodalchild ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(_Spin, {\n                    size: \"small\"\n                  })\n                }) : childassettype.map(function (doc, idx) {\n                  return /*#__PURE__*/_jsxs(\"li\", {\n                    className: \"text-xs\",\n                    children: [\"- \", doc.title]\n                  });\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"mb-2\",\n            children: [/*#__PURE__*/_jsxs(\"h5\", {\n              className: \" text-xs font-semibold\",\n              children: [\"Apakah anda ingin membawa seluruh Child dari asset type \\\"\", displaydata.name, \"\\\"?\"]\n            }), /*#__PURE__*/_jsx(_Radio.Group, {\n              className: \"step1radio\",\n              onChange: function onChange(e) {\n                if (e.target.value === true) {\n                  setdisabledchild(false);\n                  setupdatedata(function (prev) {\n                    var temp = prev;\n                    temp.action = true;\n                    temp.is_deleted = false;\n                    return temp;\n                  });\n                } else {\n                  setdisabledchild(false);\n                  setupdatedata(function (prev) {\n                    var temp = prev;\n                    temp.action = true;\n                    temp.is_deleted = true;\n                    return temp;\n                  });\n                }\n              },\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"flex flex-col\",\n                children: [/*#__PURE__*/_jsx(_Radio, {\n                  value: true,\n                  children: \"Ya\"\n                }), /*#__PURE__*/_jsxs(_Radio, {\n                  value: false,\n                  children: [\"Tidak, saya ingin seluruh child dari asset type \\\"\", displaydata.name, \"\\\" dihapus\"]\n                })]\n              })\n            })]\n          })]\n        })\n      })\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default AssetUpdate;","map":null,"metadata":{},"sourceType":"module"}