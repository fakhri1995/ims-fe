{"ast":null,"code":"import _Tabs from \"antd/lib/tabs\";\nimport _Timeline from \"antd/lib/timeline\";\nimport _Empty from \"antd/lib/empty\";\nimport _Modal from \"antd/lib/modal\";\nimport _Table from \"antd/lib/table\";\nimport _Select from \"antd/lib/select\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _notification from \"antd/lib/notification\";\nimport _toConsumableArray from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _Popover from \"antd/lib/popover\";\nimport _defineProperty from \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _Tooltip from \"antd/lib/tooltip\";\nimport _Spin from \"antd/lib/spin\";\nimport _Button from \"antd/lib/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CloseCircleOutlined, DeleteOutlined, DownOutlined, ExclamationCircleOutlined, SearchOutlined, UpOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\nimport Layout from \"../../../components/layout-dashboard2\";\nimport st from \"../../../components/layout-dashboard.module.css\";\n\nvar Overview = function Overview(_ref) {\n  _s();\n\n  var itemid = _ref.itemid,\n      initProps = _ref.initProps,\n      maindata = _ref.maindata,\n      manuf = _ref.manuf,\n      vendor = _ref.vendor,\n      praloading = _ref.praloading;\n  var rt = useRouter(); //useState\n\n  var _useState = useState({}),\n      invrelations2 = _useState[0],\n      setinvrelations2 = _useState[1]; //helper\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b flex justify-between p-5 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-bold text-xl my-auto\",\n        children: \"Overview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, _this), praloading ? null : /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        size: \"large\",\n        onClick: function onClick() {\n          rt.push(\"/items/update/\".concat(itemid));\n        },\n        children: \"Ubah\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, _this), praloading ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 mx-5 p-5 w-9/12 border shadow-md rounded-md flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"Model:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, _this), maindata.model_inventory.deleted_at !== null ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0 mr-1\",\n            children: maindata.model_inventory.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(_Tooltip, {\n            placement: \"right\",\n            title: \"Model telah dihapus, segera lakukan pengubahan Model!\",\n            children: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {\n              style: {\n                color: \"brown\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, _this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: maindata.model_inventory.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"Asset Type:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, _this), maindata.model_inventory.asset.deleted_at !== null ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0 mr-1\",\n            children: maindata.model_inventory.asset.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(_Tooltip, {\n            placement: \"right\",\n            title: \"Asset Type telah dihapus, segera lakukan pengubahan Asset Type!\",\n            children: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {\n              style: {\n                color: \"brown\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, _this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: maindata.model_inventory.asset.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"MIG ID:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: maindata.mig_id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"Serial Number:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: maindata.serial_number === \"\" || maindata.serial_number === null ? \"-\" : maindata.serial_number\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"Manufacturer:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, _this), // invrelations.manufacturers.filter(docfil => docfil.id === maindata.manufacturer_id)[0].deleted_at !== null\n        manuf.isnull === false ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0 mr-1\",\n            children: manuf.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 19\n          }, _this), /*#__PURE__*/_jsxDEV(_Tooltip, {\n            placement: \"right\",\n            title: \"Manufacturer telah dihapus, segera lakukan pengubahan Manufacturer!\",\n            children: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {\n              style: {\n                color: \"brown\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 21\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 19\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, _this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: manuf.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"Vendor:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: maindata.vendor_id === null ? \"-\" : vendor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"Location:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, _this), maindata.is_consumable === true ? maindata.quantities.map(function (doc, idx) {\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: [idx + 1, \". \", doc.name, \" - \", doc.quantity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 17\n          }, _this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: maindata.location === null ? \"-\" : maindata.location_inventory.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \" text-sm font-semibold mb-0\",\n          children: \"Deskripsi:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0 text-sm\",\n          children: maindata.deskripsi === \"\" || maindata.deskripsi === null ? \"-\" : maindata.deskripsi\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, _this), maindata.additional_attributes.map(function (doccolumns, idxcolumns) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-5 \".concat(idxcolumns === 0 ? \"mt-5\" : \"\"),\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \" text-sm font-semibold mb-0\",\n            children: [doccolumns.name, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0 text-sm\",\n            children: doccolumns.data_type === \"dropdown\" || doccolumns.data_type === \"checkbox\" || doccolumns.data_type === \"date\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [doccolumns.data_type === \"dropdown\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: doccolumns.value.opsi[doccolumns.value[\"default\"]]\n              }, void 0, false), doccolumns.data_type === \"checkbox\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: doccolumns.value.opsi.filter(function (_, idxfil) {\n                  return doccolumns.value[\"default\"].includes(idxfil);\n                }).join(\", \")\n              }, void 0, false), doccolumns.data_type === \"date\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: moment(doccolumns.value).locale(\"id\").format(\"LL\")\n              }, void 0, false)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: doccolumns.value\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }, _this)]\n        }, idxcolumns, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }, _this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Overview, \"2dok8THoWC/PlKEs/QvWTLtZ5KI=\", false, function () {\n  return [useRouter];\n});\n\n_c = Overview;\n\nvar KonfigurasiPart = function KonfigurasiPart(_ref2) {\n  _s2();\n\n  var initProps = _ref2.initProps,\n      itemid = _ref2.itemid,\n      invrelations = _ref2.invrelations,\n      maindata = _ref2.maindata,\n      praloading2 = _ref2.praloading2,\n      models = _ref2.models,\n      setmodels = _ref2.setmodels;\n  var rt = useRouter(); //usestate\n\n  var _useState2 = useState([]),\n      mainpartdata = _useState2[0],\n      setmainpartdata = _useState2[1];\n\n  var _useState3 = useState([]),\n      assetdata = _useState3[0],\n      setassetdata = _useState3[1];\n\n  var _useState4 = useState(true),\n      praloadingpart = _useState4[0],\n      setpraloadingpart = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      events = _useState5[0],\n      setevents = _useState5[1];\n\n  var _useState6 = useState([]),\n      datatable = _useState6[0],\n      setdatatable = _useState6[1];\n\n  var _useState7 = useState([]),\n      datatable2 = _useState7[0],\n      setdatatable2 = _useState7[1];\n\n  var _useState8 = useState([]),\n      datatable3 = _useState8[0],\n      setdatatable3 = _useState8[1];\n\n  var _useState9 = useState(false),\n      namasearchact = _useState9[0],\n      setnamasearchact = _useState9[1];\n\n  var _useState10 = useState(\"\"),\n      namavalue = _useState10[0],\n      setnamavalue = _useState10[1];\n\n  var _useState11 = useState(false),\n      assettypefilteract = _useState11[0],\n      setassettypefilteract = _useState11[1];\n\n  var _useState12 = useState(\"\"),\n      assettypevalue = _useState12[0],\n      setassettypevalue = _useState12[1];\n\n  var _useState13 = useState(false),\n      modelfilteract = _useState13[0],\n      setmodelfilteract = _useState13[1];\n\n  var _useState14 = useState(\"\"),\n      modelvalue = _useState14[0],\n      setmodelvalue = _useState14[1];\n\n  var _useState15 = useState(0),\n      datatrigger = _useState15[0],\n      setdatatrigger = _useState15[1]; //changed dan removed\n\n\n  var _useState16 = useState([]),\n      datareplacements = _useState16[0],\n      setdatareplacements = _useState16[1];\n\n  var _useState17 = useState(false),\n      popover = _useState17[0],\n      setpopover = _useState17[1]; //changed\n\n\n  var _useState18 = useState({\n    id: null,\n    model_id: null,\n    inventory_name: \"\",\n    mig_id: \"\",\n    status_condition: {\n      id: null,\n      name: \"\"\n    },\n    status_usage: {\n      id: null,\n      name: \"\"\n    },\n    deleted_at: null,\n    model_inventory: {\n      id: null,\n      name: \"\",\n      asset_id: null,\n      deleted_at: null,\n      asset: {\n        id: null,\n        name: \"\",\n        deleted_at: \"\"\n      }\n    }\n  }),\n      datachanged = _useState18[0],\n      setdatachanged = _useState18[1];\n\n  var _useState19 = useState({\n    id: 0,\n    replacement_id: 0,\n    notes: \"\"\n  }),\n      dataApichanged = _useState19[0],\n      setdataApichanged = _useState19[1];\n\n  var _useState20 = useState(false),\n      modalchanged = _useState20[0],\n      setmodalchanged = _useState20[1];\n\n  var _useState21 = useState(true),\n      disabledchanged = _useState21[0],\n      setdisabledchanged = _useState21[1];\n\n  var _useState22 = useState(false),\n      loadingchanged = _useState22[0],\n      setloadingchanged = _useState22[1];\n\n  var _useState23 = useState(-1),\n      triggerchanged = _useState23[0],\n      settriggerchanged = _useState23[1]; //removed\n\n\n  var _useState24 = useState(-1),\n      dataremoved = _useState24[0],\n      setdataremoved = _useState24[1];\n\n  var _useState25 = useState({\n    id: 0,\n    inventory_part_id: 0,\n    notes: \"\"\n  }),\n      dataApiremoved = _useState25[0],\n      setdataApiremoved = _useState25[1];\n\n  var _useState26 = useState(false),\n      modalremoved = _useState26[0],\n      setmodalremoved = _useState26[1];\n\n  var _useState27 = useState(true),\n      disabledremoved = _useState27[0],\n      setdisabledremoved = _useState27[1];\n\n  var _useState28 = useState(false),\n      loadingremoved = _useState28[0],\n      setloadingremoved = _useState28[1];\n\n  var _useState29 = useState(false),\n      fetchingmodel = _useState29[0],\n      setfetchingmodel = _useState29[1];\n\n  var _useState30 = useState(models),\n      backupmodels = _useState30[0],\n      setbackupmodels = _useState30[1];\n\n  var columns = [// {\n  //     title: 'Nama Item',\n  //     dataIndex: 'inventory_name',\n  //     key: 'inventory_name',\n  // },\n  {\n    title: \"MIG ID\",\n    dataIndex: \"mig_id\",\n    key: \"mig_id\"\n  }, {\n    title: \"Serial Number\",\n    dataIndex: \"serial_number\",\n    key: \"serial_number\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.serial_number === null ? \"-\" : record.serial_number\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Model\",\n    dataIndex: \"model_name\",\n    key: \"model_name\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.model_inventory.name\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Asset Type\",\n    dataIndex: \"asset_name\",\n    key: \"asset_name\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.model_inventory.asset.asset_name\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\",\n    dataIndex: \"actionss\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: events === record.id ? /*#__PURE__*/_jsxDEV(_Popover, {\n            visible: popover,\n            onVisibleChange: function onVisibleChange() {\n              setpopover(true);\n            },\n            style: {\n              padding: \"0px\",\n              margin: \"0px\"\n            },\n            placement: \"bottomLeft\",\n            trigger: \"click\",\n            content: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center cursor-pointer\",\n                onClick: function onClick() {\n                  return setpopover(false);\n                },\n                children: /*#__PURE__*/_jsxDEV(CloseCircleOutlined, {\n                  style: {\n                    color: \"red\",\n                    fontSize: \"1.1rem\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 25\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 23\n              }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"text\",\n                style: {\n                  width: \"100%\"\n                },\n                onClick: function onClick() {\n                  setdataremoved(record);\n                  setdataApiremoved(_objectSpread(_objectSpread({}, dataApiremoved), {}, {\n                    id: mainpartdata.id,\n                    inventory_part_id: record.id\n                  }));\n                  setmodalremoved(true);\n                  setpopover(false);\n                },\n                children: \"Keluarkan Part\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 23\n              }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"text\",\n                style: {\n                  width: \"100%\"\n                },\n                onClick: function onClick() {\n                  setdatachanged(record);\n                  setmodalchanged(true);\n                  setpopover(false);\n                  settriggerchanged(function (prev) {\n                    return prev + 1;\n                  });\n                },\n                children: \"Gantikan Part\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 23\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 21\n            }, _this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cursor-pointer\",\n              onClick: function onClick() {\n                return setpopover(false);\n              },\n              children: /*#__PURE__*/_jsxDEV(CloseCircleOutlined, {\n                style: {\n                  color: \"red\",\n                  fontSize: \"1.5rem\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, _this) : null\n        }, void 0, false)\n      };\n    }\n  }]; //helper\n  //1 nya lagi ada di useEffect\n\n  var recursiveFlattenArr = function recursiveFlattenArr(dataassets) {\n    var result = [];\n    dataassets.forEach(function (item, idx) {\n      result.push(item.id);\n\n      if (item.children) {\n        result.push.apply(result, _toConsumableArray(recursiveFlattenArr(item.children)));\n      }\n    });\n    return result;\n  };\n\n  function recursiveModifData(dataa) {\n    for (var i = 0; i < dataa.length; i++) {\n      var _dataa$i$model_invent;\n\n      dataa[i][\"key\"] = dataa[i].id;\n      dataa[i][\"value\"] = dataa[i].id;\n      dataa[i][\"title\"] = \"\".concat(dataa[i].mig_id, \" - \").concat((_dataa$i$model_invent = dataa[i].model_inventory) === null || _dataa$i$model_invent === void 0 ? void 0 : _dataa$i$model_invent.name);\n      dataa[i][\"children\"] = dataa[i].inventory_replacement_parts;\n      delete dataa[i].inventory_replacement_parts;\n\n      if (dataa[i].children.length > 0) {\n        recursiveModifData(dataa[i].children);\n      }\n    }\n\n    return dataa;\n  } //handler\n\n\n  var assetPart = [];\n\n  var recursiveSearchPartFromAsset = function recursiveSearchPartFromAsset(doc, assetid) {\n    var arr = [];\n\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].model_inventory.asset.id === Number(assetid)) {\n        // continue\n        assetPart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push(_objectSpread(_objectSpread({}, doc[i]), {}, {\n            children: recursiveSearchPartFromAsset(doc[i].children, assetid)\n          }));\n        } else {\n          arr.push(_objectSpread({}, doc[i]));\n        }\n      }\n    }\n\n    return arr;\n  };\n\n  var modelPart = [];\n\n  var recursiveSearchPartFromModel = function recursiveSearchPartFromModel(doc, modelid) {\n    var arr = [];\n\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].model_id === modelid) {\n        // continue\n        modelPart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push(_objectSpread(_objectSpread({}, doc[i]), {}, {\n            children: recursiveSearchPartFromModel(doc[i].children, modelid)\n          }));\n        } else {\n          arr.push(_objectSpread({}, doc[i]));\n        }\n      }\n    }\n\n    return arr;\n  };\n\n  var namePart = [];\n\n  var recursiveSearchPartFromName = function recursiveSearchPartFromName(doc, name) {\n    var arr = [];\n\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].inventory_name.toLowerCase().includes(name.toLowerCase())) {\n        // continue\n        namePart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push(_objectSpread(_objectSpread({}, doc[i]), {}, {\n            children: recursiveSearchPartFromName(doc[i].children, name)\n          }));\n        } else {\n          arr.push(_objectSpread({}, doc[i]));\n        }\n      }\n    }\n\n    return arr;\n  }; //deliver API\n\n\n  var handleReplacementItemPart = function handleReplacementItemPart() {\n    setloadingchanged(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/replaceInventoryPart\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataApichanged)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingchanged(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Item Part berhasil diganti\",\n          duration: 3\n        });\n\n        setmodalchanged(false);\n        setdatatrigger(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleRemoveItemPart = function handleRemoveItemPart() {\n    setloadingremoved(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/removeInventoryPart\"), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataApiremoved)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingremoved(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Item Part berhasil dikeluarkan\",\n          duration: 3\n        });\n\n        setmodalremoved(false);\n        setdatatrigger(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //search nama\n\n\n  var onChangeSearch = function onChangeSearch(e) {\n    if (e.target.value === \"\") {\n      setdatatable(datatable3);\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  }; //search asset type\n\n\n  var onChangeAssetType = function onChangeAssetType(id) {\n    if (typeof id === \"undefined\") {\n      setdatatable(datatable3);\n      setassettypefilteract(false);\n      setmodels(backupmodels);\n    } else {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModels?rows=100&asset_id=\").concat(id), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        res2.data.length === 0 ? setmodels([]) : setmodels(res2.data.data);\n      });\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  }; //search model\n\n\n  var onChangeModel = function onChangeModel(idmodel) {\n    if (typeof idmodel === \"undefined\") {\n      setdatatable(datatable3);\n      setmodelfilteract(false);\n    } else {\n      setmodelfilteract(true);\n      setmodelvalue(idmodel);\n    }\n  }; //finalClick\n\n\n  var onFinalClick = function onFinalClick() {\n    var datatemp = datatable2;\n\n    if (assettypefilteract) {\n      // const t = recursiveSearchPartFromAsset(datatemp, assettypevalue)\n      recursiveSearchPartFromAsset(datatemp, assettypevalue);\n      datatemp = assetPart;\n    }\n\n    if (modelfilteract) {\n      // const t = recursiveSearchPartFromModel(datatemp, modelvalue)\n      recursiveSearchPartFromModel(datatemp, modelvalue);\n      datatemp = modelPart;\n    }\n\n    if (namasearchact) {\n      // const t = recursiveSearchPartFromName(datatemp, namavalue)\n      recursiveSearchPartFromName(datatemp, namavalue);\n      datatemp = namePart;\n    }\n\n    setdatatable(datatemp);\n  };\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getInventory?id=\").concat(itemid), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      return res2.data;\n    }).then(function (res3) {\n      var recursiveChangetoChildren = function recursiveChangetoChildren(rsc) {\n        var res = [];\n\n        for (var i = 0; i < rsc.length; i++) {\n          var _rsc$i$model_inventor;\n\n          rsc[i].key = rsc[i].id;\n          rsc[i].value = rsc[i].id;\n          rsc[i].title = \"\".concat(rsc[i].mig_id, \" - \").concat((_rsc$i$model_inventor = rsc[i].model_inventory) === null || _rsc$i$model_inventor === void 0 ? void 0 : _rsc$i$model_inventor.name);\n          rsc[i].children = rsc[i].inventory_parts;\n          delete rsc[i].inventory_parts;\n\n          if (rsc[i].children.length !== 0) {\n            res.push(_objectSpread(_objectSpread({}, rsc[i]), {}, {\n              children: recursiveChangetoChildren(rsc[i].children)\n            }));\n          } else {\n            delete rsc[i].children;\n            res.push(_objectSpread({}, rsc[i]));\n          }\n        }\n\n        return res;\n      };\n\n      var t = recursiveChangetoChildren(res3.inventory_parts);\n      setmainpartdata(_objectSpread(_objectSpread({}, res3), {}, {\n        inventory_parts: t\n      }));\n      setdatatable(t);\n      setdatatable2(t);\n      setdatatable3(t);\n      setpraloadingpart(false);\n    });\n  }, [datatrigger]);\n  useEffect(function () {\n    if (triggerchanged !== -1) {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getInventoryReplacements?id=\").concat(datachanged.model_inventory.asset_id), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        var mapdata = recursiveModifData(res2.data);\n        setdatareplacements(mapdata);\n\n        if (mapdata.length === 0) {\n          setdisabledchanged(false);\n        }\n      });\n    }\n  }, [triggerchanged]);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAssets\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setassetdata(res2.data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b flex justify-between p-5 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-bold text-xl my-auto\",\n        children: \"Konfigurasi Part\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 9\n      }, _this), praloading2 ? null : /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        size: \"large\",\n        onClick: function onClick() {\n          /*console.log(mainpartdata); console.log(dataremoved)*/\n          rt.push(\"/items/createpart/\".concat(itemid, \"?nama=\").concat(mainpartdata.mig_id));\n        },\n        children: \"Tambah\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 718,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mb-5\",\n      children: praloading2 ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-full mr-1 grid grid-cols-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-5 mr-1\",\n          children: /*#__PURE__*/_jsxDEV(_Input, {\n            style: {\n              width: \"100%\",\n              marginRight: \"0.5rem\"\n            },\n            placeholder: \"Cari Nama Item\",\n            onChange: function onChange(e) {\n              return onChangeSearch(e);\n            },\n            allowClear: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-3 mr-1\",\n          children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n            allowClear: true,\n            dropdownStyle: {\n              maxHeight: 400,\n              overflow: \"auto\"\n            },\n            treeData: assetdata,\n            placeholder: \"Cari Asset Type\",\n            treeDefaultExpandAll: true,\n            style: {\n              width: \"100%\"\n            },\n            onChange: function onChange(value, label, extra) {\n              if (typeof value === \"undefined\") {\n                onChangeAssetType();\n              } else {\n                onChangeAssetType(extra.allCheckedNodes[0].node.props.id);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-3 mr-1\",\n          children: /*#__PURE__*/_jsxDEV(_Select, {\n            showSearch: true,\n            optionFilterProp: \"children\",\n            notFoundContent: fetchingmodel ? /*#__PURE__*/_jsxDEV(_Spin, {\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 50\n            }, _this) : null,\n            onSearch: function onSearch(value) {\n              setfetchingmodel(true);\n              fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterModels?name=\").concat(value !== \"\" ? value : \"\"), {\n                method: \"GET\",\n                headers: {\n                  Authorization: JSON.parse(initProps)\n                }\n              }).then(function (res) {\n                return res.json();\n              }).then(function (res2) {\n                setmodels(res2.data);\n                setfetchingmodel(false);\n              });\n            },\n            filterOption: function filterOption(input, opt) {\n              return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n            },\n            placeholder: \"Cari Model\",\n            style: {\n              width: \"100%\"\n            },\n            allowClear: true,\n            onChange: function onChange(value) {\n              if (typeof value === \"undefined\") {\n                onChangeModel();\n              } else {\n                onChangeModel(value);\n              }\n            },\n            children: models.map(function (docmodels, idxmodels) {\n              return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                value: docmodels.id,\n                children: docmodels.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 802,\n                columnNumber: 21\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 763,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 762,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"primary\",\n            style: {\n              width: \"100%\"\n            },\n            onClick: onFinalClick,\n            children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 815,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 810,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 809,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 734,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Table, {\n      loading: praloadingpart,\n      pagination: {\n        pageSize: 9\n      },\n      scroll: {\n        x: 200\n      },\n      dataSource: datatable,\n      columns: columns,\n      onRow: function onRow(record, rowIndex) {\n        return {\n          onMouseOver: function onMouseOver(event) {\n            setevents(record.id);\n          },\n          onMouseLeave: function onMouseLeave(event) {\n            setevents(0);\n          }\n        };\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 821,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: [\"Form Pergantian Part \\\"\", datachanged.inventory_name, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 841,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalchanged(false);\n                setdataApichanged(_objectSpread(_objectSpread({}, dataApichanged), {}, {\n                  replacement_id: null,\n                  notes: \"\"\n                }));\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              disabled: disabledchanged,\n              onClick: handleReplacementItemPart,\n              loading: loadingchanged,\n              children: \"Simpan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 11\n      }, _this),\n      visible: modalchanged,\n      onCancel: function onCancel() {\n        setmodalchanged(false);\n      },\n      footer: null,\n      width: 760,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-656990793\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-656990793\" + \" \" + \"mb-0\",\n            children: [\"Nama Item Part yang Ingin Diganti\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-656990793\" + \" \" + \"namapart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 883,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 881,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_TreeSelect, {\n            treeData: datatable3,\n            defaultValue: datachanged.key\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 885,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"656990793\",\n            children: \".namapart.jsx-656990793::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5M0JlLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy9kZXRhaWwvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbG9zZUNpcmNsZU91dGxpbmVkLFxuICBEZWxldGVPdXRsaW5lZCxcbiAgRG93bk91dGxpbmVkLFxuICBFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkLFxuICBTZWFyY2hPdXRsaW5lZCxcbiAgVXBPdXRsaW5lZCxcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEVtcHR5LFxuICBJbnB1dCxcbiAgTW9kYWwsXG4gIFBvcG92ZXIsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGFibGUsXG4gIFRhYnMsXG4gIFRpbWVsaW5lLFxuICBUb29sdGlwLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IE92ZXJ2aWV3ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBtYW51ZixcbiAgdmVuZG9yLFxuICBwcmFsb2FkaW5nLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMyLCBzZXRpbnZyZWxhdGlvbnMyXSA9IHVzZVN0YXRlKHt9KTtcblxuICAvL2hlbHBlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtYi04XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvXCI+T3ZlcnZpZXc8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZyA/IG51bGwgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgcnQucHVzaChgL2l0ZW1zL3VwZGF0ZS8ke2l0ZW1pZH1gKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgPFNwaW4gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCBteC01IHAtNSB3LTkvMTIgYm9yZGVyIHNoYWRvdy1tZCByb3VuZGVkLW1kIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TmFtYSBJdGVtOjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TW9kZWw6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPnttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZWwgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBNb2RlbCFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkFzc2V0IFR5cGU6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPlxuICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5NSUcgSUQ6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+U2VyaWFsIE51bWJlcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBcIlwiIHx8IG1haW5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TWFudWZhY3R1cmVyOjwvaDE+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihkb2NmaWwgPT4gZG9jZmlsLmlkID09PSBtYWluZGF0YS5tYW51ZmFjdHVyZXJfaWQpWzBdLmRlbGV0ZWRfYXQgIT09IG51bGxcbiAgICAgICAgICAgICAgbWFudWYuaXNudWxsID09PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTWFudWZhY3R1cmVyIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlZlbmRvcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS52ZW5kb3JfaWQgPT09IG51bGwgPyBcIi1cIiA6IHZlbmRvcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkxvY2F0aW9uOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEuaXNfY29uc3VtYWJsZSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgbWFpbmRhdGEucXVhbnRpdGllcy5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICB7aWR4ICsgMX0uIHtkb2MubmFtZX0gLSB7ZG9jLnF1YW50aXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHttYWluZGF0YS5sb2NhdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5sb2NhdGlvbl9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkRlc2tyaXBzaTo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5kZXNrcmlwc2kgPT09IFwiXCIgfHwgbWFpbmRhdGEuZGVza3JpcHNpID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuZGVza3JpcHNpfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICAgIHttYWluZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKChkb2Njb2x1bW5zLCBpZHhjb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZHhjb2x1bW5zfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgbWItNSAke1xuICAgICAgICAgICAgICAgICAgaWR4Y29sdW1ucyA9PT0gMCA/IGBtdC01YCA6IGBgXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5uYW1lfTpcbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Pntkb2Njb2x1bW5zLnZhbHVlLm9wc2lbZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0XX08Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLnZhbHVlLm9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChfLCBpZHhmaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2Njb2x1bW5zLnZhbHVlLmRlZmF1bHQuaW5jbHVkZXMoaWR4ZmlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge21vbWVudChkb2Njb2x1bW5zLnZhbHVlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZX08Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5jb25zdCBLb25maWd1cmFzaVBhcnQgPSAoe1xuICBpbml0UHJvcHMsXG4gIGl0ZW1pZCxcbiAgaW52cmVsYXRpb25zLFxuICBtYWluZGF0YSxcbiAgcHJhbG9hZGluZzIsXG4gIG1vZGVscyxcbiAgc2V0bW9kZWxzLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuXG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW21haW5wYXJ0ZGF0YSwgc2V0bWFpbnBhcnRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdwYXJ0LCBzZXRwcmFsb2FkaW5ncGFydF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVmaWx0ZXJhY3QsIHNldGFzc2V0dHlwZWZpbHRlcmFjdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3NldHR5cGV2YWx1ZSwgc2V0YXNzZXR0eXBldmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RlbGZpbHRlcmFjdCwgc2V0bW9kZWxmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx2YWx1ZSwgc2V0bW9kZWx2YWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0cmlnZ2VyLCBzZXRkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZSgwKTtcbiAgLy9jaGFuZ2VkIGRhbiByZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVwbGFjZW1lbnRzLCBzZXRkYXRhcmVwbGFjZW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BvcG92ZXIsIHNldHBvcG92ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2NoYW5nZWRcbiAgY29uc3QgW2RhdGFjaGFuZ2VkLCBzZXRkYXRhY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IG51bGwsXG4gICAgbW9kZWxfaWQ6IG51bGwsXG4gICAgaW52ZW50b3J5X25hbWU6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIHN0YXR1c191c2FnZToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICBtb2RlbF9pbnZlbnRvcnk6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIGFzc2V0OiB7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW2RhdGFBcGljaGFuZ2VkLCBzZXRkYXRhQXBpY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgcmVwbGFjZW1lbnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxjaGFuZ2VkLCBzZXRtb2RhbGNoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRjaGFuZ2VkLCBzZXRkaXNhYmxlZGNoYW5nZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlZCwgc2V0bG9hZGluZ2NoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdHJpZ2dlcmNoYW5nZWQsIHNldHRyaWdnZXJjaGFuZ2VkXSA9IHVzZVN0YXRlKC0xKTtcbiAgLy9yZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVtb3ZlZCwgc2V0ZGF0YXJlbW92ZWRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGF0YUFwaXJlbW92ZWQsIHNldGRhdGFBcGlyZW1vdmVkXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogMCxcbiAgICBpbnZlbnRvcnlfcGFydF9pZDogMCxcbiAgICBub3RlczogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFttb2RhbHJlbW92ZWQsIHNldG1vZGFscmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHJlbW92ZWQsIHNldGRpc2FibGVkcmVtb3ZlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdyZW1vdmVkLCBzZXRsb2FkaW5ncmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2JhY2t1cG1vZGVscywgc2V0YmFja3VwbW9kZWxzXSA9IHVzZVN0YXRlKG1vZGVscyk7XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAvLyB7XG4gICAgLy8gICAgIHRpdGxlOiAnTmFtYSBJdGVtJyxcbiAgICAvLyAgICAgZGF0YUluZGV4OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vICAgICBrZXk6ICdpbnZlbnRvcnlfbmFtZScsXG4gICAgLy8gfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNSUcgSURcIixcbiAgICAgIGRhdGFJbmRleDogXCJtaWdfaWRcIixcbiAgICAgIGtleTogXCJtaWdfaWRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlNlcmlhbCBOdW1iZXJcIixcbiAgICAgIGRhdGFJbmRleDogXCJzZXJpYWxfbnVtYmVyXCIsXG4gICAgICBrZXk6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PntyZWNvcmQuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IFwiLVwiIDogcmVjb3JkLnNlcmlhbF9udW1iZXJ9PC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNb2RlbFwiLFxuICAgICAgZGF0YUluZGV4OiBcIm1vZGVsX25hbWVcIixcbiAgICAgIGtleTogXCJtb2RlbF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkubmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQXNzZXQgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcImFzc2V0X25hbWVcIixcbiAgICAgIGtleTogXCJhc3NldF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuYXNzZXRfbmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgIHZpc2libGU9e3BvcG92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblZpc2libGVDaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiBgMHB4YCwgbWFyZ2luOiBgMHB4YCB9fVxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0cG9wb3ZlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGByZWRgLCBmb250U2l6ZTogYDEuMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhcmVtb3ZlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaXJlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1haW5wYXJ0ZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlfcGFydF9pZDogcmVjb3JkLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb3BvdmVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFya2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFjaGFuZ2VkKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY2hhbmdlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRyaWdnZXJjaGFuZ2VkKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbnRpa2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+S2VsdWFya2FuIFBhcnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+R2FudGlrYW4gUGFydDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hlbHBlclxuICAvLzEgbnlhIGxhZ2kgYWRhIGRpIHVzZUVmZmVjdFxuICBjb25zdCByZWN1cnNpdmVGbGF0dGVuQXJyID0gKGRhdGFhc3NldHMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBkYXRhYXNzZXRzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZCk7XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZWN1cnNpdmVGbGF0dGVuQXJyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBmdW5jdGlvbiByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhYVtpXVtcImtleVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXCJ2YWx1ZVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXG4gICAgICAgIFwidGl0bGVcIlxuICAgICAgXSA9IGAke2RhdGFhW2ldLm1pZ19pZH0gLSAke2RhdGFhW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgZGF0YWFbaV1bXCJjaGlsZHJlblwiXSA9IGRhdGFhW2ldLmludmVudG9yeV9yZXBsYWNlbWVudF9wYXJ0cztcbiAgICAgIGRlbGV0ZSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBpZiAoZGF0YWFbaV0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWFbaV0uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YWE7XG4gIH1cblxuICAvL2hhbmRsZXJcbiAgY29uc3QgYXNzZXRQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQgPSAoZG9jLCBhc3NldGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZCA9PT0gTnVtYmVyKGFzc2V0aWQpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIGFzc2V0UGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZG9jW2ldLmNoaWxkcmVuLCBhc3NldGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbW9kZWxQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwgPSAoZG9jLCBtb2RlbGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2lkID09PSBtb2RlbGlkKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG1vZGVsUGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZG9jW2ldLmNoaWxkcmVuLCBtb2RlbGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbmFtZVBhcnQgPSBbXTtcbiAgY29uc3QgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lID0gKGRvYywgbmFtZSkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5pbnZlbnRvcnlfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgbmFtZVBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZG9jW2ldLmNoaWxkcmVuLCBuYW1lKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgLy9kZWxpdmVyIEFQSVxuICBjb25zdCBoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0ID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdjaGFuZ2VkKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9yZXBsYWNlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpY2hhbmdlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpZ2FudGlcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVSZW1vdmVJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5ncmVtb3ZlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVtb3ZlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpcmVtb3ZlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ncmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpa2VsdWFya2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIGFzc2V0IHR5cGVcbiAgY29uc3Qgb25DaGFuZ2VBc3NldFR5cGUgPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRhc3NldHR5cGVmaWx0ZXJhY3QoZmFsc2UpO1xuICAgICAgc2V0bW9kZWxzKGJhY2t1cG1vZGVscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9MTAwJmFzc2V0X2lkPSR7aWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwID8gc2V0bW9kZWxzKFtdKSA6IHNldG1vZGVscyhyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0YXNzZXR0eXBldmFsdWUoaWQpO1xuICAgIH1cbiAgfTtcbiAgLy9zZWFyY2ggbW9kZWxcbiAgY29uc3Qgb25DaGFuZ2VNb2RlbCA9IChpZG1vZGVsKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZG1vZGVsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldG1vZGVsZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0bW9kZWx2YWx1ZShpZG1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAoYXNzZXR0eXBlZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRhdGF0ZW1wLCBhc3NldHR5cGV2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IGFzc2V0UGFydDtcbiAgICB9XG4gICAgaWYgKG1vZGVsZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Nb2RlbChkYXRhdGVtcCwgbW9kZWx2YWx1ZSlcbiAgICAgIHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBtb2RlbFBhcnQ7XG4gICAgfVxuICAgIGlmIChuYW1hc2VhcmNoYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZGF0YXRlbXAsIG5hbWF2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IG5hbWVQYXJ0O1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBjb25zdCByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuID0gKHJzYykgPT4ge1xuICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcnNjW2ldLmtleSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS52YWx1ZSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS50aXRsZSA9IGAke3JzY1tpXS5taWdfaWR9IC0gJHtyc2NbaV0ubW9kZWxfaW52ZW50b3J5Py5uYW1lfWA7XG4gICAgICAgICAgICByc2NbaV0uY2hpbGRyZW4gPSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5pbnZlbnRvcnlfcGFydHM7XG4gICAgICAgICAgICBpZiAocnNjW2ldLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4ucnNjW2ldLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJzY1tpXS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJlczMuaW52ZW50b3J5X3BhcnRzKTtcbiAgICAgICAgc2V0bWFpbnBhcnRkYXRhKHtcbiAgICAgICAgICAuLi5yZXMzLFxuICAgICAgICAgIGludmVudG9yeV9wYXJ0czogdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldGRhdGF0YWJsZSh0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMih0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMyh0KTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ3BhcnQoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmlnZ2VyY2hhbmdlZCAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVwbGFjZW1lbnRzP2lkPSR7ZGF0YWNoYW5nZWQubW9kZWxfaW52ZW50b3J5LmFzc2V0X2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFwZGF0YSA9IHJlY3Vyc2l2ZU1vZGlmRGF0YShyZXMyLmRhdGEpO1xuICAgICAgICAgIHNldGRhdGFyZXBsYWNlbWVudHMobWFwZGF0YSk7XG4gICAgICAgICAgaWYgKG1hcGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRkaXNhYmxlZGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdHJpZ2dlcmNoYW5nZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPktvbmZpZ3VyYXNpIFBhcnQ8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIC8qY29uc29sZS5sb2cobWFpbnBhcnRkYXRhKTsgY29uc29sZS5sb2coZGF0YXJlbW92ZWQpKi8gcnQucHVzaChcbiAgICAgICAgICAgICAgICBgL2l0ZW1zL2NyZWF0ZXBhcnQvJHtpdGVtaWR9P25hbWE9JHttYWlucGFydGRhdGEubWlnX2lkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nMiA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBtci0xXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAsIG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBOYW1hIEl0ZW1cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2VTZWFyY2goZSl9XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQXNzZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZShleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17ZmV0Y2hpbmdtb2RlbCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgIH0vZ2V0RmlsdGVyTW9kZWxzP25hbWU9JHt2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIn1gLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttb2RlbHMubWFwKChkb2Ntb2RlbHMsIGlkeG1vZGVscykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvY21vZGVscy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY21vZGVscy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkZpbmFsQ2xpY2t9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPFRhYmxlXG4gICAgICAgIGxvYWRpbmc9e3ByYWxvYWRpbmdwYXJ0fVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gUGVyZ2FudGlhbiBQYXJ0IFwie2RhdGFjaGFuZ2VkLmludmVudG9yeV9uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0fVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjaGFuZ2VkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCB5YW5nIEluZ2luIERpZ2FudGl7XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGF0YWJsZTN9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZGF0YWNoYW5nZWQua2V5fVxuICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIEFzc2V0IFR5cGUgZGFyaSBJdGVtIFBhcnQgeWFuZyBpbmdpbiBkaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAge2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCBQZW5nZ2FudGkgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhY2hhbmdlZC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGFyZXBsYWNlbWVudHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFyZXBsYWNlbWVudHMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLmludmVudG9yeV9uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgPC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFBcGljaGFuZ2VkLm5vdGVzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5nZWx1YXJrYW4gaXRlbSBcIlxuICAgICAgICAgICAge2RhdGFyZW1vdmVkLmludmVudG9yeV9uYW1lfVwiIGRhcmkgXCJ7bWFpbnBhcnRkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxyZW1vdmVkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFscmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlUmVtb3ZlSXRlbVBhcnR9XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3JlbW92ZWQgfX1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRhdGFBcGlyZW1vdmVkKHsgLi4uZGF0YUFwaXJlbW92ZWQsIG5vdGVzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgUmVsYXRpb25zaGlwID0gKHsgaW5pdFByb3BzLCBtYWluZGF0YSwgaXRlbWlkIH0pID0+IHtcbiAgLy9pbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtsb2FkaW5ncmVsLCBzZXRsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdyZWwsIHNldHByYWxvYWRpbmdyZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbZGF0YUFwaWRlbGV0ZSwgc2V0ZGF0YUFwaWRlbGV0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25kYXRhZGVsZXRlLCBzZXRyZWxhdGlvbmRhdGFkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgdGlwZTogXCJcIixcbiAgICBrb25la3NpOiBcIlwiLFxuICB9KTtcbiAgLy9hZGRcbiAgY29uc3QgW2RhdGFBcGlhZGQsIHNldGRhdGFBcGlhZGRdID0gdXNlU3RhdGUoe1xuICAgIHN1YmplY3RfaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgIHR5cGVfaWQ6IG51bGwsXG4gICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNwbGF5ZGF0YXJlbGF0aW9ucywgc2V0ZGlzcGxheWRhdGFyZWxhdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbcmVsYXRpb25uYW1lYWRkLCBzZXRyZWxhdGlvbm5hbWVhZGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbm5hbWVkZGFkZCwgc2V0cmVsYXRpb25uYW1lZGRhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlkeGFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkLCBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkXSA9XG4gICAgdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGV0YWlsdGlwZWFkZCwgc2V0ZGV0YWlsdGlwZWFkZF0gPSB1c2VTdGF0ZSgtMTApO1xuICBjb25zdCBbZGV0YWlsdGlwZWRhdGFhZGQsIHNldGRldGFpbHRpcGVkYXRhYWRkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGFsYWRkLCBzZXRtb2RhbGFkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZCwgc2V0ZGlzYWJsZWRhZGRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nYWRkLCBzZXRsb2FkaW5nYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZldGNoaW5nbW9kZWwsIHNldGZldGNoaW5nbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jZGF0YSwgc2V0c3VibG9jZGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N1YmxvY3RyaWcsIHNldHN1YmxvY3RyaWddID0gdXNlU3RhdGUoLTEpO1xuXG4gIC8vZGVjbGFyYXRpb25cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJSZWxhdGlvbnNoaXAgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgICBrZXk6IFwicmVsYXRpb25zaGlwX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIk5hbWFcIixcbiAgICAgIGRhdGFJbmRleDogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICAgIGtleTogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJ0eXBlXCIsXG4gICAgICBrZXk6IFwidHlwZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWRlbGV0ZSh7IGlkOiByZWNvcmQuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25kYXRhZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZC5yZWxhdGlvbnNoaXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGU6IHJlY29yZC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAga29uZWtzaTogcmVjb3JkLmNvbm5lY3RlZF9kZXRhaWxfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogYDEuMnJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogYHBvaW50ZXJgLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIC8vaGFuZGxlclxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgZGF0YXRlbXAgPSBkYXRhdGVtcC5maWx0ZXIoKGZsdCkgPT4ge1xuICAgICAgICByZXR1cm4gZmx0LmNvbm5lY3RlZF9kZXRhaWxfbmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKG5hbWF2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdkZWxldGUodHJ1ZSk7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlUmVsYXRpb25zaGlwSW52ZW50b3J5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpZGVsZXRlKSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgYmVyaGFzaWwgZGloYXB1c1wiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdhZGQodHJ1ZSk7XG4gICAgZGVsZXRlIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhQXBpYWRkKVxuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRSZWxhdGlvbnNoaXBJbnZlbnRvcmllc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWFkZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nYWRkKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxhZGQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICAgICAgICAgIGlzX2ludmVyc2U6IG51bGwsXG4gICAgICAgICAgICB0eXBlX2lkOiBudWxsLFxuICAgICAgICAgICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiBudWxsLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChcIlwiKTtcbiAgICAgICAgICBzZXRzdWJsb2NkYXRhKG51bGwpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoLTEpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoLTEpO1xuICAgICAgICAgIHNldHN1YmxvY3RyaWcoLTEpO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgSXRlbSBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGF0cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0cHJhbG9hZGluZ3JlbCh0cnVlKTtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRkYXRhdGFibGUoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTIoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTMoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldHByYWxvYWRpbmdyZWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2N0cmlnICE9PSAtMSkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtzdWJsb2N0cmlnfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRldGFpbHRpcGVhZGQgIT09IC0xMCkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkYXRhQXBpYWRkLnR5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKFtyZXMyLmRhdGFdKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0xICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTQgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RldGFpbHRpcGVhZGQsIHN1YmxvY3RyaWddKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG8gbXItMVwiPlJlbGF0aW9uc2hpcDwvaDE+XG4gICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5kZWxldGVkX2F0ICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkFzc2V0IFR5cGUgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBBc3NldCBUeXBlIVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTsgLypydC5wdXNoKGAvaXRlbXMvY3JlYXRlcmVsYXRpb25zaGlwLyR7aXRlbWlkfT9uYW1hPSR7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9JmFzc2V0X2lkPSR7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmlkfWApKi9cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgVGFtYmFoXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZ3JlbCA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMTEgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncmVsfVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBSZWxhdGlvbnNoaXAgYmVyaWt1dCBpbmkgZGFyaSBcIlxuICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGJvcmRlci1iIG1iLTVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5SZWxhdGlvbnNoaXAgVHlwZTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMFwiPlRpcGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUudGlwZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5JdGVtOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLmtvbmVrc2l9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiIG9uQ2hhbmdlPXsoZSkgPT4ge319PjwvSW5wdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIFJlbGF0aW9uc2hpcCBcInttYWluZGF0YS5uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApOyAvKnNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCByZWxhdGlvbnNoaXBfaWQ6IG51bGwsIHR5cGVfaWQ6IG51bGwsIGNvbm5lY3RlZF9pZDogbnVsbCB9KSovIC8qY29uc29sZS5sb2coZGF0YUFwaWFkZCkqL1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJlbGF0aW9uc2hpcEl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nYWRkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsYWRkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NzYwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFJlbGF0aW9uc2hpcCBUeXBlIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYm9yZGVyIHAtMiBob3Zlcjpib3JkZXItcHJpbWFyeSByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZCgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9ubmFtZWFkZH08L3A+XG4gICAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgICA8VXBPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPERvd25PdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBJbnZlcnNlIFJlbGF0aW9uc2hpcCBUeXBlXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZGlzcGxheWRhdGFyZWxhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctdGVybmFyeSBjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsYWNrIHAtMyB3LTYvMTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlkeGFkZCA9PT0gaWR4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IG51bGwgfHwgZGF0YUFwaWFkZC50eXBlX2lkID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZGFkZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLnJlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbnZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmludmVyc2VfcmVsYXRpb25zaGlwX3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFRpcGUgPHNwYW4gY2xhc3NOYW1lPVwidGlwZXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpYWRkLnR5cGVfaWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgdHlwZV9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5yZWxhdGlvbnNoaXBfaWQgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVhZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgID8gKHNldHN1YmxvY3RyaWcoLTEpLCBzZXRzdWJsb2NkYXRhKG51bGwpKVxuICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0zfT5Db21wYW55PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTR9PkFzc2V0IFR5cGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXBlcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5iYWNrdXBfY29ubmVjdGVkX2lkcyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHNbMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cz17WzFdfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17ZGV0YWlsdGlwZWRhdGFhZGR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRzdWJsb2N0cmlnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlPC9wPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgZGVuZ2FuIE1vZGVsIElEXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZtb2RlbF9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3N1YmxvY2RhdGEgIT09IG51bGwgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlIChTdWJsb2thc2kpPC9wPlxuICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NkYXRhfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIGNvbm5lY3RlZF9pZHM6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQXNzb2NpYXRpb24gPSAoeyBpbml0UHJvcHMsIGl0ZW1pZCwgbWFpbmRhdGEsIHByYWxvYWRpbmcgfSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFzc29jaWF0aW9uPC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHB4LTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBtYWluZGF0YS5hc3NvY2lhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHttYWluZGF0YS5hc3NvY2lhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgc2hhZG93LW1kIHB5LTQgcHgtNSBib3JkZXIgbWItNCBmbGV4IGp1c3RpZnktYmV0d2VlbiB3LTEwLzEyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcnQucHVzaChgL3RpY2tldHMvZGV0YWlsLyR7ZG9jLmlkfT9hY3RpdmU9ZGV0YWlsSXRlbWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+VGlja2V0IE51bWJlcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MudGlja2V0X25hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLXJlZC0xMDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gNCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQWNpdGl2dHkgPSAoe1xuICBpdGVtaWQsXG4gIGluaXRQcm9wcyxcbiAgbWFpbmRhdGEsXG4gIGludnJlbGF0aW9ucyxcbiAgcHJhbG9hZGluZyxcbiAgYWN0aXZpdHl0cmlnZ2VyLFxufSkgPT4ge1xuICBjb25zdCBbZGF5bG9ncywgc2V0ZGF5bG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt3ZWVrbG9ncywgc2V0d2Vla2xvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9yZWxvZ3MsIHNldG1vcmVsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdsb2dzLCBzZXRwcmFsb2FkaW5nbG9nc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2ludmVudG9yaWVzLCBzZXRpbnZlbnRvcmllc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRwcmFsb2FkaW5nbG9ncyh0cnVlKTtcblxuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFjdGl2aXR5SW52ZW50b3J5TG9ncz9pZD0ke2l0ZW1pZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgZGF5bG9nc21hcCA9IHJlczIuZGF0YS5kYXlfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gRGloYXB1czogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB3ZWVrbG9nc21hcCA9IHJlczIuZGF0YS53ZWVrX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1vcmVsb2dzbWFwID0gcmVzMi5kYXRhLmVsc2VfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXlsb2dzKGRheWxvZ3NtYXApO1xuICAgICAgICBzZXR3ZWVrbG9ncyh3ZWVrbG9nc21hcCk7XG4gICAgICAgIHNldG1vcmVsb2dzKG1vcmVsb2dzbWFwKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgLy8gLnRoZW4ocmVzMyA9PiB7XG4gICAgLy8gICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLCB7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgIC8vICAgICAgICAgaGVhZGVyczoge1xuICAgIC8vICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLy8gICAgICAgICAudGhlbihyZXM0ID0+IHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgY29uY2F0YXJyID0gcmVzNC5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzNC5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG5cbiAgICAvLyAgICAgICAgICAgICB2YXIgbG9nczJtYXAgPSByZXMzLmRhdGEucmVsYXRpb25zaGlwLm1hcCgoZG9jcmVsLCBpZHhyZWwpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZW5ldzIgPSBtb21lbnQoZG9jcmVsLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdCgnTExMJylcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGRlc2NuZXcyID0gJydcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGlkbG9nbmV3ID0gLTFcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGVzYzIgPSBkb2NyZWwuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBpZGxvZ25ldyA9IGNvbmNhdGFyci5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gZG9jcmVsLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pZClbMF0gOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHt0eXBlb2YgKGlkbG9nbmV3KSA9PT0gJ3VuZGVmaW5lZCcgPyBcIihTdWRhaCBEaWhhcHVzIGxhZ2kpXCIgOiBgJHtpZGxvZ25ldy5yZWxhdGlvbnNoaXB9YH1cImAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnRGVsZXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcGAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAuLi5kb2NyZWwsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlbmV3MixcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3MlxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICBzZXRsb2dzMihsb2dzMm1hcClcbiAgICAvLyAgICAgICAgICAgICBzZXRwcmFsb2FkaW5nbG9nczIoZmFsc2UpXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vIH0pXG4gIH0sIFthY3Rpdml0eXRyaWdnZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFjdGl2aXR5PC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5IYXJpIEluaTwvaDE+XG4gICAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogZGF5bG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7ZGF5bG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IHdlZWtsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIHt3ZWVrbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctNi8xMlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+TWluZ2d1IExhbHU8L2gxPlxuICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IG1vcmVsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIHttb3JlbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUaW1lbGluZS5JdGVtIGxhYmVsPXtkb2Nsb2cuZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbG9nLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZWgge2RvY2xvZy5jYXVzZXJfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IEl0ZW1EZXRhaWwgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8xLiBJbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBhY3RpdmVUYWIgPSBcIm92ZXJ2aWV3XCI7XG4gIGNvbnN0IHsgYWN0aXZlIH0gPSBydC5xdWVyeTtcbiAgaWYgKGFjdGl2ZSkge1xuICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZTtcbiAgfVxuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMiwgMik7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiRGV0YWlsIEl0ZW1cIjtcbiAgY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xuXG4gIC8vdXNlU3RhdGVcbiAgY29uc3QgW21haW5kYXRhLCBzZXRtYWluZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiBcIlwiLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgY3JlYXRlZF9hdDogXCJcIixcbiAgICB1cGRhdGVkX2F0OiBcIlwiLFxuICAgIGRlbGV0ZWRfYXQ6IFwiXCIsXG4gICAgYXNzZXRfbmFtZTogXCJcIixcbiAgICBtb2RlbF9uYW1lOiBcIlwiLFxuICAgIGxvY2F0aW9uX25hbWU6IFwiXCIsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsb2NhdGlvbl9pbnZlbnRvcnk6IHtcbiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsXG4gICAgICBjb21wYW55X25hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBhZGRpdGlvbmFsX2F0dHJpYnV0ZXM6IFtdLFxuICAgIGludmVudG9yeV9wYXJ0czogW10sXG4gICAgYXNzb2NpYXRpb25zOiBbXSxcbiAgICBxdWFudGl0aWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGFzc2V0czogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczoge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBbcmVsc2hpcCwgc2V0cmVsc2hpcF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51Ziwgc2V0bWFudWZdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2ZW5kb3IsIHNldHZlbmRvcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nMiwgc2V0cHJhbG9hZGluZzJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIC8vZGVsZXRlXG4gIGNvbnN0IFttb2RhbGRlbGV0ZSwgc2V0bW9kYWxkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2RlbGV0ZSwgc2V0bG9hZGluZ2RlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vbm90ZXNcbiAgY29uc3QgW25vdGVzLCBzZXRub3Rlc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGFsbm90ZXMsIHNldG1vZGFsbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ25vdGVzLCBzZXRsb2FkaW5nbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2tvbmRpc2lcbiAgY29uc3QgW2tvbmRpc2ksIHNldGtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtub3Rla29uZGlzaSwgc2V0bm90ZWtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbGtvbmRpc2ksIHNldG1vZGFsa29uZGlzaV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5a29uZGlzaSwgc2V0ZGlzcGxheWtvbmRpc2ldID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5na29uZGlzaSwgc2V0bG9hZGluZ2tvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL3N0YXR1cyBwZW1ha2FpYW5cbiAgY29uc3QgW2NoYW5nZXVzYWdlLCBzZXRjaGFuZ2V1c2FnZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBub3RlczogXCJcIixcbiAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogXCJcIixcbiAgICBjb25uZWN0ZWRfaWQ6IFwiXCIsXG4gICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNhYmxlZHVzYWdlLCBzZXRkaXNhYmxlZHVzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbW9kYWx1c2FnZSwgc2V0bW9kYWx1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5dXNhZ2UsIHNldGRpc3BsYXl1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UsIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2VdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXNhZ2UsIHNldGxvYWRpbmd1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIGNvbnN0IFthZ2VudHMsIHNldGFnZW50c10gPSB1c2VTdGF0ZShbXSlcbiAgLy8gY29uc3QgW3JlcXVlc3RlcnMsIHNldHJlcXVlc3RlcnNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IFtkZXRhaWxsaXN0LCBzZXRkZXRhaWxsaXN0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscywgc2V0bW9kZWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9ucywgc2V0c3VibG9jYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvY2F0aW9uc2Rpc3BsYXksIHNldGxvY2F0aW9uc2Rpc3BsYXldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jYXRpb250cmlnZ2VyLCBzZXRzdWJsb2NhdGlvbnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWN0aXZpdHl0cmlnZ2VyLCBzZXRhY3Rpdml0eXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy9oZWxwZXJcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZWxldGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgICBydC5wdXNoKGAvaXRlbXNgKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVOb3Rlc0l0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ25vdGVzKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRJbnZlbnRvcnlOb3Rlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ25vdGVzKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJOb3RlcyBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH0/YWN0aXZlPWFjdGl2aXR5YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVLb25kaXNpSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5na29uZGlzaSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzQ29uZGl0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZWtvbmRpc2ksXG4gICAgICAgIHN0YXR1c19jb25kaXRpb246IGtvbmRpc2ksXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgS29uZGlzaSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVVc2FnZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3VzYWdlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9jaGFuZ2VTdGF0dXNVc2FnZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2V1c2FnZSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ndXNhZ2UoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy91c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5P2lkPSR7aXRlbWlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSBcImFkZGl0aW9uYWxfYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04ucGFyc2UoZG9jLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0bWFpbmRhdGEodCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICAgICAgICB2YXIgZGVsX21hbnVmID0gbnVsbDtcbiAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsXG4gICAgICAgICAgICAgID8gKGRlbF9tYW51ZiA9IG51bGwpXG4gICAgICAgICAgICAgIDogKGRlbF9tYW51ZiA9IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICApWzBdLmRlbGV0ZWRfYXQpO1xuICAgICAgICAgICAgc2V0bWFudWYoe1xuICAgICAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwXG4gICAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgICA6IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICAgIClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgaXNudWxsOiBkZWxfbWFudWYgIT09IG51bGwgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlczMudmVuZG9yX2lkID09PSBudWxsIHx8IHJlczMudmVuZG9yX2lkID09PSAwXG4gICAgICAgICAgICAgID8gc2V0dmVuZG9yKFwiLVwiKVxuICAgICAgICAgICAgICA6IHNldHZlbmRvcihcbiAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXT8ubmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRwcmFsb2FkaW5nMihmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRGaWx0ZXJNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgIT09IFwiXCIpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0Q2hhbmdlU3RhdHVzVXNhZ2VEZXRhaWxMaXN0P2lkPSR7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgID8gc2V0ZGV0YWlsbGlzdChbcmVzMi5kYXRhXSlcbiAgICAgICAgICAgIDogc2V0ZGV0YWlsbGlzdChyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NoYW5nZXVzYWdlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN1YmxvY2F0aW9udHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeURldGFpbExpc3Q/dHlwZV9pZD0ke2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgIHNldHN1YmxvY2F0aW9ucyhyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzdWJsb2NhdGlvbnRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRyZWxzaGlwKHJlczIuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczIuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktNSBweC00IGJvcmRlci10IGJvcmRlci1iIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LWdyYXktNDAwIG1iLTBcIj5JdGVtOjwvcD5cbiAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTIgdGV4dC0yeGwgbWItMCBtci0yMFwiPlxuICAgICAgICAgICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfSAtIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1yLTcgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPlN0YXR1cyBQZW1ha2FpYW46PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5dXNhZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTByZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc3RhdHVzX3VzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c191c2FnZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1c2FnZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5JbiBVc2VkPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gU3RvY2s8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5SZXBsYWNlbWVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+S29uZGlzaTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlrb25kaXNpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c19jb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0a29uZGlzaSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdyZXk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG5vdGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGFtYmFoIE5vdGVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgSGFwdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBoaWRkZW4gbWQ6YmxvY2tcIj5cbiAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgIHRhYlBvc2l0aW9uPXtgbGVmdGB9XG4gICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgb25UYWJDbGljaz17KGtleSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiYWN0aXZpdHlcIikge1xuICAgICAgICAgICAgICAgICAgc2V0YWN0aXZpdHl0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgYmxvY2sgbWQ6aGlkZGVuXCI+XG4gICAgICAgICAgICA8VGFicyB0YWJQb3NpdGlvbj17YHRvcGB9IGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn0+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIk92ZXJ2aWV3XCIga2V5PXtgb3ZlcnZpZXdgfT5cbiAgICAgICAgICAgICAgICA8T3ZlcnZpZXdcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBtYW51Zj17bWFudWZ9XG4gICAgICAgICAgICAgICAgICB2ZW5kb3I9e3ZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJLb25maWd1cmFzaSBQYXJ0XCIga2V5PXtga29uZmlndXJhc2lQYXJ0YH0+XG4gICAgICAgICAgICAgICAgPEtvbmZpZ3VyYXNpUGFydFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZzI9e3ByYWxvYWRpbmcyfVxuICAgICAgICAgICAgICAgICAgbW9kZWxzPXttb2RlbHN9XG4gICAgICAgICAgICAgICAgICBzZXRtb2RlbHM9e3NldG1vZGVsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIlJlbGF0aW9uc2hpcFwiIGtleT17YHJlbGF0aW9uc2hpcGB9PlxuICAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBc3NvY2lhdGlvblwiIGtleT17YGFzc29jaWF0aW9uYH0+XG4gICAgICAgICAgICAgICAgPEFzc29jaWF0aW9uXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFjdGl2aXR5XCIga2V5PXtgYWN0aXZpdHlgfT5cbiAgICAgICAgICAgICAgICA8QWNpdGl2dHlcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIGFjdGl2aXR5dHJpZ2dlcj17YWN0aXZpdHl0cmlnZ2VyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgUGVtYWthaWFuIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdXNhZ2V9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVc2FnZUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5ndXNhZ2V9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1c2FnZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBTdGF0dXMgUGVtYWthaWFuIDxzcGFuIGNsYXNzTmFtZT1cInVzYWdlbW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PkluIFVzZWQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5JbiBTdG9jazwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlJlcGxhY2VtZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNhZ2Vtb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGFuZ2V1c2FnZS5zdGF0dXNfdXNhZ2UgPT09IDEgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIERpZ3VuYWthbiBPbGVoIDxzcGFuIGNsYXNzTmFtZT1cImJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF90eXBlX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxfY29ubmVjdGVkX2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGxvY2F0aW9uc2Rpc3BsYXkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstMX0+QWdlbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ5bW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItMyBtbC01XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgTmFtYSB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmIFwiQWdlbnRcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmIFwiUmVxdWVzdGVyXCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyAmJiBcIkNvbXBhbnlcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hYnltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyA/IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0c3VibG9jYXRpb250cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bG9jYXRpb25zZGlzcGxheSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhbmdldXNhZ2UuY29ubmVjdGVkX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZCA9PT0gLTMgfHwgbG9jYXRpb25zZGlzcGxheSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWwtNVwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5hbWEgTG9rYXNpPC9wPlxuICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWNvbXBhbnl1c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e3N1YmxvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgbm90ZXM6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgS29uZGlzaSB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVLb25kaXNpSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdrb25kaXNpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsa29uZGlzaX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIEtvbmRpc2kgPHNwYW4gY2xhc3NOYW1lPVwia29uZGlzaW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2tvbmRpc2l9PlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rb25kaXNpbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRub3Rla29uZGlzaShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5cbiAgICAgICAgICAgICAgRm9ybSBUYW1iYWggTm90ZXMge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25vdGVzID09PSBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTm90ZXNJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ25vdGVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbm90ZXN9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezYwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0bm90ZXMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGl0ZW0gXCJ7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9IC17XCIgXCJ9XG4gICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxkZWxldGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxkZWxldGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZURlbGV0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ2RlbGV0ZSB9fVxuICAgICAgICB3aWR0aD17NzIwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi00XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBtZW1pbGlraSBJdGVtIFBhcnQgc2ViYWdhaSBiZXJpa3V0IDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9wYXJ0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubWFwKChkb2NlbXB0eSwgaWR4ZW1wdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHhlbXB0eX0+XG4gICAgICAgICAgICAgICAgICAgICAgLSA8c3Ryb25nPntkb2NlbXB0eS5pbnZlbnRvcnlfbmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIEl0ZW0gaW5pIHNlZGFuZyBtZW1pbGlraSBodWJ1bmdhbiBkZW5nYW4gaXRlbSBiZXJpa3V0OlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14c1wiPlxuICAgICAgICAgICAgICB7cmVsc2hpcC5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgcmVsc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpZHhyZWx9PlxuICAgICAgICAgICAgICAgICAgICAte1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2NyZWwudHlwZX0gLSB7ZG9jcmVsLmNvbm5lY3RlZF9kZXRhaWxfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICAgIERlbmdhbiBtZW5naGFwdXMgaXRlbSBpbmkgYWthbiBtZW5naGlsYW5na2FuIHNlbHVydWggaHVidW5nYW5cbiAgICAgICAgICAgICAgZGVuZ2FuIGl0ZW0gZGlhdGFzIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgY29uc3QgaXRlbWlkID0gcGFyYW1zLml0ZW1JZDtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtRGV0YWlsO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-656990793\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-656990793\" + \" \" + \"mb-0\",\n            children: [\"Asset Type dari Item Part yang ingin diganti\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-656990793\" + \" \" + \"namapart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 901,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 899,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-656990793\" + \" \" + \"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\",\n            children: datachanged.model_inventory.asset.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 903,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"656990793\",\n            children: \".namapart.jsx-656990793::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwNEJlLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy9kZXRhaWwvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbG9zZUNpcmNsZU91dGxpbmVkLFxuICBEZWxldGVPdXRsaW5lZCxcbiAgRG93bk91dGxpbmVkLFxuICBFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkLFxuICBTZWFyY2hPdXRsaW5lZCxcbiAgVXBPdXRsaW5lZCxcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEVtcHR5LFxuICBJbnB1dCxcbiAgTW9kYWwsXG4gIFBvcG92ZXIsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGFibGUsXG4gIFRhYnMsXG4gIFRpbWVsaW5lLFxuICBUb29sdGlwLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IE92ZXJ2aWV3ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBtYW51ZixcbiAgdmVuZG9yLFxuICBwcmFsb2FkaW5nLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMyLCBzZXRpbnZyZWxhdGlvbnMyXSA9IHVzZVN0YXRlKHt9KTtcblxuICAvL2hlbHBlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtYi04XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvXCI+T3ZlcnZpZXc8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZyA/IG51bGwgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgcnQucHVzaChgL2l0ZW1zL3VwZGF0ZS8ke2l0ZW1pZH1gKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgPFNwaW4gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCBteC01IHAtNSB3LTkvMTIgYm9yZGVyIHNoYWRvdy1tZCByb3VuZGVkLW1kIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TmFtYSBJdGVtOjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TW9kZWw6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPnttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZWwgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBNb2RlbCFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkFzc2V0IFR5cGU6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPlxuICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5NSUcgSUQ6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+U2VyaWFsIE51bWJlcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBcIlwiIHx8IG1haW5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TWFudWZhY3R1cmVyOjwvaDE+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihkb2NmaWwgPT4gZG9jZmlsLmlkID09PSBtYWluZGF0YS5tYW51ZmFjdHVyZXJfaWQpWzBdLmRlbGV0ZWRfYXQgIT09IG51bGxcbiAgICAgICAgICAgICAgbWFudWYuaXNudWxsID09PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTWFudWZhY3R1cmVyIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlZlbmRvcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS52ZW5kb3JfaWQgPT09IG51bGwgPyBcIi1cIiA6IHZlbmRvcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkxvY2F0aW9uOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEuaXNfY29uc3VtYWJsZSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgbWFpbmRhdGEucXVhbnRpdGllcy5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICB7aWR4ICsgMX0uIHtkb2MubmFtZX0gLSB7ZG9jLnF1YW50aXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHttYWluZGF0YS5sb2NhdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5sb2NhdGlvbl9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkRlc2tyaXBzaTo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5kZXNrcmlwc2kgPT09IFwiXCIgfHwgbWFpbmRhdGEuZGVza3JpcHNpID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuZGVza3JpcHNpfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICAgIHttYWluZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKChkb2Njb2x1bW5zLCBpZHhjb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZHhjb2x1bW5zfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgbWItNSAke1xuICAgICAgICAgICAgICAgICAgaWR4Y29sdW1ucyA9PT0gMCA/IGBtdC01YCA6IGBgXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5uYW1lfTpcbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Pntkb2Njb2x1bW5zLnZhbHVlLm9wc2lbZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0XX08Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLnZhbHVlLm9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChfLCBpZHhmaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2Njb2x1bW5zLnZhbHVlLmRlZmF1bHQuaW5jbHVkZXMoaWR4ZmlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge21vbWVudChkb2Njb2x1bW5zLnZhbHVlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZX08Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5jb25zdCBLb25maWd1cmFzaVBhcnQgPSAoe1xuICBpbml0UHJvcHMsXG4gIGl0ZW1pZCxcbiAgaW52cmVsYXRpb25zLFxuICBtYWluZGF0YSxcbiAgcHJhbG9hZGluZzIsXG4gIG1vZGVscyxcbiAgc2V0bW9kZWxzLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuXG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW21haW5wYXJ0ZGF0YSwgc2V0bWFpbnBhcnRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdwYXJ0LCBzZXRwcmFsb2FkaW5ncGFydF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVmaWx0ZXJhY3QsIHNldGFzc2V0dHlwZWZpbHRlcmFjdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3NldHR5cGV2YWx1ZSwgc2V0YXNzZXR0eXBldmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RlbGZpbHRlcmFjdCwgc2V0bW9kZWxmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx2YWx1ZSwgc2V0bW9kZWx2YWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0cmlnZ2VyLCBzZXRkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZSgwKTtcbiAgLy9jaGFuZ2VkIGRhbiByZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVwbGFjZW1lbnRzLCBzZXRkYXRhcmVwbGFjZW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BvcG92ZXIsIHNldHBvcG92ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2NoYW5nZWRcbiAgY29uc3QgW2RhdGFjaGFuZ2VkLCBzZXRkYXRhY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IG51bGwsXG4gICAgbW9kZWxfaWQ6IG51bGwsXG4gICAgaW52ZW50b3J5X25hbWU6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIHN0YXR1c191c2FnZToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICBtb2RlbF9pbnZlbnRvcnk6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIGFzc2V0OiB7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW2RhdGFBcGljaGFuZ2VkLCBzZXRkYXRhQXBpY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgcmVwbGFjZW1lbnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxjaGFuZ2VkLCBzZXRtb2RhbGNoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRjaGFuZ2VkLCBzZXRkaXNhYmxlZGNoYW5nZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlZCwgc2V0bG9hZGluZ2NoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdHJpZ2dlcmNoYW5nZWQsIHNldHRyaWdnZXJjaGFuZ2VkXSA9IHVzZVN0YXRlKC0xKTtcbiAgLy9yZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVtb3ZlZCwgc2V0ZGF0YXJlbW92ZWRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGF0YUFwaXJlbW92ZWQsIHNldGRhdGFBcGlyZW1vdmVkXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogMCxcbiAgICBpbnZlbnRvcnlfcGFydF9pZDogMCxcbiAgICBub3RlczogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFttb2RhbHJlbW92ZWQsIHNldG1vZGFscmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHJlbW92ZWQsIHNldGRpc2FibGVkcmVtb3ZlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdyZW1vdmVkLCBzZXRsb2FkaW5ncmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2JhY2t1cG1vZGVscywgc2V0YmFja3VwbW9kZWxzXSA9IHVzZVN0YXRlKG1vZGVscyk7XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAvLyB7XG4gICAgLy8gICAgIHRpdGxlOiAnTmFtYSBJdGVtJyxcbiAgICAvLyAgICAgZGF0YUluZGV4OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vICAgICBrZXk6ICdpbnZlbnRvcnlfbmFtZScsXG4gICAgLy8gfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNSUcgSURcIixcbiAgICAgIGRhdGFJbmRleDogXCJtaWdfaWRcIixcbiAgICAgIGtleTogXCJtaWdfaWRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlNlcmlhbCBOdW1iZXJcIixcbiAgICAgIGRhdGFJbmRleDogXCJzZXJpYWxfbnVtYmVyXCIsXG4gICAgICBrZXk6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PntyZWNvcmQuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IFwiLVwiIDogcmVjb3JkLnNlcmlhbF9udW1iZXJ9PC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNb2RlbFwiLFxuICAgICAgZGF0YUluZGV4OiBcIm1vZGVsX25hbWVcIixcbiAgICAgIGtleTogXCJtb2RlbF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkubmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQXNzZXQgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcImFzc2V0X25hbWVcIixcbiAgICAgIGtleTogXCJhc3NldF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuYXNzZXRfbmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgIHZpc2libGU9e3BvcG92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblZpc2libGVDaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiBgMHB4YCwgbWFyZ2luOiBgMHB4YCB9fVxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0cG9wb3ZlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGByZWRgLCBmb250U2l6ZTogYDEuMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhcmVtb3ZlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaXJlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1haW5wYXJ0ZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlfcGFydF9pZDogcmVjb3JkLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb3BvdmVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFya2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFjaGFuZ2VkKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY2hhbmdlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRyaWdnZXJjaGFuZ2VkKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbnRpa2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+S2VsdWFya2FuIFBhcnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+R2FudGlrYW4gUGFydDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hlbHBlclxuICAvLzEgbnlhIGxhZ2kgYWRhIGRpIHVzZUVmZmVjdFxuICBjb25zdCByZWN1cnNpdmVGbGF0dGVuQXJyID0gKGRhdGFhc3NldHMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBkYXRhYXNzZXRzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZCk7XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZWN1cnNpdmVGbGF0dGVuQXJyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBmdW5jdGlvbiByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhYVtpXVtcImtleVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXCJ2YWx1ZVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXG4gICAgICAgIFwidGl0bGVcIlxuICAgICAgXSA9IGAke2RhdGFhW2ldLm1pZ19pZH0gLSAke2RhdGFhW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgZGF0YWFbaV1bXCJjaGlsZHJlblwiXSA9IGRhdGFhW2ldLmludmVudG9yeV9yZXBsYWNlbWVudF9wYXJ0cztcbiAgICAgIGRlbGV0ZSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBpZiAoZGF0YWFbaV0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWFbaV0uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YWE7XG4gIH1cblxuICAvL2hhbmRsZXJcbiAgY29uc3QgYXNzZXRQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQgPSAoZG9jLCBhc3NldGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZCA9PT0gTnVtYmVyKGFzc2V0aWQpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIGFzc2V0UGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZG9jW2ldLmNoaWxkcmVuLCBhc3NldGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbW9kZWxQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwgPSAoZG9jLCBtb2RlbGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2lkID09PSBtb2RlbGlkKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG1vZGVsUGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZG9jW2ldLmNoaWxkcmVuLCBtb2RlbGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbmFtZVBhcnQgPSBbXTtcbiAgY29uc3QgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lID0gKGRvYywgbmFtZSkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5pbnZlbnRvcnlfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgbmFtZVBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZG9jW2ldLmNoaWxkcmVuLCBuYW1lKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgLy9kZWxpdmVyIEFQSVxuICBjb25zdCBoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0ID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdjaGFuZ2VkKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9yZXBsYWNlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpY2hhbmdlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpZ2FudGlcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVSZW1vdmVJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5ncmVtb3ZlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVtb3ZlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpcmVtb3ZlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ncmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpa2VsdWFya2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIGFzc2V0IHR5cGVcbiAgY29uc3Qgb25DaGFuZ2VBc3NldFR5cGUgPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRhc3NldHR5cGVmaWx0ZXJhY3QoZmFsc2UpO1xuICAgICAgc2V0bW9kZWxzKGJhY2t1cG1vZGVscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9MTAwJmFzc2V0X2lkPSR7aWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwID8gc2V0bW9kZWxzKFtdKSA6IHNldG1vZGVscyhyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0YXNzZXR0eXBldmFsdWUoaWQpO1xuICAgIH1cbiAgfTtcbiAgLy9zZWFyY2ggbW9kZWxcbiAgY29uc3Qgb25DaGFuZ2VNb2RlbCA9IChpZG1vZGVsKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZG1vZGVsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldG1vZGVsZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0bW9kZWx2YWx1ZShpZG1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAoYXNzZXR0eXBlZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRhdGF0ZW1wLCBhc3NldHR5cGV2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IGFzc2V0UGFydDtcbiAgICB9XG4gICAgaWYgKG1vZGVsZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Nb2RlbChkYXRhdGVtcCwgbW9kZWx2YWx1ZSlcbiAgICAgIHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBtb2RlbFBhcnQ7XG4gICAgfVxuICAgIGlmIChuYW1hc2VhcmNoYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZGF0YXRlbXAsIG5hbWF2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IG5hbWVQYXJ0O1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBjb25zdCByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuID0gKHJzYykgPT4ge1xuICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcnNjW2ldLmtleSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS52YWx1ZSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS50aXRsZSA9IGAke3JzY1tpXS5taWdfaWR9IC0gJHtyc2NbaV0ubW9kZWxfaW52ZW50b3J5Py5uYW1lfWA7XG4gICAgICAgICAgICByc2NbaV0uY2hpbGRyZW4gPSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5pbnZlbnRvcnlfcGFydHM7XG4gICAgICAgICAgICBpZiAocnNjW2ldLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4ucnNjW2ldLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJzY1tpXS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJlczMuaW52ZW50b3J5X3BhcnRzKTtcbiAgICAgICAgc2V0bWFpbnBhcnRkYXRhKHtcbiAgICAgICAgICAuLi5yZXMzLFxuICAgICAgICAgIGludmVudG9yeV9wYXJ0czogdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldGRhdGF0YWJsZSh0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMih0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMyh0KTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ3BhcnQoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmlnZ2VyY2hhbmdlZCAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVwbGFjZW1lbnRzP2lkPSR7ZGF0YWNoYW5nZWQubW9kZWxfaW52ZW50b3J5LmFzc2V0X2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFwZGF0YSA9IHJlY3Vyc2l2ZU1vZGlmRGF0YShyZXMyLmRhdGEpO1xuICAgICAgICAgIHNldGRhdGFyZXBsYWNlbWVudHMobWFwZGF0YSk7XG4gICAgICAgICAgaWYgKG1hcGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRkaXNhYmxlZGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdHJpZ2dlcmNoYW5nZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPktvbmZpZ3VyYXNpIFBhcnQ8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIC8qY29uc29sZS5sb2cobWFpbnBhcnRkYXRhKTsgY29uc29sZS5sb2coZGF0YXJlbW92ZWQpKi8gcnQucHVzaChcbiAgICAgICAgICAgICAgICBgL2l0ZW1zL2NyZWF0ZXBhcnQvJHtpdGVtaWR9P25hbWE9JHttYWlucGFydGRhdGEubWlnX2lkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nMiA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBtci0xXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAsIG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBOYW1hIEl0ZW1cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2VTZWFyY2goZSl9XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQXNzZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZShleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17ZmV0Y2hpbmdtb2RlbCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgIH0vZ2V0RmlsdGVyTW9kZWxzP25hbWU9JHt2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIn1gLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttb2RlbHMubWFwKChkb2Ntb2RlbHMsIGlkeG1vZGVscykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvY21vZGVscy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY21vZGVscy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkZpbmFsQ2xpY2t9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPFRhYmxlXG4gICAgICAgIGxvYWRpbmc9e3ByYWxvYWRpbmdwYXJ0fVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gUGVyZ2FudGlhbiBQYXJ0IFwie2RhdGFjaGFuZ2VkLmludmVudG9yeV9uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0fVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjaGFuZ2VkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCB5YW5nIEluZ2luIERpZ2FudGl7XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGF0YWJsZTN9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZGF0YWNoYW5nZWQua2V5fVxuICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIEFzc2V0IFR5cGUgZGFyaSBJdGVtIFBhcnQgeWFuZyBpbmdpbiBkaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAge2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCBQZW5nZ2FudGkgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhY2hhbmdlZC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGFyZXBsYWNlbWVudHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFyZXBsYWNlbWVudHMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLmludmVudG9yeV9uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgPC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFBcGljaGFuZ2VkLm5vdGVzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5nZWx1YXJrYW4gaXRlbSBcIlxuICAgICAgICAgICAge2RhdGFyZW1vdmVkLmludmVudG9yeV9uYW1lfVwiIGRhcmkgXCJ7bWFpbnBhcnRkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxyZW1vdmVkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFscmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlUmVtb3ZlSXRlbVBhcnR9XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3JlbW92ZWQgfX1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRhdGFBcGlyZW1vdmVkKHsgLi4uZGF0YUFwaXJlbW92ZWQsIG5vdGVzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgUmVsYXRpb25zaGlwID0gKHsgaW5pdFByb3BzLCBtYWluZGF0YSwgaXRlbWlkIH0pID0+IHtcbiAgLy9pbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtsb2FkaW5ncmVsLCBzZXRsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdyZWwsIHNldHByYWxvYWRpbmdyZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbZGF0YUFwaWRlbGV0ZSwgc2V0ZGF0YUFwaWRlbGV0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25kYXRhZGVsZXRlLCBzZXRyZWxhdGlvbmRhdGFkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgdGlwZTogXCJcIixcbiAgICBrb25la3NpOiBcIlwiLFxuICB9KTtcbiAgLy9hZGRcbiAgY29uc3QgW2RhdGFBcGlhZGQsIHNldGRhdGFBcGlhZGRdID0gdXNlU3RhdGUoe1xuICAgIHN1YmplY3RfaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgIHR5cGVfaWQ6IG51bGwsXG4gICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNwbGF5ZGF0YXJlbGF0aW9ucywgc2V0ZGlzcGxheWRhdGFyZWxhdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbcmVsYXRpb25uYW1lYWRkLCBzZXRyZWxhdGlvbm5hbWVhZGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbm5hbWVkZGFkZCwgc2V0cmVsYXRpb25uYW1lZGRhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlkeGFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkLCBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkXSA9XG4gICAgdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGV0YWlsdGlwZWFkZCwgc2V0ZGV0YWlsdGlwZWFkZF0gPSB1c2VTdGF0ZSgtMTApO1xuICBjb25zdCBbZGV0YWlsdGlwZWRhdGFhZGQsIHNldGRldGFpbHRpcGVkYXRhYWRkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGFsYWRkLCBzZXRtb2RhbGFkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZCwgc2V0ZGlzYWJsZWRhZGRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nYWRkLCBzZXRsb2FkaW5nYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZldGNoaW5nbW9kZWwsIHNldGZldGNoaW5nbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jZGF0YSwgc2V0c3VibG9jZGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N1YmxvY3RyaWcsIHNldHN1YmxvY3RyaWddID0gdXNlU3RhdGUoLTEpO1xuXG4gIC8vZGVjbGFyYXRpb25cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJSZWxhdGlvbnNoaXAgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgICBrZXk6IFwicmVsYXRpb25zaGlwX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIk5hbWFcIixcbiAgICAgIGRhdGFJbmRleDogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICAgIGtleTogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJ0eXBlXCIsXG4gICAgICBrZXk6IFwidHlwZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWRlbGV0ZSh7IGlkOiByZWNvcmQuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25kYXRhZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZC5yZWxhdGlvbnNoaXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGU6IHJlY29yZC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAga29uZWtzaTogcmVjb3JkLmNvbm5lY3RlZF9kZXRhaWxfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogYDEuMnJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogYHBvaW50ZXJgLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIC8vaGFuZGxlclxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgZGF0YXRlbXAgPSBkYXRhdGVtcC5maWx0ZXIoKGZsdCkgPT4ge1xuICAgICAgICByZXR1cm4gZmx0LmNvbm5lY3RlZF9kZXRhaWxfbmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKG5hbWF2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdkZWxldGUodHJ1ZSk7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlUmVsYXRpb25zaGlwSW52ZW50b3J5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpZGVsZXRlKSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgYmVyaGFzaWwgZGloYXB1c1wiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdhZGQodHJ1ZSk7XG4gICAgZGVsZXRlIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhQXBpYWRkKVxuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRSZWxhdGlvbnNoaXBJbnZlbnRvcmllc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWFkZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nYWRkKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxhZGQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICAgICAgICAgIGlzX2ludmVyc2U6IG51bGwsXG4gICAgICAgICAgICB0eXBlX2lkOiBudWxsLFxuICAgICAgICAgICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiBudWxsLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChcIlwiKTtcbiAgICAgICAgICBzZXRzdWJsb2NkYXRhKG51bGwpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoLTEpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoLTEpO1xuICAgICAgICAgIHNldHN1YmxvY3RyaWcoLTEpO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgSXRlbSBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGF0cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0cHJhbG9hZGluZ3JlbCh0cnVlKTtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRkYXRhdGFibGUoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTIoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTMoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldHByYWxvYWRpbmdyZWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2N0cmlnICE9PSAtMSkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtzdWJsb2N0cmlnfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRldGFpbHRpcGVhZGQgIT09IC0xMCkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkYXRhQXBpYWRkLnR5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKFtyZXMyLmRhdGFdKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0xICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTQgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RldGFpbHRpcGVhZGQsIHN1YmxvY3RyaWddKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG8gbXItMVwiPlJlbGF0aW9uc2hpcDwvaDE+XG4gICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5kZWxldGVkX2F0ICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkFzc2V0IFR5cGUgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBBc3NldCBUeXBlIVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTsgLypydC5wdXNoKGAvaXRlbXMvY3JlYXRlcmVsYXRpb25zaGlwLyR7aXRlbWlkfT9uYW1hPSR7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9JmFzc2V0X2lkPSR7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmlkfWApKi9cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgVGFtYmFoXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZ3JlbCA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMTEgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncmVsfVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBSZWxhdGlvbnNoaXAgYmVyaWt1dCBpbmkgZGFyaSBcIlxuICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGJvcmRlci1iIG1iLTVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5SZWxhdGlvbnNoaXAgVHlwZTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMFwiPlRpcGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUudGlwZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5JdGVtOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLmtvbmVrc2l9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiIG9uQ2hhbmdlPXsoZSkgPT4ge319PjwvSW5wdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIFJlbGF0aW9uc2hpcCBcInttYWluZGF0YS5uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApOyAvKnNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCByZWxhdGlvbnNoaXBfaWQ6IG51bGwsIHR5cGVfaWQ6IG51bGwsIGNvbm5lY3RlZF9pZDogbnVsbCB9KSovIC8qY29uc29sZS5sb2coZGF0YUFwaWFkZCkqL1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJlbGF0aW9uc2hpcEl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nYWRkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsYWRkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NzYwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFJlbGF0aW9uc2hpcCBUeXBlIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYm9yZGVyIHAtMiBob3Zlcjpib3JkZXItcHJpbWFyeSByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZCgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9ubmFtZWFkZH08L3A+XG4gICAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgICA8VXBPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPERvd25PdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBJbnZlcnNlIFJlbGF0aW9uc2hpcCBUeXBlXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZGlzcGxheWRhdGFyZWxhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctdGVybmFyeSBjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsYWNrIHAtMyB3LTYvMTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlkeGFkZCA9PT0gaWR4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IG51bGwgfHwgZGF0YUFwaWFkZC50eXBlX2lkID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZGFkZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLnJlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbnZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmludmVyc2VfcmVsYXRpb25zaGlwX3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFRpcGUgPHNwYW4gY2xhc3NOYW1lPVwidGlwZXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpYWRkLnR5cGVfaWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgdHlwZV9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5yZWxhdGlvbnNoaXBfaWQgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVhZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgID8gKHNldHN1YmxvY3RyaWcoLTEpLCBzZXRzdWJsb2NkYXRhKG51bGwpKVxuICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0zfT5Db21wYW55PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTR9PkFzc2V0IFR5cGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXBlcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5iYWNrdXBfY29ubmVjdGVkX2lkcyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHNbMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cz17WzFdfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17ZGV0YWlsdGlwZWRhdGFhZGR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRzdWJsb2N0cmlnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlPC9wPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgZGVuZ2FuIE1vZGVsIElEXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZtb2RlbF9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3N1YmxvY2RhdGEgIT09IG51bGwgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlIChTdWJsb2thc2kpPC9wPlxuICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NkYXRhfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIGNvbm5lY3RlZF9pZHM6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQXNzb2NpYXRpb24gPSAoeyBpbml0UHJvcHMsIGl0ZW1pZCwgbWFpbmRhdGEsIHByYWxvYWRpbmcgfSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFzc29jaWF0aW9uPC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHB4LTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBtYWluZGF0YS5hc3NvY2lhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHttYWluZGF0YS5hc3NvY2lhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgc2hhZG93LW1kIHB5LTQgcHgtNSBib3JkZXIgbWItNCBmbGV4IGp1c3RpZnktYmV0d2VlbiB3LTEwLzEyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcnQucHVzaChgL3RpY2tldHMvZGV0YWlsLyR7ZG9jLmlkfT9hY3RpdmU9ZGV0YWlsSXRlbWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+VGlja2V0IE51bWJlcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MudGlja2V0X25hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLXJlZC0xMDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gNCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQWNpdGl2dHkgPSAoe1xuICBpdGVtaWQsXG4gIGluaXRQcm9wcyxcbiAgbWFpbmRhdGEsXG4gIGludnJlbGF0aW9ucyxcbiAgcHJhbG9hZGluZyxcbiAgYWN0aXZpdHl0cmlnZ2VyLFxufSkgPT4ge1xuICBjb25zdCBbZGF5bG9ncywgc2V0ZGF5bG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt3ZWVrbG9ncywgc2V0d2Vla2xvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9yZWxvZ3MsIHNldG1vcmVsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdsb2dzLCBzZXRwcmFsb2FkaW5nbG9nc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2ludmVudG9yaWVzLCBzZXRpbnZlbnRvcmllc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRwcmFsb2FkaW5nbG9ncyh0cnVlKTtcblxuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFjdGl2aXR5SW52ZW50b3J5TG9ncz9pZD0ke2l0ZW1pZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgZGF5bG9nc21hcCA9IHJlczIuZGF0YS5kYXlfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gRGloYXB1czogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB3ZWVrbG9nc21hcCA9IHJlczIuZGF0YS53ZWVrX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1vcmVsb2dzbWFwID0gcmVzMi5kYXRhLmVsc2VfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXlsb2dzKGRheWxvZ3NtYXApO1xuICAgICAgICBzZXR3ZWVrbG9ncyh3ZWVrbG9nc21hcCk7XG4gICAgICAgIHNldG1vcmVsb2dzKG1vcmVsb2dzbWFwKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgLy8gLnRoZW4ocmVzMyA9PiB7XG4gICAgLy8gICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLCB7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgIC8vICAgICAgICAgaGVhZGVyczoge1xuICAgIC8vICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLy8gICAgICAgICAudGhlbihyZXM0ID0+IHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgY29uY2F0YXJyID0gcmVzNC5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzNC5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG5cbiAgICAvLyAgICAgICAgICAgICB2YXIgbG9nczJtYXAgPSByZXMzLmRhdGEucmVsYXRpb25zaGlwLm1hcCgoZG9jcmVsLCBpZHhyZWwpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZW5ldzIgPSBtb21lbnQoZG9jcmVsLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdCgnTExMJylcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGRlc2NuZXcyID0gJydcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGlkbG9nbmV3ID0gLTFcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGVzYzIgPSBkb2NyZWwuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBpZGxvZ25ldyA9IGNvbmNhdGFyci5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gZG9jcmVsLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pZClbMF0gOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHt0eXBlb2YgKGlkbG9nbmV3KSA9PT0gJ3VuZGVmaW5lZCcgPyBcIihTdWRhaCBEaWhhcHVzIGxhZ2kpXCIgOiBgJHtpZGxvZ25ldy5yZWxhdGlvbnNoaXB9YH1cImAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnRGVsZXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcGAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAuLi5kb2NyZWwsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlbmV3MixcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3MlxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICBzZXRsb2dzMihsb2dzMm1hcClcbiAgICAvLyAgICAgICAgICAgICBzZXRwcmFsb2FkaW5nbG9nczIoZmFsc2UpXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vIH0pXG4gIH0sIFthY3Rpdml0eXRyaWdnZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFjdGl2aXR5PC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5IYXJpIEluaTwvaDE+XG4gICAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogZGF5bG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7ZGF5bG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IHdlZWtsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIHt3ZWVrbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctNi8xMlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+TWluZ2d1IExhbHU8L2gxPlxuICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IG1vcmVsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIHttb3JlbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUaW1lbGluZS5JdGVtIGxhYmVsPXtkb2Nsb2cuZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbG9nLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZWgge2RvY2xvZy5jYXVzZXJfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IEl0ZW1EZXRhaWwgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8xLiBJbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBhY3RpdmVUYWIgPSBcIm92ZXJ2aWV3XCI7XG4gIGNvbnN0IHsgYWN0aXZlIH0gPSBydC5xdWVyeTtcbiAgaWYgKGFjdGl2ZSkge1xuICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZTtcbiAgfVxuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMiwgMik7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiRGV0YWlsIEl0ZW1cIjtcbiAgY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xuXG4gIC8vdXNlU3RhdGVcbiAgY29uc3QgW21haW5kYXRhLCBzZXRtYWluZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiBcIlwiLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgY3JlYXRlZF9hdDogXCJcIixcbiAgICB1cGRhdGVkX2F0OiBcIlwiLFxuICAgIGRlbGV0ZWRfYXQ6IFwiXCIsXG4gICAgYXNzZXRfbmFtZTogXCJcIixcbiAgICBtb2RlbF9uYW1lOiBcIlwiLFxuICAgIGxvY2F0aW9uX25hbWU6IFwiXCIsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsb2NhdGlvbl9pbnZlbnRvcnk6IHtcbiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsXG4gICAgICBjb21wYW55X25hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBhZGRpdGlvbmFsX2F0dHJpYnV0ZXM6IFtdLFxuICAgIGludmVudG9yeV9wYXJ0czogW10sXG4gICAgYXNzb2NpYXRpb25zOiBbXSxcbiAgICBxdWFudGl0aWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGFzc2V0czogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczoge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBbcmVsc2hpcCwgc2V0cmVsc2hpcF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51Ziwgc2V0bWFudWZdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2ZW5kb3IsIHNldHZlbmRvcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nMiwgc2V0cHJhbG9hZGluZzJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIC8vZGVsZXRlXG4gIGNvbnN0IFttb2RhbGRlbGV0ZSwgc2V0bW9kYWxkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2RlbGV0ZSwgc2V0bG9hZGluZ2RlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vbm90ZXNcbiAgY29uc3QgW25vdGVzLCBzZXRub3Rlc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGFsbm90ZXMsIHNldG1vZGFsbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ25vdGVzLCBzZXRsb2FkaW5nbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2tvbmRpc2lcbiAgY29uc3QgW2tvbmRpc2ksIHNldGtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtub3Rla29uZGlzaSwgc2V0bm90ZWtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbGtvbmRpc2ksIHNldG1vZGFsa29uZGlzaV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5a29uZGlzaSwgc2V0ZGlzcGxheWtvbmRpc2ldID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5na29uZGlzaSwgc2V0bG9hZGluZ2tvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL3N0YXR1cyBwZW1ha2FpYW5cbiAgY29uc3QgW2NoYW5nZXVzYWdlLCBzZXRjaGFuZ2V1c2FnZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBub3RlczogXCJcIixcbiAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogXCJcIixcbiAgICBjb25uZWN0ZWRfaWQ6IFwiXCIsXG4gICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNhYmxlZHVzYWdlLCBzZXRkaXNhYmxlZHVzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbW9kYWx1c2FnZSwgc2V0bW9kYWx1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5dXNhZ2UsIHNldGRpc3BsYXl1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UsIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2VdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXNhZ2UsIHNldGxvYWRpbmd1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIGNvbnN0IFthZ2VudHMsIHNldGFnZW50c10gPSB1c2VTdGF0ZShbXSlcbiAgLy8gY29uc3QgW3JlcXVlc3RlcnMsIHNldHJlcXVlc3RlcnNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IFtkZXRhaWxsaXN0LCBzZXRkZXRhaWxsaXN0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscywgc2V0bW9kZWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9ucywgc2V0c3VibG9jYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvY2F0aW9uc2Rpc3BsYXksIHNldGxvY2F0aW9uc2Rpc3BsYXldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jYXRpb250cmlnZ2VyLCBzZXRzdWJsb2NhdGlvbnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWN0aXZpdHl0cmlnZ2VyLCBzZXRhY3Rpdml0eXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy9oZWxwZXJcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZWxldGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgICBydC5wdXNoKGAvaXRlbXNgKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVOb3Rlc0l0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ25vdGVzKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRJbnZlbnRvcnlOb3Rlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ25vdGVzKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJOb3RlcyBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH0/YWN0aXZlPWFjdGl2aXR5YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVLb25kaXNpSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5na29uZGlzaSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzQ29uZGl0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZWtvbmRpc2ksXG4gICAgICAgIHN0YXR1c19jb25kaXRpb246IGtvbmRpc2ksXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgS29uZGlzaSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVVc2FnZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3VzYWdlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9jaGFuZ2VTdGF0dXNVc2FnZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2V1c2FnZSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ndXNhZ2UoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy91c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5P2lkPSR7aXRlbWlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSBcImFkZGl0aW9uYWxfYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04ucGFyc2UoZG9jLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0bWFpbmRhdGEodCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICAgICAgICB2YXIgZGVsX21hbnVmID0gbnVsbDtcbiAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsXG4gICAgICAgICAgICAgID8gKGRlbF9tYW51ZiA9IG51bGwpXG4gICAgICAgICAgICAgIDogKGRlbF9tYW51ZiA9IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICApWzBdLmRlbGV0ZWRfYXQpO1xuICAgICAgICAgICAgc2V0bWFudWYoe1xuICAgICAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwXG4gICAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgICA6IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICAgIClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgaXNudWxsOiBkZWxfbWFudWYgIT09IG51bGwgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlczMudmVuZG9yX2lkID09PSBudWxsIHx8IHJlczMudmVuZG9yX2lkID09PSAwXG4gICAgICAgICAgICAgID8gc2V0dmVuZG9yKFwiLVwiKVxuICAgICAgICAgICAgICA6IHNldHZlbmRvcihcbiAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXT8ubmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRwcmFsb2FkaW5nMihmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRGaWx0ZXJNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgIT09IFwiXCIpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0Q2hhbmdlU3RhdHVzVXNhZ2VEZXRhaWxMaXN0P2lkPSR7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgID8gc2V0ZGV0YWlsbGlzdChbcmVzMi5kYXRhXSlcbiAgICAgICAgICAgIDogc2V0ZGV0YWlsbGlzdChyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NoYW5nZXVzYWdlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN1YmxvY2F0aW9udHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeURldGFpbExpc3Q/dHlwZV9pZD0ke2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgIHNldHN1YmxvY2F0aW9ucyhyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzdWJsb2NhdGlvbnRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRyZWxzaGlwKHJlczIuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczIuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktNSBweC00IGJvcmRlci10IGJvcmRlci1iIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LWdyYXktNDAwIG1iLTBcIj5JdGVtOjwvcD5cbiAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTIgdGV4dC0yeGwgbWItMCBtci0yMFwiPlxuICAgICAgICAgICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfSAtIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1yLTcgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPlN0YXR1cyBQZW1ha2FpYW46PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5dXNhZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTByZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc3RhdHVzX3VzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c191c2FnZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1c2FnZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5JbiBVc2VkPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gU3RvY2s8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5SZXBsYWNlbWVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+S29uZGlzaTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlrb25kaXNpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c19jb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0a29uZGlzaSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdyZXk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG5vdGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGFtYmFoIE5vdGVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgSGFwdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBoaWRkZW4gbWQ6YmxvY2tcIj5cbiAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgIHRhYlBvc2l0aW9uPXtgbGVmdGB9XG4gICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgb25UYWJDbGljaz17KGtleSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiYWN0aXZpdHlcIikge1xuICAgICAgICAgICAgICAgICAgc2V0YWN0aXZpdHl0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgYmxvY2sgbWQ6aGlkZGVuXCI+XG4gICAgICAgICAgICA8VGFicyB0YWJQb3NpdGlvbj17YHRvcGB9IGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn0+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIk92ZXJ2aWV3XCIga2V5PXtgb3ZlcnZpZXdgfT5cbiAgICAgICAgICAgICAgICA8T3ZlcnZpZXdcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBtYW51Zj17bWFudWZ9XG4gICAgICAgICAgICAgICAgICB2ZW5kb3I9e3ZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJLb25maWd1cmFzaSBQYXJ0XCIga2V5PXtga29uZmlndXJhc2lQYXJ0YH0+XG4gICAgICAgICAgICAgICAgPEtvbmZpZ3VyYXNpUGFydFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZzI9e3ByYWxvYWRpbmcyfVxuICAgICAgICAgICAgICAgICAgbW9kZWxzPXttb2RlbHN9XG4gICAgICAgICAgICAgICAgICBzZXRtb2RlbHM9e3NldG1vZGVsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIlJlbGF0aW9uc2hpcFwiIGtleT17YHJlbGF0aW9uc2hpcGB9PlxuICAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBc3NvY2lhdGlvblwiIGtleT17YGFzc29jaWF0aW9uYH0+XG4gICAgICAgICAgICAgICAgPEFzc29jaWF0aW9uXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFjdGl2aXR5XCIga2V5PXtgYWN0aXZpdHlgfT5cbiAgICAgICAgICAgICAgICA8QWNpdGl2dHlcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIGFjdGl2aXR5dHJpZ2dlcj17YWN0aXZpdHl0cmlnZ2VyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgUGVtYWthaWFuIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdXNhZ2V9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVc2FnZUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5ndXNhZ2V9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1c2FnZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBTdGF0dXMgUGVtYWthaWFuIDxzcGFuIGNsYXNzTmFtZT1cInVzYWdlbW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PkluIFVzZWQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5JbiBTdG9jazwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlJlcGxhY2VtZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNhZ2Vtb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGFuZ2V1c2FnZS5zdGF0dXNfdXNhZ2UgPT09IDEgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIERpZ3VuYWthbiBPbGVoIDxzcGFuIGNsYXNzTmFtZT1cImJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF90eXBlX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxfY29ubmVjdGVkX2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGxvY2F0aW9uc2Rpc3BsYXkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstMX0+QWdlbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ5bW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItMyBtbC01XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgTmFtYSB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmIFwiQWdlbnRcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmIFwiUmVxdWVzdGVyXCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyAmJiBcIkNvbXBhbnlcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hYnltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyA/IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0c3VibG9jYXRpb250cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bG9jYXRpb25zZGlzcGxheSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhbmdldXNhZ2UuY29ubmVjdGVkX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZCA9PT0gLTMgfHwgbG9jYXRpb25zZGlzcGxheSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWwtNVwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5hbWEgTG9rYXNpPC9wPlxuICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWNvbXBhbnl1c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e3N1YmxvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgbm90ZXM6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgS29uZGlzaSB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVLb25kaXNpSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdrb25kaXNpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsa29uZGlzaX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIEtvbmRpc2kgPHNwYW4gY2xhc3NOYW1lPVwia29uZGlzaW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2tvbmRpc2l9PlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rb25kaXNpbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRub3Rla29uZGlzaShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5cbiAgICAgICAgICAgICAgRm9ybSBUYW1iYWggTm90ZXMge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25vdGVzID09PSBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTm90ZXNJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ25vdGVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbm90ZXN9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezYwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0bm90ZXMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGl0ZW0gXCJ7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9IC17XCIgXCJ9XG4gICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxkZWxldGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxkZWxldGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZURlbGV0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ2RlbGV0ZSB9fVxuICAgICAgICB3aWR0aD17NzIwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi00XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBtZW1pbGlraSBJdGVtIFBhcnQgc2ViYWdhaSBiZXJpa3V0IDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9wYXJ0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubWFwKChkb2NlbXB0eSwgaWR4ZW1wdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHhlbXB0eX0+XG4gICAgICAgICAgICAgICAgICAgICAgLSA8c3Ryb25nPntkb2NlbXB0eS5pbnZlbnRvcnlfbmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIEl0ZW0gaW5pIHNlZGFuZyBtZW1pbGlraSBodWJ1bmdhbiBkZW5nYW4gaXRlbSBiZXJpa3V0OlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14c1wiPlxuICAgICAgICAgICAgICB7cmVsc2hpcC5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgcmVsc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpZHhyZWx9PlxuICAgICAgICAgICAgICAgICAgICAte1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2NyZWwudHlwZX0gLSB7ZG9jcmVsLmNvbm5lY3RlZF9kZXRhaWxfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICAgIERlbmdhbiBtZW5naGFwdXMgaXRlbSBpbmkgYWthbiBtZW5naGlsYW5na2FuIHNlbHVydWggaHVidW5nYW5cbiAgICAgICAgICAgICAgZGVuZ2FuIGl0ZW0gZGlhdGFzIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgY29uc3QgaXRlbWlkID0gcGFyYW1zLml0ZW1JZDtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtRGV0YWlsO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-656990793\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-656990793\" + \" \" + \"mb-0\",\n            children: [\"Nama Item Part Pengganti \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-656990793\" + \" \" + \"namapart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 917,\n              columnNumber: 40\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_TreeSelect, {\n            onChange: function onChange(value) {\n              setdisabledchanged(false);\n              setdataApichanged(_objectSpread(_objectSpread({}, dataApichanged), {}, {\n                id: datachanged.id,\n                replacement_id: value\n              }));\n            },\n            treeData: datareplacements\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 919,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"656990793\",\n            children: \".namapart.jsx-656990793::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwNkJlLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy9kZXRhaWwvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbG9zZUNpcmNsZU91dGxpbmVkLFxuICBEZWxldGVPdXRsaW5lZCxcbiAgRG93bk91dGxpbmVkLFxuICBFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkLFxuICBTZWFyY2hPdXRsaW5lZCxcbiAgVXBPdXRsaW5lZCxcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEVtcHR5LFxuICBJbnB1dCxcbiAgTW9kYWwsXG4gIFBvcG92ZXIsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGFibGUsXG4gIFRhYnMsXG4gIFRpbWVsaW5lLFxuICBUb29sdGlwLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IE92ZXJ2aWV3ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBtYW51ZixcbiAgdmVuZG9yLFxuICBwcmFsb2FkaW5nLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMyLCBzZXRpbnZyZWxhdGlvbnMyXSA9IHVzZVN0YXRlKHt9KTtcblxuICAvL2hlbHBlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtYi04XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvXCI+T3ZlcnZpZXc8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZyA/IG51bGwgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgcnQucHVzaChgL2l0ZW1zL3VwZGF0ZS8ke2l0ZW1pZH1gKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgPFNwaW4gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCBteC01IHAtNSB3LTkvMTIgYm9yZGVyIHNoYWRvdy1tZCByb3VuZGVkLW1kIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TmFtYSBJdGVtOjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TW9kZWw6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPnttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZWwgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBNb2RlbCFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkFzc2V0IFR5cGU6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPlxuICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5NSUcgSUQ6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+U2VyaWFsIE51bWJlcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBcIlwiIHx8IG1haW5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TWFudWZhY3R1cmVyOjwvaDE+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihkb2NmaWwgPT4gZG9jZmlsLmlkID09PSBtYWluZGF0YS5tYW51ZmFjdHVyZXJfaWQpWzBdLmRlbGV0ZWRfYXQgIT09IG51bGxcbiAgICAgICAgICAgICAgbWFudWYuaXNudWxsID09PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTWFudWZhY3R1cmVyIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlZlbmRvcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS52ZW5kb3JfaWQgPT09IG51bGwgPyBcIi1cIiA6IHZlbmRvcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkxvY2F0aW9uOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEuaXNfY29uc3VtYWJsZSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgbWFpbmRhdGEucXVhbnRpdGllcy5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICB7aWR4ICsgMX0uIHtkb2MubmFtZX0gLSB7ZG9jLnF1YW50aXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHttYWluZGF0YS5sb2NhdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5sb2NhdGlvbl9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkRlc2tyaXBzaTo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5kZXNrcmlwc2kgPT09IFwiXCIgfHwgbWFpbmRhdGEuZGVza3JpcHNpID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuZGVza3JpcHNpfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICAgIHttYWluZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKChkb2Njb2x1bW5zLCBpZHhjb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZHhjb2x1bW5zfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgbWItNSAke1xuICAgICAgICAgICAgICAgICAgaWR4Y29sdW1ucyA9PT0gMCA/IGBtdC01YCA6IGBgXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5uYW1lfTpcbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Pntkb2Njb2x1bW5zLnZhbHVlLm9wc2lbZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0XX08Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLnZhbHVlLm9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChfLCBpZHhmaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2Njb2x1bW5zLnZhbHVlLmRlZmF1bHQuaW5jbHVkZXMoaWR4ZmlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge21vbWVudChkb2Njb2x1bW5zLnZhbHVlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZX08Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5jb25zdCBLb25maWd1cmFzaVBhcnQgPSAoe1xuICBpbml0UHJvcHMsXG4gIGl0ZW1pZCxcbiAgaW52cmVsYXRpb25zLFxuICBtYWluZGF0YSxcbiAgcHJhbG9hZGluZzIsXG4gIG1vZGVscyxcbiAgc2V0bW9kZWxzLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuXG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW21haW5wYXJ0ZGF0YSwgc2V0bWFpbnBhcnRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdwYXJ0LCBzZXRwcmFsb2FkaW5ncGFydF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVmaWx0ZXJhY3QsIHNldGFzc2V0dHlwZWZpbHRlcmFjdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3NldHR5cGV2YWx1ZSwgc2V0YXNzZXR0eXBldmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RlbGZpbHRlcmFjdCwgc2V0bW9kZWxmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx2YWx1ZSwgc2V0bW9kZWx2YWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0cmlnZ2VyLCBzZXRkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZSgwKTtcbiAgLy9jaGFuZ2VkIGRhbiByZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVwbGFjZW1lbnRzLCBzZXRkYXRhcmVwbGFjZW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BvcG92ZXIsIHNldHBvcG92ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2NoYW5nZWRcbiAgY29uc3QgW2RhdGFjaGFuZ2VkLCBzZXRkYXRhY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IG51bGwsXG4gICAgbW9kZWxfaWQ6IG51bGwsXG4gICAgaW52ZW50b3J5X25hbWU6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIHN0YXR1c191c2FnZToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICBtb2RlbF9pbnZlbnRvcnk6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIGFzc2V0OiB7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW2RhdGFBcGljaGFuZ2VkLCBzZXRkYXRhQXBpY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgcmVwbGFjZW1lbnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxjaGFuZ2VkLCBzZXRtb2RhbGNoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRjaGFuZ2VkLCBzZXRkaXNhYmxlZGNoYW5nZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlZCwgc2V0bG9hZGluZ2NoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdHJpZ2dlcmNoYW5nZWQsIHNldHRyaWdnZXJjaGFuZ2VkXSA9IHVzZVN0YXRlKC0xKTtcbiAgLy9yZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVtb3ZlZCwgc2V0ZGF0YXJlbW92ZWRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGF0YUFwaXJlbW92ZWQsIHNldGRhdGFBcGlyZW1vdmVkXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogMCxcbiAgICBpbnZlbnRvcnlfcGFydF9pZDogMCxcbiAgICBub3RlczogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFttb2RhbHJlbW92ZWQsIHNldG1vZGFscmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHJlbW92ZWQsIHNldGRpc2FibGVkcmVtb3ZlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdyZW1vdmVkLCBzZXRsb2FkaW5ncmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2JhY2t1cG1vZGVscywgc2V0YmFja3VwbW9kZWxzXSA9IHVzZVN0YXRlKG1vZGVscyk7XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAvLyB7XG4gICAgLy8gICAgIHRpdGxlOiAnTmFtYSBJdGVtJyxcbiAgICAvLyAgICAgZGF0YUluZGV4OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vICAgICBrZXk6ICdpbnZlbnRvcnlfbmFtZScsXG4gICAgLy8gfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNSUcgSURcIixcbiAgICAgIGRhdGFJbmRleDogXCJtaWdfaWRcIixcbiAgICAgIGtleTogXCJtaWdfaWRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlNlcmlhbCBOdW1iZXJcIixcbiAgICAgIGRhdGFJbmRleDogXCJzZXJpYWxfbnVtYmVyXCIsXG4gICAgICBrZXk6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PntyZWNvcmQuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IFwiLVwiIDogcmVjb3JkLnNlcmlhbF9udW1iZXJ9PC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNb2RlbFwiLFxuICAgICAgZGF0YUluZGV4OiBcIm1vZGVsX25hbWVcIixcbiAgICAgIGtleTogXCJtb2RlbF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkubmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQXNzZXQgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcImFzc2V0X25hbWVcIixcbiAgICAgIGtleTogXCJhc3NldF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuYXNzZXRfbmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgIHZpc2libGU9e3BvcG92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblZpc2libGVDaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiBgMHB4YCwgbWFyZ2luOiBgMHB4YCB9fVxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0cG9wb3ZlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGByZWRgLCBmb250U2l6ZTogYDEuMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhcmVtb3ZlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaXJlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1haW5wYXJ0ZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlfcGFydF9pZDogcmVjb3JkLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb3BvdmVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFya2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFjaGFuZ2VkKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY2hhbmdlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRyaWdnZXJjaGFuZ2VkKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbnRpa2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+S2VsdWFya2FuIFBhcnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+R2FudGlrYW4gUGFydDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hlbHBlclxuICAvLzEgbnlhIGxhZ2kgYWRhIGRpIHVzZUVmZmVjdFxuICBjb25zdCByZWN1cnNpdmVGbGF0dGVuQXJyID0gKGRhdGFhc3NldHMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBkYXRhYXNzZXRzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZCk7XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZWN1cnNpdmVGbGF0dGVuQXJyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBmdW5jdGlvbiByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhYVtpXVtcImtleVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXCJ2YWx1ZVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXG4gICAgICAgIFwidGl0bGVcIlxuICAgICAgXSA9IGAke2RhdGFhW2ldLm1pZ19pZH0gLSAke2RhdGFhW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgZGF0YWFbaV1bXCJjaGlsZHJlblwiXSA9IGRhdGFhW2ldLmludmVudG9yeV9yZXBsYWNlbWVudF9wYXJ0cztcbiAgICAgIGRlbGV0ZSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBpZiAoZGF0YWFbaV0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWFbaV0uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YWE7XG4gIH1cblxuICAvL2hhbmRsZXJcbiAgY29uc3QgYXNzZXRQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQgPSAoZG9jLCBhc3NldGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZCA9PT0gTnVtYmVyKGFzc2V0aWQpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIGFzc2V0UGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZG9jW2ldLmNoaWxkcmVuLCBhc3NldGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbW9kZWxQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwgPSAoZG9jLCBtb2RlbGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2lkID09PSBtb2RlbGlkKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG1vZGVsUGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZG9jW2ldLmNoaWxkcmVuLCBtb2RlbGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbmFtZVBhcnQgPSBbXTtcbiAgY29uc3QgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lID0gKGRvYywgbmFtZSkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5pbnZlbnRvcnlfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgbmFtZVBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZG9jW2ldLmNoaWxkcmVuLCBuYW1lKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgLy9kZWxpdmVyIEFQSVxuICBjb25zdCBoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0ID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdjaGFuZ2VkKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9yZXBsYWNlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpY2hhbmdlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpZ2FudGlcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVSZW1vdmVJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5ncmVtb3ZlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVtb3ZlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpcmVtb3ZlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ncmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpa2VsdWFya2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIGFzc2V0IHR5cGVcbiAgY29uc3Qgb25DaGFuZ2VBc3NldFR5cGUgPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRhc3NldHR5cGVmaWx0ZXJhY3QoZmFsc2UpO1xuICAgICAgc2V0bW9kZWxzKGJhY2t1cG1vZGVscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9MTAwJmFzc2V0X2lkPSR7aWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwID8gc2V0bW9kZWxzKFtdKSA6IHNldG1vZGVscyhyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0YXNzZXR0eXBldmFsdWUoaWQpO1xuICAgIH1cbiAgfTtcbiAgLy9zZWFyY2ggbW9kZWxcbiAgY29uc3Qgb25DaGFuZ2VNb2RlbCA9IChpZG1vZGVsKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZG1vZGVsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldG1vZGVsZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0bW9kZWx2YWx1ZShpZG1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAoYXNzZXR0eXBlZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRhdGF0ZW1wLCBhc3NldHR5cGV2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IGFzc2V0UGFydDtcbiAgICB9XG4gICAgaWYgKG1vZGVsZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Nb2RlbChkYXRhdGVtcCwgbW9kZWx2YWx1ZSlcbiAgICAgIHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBtb2RlbFBhcnQ7XG4gICAgfVxuICAgIGlmIChuYW1hc2VhcmNoYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZGF0YXRlbXAsIG5hbWF2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IG5hbWVQYXJ0O1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBjb25zdCByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuID0gKHJzYykgPT4ge1xuICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcnNjW2ldLmtleSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS52YWx1ZSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS50aXRsZSA9IGAke3JzY1tpXS5taWdfaWR9IC0gJHtyc2NbaV0ubW9kZWxfaW52ZW50b3J5Py5uYW1lfWA7XG4gICAgICAgICAgICByc2NbaV0uY2hpbGRyZW4gPSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5pbnZlbnRvcnlfcGFydHM7XG4gICAgICAgICAgICBpZiAocnNjW2ldLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4ucnNjW2ldLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJzY1tpXS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJlczMuaW52ZW50b3J5X3BhcnRzKTtcbiAgICAgICAgc2V0bWFpbnBhcnRkYXRhKHtcbiAgICAgICAgICAuLi5yZXMzLFxuICAgICAgICAgIGludmVudG9yeV9wYXJ0czogdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldGRhdGF0YWJsZSh0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMih0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMyh0KTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ3BhcnQoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmlnZ2VyY2hhbmdlZCAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVwbGFjZW1lbnRzP2lkPSR7ZGF0YWNoYW5nZWQubW9kZWxfaW52ZW50b3J5LmFzc2V0X2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFwZGF0YSA9IHJlY3Vyc2l2ZU1vZGlmRGF0YShyZXMyLmRhdGEpO1xuICAgICAgICAgIHNldGRhdGFyZXBsYWNlbWVudHMobWFwZGF0YSk7XG4gICAgICAgICAgaWYgKG1hcGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRkaXNhYmxlZGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdHJpZ2dlcmNoYW5nZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPktvbmZpZ3VyYXNpIFBhcnQ8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIC8qY29uc29sZS5sb2cobWFpbnBhcnRkYXRhKTsgY29uc29sZS5sb2coZGF0YXJlbW92ZWQpKi8gcnQucHVzaChcbiAgICAgICAgICAgICAgICBgL2l0ZW1zL2NyZWF0ZXBhcnQvJHtpdGVtaWR9P25hbWE9JHttYWlucGFydGRhdGEubWlnX2lkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nMiA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBtci0xXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAsIG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBOYW1hIEl0ZW1cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2VTZWFyY2goZSl9XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQXNzZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZShleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17ZmV0Y2hpbmdtb2RlbCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgIH0vZ2V0RmlsdGVyTW9kZWxzP25hbWU9JHt2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIn1gLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttb2RlbHMubWFwKChkb2Ntb2RlbHMsIGlkeG1vZGVscykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvY21vZGVscy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY21vZGVscy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkZpbmFsQ2xpY2t9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPFRhYmxlXG4gICAgICAgIGxvYWRpbmc9e3ByYWxvYWRpbmdwYXJ0fVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gUGVyZ2FudGlhbiBQYXJ0IFwie2RhdGFjaGFuZ2VkLmludmVudG9yeV9uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0fVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjaGFuZ2VkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCB5YW5nIEluZ2luIERpZ2FudGl7XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGF0YWJsZTN9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZGF0YWNoYW5nZWQua2V5fVxuICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIEFzc2V0IFR5cGUgZGFyaSBJdGVtIFBhcnQgeWFuZyBpbmdpbiBkaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAge2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCBQZW5nZ2FudGkgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhY2hhbmdlZC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGFyZXBsYWNlbWVudHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFyZXBsYWNlbWVudHMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLmludmVudG9yeV9uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgPC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFBcGljaGFuZ2VkLm5vdGVzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5nZWx1YXJrYW4gaXRlbSBcIlxuICAgICAgICAgICAge2RhdGFyZW1vdmVkLmludmVudG9yeV9uYW1lfVwiIGRhcmkgXCJ7bWFpbnBhcnRkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxyZW1vdmVkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFscmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlUmVtb3ZlSXRlbVBhcnR9XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3JlbW92ZWQgfX1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRhdGFBcGlyZW1vdmVkKHsgLi4uZGF0YUFwaXJlbW92ZWQsIG5vdGVzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgUmVsYXRpb25zaGlwID0gKHsgaW5pdFByb3BzLCBtYWluZGF0YSwgaXRlbWlkIH0pID0+IHtcbiAgLy9pbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtsb2FkaW5ncmVsLCBzZXRsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdyZWwsIHNldHByYWxvYWRpbmdyZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbZGF0YUFwaWRlbGV0ZSwgc2V0ZGF0YUFwaWRlbGV0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25kYXRhZGVsZXRlLCBzZXRyZWxhdGlvbmRhdGFkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgdGlwZTogXCJcIixcbiAgICBrb25la3NpOiBcIlwiLFxuICB9KTtcbiAgLy9hZGRcbiAgY29uc3QgW2RhdGFBcGlhZGQsIHNldGRhdGFBcGlhZGRdID0gdXNlU3RhdGUoe1xuICAgIHN1YmplY3RfaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgIHR5cGVfaWQ6IG51bGwsXG4gICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNwbGF5ZGF0YXJlbGF0aW9ucywgc2V0ZGlzcGxheWRhdGFyZWxhdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbcmVsYXRpb25uYW1lYWRkLCBzZXRyZWxhdGlvbm5hbWVhZGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbm5hbWVkZGFkZCwgc2V0cmVsYXRpb25uYW1lZGRhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlkeGFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkLCBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkXSA9XG4gICAgdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGV0YWlsdGlwZWFkZCwgc2V0ZGV0YWlsdGlwZWFkZF0gPSB1c2VTdGF0ZSgtMTApO1xuICBjb25zdCBbZGV0YWlsdGlwZWRhdGFhZGQsIHNldGRldGFpbHRpcGVkYXRhYWRkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGFsYWRkLCBzZXRtb2RhbGFkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZCwgc2V0ZGlzYWJsZWRhZGRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nYWRkLCBzZXRsb2FkaW5nYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZldGNoaW5nbW9kZWwsIHNldGZldGNoaW5nbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jZGF0YSwgc2V0c3VibG9jZGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N1YmxvY3RyaWcsIHNldHN1YmxvY3RyaWddID0gdXNlU3RhdGUoLTEpO1xuXG4gIC8vZGVjbGFyYXRpb25cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJSZWxhdGlvbnNoaXAgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgICBrZXk6IFwicmVsYXRpb25zaGlwX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIk5hbWFcIixcbiAgICAgIGRhdGFJbmRleDogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICAgIGtleTogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJ0eXBlXCIsXG4gICAgICBrZXk6IFwidHlwZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWRlbGV0ZSh7IGlkOiByZWNvcmQuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25kYXRhZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZC5yZWxhdGlvbnNoaXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGU6IHJlY29yZC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAga29uZWtzaTogcmVjb3JkLmNvbm5lY3RlZF9kZXRhaWxfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogYDEuMnJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogYHBvaW50ZXJgLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIC8vaGFuZGxlclxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgZGF0YXRlbXAgPSBkYXRhdGVtcC5maWx0ZXIoKGZsdCkgPT4ge1xuICAgICAgICByZXR1cm4gZmx0LmNvbm5lY3RlZF9kZXRhaWxfbmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKG5hbWF2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdkZWxldGUodHJ1ZSk7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlUmVsYXRpb25zaGlwSW52ZW50b3J5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpZGVsZXRlKSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgYmVyaGFzaWwgZGloYXB1c1wiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdhZGQodHJ1ZSk7XG4gICAgZGVsZXRlIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhQXBpYWRkKVxuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRSZWxhdGlvbnNoaXBJbnZlbnRvcmllc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWFkZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nYWRkKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxhZGQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICAgICAgICAgIGlzX2ludmVyc2U6IG51bGwsXG4gICAgICAgICAgICB0eXBlX2lkOiBudWxsLFxuICAgICAgICAgICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiBudWxsLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChcIlwiKTtcbiAgICAgICAgICBzZXRzdWJsb2NkYXRhKG51bGwpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoLTEpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoLTEpO1xuICAgICAgICAgIHNldHN1YmxvY3RyaWcoLTEpO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgSXRlbSBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGF0cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0cHJhbG9hZGluZ3JlbCh0cnVlKTtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRkYXRhdGFibGUoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTIoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTMoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldHByYWxvYWRpbmdyZWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2N0cmlnICE9PSAtMSkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtzdWJsb2N0cmlnfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRldGFpbHRpcGVhZGQgIT09IC0xMCkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkYXRhQXBpYWRkLnR5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKFtyZXMyLmRhdGFdKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0xICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTQgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RldGFpbHRpcGVhZGQsIHN1YmxvY3RyaWddKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG8gbXItMVwiPlJlbGF0aW9uc2hpcDwvaDE+XG4gICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5kZWxldGVkX2F0ICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkFzc2V0IFR5cGUgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBBc3NldCBUeXBlIVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTsgLypydC5wdXNoKGAvaXRlbXMvY3JlYXRlcmVsYXRpb25zaGlwLyR7aXRlbWlkfT9uYW1hPSR7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9JmFzc2V0X2lkPSR7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmlkfWApKi9cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgVGFtYmFoXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZ3JlbCA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMTEgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncmVsfVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBSZWxhdGlvbnNoaXAgYmVyaWt1dCBpbmkgZGFyaSBcIlxuICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGJvcmRlci1iIG1iLTVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5SZWxhdGlvbnNoaXAgVHlwZTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMFwiPlRpcGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUudGlwZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5JdGVtOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLmtvbmVrc2l9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiIG9uQ2hhbmdlPXsoZSkgPT4ge319PjwvSW5wdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIFJlbGF0aW9uc2hpcCBcInttYWluZGF0YS5uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApOyAvKnNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCByZWxhdGlvbnNoaXBfaWQ6IG51bGwsIHR5cGVfaWQ6IG51bGwsIGNvbm5lY3RlZF9pZDogbnVsbCB9KSovIC8qY29uc29sZS5sb2coZGF0YUFwaWFkZCkqL1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJlbGF0aW9uc2hpcEl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nYWRkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsYWRkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NzYwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFJlbGF0aW9uc2hpcCBUeXBlIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYm9yZGVyIHAtMiBob3Zlcjpib3JkZXItcHJpbWFyeSByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZCgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9ubmFtZWFkZH08L3A+XG4gICAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgICA8VXBPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPERvd25PdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBJbnZlcnNlIFJlbGF0aW9uc2hpcCBUeXBlXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZGlzcGxheWRhdGFyZWxhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctdGVybmFyeSBjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsYWNrIHAtMyB3LTYvMTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlkeGFkZCA9PT0gaWR4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IG51bGwgfHwgZGF0YUFwaWFkZC50eXBlX2lkID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZGFkZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLnJlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbnZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmludmVyc2VfcmVsYXRpb25zaGlwX3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFRpcGUgPHNwYW4gY2xhc3NOYW1lPVwidGlwZXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpYWRkLnR5cGVfaWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgdHlwZV9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5yZWxhdGlvbnNoaXBfaWQgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVhZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgID8gKHNldHN1YmxvY3RyaWcoLTEpLCBzZXRzdWJsb2NkYXRhKG51bGwpKVxuICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0zfT5Db21wYW55PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTR9PkFzc2V0IFR5cGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXBlcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5iYWNrdXBfY29ubmVjdGVkX2lkcyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHNbMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cz17WzFdfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17ZGV0YWlsdGlwZWRhdGFhZGR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRzdWJsb2N0cmlnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlPC9wPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgZGVuZ2FuIE1vZGVsIElEXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZtb2RlbF9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3N1YmxvY2RhdGEgIT09IG51bGwgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlIChTdWJsb2thc2kpPC9wPlxuICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NkYXRhfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIGNvbm5lY3RlZF9pZHM6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQXNzb2NpYXRpb24gPSAoeyBpbml0UHJvcHMsIGl0ZW1pZCwgbWFpbmRhdGEsIHByYWxvYWRpbmcgfSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFzc29jaWF0aW9uPC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHB4LTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBtYWluZGF0YS5hc3NvY2lhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHttYWluZGF0YS5hc3NvY2lhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgc2hhZG93LW1kIHB5LTQgcHgtNSBib3JkZXIgbWItNCBmbGV4IGp1c3RpZnktYmV0d2VlbiB3LTEwLzEyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcnQucHVzaChgL3RpY2tldHMvZGV0YWlsLyR7ZG9jLmlkfT9hY3RpdmU9ZGV0YWlsSXRlbWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+VGlja2V0IE51bWJlcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MudGlja2V0X25hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLXJlZC0xMDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gNCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQWNpdGl2dHkgPSAoe1xuICBpdGVtaWQsXG4gIGluaXRQcm9wcyxcbiAgbWFpbmRhdGEsXG4gIGludnJlbGF0aW9ucyxcbiAgcHJhbG9hZGluZyxcbiAgYWN0aXZpdHl0cmlnZ2VyLFxufSkgPT4ge1xuICBjb25zdCBbZGF5bG9ncywgc2V0ZGF5bG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt3ZWVrbG9ncywgc2V0d2Vla2xvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9yZWxvZ3MsIHNldG1vcmVsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdsb2dzLCBzZXRwcmFsb2FkaW5nbG9nc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2ludmVudG9yaWVzLCBzZXRpbnZlbnRvcmllc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRwcmFsb2FkaW5nbG9ncyh0cnVlKTtcblxuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFjdGl2aXR5SW52ZW50b3J5TG9ncz9pZD0ke2l0ZW1pZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgZGF5bG9nc21hcCA9IHJlczIuZGF0YS5kYXlfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gRGloYXB1czogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB3ZWVrbG9nc21hcCA9IHJlczIuZGF0YS53ZWVrX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1vcmVsb2dzbWFwID0gcmVzMi5kYXRhLmVsc2VfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXlsb2dzKGRheWxvZ3NtYXApO1xuICAgICAgICBzZXR3ZWVrbG9ncyh3ZWVrbG9nc21hcCk7XG4gICAgICAgIHNldG1vcmVsb2dzKG1vcmVsb2dzbWFwKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgLy8gLnRoZW4ocmVzMyA9PiB7XG4gICAgLy8gICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLCB7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgIC8vICAgICAgICAgaGVhZGVyczoge1xuICAgIC8vICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLy8gICAgICAgICAudGhlbihyZXM0ID0+IHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgY29uY2F0YXJyID0gcmVzNC5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzNC5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG5cbiAgICAvLyAgICAgICAgICAgICB2YXIgbG9nczJtYXAgPSByZXMzLmRhdGEucmVsYXRpb25zaGlwLm1hcCgoZG9jcmVsLCBpZHhyZWwpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZW5ldzIgPSBtb21lbnQoZG9jcmVsLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdCgnTExMJylcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGRlc2NuZXcyID0gJydcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGlkbG9nbmV3ID0gLTFcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGVzYzIgPSBkb2NyZWwuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBpZGxvZ25ldyA9IGNvbmNhdGFyci5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gZG9jcmVsLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pZClbMF0gOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHt0eXBlb2YgKGlkbG9nbmV3KSA9PT0gJ3VuZGVmaW5lZCcgPyBcIihTdWRhaCBEaWhhcHVzIGxhZ2kpXCIgOiBgJHtpZGxvZ25ldy5yZWxhdGlvbnNoaXB9YH1cImAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnRGVsZXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcGAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAuLi5kb2NyZWwsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlbmV3MixcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3MlxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICBzZXRsb2dzMihsb2dzMm1hcClcbiAgICAvLyAgICAgICAgICAgICBzZXRwcmFsb2FkaW5nbG9nczIoZmFsc2UpXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vIH0pXG4gIH0sIFthY3Rpdml0eXRyaWdnZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFjdGl2aXR5PC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5IYXJpIEluaTwvaDE+XG4gICAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogZGF5bG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7ZGF5bG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IHdlZWtsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIHt3ZWVrbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctNi8xMlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+TWluZ2d1IExhbHU8L2gxPlxuICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IG1vcmVsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIHttb3JlbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUaW1lbGluZS5JdGVtIGxhYmVsPXtkb2Nsb2cuZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbG9nLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZWgge2RvY2xvZy5jYXVzZXJfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IEl0ZW1EZXRhaWwgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8xLiBJbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBhY3RpdmVUYWIgPSBcIm92ZXJ2aWV3XCI7XG4gIGNvbnN0IHsgYWN0aXZlIH0gPSBydC5xdWVyeTtcbiAgaWYgKGFjdGl2ZSkge1xuICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZTtcbiAgfVxuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMiwgMik7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiRGV0YWlsIEl0ZW1cIjtcbiAgY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xuXG4gIC8vdXNlU3RhdGVcbiAgY29uc3QgW21haW5kYXRhLCBzZXRtYWluZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiBcIlwiLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgY3JlYXRlZF9hdDogXCJcIixcbiAgICB1cGRhdGVkX2F0OiBcIlwiLFxuICAgIGRlbGV0ZWRfYXQ6IFwiXCIsXG4gICAgYXNzZXRfbmFtZTogXCJcIixcbiAgICBtb2RlbF9uYW1lOiBcIlwiLFxuICAgIGxvY2F0aW9uX25hbWU6IFwiXCIsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsb2NhdGlvbl9pbnZlbnRvcnk6IHtcbiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsXG4gICAgICBjb21wYW55X25hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBhZGRpdGlvbmFsX2F0dHJpYnV0ZXM6IFtdLFxuICAgIGludmVudG9yeV9wYXJ0czogW10sXG4gICAgYXNzb2NpYXRpb25zOiBbXSxcbiAgICBxdWFudGl0aWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGFzc2V0czogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczoge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBbcmVsc2hpcCwgc2V0cmVsc2hpcF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51Ziwgc2V0bWFudWZdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2ZW5kb3IsIHNldHZlbmRvcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nMiwgc2V0cHJhbG9hZGluZzJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIC8vZGVsZXRlXG4gIGNvbnN0IFttb2RhbGRlbGV0ZSwgc2V0bW9kYWxkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2RlbGV0ZSwgc2V0bG9hZGluZ2RlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vbm90ZXNcbiAgY29uc3QgW25vdGVzLCBzZXRub3Rlc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGFsbm90ZXMsIHNldG1vZGFsbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ25vdGVzLCBzZXRsb2FkaW5nbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2tvbmRpc2lcbiAgY29uc3QgW2tvbmRpc2ksIHNldGtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtub3Rla29uZGlzaSwgc2V0bm90ZWtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbGtvbmRpc2ksIHNldG1vZGFsa29uZGlzaV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5a29uZGlzaSwgc2V0ZGlzcGxheWtvbmRpc2ldID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5na29uZGlzaSwgc2V0bG9hZGluZ2tvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL3N0YXR1cyBwZW1ha2FpYW5cbiAgY29uc3QgW2NoYW5nZXVzYWdlLCBzZXRjaGFuZ2V1c2FnZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBub3RlczogXCJcIixcbiAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogXCJcIixcbiAgICBjb25uZWN0ZWRfaWQ6IFwiXCIsXG4gICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNhYmxlZHVzYWdlLCBzZXRkaXNhYmxlZHVzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbW9kYWx1c2FnZSwgc2V0bW9kYWx1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5dXNhZ2UsIHNldGRpc3BsYXl1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UsIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2VdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXNhZ2UsIHNldGxvYWRpbmd1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIGNvbnN0IFthZ2VudHMsIHNldGFnZW50c10gPSB1c2VTdGF0ZShbXSlcbiAgLy8gY29uc3QgW3JlcXVlc3RlcnMsIHNldHJlcXVlc3RlcnNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IFtkZXRhaWxsaXN0LCBzZXRkZXRhaWxsaXN0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscywgc2V0bW9kZWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9ucywgc2V0c3VibG9jYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvY2F0aW9uc2Rpc3BsYXksIHNldGxvY2F0aW9uc2Rpc3BsYXldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jYXRpb250cmlnZ2VyLCBzZXRzdWJsb2NhdGlvbnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWN0aXZpdHl0cmlnZ2VyLCBzZXRhY3Rpdml0eXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy9oZWxwZXJcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZWxldGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgICBydC5wdXNoKGAvaXRlbXNgKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVOb3Rlc0l0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ25vdGVzKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRJbnZlbnRvcnlOb3Rlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ25vdGVzKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJOb3RlcyBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH0/YWN0aXZlPWFjdGl2aXR5YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVLb25kaXNpSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5na29uZGlzaSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzQ29uZGl0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZWtvbmRpc2ksXG4gICAgICAgIHN0YXR1c19jb25kaXRpb246IGtvbmRpc2ksXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgS29uZGlzaSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVVc2FnZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3VzYWdlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9jaGFuZ2VTdGF0dXNVc2FnZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2V1c2FnZSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ndXNhZ2UoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy91c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5P2lkPSR7aXRlbWlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSBcImFkZGl0aW9uYWxfYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04ucGFyc2UoZG9jLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0bWFpbmRhdGEodCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICAgICAgICB2YXIgZGVsX21hbnVmID0gbnVsbDtcbiAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsXG4gICAgICAgICAgICAgID8gKGRlbF9tYW51ZiA9IG51bGwpXG4gICAgICAgICAgICAgIDogKGRlbF9tYW51ZiA9IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICApWzBdLmRlbGV0ZWRfYXQpO1xuICAgICAgICAgICAgc2V0bWFudWYoe1xuICAgICAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwXG4gICAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgICA6IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICAgIClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgaXNudWxsOiBkZWxfbWFudWYgIT09IG51bGwgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlczMudmVuZG9yX2lkID09PSBudWxsIHx8IHJlczMudmVuZG9yX2lkID09PSAwXG4gICAgICAgICAgICAgID8gc2V0dmVuZG9yKFwiLVwiKVxuICAgICAgICAgICAgICA6IHNldHZlbmRvcihcbiAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXT8ubmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRwcmFsb2FkaW5nMihmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRGaWx0ZXJNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgIT09IFwiXCIpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0Q2hhbmdlU3RhdHVzVXNhZ2VEZXRhaWxMaXN0P2lkPSR7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgID8gc2V0ZGV0YWlsbGlzdChbcmVzMi5kYXRhXSlcbiAgICAgICAgICAgIDogc2V0ZGV0YWlsbGlzdChyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NoYW5nZXVzYWdlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN1YmxvY2F0aW9udHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeURldGFpbExpc3Q/dHlwZV9pZD0ke2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgIHNldHN1YmxvY2F0aW9ucyhyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzdWJsb2NhdGlvbnRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRyZWxzaGlwKHJlczIuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczIuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktNSBweC00IGJvcmRlci10IGJvcmRlci1iIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LWdyYXktNDAwIG1iLTBcIj5JdGVtOjwvcD5cbiAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTIgdGV4dC0yeGwgbWItMCBtci0yMFwiPlxuICAgICAgICAgICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfSAtIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1yLTcgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPlN0YXR1cyBQZW1ha2FpYW46PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5dXNhZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTByZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc3RhdHVzX3VzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c191c2FnZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1c2FnZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5JbiBVc2VkPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gU3RvY2s8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5SZXBsYWNlbWVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+S29uZGlzaTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlrb25kaXNpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c19jb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0a29uZGlzaSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdyZXk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG5vdGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGFtYmFoIE5vdGVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgSGFwdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBoaWRkZW4gbWQ6YmxvY2tcIj5cbiAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgIHRhYlBvc2l0aW9uPXtgbGVmdGB9XG4gICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgb25UYWJDbGljaz17KGtleSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiYWN0aXZpdHlcIikge1xuICAgICAgICAgICAgICAgICAgc2V0YWN0aXZpdHl0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgYmxvY2sgbWQ6aGlkZGVuXCI+XG4gICAgICAgICAgICA8VGFicyB0YWJQb3NpdGlvbj17YHRvcGB9IGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn0+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIk92ZXJ2aWV3XCIga2V5PXtgb3ZlcnZpZXdgfT5cbiAgICAgICAgICAgICAgICA8T3ZlcnZpZXdcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBtYW51Zj17bWFudWZ9XG4gICAgICAgICAgICAgICAgICB2ZW5kb3I9e3ZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJLb25maWd1cmFzaSBQYXJ0XCIga2V5PXtga29uZmlndXJhc2lQYXJ0YH0+XG4gICAgICAgICAgICAgICAgPEtvbmZpZ3VyYXNpUGFydFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZzI9e3ByYWxvYWRpbmcyfVxuICAgICAgICAgICAgICAgICAgbW9kZWxzPXttb2RlbHN9XG4gICAgICAgICAgICAgICAgICBzZXRtb2RlbHM9e3NldG1vZGVsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIlJlbGF0aW9uc2hpcFwiIGtleT17YHJlbGF0aW9uc2hpcGB9PlxuICAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBc3NvY2lhdGlvblwiIGtleT17YGFzc29jaWF0aW9uYH0+XG4gICAgICAgICAgICAgICAgPEFzc29jaWF0aW9uXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFjdGl2aXR5XCIga2V5PXtgYWN0aXZpdHlgfT5cbiAgICAgICAgICAgICAgICA8QWNpdGl2dHlcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIGFjdGl2aXR5dHJpZ2dlcj17YWN0aXZpdHl0cmlnZ2VyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgUGVtYWthaWFuIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdXNhZ2V9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVc2FnZUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5ndXNhZ2V9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1c2FnZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBTdGF0dXMgUGVtYWthaWFuIDxzcGFuIGNsYXNzTmFtZT1cInVzYWdlbW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PkluIFVzZWQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5JbiBTdG9jazwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlJlcGxhY2VtZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNhZ2Vtb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGFuZ2V1c2FnZS5zdGF0dXNfdXNhZ2UgPT09IDEgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIERpZ3VuYWthbiBPbGVoIDxzcGFuIGNsYXNzTmFtZT1cImJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF90eXBlX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxfY29ubmVjdGVkX2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGxvY2F0aW9uc2Rpc3BsYXkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstMX0+QWdlbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ5bW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItMyBtbC01XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgTmFtYSB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmIFwiQWdlbnRcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmIFwiUmVxdWVzdGVyXCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyAmJiBcIkNvbXBhbnlcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hYnltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyA/IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0c3VibG9jYXRpb250cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bG9jYXRpb25zZGlzcGxheSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhbmdldXNhZ2UuY29ubmVjdGVkX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZCA9PT0gLTMgfHwgbG9jYXRpb25zZGlzcGxheSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWwtNVwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5hbWEgTG9rYXNpPC9wPlxuICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWNvbXBhbnl1c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e3N1YmxvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgbm90ZXM6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgS29uZGlzaSB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVLb25kaXNpSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdrb25kaXNpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsa29uZGlzaX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIEtvbmRpc2kgPHNwYW4gY2xhc3NOYW1lPVwia29uZGlzaW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2tvbmRpc2l9PlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rb25kaXNpbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRub3Rla29uZGlzaShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5cbiAgICAgICAgICAgICAgRm9ybSBUYW1iYWggTm90ZXMge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25vdGVzID09PSBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTm90ZXNJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ25vdGVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbm90ZXN9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezYwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0bm90ZXMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGl0ZW0gXCJ7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9IC17XCIgXCJ9XG4gICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxkZWxldGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxkZWxldGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZURlbGV0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ2RlbGV0ZSB9fVxuICAgICAgICB3aWR0aD17NzIwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi00XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBtZW1pbGlraSBJdGVtIFBhcnQgc2ViYWdhaSBiZXJpa3V0IDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9wYXJ0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubWFwKChkb2NlbXB0eSwgaWR4ZW1wdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHhlbXB0eX0+XG4gICAgICAgICAgICAgICAgICAgICAgLSA8c3Ryb25nPntkb2NlbXB0eS5pbnZlbnRvcnlfbmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIEl0ZW0gaW5pIHNlZGFuZyBtZW1pbGlraSBodWJ1bmdhbiBkZW5nYW4gaXRlbSBiZXJpa3V0OlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14c1wiPlxuICAgICAgICAgICAgICB7cmVsc2hpcC5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgcmVsc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpZHhyZWx9PlxuICAgICAgICAgICAgICAgICAgICAte1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2NyZWwudHlwZX0gLSB7ZG9jcmVsLmNvbm5lY3RlZF9kZXRhaWxfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICAgIERlbmdhbiBtZW5naGFwdXMgaXRlbSBpbmkgYWthbiBtZW5naGlsYW5na2FuIHNlbHVydWggaHVidW5nYW5cbiAgICAgICAgICAgICAgZGVuZ2FuIGl0ZW0gZGlhdGFzIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgY29uc3QgaXRlbWlkID0gcGFyYW1zLml0ZW1JZDtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtRGV0YWlsO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 915,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n            rows: 3,\n            placeholder: \"Masukkan Notes\",\n            value: dataApichanged.notes,\n            onChange: function onChange(e) {\n              setdataApichanged(_objectSpread(_objectSpread({}, dataApichanged), {}, {\n                notes: e.target.value\n              }));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 949,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 879,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 838,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-semibold\",\n        children: [\"Apakah anda yakin ingin mengeluarkan item \\\"\", dataremoved.inventory_name, \"\\\" dari \\\"\", mainpartdata.inventory_name, \"\\\"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 965,\n        columnNumber: 11\n      }, _this),\n      visible: modalremoved,\n      onCancel: function onCancel() {\n        setmodalremoved(false);\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      onOk: handleRemoveItemPart,\n      okButtonProps: {\n        loading: loadingremoved\n      },\n      width: 760,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 982,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Input, {\n            placeholder: \"Masukkan Notes\",\n            onChange: function onChange(e) {\n              setdataApiremoved(_objectSpread(_objectSpread({}, dataApiremoved), {}, {\n                notes: e.target.value\n              }));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 983,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 980,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 963,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 717,\n    columnNumber: 5\n  }, _this);\n};\n\n_s2(KonfigurasiPart, \"4QJe112CPgO6Tyz/MLPn2dKDuwc=\", false, function () {\n  return [useRouter];\n});\n\n_c2 = KonfigurasiPart;\n\nvar Relationship = function Relationship(_ref3) {\n  _s3();\n\n  var initProps = _ref3.initProps,\n      maindata = _ref3.maindata,\n      itemid = _ref3.itemid;\n  //init\n  var rt = useRouter(); //usestate\n\n  var _useState31 = useState(\"\"),\n      events = _useState31[0],\n      setevents = _useState31[1];\n\n  var _useState32 = useState([]),\n      datatable = _useState32[0],\n      setdatatable = _useState32[1];\n\n  var _useState33 = useState([]),\n      datatable2 = _useState33[0],\n      setdatatable2 = _useState33[1];\n\n  var _useState34 = useState([]),\n      datatable3 = _useState34[0],\n      setdatatable3 = _useState34[1];\n\n  var _useState35 = useState(false),\n      namasearchact = _useState35[0],\n      setnamasearchact = _useState35[1];\n\n  var _useState36 = useState(\"\"),\n      namavalue = _useState36[0],\n      setnamavalue = _useState36[1];\n\n  var _useState37 = useState(0),\n      datatrigger = _useState37[0],\n      setdatatrigger = _useState37[1];\n\n  var _useState38 = useState(false),\n      loadingrel = _useState38[0],\n      setloadingrel = _useState38[1];\n\n  var _useState39 = useState(false),\n      praloadingrel = _useState39[0],\n      setpraloadingrel = _useState39[1]; //delete\n\n\n  var _useState40 = useState({\n    id: \"\"\n  }),\n      dataApidelete = _useState40[0],\n      setdataApidelete = _useState40[1];\n\n  var _useState41 = useState(false),\n      modaldelete = _useState41[0],\n      setmodaldelete = _useState41[1];\n\n  var _useState42 = useState(false),\n      loadingdelete = _useState42[0],\n      setloadingdelete = _useState42[1];\n\n  var _useState43 = useState({\n    name: \"\",\n    tipe: \"\",\n    koneksi: \"\"\n  }),\n      relationdatadelete = _useState43[0],\n      setrelationdatadelete = _useState43[1]; //add\n\n\n  var _useState44 = useState({\n    subject_id: Number(itemid),\n    relationship_id: null,\n    is_inverse: null,\n    type_id: null,\n    connected_ids: null,\n    backup_connected_ids: null\n  }),\n      dataApiadd = _useState44[0],\n      setdataApiadd = _useState44[1];\n\n  var _useState45 = useState([]),\n      displaydatarelations = _useState45[0],\n      setdisplaydatarelations = _useState45[1];\n\n  var _useState46 = useState(\"\"),\n      relationnameadd = _useState46[0],\n      setrelationnameadd = _useState46[1];\n\n  var _useState47 = useState(false),\n      relationnameddadd = _useState47[0],\n      setrelationnameddadd = _useState47[1];\n\n  var _useState48 = useState(-1),\n      relationselectedidxadd = _useState48[0],\n      setrelationselectedidxadd = _useState48[1];\n\n  var _useState49 = useState(-1),\n      relationselectedisinverseadd = _useState49[0],\n      setrelationselectedisinverseadd = _useState49[1];\n\n  var _useState50 = useState(-10),\n      detailtipeadd = _useState50[0],\n      setdetailtipeadd = _useState50[1];\n\n  var _useState51 = useState([]),\n      detailtipedataadd = _useState51[0],\n      setdetailtipedataadd = _useState51[1];\n\n  var _useState52 = useState(false),\n      modaladd = _useState52[0],\n      setmodaladd = _useState52[1];\n\n  var _useState53 = useState(true),\n      disabledadd = _useState53[0],\n      setdisabledadd = _useState53[1];\n\n  var _useState54 = useState(false),\n      loadingadd = _useState54[0],\n      setloadingadd = _useState54[1];\n\n  var _useState55 = useState(false),\n      fetchingmodel = _useState55[0],\n      setfetchingmodel = _useState55[1];\n\n  var _useState56 = useState(null),\n      sublocdata = _useState56[0],\n      setsublocdata = _useState56[1];\n\n  var _useState57 = useState(-1),\n      subloctrig = _useState57[0],\n      setsubloctrig = _useState57[1]; //declaration\n\n\n  var columns = [{\n    title: \"Relationship Type\",\n    dataIndex: \"relationship_name\",\n    key: \"relationship_name\"\n  }, {\n    title: \"Nama\",\n    dataIndex: \"connected_detail_name\",\n    key: \"connected_detail_name\"\n  }, {\n    title: \"Type\",\n    dataIndex: \"type\",\n    key: \"type\"\n  }, {\n    title: \"\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\",\n    dataIndex: \"actionss\",\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: events === record.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n              onClick: function onClick() {\n                setdataApidelete({\n                  id: record.id\n                });\n                setrelationdatadelete({\n                  name: record.relationship_name,\n                  tipe: record.type,\n                  koneksi: record.connected_detail_name\n                });\n                setmodaldelete(true);\n              },\n              style: {\n                fontSize: \"1.2rem\",\n                color: \"red\",\n                cursor: \"pointer\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1069,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false) : null\n        }, void 0, false)\n      };\n    }\n  }]; //handler\n  //search nama\n\n  var onChangeSearch = function onChangeSearch(e) {\n    if (e.target.value === \"\") {\n      setdatatable(datatable3);\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  }; //finalClick\n\n\n  var onFinalClick = function onFinalClick() {\n    var datatemp = datatable2;\n\n    if (namasearchact) {\n      datatemp = datatemp.filter(function (flt) {\n        return flt.connected_detail_name.toLowerCase().includes(namavalue.toLowerCase());\n      });\n    }\n\n    setdatatable(datatemp);\n  }; //handler\n\n\n  var handleDeleteRelationshipItem = function handleDeleteRelationshipItem() {\n    setloadingdelete(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/deleteRelationshipInventory\"), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataApidelete)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingdelete(false);\n      setmodaldelete(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Relationship berhasil dihapus\",\n          duration: 3\n        });\n\n        setdatatrigger(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleAddRelationshipItem = function handleAddRelationshipItem() {\n    setloadingadd(true);\n    delete dataApiadd.backup_connected_id; // console.log(dataApiadd)\n\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addRelationshipInventories\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataApiadd)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingadd(false);\n      setmodaladd(false);\n\n      if (res2.success) {\n        setdataApiadd({\n          subject_id: Number(itemid),\n          relationship_id: null,\n          is_inverse: null,\n          type_id: null,\n          connected_ids: null,\n          backup_connected_ids: null\n        });\n        setrelationnameadd(\"\");\n        setsublocdata(null);\n        setrelationselectedidxadd(-1);\n        setrelationselectedisinverseadd(-1);\n        setsubloctrig(-1);\n\n        _notification[\"success\"]({\n          message: \"Relationship Item berhasil ditambahkan\",\n          duration: 3\n        });\n\n        setdatatrigger(function (prev) {\n          return prev + 1;\n        });\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    if (datatrigger !== -1) {\n      setpraloadingrel(true);\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventory?id=\").concat(itemid, \"&type_id=-4\"), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setdatatable(res2.data.from_inverse.concat(res2.data.not_from_inverse));\n        setdatatable2(res2.data.from_inverse.concat(res2.data.not_from_inverse));\n        setdatatable3(res2.data.from_inverse.concat(res2.data.not_from_inverse));\n        setpraloadingrel(false);\n      });\n    }\n  }, [datatrigger]);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationships\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdisplaydatarelations(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    if (subloctrig !== -1) {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventoryDetailList?type_id=\").concat(subloctrig), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setsublocdata(res2.data.children);\n      });\n    } else if (detailtipeadd !== -10) {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventoryDetailList?type_id=\").concat(dataApiadd.type_id), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        dataApiadd.type_id === -3 && setdetailtipedataadd([res2.data]);\n        dataApiadd.type_id === -1 && setdetailtipedataadd(res2.data);\n        dataApiadd.type_id === -2 && setdetailtipedataadd(res2.data);\n        dataApiadd.type_id === -4 && setdetailtipedataadd(res2.data.data);\n        console.log();\n      });\n    }\n  }, [detailtipeadd, subloctrig]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b flex justify-between p-5 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl my-auto mr-1\",\n          children: \"Relationship\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1274,\n          columnNumber: 11\n        }, _this), maindata.model_inventory.asset.deleted_at !== null ? /*#__PURE__*/_jsxDEV(_Tooltip, {\n          placement: \"right\",\n          title: \"Asset Type telah dihapus, segera lakukan pengubahan Asset Type!\",\n          children: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {\n            style: {\n              color: \"brown\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1280,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1276,\n          columnNumber: 13\n        }, _this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1273,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        size: \"large\",\n        onClick: function onClick() {\n          setmodaladd(true);\n          /*rt.push(`/items/createrelationship/${itemid}?nama=${maindata.inventory_name}&asset_id=${maindata.model_inventory.asset.id}`)*/\n        },\n        children: \"Tambah\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1286,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1272,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mb-5\",\n      children: praloadingrel ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-full mr-1 grid grid-cols-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-11 mr-1\",\n          children: /*#__PURE__*/_jsxDEV(_Input, {\n            style: {\n              width: \"100%\",\n              marginRight: \"0.5rem\"\n            },\n            placeholder: \"Cari Nama Item\",\n            onChange: function onChange(e) {\n              return onChangeSearch(e);\n            },\n            allowClear: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1302,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1301,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            type: \"primary\",\n            style: {\n              width: \"100%\"\n            },\n            onClick: onFinalClick,\n            children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1315,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1310,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1309,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1300,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1298,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Table, {\n      loading: praloadingrel,\n      pagination: {\n        pageSize: 9\n      },\n      scroll: {\n        x: 200\n      },\n      dataSource: datatable,\n      columns: columns,\n      onRow: function onRow(record, rowIndex) {\n        return {\n          onMouseOver: function onMouseOver(event) {\n            setevents(record.id);\n          },\n          onMouseLeave: function onMouseLeave(event) {\n            setevents(0);\n          }\n        };\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1321,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"Apakah Anda yakin ingin menghapus Relationship berikut ini dari \\\"\", maindata.inventory_name, \"\\\"?\"]\n      }, void 0, true),\n      visible: modaldelete,\n      onCancel: function onCancel() {\n        setmodaldelete(false);\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      onOk: handleDeleteRelationshipItem,\n      okButtonProps: {\n        loading: loadingdelete\n      },\n      width: 700,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col border-b mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-semibold mb-0\",\n              children: \"Relationship Type:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1358,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: relationdatadelete.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1359,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1357,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-semibold mb-0\",\n              children: \"Tipe:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1362,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: relationdatadelete.tipe\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1363,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1361,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-semibold mb-0\",\n              children: \"Item:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1366,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: relationdatadelete.koneksi\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1367,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1365,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1356,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1371,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Input, {\n            placeholder: \"Masukkan Notes\",\n            onChange: function onChange(e) {}\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1372,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1370,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1355,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1338,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: [\"Form Tambah Relationship \\\"\", maindata.name, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1379,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodaladd(false);\n                /*setdataApiadd({ ...dataApiadd, relationship_id: null, type_id: null, connected_id: null })*/\n\n                /*console.log(dataApiadd)*/\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1384,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              disabled: disabledadd,\n              onClick: handleAddRelationshipItem,\n              loading: loadingadd,\n              children: \"Simpan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1395,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1382,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1378,\n        columnNumber: 11\n      }, _this),\n      visible: modaladd,\n      onCancel: function onCancel() {\n        setmodaladd(false);\n      },\n      footer: null,\n      width: 760,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-656990793\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-656990793\" + \" \" + \"mb-0\",\n            children: [\"Relationship Type \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-656990793\" + \" \" + \"namapart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1417,\n              columnNumber: 33\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1416,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: function onClick() {\n              setrelationnameddadd(function (prev) {\n                return !prev;\n              });\n            },\n            className: \"jsx-656990793\" + \" \" + \"w-full border p-2 hover:border-primary rounded-sm flex items-center justify-between cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"jsx-656990793\" + \" \" + \"mb-0\",\n              children: relationnameadd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1425,\n              columnNumber: 15\n            }, _this), relationnameddadd ? /*#__PURE__*/_jsxDEV(UpOutlined, {\n              style: {\n                color: \"rgb(229,231,235)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1427,\n              columnNumber: 17\n            }, _this) : /*#__PURE__*/_jsxDEV(DownOutlined, {\n              style: {\n                color: \"rgb(229,231,235)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1429,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1419,\n            columnNumber: 13\n          }, _this), relationnameddadd ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-656990793\" + \" \" + \"flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"jsx-656990793\" + \" \" + \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-656990793\" + \" \" + \"bg-gray-200 font-semibold p-3 w-6/12\",\n                children: \"Relationship Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1435,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-656990793\" + \" \" + \"bg-gray-200 font-semibold p-3 w-6/12\",\n                children: \"Inverse Relationship Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1438,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1434,\n              columnNumber: 17\n            }, _this), displaydatarelations.map(function (doc, idx) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-656990793\" + \" \" + \"flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: function onClick(e) {\n                    setrelationnameddadd(false);\n                    setrelationnameadd(doc.relationship_type);\n                    setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                      relationship_id: doc.id,\n                      is_inverse: false\n                    }));\n                    doc.id === null || dataApiadd.type_id === null ? setdisabledadd(true) : setdisabledadd(false);\n                    setrelationselectedidxadd(idx);\n                    setrelationselectedisinverseadd(false);\n                  },\n                  className: \"jsx-656990793\" + \" \" + \"hover:bg-ternary cursor-pointer hover:text-black p-3 w-6/12 \".concat(relationselectedidxadd === idx && relationselectedisinverseadd === false ? \" bg-secondary\" : \"bg-white\"),\n                  children: doc.relationship_type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1445,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: function onClick(e) {\n                    setrelationnameddadd(false);\n                    setrelationnameadd(doc.inverse_relationship_type);\n                    setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                      relationship_id: doc.id,\n                      is_inverse: true\n                    }));\n                    doc.id === null || dataApiadd.type_id === null ? setdisabledadd(true) : setdisabledadd(false);\n                    setrelationselectedidxadd(idx);\n                    setrelationselectedisinverseadd(true);\n                  },\n                  className: \"jsx-656990793\" + \" \" + \"hover:bg-ternary cursor-pointer hover:text-black p-3 w-6/12 \".concat(relationselectedidxadd === idx && relationselectedisinverseadd === true ? \" bg-secondary\" : \"bg-white\"),\n                  children: doc.inverse_relationship_type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1469,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1444,\n                columnNumber: 21\n              }, _this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1433,\n            columnNumber: 15\n          }, _this) : null, /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"656990793\",\n            children: \".namapart.jsx-656990793::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwOUNlLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy9kZXRhaWwvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbG9zZUNpcmNsZU91dGxpbmVkLFxuICBEZWxldGVPdXRsaW5lZCxcbiAgRG93bk91dGxpbmVkLFxuICBFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkLFxuICBTZWFyY2hPdXRsaW5lZCxcbiAgVXBPdXRsaW5lZCxcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEVtcHR5LFxuICBJbnB1dCxcbiAgTW9kYWwsXG4gIFBvcG92ZXIsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGFibGUsXG4gIFRhYnMsXG4gIFRpbWVsaW5lLFxuICBUb29sdGlwLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IE92ZXJ2aWV3ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBtYW51ZixcbiAgdmVuZG9yLFxuICBwcmFsb2FkaW5nLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMyLCBzZXRpbnZyZWxhdGlvbnMyXSA9IHVzZVN0YXRlKHt9KTtcblxuICAvL2hlbHBlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtYi04XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvXCI+T3ZlcnZpZXc8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZyA/IG51bGwgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgcnQucHVzaChgL2l0ZW1zL3VwZGF0ZS8ke2l0ZW1pZH1gKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgPFNwaW4gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCBteC01IHAtNSB3LTkvMTIgYm9yZGVyIHNoYWRvdy1tZCByb3VuZGVkLW1kIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TmFtYSBJdGVtOjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TW9kZWw6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPnttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZWwgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBNb2RlbCFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkFzc2V0IFR5cGU6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPlxuICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5NSUcgSUQ6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+U2VyaWFsIE51bWJlcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBcIlwiIHx8IG1haW5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TWFudWZhY3R1cmVyOjwvaDE+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihkb2NmaWwgPT4gZG9jZmlsLmlkID09PSBtYWluZGF0YS5tYW51ZmFjdHVyZXJfaWQpWzBdLmRlbGV0ZWRfYXQgIT09IG51bGxcbiAgICAgICAgICAgICAgbWFudWYuaXNudWxsID09PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTWFudWZhY3R1cmVyIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlZlbmRvcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS52ZW5kb3JfaWQgPT09IG51bGwgPyBcIi1cIiA6IHZlbmRvcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkxvY2F0aW9uOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEuaXNfY29uc3VtYWJsZSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgbWFpbmRhdGEucXVhbnRpdGllcy5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICB7aWR4ICsgMX0uIHtkb2MubmFtZX0gLSB7ZG9jLnF1YW50aXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHttYWluZGF0YS5sb2NhdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5sb2NhdGlvbl9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkRlc2tyaXBzaTo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5kZXNrcmlwc2kgPT09IFwiXCIgfHwgbWFpbmRhdGEuZGVza3JpcHNpID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuZGVza3JpcHNpfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICAgIHttYWluZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKChkb2Njb2x1bW5zLCBpZHhjb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZHhjb2x1bW5zfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgbWItNSAke1xuICAgICAgICAgICAgICAgICAgaWR4Y29sdW1ucyA9PT0gMCA/IGBtdC01YCA6IGBgXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5uYW1lfTpcbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Pntkb2Njb2x1bW5zLnZhbHVlLm9wc2lbZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0XX08Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLnZhbHVlLm9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChfLCBpZHhmaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2Njb2x1bW5zLnZhbHVlLmRlZmF1bHQuaW5jbHVkZXMoaWR4ZmlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge21vbWVudChkb2Njb2x1bW5zLnZhbHVlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZX08Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5jb25zdCBLb25maWd1cmFzaVBhcnQgPSAoe1xuICBpbml0UHJvcHMsXG4gIGl0ZW1pZCxcbiAgaW52cmVsYXRpb25zLFxuICBtYWluZGF0YSxcbiAgcHJhbG9hZGluZzIsXG4gIG1vZGVscyxcbiAgc2V0bW9kZWxzLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuXG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW21haW5wYXJ0ZGF0YSwgc2V0bWFpbnBhcnRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdwYXJ0LCBzZXRwcmFsb2FkaW5ncGFydF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVmaWx0ZXJhY3QsIHNldGFzc2V0dHlwZWZpbHRlcmFjdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3NldHR5cGV2YWx1ZSwgc2V0YXNzZXR0eXBldmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RlbGZpbHRlcmFjdCwgc2V0bW9kZWxmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx2YWx1ZSwgc2V0bW9kZWx2YWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0cmlnZ2VyLCBzZXRkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZSgwKTtcbiAgLy9jaGFuZ2VkIGRhbiByZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVwbGFjZW1lbnRzLCBzZXRkYXRhcmVwbGFjZW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BvcG92ZXIsIHNldHBvcG92ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2NoYW5nZWRcbiAgY29uc3QgW2RhdGFjaGFuZ2VkLCBzZXRkYXRhY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IG51bGwsXG4gICAgbW9kZWxfaWQ6IG51bGwsXG4gICAgaW52ZW50b3J5X25hbWU6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIHN0YXR1c191c2FnZToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICBtb2RlbF9pbnZlbnRvcnk6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIGFzc2V0OiB7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW2RhdGFBcGljaGFuZ2VkLCBzZXRkYXRhQXBpY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgcmVwbGFjZW1lbnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxjaGFuZ2VkLCBzZXRtb2RhbGNoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRjaGFuZ2VkLCBzZXRkaXNhYmxlZGNoYW5nZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlZCwgc2V0bG9hZGluZ2NoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdHJpZ2dlcmNoYW5nZWQsIHNldHRyaWdnZXJjaGFuZ2VkXSA9IHVzZVN0YXRlKC0xKTtcbiAgLy9yZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVtb3ZlZCwgc2V0ZGF0YXJlbW92ZWRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGF0YUFwaXJlbW92ZWQsIHNldGRhdGFBcGlyZW1vdmVkXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogMCxcbiAgICBpbnZlbnRvcnlfcGFydF9pZDogMCxcbiAgICBub3RlczogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFttb2RhbHJlbW92ZWQsIHNldG1vZGFscmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHJlbW92ZWQsIHNldGRpc2FibGVkcmVtb3ZlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdyZW1vdmVkLCBzZXRsb2FkaW5ncmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2JhY2t1cG1vZGVscywgc2V0YmFja3VwbW9kZWxzXSA9IHVzZVN0YXRlKG1vZGVscyk7XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAvLyB7XG4gICAgLy8gICAgIHRpdGxlOiAnTmFtYSBJdGVtJyxcbiAgICAvLyAgICAgZGF0YUluZGV4OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vICAgICBrZXk6ICdpbnZlbnRvcnlfbmFtZScsXG4gICAgLy8gfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNSUcgSURcIixcbiAgICAgIGRhdGFJbmRleDogXCJtaWdfaWRcIixcbiAgICAgIGtleTogXCJtaWdfaWRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlNlcmlhbCBOdW1iZXJcIixcbiAgICAgIGRhdGFJbmRleDogXCJzZXJpYWxfbnVtYmVyXCIsXG4gICAgICBrZXk6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PntyZWNvcmQuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IFwiLVwiIDogcmVjb3JkLnNlcmlhbF9udW1iZXJ9PC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNb2RlbFwiLFxuICAgICAgZGF0YUluZGV4OiBcIm1vZGVsX25hbWVcIixcbiAgICAgIGtleTogXCJtb2RlbF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkubmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQXNzZXQgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcImFzc2V0X25hbWVcIixcbiAgICAgIGtleTogXCJhc3NldF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuYXNzZXRfbmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgIHZpc2libGU9e3BvcG92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblZpc2libGVDaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiBgMHB4YCwgbWFyZ2luOiBgMHB4YCB9fVxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0cG9wb3ZlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGByZWRgLCBmb250U2l6ZTogYDEuMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhcmVtb3ZlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaXJlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1haW5wYXJ0ZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlfcGFydF9pZDogcmVjb3JkLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb3BvdmVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFya2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFjaGFuZ2VkKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY2hhbmdlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRyaWdnZXJjaGFuZ2VkKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbnRpa2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+S2VsdWFya2FuIFBhcnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+R2FudGlrYW4gUGFydDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hlbHBlclxuICAvLzEgbnlhIGxhZ2kgYWRhIGRpIHVzZUVmZmVjdFxuICBjb25zdCByZWN1cnNpdmVGbGF0dGVuQXJyID0gKGRhdGFhc3NldHMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBkYXRhYXNzZXRzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZCk7XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZWN1cnNpdmVGbGF0dGVuQXJyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBmdW5jdGlvbiByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhYVtpXVtcImtleVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXCJ2YWx1ZVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXG4gICAgICAgIFwidGl0bGVcIlxuICAgICAgXSA9IGAke2RhdGFhW2ldLm1pZ19pZH0gLSAke2RhdGFhW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgZGF0YWFbaV1bXCJjaGlsZHJlblwiXSA9IGRhdGFhW2ldLmludmVudG9yeV9yZXBsYWNlbWVudF9wYXJ0cztcbiAgICAgIGRlbGV0ZSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBpZiAoZGF0YWFbaV0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWFbaV0uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YWE7XG4gIH1cblxuICAvL2hhbmRsZXJcbiAgY29uc3QgYXNzZXRQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQgPSAoZG9jLCBhc3NldGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZCA9PT0gTnVtYmVyKGFzc2V0aWQpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIGFzc2V0UGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZG9jW2ldLmNoaWxkcmVuLCBhc3NldGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbW9kZWxQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwgPSAoZG9jLCBtb2RlbGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2lkID09PSBtb2RlbGlkKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG1vZGVsUGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZG9jW2ldLmNoaWxkcmVuLCBtb2RlbGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbmFtZVBhcnQgPSBbXTtcbiAgY29uc3QgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lID0gKGRvYywgbmFtZSkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5pbnZlbnRvcnlfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgbmFtZVBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZG9jW2ldLmNoaWxkcmVuLCBuYW1lKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgLy9kZWxpdmVyIEFQSVxuICBjb25zdCBoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0ID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdjaGFuZ2VkKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9yZXBsYWNlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpY2hhbmdlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpZ2FudGlcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVSZW1vdmVJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5ncmVtb3ZlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVtb3ZlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpcmVtb3ZlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ncmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpa2VsdWFya2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIGFzc2V0IHR5cGVcbiAgY29uc3Qgb25DaGFuZ2VBc3NldFR5cGUgPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRhc3NldHR5cGVmaWx0ZXJhY3QoZmFsc2UpO1xuICAgICAgc2V0bW9kZWxzKGJhY2t1cG1vZGVscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9MTAwJmFzc2V0X2lkPSR7aWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwID8gc2V0bW9kZWxzKFtdKSA6IHNldG1vZGVscyhyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0YXNzZXR0eXBldmFsdWUoaWQpO1xuICAgIH1cbiAgfTtcbiAgLy9zZWFyY2ggbW9kZWxcbiAgY29uc3Qgb25DaGFuZ2VNb2RlbCA9IChpZG1vZGVsKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZG1vZGVsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldG1vZGVsZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0bW9kZWx2YWx1ZShpZG1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAoYXNzZXR0eXBlZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRhdGF0ZW1wLCBhc3NldHR5cGV2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IGFzc2V0UGFydDtcbiAgICB9XG4gICAgaWYgKG1vZGVsZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Nb2RlbChkYXRhdGVtcCwgbW9kZWx2YWx1ZSlcbiAgICAgIHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBtb2RlbFBhcnQ7XG4gICAgfVxuICAgIGlmIChuYW1hc2VhcmNoYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZGF0YXRlbXAsIG5hbWF2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IG5hbWVQYXJ0O1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBjb25zdCByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuID0gKHJzYykgPT4ge1xuICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcnNjW2ldLmtleSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS52YWx1ZSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS50aXRsZSA9IGAke3JzY1tpXS5taWdfaWR9IC0gJHtyc2NbaV0ubW9kZWxfaW52ZW50b3J5Py5uYW1lfWA7XG4gICAgICAgICAgICByc2NbaV0uY2hpbGRyZW4gPSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5pbnZlbnRvcnlfcGFydHM7XG4gICAgICAgICAgICBpZiAocnNjW2ldLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4ucnNjW2ldLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJzY1tpXS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJlczMuaW52ZW50b3J5X3BhcnRzKTtcbiAgICAgICAgc2V0bWFpbnBhcnRkYXRhKHtcbiAgICAgICAgICAuLi5yZXMzLFxuICAgICAgICAgIGludmVudG9yeV9wYXJ0czogdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldGRhdGF0YWJsZSh0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMih0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMyh0KTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ3BhcnQoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmlnZ2VyY2hhbmdlZCAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVwbGFjZW1lbnRzP2lkPSR7ZGF0YWNoYW5nZWQubW9kZWxfaW52ZW50b3J5LmFzc2V0X2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFwZGF0YSA9IHJlY3Vyc2l2ZU1vZGlmRGF0YShyZXMyLmRhdGEpO1xuICAgICAgICAgIHNldGRhdGFyZXBsYWNlbWVudHMobWFwZGF0YSk7XG4gICAgICAgICAgaWYgKG1hcGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRkaXNhYmxlZGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdHJpZ2dlcmNoYW5nZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPktvbmZpZ3VyYXNpIFBhcnQ8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIC8qY29uc29sZS5sb2cobWFpbnBhcnRkYXRhKTsgY29uc29sZS5sb2coZGF0YXJlbW92ZWQpKi8gcnQucHVzaChcbiAgICAgICAgICAgICAgICBgL2l0ZW1zL2NyZWF0ZXBhcnQvJHtpdGVtaWR9P25hbWE9JHttYWlucGFydGRhdGEubWlnX2lkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nMiA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBtci0xXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAsIG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBOYW1hIEl0ZW1cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2VTZWFyY2goZSl9XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQXNzZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZShleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17ZmV0Y2hpbmdtb2RlbCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgIH0vZ2V0RmlsdGVyTW9kZWxzP25hbWU9JHt2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIn1gLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttb2RlbHMubWFwKChkb2Ntb2RlbHMsIGlkeG1vZGVscykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvY21vZGVscy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY21vZGVscy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkZpbmFsQ2xpY2t9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPFRhYmxlXG4gICAgICAgIGxvYWRpbmc9e3ByYWxvYWRpbmdwYXJ0fVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gUGVyZ2FudGlhbiBQYXJ0IFwie2RhdGFjaGFuZ2VkLmludmVudG9yeV9uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0fVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjaGFuZ2VkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCB5YW5nIEluZ2luIERpZ2FudGl7XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGF0YWJsZTN9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZGF0YWNoYW5nZWQua2V5fVxuICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIEFzc2V0IFR5cGUgZGFyaSBJdGVtIFBhcnQgeWFuZyBpbmdpbiBkaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAge2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCBQZW5nZ2FudGkgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhY2hhbmdlZC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGFyZXBsYWNlbWVudHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFyZXBsYWNlbWVudHMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLmludmVudG9yeV9uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgPC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFBcGljaGFuZ2VkLm5vdGVzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5nZWx1YXJrYW4gaXRlbSBcIlxuICAgICAgICAgICAge2RhdGFyZW1vdmVkLmludmVudG9yeV9uYW1lfVwiIGRhcmkgXCJ7bWFpbnBhcnRkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxyZW1vdmVkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFscmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlUmVtb3ZlSXRlbVBhcnR9XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3JlbW92ZWQgfX1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRhdGFBcGlyZW1vdmVkKHsgLi4uZGF0YUFwaXJlbW92ZWQsIG5vdGVzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgUmVsYXRpb25zaGlwID0gKHsgaW5pdFByb3BzLCBtYWluZGF0YSwgaXRlbWlkIH0pID0+IHtcbiAgLy9pbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtsb2FkaW5ncmVsLCBzZXRsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdyZWwsIHNldHByYWxvYWRpbmdyZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbZGF0YUFwaWRlbGV0ZSwgc2V0ZGF0YUFwaWRlbGV0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25kYXRhZGVsZXRlLCBzZXRyZWxhdGlvbmRhdGFkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgdGlwZTogXCJcIixcbiAgICBrb25la3NpOiBcIlwiLFxuICB9KTtcbiAgLy9hZGRcbiAgY29uc3QgW2RhdGFBcGlhZGQsIHNldGRhdGFBcGlhZGRdID0gdXNlU3RhdGUoe1xuICAgIHN1YmplY3RfaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgIHR5cGVfaWQ6IG51bGwsXG4gICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNwbGF5ZGF0YXJlbGF0aW9ucywgc2V0ZGlzcGxheWRhdGFyZWxhdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbcmVsYXRpb25uYW1lYWRkLCBzZXRyZWxhdGlvbm5hbWVhZGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbm5hbWVkZGFkZCwgc2V0cmVsYXRpb25uYW1lZGRhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlkeGFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkLCBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkXSA9XG4gICAgdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGV0YWlsdGlwZWFkZCwgc2V0ZGV0YWlsdGlwZWFkZF0gPSB1c2VTdGF0ZSgtMTApO1xuICBjb25zdCBbZGV0YWlsdGlwZWRhdGFhZGQsIHNldGRldGFpbHRpcGVkYXRhYWRkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGFsYWRkLCBzZXRtb2RhbGFkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZCwgc2V0ZGlzYWJsZWRhZGRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nYWRkLCBzZXRsb2FkaW5nYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZldGNoaW5nbW9kZWwsIHNldGZldGNoaW5nbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jZGF0YSwgc2V0c3VibG9jZGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N1YmxvY3RyaWcsIHNldHN1YmxvY3RyaWddID0gdXNlU3RhdGUoLTEpO1xuXG4gIC8vZGVjbGFyYXRpb25cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJSZWxhdGlvbnNoaXAgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgICBrZXk6IFwicmVsYXRpb25zaGlwX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIk5hbWFcIixcbiAgICAgIGRhdGFJbmRleDogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICAgIGtleTogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJ0eXBlXCIsXG4gICAgICBrZXk6IFwidHlwZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWRlbGV0ZSh7IGlkOiByZWNvcmQuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25kYXRhZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZC5yZWxhdGlvbnNoaXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGU6IHJlY29yZC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAga29uZWtzaTogcmVjb3JkLmNvbm5lY3RlZF9kZXRhaWxfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogYDEuMnJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogYHBvaW50ZXJgLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIC8vaGFuZGxlclxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgZGF0YXRlbXAgPSBkYXRhdGVtcC5maWx0ZXIoKGZsdCkgPT4ge1xuICAgICAgICByZXR1cm4gZmx0LmNvbm5lY3RlZF9kZXRhaWxfbmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKG5hbWF2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdkZWxldGUodHJ1ZSk7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlUmVsYXRpb25zaGlwSW52ZW50b3J5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpZGVsZXRlKSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgYmVyaGFzaWwgZGloYXB1c1wiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdhZGQodHJ1ZSk7XG4gICAgZGVsZXRlIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhQXBpYWRkKVxuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRSZWxhdGlvbnNoaXBJbnZlbnRvcmllc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWFkZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nYWRkKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxhZGQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICAgICAgICAgIGlzX2ludmVyc2U6IG51bGwsXG4gICAgICAgICAgICB0eXBlX2lkOiBudWxsLFxuICAgICAgICAgICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiBudWxsLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChcIlwiKTtcbiAgICAgICAgICBzZXRzdWJsb2NkYXRhKG51bGwpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoLTEpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoLTEpO1xuICAgICAgICAgIHNldHN1YmxvY3RyaWcoLTEpO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgSXRlbSBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGF0cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0cHJhbG9hZGluZ3JlbCh0cnVlKTtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRkYXRhdGFibGUoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTIoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTMoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldHByYWxvYWRpbmdyZWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2N0cmlnICE9PSAtMSkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtzdWJsb2N0cmlnfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRldGFpbHRpcGVhZGQgIT09IC0xMCkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkYXRhQXBpYWRkLnR5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKFtyZXMyLmRhdGFdKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0xICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTQgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RldGFpbHRpcGVhZGQsIHN1YmxvY3RyaWddKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG8gbXItMVwiPlJlbGF0aW9uc2hpcDwvaDE+XG4gICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5kZWxldGVkX2F0ICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkFzc2V0IFR5cGUgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBBc3NldCBUeXBlIVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTsgLypydC5wdXNoKGAvaXRlbXMvY3JlYXRlcmVsYXRpb25zaGlwLyR7aXRlbWlkfT9uYW1hPSR7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9JmFzc2V0X2lkPSR7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmlkfWApKi9cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgVGFtYmFoXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZ3JlbCA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMTEgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncmVsfVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBSZWxhdGlvbnNoaXAgYmVyaWt1dCBpbmkgZGFyaSBcIlxuICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGJvcmRlci1iIG1iLTVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5SZWxhdGlvbnNoaXAgVHlwZTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMFwiPlRpcGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUudGlwZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5JdGVtOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLmtvbmVrc2l9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiIG9uQ2hhbmdlPXsoZSkgPT4ge319PjwvSW5wdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIFJlbGF0aW9uc2hpcCBcInttYWluZGF0YS5uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApOyAvKnNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCByZWxhdGlvbnNoaXBfaWQ6IG51bGwsIHR5cGVfaWQ6IG51bGwsIGNvbm5lY3RlZF9pZDogbnVsbCB9KSovIC8qY29uc29sZS5sb2coZGF0YUFwaWFkZCkqL1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJlbGF0aW9uc2hpcEl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nYWRkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsYWRkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NzYwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFJlbGF0aW9uc2hpcCBUeXBlIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYm9yZGVyIHAtMiBob3Zlcjpib3JkZXItcHJpbWFyeSByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZCgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9ubmFtZWFkZH08L3A+XG4gICAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgICA8VXBPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPERvd25PdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBJbnZlcnNlIFJlbGF0aW9uc2hpcCBUeXBlXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZGlzcGxheWRhdGFyZWxhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctdGVybmFyeSBjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsYWNrIHAtMyB3LTYvMTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlkeGFkZCA9PT0gaWR4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IG51bGwgfHwgZGF0YUFwaWFkZC50eXBlX2lkID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZGFkZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLnJlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbnZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmludmVyc2VfcmVsYXRpb25zaGlwX3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFRpcGUgPHNwYW4gY2xhc3NOYW1lPVwidGlwZXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpYWRkLnR5cGVfaWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgdHlwZV9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5yZWxhdGlvbnNoaXBfaWQgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVhZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgID8gKHNldHN1YmxvY3RyaWcoLTEpLCBzZXRzdWJsb2NkYXRhKG51bGwpKVxuICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0zfT5Db21wYW55PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTR9PkFzc2V0IFR5cGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXBlcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5iYWNrdXBfY29ubmVjdGVkX2lkcyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHNbMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cz17WzFdfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17ZGV0YWlsdGlwZWRhdGFhZGR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRzdWJsb2N0cmlnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlPC9wPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgZGVuZ2FuIE1vZGVsIElEXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZtb2RlbF9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3N1YmxvY2RhdGEgIT09IG51bGwgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlIChTdWJsb2thc2kpPC9wPlxuICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NkYXRhfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIGNvbm5lY3RlZF9pZHM6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQXNzb2NpYXRpb24gPSAoeyBpbml0UHJvcHMsIGl0ZW1pZCwgbWFpbmRhdGEsIHByYWxvYWRpbmcgfSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFzc29jaWF0aW9uPC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHB4LTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBtYWluZGF0YS5hc3NvY2lhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHttYWluZGF0YS5hc3NvY2lhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgc2hhZG93LW1kIHB5LTQgcHgtNSBib3JkZXIgbWItNCBmbGV4IGp1c3RpZnktYmV0d2VlbiB3LTEwLzEyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcnQucHVzaChgL3RpY2tldHMvZGV0YWlsLyR7ZG9jLmlkfT9hY3RpdmU9ZGV0YWlsSXRlbWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+VGlja2V0IE51bWJlcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MudGlja2V0X25hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLXJlZC0xMDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gNCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQWNpdGl2dHkgPSAoe1xuICBpdGVtaWQsXG4gIGluaXRQcm9wcyxcbiAgbWFpbmRhdGEsXG4gIGludnJlbGF0aW9ucyxcbiAgcHJhbG9hZGluZyxcbiAgYWN0aXZpdHl0cmlnZ2VyLFxufSkgPT4ge1xuICBjb25zdCBbZGF5bG9ncywgc2V0ZGF5bG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt3ZWVrbG9ncywgc2V0d2Vla2xvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9yZWxvZ3MsIHNldG1vcmVsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdsb2dzLCBzZXRwcmFsb2FkaW5nbG9nc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2ludmVudG9yaWVzLCBzZXRpbnZlbnRvcmllc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRwcmFsb2FkaW5nbG9ncyh0cnVlKTtcblxuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFjdGl2aXR5SW52ZW50b3J5TG9ncz9pZD0ke2l0ZW1pZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgZGF5bG9nc21hcCA9IHJlczIuZGF0YS5kYXlfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gRGloYXB1czogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB3ZWVrbG9nc21hcCA9IHJlczIuZGF0YS53ZWVrX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1vcmVsb2dzbWFwID0gcmVzMi5kYXRhLmVsc2VfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXlsb2dzKGRheWxvZ3NtYXApO1xuICAgICAgICBzZXR3ZWVrbG9ncyh3ZWVrbG9nc21hcCk7XG4gICAgICAgIHNldG1vcmVsb2dzKG1vcmVsb2dzbWFwKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgLy8gLnRoZW4ocmVzMyA9PiB7XG4gICAgLy8gICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLCB7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgIC8vICAgICAgICAgaGVhZGVyczoge1xuICAgIC8vICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLy8gICAgICAgICAudGhlbihyZXM0ID0+IHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgY29uY2F0YXJyID0gcmVzNC5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzNC5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG5cbiAgICAvLyAgICAgICAgICAgICB2YXIgbG9nczJtYXAgPSByZXMzLmRhdGEucmVsYXRpb25zaGlwLm1hcCgoZG9jcmVsLCBpZHhyZWwpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZW5ldzIgPSBtb21lbnQoZG9jcmVsLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdCgnTExMJylcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGRlc2NuZXcyID0gJydcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGlkbG9nbmV3ID0gLTFcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGVzYzIgPSBkb2NyZWwuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBpZGxvZ25ldyA9IGNvbmNhdGFyci5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gZG9jcmVsLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pZClbMF0gOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHt0eXBlb2YgKGlkbG9nbmV3KSA9PT0gJ3VuZGVmaW5lZCcgPyBcIihTdWRhaCBEaWhhcHVzIGxhZ2kpXCIgOiBgJHtpZGxvZ25ldy5yZWxhdGlvbnNoaXB9YH1cImAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnRGVsZXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcGAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAuLi5kb2NyZWwsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlbmV3MixcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3MlxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICBzZXRsb2dzMihsb2dzMm1hcClcbiAgICAvLyAgICAgICAgICAgICBzZXRwcmFsb2FkaW5nbG9nczIoZmFsc2UpXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vIH0pXG4gIH0sIFthY3Rpdml0eXRyaWdnZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFjdGl2aXR5PC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5IYXJpIEluaTwvaDE+XG4gICAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogZGF5bG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7ZGF5bG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IHdlZWtsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIHt3ZWVrbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctNi8xMlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+TWluZ2d1IExhbHU8L2gxPlxuICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IG1vcmVsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIHttb3JlbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUaW1lbGluZS5JdGVtIGxhYmVsPXtkb2Nsb2cuZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbG9nLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZWgge2RvY2xvZy5jYXVzZXJfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IEl0ZW1EZXRhaWwgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8xLiBJbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBhY3RpdmVUYWIgPSBcIm92ZXJ2aWV3XCI7XG4gIGNvbnN0IHsgYWN0aXZlIH0gPSBydC5xdWVyeTtcbiAgaWYgKGFjdGl2ZSkge1xuICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZTtcbiAgfVxuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMiwgMik7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiRGV0YWlsIEl0ZW1cIjtcbiAgY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xuXG4gIC8vdXNlU3RhdGVcbiAgY29uc3QgW21haW5kYXRhLCBzZXRtYWluZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiBcIlwiLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgY3JlYXRlZF9hdDogXCJcIixcbiAgICB1cGRhdGVkX2F0OiBcIlwiLFxuICAgIGRlbGV0ZWRfYXQ6IFwiXCIsXG4gICAgYXNzZXRfbmFtZTogXCJcIixcbiAgICBtb2RlbF9uYW1lOiBcIlwiLFxuICAgIGxvY2F0aW9uX25hbWU6IFwiXCIsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsb2NhdGlvbl9pbnZlbnRvcnk6IHtcbiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsXG4gICAgICBjb21wYW55X25hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBhZGRpdGlvbmFsX2F0dHJpYnV0ZXM6IFtdLFxuICAgIGludmVudG9yeV9wYXJ0czogW10sXG4gICAgYXNzb2NpYXRpb25zOiBbXSxcbiAgICBxdWFudGl0aWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGFzc2V0czogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczoge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBbcmVsc2hpcCwgc2V0cmVsc2hpcF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51Ziwgc2V0bWFudWZdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2ZW5kb3IsIHNldHZlbmRvcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nMiwgc2V0cHJhbG9hZGluZzJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIC8vZGVsZXRlXG4gIGNvbnN0IFttb2RhbGRlbGV0ZSwgc2V0bW9kYWxkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2RlbGV0ZSwgc2V0bG9hZGluZ2RlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vbm90ZXNcbiAgY29uc3QgW25vdGVzLCBzZXRub3Rlc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGFsbm90ZXMsIHNldG1vZGFsbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ25vdGVzLCBzZXRsb2FkaW5nbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2tvbmRpc2lcbiAgY29uc3QgW2tvbmRpc2ksIHNldGtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtub3Rla29uZGlzaSwgc2V0bm90ZWtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbGtvbmRpc2ksIHNldG1vZGFsa29uZGlzaV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5a29uZGlzaSwgc2V0ZGlzcGxheWtvbmRpc2ldID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5na29uZGlzaSwgc2V0bG9hZGluZ2tvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL3N0YXR1cyBwZW1ha2FpYW5cbiAgY29uc3QgW2NoYW5nZXVzYWdlLCBzZXRjaGFuZ2V1c2FnZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBub3RlczogXCJcIixcbiAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogXCJcIixcbiAgICBjb25uZWN0ZWRfaWQ6IFwiXCIsXG4gICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNhYmxlZHVzYWdlLCBzZXRkaXNhYmxlZHVzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbW9kYWx1c2FnZSwgc2V0bW9kYWx1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5dXNhZ2UsIHNldGRpc3BsYXl1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UsIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2VdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXNhZ2UsIHNldGxvYWRpbmd1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIGNvbnN0IFthZ2VudHMsIHNldGFnZW50c10gPSB1c2VTdGF0ZShbXSlcbiAgLy8gY29uc3QgW3JlcXVlc3RlcnMsIHNldHJlcXVlc3RlcnNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IFtkZXRhaWxsaXN0LCBzZXRkZXRhaWxsaXN0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscywgc2V0bW9kZWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9ucywgc2V0c3VibG9jYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvY2F0aW9uc2Rpc3BsYXksIHNldGxvY2F0aW9uc2Rpc3BsYXldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jYXRpb250cmlnZ2VyLCBzZXRzdWJsb2NhdGlvbnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWN0aXZpdHl0cmlnZ2VyLCBzZXRhY3Rpdml0eXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy9oZWxwZXJcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZWxldGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgICBydC5wdXNoKGAvaXRlbXNgKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVOb3Rlc0l0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ25vdGVzKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRJbnZlbnRvcnlOb3Rlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ25vdGVzKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJOb3RlcyBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH0/YWN0aXZlPWFjdGl2aXR5YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVLb25kaXNpSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5na29uZGlzaSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzQ29uZGl0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZWtvbmRpc2ksXG4gICAgICAgIHN0YXR1c19jb25kaXRpb246IGtvbmRpc2ksXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgS29uZGlzaSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVVc2FnZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3VzYWdlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9jaGFuZ2VTdGF0dXNVc2FnZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2V1c2FnZSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ndXNhZ2UoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy91c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5P2lkPSR7aXRlbWlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSBcImFkZGl0aW9uYWxfYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04ucGFyc2UoZG9jLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0bWFpbmRhdGEodCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICAgICAgICB2YXIgZGVsX21hbnVmID0gbnVsbDtcbiAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsXG4gICAgICAgICAgICAgID8gKGRlbF9tYW51ZiA9IG51bGwpXG4gICAgICAgICAgICAgIDogKGRlbF9tYW51ZiA9IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICApWzBdLmRlbGV0ZWRfYXQpO1xuICAgICAgICAgICAgc2V0bWFudWYoe1xuICAgICAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwXG4gICAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgICA6IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICAgIClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgaXNudWxsOiBkZWxfbWFudWYgIT09IG51bGwgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlczMudmVuZG9yX2lkID09PSBudWxsIHx8IHJlczMudmVuZG9yX2lkID09PSAwXG4gICAgICAgICAgICAgID8gc2V0dmVuZG9yKFwiLVwiKVxuICAgICAgICAgICAgICA6IHNldHZlbmRvcihcbiAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXT8ubmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRwcmFsb2FkaW5nMihmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRGaWx0ZXJNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgIT09IFwiXCIpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0Q2hhbmdlU3RhdHVzVXNhZ2VEZXRhaWxMaXN0P2lkPSR7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgID8gc2V0ZGV0YWlsbGlzdChbcmVzMi5kYXRhXSlcbiAgICAgICAgICAgIDogc2V0ZGV0YWlsbGlzdChyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NoYW5nZXVzYWdlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN1YmxvY2F0aW9udHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeURldGFpbExpc3Q/dHlwZV9pZD0ke2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgIHNldHN1YmxvY2F0aW9ucyhyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzdWJsb2NhdGlvbnRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRyZWxzaGlwKHJlczIuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczIuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktNSBweC00IGJvcmRlci10IGJvcmRlci1iIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LWdyYXktNDAwIG1iLTBcIj5JdGVtOjwvcD5cbiAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTIgdGV4dC0yeGwgbWItMCBtci0yMFwiPlxuICAgICAgICAgICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfSAtIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1yLTcgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPlN0YXR1cyBQZW1ha2FpYW46PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5dXNhZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTByZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc3RhdHVzX3VzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c191c2FnZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1c2FnZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5JbiBVc2VkPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gU3RvY2s8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5SZXBsYWNlbWVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+S29uZGlzaTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlrb25kaXNpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c19jb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0a29uZGlzaSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdyZXk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG5vdGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGFtYmFoIE5vdGVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgSGFwdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBoaWRkZW4gbWQ6YmxvY2tcIj5cbiAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgIHRhYlBvc2l0aW9uPXtgbGVmdGB9XG4gICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgb25UYWJDbGljaz17KGtleSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiYWN0aXZpdHlcIikge1xuICAgICAgICAgICAgICAgICAgc2V0YWN0aXZpdHl0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgYmxvY2sgbWQ6aGlkZGVuXCI+XG4gICAgICAgICAgICA8VGFicyB0YWJQb3NpdGlvbj17YHRvcGB9IGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn0+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIk92ZXJ2aWV3XCIga2V5PXtgb3ZlcnZpZXdgfT5cbiAgICAgICAgICAgICAgICA8T3ZlcnZpZXdcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBtYW51Zj17bWFudWZ9XG4gICAgICAgICAgICAgICAgICB2ZW5kb3I9e3ZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJLb25maWd1cmFzaSBQYXJ0XCIga2V5PXtga29uZmlndXJhc2lQYXJ0YH0+XG4gICAgICAgICAgICAgICAgPEtvbmZpZ3VyYXNpUGFydFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZzI9e3ByYWxvYWRpbmcyfVxuICAgICAgICAgICAgICAgICAgbW9kZWxzPXttb2RlbHN9XG4gICAgICAgICAgICAgICAgICBzZXRtb2RlbHM9e3NldG1vZGVsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIlJlbGF0aW9uc2hpcFwiIGtleT17YHJlbGF0aW9uc2hpcGB9PlxuICAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBc3NvY2lhdGlvblwiIGtleT17YGFzc29jaWF0aW9uYH0+XG4gICAgICAgICAgICAgICAgPEFzc29jaWF0aW9uXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFjdGl2aXR5XCIga2V5PXtgYWN0aXZpdHlgfT5cbiAgICAgICAgICAgICAgICA8QWNpdGl2dHlcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIGFjdGl2aXR5dHJpZ2dlcj17YWN0aXZpdHl0cmlnZ2VyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgUGVtYWthaWFuIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdXNhZ2V9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVc2FnZUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5ndXNhZ2V9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1c2FnZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBTdGF0dXMgUGVtYWthaWFuIDxzcGFuIGNsYXNzTmFtZT1cInVzYWdlbW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PkluIFVzZWQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5JbiBTdG9jazwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlJlcGxhY2VtZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNhZ2Vtb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGFuZ2V1c2FnZS5zdGF0dXNfdXNhZ2UgPT09IDEgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIERpZ3VuYWthbiBPbGVoIDxzcGFuIGNsYXNzTmFtZT1cImJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF90eXBlX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxfY29ubmVjdGVkX2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGxvY2F0aW9uc2Rpc3BsYXkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstMX0+QWdlbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ5bW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItMyBtbC01XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgTmFtYSB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmIFwiQWdlbnRcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmIFwiUmVxdWVzdGVyXCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyAmJiBcIkNvbXBhbnlcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hYnltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyA/IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0c3VibG9jYXRpb250cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bG9jYXRpb25zZGlzcGxheSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhbmdldXNhZ2UuY29ubmVjdGVkX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZCA9PT0gLTMgfHwgbG9jYXRpb25zZGlzcGxheSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWwtNVwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5hbWEgTG9rYXNpPC9wPlxuICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWNvbXBhbnl1c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e3N1YmxvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgbm90ZXM6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgS29uZGlzaSB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVLb25kaXNpSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdrb25kaXNpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsa29uZGlzaX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIEtvbmRpc2kgPHNwYW4gY2xhc3NOYW1lPVwia29uZGlzaW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2tvbmRpc2l9PlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rb25kaXNpbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRub3Rla29uZGlzaShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5cbiAgICAgICAgICAgICAgRm9ybSBUYW1iYWggTm90ZXMge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25vdGVzID09PSBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTm90ZXNJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ25vdGVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbm90ZXN9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezYwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0bm90ZXMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGl0ZW0gXCJ7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9IC17XCIgXCJ9XG4gICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxkZWxldGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxkZWxldGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZURlbGV0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ2RlbGV0ZSB9fVxuICAgICAgICB3aWR0aD17NzIwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi00XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBtZW1pbGlraSBJdGVtIFBhcnQgc2ViYWdhaSBiZXJpa3V0IDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9wYXJ0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubWFwKChkb2NlbXB0eSwgaWR4ZW1wdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHhlbXB0eX0+XG4gICAgICAgICAgICAgICAgICAgICAgLSA8c3Ryb25nPntkb2NlbXB0eS5pbnZlbnRvcnlfbmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIEl0ZW0gaW5pIHNlZGFuZyBtZW1pbGlraSBodWJ1bmdhbiBkZW5nYW4gaXRlbSBiZXJpa3V0OlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14c1wiPlxuICAgICAgICAgICAgICB7cmVsc2hpcC5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgcmVsc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpZHhyZWx9PlxuICAgICAgICAgICAgICAgICAgICAte1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2NyZWwudHlwZX0gLSB7ZG9jcmVsLmNvbm5lY3RlZF9kZXRhaWxfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICAgIERlbmdhbiBtZW5naGFwdXMgaXRlbSBpbmkgYWthbiBtZW5naGlsYW5na2FuIHNlbHVydWggaHVidW5nYW5cbiAgICAgICAgICAgICAgZGVuZ2FuIGl0ZW0gZGlhdGFzIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgY29uc3QgaXRlbWlkID0gcGFyYW1zLml0ZW1JZDtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtRGV0YWlsO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1415,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-2343758608\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-2343758608\" + \" \" + \"mb-0\",\n            children: [\"Tipe \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-2343758608\" + \" \" + \"tipepart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1509,\n              columnNumber: 20\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1508,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Select, {\n            value: dataApiadd.type_id,\n            onChange: function onChange(value) {\n              setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                type_id: value\n              }));\n              dataApiadd.relationship_id === null || value === null ? setdisabledadd(true) : setdisabledadd(false);\n              setdetailtipeadd(value);\n              dataApiadd.type_id === -3 ? (setsubloctrig(-1), setsublocdata(null)) : null;\n            },\n            children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: -1,\n              children: \"Agent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1524,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: -2,\n              children: \"Requester\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1525,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: -3,\n              children: \"Company\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1526,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: -4,\n              children: \"Asset Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1527,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1511,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"2343758608\",\n            children: \".tipepart.jsx-2343758608::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5L0NlLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy9kZXRhaWwvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbG9zZUNpcmNsZU91dGxpbmVkLFxuICBEZWxldGVPdXRsaW5lZCxcbiAgRG93bk91dGxpbmVkLFxuICBFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkLFxuICBTZWFyY2hPdXRsaW5lZCxcbiAgVXBPdXRsaW5lZCxcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEVtcHR5LFxuICBJbnB1dCxcbiAgTW9kYWwsXG4gIFBvcG92ZXIsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGFibGUsXG4gIFRhYnMsXG4gIFRpbWVsaW5lLFxuICBUb29sdGlwLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IE92ZXJ2aWV3ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBtYW51ZixcbiAgdmVuZG9yLFxuICBwcmFsb2FkaW5nLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMyLCBzZXRpbnZyZWxhdGlvbnMyXSA9IHVzZVN0YXRlKHt9KTtcblxuICAvL2hlbHBlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtYi04XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvXCI+T3ZlcnZpZXc8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZyA/IG51bGwgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgcnQucHVzaChgL2l0ZW1zL3VwZGF0ZS8ke2l0ZW1pZH1gKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgPFNwaW4gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCBteC01IHAtNSB3LTkvMTIgYm9yZGVyIHNoYWRvdy1tZCByb3VuZGVkLW1kIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TmFtYSBJdGVtOjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TW9kZWw6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPnttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZWwgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBNb2RlbCFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkFzc2V0IFR5cGU6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPlxuICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5NSUcgSUQ6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+U2VyaWFsIE51bWJlcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBcIlwiIHx8IG1haW5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TWFudWZhY3R1cmVyOjwvaDE+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihkb2NmaWwgPT4gZG9jZmlsLmlkID09PSBtYWluZGF0YS5tYW51ZmFjdHVyZXJfaWQpWzBdLmRlbGV0ZWRfYXQgIT09IG51bGxcbiAgICAgICAgICAgICAgbWFudWYuaXNudWxsID09PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTWFudWZhY3R1cmVyIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlZlbmRvcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS52ZW5kb3JfaWQgPT09IG51bGwgPyBcIi1cIiA6IHZlbmRvcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkxvY2F0aW9uOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEuaXNfY29uc3VtYWJsZSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgbWFpbmRhdGEucXVhbnRpdGllcy5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICB7aWR4ICsgMX0uIHtkb2MubmFtZX0gLSB7ZG9jLnF1YW50aXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHttYWluZGF0YS5sb2NhdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5sb2NhdGlvbl9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkRlc2tyaXBzaTo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5kZXNrcmlwc2kgPT09IFwiXCIgfHwgbWFpbmRhdGEuZGVza3JpcHNpID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuZGVza3JpcHNpfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICAgIHttYWluZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKChkb2Njb2x1bW5zLCBpZHhjb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZHhjb2x1bW5zfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgbWItNSAke1xuICAgICAgICAgICAgICAgICAgaWR4Y29sdW1ucyA9PT0gMCA/IGBtdC01YCA6IGBgXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5uYW1lfTpcbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Pntkb2Njb2x1bW5zLnZhbHVlLm9wc2lbZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0XX08Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLnZhbHVlLm9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChfLCBpZHhmaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2Njb2x1bW5zLnZhbHVlLmRlZmF1bHQuaW5jbHVkZXMoaWR4ZmlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge21vbWVudChkb2Njb2x1bW5zLnZhbHVlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZX08Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5jb25zdCBLb25maWd1cmFzaVBhcnQgPSAoe1xuICBpbml0UHJvcHMsXG4gIGl0ZW1pZCxcbiAgaW52cmVsYXRpb25zLFxuICBtYWluZGF0YSxcbiAgcHJhbG9hZGluZzIsXG4gIG1vZGVscyxcbiAgc2V0bW9kZWxzLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuXG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW21haW5wYXJ0ZGF0YSwgc2V0bWFpbnBhcnRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdwYXJ0LCBzZXRwcmFsb2FkaW5ncGFydF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVmaWx0ZXJhY3QsIHNldGFzc2V0dHlwZWZpbHRlcmFjdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3NldHR5cGV2YWx1ZSwgc2V0YXNzZXR0eXBldmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RlbGZpbHRlcmFjdCwgc2V0bW9kZWxmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx2YWx1ZSwgc2V0bW9kZWx2YWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0cmlnZ2VyLCBzZXRkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZSgwKTtcbiAgLy9jaGFuZ2VkIGRhbiByZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVwbGFjZW1lbnRzLCBzZXRkYXRhcmVwbGFjZW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BvcG92ZXIsIHNldHBvcG92ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2NoYW5nZWRcbiAgY29uc3QgW2RhdGFjaGFuZ2VkLCBzZXRkYXRhY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IG51bGwsXG4gICAgbW9kZWxfaWQ6IG51bGwsXG4gICAgaW52ZW50b3J5X25hbWU6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIHN0YXR1c191c2FnZToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICBtb2RlbF9pbnZlbnRvcnk6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIGFzc2V0OiB7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW2RhdGFBcGljaGFuZ2VkLCBzZXRkYXRhQXBpY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgcmVwbGFjZW1lbnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxjaGFuZ2VkLCBzZXRtb2RhbGNoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRjaGFuZ2VkLCBzZXRkaXNhYmxlZGNoYW5nZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlZCwgc2V0bG9hZGluZ2NoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdHJpZ2dlcmNoYW5nZWQsIHNldHRyaWdnZXJjaGFuZ2VkXSA9IHVzZVN0YXRlKC0xKTtcbiAgLy9yZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVtb3ZlZCwgc2V0ZGF0YXJlbW92ZWRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGF0YUFwaXJlbW92ZWQsIHNldGRhdGFBcGlyZW1vdmVkXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogMCxcbiAgICBpbnZlbnRvcnlfcGFydF9pZDogMCxcbiAgICBub3RlczogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFttb2RhbHJlbW92ZWQsIHNldG1vZGFscmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHJlbW92ZWQsIHNldGRpc2FibGVkcmVtb3ZlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdyZW1vdmVkLCBzZXRsb2FkaW5ncmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2JhY2t1cG1vZGVscywgc2V0YmFja3VwbW9kZWxzXSA9IHVzZVN0YXRlKG1vZGVscyk7XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAvLyB7XG4gICAgLy8gICAgIHRpdGxlOiAnTmFtYSBJdGVtJyxcbiAgICAvLyAgICAgZGF0YUluZGV4OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vICAgICBrZXk6ICdpbnZlbnRvcnlfbmFtZScsXG4gICAgLy8gfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNSUcgSURcIixcbiAgICAgIGRhdGFJbmRleDogXCJtaWdfaWRcIixcbiAgICAgIGtleTogXCJtaWdfaWRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlNlcmlhbCBOdW1iZXJcIixcbiAgICAgIGRhdGFJbmRleDogXCJzZXJpYWxfbnVtYmVyXCIsXG4gICAgICBrZXk6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PntyZWNvcmQuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IFwiLVwiIDogcmVjb3JkLnNlcmlhbF9udW1iZXJ9PC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNb2RlbFwiLFxuICAgICAgZGF0YUluZGV4OiBcIm1vZGVsX25hbWVcIixcbiAgICAgIGtleTogXCJtb2RlbF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkubmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQXNzZXQgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcImFzc2V0X25hbWVcIixcbiAgICAgIGtleTogXCJhc3NldF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuYXNzZXRfbmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgIHZpc2libGU9e3BvcG92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblZpc2libGVDaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiBgMHB4YCwgbWFyZ2luOiBgMHB4YCB9fVxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0cG9wb3ZlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGByZWRgLCBmb250U2l6ZTogYDEuMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhcmVtb3ZlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaXJlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1haW5wYXJ0ZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlfcGFydF9pZDogcmVjb3JkLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb3BvdmVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFya2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFjaGFuZ2VkKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY2hhbmdlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRyaWdnZXJjaGFuZ2VkKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbnRpa2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+S2VsdWFya2FuIFBhcnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+R2FudGlrYW4gUGFydDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hlbHBlclxuICAvLzEgbnlhIGxhZ2kgYWRhIGRpIHVzZUVmZmVjdFxuICBjb25zdCByZWN1cnNpdmVGbGF0dGVuQXJyID0gKGRhdGFhc3NldHMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBkYXRhYXNzZXRzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZCk7XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZWN1cnNpdmVGbGF0dGVuQXJyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBmdW5jdGlvbiByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhYVtpXVtcImtleVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXCJ2YWx1ZVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXG4gICAgICAgIFwidGl0bGVcIlxuICAgICAgXSA9IGAke2RhdGFhW2ldLm1pZ19pZH0gLSAke2RhdGFhW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgZGF0YWFbaV1bXCJjaGlsZHJlblwiXSA9IGRhdGFhW2ldLmludmVudG9yeV9yZXBsYWNlbWVudF9wYXJ0cztcbiAgICAgIGRlbGV0ZSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBpZiAoZGF0YWFbaV0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWFbaV0uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YWE7XG4gIH1cblxuICAvL2hhbmRsZXJcbiAgY29uc3QgYXNzZXRQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQgPSAoZG9jLCBhc3NldGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZCA9PT0gTnVtYmVyKGFzc2V0aWQpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIGFzc2V0UGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZG9jW2ldLmNoaWxkcmVuLCBhc3NldGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbW9kZWxQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwgPSAoZG9jLCBtb2RlbGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2lkID09PSBtb2RlbGlkKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG1vZGVsUGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZG9jW2ldLmNoaWxkcmVuLCBtb2RlbGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbmFtZVBhcnQgPSBbXTtcbiAgY29uc3QgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lID0gKGRvYywgbmFtZSkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5pbnZlbnRvcnlfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgbmFtZVBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZG9jW2ldLmNoaWxkcmVuLCBuYW1lKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgLy9kZWxpdmVyIEFQSVxuICBjb25zdCBoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0ID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdjaGFuZ2VkKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9yZXBsYWNlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpY2hhbmdlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpZ2FudGlcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVSZW1vdmVJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5ncmVtb3ZlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVtb3ZlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpcmVtb3ZlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ncmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpa2VsdWFya2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIGFzc2V0IHR5cGVcbiAgY29uc3Qgb25DaGFuZ2VBc3NldFR5cGUgPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRhc3NldHR5cGVmaWx0ZXJhY3QoZmFsc2UpO1xuICAgICAgc2V0bW9kZWxzKGJhY2t1cG1vZGVscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9MTAwJmFzc2V0X2lkPSR7aWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwID8gc2V0bW9kZWxzKFtdKSA6IHNldG1vZGVscyhyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0YXNzZXR0eXBldmFsdWUoaWQpO1xuICAgIH1cbiAgfTtcbiAgLy9zZWFyY2ggbW9kZWxcbiAgY29uc3Qgb25DaGFuZ2VNb2RlbCA9IChpZG1vZGVsKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZG1vZGVsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldG1vZGVsZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0bW9kZWx2YWx1ZShpZG1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAoYXNzZXR0eXBlZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRhdGF0ZW1wLCBhc3NldHR5cGV2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IGFzc2V0UGFydDtcbiAgICB9XG4gICAgaWYgKG1vZGVsZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Nb2RlbChkYXRhdGVtcCwgbW9kZWx2YWx1ZSlcbiAgICAgIHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBtb2RlbFBhcnQ7XG4gICAgfVxuICAgIGlmIChuYW1hc2VhcmNoYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZGF0YXRlbXAsIG5hbWF2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IG5hbWVQYXJ0O1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBjb25zdCByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuID0gKHJzYykgPT4ge1xuICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcnNjW2ldLmtleSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS52YWx1ZSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS50aXRsZSA9IGAke3JzY1tpXS5taWdfaWR9IC0gJHtyc2NbaV0ubW9kZWxfaW52ZW50b3J5Py5uYW1lfWA7XG4gICAgICAgICAgICByc2NbaV0uY2hpbGRyZW4gPSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5pbnZlbnRvcnlfcGFydHM7XG4gICAgICAgICAgICBpZiAocnNjW2ldLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4ucnNjW2ldLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJzY1tpXS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJlczMuaW52ZW50b3J5X3BhcnRzKTtcbiAgICAgICAgc2V0bWFpbnBhcnRkYXRhKHtcbiAgICAgICAgICAuLi5yZXMzLFxuICAgICAgICAgIGludmVudG9yeV9wYXJ0czogdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldGRhdGF0YWJsZSh0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMih0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMyh0KTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ3BhcnQoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmlnZ2VyY2hhbmdlZCAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVwbGFjZW1lbnRzP2lkPSR7ZGF0YWNoYW5nZWQubW9kZWxfaW52ZW50b3J5LmFzc2V0X2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFwZGF0YSA9IHJlY3Vyc2l2ZU1vZGlmRGF0YShyZXMyLmRhdGEpO1xuICAgICAgICAgIHNldGRhdGFyZXBsYWNlbWVudHMobWFwZGF0YSk7XG4gICAgICAgICAgaWYgKG1hcGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRkaXNhYmxlZGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdHJpZ2dlcmNoYW5nZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPktvbmZpZ3VyYXNpIFBhcnQ8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIC8qY29uc29sZS5sb2cobWFpbnBhcnRkYXRhKTsgY29uc29sZS5sb2coZGF0YXJlbW92ZWQpKi8gcnQucHVzaChcbiAgICAgICAgICAgICAgICBgL2l0ZW1zL2NyZWF0ZXBhcnQvJHtpdGVtaWR9P25hbWE9JHttYWlucGFydGRhdGEubWlnX2lkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nMiA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBtci0xXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAsIG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBOYW1hIEl0ZW1cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2VTZWFyY2goZSl9XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQXNzZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZShleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17ZmV0Y2hpbmdtb2RlbCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgIH0vZ2V0RmlsdGVyTW9kZWxzP25hbWU9JHt2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIn1gLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttb2RlbHMubWFwKChkb2Ntb2RlbHMsIGlkeG1vZGVscykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvY21vZGVscy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY21vZGVscy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkZpbmFsQ2xpY2t9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPFRhYmxlXG4gICAgICAgIGxvYWRpbmc9e3ByYWxvYWRpbmdwYXJ0fVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gUGVyZ2FudGlhbiBQYXJ0IFwie2RhdGFjaGFuZ2VkLmludmVudG9yeV9uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0fVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjaGFuZ2VkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCB5YW5nIEluZ2luIERpZ2FudGl7XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGF0YWJsZTN9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZGF0YWNoYW5nZWQua2V5fVxuICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIEFzc2V0IFR5cGUgZGFyaSBJdGVtIFBhcnQgeWFuZyBpbmdpbiBkaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAge2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCBQZW5nZ2FudGkgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhY2hhbmdlZC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGFyZXBsYWNlbWVudHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFyZXBsYWNlbWVudHMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLmludmVudG9yeV9uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgPC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFBcGljaGFuZ2VkLm5vdGVzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5nZWx1YXJrYW4gaXRlbSBcIlxuICAgICAgICAgICAge2RhdGFyZW1vdmVkLmludmVudG9yeV9uYW1lfVwiIGRhcmkgXCJ7bWFpbnBhcnRkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxyZW1vdmVkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFscmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlUmVtb3ZlSXRlbVBhcnR9XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3JlbW92ZWQgfX1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRhdGFBcGlyZW1vdmVkKHsgLi4uZGF0YUFwaXJlbW92ZWQsIG5vdGVzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgUmVsYXRpb25zaGlwID0gKHsgaW5pdFByb3BzLCBtYWluZGF0YSwgaXRlbWlkIH0pID0+IHtcbiAgLy9pbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtsb2FkaW5ncmVsLCBzZXRsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdyZWwsIHNldHByYWxvYWRpbmdyZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbZGF0YUFwaWRlbGV0ZSwgc2V0ZGF0YUFwaWRlbGV0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25kYXRhZGVsZXRlLCBzZXRyZWxhdGlvbmRhdGFkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgdGlwZTogXCJcIixcbiAgICBrb25la3NpOiBcIlwiLFxuICB9KTtcbiAgLy9hZGRcbiAgY29uc3QgW2RhdGFBcGlhZGQsIHNldGRhdGFBcGlhZGRdID0gdXNlU3RhdGUoe1xuICAgIHN1YmplY3RfaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgIHR5cGVfaWQ6IG51bGwsXG4gICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNwbGF5ZGF0YXJlbGF0aW9ucywgc2V0ZGlzcGxheWRhdGFyZWxhdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbcmVsYXRpb25uYW1lYWRkLCBzZXRyZWxhdGlvbm5hbWVhZGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbm5hbWVkZGFkZCwgc2V0cmVsYXRpb25uYW1lZGRhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlkeGFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkLCBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkXSA9XG4gICAgdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGV0YWlsdGlwZWFkZCwgc2V0ZGV0YWlsdGlwZWFkZF0gPSB1c2VTdGF0ZSgtMTApO1xuICBjb25zdCBbZGV0YWlsdGlwZWRhdGFhZGQsIHNldGRldGFpbHRpcGVkYXRhYWRkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGFsYWRkLCBzZXRtb2RhbGFkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZCwgc2V0ZGlzYWJsZWRhZGRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nYWRkLCBzZXRsb2FkaW5nYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZldGNoaW5nbW9kZWwsIHNldGZldGNoaW5nbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jZGF0YSwgc2V0c3VibG9jZGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N1YmxvY3RyaWcsIHNldHN1YmxvY3RyaWddID0gdXNlU3RhdGUoLTEpO1xuXG4gIC8vZGVjbGFyYXRpb25cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJSZWxhdGlvbnNoaXAgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgICBrZXk6IFwicmVsYXRpb25zaGlwX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIk5hbWFcIixcbiAgICAgIGRhdGFJbmRleDogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICAgIGtleTogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJ0eXBlXCIsXG4gICAgICBrZXk6IFwidHlwZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWRlbGV0ZSh7IGlkOiByZWNvcmQuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25kYXRhZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZC5yZWxhdGlvbnNoaXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGU6IHJlY29yZC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAga29uZWtzaTogcmVjb3JkLmNvbm5lY3RlZF9kZXRhaWxfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogYDEuMnJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogYHBvaW50ZXJgLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIC8vaGFuZGxlclxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgZGF0YXRlbXAgPSBkYXRhdGVtcC5maWx0ZXIoKGZsdCkgPT4ge1xuICAgICAgICByZXR1cm4gZmx0LmNvbm5lY3RlZF9kZXRhaWxfbmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKG5hbWF2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdkZWxldGUodHJ1ZSk7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlUmVsYXRpb25zaGlwSW52ZW50b3J5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpZGVsZXRlKSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgYmVyaGFzaWwgZGloYXB1c1wiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdhZGQodHJ1ZSk7XG4gICAgZGVsZXRlIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhQXBpYWRkKVxuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRSZWxhdGlvbnNoaXBJbnZlbnRvcmllc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWFkZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nYWRkKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxhZGQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICAgICAgICAgIGlzX2ludmVyc2U6IG51bGwsXG4gICAgICAgICAgICB0eXBlX2lkOiBudWxsLFxuICAgICAgICAgICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiBudWxsLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChcIlwiKTtcbiAgICAgICAgICBzZXRzdWJsb2NkYXRhKG51bGwpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoLTEpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoLTEpO1xuICAgICAgICAgIHNldHN1YmxvY3RyaWcoLTEpO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgSXRlbSBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGF0cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0cHJhbG9hZGluZ3JlbCh0cnVlKTtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRkYXRhdGFibGUoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTIoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTMoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldHByYWxvYWRpbmdyZWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2N0cmlnICE9PSAtMSkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtzdWJsb2N0cmlnfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRldGFpbHRpcGVhZGQgIT09IC0xMCkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkYXRhQXBpYWRkLnR5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKFtyZXMyLmRhdGFdKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0xICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTQgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RldGFpbHRpcGVhZGQsIHN1YmxvY3RyaWddKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG8gbXItMVwiPlJlbGF0aW9uc2hpcDwvaDE+XG4gICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5kZWxldGVkX2F0ICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkFzc2V0IFR5cGUgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBBc3NldCBUeXBlIVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTsgLypydC5wdXNoKGAvaXRlbXMvY3JlYXRlcmVsYXRpb25zaGlwLyR7aXRlbWlkfT9uYW1hPSR7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9JmFzc2V0X2lkPSR7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmlkfWApKi9cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgVGFtYmFoXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZ3JlbCA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMTEgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncmVsfVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBSZWxhdGlvbnNoaXAgYmVyaWt1dCBpbmkgZGFyaSBcIlxuICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGJvcmRlci1iIG1iLTVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5SZWxhdGlvbnNoaXAgVHlwZTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMFwiPlRpcGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUudGlwZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5JdGVtOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLmtvbmVrc2l9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiIG9uQ2hhbmdlPXsoZSkgPT4ge319PjwvSW5wdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIFJlbGF0aW9uc2hpcCBcInttYWluZGF0YS5uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApOyAvKnNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCByZWxhdGlvbnNoaXBfaWQ6IG51bGwsIHR5cGVfaWQ6IG51bGwsIGNvbm5lY3RlZF9pZDogbnVsbCB9KSovIC8qY29uc29sZS5sb2coZGF0YUFwaWFkZCkqL1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJlbGF0aW9uc2hpcEl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nYWRkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsYWRkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NzYwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFJlbGF0aW9uc2hpcCBUeXBlIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYm9yZGVyIHAtMiBob3Zlcjpib3JkZXItcHJpbWFyeSByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZCgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9ubmFtZWFkZH08L3A+XG4gICAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgICA8VXBPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPERvd25PdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBJbnZlcnNlIFJlbGF0aW9uc2hpcCBUeXBlXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZGlzcGxheWRhdGFyZWxhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctdGVybmFyeSBjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsYWNrIHAtMyB3LTYvMTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlkeGFkZCA9PT0gaWR4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IG51bGwgfHwgZGF0YUFwaWFkZC50eXBlX2lkID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZGFkZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLnJlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbnZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmludmVyc2VfcmVsYXRpb25zaGlwX3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFRpcGUgPHNwYW4gY2xhc3NOYW1lPVwidGlwZXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpYWRkLnR5cGVfaWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgdHlwZV9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5yZWxhdGlvbnNoaXBfaWQgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVhZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgID8gKHNldHN1YmxvY3RyaWcoLTEpLCBzZXRzdWJsb2NkYXRhKG51bGwpKVxuICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0zfT5Db21wYW55PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTR9PkFzc2V0IFR5cGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXBlcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5iYWNrdXBfY29ubmVjdGVkX2lkcyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHNbMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cz17WzFdfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17ZGV0YWlsdGlwZWRhdGFhZGR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRzdWJsb2N0cmlnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlPC9wPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgZGVuZ2FuIE1vZGVsIElEXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZtb2RlbF9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3N1YmxvY2RhdGEgIT09IG51bGwgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlIChTdWJsb2thc2kpPC9wPlxuICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NkYXRhfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIGNvbm5lY3RlZF9pZHM6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQXNzb2NpYXRpb24gPSAoeyBpbml0UHJvcHMsIGl0ZW1pZCwgbWFpbmRhdGEsIHByYWxvYWRpbmcgfSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFzc29jaWF0aW9uPC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHB4LTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBtYWluZGF0YS5hc3NvY2lhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHttYWluZGF0YS5hc3NvY2lhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgc2hhZG93LW1kIHB5LTQgcHgtNSBib3JkZXIgbWItNCBmbGV4IGp1c3RpZnktYmV0d2VlbiB3LTEwLzEyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcnQucHVzaChgL3RpY2tldHMvZGV0YWlsLyR7ZG9jLmlkfT9hY3RpdmU9ZGV0YWlsSXRlbWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+VGlja2V0IE51bWJlcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MudGlja2V0X25hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLXJlZC0xMDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gNCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQWNpdGl2dHkgPSAoe1xuICBpdGVtaWQsXG4gIGluaXRQcm9wcyxcbiAgbWFpbmRhdGEsXG4gIGludnJlbGF0aW9ucyxcbiAgcHJhbG9hZGluZyxcbiAgYWN0aXZpdHl0cmlnZ2VyLFxufSkgPT4ge1xuICBjb25zdCBbZGF5bG9ncywgc2V0ZGF5bG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt3ZWVrbG9ncywgc2V0d2Vla2xvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9yZWxvZ3MsIHNldG1vcmVsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdsb2dzLCBzZXRwcmFsb2FkaW5nbG9nc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2ludmVudG9yaWVzLCBzZXRpbnZlbnRvcmllc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRwcmFsb2FkaW5nbG9ncyh0cnVlKTtcblxuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFjdGl2aXR5SW52ZW50b3J5TG9ncz9pZD0ke2l0ZW1pZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgZGF5bG9nc21hcCA9IHJlczIuZGF0YS5kYXlfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gRGloYXB1czogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB3ZWVrbG9nc21hcCA9IHJlczIuZGF0YS53ZWVrX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1vcmVsb2dzbWFwID0gcmVzMi5kYXRhLmVsc2VfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXlsb2dzKGRheWxvZ3NtYXApO1xuICAgICAgICBzZXR3ZWVrbG9ncyh3ZWVrbG9nc21hcCk7XG4gICAgICAgIHNldG1vcmVsb2dzKG1vcmVsb2dzbWFwKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgLy8gLnRoZW4ocmVzMyA9PiB7XG4gICAgLy8gICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLCB7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgIC8vICAgICAgICAgaGVhZGVyczoge1xuICAgIC8vICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLy8gICAgICAgICAudGhlbihyZXM0ID0+IHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgY29uY2F0YXJyID0gcmVzNC5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzNC5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG5cbiAgICAvLyAgICAgICAgICAgICB2YXIgbG9nczJtYXAgPSByZXMzLmRhdGEucmVsYXRpb25zaGlwLm1hcCgoZG9jcmVsLCBpZHhyZWwpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZW5ldzIgPSBtb21lbnQoZG9jcmVsLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdCgnTExMJylcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGRlc2NuZXcyID0gJydcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGlkbG9nbmV3ID0gLTFcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGVzYzIgPSBkb2NyZWwuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBpZGxvZ25ldyA9IGNvbmNhdGFyci5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gZG9jcmVsLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pZClbMF0gOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHt0eXBlb2YgKGlkbG9nbmV3KSA9PT0gJ3VuZGVmaW5lZCcgPyBcIihTdWRhaCBEaWhhcHVzIGxhZ2kpXCIgOiBgJHtpZGxvZ25ldy5yZWxhdGlvbnNoaXB9YH1cImAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnRGVsZXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcGAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAuLi5kb2NyZWwsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlbmV3MixcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3MlxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICBzZXRsb2dzMihsb2dzMm1hcClcbiAgICAvLyAgICAgICAgICAgICBzZXRwcmFsb2FkaW5nbG9nczIoZmFsc2UpXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vIH0pXG4gIH0sIFthY3Rpdml0eXRyaWdnZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFjdGl2aXR5PC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5IYXJpIEluaTwvaDE+XG4gICAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogZGF5bG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7ZGF5bG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IHdlZWtsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIHt3ZWVrbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctNi8xMlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+TWluZ2d1IExhbHU8L2gxPlxuICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IG1vcmVsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIHttb3JlbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUaW1lbGluZS5JdGVtIGxhYmVsPXtkb2Nsb2cuZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbG9nLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZWgge2RvY2xvZy5jYXVzZXJfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IEl0ZW1EZXRhaWwgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8xLiBJbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBhY3RpdmVUYWIgPSBcIm92ZXJ2aWV3XCI7XG4gIGNvbnN0IHsgYWN0aXZlIH0gPSBydC5xdWVyeTtcbiAgaWYgKGFjdGl2ZSkge1xuICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZTtcbiAgfVxuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMiwgMik7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiRGV0YWlsIEl0ZW1cIjtcbiAgY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xuXG4gIC8vdXNlU3RhdGVcbiAgY29uc3QgW21haW5kYXRhLCBzZXRtYWluZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiBcIlwiLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgY3JlYXRlZF9hdDogXCJcIixcbiAgICB1cGRhdGVkX2F0OiBcIlwiLFxuICAgIGRlbGV0ZWRfYXQ6IFwiXCIsXG4gICAgYXNzZXRfbmFtZTogXCJcIixcbiAgICBtb2RlbF9uYW1lOiBcIlwiLFxuICAgIGxvY2F0aW9uX25hbWU6IFwiXCIsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsb2NhdGlvbl9pbnZlbnRvcnk6IHtcbiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsXG4gICAgICBjb21wYW55X25hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBhZGRpdGlvbmFsX2F0dHJpYnV0ZXM6IFtdLFxuICAgIGludmVudG9yeV9wYXJ0czogW10sXG4gICAgYXNzb2NpYXRpb25zOiBbXSxcbiAgICBxdWFudGl0aWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGFzc2V0czogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczoge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBbcmVsc2hpcCwgc2V0cmVsc2hpcF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51Ziwgc2V0bWFudWZdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2ZW5kb3IsIHNldHZlbmRvcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nMiwgc2V0cHJhbG9hZGluZzJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIC8vZGVsZXRlXG4gIGNvbnN0IFttb2RhbGRlbGV0ZSwgc2V0bW9kYWxkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2RlbGV0ZSwgc2V0bG9hZGluZ2RlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vbm90ZXNcbiAgY29uc3QgW25vdGVzLCBzZXRub3Rlc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGFsbm90ZXMsIHNldG1vZGFsbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ25vdGVzLCBzZXRsb2FkaW5nbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2tvbmRpc2lcbiAgY29uc3QgW2tvbmRpc2ksIHNldGtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtub3Rla29uZGlzaSwgc2V0bm90ZWtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbGtvbmRpc2ksIHNldG1vZGFsa29uZGlzaV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5a29uZGlzaSwgc2V0ZGlzcGxheWtvbmRpc2ldID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5na29uZGlzaSwgc2V0bG9hZGluZ2tvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL3N0YXR1cyBwZW1ha2FpYW5cbiAgY29uc3QgW2NoYW5nZXVzYWdlLCBzZXRjaGFuZ2V1c2FnZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBub3RlczogXCJcIixcbiAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogXCJcIixcbiAgICBjb25uZWN0ZWRfaWQ6IFwiXCIsXG4gICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNhYmxlZHVzYWdlLCBzZXRkaXNhYmxlZHVzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbW9kYWx1c2FnZSwgc2V0bW9kYWx1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5dXNhZ2UsIHNldGRpc3BsYXl1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UsIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2VdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXNhZ2UsIHNldGxvYWRpbmd1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIGNvbnN0IFthZ2VudHMsIHNldGFnZW50c10gPSB1c2VTdGF0ZShbXSlcbiAgLy8gY29uc3QgW3JlcXVlc3RlcnMsIHNldHJlcXVlc3RlcnNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IFtkZXRhaWxsaXN0LCBzZXRkZXRhaWxsaXN0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscywgc2V0bW9kZWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9ucywgc2V0c3VibG9jYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvY2F0aW9uc2Rpc3BsYXksIHNldGxvY2F0aW9uc2Rpc3BsYXldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jYXRpb250cmlnZ2VyLCBzZXRzdWJsb2NhdGlvbnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWN0aXZpdHl0cmlnZ2VyLCBzZXRhY3Rpdml0eXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy9oZWxwZXJcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZWxldGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgICBydC5wdXNoKGAvaXRlbXNgKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVOb3Rlc0l0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ25vdGVzKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRJbnZlbnRvcnlOb3Rlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ25vdGVzKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJOb3RlcyBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH0/YWN0aXZlPWFjdGl2aXR5YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVLb25kaXNpSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5na29uZGlzaSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzQ29uZGl0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZWtvbmRpc2ksXG4gICAgICAgIHN0YXR1c19jb25kaXRpb246IGtvbmRpc2ksXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgS29uZGlzaSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVVc2FnZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3VzYWdlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9jaGFuZ2VTdGF0dXNVc2FnZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2V1c2FnZSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ndXNhZ2UoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy91c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5P2lkPSR7aXRlbWlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSBcImFkZGl0aW9uYWxfYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04ucGFyc2UoZG9jLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0bWFpbmRhdGEodCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICAgICAgICB2YXIgZGVsX21hbnVmID0gbnVsbDtcbiAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsXG4gICAgICAgICAgICAgID8gKGRlbF9tYW51ZiA9IG51bGwpXG4gICAgICAgICAgICAgIDogKGRlbF9tYW51ZiA9IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICApWzBdLmRlbGV0ZWRfYXQpO1xuICAgICAgICAgICAgc2V0bWFudWYoe1xuICAgICAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwXG4gICAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgICA6IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICAgIClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgaXNudWxsOiBkZWxfbWFudWYgIT09IG51bGwgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlczMudmVuZG9yX2lkID09PSBudWxsIHx8IHJlczMudmVuZG9yX2lkID09PSAwXG4gICAgICAgICAgICAgID8gc2V0dmVuZG9yKFwiLVwiKVxuICAgICAgICAgICAgICA6IHNldHZlbmRvcihcbiAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXT8ubmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRwcmFsb2FkaW5nMihmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRGaWx0ZXJNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgIT09IFwiXCIpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0Q2hhbmdlU3RhdHVzVXNhZ2VEZXRhaWxMaXN0P2lkPSR7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgID8gc2V0ZGV0YWlsbGlzdChbcmVzMi5kYXRhXSlcbiAgICAgICAgICAgIDogc2V0ZGV0YWlsbGlzdChyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NoYW5nZXVzYWdlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN1YmxvY2F0aW9udHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeURldGFpbExpc3Q/dHlwZV9pZD0ke2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgIHNldHN1YmxvY2F0aW9ucyhyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzdWJsb2NhdGlvbnRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRyZWxzaGlwKHJlczIuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczIuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktNSBweC00IGJvcmRlci10IGJvcmRlci1iIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LWdyYXktNDAwIG1iLTBcIj5JdGVtOjwvcD5cbiAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTIgdGV4dC0yeGwgbWItMCBtci0yMFwiPlxuICAgICAgICAgICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfSAtIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1yLTcgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPlN0YXR1cyBQZW1ha2FpYW46PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5dXNhZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTByZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc3RhdHVzX3VzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c191c2FnZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1c2FnZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5JbiBVc2VkPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gU3RvY2s8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5SZXBsYWNlbWVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+S29uZGlzaTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlrb25kaXNpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c19jb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0a29uZGlzaSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdyZXk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG5vdGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGFtYmFoIE5vdGVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgSGFwdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBoaWRkZW4gbWQ6YmxvY2tcIj5cbiAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgIHRhYlBvc2l0aW9uPXtgbGVmdGB9XG4gICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgb25UYWJDbGljaz17KGtleSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiYWN0aXZpdHlcIikge1xuICAgICAgICAgICAgICAgICAgc2V0YWN0aXZpdHl0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgYmxvY2sgbWQ6aGlkZGVuXCI+XG4gICAgICAgICAgICA8VGFicyB0YWJQb3NpdGlvbj17YHRvcGB9IGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn0+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIk92ZXJ2aWV3XCIga2V5PXtgb3ZlcnZpZXdgfT5cbiAgICAgICAgICAgICAgICA8T3ZlcnZpZXdcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBtYW51Zj17bWFudWZ9XG4gICAgICAgICAgICAgICAgICB2ZW5kb3I9e3ZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJLb25maWd1cmFzaSBQYXJ0XCIga2V5PXtga29uZmlndXJhc2lQYXJ0YH0+XG4gICAgICAgICAgICAgICAgPEtvbmZpZ3VyYXNpUGFydFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZzI9e3ByYWxvYWRpbmcyfVxuICAgICAgICAgICAgICAgICAgbW9kZWxzPXttb2RlbHN9XG4gICAgICAgICAgICAgICAgICBzZXRtb2RlbHM9e3NldG1vZGVsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIlJlbGF0aW9uc2hpcFwiIGtleT17YHJlbGF0aW9uc2hpcGB9PlxuICAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBc3NvY2lhdGlvblwiIGtleT17YGFzc29jaWF0aW9uYH0+XG4gICAgICAgICAgICAgICAgPEFzc29jaWF0aW9uXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFjdGl2aXR5XCIga2V5PXtgYWN0aXZpdHlgfT5cbiAgICAgICAgICAgICAgICA8QWNpdGl2dHlcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIGFjdGl2aXR5dHJpZ2dlcj17YWN0aXZpdHl0cmlnZ2VyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgUGVtYWthaWFuIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdXNhZ2V9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVc2FnZUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5ndXNhZ2V9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1c2FnZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBTdGF0dXMgUGVtYWthaWFuIDxzcGFuIGNsYXNzTmFtZT1cInVzYWdlbW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PkluIFVzZWQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5JbiBTdG9jazwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlJlcGxhY2VtZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNhZ2Vtb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGFuZ2V1c2FnZS5zdGF0dXNfdXNhZ2UgPT09IDEgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIERpZ3VuYWthbiBPbGVoIDxzcGFuIGNsYXNzTmFtZT1cImJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF90eXBlX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxfY29ubmVjdGVkX2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGxvY2F0aW9uc2Rpc3BsYXkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstMX0+QWdlbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ5bW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItMyBtbC01XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgTmFtYSB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmIFwiQWdlbnRcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmIFwiUmVxdWVzdGVyXCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyAmJiBcIkNvbXBhbnlcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hYnltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyA/IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0c3VibG9jYXRpb250cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bG9jYXRpb25zZGlzcGxheSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhbmdldXNhZ2UuY29ubmVjdGVkX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZCA9PT0gLTMgfHwgbG9jYXRpb25zZGlzcGxheSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWwtNVwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5hbWEgTG9rYXNpPC9wPlxuICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWNvbXBhbnl1c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e3N1YmxvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgbm90ZXM6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgS29uZGlzaSB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVLb25kaXNpSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdrb25kaXNpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsa29uZGlzaX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIEtvbmRpc2kgPHNwYW4gY2xhc3NOYW1lPVwia29uZGlzaW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2tvbmRpc2l9PlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rb25kaXNpbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRub3Rla29uZGlzaShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5cbiAgICAgICAgICAgICAgRm9ybSBUYW1iYWggTm90ZXMge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25vdGVzID09PSBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTm90ZXNJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ25vdGVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbm90ZXN9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezYwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0bm90ZXMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGl0ZW0gXCJ7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9IC17XCIgXCJ9XG4gICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxkZWxldGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxkZWxldGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZURlbGV0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ2RlbGV0ZSB9fVxuICAgICAgICB3aWR0aD17NzIwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi00XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBtZW1pbGlraSBJdGVtIFBhcnQgc2ViYWdhaSBiZXJpa3V0IDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9wYXJ0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubWFwKChkb2NlbXB0eSwgaWR4ZW1wdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHhlbXB0eX0+XG4gICAgICAgICAgICAgICAgICAgICAgLSA8c3Ryb25nPntkb2NlbXB0eS5pbnZlbnRvcnlfbmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIEl0ZW0gaW5pIHNlZGFuZyBtZW1pbGlraSBodWJ1bmdhbiBkZW5nYW4gaXRlbSBiZXJpa3V0OlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14c1wiPlxuICAgICAgICAgICAgICB7cmVsc2hpcC5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgcmVsc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpZHhyZWx9PlxuICAgICAgICAgICAgICAgICAgICAte1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2NyZWwudHlwZX0gLSB7ZG9jcmVsLmNvbm5lY3RlZF9kZXRhaWxfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICAgIERlbmdhbiBtZW5naGFwdXMgaXRlbSBpbmkgYWthbiBtZW5naGlsYW5na2FuIHNlbHVydWggaHVidW5nYW5cbiAgICAgICAgICAgICAgZGVuZ2FuIGl0ZW0gZGlhdGFzIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgY29uc3QgaXRlbWlkID0gcGFyYW1zLml0ZW1JZDtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtRGV0YWlsO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1507,\n          columnNumber: 11\n        }, _this), dataApiadd.type_id !== null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [dataApiadd.type_id === -1 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: \"Detail Tipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1542,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_Select, {\n              mode: \"multiple\",\n              showSearch: true,\n              optionFilterProp: \"children\",\n              notFoundContent: fetchingmodel ? /*#__PURE__*/_jsxDEV(_Spin, {\n                size: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1548,\n                columnNumber: 39\n              }, _this) : null,\n              onSearch: function onSearch(value) {\n                setfetchingmodel(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventoryDetailList?type_id=\").concat(detailtipeadd, \"&name=\").concat(value !== \"\" ? value : \"\"), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdetailtipedataadd(res2.data);\n                  setfetchingmodel(false);\n                });\n              },\n              filterOption: function filterOption(input, opt) {\n                return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n              },\n              onChange: function onChange(value) {\n                setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                  connected_ids: value,\n                  backup_connected_ids: value\n                }));\n              },\n              children: detailtipedataadd.map(function (doc, idx) {\n                return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1585,\n                  columnNumber: 25\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1543,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1541,\n            columnNumber: 17\n          }, _this), dataApiadd.type_id === -2 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: \"Detail Tipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1593,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_Select, {\n              mode: \"multiple\",\n              showSearch: true,\n              optionFilterProp: \"children\",\n              notFoundContent: fetchingmodel ? /*#__PURE__*/_jsxDEV(_Spin, {\n                size: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1599,\n                columnNumber: 39\n              }, _this) : null,\n              onSearch: function onSearch(value) {\n                setfetchingmodel(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventoryDetailList?type_id=\").concat(detailtipeadd, \"&name=\").concat(value !== \"\" ? value : \"\"), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdetailtipedataadd(res2.data);\n                  setfetchingmodel(false);\n                });\n              },\n              filterOption: function filterOption(input, opt) {\n                return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n              },\n              onChange: function onChange(value) {\n                setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                  connected_ids: value,\n                  backup_connected_ids: value\n                }));\n              },\n              children: detailtipedataadd.map(function (doc, idx) {\n                return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1636,\n                  columnNumber: 25\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1594,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1592,\n            columnNumber: 17\n          }, _this), dataApiadd.type_id === -3 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: \"Detail Tipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1644,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_TreeSelect, {\n              defaultValue: dataApiadd.backup_connected_ids === null ? null : dataApiadd.backup_connected_ids[0],\n              treeDefaultExpandedKeys: [1],\n              treeData: detailtipedataadd,\n              onChange: function onChange(value, label, extra) {\n                setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                  connected_ids: [value],\n                  backup_connected_ids: [value]\n                }));\n                setsubloctrig(value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1645,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1643,\n            columnNumber: 17\n          }, _this), dataApiadd.type_id === -4 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: \"Detail Tipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1666,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_Select, {\n              placeholder: \"Cari dengan Model ID\",\n              mode: \"multiple\",\n              showSearch: true,\n              optionFilterProp: \"children\",\n              notFoundContent: fetchingmodel ? /*#__PURE__*/_jsxDEV(_Spin, {\n                size: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1673,\n                columnNumber: 39\n              }, _this) : null,\n              onSearch: function onSearch(value) {\n                setfetchingmodel(true);\n                fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventoryDetailList?type_id=\").concat(detailtipeadd, \"&model_id=\").concat(value !== \"\" ? value : \"\"), {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (res2) {\n                  setdetailtipedataadd(res2.data);\n                  setfetchingmodel(false);\n                });\n              },\n              filterOption: function filterOption(input, opt) {\n                return opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n              },\n              onChange: function onChange(value) {\n                setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                  connected_ids: value,\n                  backup_connected_ids: value\n                }));\n              },\n              children: detailtipedataadd.map(function (doc, idx) {\n                return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: doc.id,\n                  children: doc.mig_id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 25\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1667,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1665,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true) : null, sublocdata !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: \"Detail Tipe (Sublokasi)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1722,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(_TreeSelect, {\n            multiple: true,\n            allowClear: true,\n            treeData: sublocdata,\n            onChange: function onChange(value, label, extra) {\n              if (value.length === 0) {\n                setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                  connected_ids: dataApiadd.backup_connected_ids\n                }));\n              } else {\n                setdataApiadd(_objectSpread(_objectSpread({}, dataApiadd), {}, {\n                  connected_ids: value\n                }));\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1723,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1721,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1414,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1376,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1271,\n    columnNumber: 5\n  }, _this);\n};\n\n_s3(Relationship, \"mNm21vW/8KYgTDMt+klvwXWzRzY=\", false, function () {\n  return [useRouter];\n});\n\n_c3 = Relationship;\n\nvar Association = function Association(_ref4) {\n  _s4();\n\n  var initProps = _ref4.initProps,\n      itemid = _ref4.itemid,\n      maindata = _ref4.maindata,\n      praloading = _ref4.praloading;\n  var rt = useRouter();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b flex justify-between p-5 mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-bold text-xl my-auto\",\n        children: \"Association\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1750,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1749,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col px-5\",\n      children: praloading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1755,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false) : maindata.associations.length === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(_Empty, {\n          image: _Empty.PRESENTED_IMAGE_SIMPLE\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1759,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: maindata.associations.map(function (doc, idx) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md shadow-md py-4 px-5 border mb-4 flex justify-between w-10/12 cursor-pointer\",\n            onClick: function onClick() {\n              rt.push(\"/tickets/detail/\".concat(doc.id, \"?active=detailItem\"));\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-0 font-semibold\",\n                children: \"Ticket Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1772,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-0\",\n                children: doc.ticket_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1773,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1771,\n              columnNumber: 19\n            }, _this), doc.status === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-md flex items-center px-2 text-center bg-red-100 border border-red-200 text-red-600\",\n              children: [\"Status: \", doc.status_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1776,\n              columnNumber: 21\n            }, _this), doc.status === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\",\n              children: [\"Status: \", doc.status_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1781,\n              columnNumber: 21\n            }, _this), doc.status === 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\",\n              children: [\"Status: \", doc.status_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1786,\n              columnNumber: 21\n            }, _this), doc.status === 4 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\",\n              children: [\"Status: \", doc.status_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1791,\n              columnNumber: 21\n            }, _this), doc.status === 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\",\n              children: [\"Status: \", doc.status_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1796,\n              columnNumber: 21\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1765,\n            columnNumber: 17\n          }, _this);\n        })\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1752,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1748,\n    columnNumber: 5\n  }, _this);\n};\n\n_s4(Association, \"KT04S7lQEBR8J8rUrnLs+YWpq/o=\", false, function () {\n  return [useRouter];\n});\n\n_c4 = Association;\n\nvar Acitivty = function Acitivty(_ref5) {\n  _s5();\n\n  var itemid = _ref5.itemid,\n      initProps = _ref5.initProps,\n      maindata = _ref5.maindata,\n      invrelations = _ref5.invrelations,\n      praloading = _ref5.praloading,\n      activitytrigger = _ref5.activitytrigger;\n\n  var _useState58 = useState([]),\n      daylogs = _useState58[0],\n      setdaylogs = _useState58[1];\n\n  var _useState59 = useState([]),\n      weeklogs = _useState59[0],\n      setweeklogs = _useState59[1];\n\n  var _useState60 = useState([]),\n      morelogs = _useState60[0],\n      setmorelogs = _useState60[1];\n\n  var _useState61 = useState(true),\n      praloadinglogs = _useState61[0],\n      setpraloadinglogs = _useState61[1];\n\n  var _useState62 = useState([]),\n      inventories = _useState62[0],\n      setinventories = _useState62[1];\n\n  useEffect(function () {\n    setpraloadinglogs(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getActivityInventoryLogs?id=\").concat(itemid), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var daylogsmap = res2.data.day_logs.map(function (doclogs, idxlogs) {\n        var datenew = moment(doclogs.date).locale(\"id\").format(\"LLL\");\n        var descnew = \"\";\n        var desckondisiOld = doclogs.properties ? doclogs.properties.old ? doclogs.properties.old.status_condition === 1 ? \"Good\" : doclogs.properties.old.status_condition === 2 ? \"Grey\" : doclogs.properties.old.status_condition === 3 ? \"Bad\" : null : null : null;\n        var desckondisiBaru = doclogs.properties ? doclogs.properties.attributes ? doclogs.properties.attributes.status_condition === 1 ? \"Good\" : doclogs.properties.attributes.status_condition === 2 ? \"Grey\" : doclogs.properties.attributes.status_condition === 3 ? \"Bad\" : null : null : null;\n        var descusageOld = doclogs.properties ? doclogs.properties.old ? doclogs.properties.old.status_usage === 1 ? \"In Used\" : doclogs.properties.old.status_usage === 2 ? \"In Stock\" : doclogs.properties.old.status_usage === 3 ? \"Replacement\" : null : null : null;\n        var descusageBaru = doclogs.properties ? doclogs.properties.attributes ? doclogs.properties.attributes.status_usage === 1 ? \"In Used\" : doclogs.properties.attributes.status_usage === 2 ? \"In Stock\" : doclogs.properties.attributes.status_usage === 3 ? \"Replacement\" : null : null : null;\n        var desc1 = doclogs.description.split(\" \");\n\n        if (desc1[0] === \"Created\") {\n          var _doclogs$properties$a;\n\n          if (desc1[2] === \"Relationship\") {\n            desc1[0] === \"Created\" ? descnew = descnew + \"Penambahan Relationship \\\"\".concat(doclogs.properties.attributes.relationship, \"\\\"\") : null;\n            desc1[0] === \"Deleted\" ? descnew = descnew + \"Penghapusan Relationship \\\"\".concat(doclogs.properties.old.relationship, \"\\\"\") : null;\n          } else if (desc1[1] === \"Association\") {\n            descnew = descnew + \"Association Baru: \".concat(doclogs.properties);\n          } else if ((_doclogs$properties$a = doclogs.properties.attributes) !== null && _doclogs$properties$a !== void 0 && _doclogs$properties$a.list_parts) {\n            descnew = descnew + \"Inisialisasi Pembuatan Item Part \\\"\".concat(maindata.inventory_parts.filter(function (docfil) {\n              var _doclogs$properties$a2;\n\n              return (_doclogs$properties$a2 = doclogs.properties.attributes) === null || _doclogs$properties$a2 === void 0 ? void 0 : _doclogs$properties$a2.list_parts.includes(docfil.id);\n            }).map(function (docmap) {\n              return docmap.inventory_name;\n            }).join(\", \"), \"\\\"\");\n          } else {\n            var _doclogs$properties$a3;\n\n            descnew = descnew + \"Pembuatan Item Baru bernama \\\"\".concat((_doclogs$properties$a3 = doclogs.properties.attributes) === null || _doclogs$properties$a3 === void 0 ? void 0 : _doclogs$properties$a3.inventory_name, \"\\\"\");\n          }\n        }\n\n        desc1[0] === \"Notes\" ? descnew = descnew + \"Penambahan Notes\" : null;\n\n        if (desc1[0] === \"Updated\") {\n          var _doclogs$properties$a4, _doclogs$properties$o, _doclogs$properties$a6, _doclogs$properties$o3, _doclogs$properties$a8, _doclogs$properties$o5;\n\n          if (doclogs.properties.attributes.status_condition) {\n            descnew = descnew + \"Pengubahan status kondisi dari \".concat(desckondisiOld, \" ke \").concat(desckondisiBaru);\n          } else if (doclogs.properties.attributes.status_usage) {\n            descnew = descnew + \"Pengubahan status pemakaian dari \".concat(descusageOld, \" ke \").concat(descusageBaru);\n          } else if (doclogs.properties.attributes.inventory_name) {\n            descnew = descnew + \"Pengubahan Nama Item dari \\\"\".concat(doclogs.properties.old.inventory_name, \"\\\" ke \\\"\").concat(doclogs.properties.attributes.inventory_name, \"\\\"\");\n          } else if (doclogs.properties.attributes.serial_number) {\n            descnew = descnew + \"Pengubahan Serial Number Item dari \\\"\".concat(doclogs.properties.old.serial_number, \"\\\" ke \\\"\").concat(doclogs.properties.attributes.serial_number, \"\\\"\");\n          } else if (doclogs.properties.attributes.location) {\n            descnew = descnew + \"Pengubahan Location Item dari \\\"\".concat(invrelations.companies.filter(function (doc) {\n              return doc.id === doclogs.properties.old.location;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.companies.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.location;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.vendor_id) {\n            descnew = descnew + \"Pengubahan Vendor Item dari \\\"\".concat(invrelations.vendors.filter(function (doc) {\n              return doc.id === doclogs.properties.old.vendor_id;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.vendors.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.vendor_id;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.manufacturer_id) {\n            descnew = descnew + \"Pengubahan Manufacturer Item dari \\\"\".concat(invrelations.manufacturers.filter(function (doc) {\n              return doc.id === doclogs.properties.old.manufacturer_id;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.manufacturers.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.manufacturer_id;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.deskripsi) {\n            descnew = descnew + \"Pengubahan Deskripsi Item\";\n          } else if (((_doclogs$properties$a4 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a4 === void 0 ? void 0 : _doclogs$properties$a4.length) > ((_doclogs$properties$o = doclogs.properties.old.list_parts) === null || _doclogs$properties$o === void 0 ? void 0 : _doclogs$properties$o.length)) {\n            var _doclogs$properties$a5;\n\n            var listpartsnew = (_doclogs$properties$a5 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a5 === void 0 ? void 0 : _doclogs$properties$a5.filter(function (docfil) {\n              var _doclogs$properties$o2;\n\n              return ((_doclogs$properties$o2 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o2 === void 0 ? void 0 : _doclogs$properties$o2.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n            descnew = descnew + \"Penambahan Item \\\"\".concat(listpartsnew === null || listpartsnew === void 0 ? void 0 : listpartsnew.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\" menjadi Item Part\");\n          } else if (((_doclogs$properties$a6 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a6 === void 0 ? void 0 : _doclogs$properties$a6.length) < ((_doclogs$properties$o3 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o3 === void 0 ? void 0 : _doclogs$properties$o3.length)) {\n            var _doclogs$properties$o4;\n\n            var listpartsold = (_doclogs$properties$o4 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o4 === void 0 ? void 0 : _doclogs$properties$o4.filter(function (docfil) {\n              var _doclogs$properties$a7;\n\n              return ((_doclogs$properties$a7 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a7 === void 0 ? void 0 : _doclogs$properties$a7.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n            descnew = descnew + \"Pengeluaran Item Part \\\"\".concat(listpartsold === null || listpartsold === void 0 ? void 0 : listpartsold.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\"\");\n          } else if (((_doclogs$properties$a8 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a8 === void 0 ? void 0 : _doclogs$properties$a8.length) === ((_doclogs$properties$o5 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o5 === void 0 ? void 0 : _doclogs$properties$o5.length)) {\n            var _doclogs$properties$a9, _doclogs$properties$o7;\n\n            var _listpartsnew = (_doclogs$properties$a9 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a9 === void 0 ? void 0 : _doclogs$properties$a9.filter(function (docfil) {\n              var _doclogs$properties$o6;\n\n              return ((_doclogs$properties$o6 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o6 === void 0 ? void 0 : _doclogs$properties$o6.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n\n            var _listpartsold = (_doclogs$properties$o7 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o7 === void 0 ? void 0 : _doclogs$properties$o7.filter(function (docfil) {\n              var _doclogs$properties$a10;\n\n              return ((_doclogs$properties$a10 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a10 === void 0 ? void 0 : _doclogs$properties$a10.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n\n            descnew = descnew + \"Pergantian Item Part \\\"\".concat(_listpartsold === null || _listpartsold === void 0 ? void 0 : _listpartsold.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\" menjadi \\\"\").concat(_listpartsnew === null || _listpartsnew === void 0 ? void 0 : _listpartsnew.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\"\");\n          } else {\n            var prpts = [];\n\n            for (var prop in doclogs.properties.old) {\n              prpts.push(prop);\n            }\n\n            descnew = descnew + \"Pengubahan \\\"\".concat(prpts.join(\", \"), \"\\\" Item\");\n          }\n        }\n\n        if (desc1[0] === \"Deleted\") {\n          if (desc1[2] === \"Relationship\") {\n            desc1[0] === \"Created\" ? descnew = descnew + \"Penambahan Relationship \\\"\".concat(doclogs.properties.attributes.relationship, \"\\\"\") : null;\n            desc1[0] === \"Deleted\" ? descnew = descnew + \"Penghapusan Relationship \\\"\".concat(doclogs.properties.old.relationship, \"\\\"\") : null;\n          } else if (desc1[1] === \"Association\") {\n            descnew = descnew + \"Association Dihapus: \".concat(doclogs.properties);\n          }\n        }\n\n        return _objectSpread(_objectSpread({}, doclogs), {}, {\n          date: datenew,\n          description: descnew\n        });\n      });\n      var weeklogsmap = res2.data.week_logs.map(function (doclogs, idxlogs) {\n        var datenew = moment(doclogs.date).locale(\"id\").format(\"LLL\");\n        var descnew = \"\";\n        var desckondisiOld = doclogs.properties ? doclogs.properties.old ? doclogs.properties.old.status_condition === 1 ? \"Good\" : doclogs.properties.old.status_condition === 2 ? \"Grey\" : doclogs.properties.old.status_condition === 3 ? \"Bad\" : null : null : null;\n        var desckondisiBaru = doclogs.properties ? doclogs.properties.attributes ? doclogs.properties.attributes.status_condition === 1 ? \"Good\" : doclogs.properties.attributes.status_condition === 2 ? \"Grey\" : doclogs.properties.attributes.status_condition === 3 ? \"Bad\" : null : null : null;\n        var descusageOld = doclogs.properties ? doclogs.properties.old ? doclogs.properties.old.status_usage === 1 ? \"In Used\" : doclogs.properties.old.status_usage === 2 ? \"In Stock\" : doclogs.properties.old.status_usage === 3 ? \"Replacement\" : null : null : null;\n        var descusageBaru = doclogs.properties ? doclogs.properties.attributes ? doclogs.properties.attributes.status_usage === 1 ? \"In Used\" : doclogs.properties.attributes.status_usage === 2 ? \"In Stock\" : doclogs.properties.attributes.status_usage === 3 ? \"Replacement\" : null : null : null;\n        var desc1 = doclogs.description.split(\" \");\n\n        if (desc1[0] === \"Created\") {\n          var _doclogs$properties$a11;\n\n          if (desc1[2] === \"Relationship\") {\n            desc1[0] === \"Created\" ? descnew = descnew + \"Penambahan Relationship \\\"\".concat(doclogs.properties.attributes.relationship, \"\\\"\") : null;\n            desc1[0] === \"Deleted\" ? descnew = descnew + \"Penghapusan Relationship \\\"\".concat(doclogs.properties.old.relationship, \"\\\"\") : null;\n          } else if (desc1[1] === \"Association\") {\n            descnew = descnew + \"Association Baru: \".concat(doclogs.properties);\n          } else if ((_doclogs$properties$a11 = doclogs.properties.attributes) !== null && _doclogs$properties$a11 !== void 0 && _doclogs$properties$a11.list_parts) {\n            descnew = descnew + \"Inisialisasi Pembuatan Item Part \\\"\".concat(maindata.inventory_parts.filter(function (docfil) {\n              var _doclogs$properties$a12;\n\n              return (_doclogs$properties$a12 = doclogs.properties.attributes) === null || _doclogs$properties$a12 === void 0 ? void 0 : _doclogs$properties$a12.list_parts.includes(docfil.id);\n            }).map(function (docmap) {\n              return docmap.inventory_name;\n            }).join(\", \"), \"\\\"\");\n          } else {\n            var _doclogs$properties$a13;\n\n            descnew = descnew + \"Pembuatan Item Baru bernama \\\"\".concat((_doclogs$properties$a13 = doclogs.properties.attributes) === null || _doclogs$properties$a13 === void 0 ? void 0 : _doclogs$properties$a13.inventory_name, \"\\\"\");\n          }\n        }\n\n        desc1[0] === \"Notes\" ? descnew = descnew + \"Penambahan Notes\" : null;\n\n        if (desc1[0] === \"Updated\") {\n          var _doclogs$properties$a14, _doclogs$properties$o8, _doclogs$properties$a16, _doclogs$properties$o10, _doclogs$properties$a18, _doclogs$properties$o12;\n\n          if (doclogs.properties.attributes.status_condition) {\n            descnew = descnew + \"Pengubahan status kondisi dari \".concat(desckondisiOld, \" ke \").concat(desckondisiBaru);\n          } else if (doclogs.properties.attributes.status_usage) {\n            descnew = descnew + \"Pengubahan status pemakaian dari \".concat(descusageOld, \" ke \").concat(descusageBaru);\n          } else if (doclogs.properties.attributes.inventory_name) {\n            descnew = descnew + \"Pengubahan Nama Item dari \\\"\".concat(doclogs.properties.old.inventory_name, \"\\\" ke \\\"\").concat(doclogs.properties.attributes.inventory_name, \"\\\"\");\n          } else if (doclogs.properties.attributes.serial_number) {\n            descnew = descnew + \"Pengubahan Serial Number Item dari \\\"\".concat(doclogs.properties.old.serial_number, \"\\\" ke \\\"\").concat(doclogs.properties.attributes.serial_number, \"\\\"\");\n          } else if (doclogs.properties.attributes.location) {\n            descnew = descnew + \"Pengubahan Location Item dari \\\"\".concat(invrelations.companies.filter(function (doc) {\n              return doc.id === doclogs.properties.old.location;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.companies.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.location;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.vendor_id) {\n            descnew = descnew + \"Pengubahan Vendor Item dari \\\"\".concat(invrelations.vendors.filter(function (doc) {\n              return doc.id === doclogs.properties.old.vendor_id;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.vendors.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.vendor_id;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.manufacturer_id) {\n            descnew = descnew + \"Pengubahan Manufacturer Item dari \\\"\".concat(invrelations.manufacturers.filter(function (doc) {\n              return doc.id === doclogs.properties.old.manufacturer_id;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.manufacturers.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.manufacturer_id;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.deskripsi) {\n            descnew = descnew + \"Pengubahan Deskripsi Item\";\n          } else if (((_doclogs$properties$a14 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a14 === void 0 ? void 0 : _doclogs$properties$a14.length) > ((_doclogs$properties$o8 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o8 === void 0 ? void 0 : _doclogs$properties$o8.length)) {\n            var _doclogs$properties$a15;\n\n            var listpartsnew = (_doclogs$properties$a15 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a15 === void 0 ? void 0 : _doclogs$properties$a15.filter(function (docfil) {\n              var _doclogs$properties$o9;\n\n              return ((_doclogs$properties$o9 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o9 === void 0 ? void 0 : _doclogs$properties$o9.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n            descnew = descnew + \"Penambahan Item \\\"\".concat(listpartsnew === null || listpartsnew === void 0 ? void 0 : listpartsnew.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\" menjadi Item Part\");\n          } else if (((_doclogs$properties$a16 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a16 === void 0 ? void 0 : _doclogs$properties$a16.length) < ((_doclogs$properties$o10 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o10 === void 0 ? void 0 : _doclogs$properties$o10.length)) {\n            var _doclogs$properties$o11;\n\n            var listpartsold = (_doclogs$properties$o11 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o11 === void 0 ? void 0 : _doclogs$properties$o11.filter(function (docfil) {\n              var _doclogs$properties$a17;\n\n              return ((_doclogs$properties$a17 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a17 === void 0 ? void 0 : _doclogs$properties$a17.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n            descnew = descnew + \"Pengeluaran Item Part \\\"\".concat(listpartsold === null || listpartsold === void 0 ? void 0 : listpartsold.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\"\");\n          } else if (((_doclogs$properties$a18 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a18 === void 0 ? void 0 : _doclogs$properties$a18.length) === ((_doclogs$properties$o12 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o12 === void 0 ? void 0 : _doclogs$properties$o12.length)) {\n            var _doclogs$properties$a19, _doclogs$properties$o14;\n\n            var _listpartsnew2 = (_doclogs$properties$a19 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a19 === void 0 ? void 0 : _doclogs$properties$a19.filter(function (docfil) {\n              var _doclogs$properties$o13;\n\n              return ((_doclogs$properties$o13 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o13 === void 0 ? void 0 : _doclogs$properties$o13.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n\n            var _listpartsold2 = (_doclogs$properties$o14 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o14 === void 0 ? void 0 : _doclogs$properties$o14.filter(function (docfil) {\n              var _doclogs$properties$a20;\n\n              return ((_doclogs$properties$a20 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a20 === void 0 ? void 0 : _doclogs$properties$a20.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n\n            descnew = descnew + \"Pergantian Item Part \\\"\".concat(_listpartsold2 === null || _listpartsold2 === void 0 ? void 0 : _listpartsold2.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\" menjadi \\\"\").concat(_listpartsnew2 === null || _listpartsnew2 === void 0 ? void 0 : _listpartsnew2.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\"\");\n          } else {\n            var prpts = [];\n\n            for (var prop in doclogs.properties.old) {\n              prpts.push(prop);\n            }\n\n            descnew = descnew + \"Pengubahan \\\"\".concat(prpts.join(\", \"), \"\\\" Item\");\n          }\n        }\n\n        if (desc1[0] === \"Deleted\") {\n          if (desc1[2] === \"Relationship\") {\n            desc1[0] === \"Created\" ? descnew = descnew + \"Penambahan Relationship \\\"\".concat(doclogs.properties.attributes.relationship, \"\\\"\") : null;\n            desc1[0] === \"Deleted\" ? descnew = descnew + \"Penghapusan Relationship \\\"\".concat(doclogs.properties.old.relationship, \"\\\"\") : null;\n          }\n        }\n\n        return _objectSpread(_objectSpread({}, doclogs), {}, {\n          date: datenew,\n          description: descnew\n        });\n      });\n      var morelogsmap = res2.data.else_logs.map(function (doclogs, idxlogs) {\n        var datenew = moment(doclogs.date).locale(\"id\").format(\"LLL\");\n        var descnew = \"\";\n        var desckondisiOld = doclogs.properties ? doclogs.properties.old ? doclogs.properties.old.status_condition === 1 ? \"Good\" : doclogs.properties.old.status_condition === 2 ? \"Grey\" : doclogs.properties.old.status_condition === 3 ? \"Bad\" : null : null : null;\n        var desckondisiBaru = doclogs.properties ? doclogs.properties.attributes ? doclogs.properties.attributes.status_condition === 1 ? \"Good\" : doclogs.properties.attributes.status_condition === 2 ? \"Grey\" : doclogs.properties.attributes.status_condition === 3 ? \"Bad\" : null : null : null;\n        var descusageOld = doclogs.properties ? doclogs.properties.old ? doclogs.properties.old.status_usage === 1 ? \"In Used\" : doclogs.properties.old.status_usage === 2 ? \"In Stock\" : doclogs.properties.old.status_usage === 3 ? \"Replacement\" : null : null : null;\n        var descusageBaru = doclogs.properties ? doclogs.properties.attributes ? doclogs.properties.attributes.status_usage === 1 ? \"In Used\" : doclogs.properties.attributes.status_usage === 2 ? \"In Stock\" : doclogs.properties.attributes.status_usage === 3 ? \"Replacement\" : null : null : null;\n        var desc1 = doclogs.description.split(\" \");\n\n        if (desc1[0] === \"Created\") {\n          var _doclogs$properties$a21;\n\n          if (desc1[2] === \"Relationship\") {\n            desc1[0] === \"Created\" ? descnew = descnew + \"Penambahan Relationship \\\"\".concat(doclogs.properties.attributes.relationship, \"\\\"\") : null;\n            desc1[0] === \"Deleted\" ? descnew = descnew + \"Penghapusan Relationship \\\"\".concat(doclogs.properties.old.relationship, \"\\\"\") : null;\n          } else if (desc1[1] === \"Association\") {\n            descnew = descnew + \"Association Baru: \".concat(doclogs.properties);\n          } else if ((_doclogs$properties$a21 = doclogs.properties.attributes) !== null && _doclogs$properties$a21 !== void 0 && _doclogs$properties$a21.list_parts) {\n            descnew = descnew + \"Inisialisasi Pembuatan Item Part \\\"\".concat(maindata.inventory_parts.filter(function (docfil) {\n              var _doclogs$properties$a22;\n\n              return (_doclogs$properties$a22 = doclogs.properties.attributes) === null || _doclogs$properties$a22 === void 0 ? void 0 : _doclogs$properties$a22.list_parts.includes(docfil.id);\n            }).map(function (docmap) {\n              return docmap.inventory_name;\n            }).join(\", \"), \"\\\"\");\n          } else {\n            var _doclogs$properties$a23;\n\n            descnew = descnew + \"Pembuatan Item Baru bernama \\\"\".concat((_doclogs$properties$a23 = doclogs.properties.attributes) === null || _doclogs$properties$a23 === void 0 ? void 0 : _doclogs$properties$a23.inventory_name, \"\\\"\");\n          }\n        }\n\n        desc1[0] === \"Notes\" ? descnew = descnew + \"Penambahan Notes\" : null;\n\n        if (desc1[0] === \"Updated\") {\n          var _doclogs$properties$a24, _doclogs$properties$o15, _doclogs$properties$a26, _doclogs$properties$o17, _doclogs$properties$a28, _doclogs$properties$o19;\n\n          if (doclogs.properties.attributes.status_condition) {\n            descnew = descnew + \"Pengubahan status kondisi dari \".concat(desckondisiOld, \" ke \").concat(desckondisiBaru);\n          } else if (doclogs.properties.attributes.status_usage) {\n            descnew = descnew + \"Pengubahan status pemakaian dari \".concat(descusageOld, \" ke \").concat(descusageBaru);\n          } else if (doclogs.properties.attributes.inventory_name) {\n            descnew = descnew + \"Pengubahan Nama Item dari \\\"\".concat(doclogs.properties.old.inventory_name, \"\\\" ke \\\"\").concat(doclogs.properties.attributes.inventory_name, \"\\\"\");\n          } else if (doclogs.properties.attributes.serial_number) {\n            descnew = descnew + \"Pengubahan Serial Number Item dari \\\"\".concat(doclogs.properties.old.serial_number, \"\\\" ke \\\"\").concat(doclogs.properties.attributes.serial_number, \"\\\"\");\n          } else if (doclogs.properties.attributes.location) {\n            descnew = descnew + \"Pengubahan Location Item dari \\\"\".concat(invrelations.companies.filter(function (doc) {\n              return doc.id === doclogs.properties.old.location;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.companies.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.location;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.vendor_id) {\n            descnew = descnew + \"Pengubahan Vendor Item dari \\\"\".concat(invrelations.vendors.filter(function (doc) {\n              return doc.id === doclogs.properties.old.vendor_id;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.vendors.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.vendor_id;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.manufacturer_id) {\n            descnew = descnew + \"Pengubahan Manufacturer Item dari \\\"\".concat(invrelations.manufacturers.filter(function (doc) {\n              return doc.id === doclogs.properties.old.manufacturer_id;\n            })[0].name, \"\\\" ke \\\"\").concat(invrelations.manufacturers.filter(function (doc) {\n              return doc.id === doclogs.properties.attributes.manufacturer_id;\n            })[0].name, \"\\\"\");\n          } else if (doclogs.properties.attributes.deskripsi) {\n            descnew = descnew + \"Pengubahan Deskripsi Item\";\n          } else if (((_doclogs$properties$a24 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a24 === void 0 ? void 0 : _doclogs$properties$a24.length) > ((_doclogs$properties$o15 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o15 === void 0 ? void 0 : _doclogs$properties$o15.length)) {\n            var _doclogs$properties$a25;\n\n            var listpartsnew = (_doclogs$properties$a25 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a25 === void 0 ? void 0 : _doclogs$properties$a25.filter(function (docfil) {\n              var _doclogs$properties$o16;\n\n              return ((_doclogs$properties$o16 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o16 === void 0 ? void 0 : _doclogs$properties$o16.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n            descnew = descnew + \"Penambahan Item \\\"\".concat(listpartsnew === null || listpartsnew === void 0 ? void 0 : listpartsnew.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\" menjadi Item Part\");\n          } else if (((_doclogs$properties$a26 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a26 === void 0 ? void 0 : _doclogs$properties$a26.length) < ((_doclogs$properties$o17 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o17 === void 0 ? void 0 : _doclogs$properties$o17.length)) {\n            var _doclogs$properties$o18;\n\n            var listpartsold = (_doclogs$properties$o18 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o18 === void 0 ? void 0 : _doclogs$properties$o18.filter(function (docfil) {\n              var _doclogs$properties$a27;\n\n              return ((_doclogs$properties$a27 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a27 === void 0 ? void 0 : _doclogs$properties$a27.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n            descnew = descnew + \"Pengeluaran Item Part \\\"\".concat(listpartsold === null || listpartsold === void 0 ? void 0 : listpartsold.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\"\");\n          } else if (((_doclogs$properties$a28 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a28 === void 0 ? void 0 : _doclogs$properties$a28.length) === ((_doclogs$properties$o19 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o19 === void 0 ? void 0 : _doclogs$properties$o19.length)) {\n            var _doclogs$properties$a29, _doclogs$properties$o21;\n\n            var _listpartsnew3 = (_doclogs$properties$a29 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a29 === void 0 ? void 0 : _doclogs$properties$a29.filter(function (docfil) {\n              var _doclogs$properties$o20;\n\n              return ((_doclogs$properties$o20 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o20 === void 0 ? void 0 : _doclogs$properties$o20.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n\n            var _listpartsold3 = (_doclogs$properties$o21 = doclogs.properties.old.list_parts) === null || _doclogs$properties$o21 === void 0 ? void 0 : _doclogs$properties$o21.filter(function (docfil) {\n              var _doclogs$properties$a30;\n\n              return ((_doclogs$properties$a30 = doclogs.properties.attributes.list_parts) === null || _doclogs$properties$a30 === void 0 ? void 0 : _doclogs$properties$a30.map(function (part) {\n                return part.id;\n              }).includes(docfil.id)) === false;\n            });\n\n            descnew = descnew + \"Pergantian Item Part \\\"\".concat(_listpartsold3 === null || _listpartsold3 === void 0 ? void 0 : _listpartsold3.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\" menjadi \\\"\").concat(_listpartsnew3 === null || _listpartsnew3 === void 0 ? void 0 : _listpartsnew3.map(function (part) {\n              return part.mig_id;\n            }).join(\", \"), \"\\\"\");\n          } else {\n            var prpts = [];\n\n            for (var prop in doclogs.properties.old) {\n              prpts.push(prop);\n            }\n\n            descnew = descnew + \"Pengubahan \\\"\".concat(prpts.join(\", \"), \"\\\" Item\");\n          }\n        }\n\n        if (desc1[0] === \"Deleted\") {\n          if (desc1[2] === \"Relationship\") {\n            desc1[0] === \"Created\" ? descnew = descnew + \"Penambahan Relationship \\\"\".concat(doclogs.properties.attributes.relationship, \"\\\"\") : null;\n            desc1[0] === \"Deleted\" ? descnew = descnew + \"Penghapusan Relationship \\\"\".concat(doclogs.properties.old.relationship, \"\\\"\") : null;\n          }\n        }\n\n        return _objectSpread(_objectSpread({}, doclogs), {}, {\n          date: datenew,\n          description: descnew\n        });\n      });\n      setdaylogs(daylogsmap);\n      setweeklogs(weeklogsmap);\n      setmorelogs(morelogsmap);\n      setpraloadinglogs(false);\n    }); // .then(res3 => {\n    //     fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationshipInventory?id=${itemid}&type_id=-4`, {\n    //         method: `GET`,\n    //         headers: {\n    //             'Authorization': JSON.parse(initProps),\n    //         }\n    //     })\n    //         .then(res => res.json())\n    //         .then(res4 => {\n    //             var concatarr = res4.data.from_inverse.concat(res4.data.not_from_inverse)\n    //             var logs2map = res3.data.relationship.map((docrel, idxrel) => {\n    //                 const datenew2 = moment(docrel.date).locale(\"id\").format('LLL')\n    //                 var descnew2 = ''\n    //                 var idlognew = -1\n    //                 const desc2 = docrel.description.split(\" \")\n    //                 desc2[0] === 'Created' ? idlognew = concatarr.filter(docfil => docfil.id === docrel.properties.attributes.id)[0] : null\n    //                 desc2[0] === 'Created' ? descnew2 = descnew2 + `Penambahan Relationship \"${typeof (idlognew) === 'undefined' ? \"(Sudah Dihapus lagi)\" : `${idlognew.relationship}`}\"` : null\n    //                 desc2[0] === 'Deleted' ? descnew2 = descnew2 + `Penghapusan Relationship` : null\n    //                 return {\n    //                     ...docrel,\n    //                     date: datenew2,\n    //                     description: descnew2\n    //                 }\n    //             })\n    //             setlogs2(logs2map)\n    //             setpraloadinglogs2(false)\n    //         })\n    // })\n  }, [activitytrigger]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b flex justify-between p-5 mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-bold text-xl my-auto\",\n        children: \"Activity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2541,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2540,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col w-6/12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-semibold mx-auto text-xl mb-3\",\n            children: \"Hari Ini\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2546,\n            columnNumber: 13\n          }, _this), praloadinglogs ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2548,\n            columnNumber: 15\n          }, _this) : daylogs.length < 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(_Empty, {\n              image: _Empty.PRESENTED_IMAGE_SIMPLE\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2551,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Timeline, {\n            mode: \"left\",\n            children: daylogs.map(function (doclog, idxlog) {\n              return /*#__PURE__*/_jsxDEV(_Timeline.Item, {\n                label: doclog.date,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    className: \"font-semibold text-base mb-1\",\n                    children: doclog.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2559,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1 text-xs text-gray-500\",\n                    children: [\"Oleh \", doclog.causer_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2562,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1 text-sm\",\n                    children: [\"Notes: \", doclog.notes]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2565,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2558,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2557,\n                columnNumber: 21\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2554,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2545,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-semibold mx-auto text-xl mb-3\",\n            children: \"Minggu Ini\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2574,\n            columnNumber: 13\n          }, _this), praloadinglogs ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2576,\n            columnNumber: 15\n          }, _this) : weeklogs.length < 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(_Empty, {\n              image: _Empty.PRESENTED_IMAGE_SIMPLE\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2579,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Timeline, {\n            mode: \"left\",\n            children: weeklogs.map(function (doclog, idxlog) {\n              return /*#__PURE__*/_jsxDEV(_Timeline.Item, {\n                label: doclog.date,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    className: \"font-semibold text-base mb-1\",\n                    children: doclog.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2587,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1 text-xs text-gray-500\",\n                    children: [\"Oleh \", doclog.causer_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2590,\n                    columnNumber: 25\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1 text-sm\",\n                    children: [\"Notes: \", doclog.notes]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2593,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2586,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2585,\n                columnNumber: 21\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2582,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2573,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2544,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col w-6/12\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-semibold mx-auto text-xl mb-3\",\n          children: \"Minggu Lalu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2603,\n          columnNumber: 11\n        }, _this), praloadinglogs ? /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2605,\n          columnNumber: 13\n        }, _this) : morelogs.length < 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(_Empty, {\n            image: _Empty.PRESENTED_IMAGE_SIMPLE\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2608,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Timeline, {\n          mode: \"left\",\n          children: morelogs.map(function (doclog, idxlog) {\n            return /*#__PURE__*/_jsxDEV(_Timeline.Item, {\n              label: doclog.date,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"font-semibold text-base mb-1\",\n                  children: doclog.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2616,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mb-1 text-xs text-gray-500\",\n                  children: [\"Oleh \", doclog.causer_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2619,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mb-1 text-sm\",\n                  children: [\"Notes: \", doclog.notes]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2622,\n                  columnNumber: 23\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2615,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2614,\n              columnNumber: 19\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2611,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2602,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2543,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2539,\n    columnNumber: 5\n  }, _this);\n};\n\n_s5(Acitivty, \"qkjfxhKSmikUUeYGY/BkevkIjUc=\");\n\n_c5 = Acitivty;\n\nvar ItemDetail = function ItemDetail(_ref6) {\n  _s6();\n\n  var initProps = _ref6.initProps,\n      dataProfile = _ref6.dataProfile,\n      sidemenu = _ref6.sidemenu,\n      itemid = _ref6.itemid;\n  //1. Init\n  var rt = useRouter();\n  var activeTab = \"overview\";\n  var active = rt.query.active;\n\n  if (active) {\n    activeTab = active;\n  }\n\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 2);\n  pathArr[pathArr.length - 1] = \"Detail Item\";\n  var TabPane = _Tabs.TabPane; //useState\n\n  var _useState63 = useState({\n    id: \"\",\n    model_id: \"\",\n    vendor_id: \"\",\n    inventory_name: \"\",\n    status_condition: \"\",\n    status_usage: \"\",\n    location: \"\",\n    is_exist: \"\",\n    deskripsi: \"\",\n    manufacturer_id: \"\",\n    mig_id: \"\",\n    serial_number: \"\",\n    created_at: \"\",\n    updated_at: \"\",\n    deleted_at: \"\",\n    asset_name: \"\",\n    model_name: \"\",\n    location_name: \"\",\n    model_inventory: {\n      id: null,\n      name: \"\",\n      asset_id: null,\n      deleted_at: null,\n      asset: {\n        id: null,\n        name: \"\",\n        deleted_at: null\n      }\n    },\n    location_inventory: {\n      company_id: null,\n      company_name: \"\"\n    },\n    additional_attributes: [],\n    inventory_parts: [],\n    associations: [],\n    quantities: []\n  }),\n      maindata = _useState63[0],\n      setmaindata = _useState63[1];\n\n  var _useState64 = useState({\n    models: [{\n      id: \"\",\n      name: \"\",\n      deleted_at: null\n    }],\n    assets: [{\n      id: \"\",\n      name: \"\",\n      deleted_at: null\n    }],\n    manufacturers: [{\n      id: \"\",\n      name: \"\",\n      deleted_at: null\n    }],\n    status_condition: [],\n    status_usage: [],\n    vendors: [],\n    companies: [],\n    tree_companies: {\n      children: []\n    }\n  }),\n      invrelations = _useState64[0],\n      setinvrelations = _useState64[1];\n\n  var _useState65 = useState([]),\n      relship = _useState65[0],\n      setrelship = _useState65[1];\n\n  var _useState66 = useState(\"\"),\n      manuf = _useState66[0],\n      setmanuf = _useState66[1];\n\n  var _useState67 = useState(\"\"),\n      vendor = _useState67[0],\n      setvendor = _useState67[1];\n\n  var _useState68 = useState(true),\n      praloading = _useState68[0],\n      setpraloading = _useState68[1];\n\n  var _useState69 = useState(true),\n      praloading2 = _useState69[0],\n      setpraloading2 = _useState69[1]; //delete\n\n\n  var _useState70 = useState(false),\n      modaldelete = _useState70[0],\n      setmodaldelete = _useState70[1];\n\n  var _useState71 = useState(false),\n      loadingdelete = _useState71[0],\n      setloadingdelete = _useState71[1]; //notes\n\n\n  var _useState72 = useState(\"\"),\n      notes = _useState72[0],\n      setnotes = _useState72[1];\n\n  var _useState73 = useState(false),\n      modalnotes = _useState73[0],\n      setmodalnotes = _useState73[1];\n\n  var _useState74 = useState(false),\n      loadingnotes = _useState74[0],\n      setloadingnotes = _useState74[1]; //kondisi\n\n\n  var _useState75 = useState(\"\"),\n      kondisi = _useState75[0],\n      setkondisi = _useState75[1];\n\n  var _useState76 = useState(\"\"),\n      notekondisi = _useState76[0],\n      setnotekondisi = _useState76[1];\n\n  var _useState77 = useState(false),\n      modalkondisi = _useState77[0],\n      setmodalkondisi = _useState77[1];\n\n  var _useState78 = useState(true),\n      displaykondisi = _useState78[0],\n      setdisplaykondisi = _useState78[1];\n\n  var _useState79 = useState(false),\n      loadingkondisi = _useState79[0],\n      setloadingkondisi = _useState79[1]; //status pemakaian\n\n\n  var _useState80 = useState({\n    id: Number(itemid),\n    status_usage: \"\",\n    notes: \"\",\n    relationship_type_id: \"\",\n    connected_id: \"\",\n    detail_connected_id: null\n  }),\n      changeusage = _useState80[0],\n      setchangeusage = _useState80[1];\n\n  var _useState81 = useState(true),\n      disabledusage = _useState81[0],\n      setdisabledusage = _useState81[1];\n\n  var _useState82 = useState(false),\n      modalusage = _useState82[0],\n      setmodalusage = _useState82[1];\n\n  var _useState83 = useState(true),\n      displayusage = _useState83[0],\n      setdisplayusage = _useState83[1];\n\n  var _useState84 = useState(false),\n      loadingchangecompanyusage = _useState84[0],\n      setloadingchangecompanyusage = _useState84[1];\n\n  var _useState85 = useState(false),\n      loadingusage = _useState85[0],\n      setloadingusage = _useState85[1]; // const [agents, setagents] = useState([])\n  // const [requesters, setrequesters] = useState([])\n\n\n  var _useState86 = useState([]),\n      detaillist = _useState86[0],\n      setdetaillist = _useState86[1];\n\n  var _useState87 = useState([]),\n      models = _useState87[0],\n      setmodels = _useState87[1];\n\n  var _useState88 = useState([]),\n      sublocations = _useState88[0],\n      setsublocations = _useState88[1];\n\n  var _useState89 = useState(false),\n      locationsdisplay = _useState89[0],\n      setlocationsdisplay = _useState89[1];\n\n  var _useState90 = useState(-1),\n      sublocationtrigger = _useState90[0],\n      setsublocationtrigger = _useState90[1];\n\n  var _useState91 = useState(0),\n      activitytrigger = _useState91[0],\n      setactivitytrigger = _useState91[1]; //helper\n  //handler\n\n\n  var handleDeleteItem = function handleDeleteItem() {\n    setloadingdelete(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/deleteInventory\"), {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: Number(itemid),\n        notes: \"\"\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingdelete(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Item berhasil dihapus\",\n          duration: 3\n        });\n\n        setmodaldelete(false);\n        rt.push(\"/items\");\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleNotesItem = function handleNotesItem() {\n    setloadingnotes(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/addInventoryNotes\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: Number(itemid),\n        notes: notes\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingnotes(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Notes berhasil ditambahkan\",\n          duration: 3\n        });\n\n        setmodalnotes(false);\n        window.location.href = \"/items/detail/\".concat(itemid, \"?active=activity\");\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleKondisiItem = function handleKondisiItem() {\n    setloadingkondisi(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/changeStatusCondition\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: Number(itemid),\n        notes: notekondisi,\n        status_condition: kondisi\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingkondisi(false);\n      setmodalkondisi(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Status Kondisi berhasil diubah\",\n          duration: 2\n        });\n\n        window.location.href = \"/items/detail/\".concat(itemid);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  };\n\n  var handleUsageItem = function handleUsageItem() {\n    setloadingusage(true);\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/changeStatusUsage\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(changeusage)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingusage(false);\n      setmodalusage(false);\n\n      if (res2.success) {\n        _notification[\"success\"]({\n          message: \"Status Pemakaian berhasil diubah\",\n          duration: 2\n        });\n\n        window.location.href = \"/items/detail/\".concat(itemid);\n      } else if (!res2.success) {\n        _notification[\"error\"]({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getInventory?id=\").concat(itemid), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var t = {};\n\n      for (var prop in res2.data) {\n        if (prop === \"additional_attributes\") {\n          t[prop] = res2.data[prop].map(function (doc, idx) {\n            if (doc.data_type === \"dropdown\" || doc.data_type === \"checkbox\") {\n              return _objectSpread(_objectSpread({}, doc), {}, {\n                value: JSON.parse(doc.value)\n              });\n            } else {\n              return _objectSpread({}, doc);\n            }\n          });\n        } else {\n          t[prop] = res2.data[prop];\n        }\n      }\n\n      setmaindata(t);\n      setpraloading(false);\n      return t;\n    }).then(function (res3) {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getInventoryRelations\"), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        var _res2$data$vendors$fi;\n\n        setinvrelations(res2.data);\n        var del_manuf = null;\n        res3.manufacturer_id === 0 || res3.manufacturer_id === null ? del_manuf = null : del_manuf = res2.data.manufacturers.filter(function (docfil) {\n          return docfil.id === res3.manufacturer_id;\n        })[0].deleted_at;\n        setmanuf({\n          name: res3.manufacturer_id === null || res3.manufacturer_id === 0 ? \"-\" : res2.data.manufacturers.filter(function (docfil) {\n            return docfil.id === res3.manufacturer_id;\n          })[0].name,\n          isnull: del_manuf !== null ? false : true\n        });\n        res3.vendor_id === null || res3.vendor_id === 0 ? setvendor(\"-\") : setvendor((_res2$data$vendors$fi = res2.data.vendors.filter(function (docfil) {\n          return docfil.id === res3.vendor_id;\n        })[0]) === null || _res2$data$vendors$fi === void 0 ? void 0 : _res2$data$vendors$fi.name);\n        setpraloading2(false);\n      });\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getFilterModels\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setmodels(res2.data);\n    });\n  }, []);\n  useEffect(function () {\n    if (changeusage.relationship_type_id !== \"\") {\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getChangeStatusUsageDetailList?id=\").concat(changeusage.relationship_type_id), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        changeusage.relationship_type_id === -3 ? setdetaillist([res2.data]) : setdetaillist(res2.data.data);\n      });\n    }\n  }, [changeusage]);\n  useEffect(function () {\n    if (sublocationtrigger !== -1) {\n      setloadingchangecompanyusage(true);\n      fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventoryDetailList?type_id=\").concat(changeusage.connected_id), {\n        method: \"GET\",\n        headers: {\n          Authorization: JSON.parse(initProps)\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res2) {\n        setloadingchangecompanyusage(false);\n        setsublocations(res2.data.children);\n      });\n    }\n  }, [sublocationtrigger]);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getRelationshipInventory?id=\").concat(itemid, \"&type_id=-4\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setrelship(res2.data.from_inverse.concat(res2.data.not_from_inverse));\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    st: st,\n    sidemenu: sidemenu,\n    tok: initProps,\n    pathArr: pathArr,\n    dataProfile: dataProfile,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-auto grid grid-cols-1 md:grid-cols-4\",\n      id: \"createAssetsWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-4 mb-8\",\n        children: /*#__PURE__*/_jsxDEV(Sticky, {\n          containerSelectorFocus: \"#createAgentsWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" col-span-4 flex justify-between py-5 px-4 border-t border-b bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \" text-gray-400 mb-0\",\n                  children: \"Item:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3039,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"font-semibold py-2 text-2xl mb-0 mr-20\",\n                  children: [maindata.mig_id, \" - \", maindata.model_inventory.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3040,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3038,\n                columnNumber: 17\n              }, _this), praloading ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col mr-7 p-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1\",\n                    children: \"Status Pemakaian:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3047,\n                    columnNumber: 23\n                  }, _this), displayusage ? /*#__PURE__*/_jsxDEV(_Select, {\n                    style: {\n                      width: \"10rem\"\n                    },\n                    placeholder: \"Masukkan Status Pemakaian\",\n                    defaultValue: maindata.status_usage === 0 || maindata.status_usage === null ? null : maindata.status_usage,\n                    onChange: function onChange(value) {\n                      setdisabledusage(function (prev) {\n                        if (value !== 1) {\n                          return false;\n                        } else {\n                          return true;\n                        }\n                      });\n                      setchangeusage(_objectSpread(_objectSpread({}, changeusage), {}, {\n                        status_usage: value\n                      }));\n                      setmodalusage(true);\n                      setdisplayusage(false);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                      value: 1,\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"In Used\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3075,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3074,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                      value: 2,\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"In Stock\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3078,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3077,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                      value: 3,\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Replacement\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3081,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3080,\n                      columnNumber: 27\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3049,\n                    columnNumber: 25\n                  }, _this) : null]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3046,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col p-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1\",\n                    children: \"Kondisi:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3087,\n                    columnNumber: 23\n                  }, _this), displaykondisi ? /*#__PURE__*/_jsxDEV(_Select, {\n                    style: {\n                      width: \"10rem\"\n                    },\n                    placeholder: \"Masukkan Status Kondisi\",\n                    defaultValue: maindata.status_condition === 0 || maindata.status_condition === null ? null : maindata.status_condition,\n                    onChange: function onChange(value) {\n                      setkondisi(value);\n                      setmodalkondisi(true);\n                      setdisplaykondisi(false);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                      value: 1,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"p-1 flex w-full items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-3 h-3 rounded-full bg-green-500 mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3106,\n                          columnNumber: 31\n                        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"mb-0 font-semibold\",\n                          children: \"Good\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3107,\n                          columnNumber: 31\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3105,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3104,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                      value: 2,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"p-1 flex w-full items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-3 h-3 rounded-full bg-gray-500 mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3112,\n                          columnNumber: 31\n                        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"mb-0 font-semibold\",\n                          children: \"Grey\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3113,\n                          columnNumber: 31\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3111,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3110,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                      value: 3,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"p-1 flex w-full items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-3 h-3 rounded-full bg-red-500 mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3118,\n                          columnNumber: 31\n                        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"mb-0 font-semibold\",\n                          children: \"Bad\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3119,\n                          columnNumber: 31\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3117,\n                        columnNumber: 29\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3116,\n                      columnNumber: 27\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3089,\n                    columnNumber: 25\n                  }, _this) : null]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3086,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3037,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2 items-center\",\n              children: [/*#__PURE__*/_jsxDEV(_Button, {\n                style: {\n                  marginRight: \"1rem\"\n                },\n                onClick: function onClick() {\n                  setmodalnotes(true);\n                },\n                size: \"large\",\n                children: \"Tambah Notes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3129,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"danger\",\n                size: \"large\",\n                onClick: function onClick() {\n                  setmodaldelete(true);\n                },\n                children: \"Hapus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3138,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3128,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3036,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3035,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3034,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-1 md:col-span-4 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" hidden md:block\",\n          children: /*#__PURE__*/_jsxDEV(_Tabs, {\n            tabPosition: \"left\",\n            defaultActiveKey: activeTab,\n            onTabClick: function onTabClick(key, e) {\n              if (key === \"activity\") {\n                setactivitytrigger(function (prev) {\n                  return prev + 1;\n                });\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Overview\",\n              children: /*#__PURE__*/_jsxDEV(Overview, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                manuf: manuf,\n                vendor: vendor,\n                praloading: praloading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3163,\n                columnNumber: 17\n              }, _this)\n            }, \"overview\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3162,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Konfigurasi Part\",\n              children: /*#__PURE__*/_jsxDEV(KonfigurasiPart, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                invrelations: invrelations,\n                praloading2: praloading2,\n                models: models,\n                setmodels: setmodels\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3173,\n                columnNumber: 17\n              }, _this)\n            }, \"konfigurasiPart\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3172,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Relationship\",\n              children: /*#__PURE__*/_jsxDEV(Relationship, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3184,\n                columnNumber: 17\n              }, _this)\n            }, \"relationship\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3183,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Association\",\n              children: /*#__PURE__*/_jsxDEV(Association, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                praloading: praloading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3191,\n                columnNumber: 17\n              }, _this)\n            }, \"association\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3190,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Activity\",\n              children: /*#__PURE__*/_jsxDEV(Acitivty, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                invrelations: invrelations,\n                activitytrigger: activitytrigger\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3199,\n                columnNumber: 17\n              }, _this)\n            }, \"activity\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3198,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3153,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3152,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" block md:hidden\",\n          children: /*#__PURE__*/_jsxDEV(_Tabs, {\n            tabPosition: \"top\",\n            defaultActiveKey: activeTab,\n            children: [/*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Overview\",\n              children: /*#__PURE__*/_jsxDEV(Overview, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                manuf: manuf,\n                vendor: vendor,\n                praloading: praloading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3212,\n                columnNumber: 17\n              }, _this)\n            }, \"overview\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3211,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Konfigurasi Part\",\n              children: /*#__PURE__*/_jsxDEV(KonfigurasiPart, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                invrelations: invrelations,\n                praloading2: praloading2,\n                models: models,\n                setmodels: setmodels\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3222,\n                columnNumber: 17\n              }, _this)\n            }, \"konfigurasiPart\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3221,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Relationship\",\n              children: /*#__PURE__*/_jsxDEV(Relationship, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3233,\n                columnNumber: 17\n              }, _this)\n            }, \"relationship\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3232,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Association\",\n              children: /*#__PURE__*/_jsxDEV(Association, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                praloading: praloading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3240,\n                columnNumber: 17\n              }, _this)\n            }, \"association\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3239,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(TabPane, {\n              tab: \"Activity\",\n              children: /*#__PURE__*/_jsxDEV(Acitivty, {\n                itemid: itemid,\n                initProps: initProps,\n                maindata: maindata,\n                invrelations: invrelations,\n                activitytrigger: activitytrigger\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3248,\n                columnNumber: 17\n              }, _this)\n            }, \"activity\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 3247,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3210,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3209,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3151,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3030,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: [\"Form Ubah Status Pemakaian \", maindata.inventory_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3263,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalusage(false);\n                setdisplayusage(true);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3268,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              disabled: disabledusage,\n              onClick: handleUsageItem,\n              loading: loadingusage,\n              children: \"Simpan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3278,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3266,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3262,\n        columnNumber: 11\n      }, _this),\n      visible: modalusage,\n      onCancel: function onCancel() {\n        setmodalusage(false);\n        setdisplayusage(true);\n      },\n      footer: null,\n      width: 760,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-2325313997\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-2325313997\" + \" \" + \"mb-0\",\n            children: [\"Status Pemakaian \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-2325313997\" + \" \" + \"usagemodal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3301,\n              columnNumber: 32\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3300,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Select, {\n            disabled: true,\n            defaultValue: changeusage.status_usage,\n            children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: 1,\n              children: \"In Used\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3304,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: 2,\n              children: \"In Stock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3305,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: 3,\n              children: \"Replacement\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3306,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3303,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"2325313997\",\n            children: \".usagemodal.jsx-2325313997::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0dUdlLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy9kZXRhaWwvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbG9zZUNpcmNsZU91dGxpbmVkLFxuICBEZWxldGVPdXRsaW5lZCxcbiAgRG93bk91dGxpbmVkLFxuICBFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkLFxuICBTZWFyY2hPdXRsaW5lZCxcbiAgVXBPdXRsaW5lZCxcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEVtcHR5LFxuICBJbnB1dCxcbiAgTW9kYWwsXG4gIFBvcG92ZXIsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGFibGUsXG4gIFRhYnMsXG4gIFRpbWVsaW5lLFxuICBUb29sdGlwLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IE92ZXJ2aWV3ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBtYW51ZixcbiAgdmVuZG9yLFxuICBwcmFsb2FkaW5nLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMyLCBzZXRpbnZyZWxhdGlvbnMyXSA9IHVzZVN0YXRlKHt9KTtcblxuICAvL2hlbHBlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtYi04XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvXCI+T3ZlcnZpZXc8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZyA/IG51bGwgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgcnQucHVzaChgL2l0ZW1zL3VwZGF0ZS8ke2l0ZW1pZH1gKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgPFNwaW4gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCBteC01IHAtNSB3LTkvMTIgYm9yZGVyIHNoYWRvdy1tZCByb3VuZGVkLW1kIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TmFtYSBJdGVtOjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TW9kZWw6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPnttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZWwgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBNb2RlbCFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkFzc2V0IFR5cGU6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPlxuICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5NSUcgSUQ6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+U2VyaWFsIE51bWJlcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBcIlwiIHx8IG1haW5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TWFudWZhY3R1cmVyOjwvaDE+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihkb2NmaWwgPT4gZG9jZmlsLmlkID09PSBtYWluZGF0YS5tYW51ZmFjdHVyZXJfaWQpWzBdLmRlbGV0ZWRfYXQgIT09IG51bGxcbiAgICAgICAgICAgICAgbWFudWYuaXNudWxsID09PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTWFudWZhY3R1cmVyIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlZlbmRvcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS52ZW5kb3JfaWQgPT09IG51bGwgPyBcIi1cIiA6IHZlbmRvcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkxvY2F0aW9uOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEuaXNfY29uc3VtYWJsZSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgbWFpbmRhdGEucXVhbnRpdGllcy5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICB7aWR4ICsgMX0uIHtkb2MubmFtZX0gLSB7ZG9jLnF1YW50aXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHttYWluZGF0YS5sb2NhdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5sb2NhdGlvbl9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkRlc2tyaXBzaTo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5kZXNrcmlwc2kgPT09IFwiXCIgfHwgbWFpbmRhdGEuZGVza3JpcHNpID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuZGVza3JpcHNpfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICAgIHttYWluZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKChkb2Njb2x1bW5zLCBpZHhjb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZHhjb2x1bW5zfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgbWItNSAke1xuICAgICAgICAgICAgICAgICAgaWR4Y29sdW1ucyA9PT0gMCA/IGBtdC01YCA6IGBgXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5uYW1lfTpcbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Pntkb2Njb2x1bW5zLnZhbHVlLm9wc2lbZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0XX08Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLnZhbHVlLm9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChfLCBpZHhmaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2Njb2x1bW5zLnZhbHVlLmRlZmF1bHQuaW5jbHVkZXMoaWR4ZmlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge21vbWVudChkb2Njb2x1bW5zLnZhbHVlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZX08Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5jb25zdCBLb25maWd1cmFzaVBhcnQgPSAoe1xuICBpbml0UHJvcHMsXG4gIGl0ZW1pZCxcbiAgaW52cmVsYXRpb25zLFxuICBtYWluZGF0YSxcbiAgcHJhbG9hZGluZzIsXG4gIG1vZGVscyxcbiAgc2V0bW9kZWxzLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuXG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW21haW5wYXJ0ZGF0YSwgc2V0bWFpbnBhcnRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdwYXJ0LCBzZXRwcmFsb2FkaW5ncGFydF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVmaWx0ZXJhY3QsIHNldGFzc2V0dHlwZWZpbHRlcmFjdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3NldHR5cGV2YWx1ZSwgc2V0YXNzZXR0eXBldmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RlbGZpbHRlcmFjdCwgc2V0bW9kZWxmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx2YWx1ZSwgc2V0bW9kZWx2YWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0cmlnZ2VyLCBzZXRkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZSgwKTtcbiAgLy9jaGFuZ2VkIGRhbiByZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVwbGFjZW1lbnRzLCBzZXRkYXRhcmVwbGFjZW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BvcG92ZXIsIHNldHBvcG92ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2NoYW5nZWRcbiAgY29uc3QgW2RhdGFjaGFuZ2VkLCBzZXRkYXRhY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IG51bGwsXG4gICAgbW9kZWxfaWQ6IG51bGwsXG4gICAgaW52ZW50b3J5X25hbWU6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIHN0YXR1c191c2FnZToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICBtb2RlbF9pbnZlbnRvcnk6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIGFzc2V0OiB7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW2RhdGFBcGljaGFuZ2VkLCBzZXRkYXRhQXBpY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgcmVwbGFjZW1lbnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxjaGFuZ2VkLCBzZXRtb2RhbGNoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRjaGFuZ2VkLCBzZXRkaXNhYmxlZGNoYW5nZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlZCwgc2V0bG9hZGluZ2NoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdHJpZ2dlcmNoYW5nZWQsIHNldHRyaWdnZXJjaGFuZ2VkXSA9IHVzZVN0YXRlKC0xKTtcbiAgLy9yZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVtb3ZlZCwgc2V0ZGF0YXJlbW92ZWRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGF0YUFwaXJlbW92ZWQsIHNldGRhdGFBcGlyZW1vdmVkXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogMCxcbiAgICBpbnZlbnRvcnlfcGFydF9pZDogMCxcbiAgICBub3RlczogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFttb2RhbHJlbW92ZWQsIHNldG1vZGFscmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHJlbW92ZWQsIHNldGRpc2FibGVkcmVtb3ZlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdyZW1vdmVkLCBzZXRsb2FkaW5ncmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2JhY2t1cG1vZGVscywgc2V0YmFja3VwbW9kZWxzXSA9IHVzZVN0YXRlKG1vZGVscyk7XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAvLyB7XG4gICAgLy8gICAgIHRpdGxlOiAnTmFtYSBJdGVtJyxcbiAgICAvLyAgICAgZGF0YUluZGV4OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vICAgICBrZXk6ICdpbnZlbnRvcnlfbmFtZScsXG4gICAgLy8gfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNSUcgSURcIixcbiAgICAgIGRhdGFJbmRleDogXCJtaWdfaWRcIixcbiAgICAgIGtleTogXCJtaWdfaWRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlNlcmlhbCBOdW1iZXJcIixcbiAgICAgIGRhdGFJbmRleDogXCJzZXJpYWxfbnVtYmVyXCIsXG4gICAgICBrZXk6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PntyZWNvcmQuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IFwiLVwiIDogcmVjb3JkLnNlcmlhbF9udW1iZXJ9PC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNb2RlbFwiLFxuICAgICAgZGF0YUluZGV4OiBcIm1vZGVsX25hbWVcIixcbiAgICAgIGtleTogXCJtb2RlbF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkubmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQXNzZXQgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcImFzc2V0X25hbWVcIixcbiAgICAgIGtleTogXCJhc3NldF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuYXNzZXRfbmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgIHZpc2libGU9e3BvcG92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblZpc2libGVDaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiBgMHB4YCwgbWFyZ2luOiBgMHB4YCB9fVxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0cG9wb3ZlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGByZWRgLCBmb250U2l6ZTogYDEuMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhcmVtb3ZlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaXJlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1haW5wYXJ0ZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlfcGFydF9pZDogcmVjb3JkLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb3BvdmVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFya2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFjaGFuZ2VkKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY2hhbmdlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRyaWdnZXJjaGFuZ2VkKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbnRpa2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+S2VsdWFya2FuIFBhcnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+R2FudGlrYW4gUGFydDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hlbHBlclxuICAvLzEgbnlhIGxhZ2kgYWRhIGRpIHVzZUVmZmVjdFxuICBjb25zdCByZWN1cnNpdmVGbGF0dGVuQXJyID0gKGRhdGFhc3NldHMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBkYXRhYXNzZXRzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZCk7XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZWN1cnNpdmVGbGF0dGVuQXJyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBmdW5jdGlvbiByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhYVtpXVtcImtleVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXCJ2YWx1ZVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXG4gICAgICAgIFwidGl0bGVcIlxuICAgICAgXSA9IGAke2RhdGFhW2ldLm1pZ19pZH0gLSAke2RhdGFhW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgZGF0YWFbaV1bXCJjaGlsZHJlblwiXSA9IGRhdGFhW2ldLmludmVudG9yeV9yZXBsYWNlbWVudF9wYXJ0cztcbiAgICAgIGRlbGV0ZSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBpZiAoZGF0YWFbaV0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWFbaV0uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YWE7XG4gIH1cblxuICAvL2hhbmRsZXJcbiAgY29uc3QgYXNzZXRQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQgPSAoZG9jLCBhc3NldGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZCA9PT0gTnVtYmVyKGFzc2V0aWQpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIGFzc2V0UGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZG9jW2ldLmNoaWxkcmVuLCBhc3NldGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbW9kZWxQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwgPSAoZG9jLCBtb2RlbGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2lkID09PSBtb2RlbGlkKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG1vZGVsUGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZG9jW2ldLmNoaWxkcmVuLCBtb2RlbGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbmFtZVBhcnQgPSBbXTtcbiAgY29uc3QgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lID0gKGRvYywgbmFtZSkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5pbnZlbnRvcnlfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgbmFtZVBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZG9jW2ldLmNoaWxkcmVuLCBuYW1lKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgLy9kZWxpdmVyIEFQSVxuICBjb25zdCBoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0ID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdjaGFuZ2VkKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9yZXBsYWNlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpY2hhbmdlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpZ2FudGlcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVSZW1vdmVJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5ncmVtb3ZlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVtb3ZlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpcmVtb3ZlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ncmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpa2VsdWFya2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIGFzc2V0IHR5cGVcbiAgY29uc3Qgb25DaGFuZ2VBc3NldFR5cGUgPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRhc3NldHR5cGVmaWx0ZXJhY3QoZmFsc2UpO1xuICAgICAgc2V0bW9kZWxzKGJhY2t1cG1vZGVscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9MTAwJmFzc2V0X2lkPSR7aWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwID8gc2V0bW9kZWxzKFtdKSA6IHNldG1vZGVscyhyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0YXNzZXR0eXBldmFsdWUoaWQpO1xuICAgIH1cbiAgfTtcbiAgLy9zZWFyY2ggbW9kZWxcbiAgY29uc3Qgb25DaGFuZ2VNb2RlbCA9IChpZG1vZGVsKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZG1vZGVsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldG1vZGVsZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0bW9kZWx2YWx1ZShpZG1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAoYXNzZXR0eXBlZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRhdGF0ZW1wLCBhc3NldHR5cGV2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IGFzc2V0UGFydDtcbiAgICB9XG4gICAgaWYgKG1vZGVsZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Nb2RlbChkYXRhdGVtcCwgbW9kZWx2YWx1ZSlcbiAgICAgIHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBtb2RlbFBhcnQ7XG4gICAgfVxuICAgIGlmIChuYW1hc2VhcmNoYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZGF0YXRlbXAsIG5hbWF2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IG5hbWVQYXJ0O1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBjb25zdCByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuID0gKHJzYykgPT4ge1xuICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcnNjW2ldLmtleSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS52YWx1ZSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS50aXRsZSA9IGAke3JzY1tpXS5taWdfaWR9IC0gJHtyc2NbaV0ubW9kZWxfaW52ZW50b3J5Py5uYW1lfWA7XG4gICAgICAgICAgICByc2NbaV0uY2hpbGRyZW4gPSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5pbnZlbnRvcnlfcGFydHM7XG4gICAgICAgICAgICBpZiAocnNjW2ldLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4ucnNjW2ldLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJzY1tpXS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJlczMuaW52ZW50b3J5X3BhcnRzKTtcbiAgICAgICAgc2V0bWFpbnBhcnRkYXRhKHtcbiAgICAgICAgICAuLi5yZXMzLFxuICAgICAgICAgIGludmVudG9yeV9wYXJ0czogdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldGRhdGF0YWJsZSh0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMih0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMyh0KTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ3BhcnQoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmlnZ2VyY2hhbmdlZCAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVwbGFjZW1lbnRzP2lkPSR7ZGF0YWNoYW5nZWQubW9kZWxfaW52ZW50b3J5LmFzc2V0X2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFwZGF0YSA9IHJlY3Vyc2l2ZU1vZGlmRGF0YShyZXMyLmRhdGEpO1xuICAgICAgICAgIHNldGRhdGFyZXBsYWNlbWVudHMobWFwZGF0YSk7XG4gICAgICAgICAgaWYgKG1hcGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRkaXNhYmxlZGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdHJpZ2dlcmNoYW5nZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPktvbmZpZ3VyYXNpIFBhcnQ8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIC8qY29uc29sZS5sb2cobWFpbnBhcnRkYXRhKTsgY29uc29sZS5sb2coZGF0YXJlbW92ZWQpKi8gcnQucHVzaChcbiAgICAgICAgICAgICAgICBgL2l0ZW1zL2NyZWF0ZXBhcnQvJHtpdGVtaWR9P25hbWE9JHttYWlucGFydGRhdGEubWlnX2lkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nMiA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBtci0xXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAsIG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBOYW1hIEl0ZW1cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2VTZWFyY2goZSl9XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQXNzZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZShleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17ZmV0Y2hpbmdtb2RlbCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgIH0vZ2V0RmlsdGVyTW9kZWxzP25hbWU9JHt2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIn1gLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttb2RlbHMubWFwKChkb2Ntb2RlbHMsIGlkeG1vZGVscykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvY21vZGVscy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY21vZGVscy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkZpbmFsQ2xpY2t9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPFRhYmxlXG4gICAgICAgIGxvYWRpbmc9e3ByYWxvYWRpbmdwYXJ0fVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gUGVyZ2FudGlhbiBQYXJ0IFwie2RhdGFjaGFuZ2VkLmludmVudG9yeV9uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0fVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjaGFuZ2VkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCB5YW5nIEluZ2luIERpZ2FudGl7XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGF0YWJsZTN9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZGF0YWNoYW5nZWQua2V5fVxuICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIEFzc2V0IFR5cGUgZGFyaSBJdGVtIFBhcnQgeWFuZyBpbmdpbiBkaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAge2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCBQZW5nZ2FudGkgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhY2hhbmdlZC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGFyZXBsYWNlbWVudHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFyZXBsYWNlbWVudHMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLmludmVudG9yeV9uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgPC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFBcGljaGFuZ2VkLm5vdGVzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5nZWx1YXJrYW4gaXRlbSBcIlxuICAgICAgICAgICAge2RhdGFyZW1vdmVkLmludmVudG9yeV9uYW1lfVwiIGRhcmkgXCJ7bWFpbnBhcnRkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxyZW1vdmVkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFscmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlUmVtb3ZlSXRlbVBhcnR9XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3JlbW92ZWQgfX1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRhdGFBcGlyZW1vdmVkKHsgLi4uZGF0YUFwaXJlbW92ZWQsIG5vdGVzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgUmVsYXRpb25zaGlwID0gKHsgaW5pdFByb3BzLCBtYWluZGF0YSwgaXRlbWlkIH0pID0+IHtcbiAgLy9pbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtsb2FkaW5ncmVsLCBzZXRsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdyZWwsIHNldHByYWxvYWRpbmdyZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbZGF0YUFwaWRlbGV0ZSwgc2V0ZGF0YUFwaWRlbGV0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25kYXRhZGVsZXRlLCBzZXRyZWxhdGlvbmRhdGFkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgdGlwZTogXCJcIixcbiAgICBrb25la3NpOiBcIlwiLFxuICB9KTtcbiAgLy9hZGRcbiAgY29uc3QgW2RhdGFBcGlhZGQsIHNldGRhdGFBcGlhZGRdID0gdXNlU3RhdGUoe1xuICAgIHN1YmplY3RfaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgIHR5cGVfaWQ6IG51bGwsXG4gICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNwbGF5ZGF0YXJlbGF0aW9ucywgc2V0ZGlzcGxheWRhdGFyZWxhdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbcmVsYXRpb25uYW1lYWRkLCBzZXRyZWxhdGlvbm5hbWVhZGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbm5hbWVkZGFkZCwgc2V0cmVsYXRpb25uYW1lZGRhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlkeGFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkLCBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkXSA9XG4gICAgdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGV0YWlsdGlwZWFkZCwgc2V0ZGV0YWlsdGlwZWFkZF0gPSB1c2VTdGF0ZSgtMTApO1xuICBjb25zdCBbZGV0YWlsdGlwZWRhdGFhZGQsIHNldGRldGFpbHRpcGVkYXRhYWRkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGFsYWRkLCBzZXRtb2RhbGFkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZCwgc2V0ZGlzYWJsZWRhZGRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nYWRkLCBzZXRsb2FkaW5nYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZldGNoaW5nbW9kZWwsIHNldGZldGNoaW5nbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jZGF0YSwgc2V0c3VibG9jZGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N1YmxvY3RyaWcsIHNldHN1YmxvY3RyaWddID0gdXNlU3RhdGUoLTEpO1xuXG4gIC8vZGVjbGFyYXRpb25cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJSZWxhdGlvbnNoaXAgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgICBrZXk6IFwicmVsYXRpb25zaGlwX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIk5hbWFcIixcbiAgICAgIGRhdGFJbmRleDogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICAgIGtleTogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJ0eXBlXCIsXG4gICAgICBrZXk6IFwidHlwZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWRlbGV0ZSh7IGlkOiByZWNvcmQuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25kYXRhZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZC5yZWxhdGlvbnNoaXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGU6IHJlY29yZC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAga29uZWtzaTogcmVjb3JkLmNvbm5lY3RlZF9kZXRhaWxfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogYDEuMnJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogYHBvaW50ZXJgLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIC8vaGFuZGxlclxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgZGF0YXRlbXAgPSBkYXRhdGVtcC5maWx0ZXIoKGZsdCkgPT4ge1xuICAgICAgICByZXR1cm4gZmx0LmNvbm5lY3RlZF9kZXRhaWxfbmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKG5hbWF2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdkZWxldGUodHJ1ZSk7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlUmVsYXRpb25zaGlwSW52ZW50b3J5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpZGVsZXRlKSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgYmVyaGFzaWwgZGloYXB1c1wiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdhZGQodHJ1ZSk7XG4gICAgZGVsZXRlIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhQXBpYWRkKVxuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRSZWxhdGlvbnNoaXBJbnZlbnRvcmllc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWFkZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nYWRkKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxhZGQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICAgICAgICAgIGlzX2ludmVyc2U6IG51bGwsXG4gICAgICAgICAgICB0eXBlX2lkOiBudWxsLFxuICAgICAgICAgICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiBudWxsLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChcIlwiKTtcbiAgICAgICAgICBzZXRzdWJsb2NkYXRhKG51bGwpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoLTEpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoLTEpO1xuICAgICAgICAgIHNldHN1YmxvY3RyaWcoLTEpO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgSXRlbSBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGF0cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0cHJhbG9hZGluZ3JlbCh0cnVlKTtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRkYXRhdGFibGUoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTIoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTMoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldHByYWxvYWRpbmdyZWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2N0cmlnICE9PSAtMSkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtzdWJsb2N0cmlnfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRldGFpbHRpcGVhZGQgIT09IC0xMCkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkYXRhQXBpYWRkLnR5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKFtyZXMyLmRhdGFdKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0xICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTQgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RldGFpbHRpcGVhZGQsIHN1YmxvY3RyaWddKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG8gbXItMVwiPlJlbGF0aW9uc2hpcDwvaDE+XG4gICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5kZWxldGVkX2F0ICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkFzc2V0IFR5cGUgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBBc3NldCBUeXBlIVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTsgLypydC5wdXNoKGAvaXRlbXMvY3JlYXRlcmVsYXRpb25zaGlwLyR7aXRlbWlkfT9uYW1hPSR7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9JmFzc2V0X2lkPSR7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmlkfWApKi9cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgVGFtYmFoXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZ3JlbCA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMTEgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncmVsfVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBSZWxhdGlvbnNoaXAgYmVyaWt1dCBpbmkgZGFyaSBcIlxuICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGJvcmRlci1iIG1iLTVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5SZWxhdGlvbnNoaXAgVHlwZTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMFwiPlRpcGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUudGlwZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5JdGVtOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLmtvbmVrc2l9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiIG9uQ2hhbmdlPXsoZSkgPT4ge319PjwvSW5wdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIFJlbGF0aW9uc2hpcCBcInttYWluZGF0YS5uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApOyAvKnNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCByZWxhdGlvbnNoaXBfaWQ6IG51bGwsIHR5cGVfaWQ6IG51bGwsIGNvbm5lY3RlZF9pZDogbnVsbCB9KSovIC8qY29uc29sZS5sb2coZGF0YUFwaWFkZCkqL1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJlbGF0aW9uc2hpcEl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nYWRkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsYWRkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NzYwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFJlbGF0aW9uc2hpcCBUeXBlIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYm9yZGVyIHAtMiBob3Zlcjpib3JkZXItcHJpbWFyeSByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZCgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9ubmFtZWFkZH08L3A+XG4gICAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgICA8VXBPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPERvd25PdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBJbnZlcnNlIFJlbGF0aW9uc2hpcCBUeXBlXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZGlzcGxheWRhdGFyZWxhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctdGVybmFyeSBjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsYWNrIHAtMyB3LTYvMTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlkeGFkZCA9PT0gaWR4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IG51bGwgfHwgZGF0YUFwaWFkZC50eXBlX2lkID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZGFkZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLnJlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbnZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmludmVyc2VfcmVsYXRpb25zaGlwX3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFRpcGUgPHNwYW4gY2xhc3NOYW1lPVwidGlwZXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpYWRkLnR5cGVfaWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgdHlwZV9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5yZWxhdGlvbnNoaXBfaWQgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVhZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgID8gKHNldHN1YmxvY3RyaWcoLTEpLCBzZXRzdWJsb2NkYXRhKG51bGwpKVxuICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0zfT5Db21wYW55PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTR9PkFzc2V0IFR5cGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXBlcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5iYWNrdXBfY29ubmVjdGVkX2lkcyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHNbMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cz17WzFdfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17ZGV0YWlsdGlwZWRhdGFhZGR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRzdWJsb2N0cmlnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlPC9wPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgZGVuZ2FuIE1vZGVsIElEXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZtb2RlbF9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3N1YmxvY2RhdGEgIT09IG51bGwgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlIChTdWJsb2thc2kpPC9wPlxuICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NkYXRhfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIGNvbm5lY3RlZF9pZHM6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQXNzb2NpYXRpb24gPSAoeyBpbml0UHJvcHMsIGl0ZW1pZCwgbWFpbmRhdGEsIHByYWxvYWRpbmcgfSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFzc29jaWF0aW9uPC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHB4LTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBtYWluZGF0YS5hc3NvY2lhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHttYWluZGF0YS5hc3NvY2lhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgc2hhZG93LW1kIHB5LTQgcHgtNSBib3JkZXIgbWItNCBmbGV4IGp1c3RpZnktYmV0d2VlbiB3LTEwLzEyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcnQucHVzaChgL3RpY2tldHMvZGV0YWlsLyR7ZG9jLmlkfT9hY3RpdmU9ZGV0YWlsSXRlbWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+VGlja2V0IE51bWJlcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MudGlja2V0X25hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLXJlZC0xMDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gNCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQWNpdGl2dHkgPSAoe1xuICBpdGVtaWQsXG4gIGluaXRQcm9wcyxcbiAgbWFpbmRhdGEsXG4gIGludnJlbGF0aW9ucyxcbiAgcHJhbG9hZGluZyxcbiAgYWN0aXZpdHl0cmlnZ2VyLFxufSkgPT4ge1xuICBjb25zdCBbZGF5bG9ncywgc2V0ZGF5bG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt3ZWVrbG9ncywgc2V0d2Vla2xvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9yZWxvZ3MsIHNldG1vcmVsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdsb2dzLCBzZXRwcmFsb2FkaW5nbG9nc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2ludmVudG9yaWVzLCBzZXRpbnZlbnRvcmllc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRwcmFsb2FkaW5nbG9ncyh0cnVlKTtcblxuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFjdGl2aXR5SW52ZW50b3J5TG9ncz9pZD0ke2l0ZW1pZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgZGF5bG9nc21hcCA9IHJlczIuZGF0YS5kYXlfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gRGloYXB1czogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB3ZWVrbG9nc21hcCA9IHJlczIuZGF0YS53ZWVrX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1vcmVsb2dzbWFwID0gcmVzMi5kYXRhLmVsc2VfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXlsb2dzKGRheWxvZ3NtYXApO1xuICAgICAgICBzZXR3ZWVrbG9ncyh3ZWVrbG9nc21hcCk7XG4gICAgICAgIHNldG1vcmVsb2dzKG1vcmVsb2dzbWFwKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgLy8gLnRoZW4ocmVzMyA9PiB7XG4gICAgLy8gICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLCB7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgIC8vICAgICAgICAgaGVhZGVyczoge1xuICAgIC8vICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLy8gICAgICAgICAudGhlbihyZXM0ID0+IHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgY29uY2F0YXJyID0gcmVzNC5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzNC5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG5cbiAgICAvLyAgICAgICAgICAgICB2YXIgbG9nczJtYXAgPSByZXMzLmRhdGEucmVsYXRpb25zaGlwLm1hcCgoZG9jcmVsLCBpZHhyZWwpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZW5ldzIgPSBtb21lbnQoZG9jcmVsLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdCgnTExMJylcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGRlc2NuZXcyID0gJydcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGlkbG9nbmV3ID0gLTFcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGVzYzIgPSBkb2NyZWwuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBpZGxvZ25ldyA9IGNvbmNhdGFyci5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gZG9jcmVsLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pZClbMF0gOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHt0eXBlb2YgKGlkbG9nbmV3KSA9PT0gJ3VuZGVmaW5lZCcgPyBcIihTdWRhaCBEaWhhcHVzIGxhZ2kpXCIgOiBgJHtpZGxvZ25ldy5yZWxhdGlvbnNoaXB9YH1cImAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnRGVsZXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcGAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAuLi5kb2NyZWwsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlbmV3MixcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3MlxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICBzZXRsb2dzMihsb2dzMm1hcClcbiAgICAvLyAgICAgICAgICAgICBzZXRwcmFsb2FkaW5nbG9nczIoZmFsc2UpXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vIH0pXG4gIH0sIFthY3Rpdml0eXRyaWdnZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFjdGl2aXR5PC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5IYXJpIEluaTwvaDE+XG4gICAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogZGF5bG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7ZGF5bG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IHdlZWtsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIHt3ZWVrbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctNi8xMlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+TWluZ2d1IExhbHU8L2gxPlxuICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IG1vcmVsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIHttb3JlbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUaW1lbGluZS5JdGVtIGxhYmVsPXtkb2Nsb2cuZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbG9nLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZWgge2RvY2xvZy5jYXVzZXJfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IEl0ZW1EZXRhaWwgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8xLiBJbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBhY3RpdmVUYWIgPSBcIm92ZXJ2aWV3XCI7XG4gIGNvbnN0IHsgYWN0aXZlIH0gPSBydC5xdWVyeTtcbiAgaWYgKGFjdGl2ZSkge1xuICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZTtcbiAgfVxuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMiwgMik7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiRGV0YWlsIEl0ZW1cIjtcbiAgY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xuXG4gIC8vdXNlU3RhdGVcbiAgY29uc3QgW21haW5kYXRhLCBzZXRtYWluZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiBcIlwiLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgY3JlYXRlZF9hdDogXCJcIixcbiAgICB1cGRhdGVkX2F0OiBcIlwiLFxuICAgIGRlbGV0ZWRfYXQ6IFwiXCIsXG4gICAgYXNzZXRfbmFtZTogXCJcIixcbiAgICBtb2RlbF9uYW1lOiBcIlwiLFxuICAgIGxvY2F0aW9uX25hbWU6IFwiXCIsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsb2NhdGlvbl9pbnZlbnRvcnk6IHtcbiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsXG4gICAgICBjb21wYW55X25hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBhZGRpdGlvbmFsX2F0dHJpYnV0ZXM6IFtdLFxuICAgIGludmVudG9yeV9wYXJ0czogW10sXG4gICAgYXNzb2NpYXRpb25zOiBbXSxcbiAgICBxdWFudGl0aWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGFzc2V0czogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczoge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBbcmVsc2hpcCwgc2V0cmVsc2hpcF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51Ziwgc2V0bWFudWZdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2ZW5kb3IsIHNldHZlbmRvcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nMiwgc2V0cHJhbG9hZGluZzJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIC8vZGVsZXRlXG4gIGNvbnN0IFttb2RhbGRlbGV0ZSwgc2V0bW9kYWxkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2RlbGV0ZSwgc2V0bG9hZGluZ2RlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vbm90ZXNcbiAgY29uc3QgW25vdGVzLCBzZXRub3Rlc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGFsbm90ZXMsIHNldG1vZGFsbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ25vdGVzLCBzZXRsb2FkaW5nbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2tvbmRpc2lcbiAgY29uc3QgW2tvbmRpc2ksIHNldGtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtub3Rla29uZGlzaSwgc2V0bm90ZWtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbGtvbmRpc2ksIHNldG1vZGFsa29uZGlzaV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5a29uZGlzaSwgc2V0ZGlzcGxheWtvbmRpc2ldID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5na29uZGlzaSwgc2V0bG9hZGluZ2tvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL3N0YXR1cyBwZW1ha2FpYW5cbiAgY29uc3QgW2NoYW5nZXVzYWdlLCBzZXRjaGFuZ2V1c2FnZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBub3RlczogXCJcIixcbiAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogXCJcIixcbiAgICBjb25uZWN0ZWRfaWQ6IFwiXCIsXG4gICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNhYmxlZHVzYWdlLCBzZXRkaXNhYmxlZHVzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbW9kYWx1c2FnZSwgc2V0bW9kYWx1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5dXNhZ2UsIHNldGRpc3BsYXl1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UsIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2VdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXNhZ2UsIHNldGxvYWRpbmd1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIGNvbnN0IFthZ2VudHMsIHNldGFnZW50c10gPSB1c2VTdGF0ZShbXSlcbiAgLy8gY29uc3QgW3JlcXVlc3RlcnMsIHNldHJlcXVlc3RlcnNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IFtkZXRhaWxsaXN0LCBzZXRkZXRhaWxsaXN0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscywgc2V0bW9kZWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9ucywgc2V0c3VibG9jYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvY2F0aW9uc2Rpc3BsYXksIHNldGxvY2F0aW9uc2Rpc3BsYXldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jYXRpb250cmlnZ2VyLCBzZXRzdWJsb2NhdGlvbnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWN0aXZpdHl0cmlnZ2VyLCBzZXRhY3Rpdml0eXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy9oZWxwZXJcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZWxldGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgICBydC5wdXNoKGAvaXRlbXNgKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVOb3Rlc0l0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ25vdGVzKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRJbnZlbnRvcnlOb3Rlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ25vdGVzKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJOb3RlcyBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH0/YWN0aXZlPWFjdGl2aXR5YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVLb25kaXNpSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5na29uZGlzaSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzQ29uZGl0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZWtvbmRpc2ksXG4gICAgICAgIHN0YXR1c19jb25kaXRpb246IGtvbmRpc2ksXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgS29uZGlzaSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVVc2FnZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3VzYWdlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9jaGFuZ2VTdGF0dXNVc2FnZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2V1c2FnZSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ndXNhZ2UoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy91c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5P2lkPSR7aXRlbWlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSBcImFkZGl0aW9uYWxfYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04ucGFyc2UoZG9jLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0bWFpbmRhdGEodCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICAgICAgICB2YXIgZGVsX21hbnVmID0gbnVsbDtcbiAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsXG4gICAgICAgICAgICAgID8gKGRlbF9tYW51ZiA9IG51bGwpXG4gICAgICAgICAgICAgIDogKGRlbF9tYW51ZiA9IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICApWzBdLmRlbGV0ZWRfYXQpO1xuICAgICAgICAgICAgc2V0bWFudWYoe1xuICAgICAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwXG4gICAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgICA6IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICAgIClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgaXNudWxsOiBkZWxfbWFudWYgIT09IG51bGwgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlczMudmVuZG9yX2lkID09PSBudWxsIHx8IHJlczMudmVuZG9yX2lkID09PSAwXG4gICAgICAgICAgICAgID8gc2V0dmVuZG9yKFwiLVwiKVxuICAgICAgICAgICAgICA6IHNldHZlbmRvcihcbiAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXT8ubmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRwcmFsb2FkaW5nMihmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRGaWx0ZXJNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgIT09IFwiXCIpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0Q2hhbmdlU3RhdHVzVXNhZ2VEZXRhaWxMaXN0P2lkPSR7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgID8gc2V0ZGV0YWlsbGlzdChbcmVzMi5kYXRhXSlcbiAgICAgICAgICAgIDogc2V0ZGV0YWlsbGlzdChyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NoYW5nZXVzYWdlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN1YmxvY2F0aW9udHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeURldGFpbExpc3Q/dHlwZV9pZD0ke2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgIHNldHN1YmxvY2F0aW9ucyhyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzdWJsb2NhdGlvbnRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRyZWxzaGlwKHJlczIuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczIuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktNSBweC00IGJvcmRlci10IGJvcmRlci1iIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LWdyYXktNDAwIG1iLTBcIj5JdGVtOjwvcD5cbiAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTIgdGV4dC0yeGwgbWItMCBtci0yMFwiPlxuICAgICAgICAgICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfSAtIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1yLTcgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPlN0YXR1cyBQZW1ha2FpYW46PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5dXNhZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTByZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc3RhdHVzX3VzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c191c2FnZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1c2FnZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5JbiBVc2VkPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gU3RvY2s8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5SZXBsYWNlbWVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+S29uZGlzaTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlrb25kaXNpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c19jb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0a29uZGlzaSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdyZXk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG5vdGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGFtYmFoIE5vdGVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgSGFwdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBoaWRkZW4gbWQ6YmxvY2tcIj5cbiAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgIHRhYlBvc2l0aW9uPXtgbGVmdGB9XG4gICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgb25UYWJDbGljaz17KGtleSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiYWN0aXZpdHlcIikge1xuICAgICAgICAgICAgICAgICAgc2V0YWN0aXZpdHl0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgYmxvY2sgbWQ6aGlkZGVuXCI+XG4gICAgICAgICAgICA8VGFicyB0YWJQb3NpdGlvbj17YHRvcGB9IGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn0+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIk92ZXJ2aWV3XCIga2V5PXtgb3ZlcnZpZXdgfT5cbiAgICAgICAgICAgICAgICA8T3ZlcnZpZXdcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBtYW51Zj17bWFudWZ9XG4gICAgICAgICAgICAgICAgICB2ZW5kb3I9e3ZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJLb25maWd1cmFzaSBQYXJ0XCIga2V5PXtga29uZmlndXJhc2lQYXJ0YH0+XG4gICAgICAgICAgICAgICAgPEtvbmZpZ3VyYXNpUGFydFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZzI9e3ByYWxvYWRpbmcyfVxuICAgICAgICAgICAgICAgICAgbW9kZWxzPXttb2RlbHN9XG4gICAgICAgICAgICAgICAgICBzZXRtb2RlbHM9e3NldG1vZGVsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIlJlbGF0aW9uc2hpcFwiIGtleT17YHJlbGF0aW9uc2hpcGB9PlxuICAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBc3NvY2lhdGlvblwiIGtleT17YGFzc29jaWF0aW9uYH0+XG4gICAgICAgICAgICAgICAgPEFzc29jaWF0aW9uXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFjdGl2aXR5XCIga2V5PXtgYWN0aXZpdHlgfT5cbiAgICAgICAgICAgICAgICA8QWNpdGl2dHlcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIGFjdGl2aXR5dHJpZ2dlcj17YWN0aXZpdHl0cmlnZ2VyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgUGVtYWthaWFuIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdXNhZ2V9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVc2FnZUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5ndXNhZ2V9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1c2FnZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBTdGF0dXMgUGVtYWthaWFuIDxzcGFuIGNsYXNzTmFtZT1cInVzYWdlbW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PkluIFVzZWQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5JbiBTdG9jazwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlJlcGxhY2VtZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNhZ2Vtb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGFuZ2V1c2FnZS5zdGF0dXNfdXNhZ2UgPT09IDEgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIERpZ3VuYWthbiBPbGVoIDxzcGFuIGNsYXNzTmFtZT1cImJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF90eXBlX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxfY29ubmVjdGVkX2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGxvY2F0aW9uc2Rpc3BsYXkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstMX0+QWdlbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ5bW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItMyBtbC01XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgTmFtYSB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmIFwiQWdlbnRcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmIFwiUmVxdWVzdGVyXCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyAmJiBcIkNvbXBhbnlcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hYnltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyA/IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0c3VibG9jYXRpb250cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bG9jYXRpb25zZGlzcGxheSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhbmdldXNhZ2UuY29ubmVjdGVkX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZCA9PT0gLTMgfHwgbG9jYXRpb25zZGlzcGxheSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWwtNVwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5hbWEgTG9rYXNpPC9wPlxuICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWNvbXBhbnl1c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e3N1YmxvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgbm90ZXM6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgS29uZGlzaSB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVLb25kaXNpSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdrb25kaXNpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsa29uZGlzaX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIEtvbmRpc2kgPHNwYW4gY2xhc3NOYW1lPVwia29uZGlzaW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2tvbmRpc2l9PlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rb25kaXNpbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRub3Rla29uZGlzaShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5cbiAgICAgICAgICAgICAgRm9ybSBUYW1iYWggTm90ZXMge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25vdGVzID09PSBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTm90ZXNJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ25vdGVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbm90ZXN9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezYwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0bm90ZXMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGl0ZW0gXCJ7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9IC17XCIgXCJ9XG4gICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxkZWxldGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxkZWxldGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZURlbGV0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ2RlbGV0ZSB9fVxuICAgICAgICB3aWR0aD17NzIwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi00XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBtZW1pbGlraSBJdGVtIFBhcnQgc2ViYWdhaSBiZXJpa3V0IDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9wYXJ0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubWFwKChkb2NlbXB0eSwgaWR4ZW1wdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHhlbXB0eX0+XG4gICAgICAgICAgICAgICAgICAgICAgLSA8c3Ryb25nPntkb2NlbXB0eS5pbnZlbnRvcnlfbmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIEl0ZW0gaW5pIHNlZGFuZyBtZW1pbGlraSBodWJ1bmdhbiBkZW5nYW4gaXRlbSBiZXJpa3V0OlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14c1wiPlxuICAgICAgICAgICAgICB7cmVsc2hpcC5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgcmVsc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpZHhyZWx9PlxuICAgICAgICAgICAgICAgICAgICAte1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2NyZWwudHlwZX0gLSB7ZG9jcmVsLmNvbm5lY3RlZF9kZXRhaWxfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICAgIERlbmdhbiBtZW5naGFwdXMgaXRlbSBpbmkgYWthbiBtZW5naGlsYW5na2FuIHNlbHVydWggaHVidW5nYW5cbiAgICAgICAgICAgICAgZGVuZ2FuIGl0ZW0gZGlhdGFzIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgY29uc3QgaXRlbWlkID0gcGFyYW1zLml0ZW1JZDtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtRGV0YWlsO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3299,\n          columnNumber: 11\n        }, _this), changeusage.status_usage === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-1635122929\" + \" \" + \"flex flex-col mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"jsx-1635122929\" + \" \" + \"mb-0\",\n              children: [\"Digunakan Oleh \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"jsx-1635122929\" + \" \" + \"bymodal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3321,\n                columnNumber: 34\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3320,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Select, {\n              onChange: function onChange(value) {\n                setchangeusage(_objectSpread(_objectSpread({}, changeusage), {}, {\n                  relationship_type_id: value,\n                  detail_connected_id: null,\n                  connected_id: null\n                }));\n                setdisabledusage(true);\n\n                if (value !== 3) {\n                  setlocationsdisplay(false);\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                value: -1,\n                children: \"Agent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3337,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                value: -2,\n                children: \"Requester\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3338,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                value: -3,\n                children: \"Company\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3339,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3323,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n              id: \"1635122929\",\n              children: \".bymodal.jsx-1635122929::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE2d0dtQixBQUc2RCxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvaXRlbXMvZGV0YWlsL1tpdGVtSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2xvc2VDaXJjbGVPdXRsaW5lZCxcbiAgRGVsZXRlT3V0bGluZWQsXG4gIERvd25PdXRsaW5lZCxcbiAgRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCxcbiAgU2VhcmNoT3V0bGluZWQsXG4gIFVwT3V0bGluZWQsXG59IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBFbXB0eSxcbiAgSW5wdXQsXG4gIE1vZGFsLFxuICBQb3BvdmVyLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRhYmxlLFxuICBUYWJzLFxuICBUaW1lbGluZSxcbiAgVG9vbHRpcCxcbiAgVHJlZVNlbGVjdCxcbiAgbm90aWZpY2F0aW9uLFxufSBmcm9tIFwiYW50ZFwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwibW9tZW50XCI7XG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBTdGlja3kgZnJvbSBcIndpbC1yZWFjdC1zdGlja3lcIjtcblxuaW1wb3J0IExheW91dCBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkMlwiO1xuaW1wb3J0IHN0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQubW9kdWxlLmNzc1wiO1xuaW1wb3J0IGh0dHBjb29raWUgZnJvbSBcImNvb2tpZVwiO1xuXG5jb25zdCBPdmVydmlldyA9ICh7XG4gIGl0ZW1pZCxcbiAgaW5pdFByb3BzLFxuICBtYWluZGF0YSxcbiAgbWFudWYsXG4gIHZlbmRvcixcbiAgcHJhbG9hZGluZyxcbn0pID0+IHtcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgLy91c2VTdGF0ZVxuICBjb25zdCBbaW52cmVsYXRpb25zMiwgc2V0aW52cmVsYXRpb25zMl0gPSB1c2VTdGF0ZSh7fSk7XG5cbiAgLy9oZWxwZXJcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPk92ZXJ2aWV3PC9oMT5cbiAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHJ0LnB1c2goYC9pdGVtcy91cGRhdGUvJHtpdGVtaWR9YCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFViYWhcbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgIDxTcGluIC8+XG4gICAgICApIDogKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTggbXgtNSBwLTUgdy05LzEyIGJvcmRlciBzaGFkb3ctbWQgcm91bmRlZC1tZCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPk5hbWEgSXRlbTo8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9IC0ge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPk1vZGVsOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmRlbGV0ZWRfYXQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vZGVsIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTW9kZWwhXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fVxuICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5uYW1lfTwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5Bc3NldCBUeXBlOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmRlbGV0ZWRfYXQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQubmFtZX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQXNzZXQgVHlwZSB0ZWxhaCBkaWhhcHVzLCBzZWdlcmEgbGFrdWthbiBwZW5ndWJhaGFuIEFzc2V0IFR5cGUhXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fVxuICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TUlHIElEOjwvaDE+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubWlnX2lkfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlNlcmlhbCBOdW1iZXI6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7bWFpbmRhdGEuc2VyaWFsX251bWJlciA9PT0gXCJcIiB8fCBtYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc2VyaWFsX251bWJlcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPk1hbnVmYWN0dXJlcjo8L2gxPlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyBpbnZyZWxhdGlvbnMubWFudWZhY3R1cmVycy5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gbWFpbmRhdGEubWFudWZhY3R1cmVyX2lkKVswXS5kZWxldGVkX2F0ICE9PSBudWxsXG4gICAgICAgICAgICAgIG1hbnVmLmlzbnVsbCA9PT0gZmFsc2UgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBtci0xXCI+e21hbnVmLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIk1hbnVmYWN0dXJlciB0ZWxhaCBkaWhhcHVzLCBzZWdlcmEgbGFrdWthbiBwZW5ndWJhaGFuIE1hbnVmYWN0dXJlciFcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICAgID48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21hbnVmLm5hbWV9PC9wPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5WZW5kb3I6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7bWFpbmRhdGEudmVuZG9yX2lkID09PSBudWxsID8gXCItXCIgOiB2ZW5kb3J9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5Mb2NhdGlvbjo8L2gxPlxuICAgICAgICAgICAge21haW5kYXRhLmlzX2NvbnN1bWFibGUgPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgIG1haW5kYXRhLnF1YW50aXRpZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2lkeCArIDF9LiB7ZG9jLm5hbWV9IC0ge2RvYy5xdWFudGl0eX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICkpXG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubG9jYXRpb24gPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gXCItXCJcbiAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEubG9jYXRpb25faW52ZW50b3J5Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5EZXNrcmlwc2k6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7bWFpbmRhdGEuZGVza3JpcHNpID09PSBcIlwiIHx8IG1haW5kYXRhLmRlc2tyaXBzaSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgID8gXCItXCJcbiAgICAgICAgICAgICAgICA6IG1haW5kYXRhLmRlc2tyaXBzaX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICB7bWFpbmRhdGEuYWRkaXRpb25hbF9hdHRyaWJ1dGVzLm1hcCgoZG9jY29sdW1ucywgaWR4Y29sdW1ucykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17aWR4Y29sdW1uc31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sIG1iLTUgJHtcbiAgICAgICAgICAgICAgICAgIGlkeGNvbHVtbnMgPT09IDAgPyBgbXQtNWAgOiBgYFxuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMubmFtZX06XG4gICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICBkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICBkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZS5vcHNpW2RvY2NvbHVtbnMudmFsdWUuZGVmYXVsdF19PC8+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy52YWx1ZS5vcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoXywgaWR4ZmlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0LmluY2x1ZGVzKGlkeGZpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHttb21lbnQoZG9jY29sdW1ucy52YWx1ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDw+e2RvY2NvbHVtbnMudmFsdWV9PC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgS29uZmlndXJhc2lQYXJ0ID0gKHtcbiAgaW5pdFByb3BzLFxuICBpdGVtaWQsXG4gIGludnJlbGF0aW9ucyxcbiAgbWFpbmRhdGEsXG4gIHByYWxvYWRpbmcyLFxuICBtb2RlbHMsXG4gIHNldG1vZGVscyxcbn0pID0+IHtcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcblxuICAvL3VzZXN0YXRlXG4gIGNvbnN0IFttYWlucGFydGRhdGEsIHNldG1haW5wYXJ0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5ncGFydCwgc2V0cHJhbG9hZGluZ3BhcnRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtldmVudHMsIHNldGV2ZW50c10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0YWJsZSwgc2V0ZGF0YXRhYmxlXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2RhdGF0YWJsZTIsIHNldGRhdGF0YWJsZTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMywgc2V0ZGF0YXRhYmxlM10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtuYW1hc2VhcmNoYWN0LCBzZXRuYW1hc2VhcmNoYWN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25hbWF2YWx1ZSwgc2V0bmFtYXZhbHVlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbYXNzZXR0eXBlZmlsdGVyYWN0LCBzZXRhc3NldHR5cGVmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYXNzZXR0eXBldmFsdWUsIHNldGFzc2V0dHlwZXZhbHVlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbW9kZWxmaWx0ZXJhY3QsIHNldG1vZGVsZmlsdGVyYWN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW21vZGVsdmFsdWUsIHNldG1vZGVsdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIC8vY2hhbmdlZCBkYW4gcmVtb3ZlZFxuICBjb25zdCBbZGF0YXJlcGxhY2VtZW50cywgc2V0ZGF0YXJlcGxhY2VtZW50c10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtwb3BvdmVyLCBzZXRwb3BvdmVyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9jaGFuZ2VkXG4gIGNvbnN0IFtkYXRhY2hhbmdlZCwgc2V0ZGF0YWNoYW5nZWRdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBudWxsLFxuICAgIG1vZGVsX2lkOiBudWxsLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIG1pZ19pZDogXCJcIixcbiAgICBzdGF0dXNfY29uZGl0aW9uOiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBzdGF0dXNfdXNhZ2U6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogXCJcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIGNvbnN0IFtkYXRhQXBpY2hhbmdlZCwgc2V0ZGF0YUFwaWNoYW5nZWRdID0gdXNlU3RhdGUoe1xuICAgIGlkOiAwLFxuICAgIHJlcGxhY2VtZW50X2lkOiAwLFxuICAgIG5vdGVzOiBcIlwiLFxuICB9KTtcbiAgY29uc3QgW21vZGFsY2hhbmdlZCwgc2V0bW9kYWxjaGFuZ2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkY2hhbmdlZCwgc2V0ZGlzYWJsZWRjaGFuZ2VkXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ2NoYW5nZWQsIHNldGxvYWRpbmdjaGFuZ2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3RyaWdnZXJjaGFuZ2VkLCBzZXR0cmlnZ2VyY2hhbmdlZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIC8vcmVtb3ZlZFxuICBjb25zdCBbZGF0YXJlbW92ZWQsIHNldGRhdGFyZW1vdmVkXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RhdGFBcGlyZW1vdmVkLCBzZXRkYXRhQXBpcmVtb3ZlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgaW52ZW50b3J5X3BhcnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxyZW1vdmVkLCBzZXRtb2RhbHJlbW92ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRyZW1vdmVkLCBzZXRkaXNhYmxlZHJlbW92ZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5ncmVtb3ZlZCwgc2V0bG9hZGluZ3JlbW92ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZmV0Y2hpbmdtb2RlbCwgc2V0ZmV0Y2hpbmdtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtiYWNrdXBtb2RlbHMsIHNldGJhY2t1cG1vZGVsc10gPSB1c2VTdGF0ZShtb2RlbHMpO1xuXG4gIGNvbnN0IGNvbHVtbnMgPSBbXG4gICAgLy8ge1xuICAgIC8vICAgICB0aXRsZTogJ05hbWEgSXRlbScsXG4gICAgLy8gICAgIGRhdGFJbmRleDogJ2ludmVudG9yeV9uYW1lJyxcbiAgICAvLyAgICAga2V5OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiTUlHIElEXCIsXG4gICAgICBkYXRhSW5kZXg6IFwibWlnX2lkXCIsXG4gICAgICBrZXk6IFwibWlnX2lkXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJTZXJpYWwgTnVtYmVyXCIsXG4gICAgICBkYXRhSW5kZXg6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAga2V5OiBcInNlcmlhbF9udW1iZXJcIixcbiAgICAgIHJlbmRlcjogKHRleHQsIHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgICAgPD57cmVjb3JkLnNlcmlhbF9udW1iZXIgPT09IG51bGwgPyBcIi1cIiA6IHJlY29yZC5zZXJpYWxfbnVtYmVyfTwvPlxuICAgICAgICAgICksXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiTW9kZWxcIixcbiAgICAgIGRhdGFJbmRleDogXCJtb2RlbF9uYW1lXCIsXG4gICAgICBrZXk6IFwibW9kZWxfbmFtZVwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiA8PntyZWNvcmQubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC8+LFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIkFzc2V0IFR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJhc3NldF9uYW1lXCIsXG4gICAgICBrZXk6IFwiYXNzZXRfbmFtZVwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiA8PntyZWNvcmQubW9kZWxfaW52ZW50b3J5LmFzc2V0LmFzc2V0X25hbWV9PC8+LFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXCIsXG4gICAgICBkYXRhSW5kZXg6IFwiYWN0aW9uc3NcIixcbiAgICAgIHJlbmRlcjogKHRleHQsIHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2V2ZW50cyA9PT0gcmVjb3JkLmlkID8gKFxuICAgICAgICAgICAgICAgIDxQb3BvdmVyXG4gICAgICAgICAgICAgICAgICB2aXNpYmxlPXtwb3BvdmVyfVxuICAgICAgICAgICAgICAgICAgb25WaXNpYmxlQ2hhbmdlPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldHBvcG92ZXIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogYDBweGAsIG1hcmdpbjogYDBweGAgfX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbUxlZnRcIlxuICAgICAgICAgICAgICAgICAgdHJpZ2dlcj1cImNsaWNrXCJcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDbG9zZUNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjFyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YXJlbW92ZWQocmVjb3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaXJlbW92ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlyZW1vdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtYWlucGFydGRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52ZW50b3J5X3BhcnRfaWQ6IHJlY29yZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFscmVtb3ZlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEtlbHVhcmthbiBQYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhY2hhbmdlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvcG92ZXIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0cmlnZ2VyY2hhbmdlZCgocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBHYW50aWthbiBQYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS0zMDAgdy1mdWxsIHAtNFwiPktlbHVhcmthbiBQYXJ0PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS0zMDAgdy1mdWxsIHAtNFwiPkdhbnRpa2FuIFBhcnQ8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRwb3BvdmVyKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogYHJlZGAsIGZvbnRTaXplOiBgMS41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICksXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gIF07XG5cbiAgLy9oZWxwZXJcbiAgLy8xIG55YSBsYWdpIGFkYSBkaSB1c2VFZmZlY3RcbiAgY29uc3QgcmVjdXJzaXZlRmxhdHRlbkFyciA9IChkYXRhYXNzZXRzKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZGF0YWFzc2V0cy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgIHJlc3VsdC5wdXNoKGl0ZW0uaWQpO1xuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgcmVzdWx0LnB1c2goLi4ucmVjdXJzaXZlRmxhdHRlbkFycihpdGVtLmNoaWxkcmVuKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgZnVuY3Rpb24gcmVjdXJzaXZlTW9kaWZEYXRhKGRhdGFhKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhYS5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0YWFbaV1bXCJrZXlcIl0gPSBkYXRhYVtpXS5pZDtcbiAgICAgIGRhdGFhW2ldW1widmFsdWVcIl0gPSBkYXRhYVtpXS5pZDtcbiAgICAgIGRhdGFhW2ldW1xuICAgICAgICBcInRpdGxlXCJcbiAgICAgIF0gPSBgJHtkYXRhYVtpXS5taWdfaWR9IC0gJHtkYXRhYVtpXS5tb2RlbF9pbnZlbnRvcnk/Lm5hbWV9YDtcbiAgICAgIGRhdGFhW2ldW1wiY2hpbGRyZW5cIl0gPSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBkZWxldGUgZGF0YWFbaV0uaW52ZW50b3J5X3JlcGxhY2VtZW50X3BhcnRzO1xuICAgICAgaWYgKGRhdGFhW2ldLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVjdXJzaXZlTW9kaWZEYXRhKGRhdGFhW2ldLmNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFhO1xuICB9XG5cbiAgLy9oYW5kbGVyXG4gIGNvbnN0IGFzc2V0UGFydCA9IFtdO1xuICBjb25zdCByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0ID0gKGRvYywgYXNzZXRpZCkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuaWQgPT09IE51bWJlcihhc3NldGlkKSkge1xuICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICBhc3NldFBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRvY1tpXS5jaGlsZHJlbiwgYXNzZXRpZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIGNvbnN0IG1vZGVsUGFydCA9IFtdO1xuICBjb25zdCByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU1vZGVsID0gKGRvYywgbW9kZWxpZCkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5tb2RlbF9pZCA9PT0gbW9kZWxpZCkge1xuICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICBtb2RlbFBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU1vZGVsKGRvY1tpXS5jaGlsZHJlbiwgbW9kZWxpZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIGNvbnN0IG5hbWVQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTmFtZSA9IChkb2MsIG5hbWUpID0+IHtcbiAgICB2YXIgYXJyID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChkb2NbaV0uaW52ZW50b3J5X25hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG5hbWVQYXJ0LnB1c2goZG9jW2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkb2NbaV0uY2hpbGRyZW4pIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgICBjaGlsZHJlbjogcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRvY1tpXS5jaGlsZHJlbiwgbmFtZSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIC8vZGVsaXZlciBBUElcbiAgY29uc3QgaGFuZGxlUmVwbGFjZW1lbnRJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nY2hhbmdlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVwbGFjZUludmVudG9yeVBhcnRgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWNoYW5nZWQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2NoYW5nZWQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkl0ZW0gUGFydCBiZXJoYXNpbCBkaWdhbnRpXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlUmVtb3ZlSXRlbVBhcnQgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3JlbW92ZWQodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L3JlbW92ZUludmVudG9yeVBhcnRgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaXJlbW92ZWQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ3JlbW92ZWQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkl0ZW0gUGFydCBiZXJoYXNpbCBkaWtlbHVhcmthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKGZhbHNlKTtcbiAgICAgICAgICBzZXRkYXRhdHJpZ2dlcigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy9zZWFyY2ggbmFtYVxuICBjb25zdCBvbkNoYW5nZVNlYXJjaCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0bmFtYXNlYXJjaGFjdCh0cnVlKTtcbiAgICAgIHNldG5hbWF2YWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICB9O1xuICAvL3NlYXJjaCBhc3NldCB0eXBlXG4gIGNvbnN0IG9uQ2hhbmdlQXNzZXRUeXBlID0gKGlkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2V0ZGF0YXRhYmxlKGRhdGF0YWJsZTMpO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KGZhbHNlKTtcbiAgICAgIHNldG1vZGVscyhiYWNrdXBtb2RlbHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9yb3dzPTEwMCZhc3NldF9pZD0ke2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgcmVzMi5kYXRhLmxlbmd0aCA9PT0gMCA/IHNldG1vZGVscyhbXSkgOiBzZXRtb2RlbHMocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIHNldGFzc2V0dHlwZWZpbHRlcmFjdCh0cnVlKTtcbiAgICAgIHNldGFzc2V0dHlwZXZhbHVlKGlkKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIG1vZGVsXG4gIGNvbnN0IG9uQ2hhbmdlTW9kZWwgPSAoaWRtb2RlbCkgPT4ge1xuICAgIGlmICh0eXBlb2YgaWRtb2RlbCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2V0ZGF0YXRhYmxlKGRhdGF0YWJsZTMpO1xuICAgICAgc2V0bW9kZWxmaWx0ZXJhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdCh0cnVlKTtcbiAgICAgIHNldG1vZGVsdmFsdWUoaWRtb2RlbCk7XG4gICAgfVxuICB9O1xuICAvL2ZpbmFsQ2xpY2tcbiAgY29uc3Qgb25GaW5hbENsaWNrID0gKCkgPT4ge1xuICAgIHZhciBkYXRhdGVtcCA9IGRhdGF0YWJsZTI7XG4gICAgaWYgKGFzc2V0dHlwZWZpbHRlcmFjdCkge1xuICAgICAgLy8gY29uc3QgdCA9IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZGF0YXRlbXAsIGFzc2V0dHlwZXZhbHVlKVxuICAgICAgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBhc3NldFBhcnQ7XG4gICAgfVxuICAgIGlmIChtb2RlbGZpbHRlcmFjdCkge1xuICAgICAgLy8gY29uc3QgdCA9IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU1vZGVsKGRhdGF0ZW1wLCBtb2RlbHZhbHVlKTtcbiAgICAgIGRhdGF0ZW1wID0gbW9kZWxQYXJ0O1xuICAgIH1cbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgLy8gY29uc3QgdCA9IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTmFtZShkYXRhdGVtcCwgbmFtYXZhbHVlKVxuICAgICAgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBuYW1lUGFydDtcbiAgICB9XG4gICAgc2V0ZGF0YXRhYmxlKGRhdGF0ZW1wKTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHJldHVybiByZXMyLmRhdGE7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlczMpID0+IHtcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlQ2hhbmdldG9DaGlsZHJlbiA9IChyc2MpID0+IHtcbiAgICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByc2MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJzY1tpXS5rZXkgPSByc2NbaV0uaWQ7XG4gICAgICAgICAgICByc2NbaV0udmFsdWUgPSByc2NbaV0uaWQ7XG4gICAgICAgICAgICByc2NbaV0udGl0bGUgPSBgJHtyc2NbaV0ubWlnX2lkfSAtICR7cnNjW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgICAgICAgcnNjW2ldLmNoaWxkcmVuID0gcnNjW2ldLmludmVudG9yeV9wYXJ0cztcbiAgICAgICAgICAgIGRlbGV0ZSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgaWYgKHJzY1tpXS5jaGlsZHJlbi5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogcmVjdXJzaXZlQ2hhbmdldG9DaGlsZHJlbihyc2NbaV0uY2hpbGRyZW4pLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSByc2NbaV0uY2hpbGRyZW47XG4gICAgICAgICAgICAgIHJlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAuLi5yc2NbaV0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0ID0gcmVjdXJzaXZlQ2hhbmdldG9DaGlsZHJlbihyZXMzLmludmVudG9yeV9wYXJ0cyk7XG4gICAgICAgIHNldG1haW5wYXJ0ZGF0YSh7XG4gICAgICAgICAgLi4ucmVzMyxcbiAgICAgICAgICBpbnZlbnRvcnlfcGFydHM6IHQsXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXRhdGFibGUodCk7XG4gICAgICAgIHNldGRhdGF0YWJsZTIodCk7XG4gICAgICAgIHNldGRhdGF0YWJsZTModCk7XG4gICAgICAgIHNldHByYWxvYWRpbmdwYXJ0KGZhbHNlKTtcbiAgICAgIH0pO1xuICB9LCBbZGF0YXRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHJpZ2dlcmNoYW5nZWQgIT09IC0xKSB7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeVJlcGxhY2VtZW50cz9pZD0ke2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIGNvbnN0IG1hcGRhdGEgPSByZWN1cnNpdmVNb2RpZkRhdGEocmVzMi5kYXRhKTtcbiAgICAgICAgICBzZXRkYXRhcmVwbGFjZW1lbnRzKG1hcGRhdGEpO1xuICAgICAgICAgIGlmIChtYXBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3RyaWdnZXJjaGFuZ2VkXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0c2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRhc3NldGRhdGEocmVzMi5kYXRhKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG9cIj5Lb25maWd1cmFzaSBQYXJ0PC9oMT5cbiAgICAgICAge3ByYWxvYWRpbmcyID8gbnVsbCA6IChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAvKmNvbnNvbGUubG9nKG1haW5wYXJ0ZGF0YSk7IGNvbnNvbGUubG9nKGRhdGFyZW1vdmVkKSovIHJ0LnB1c2goXG4gICAgICAgICAgICAgICAgYC9pdGVtcy9jcmVhdGVwYXJ0LyR7aXRlbWlkfT9uYW1hPSR7bWFpbnBhcnRkYXRhLm1pZ19pZH1gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctZnVsbCBtci0xIGdyaWQgZ3JpZC1jb2xzLTEyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTUgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMyBtci0xXCI+XG4gICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIEFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VBc3NldFR5cGUoZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMyBtci0xXCI+XG4gICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e2ZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGx9XG4gICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICB9L2dldEZpbHRlck1vZGVscz9uYW1lPSR7dmFsdWUgIT09IFwiXCIgPyB2YWx1ZSA6IFwiXCJ9YCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHMocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlTW9kZWwoKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlTW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bW9kZWxzLm1hcCgoZG9jbW9kZWxzLCBpZHhtb2RlbHMpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2Ntb2RlbHMuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Ntb2RlbHMubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncGFydH1cbiAgICAgICAgcGFnaW5hdGlvbj17eyBwYWdlU2l6ZTogOSB9fVxuICAgICAgICBzY3JvbGw9e3sgeDogMjAwIH19XG4gICAgICAgIGRhdGFTb3VyY2U9e2RhdGF0YWJsZX1cbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgb25Sb3c9eyhyZWNvcmQsIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKHJlY29yZC5pZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9fVxuICAgICAgPjwvVGFibGU+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFBlcmdhbnRpYW4gUGFydCBcIntkYXRhY2hhbmdlZC5pbnZlbnRvcnlfbmFtZX1cIlxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWNoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGljaGFuZ2VkLFxuICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRjaGFuZ2VkfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVwbGFjZW1lbnRJdGVtUGFydH1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjaGFuZ2VkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsY2hhbmdlZH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs3NjB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBJdGVtIFBhcnQgeWFuZyBJbmdpbiBEaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgIHRyZWVEYXRhPXtkYXRhdGFibGUzfVxuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RhdGFjaGFuZ2VkLmtleX1cbiAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBBc3NldCBUeXBlIGRhcmkgSXRlbSBQYXJ0IHlhbmcgaW5naW4gZGlnYW50aXtcIiBcIn1cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGJnLWdyYXktMTAwIGJvcmRlciBwLTIgaC04XCI+XG4gICAgICAgICAgICAgIHtkYXRhY2hhbmdlZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQubmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBJdGVtIFBhcnQgUGVuZ2dhbnRpIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRpc2FibGVkY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWNoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICBpZDogZGF0YWNoYW5nZWQuaWQsXG4gICAgICAgICAgICAgICAgICByZXBsYWNlbWVudF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIHRyZWVEYXRhPXtkYXRhcmVwbGFjZW1lbnRzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhcmVwbGFjZW1lbnRzLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5pbnZlbnRvcnlfbmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICAgIDwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpY2hhbmdlZC5ub3Rlc31cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWNoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICBub3RlczogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2VsdWFya2FuIGl0ZW0gXCJcbiAgICAgICAgICAgIHtkYXRhcmVtb3ZlZC5pbnZlbnRvcnlfbmFtZX1cIiBkYXJpIFwie21haW5wYXJ0ZGF0YS5pbnZlbnRvcnlfbmFtZX1cIj9cbiAgICAgICAgICA8L2gxPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFscmVtb3ZlZH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZVJlbW92ZUl0ZW1QYXJ0fVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdyZW1vdmVkIH19XG4gICAgICAgIHdpZHRoPXs3NjB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7IC4uLmRhdGFBcGlyZW1vdmVkLCBub3RlczogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvZGl2PlxuICApO1xufTtcbmNvbnN0IFJlbGF0aW9uc2hpcCA9ICh7IGluaXRQcm9wcywgbWFpbmRhdGEsIGl0ZW1pZCB9KSA9PiB7XG4gIC8vaW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZXN0YXRlXG4gIGNvbnN0IFtldmVudHMsIHNldGV2ZW50c10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0YWJsZSwgc2V0ZGF0YXRhYmxlXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2RhdGF0YWJsZTIsIHNldGRhdGF0YWJsZTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMywgc2V0ZGF0YXRhYmxlM10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtuYW1hc2VhcmNoYWN0LCBzZXRuYW1hc2VhcmNoYWN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25hbWF2YWx1ZSwgc2V0bmFtYXZhbHVlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRyaWdnZXIsIHNldGRhdGF0cmlnZ2VyXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbbG9hZGluZ3JlbCwgc2V0bG9hZGluZ3JlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5ncmVsLCBzZXRwcmFsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9kZWxldGVcbiAgY29uc3QgW2RhdGFBcGlkZWxldGUsIHNldGRhdGFBcGlkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICB9KTtcbiAgY29uc3QgW21vZGFsZGVsZXRlLCBzZXRtb2RhbGRlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nZGVsZXRlLCBzZXRsb2FkaW5nZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3JlbGF0aW9uZGF0YWRlbGV0ZSwgc2V0cmVsYXRpb25kYXRhZGVsZXRlXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIHRpcGU6IFwiXCIsXG4gICAga29uZWtzaTogXCJcIixcbiAgfSk7XG4gIC8vYWRkXG4gIGNvbnN0IFtkYXRhQXBpYWRkLCBzZXRkYXRhQXBpYWRkXSA9IHVzZVN0YXRlKHtcbiAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICByZWxhdGlvbnNoaXBfaWQ6IG51bGwsXG4gICAgaXNfaW52ZXJzZTogbnVsbCxcbiAgICB0eXBlX2lkOiBudWxsLFxuICAgIGNvbm5lY3RlZF9pZHM6IG51bGwsXG4gICAgYmFja3VwX2Nvbm5lY3RlZF9pZHM6IG51bGwsXG4gIH0pO1xuICBjb25zdCBbZGlzcGxheWRhdGFyZWxhdGlvbnMsIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3JlbGF0aW9ubmFtZWFkZCwgc2V0cmVsYXRpb25uYW1lYWRkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcmVsYXRpb25uYW1lZGRhZGQsIHNldHJlbGF0aW9ubmFtZWRkYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3JlbGF0aW9uc2VsZWN0ZWRpZHhhZGQsIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZF0gPVxuICAgIHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RldGFpbHRpcGVhZGQsIHNldGRldGFpbHRpcGVhZGRdID0gdXNlU3RhdGUoLTEwKTtcbiAgY29uc3QgW2RldGFpbHRpcGVkYXRhYWRkLCBzZXRkZXRhaWx0aXBlZGF0YWFkZF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RhbGFkZCwgc2V0bW9kYWxhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGQsIHNldGRpc2FibGVkYWRkXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ2FkZCwgc2V0bG9hZGluZ2FkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1YmxvY2RhdGEsIHNldHN1YmxvY2RhdGFdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtzdWJsb2N0cmlnLCBzZXRzdWJsb2N0cmlnXSA9IHVzZVN0YXRlKC0xKTtcblxuICAvL2RlY2xhcmF0aW9uXG4gIGNvbnN0IGNvbHVtbnMgPSBbXG4gICAge1xuICAgICAgdGl0bGU6IFwiUmVsYXRpb25zaGlwIFR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJyZWxhdGlvbnNoaXBfbmFtZVwiLFxuICAgICAga2V5OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJOYW1hXCIsXG4gICAgICBkYXRhSW5kZXg6IFwiY29ubmVjdGVkX2RldGFpbF9uYW1lXCIsXG4gICAgICBrZXk6IFwiY29ubmVjdGVkX2RldGFpbF9uYW1lXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJUeXBlXCIsXG4gICAgICBkYXRhSW5kZXg6IFwidHlwZVwiLFxuICAgICAga2V5OiBcInR5cGVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXCIsXG4gICAgICBkYXRhSW5kZXg6IFwiYWN0aW9uc3NcIixcbiAgICAgIHJlbmRlcjogKHRleHQsIHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2V2ZW50cyA9PT0gcmVjb3JkLmlkID8gKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlkZWxldGUoeyBpZDogcmVjb3JkLmlkIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uZGF0YWRlbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZWNvcmQucmVsYXRpb25zaGlwX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXBlOiByZWNvcmQudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvbmVrc2k6IHJlY29yZC5jb25uZWN0ZWRfZGV0YWlsX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxkZWxldGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IGAxLjJyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBgcmVkYCxcbiAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGBwb2ludGVyYCxcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hhbmRsZXJcbiAgLy9zZWFyY2ggbmFtYVxuICBjb25zdCBvbkNoYW5nZVNlYXJjaCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0bmFtYXNlYXJjaGFjdCh0cnVlKTtcbiAgICAgIHNldG5hbWF2YWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICB9O1xuICAvL2ZpbmFsQ2xpY2tcbiAgY29uc3Qgb25GaW5hbENsaWNrID0gKCkgPT4ge1xuICAgIHZhciBkYXRhdGVtcCA9IGRhdGF0YWJsZTI7XG4gICAgaWYgKG5hbWFzZWFyY2hhY3QpIHtcbiAgICAgIGRhdGF0ZW1wID0gZGF0YXRlbXAuZmlsdGVyKChmbHQpID0+IHtcbiAgICAgICAgcmV0dXJuIGZsdC5jb25uZWN0ZWRfZGV0YWlsX25hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5pbmNsdWRlcyhuYW1hdmFsdWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0ZGF0YXRhYmxlKGRhdGF0ZW1wKTtcbiAgfTtcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlUmVsYXRpb25zaGlwSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RlbGV0ZVJlbGF0aW9uc2hpcEludmVudG9yeWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWRlbGV0ZSksXG4gICAgICB9XG4gICAgKVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdkZWxldGUoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbGRlbGV0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVsYXRpb25zaGlwIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQWRkUmVsYXRpb25zaGlwSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nYWRkKHRydWUpO1xuICAgIGRlbGV0ZSBkYXRhQXBpYWRkLmJhY2t1cF9jb25uZWN0ZWRfaWQ7XG4gICAgLy8gY29uc29sZS5sb2coZGF0YUFwaWFkZClcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vYWRkUmVsYXRpb25zaGlwSW52ZW50b3JpZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFBcGlhZGQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2FkZChmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgc3ViamVjdF9pZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IG51bGwsXG4gICAgICAgICAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgICAgICAgICAgdHlwZV9pZDogbnVsbCxcbiAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IG51bGwsXG4gICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVhZGQoXCJcIik7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShudWxsKTtcbiAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKC0xKTtcbiAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKC0xKTtcbiAgICAgICAgICBzZXRzdWJsb2N0cmlnKC0xKTtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVsYXRpb25zaGlwIEl0ZW0gYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3VzZUVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChkYXRhdHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldHByYWxvYWRpbmdyZWwodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeT9pZD0ke2l0ZW1pZH0mdHlwZV9pZD0tNGAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0ZGF0YXRhYmxlKFxuICAgICAgICAgICAgcmVzMi5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzMi5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRkYXRhdGFibGUyKFxuICAgICAgICAgICAgcmVzMi5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzMi5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRkYXRhdGFibGUzKFxuICAgICAgICAgICAgcmVzMi5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzMi5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRwcmFsb2FkaW5ncmVsKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbZGF0YXRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRkaXNwbGF5ZGF0YXJlbGF0aW9ucyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3VibG9jdHJpZyAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7c3VibG9jdHJpZ31gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldHN1YmxvY2RhdGEocmVzMi5kYXRhLmNoaWxkcmVuKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkZXRhaWx0aXBlYWRkICE9PSAtMTApIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGF0YUFwaWFkZC50eXBlX2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChbcmVzMi5kYXRhXSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTIgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkZXRhaWx0aXBlYWRkLCBzdWJsb2N0cmlnXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvIG1yLTFcIj5SZWxhdGlvbnNoaXA8L2gxPlxuICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgID48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgc2V0bW9kYWxhZGQoXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7IC8qcnQucHVzaChgL2l0ZW1zL2NyZWF0ZXJlbGF0aW9uc2hpcC8ke2l0ZW1pZH0/bmFtYT0ke21haW5kYXRhLmludmVudG9yeV9uYW1lfSZhc3NldF9pZD0ke21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZH1gKSovXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIFRhbWJhaFxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmdyZWwgPyBudWxsIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctZnVsbCBtci0xIGdyaWQgZ3JpZC1jb2xzLTEyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTExIG1yLTFcIj5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCwgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE5hbWEgSXRlbVwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZVNlYXJjaChlKX1cbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xXCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uRmluYWxDbGlja31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxTZWFyY2hPdXRsaW5lZCAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8VGFibGVcbiAgICAgICAgbG9hZGluZz17cHJhbG9hZGluZ3JlbH1cbiAgICAgICAgcGFnaW5hdGlvbj17eyBwYWdlU2l6ZTogOSB9fVxuICAgICAgICBzY3JvbGw9e3sgeDogMjAwIH19XG4gICAgICAgIGRhdGFTb3VyY2U9e2RhdGF0YWJsZX1cbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgb25Sb3c9eyhyZWNvcmQsIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKHJlY29yZC5pZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9fVxuICAgICAgPjwvVGFibGU+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDw+XG4gICAgICAgICAgICBBcGFrYWggQW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgUmVsYXRpb25zaGlwIGJlcmlrdXQgaW5pIGRhcmkgXCJcbiAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cIj9cbiAgICAgICAgICA8Lz5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGRlbGV0ZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGRlbGV0ZShmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlRGVsZXRlUmVsYXRpb25zaGlwSXRlbX1cbiAgICAgICAgb2tCdXR0b25Qcm9wcz17eyBsb2FkaW5nOiBsb2FkaW5nZGVsZXRlIH19XG4gICAgICAgIHdpZHRoPXs3MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBib3JkZXItYiBtYi01XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0wXCI+UmVsYXRpb25zaGlwIFR5cGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUubmFtZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5UaXBlOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLnRpcGV9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0wXCI+SXRlbTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5rb25la3NpfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIiBvbkNoYW5nZT17KGUpID0+IHt9fT48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFRhbWJhaCBSZWxhdGlvbnNoaXAgXCJ7bWFpbmRhdGEubmFtZX1cIlxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxhZGQoXG4gICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgKTsgLypzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgcmVsYXRpb25zaGlwX2lkOiBudWxsLCB0eXBlX2lkOiBudWxsLCBjb25uZWN0ZWRfaWQ6IG51bGwgfSkqLyAvKmNvbnNvbGUubG9nKGRhdGFBcGlhZGQpKi9cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2FkZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGFkZH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGFkZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZSA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlciBwLTIgaG92ZXI6Ym9yZGVyLXByaW1hcnkgcm91bmRlZC1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lZGRhZGQoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbm5hbWVhZGR9PC9wPlxuICAgICAgICAgICAgICB7cmVsYXRpb25uYW1lZGRhZGQgPyAoXG4gICAgICAgICAgICAgICAgPFVwT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZ2IoMjI5LDIzMSwyMzUpYCB9fSAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxEb3duT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZ2IoMjI5LDIzMSwyMzUpYCB9fSAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7cmVsYXRpb25uYW1lZGRhZGQgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCBmb250LXNlbWlib2xkIHAtMyB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgUmVsYXRpb25zaGlwIFR5cGVcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCBmb250LXNlbWlib2xkIHAtMyB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgSW52ZXJzZSBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge2Rpc3BsYXlkYXRhcmVsYXRpb25zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCIgYmctc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChkb2MucmVsYXRpb25zaGlwX3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogZG9jLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2ludmVyc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5yZWxhdGlvbnNoaXBfdHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bob3ZlcjpiZy10ZXJuYXJ5IGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYmxhY2sgcC0zIHctNi8xMiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaWR4YWRkID09PSBpZHggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZCA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCIgYmctc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChkb2MuaW52ZXJzZV9yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gbnVsbCB8fCBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldGRpc2FibGVkYWRkKHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRkaXNhYmxlZGFkZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBUaXBlIDxzcGFuIGNsYXNzTmFtZT1cInRpcGVwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YUFwaWFkZC50eXBlX2lkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIHR5cGVfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQucmVsYXRpb25zaGlwX2lkID09PSBudWxsIHx8IHZhbHVlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICA/IHNldGRpc2FibGVkYWRkKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkZXRhaWx0aXBlYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICAgICAgICA/IChzZXRzdWJsb2N0cmlnKC0xKSwgc2V0c3VibG9jZGF0YShudWxsKSlcbiAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0xfT5BZ2VudDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0yfT5SZXF1ZXN0ZXI8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey00fT5Bc3NldCBUeXBlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGlwZXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2RhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTEgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+RGV0YWlsIFRpcGU8L3A+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ21vZGVsID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGV0YWlsdGlwZWFkZH0mbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2RhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTIgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+RGV0YWlsIFRpcGU8L3A+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ21vZGVsID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGV0YWlsdGlwZWFkZH0mbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2RhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+RGV0YWlsIFRpcGU8L3A+XG4gICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBkYXRhQXBpYWRkLmJhY2t1cF9jb25uZWN0ZWRfaWRzWzBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2RldGFpbHRpcGVkYXRhYWRkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiBbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja3VwX2Nvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0c3VibG9jdHJpZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtNCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIGRlbmdhbiBNb2RlbCBJRFwiXG4gICAgICAgICAgICAgICAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ21vZGVsID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGV0YWlsdGlwZWFkZH0mbW9kZWxfaWQ9JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgIT09IFwiXCIgPyB2YWx1ZSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgIG9wdC5jaGlsZHJlbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaW5wdXQudG9Mb3dlckNhc2UoKSkgPj1cbiAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja3VwX2Nvbm5lY3RlZF9pZHM6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7ZGV0YWlsdGlwZWRhdGFhZGQubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5taWdfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIHtzdWJsb2NkYXRhICE9PSBudWxsICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZSAoU3VibG9rYXNpKTwvcD5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBtdWx0aXBsZVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICB0cmVlRGF0YT17c3VibG9jZGF0YX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiBkYXRhQXBpYWRkLmJhY2t1cF9jb25uZWN0ZWRfaWRzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCBjb25uZWN0ZWRfaWRzOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvZGl2PlxuICApO1xufTtcbmNvbnN0IEFzc29jaWF0aW9uID0gKHsgaW5pdFByb3BzLCBpdGVtaWQsIG1haW5kYXRhLCBwcmFsb2FkaW5nIH0pID0+IHtcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG9cIj5Bc3NvY2lhdGlvbjwvaDE+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBweC01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogbWFpbmRhdGEuYXNzb2NpYXRpb25zLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7bWFpbmRhdGEuYXNzb2NpYXRpb25zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIHNoYWRvdy1tZCBweS00IHB4LTUgYm9yZGVyIG1iLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gdy0xMC8xMiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJ0LnB1c2goYC90aWNrZXRzL2RldGFpbC8ke2RvYy5pZH0/YWN0aXZlPWRldGFpbEl0ZW1gKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPlRpY2tldCBOdW1iZXI8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLnRpY2tldF9uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDEgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1yZWQtMTAwIGJvcmRlciBib3JkZXItcmVkLTIwMCB0ZXh0LXJlZC02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAyICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSA1ICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcbmNvbnN0IEFjaXRpdnR5ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBpbnZyZWxhdGlvbnMsXG4gIHByYWxvYWRpbmcsXG4gIGFjdGl2aXR5dHJpZ2dlcixcbn0pID0+IHtcbiAgY29uc3QgW2RheWxvZ3MsIHNldGRheWxvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbd2Vla2xvZ3MsIHNldHdlZWtsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vcmVsb2dzLCBzZXRtb3JlbG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nbG9ncywgc2V0cHJhbG9hZGluZ2xvZ3NdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpbnZlbnRvcmllcywgc2V0aW52ZW50b3JpZXNdID0gdXNlU3RhdGUoW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0cHJhbG9hZGluZ2xvZ3ModHJ1ZSk7XG5cbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBY3Rpdml0eUludmVudG9yeUxvZ3M/aWQ9JHtpdGVtaWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgdmFyIGRheWxvZ3NtYXAgPSByZXMyLmRhdGEuZGF5X2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIERpaGFwdXM6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgd2Vla2xvZ3NtYXAgPSByZXMyLmRhdGEud2Vla19sb2dzLm1hcCgoZG9jbG9ncywgaWR4bG9ncykgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGVuZXcgPSBtb21lbnQoZG9jbG9ncy5kYXRlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTExcIik7XG4gICAgICAgICAgdmFyIGRlc2NuZXcgPSBcIlwiO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c19jb25kaXRpb24gPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiR3JleVwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiR3JleVwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2N1c2FnZU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiSW4gVXNlZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2N1c2FnZUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiSW4gVXNlZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzYzEgPSBkb2Nsb2dzLmRlc2NyaXB0aW9uLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gQmFydTogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/Lmxpc3RfcGFydHMpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYEluaXNpYWxpc2FzaSBQZW1idWF0YW4gSXRlbSBQYXJ0IFwiJHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHNcbiAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/Lmxpc3RfcGFydHMuaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgICAgICAgZG9jZmlsLmlkXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmludmVudG9yeV9uYW1lKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cImA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVtYnVhdGFuIEl0ZW0gQmFydSBiZXJuYW1hIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8uaW52ZW50b3J5X25hbWV9XCJgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkZXNjMVswXSA9PT0gXCJOb3Rlc1wiXG4gICAgICAgICAgICA/IChkZXNjbmV3ID0gZGVzY25ldyArIGBQZW5hbWJhaGFuIE5vdGVzYClcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiVXBkYXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBzdGF0dXMga29uZGlzaSBkYXJpICR7ZGVzY2tvbmRpc2lPbGR9IGtlICR7ZGVzY2tvbmRpc2lCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBzdGF0dXMgcGVtYWthaWFuIGRhcmkgJHtkZXNjdXNhZ2VPbGR9IGtlICR7ZGVzY3VzYWdlQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZSkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBOYW1hIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5pbnZlbnRvcnlfbmFtZX1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWV9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFNlcmlhbCBOdW1iZXIgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnNlcmlhbF9udW1iZXJ9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXJ9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvbikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBMb2NhdGlvbiBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWQpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gVmVuZG9yIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudmVuZG9ycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudmVuZG9ycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5tYW51ZmFjdHVyZXJfaWQpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmRlc2tyaXBzaSkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBQZW5ndWJhaGFuIERlc2tyaXBzaSBJdGVtYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA+XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzbmV3ID1cbiAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBJdGVtIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBJdGVtIFBhcnRgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoIDxcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNvbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5nZWx1YXJhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPT09XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzbmV3ID1cbiAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNvbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZXJnYW50aWFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cImA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgcHJwdHMgPSBbXTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkKSB7XG4gICAgICAgICAgICAgICAgcHJwdHMucHVzaChwcm9wKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBQZW5ndWJhaGFuIFwiJHtwcnB0cy5qb2luKFwiLCBcIil9XCIgSXRlbWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJEZWxldGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtb3JlbG9nc21hcCA9IHJlczIuZGF0YS5lbHNlX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0ZGF5bG9ncyhkYXlsb2dzbWFwKTtcbiAgICAgICAgc2V0d2Vla2xvZ3Mod2Vla2xvZ3NtYXApO1xuICAgICAgICBzZXRtb3JlbG9ncyhtb3JlbG9nc21hcCk7XG4gICAgICAgIHNldHByYWxvYWRpbmdsb2dzKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIC8vIC50aGVuKHJlczMgPT4ge1xuICAgIC8vICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCwge1xuICAgIC8vICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAvLyAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAvLyAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSlcbiAgICAvLyAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzNCA9PiB7XG4gICAgLy8gICAgICAgICAgICAgdmFyIGNvbmNhdGFyciA9IHJlczQuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczQuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKVxuXG4gICAgLy8gICAgICAgICAgICAgdmFyIGxvZ3MybWFwID0gcmVzMy5kYXRhLnJlbGF0aW9uc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVuZXcyID0gbW9tZW50KGRvY3JlbC5kYXRlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoJ0xMTCcpXG4gICAgLy8gICAgICAgICAgICAgICAgIHZhciBkZXNjbmV3MiA9ICcnXG4gICAgLy8gICAgICAgICAgICAgICAgIHZhciBpZGxvZ25ldyA9IC0xXG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MyID0gZG9jcmVsLmRlc2NyaXB0aW9uLnNwbGl0KFwiIFwiKVxuICAgIC8vICAgICAgICAgICAgICAgICBkZXNjMlswXSA9PT0gJ0NyZWF0ZWQnID8gaWRsb2duZXcgPSBjb25jYXRhcnIuZmlsdGVyKGRvY2ZpbCA9PiBkb2NmaWwuaWQgPT09IGRvY3JlbC5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaWQpWzBdIDogbnVsbFxuICAgIC8vICAgICAgICAgICAgICAgICBkZXNjMlswXSA9PT0gJ0NyZWF0ZWQnID8gZGVzY25ldzIgPSBkZXNjbmV3MiArIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7dHlwZW9mIChpZGxvZ25ldykgPT09ICd1bmRlZmluZWQnID8gXCIoU3VkYWggRGloYXB1cyBsYWdpKVwiIDogYCR7aWRsb2duZXcucmVsYXRpb25zaGlwfWB9XCJgIDogbnVsbFxuICAgIC8vICAgICAgICAgICAgICAgICBkZXNjMlswXSA9PT0gJ0RlbGV0ZWQnID8gZGVzY25ldzIgPSBkZXNjbmV3MiArIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXBgIDogbnVsbFxuICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgLi4uZG9jcmVsLFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldzIsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldzJcbiAgICAvLyAgICAgICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgLy8gICAgICAgICAgICAgc2V0bG9nczIobG9nczJtYXApXG4gICAgLy8gICAgICAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MyKGZhbHNlKVxuICAgIC8vICAgICAgICAgfSlcbiAgICAvLyB9KVxuICB9LCBbYWN0aXZpdHl0cmlnZ2VyXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG9cIj5BY3Rpdml0eTwvaDE+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy02LzEyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+SGFyaSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IGRheWxvZ3MubGVuZ3RoIDwgMSA/IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgICAge2RheWxvZ3MubWFwKChkb2Nsb2csIGlkeGxvZykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lLkl0ZW0gbGFiZWw9e2RvY2xvZy5kYXRlfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Nsb2cuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgT2xlaCB7ZG9jbG9nLmNhdXNlcl9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5NaW5nZ3UgSW5pPC9oMT5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICkgOiB3ZWVrbG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7d2Vla2xvZ3MubWFwKChkb2Nsb2csIGlkeGxvZykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lLkl0ZW0gbGFiZWw9e2RvY2xvZy5kYXRlfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Nsb2cuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgT2xlaCB7ZG9jbG9nLmNhdXNlcl9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBMYWx1PC9oMT5cbiAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiBtb3JlbG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICB7bW9yZWxvZ3MubWFwKChkb2Nsb2csIGlkeGxvZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWJhc2UgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTEgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTEgdGV4dC1zbVwiPk5vdGVzOiB7ZG9jbG9nLm5vdGVzfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5jb25zdCBJdGVtRGV0YWlsID0gKHsgaW5pdFByb3BzLCBkYXRhUHJvZmlsZSwgc2lkZW1lbnUsIGl0ZW1pZCB9KSA9PiB7XG4gIC8vMS4gSW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICB2YXIgYWN0aXZlVGFiID0gXCJvdmVydmlld1wiO1xuICBjb25zdCB7IGFjdGl2ZSB9ID0gcnQucXVlcnk7XG4gIGlmIChhY3RpdmUpIHtcbiAgICBhY3RpdmVUYWIgPSBhY3RpdmU7XG4gIH1cbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDIsIDIpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIkRldGFpbCBJdGVtXCI7XG4gIGNvbnN0IHsgVGFiUGFuZSB9ID0gVGFicztcblxuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFttYWluZGF0YSwgc2V0bWFpbmRhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIG1vZGVsX2lkOiBcIlwiLFxuICAgIHZlbmRvcl9pZDogXCJcIixcbiAgICBpbnZlbnRvcnlfbmFtZTogXCJcIixcbiAgICBzdGF0dXNfY29uZGl0aW9uOiBcIlwiLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBsb2NhdGlvbjogXCJcIixcbiAgICBpc19leGlzdDogXCJcIixcbiAgICBkZXNrcmlwc2k6IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgIG1pZ19pZDogXCJcIixcbiAgICBzZXJpYWxfbnVtYmVyOiBcIlwiLFxuICAgIGNyZWF0ZWRfYXQ6IFwiXCIsXG4gICAgdXBkYXRlZF9hdDogXCJcIixcbiAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgIGFzc2V0X25hbWU6IFwiXCIsXG4gICAgbW9kZWxfbmFtZTogXCJcIixcbiAgICBsb2NhdGlvbl9uYW1lOiBcIlwiLFxuICAgIG1vZGVsX2ludmVudG9yeToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgICAgYXNzZXRfaWQ6IG51bGwsXG4gICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgYXNzZXQ6IHtcbiAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbG9jYXRpb25faW52ZW50b3J5OiB7XG4gICAgICBjb21wYW55X2lkOiBudWxsLFxuICAgICAgY29tcGFueV9uYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgYWRkaXRpb25hbF9hdHRyaWJ1dGVzOiBbXSxcbiAgICBpbnZlbnRvcnlfcGFydHM6IFtdLFxuICAgIGFzc29jaWF0aW9uczogW10sXG4gICAgcXVhbnRpdGllczogW10sXG4gIH0pO1xuICBjb25zdCBbaW52cmVsYXRpb25zLCBzZXRpbnZyZWxhdGlvbnNdID0gdXNlU3RhdGUoe1xuICAgIG1vZGVsczogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBhc3NldHM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwiXCIsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICB9LFxuICAgIF0sXG4gICAgbWFudWZhY3R1cmVyczogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBzdGF0dXNfY29uZGl0aW9uOiBbXSxcbiAgICBzdGF0dXNfdXNhZ2U6IFtdLFxuICAgIHZlbmRvcnM6IFtdLFxuICAgIGNvbXBhbmllczogW10sXG4gICAgdHJlZV9jb21wYW5pZXM6IHtcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW3JlbHNoaXAsIHNldHJlbHNoaXBdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbWFudWYsIHNldG1hbnVmXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmVuZG9yLCBzZXR2ZW5kb3JdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtwcmFsb2FkaW5nLCBzZXRwcmFsb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbcHJhbG9hZGluZzIsIHNldHByYWxvYWRpbmcyXSA9IHVzZVN0YXRlKHRydWUpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL25vdGVzXG4gIGNvbnN0IFtub3Rlcywgc2V0bm90ZXNdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbG5vdGVzLCBzZXRtb2RhbG5vdGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdub3Rlcywgc2V0bG9hZGluZ25vdGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9rb25kaXNpXG4gIGNvbnN0IFtrb25kaXNpLCBzZXRrb25kaXNpXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbm90ZWtvbmRpc2ksIHNldG5vdGVrb25kaXNpXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbW9kYWxrb25kaXNpLCBzZXRtb2RhbGtvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzcGxheWtvbmRpc2ksIHNldGRpc3BsYXlrb25kaXNpXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ2tvbmRpc2ksIHNldGxvYWRpbmdrb25kaXNpXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9zdGF0dXMgcGVtYWthaWFuXG4gIGNvbnN0IFtjaGFuZ2V1c2FnZSwgc2V0Y2hhbmdldXNhZ2VdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICBzdGF0dXNfdXNhZ2U6IFwiXCIsXG4gICAgbm90ZXM6IFwiXCIsXG4gICAgcmVsYXRpb25zaGlwX3R5cGVfaWQ6IFwiXCIsXG4gICAgY29ubmVjdGVkX2lkOiBcIlwiLFxuICAgIGRldGFpbF9jb25uZWN0ZWRfaWQ6IG51bGwsXG4gIH0pO1xuICBjb25zdCBbZGlzYWJsZWR1c2FnZSwgc2V0ZGlzYWJsZWR1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW21vZGFsdXNhZ2UsIHNldG1vZGFsdXNhZ2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzcGxheXVzYWdlLCBzZXRkaXNwbGF5dXNhZ2VdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlLCBzZXRsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ3VzYWdlLCBzZXRsb2FkaW5ndXNhZ2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvLyBjb25zdCBbYWdlbnRzLCBzZXRhZ2VudHNdID0gdXNlU3RhdGUoW10pXG4gIC8vIGNvbnN0IFtyZXF1ZXN0ZXJzLCBzZXRyZXF1ZXN0ZXJzXSA9IHVzZVN0YXRlKFtdKVxuICBjb25zdCBbZGV0YWlsbGlzdCwgc2V0ZGV0YWlsbGlzdF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbHMsIHNldG1vZGVsc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtzdWJsb2NhdGlvbnMsIHNldHN1YmxvY2F0aW9uc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtsb2NhdGlvbnNkaXNwbGF5LCBzZXRsb2NhdGlvbnNkaXNwbGF5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9udHJpZ2dlciwgc2V0c3VibG9jYXRpb250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FjdGl2aXR5dHJpZ2dlciwgc2V0YWN0aXZpdHl0cmlnZ2VyXSA9IHVzZVN0YXRlKDApO1xuXG4gIC8vaGVscGVyXG5cbiAgLy9oYW5kbGVyXG4gIGNvbnN0IGhhbmRsZURlbGV0ZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ2RlbGV0ZSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlSW52ZW50b3J5YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3RlczogXCJcIixcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBiZXJoYXNpbCBkaWhhcHVzXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGRlbGV0ZShmYWxzZSk7XG4gICAgICAgICAgcnQucHVzaChgL2l0ZW1zYCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlTm90ZXNJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdub3Rlcyh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vYWRkSW52ZW50b3J5Tm90ZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZXMsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdub3RlcyhmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm90ZXMgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsbm90ZXMoZmFsc2UpO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9P2FjdGl2ZT1hY3Rpdml0eWA7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlS29uZGlzaUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ2tvbmRpc2kodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2NoYW5nZVN0YXR1c0NvbmRpdGlvbmAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgbm90ZXM6IG5vdGVrb25kaXNpLFxuICAgICAgICBzdGF0dXNfY29uZGl0aW9uOiBrb25kaXNpLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5na29uZGlzaShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsa29uZGlzaShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiU3RhdHVzIEtvbmRpc2kgYmVyaGFzaWwgZGl1YmFoXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvaXRlbXMvZGV0YWlsLyR7aXRlbWlkfWA7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlVXNhZ2VJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmd1c2FnZSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzVXNhZ2VgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2hhbmdldXNhZ2UpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ3VzYWdlKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWx1c2FnZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiU3RhdHVzIFBlbWFrYWlhbiBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICBpZiAocHJvcCA9PT0gXCJhZGRpdGlvbmFsX2F0dHJpYnV0ZXNcIikge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnBhcnNlKGRvYy52YWx1ZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRbcHJvcF0gPSByZXMyLmRhdGFbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldG1haW5kYXRhKHQpO1xuICAgICAgICBzZXRwcmFsb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlczMpID0+IHtcbiAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeVJlbGF0aW9uc2AsIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgIHNldGludnJlbGF0aW9ucyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgdmFyIGRlbF9tYW51ZiA9IG51bGw7XG4gICAgICAgICAgICByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gMCB8fCByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICA/IChkZWxfbWFudWYgPSBudWxsKVxuICAgICAgICAgICAgICA6IChkZWxfbWFudWYgPSByZXMyLmRhdGEubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgKVswXS5kZWxldGVkX2F0KTtcbiAgICAgICAgICAgIHNldG1hbnVmKHtcbiAgICAgICAgICAgICAgbmFtZTpcbiAgICAgICAgICAgICAgICByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gbnVsbCB8fCByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gMFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiByZXMyLmRhdGEubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgICApWzBdLm5hbWUsXG4gICAgICAgICAgICAgIGlzbnVsbDogZGVsX21hbnVmICE9PSBudWxsID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMzLnZlbmRvcl9pZCA9PT0gbnVsbCB8fCByZXMzLnZlbmRvcl9pZCA9PT0gMFxuICAgICAgICAgICAgICA/IHNldHZlbmRvcihcIi1cIilcbiAgICAgICAgICAgICAgOiBzZXR2ZW5kb3IoXG4gICAgICAgICAgICAgICAgICByZXMyLmRhdGEudmVuZG9ycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0/Lm5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgc2V0cHJhbG9hZGluZzIoZmFsc2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0RmlsdGVyTW9kZWxzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRtb2RlbHMocmVzMi5kYXRhKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkICE9PSBcIlwiKSB7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldENoYW5nZVN0YXR1c1VzYWdlRGV0YWlsTGlzdD9pZD0ke2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICA/IHNldGRldGFpbGxpc3QoW3JlczIuZGF0YV0pXG4gICAgICAgICAgICA6IHNldGRldGFpbGxpc3QocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtjaGFuZ2V1c2FnZV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2NhdGlvbnRyaWdnZXIgIT09IC0xKSB7XG4gICAgICBzZXRsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlKHRydWUpO1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtjaGFuZ2V1c2FnZS5jb25uZWN0ZWRfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRzdWJsb2NhdGlvbnMocmVzMi5kYXRhLmNoaWxkcmVuKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbc3VibG9jYXRpb250cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0cmVsc2hpcChyZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSkpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0XG4gICAgICBzdD17c3R9XG4gICAgICBzaWRlbWVudT17c2lkZW1lbnV9XG4gICAgICB0b2s9e2luaXRQcm9wc31cbiAgICAgIHBhdGhBcnI9e3BhdGhBcnJ9XG4gICAgICBkYXRhUHJvZmlsZT17ZGF0YVByb2ZpbGV9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTRcIlxuICAgICAgICBpZD1cImNyZWF0ZUFzc2V0c1dyYXBwZXJcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItOFwiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHB5LTUgcHgtNCBib3JkZXItdCBib3JkZXItYiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1ncmF5LTQwMCBtYi0wXCI+SXRlbTo8L3A+XG4gICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBweS0yIHRleHQtMnhsIG1iLTAgbXItMjBcIj5cbiAgICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9XG4gICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtci03IHAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTFcIj5TdGF0dXMgUGVtYWthaWFuOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheXVzYWdlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBQZW1ha2FpYW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5kYXRhLnN0YXR1c191c2FnZSA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5kYXRhLnN0YXR1c191c2FnZSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c191c2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfdXNhZ2U6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzcGxheXVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gVXNlZDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkluIFN0b2NrPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+UmVwbGFjZW1lbnQ8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPktvbmRpc2k6PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5a29uZGlzaSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMHJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBTdGF0dXMgS29uZGlzaVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5kYXRhLnN0YXR1c19jb25kaXRpb24gPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGtvbmRpc2kodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsa29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsxfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMSBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctZ3JlZW4tNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIGZvbnQtc2VtaWJvbGRcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMSBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctcmVkLTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIGZvbnQtc2VtaWJvbGRcIj5CYWQ8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3Rlcyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFRhbWJhaCBOb3Rlc1xuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkYW5nZXJcIlxuICAgICAgICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxkZWxldGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEhhcHVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgaGlkZGVuIG1kOmJsb2NrXCI+XG4gICAgICAgICAgICA8VGFic1xuICAgICAgICAgICAgICB0YWJQb3NpdGlvbj17YGxlZnRgfVxuICAgICAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJ9XG4gICAgICAgICAgICAgIG9uVGFiQ2xpY2s9eyhrZXksIGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcImFjdGl2aXR5XCIpIHtcbiAgICAgICAgICAgICAgICAgIHNldGFjdGl2aXR5dHJpZ2dlcigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiT3ZlcnZpZXdcIiBrZXk9e2BvdmVydmlld2B9PlxuICAgICAgICAgICAgICAgIDxPdmVydmlld1xuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIG1hbnVmPXttYW51Zn1cbiAgICAgICAgICAgICAgICAgIHZlbmRvcj17dmVuZG9yfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIktvbmZpZ3VyYXNpIFBhcnRcIiBrZXk9e2Brb25maWd1cmFzaVBhcnRgfT5cbiAgICAgICAgICAgICAgICA8S29uZmlndXJhc2lQYXJ0XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nMj17cHJhbG9hZGluZzJ9XG4gICAgICAgICAgICAgICAgICBtb2RlbHM9e21vZGVsc31cbiAgICAgICAgICAgICAgICAgIHNldG1vZGVscz17c2V0bW9kZWxzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiUmVsYXRpb25zaGlwXCIga2V5PXtgcmVsYXRpb25zaGlwYH0+XG4gICAgICAgICAgICAgICAgPFJlbGF0aW9uc2hpcFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFzc29jaWF0aW9uXCIga2V5PXtgYXNzb2NpYXRpb25gfT5cbiAgICAgICAgICAgICAgICA8QXNzb2NpYXRpb25cbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQWN0aXZpdHlcIiBrZXk9e2BhY3Rpdml0eWB9PlxuICAgICAgICAgICAgICAgIDxBY2l0aXZ0eVxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgYWN0aXZpdHl0cmlnZ2VyPXthY3Rpdml0eXRyaWdnZXJ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgPC9UYWJzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGJsb2NrIG1kOmhpZGRlblwiPlxuICAgICAgICAgICAgPFRhYnMgdGFiUG9zaXRpb249e2B0b3BgfSBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJ9PlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFViYWggU3RhdHVzIFBlbWFrYWlhbiB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGlzcGxheXVzYWdlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHVzYWdlfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVXNhZ2VJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ3VzYWdlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsdXNhZ2V9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWx1c2FnZShmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzcGxheXVzYWdlKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs3NjB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIFBlbWFrYWlhbiA8c3BhbiBjbGFzc05hbWU9XCJ1c2FnZW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2NoYW5nZXVzYWdlLnN0YXR1c191c2FnZX0+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsxfT5JbiBVc2VkPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+SW4gU3RvY2s8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5SZXBsYWNlbWVudDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVzYWdlbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlID09PSAxID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgICAgICBEaWd1bmFrYW4gT2xlaCA8c3BhbiBjbGFzc05hbWU9XCJieW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRsb2NhdGlvbnNkaXNwbGF5KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0yfT5SZXF1ZXN0ZXI8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTN9PkNvbXBhbnk8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTMgbWwtNVwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIE5hbWEge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMSAmJiBcIkFnZW50XCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMiAmJiBcIlJlcXVlc3RlclwifXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgIHtjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTMgJiYgXCJDb21wYW55XCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibmFtYWJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIHtjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTMgPyAoXG4gICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17W2ludnJlbGF0aW9ucy50cmVlX2NvbXBhbmllc119XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kZWRLZXlzPXtbMV19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNldHN1YmxvY2F0aW9udHJpZ2dlcigocHJldikgPT4gcHJldiArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNldGxvY2F0aW9uc2Rpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICAgIGRldGFpbGxpc3QubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMiAmJlxuICAgICAgICAgICAgICAgICAgICAgIGRldGFpbGxpc3QubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IDMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzLm1hcCgoZG9jLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hYnltb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtjaGFuZ2V1c2FnZS5jb25uZWN0ZWRfaWQgPT09IC0zIHx8IGxvY2F0aW9uc2Rpc3BsYXkgPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1sLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5OYW1hIExva2FzaTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2V9XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NhdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbF9jb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFViYWggU3RhdHVzIEtvbmRpc2kge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGlzcGxheWtvbmRpc2kodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlS29uZGlzaUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5na29uZGlzaX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGtvbmRpc2l9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NjAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFN0YXR1cyBLb25kaXNpIDxzcGFuIGNsYXNzTmFtZT1cImtvbmRpc2ltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxTZWxlY3QgZGlzYWJsZWQgZGVmYXVsdFZhbHVlPXtrb25kaXNpfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Hb29kPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+R3JleTwvcD5cbiAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAua29uZGlzaW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0bm90ZWtvbmRpc2koZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIE5vdGVzIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsbm90ZXMoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtub3RlcyA9PT0gXCJcIn1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZU5vdGVzSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdub3Rlc31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbG5vdGVzfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsbm90ZXMoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIHNldG5vdGVzKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj5cbiAgICAgICAgICAgIEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBpdGVtIFwie21haW5kYXRhLmludmVudG9yeV9uYW1lfSAte1wiIFwifVxuICAgICAgICAgICAge21haW5kYXRhLm1pZ19pZH1cIj9cbiAgICAgICAgICA8L2gxPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcyMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGRcIj5cbiAgICAgICAgICAgICAgSXRlbSBpbmkgbWVtaWxpa2kgSXRlbSBQYXJ0IHNlYmFnYWkgYmVyaWt1dCA6XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj4tPC9wPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICB7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzLm1hcCgoZG9jZW1wdHksIGlkeGVtcHR5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxwIGtleT17aWR4ZW1wdHl9PlxuICAgICAgICAgICAgICAgICAgICAgIC0gPHN0cm9uZz57ZG9jZW1wdHkuaW52ZW50b3J5X25hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBzZWRhbmcgbWVtaWxpa2kgaHVidW5nYW4gZGVuZ2FuIGl0ZW0gYmVyaWt1dDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHNcIj5cbiAgICAgICAgICAgICAge3JlbHNoaXAubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj4tPC9wPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIHJlbHNoaXAubWFwKChkb2NyZWwsIGlkeHJlbCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGxpIGtleT17aWR4cmVsfT5cbiAgICAgICAgICAgICAgICAgICAgLXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jcmVsLnR5cGV9IC0ge2RvY3JlbC5jb25uZWN0ZWRfZGV0YWlsX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtcmVkLTUwMFwiPlxuICAgICAgICAgICAgICBEZW5nYW4gbWVuZ2hhcHVzIGl0ZW0gaW5pIGFrYW4gbWVuZ2hpbGFuZ2thbiBzZWx1cnVoIGh1YnVuZ2FuXG4gICAgICAgICAgICAgIGRlbmdhbiBpdGVtIGRpYXRhcyFcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aHIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGNvbnN0IGl0ZW1pZCA9IHBhcmFtcy5pdGVtSWQ7XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXNHUCA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbkdQID0gYXdhaXQgcmVzb3VyY2VzR1AuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb25HUDtcblxuICAvLyBpZiAoIVsxMDcsIDEwOCwgMTA5LCAxMTAsIDExMSwgMTEyLCAxMzJdLmV2ZXJ5KChjdXJyKSA9PiBkYXRhUHJvZmlsZS5kYXRhLnJlZ2lzdGVyZWRfZmVhdHVyZS5pbmNsdWRlcyhjdXJyKSkpIHtcbiAgLy8gICAgIHJlcy53cml0ZUhlYWQoMzAyLCB7IExvY2F0aW9uOiAnL2Rhc2hib2FyZC9hZG1pbicgfSlcbiAgLy8gICAgIHJlcy5lbmQoKVxuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCIzXCIsXG4gICAgICBpdGVtaWQsXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSXRlbURldGFpbDtcbiJdfQ== */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n            }, void 0, false, void 0, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3319,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-1874088803\" + \" \" + \"flex flex-col mb-3 ml-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"jsx-1874088803\" + \" \" + \"mb-0\",\n              children: [\"Nama \", changeusage.relationship_type_id === -1 && \"Agent\", \" \", changeusage.relationship_type_id === -2 && \"Requester\", \" \", changeusage.relationship_type_id === -3 && \"Company\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"jsx-1874088803\" + \" \" + \"namabymodal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3355,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3351,\n              columnNumber: 17\n            }, _this), changeusage.relationship_type_id === -3 ? /*#__PURE__*/_jsxDEV(_TreeSelect, {\n              treeData: [invrelations.tree_companies],\n              treeDefaultExpandedKeys: [1],\n              onChange: function onChange(value) {\n                setchangeusage(_objectSpread(_objectSpread({}, changeusage), {}, {\n                  connected_id: value\n                }));\n                changeusage.relationship_type_id === -3 ? setsublocationtrigger(function (prev) {\n                  return prev + 1;\n                }) : null;\n                changeusage.relationship_type_id === -3 ? setlocationsdisplay(true) : null;\n                setdisabledusage(false);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3358,\n              columnNumber: 19\n            }, _this) : /*#__PURE__*/_jsxDEV(_Select, {\n              value: changeusage.connected_id,\n              onChange: function onChange(value) {\n                setchangeusage(_objectSpread(_objectSpread({}, changeusage), {}, {\n                  connected_id: value\n                }));\n                setdisabledusage(false);\n              },\n              children: [changeusage.relationship_type_id === -1 && detaillist.map(function (doc, idx) {\n                return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3388,\n                  columnNumber: 25\n                }, _this);\n              }), changeusage.relationship_type_id === -2 && detaillist.map(function (doc, idx) {\n                return /*#__PURE__*/_jsxDEV(_Select.Option, {\n                  value: doc.id,\n                  children: doc.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3392,\n                  columnNumber: 25\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3376,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n              id: \"1874088803\",\n              children: \".namabymodal.jsx-1874088803::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwMEdtQixBQUc2RCxZQUNGLFVBQ2QiLCJmaWxlIjoiL2hvbWUva2pva2tlbi9taWcvY29kZS9mcm9udGVuZC9pbXMtZmUtc3NoLWRldi9zcmMvcGFnZXMvaXRlbXMvZGV0YWlsL1tpdGVtSWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2xvc2VDaXJjbGVPdXRsaW5lZCxcbiAgRGVsZXRlT3V0bGluZWQsXG4gIERvd25PdXRsaW5lZCxcbiAgRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZCxcbiAgU2VhcmNoT3V0bGluZWQsXG4gIFVwT3V0bGluZWQsXG59IGZyb20gXCJAYW50LWRlc2lnbi9pY29uc1wiO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBFbXB0eSxcbiAgSW5wdXQsXG4gIE1vZGFsLFxuICBQb3BvdmVyLFxuICBTZWxlY3QsXG4gIFNwaW4sXG4gIFRhYmxlLFxuICBUYWJzLFxuICBUaW1lbGluZSxcbiAgVG9vbHRpcCxcbiAgVHJlZVNlbGVjdCxcbiAgbm90aWZpY2F0aW9uLFxufSBmcm9tIFwiYW50ZFwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwibW9tZW50XCI7XG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBTdGlja3kgZnJvbSBcIndpbC1yZWFjdC1zdGlja3lcIjtcblxuaW1wb3J0IExheW91dCBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9sYXlvdXQtZGFzaGJvYXJkMlwiO1xuaW1wb3J0IHN0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQubW9kdWxlLmNzc1wiO1xuaW1wb3J0IGh0dHBjb29raWUgZnJvbSBcImNvb2tpZVwiO1xuXG5jb25zdCBPdmVydmlldyA9ICh7XG4gIGl0ZW1pZCxcbiAgaW5pdFByb3BzLFxuICBtYWluZGF0YSxcbiAgbWFudWYsXG4gIHZlbmRvcixcbiAgcHJhbG9hZGluZyxcbn0pID0+IHtcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgLy91c2VTdGF0ZVxuICBjb25zdCBbaW52cmVsYXRpb25zMiwgc2V0aW52cmVsYXRpb25zMl0gPSB1c2VTdGF0ZSh7fSk7XG5cbiAgLy9oZWxwZXJcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPk92ZXJ2aWV3PC9oMT5cbiAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHJ0LnB1c2goYC9pdGVtcy91cGRhdGUvJHtpdGVtaWR9YCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFViYWhcbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgIDxTcGluIC8+XG4gICAgICApIDogKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTggbXgtNSBwLTUgdy05LzEyIGJvcmRlciBzaGFkb3ctbWQgcm91bmRlZC1tZCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPk5hbWEgSXRlbTo8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9IC0ge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPk1vZGVsOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmRlbGV0ZWRfYXQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vZGVsIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTW9kZWwhXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fVxuICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5uYW1lfTwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5Bc3NldCBUeXBlOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmRlbGV0ZWRfYXQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQubmFtZX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQXNzZXQgVHlwZSB0ZWxhaCBkaWhhcHVzLCBzZWdlcmEgbGFrdWthbiBwZW5ndWJhaGFuIEFzc2V0IFR5cGUhXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogYGJyb3duYCB9fVxuICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TUlHIElEOjwvaDE+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubWlnX2lkfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlNlcmlhbCBOdW1iZXI6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7bWFpbmRhdGEuc2VyaWFsX251bWJlciA9PT0gXCJcIiB8fCBtYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc2VyaWFsX251bWJlcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPk1hbnVmYWN0dXJlcjo8L2gxPlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyBpbnZyZWxhdGlvbnMubWFudWZhY3R1cmVycy5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gbWFpbmRhdGEubWFudWZhY3R1cmVyX2lkKVswXS5kZWxldGVkX2F0ICE9PSBudWxsXG4gICAgICAgICAgICAgIG1hbnVmLmlzbnVsbCA9PT0gZmFsc2UgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBtci0xXCI+e21hbnVmLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIk1hbnVmYWN0dXJlciB0ZWxhaCBkaWhhcHVzLCBzZWdlcmEgbGFrdWthbiBwZW5ndWJhaGFuIE1hbnVmYWN0dXJlciFcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICAgID48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21hbnVmLm5hbWV9PC9wPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5WZW5kb3I6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7bWFpbmRhdGEudmVuZG9yX2lkID09PSBudWxsID8gXCItXCIgOiB2ZW5kb3J9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5Mb2NhdGlvbjo8L2gxPlxuICAgICAgICAgICAge21haW5kYXRhLmlzX2NvbnN1bWFibGUgPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgIG1haW5kYXRhLnF1YW50aXRpZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2lkeCArIDF9LiB7ZG9jLm5hbWV9IC0ge2RvYy5xdWFudGl0eX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICkpXG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubG9jYXRpb24gPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gXCItXCJcbiAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEubG9jYXRpb25faW52ZW50b3J5Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5EZXNrcmlwc2k6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7bWFpbmRhdGEuZGVza3JpcHNpID09PSBcIlwiIHx8IG1haW5kYXRhLmRlc2tyaXBzaSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgID8gXCItXCJcbiAgICAgICAgICAgICAgICA6IG1haW5kYXRhLmRlc2tyaXBzaX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICB7bWFpbmRhdGEuYWRkaXRpb25hbF9hdHRyaWJ1dGVzLm1hcCgoZG9jY29sdW1ucywgaWR4Y29sdW1ucykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17aWR4Y29sdW1uc31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sIG1iLTUgJHtcbiAgICAgICAgICAgICAgICAgIGlkeGNvbHVtbnMgPT09IDAgPyBgbXQtNWAgOiBgYFxuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMubmFtZX06XG4gICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkcm9wZG93blwiIHx8XG4gICAgICAgICAgICAgICAgICBkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiIHx8XG4gICAgICAgICAgICAgICAgICBkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZS5vcHNpW2RvY2NvbHVtbnMudmFsdWUuZGVmYXVsdF19PC8+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy52YWx1ZS5vcHNpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoXywgaWR4ZmlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0LmluY2x1ZGVzKGlkeGZpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZGF0ZVwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHttb21lbnQoZG9jY29sdW1ucy52YWx1ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDw+e2RvY2NvbHVtbnMudmFsdWV9PC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgS29uZmlndXJhc2lQYXJ0ID0gKHtcbiAgaW5pdFByb3BzLFxuICBpdGVtaWQsXG4gIGludnJlbGF0aW9ucyxcbiAgbWFpbmRhdGEsXG4gIHByYWxvYWRpbmcyLFxuICBtb2RlbHMsXG4gIHNldG1vZGVscyxcbn0pID0+IHtcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcblxuICAvL3VzZXN0YXRlXG4gIGNvbnN0IFttYWlucGFydGRhdGEsIHNldG1haW5wYXJ0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFthc3NldGRhdGEsIHNldGFzc2V0ZGF0YV0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5ncGFydCwgc2V0cHJhbG9hZGluZ3BhcnRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtldmVudHMsIHNldGV2ZW50c10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0YWJsZSwgc2V0ZGF0YXRhYmxlXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2RhdGF0YWJsZTIsIHNldGRhdGF0YWJsZTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMywgc2V0ZGF0YXRhYmxlM10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtuYW1hc2VhcmNoYWN0LCBzZXRuYW1hc2VhcmNoYWN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25hbWF2YWx1ZSwgc2V0bmFtYXZhbHVlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbYXNzZXR0eXBlZmlsdGVyYWN0LCBzZXRhc3NldHR5cGVmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYXNzZXR0eXBldmFsdWUsIHNldGFzc2V0dHlwZXZhbHVlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbW9kZWxmaWx0ZXJhY3QsIHNldG1vZGVsZmlsdGVyYWN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW21vZGVsdmFsdWUsIHNldG1vZGVsdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIC8vY2hhbmdlZCBkYW4gcmVtb3ZlZFxuICBjb25zdCBbZGF0YXJlcGxhY2VtZW50cywgc2V0ZGF0YXJlcGxhY2VtZW50c10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtwb3BvdmVyLCBzZXRwb3BvdmVyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9jaGFuZ2VkXG4gIGNvbnN0IFtkYXRhY2hhbmdlZCwgc2V0ZGF0YWNoYW5nZWRdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBudWxsLFxuICAgIG1vZGVsX2lkOiBudWxsLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIG1pZ19pZDogXCJcIixcbiAgICBzdGF0dXNfY29uZGl0aW9uOiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBzdGF0dXNfdXNhZ2U6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogXCJcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIGNvbnN0IFtkYXRhQXBpY2hhbmdlZCwgc2V0ZGF0YUFwaWNoYW5nZWRdID0gdXNlU3RhdGUoe1xuICAgIGlkOiAwLFxuICAgIHJlcGxhY2VtZW50X2lkOiAwLFxuICAgIG5vdGVzOiBcIlwiLFxuICB9KTtcbiAgY29uc3QgW21vZGFsY2hhbmdlZCwgc2V0bW9kYWxjaGFuZ2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Rpc2FibGVkY2hhbmdlZCwgc2V0ZGlzYWJsZWRjaGFuZ2VkXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ2NoYW5nZWQsIHNldGxvYWRpbmdjaGFuZ2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3RyaWdnZXJjaGFuZ2VkLCBzZXR0cmlnZ2VyY2hhbmdlZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIC8vcmVtb3ZlZFxuICBjb25zdCBbZGF0YXJlbW92ZWQsIHNldGRhdGFyZW1vdmVkXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RhdGFBcGlyZW1vdmVkLCBzZXRkYXRhQXBpcmVtb3ZlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgaW52ZW50b3J5X3BhcnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxyZW1vdmVkLCBzZXRtb2RhbHJlbW92ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRyZW1vdmVkLCBzZXRkaXNhYmxlZHJlbW92ZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5ncmVtb3ZlZCwgc2V0bG9hZGluZ3JlbW92ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZmV0Y2hpbmdtb2RlbCwgc2V0ZmV0Y2hpbmdtb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtiYWNrdXBtb2RlbHMsIHNldGJhY2t1cG1vZGVsc10gPSB1c2VTdGF0ZShtb2RlbHMpO1xuXG4gIGNvbnN0IGNvbHVtbnMgPSBbXG4gICAgLy8ge1xuICAgIC8vICAgICB0aXRsZTogJ05hbWEgSXRlbScsXG4gICAgLy8gICAgIGRhdGFJbmRleDogJ2ludmVudG9yeV9uYW1lJyxcbiAgICAvLyAgICAga2V5OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiTUlHIElEXCIsXG4gICAgICBkYXRhSW5kZXg6IFwibWlnX2lkXCIsXG4gICAgICBrZXk6IFwibWlnX2lkXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJTZXJpYWwgTnVtYmVyXCIsXG4gICAgICBkYXRhSW5kZXg6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAga2V5OiBcInNlcmlhbF9udW1iZXJcIixcbiAgICAgIHJlbmRlcjogKHRleHQsIHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgICAgPD57cmVjb3JkLnNlcmlhbF9udW1iZXIgPT09IG51bGwgPyBcIi1cIiA6IHJlY29yZC5zZXJpYWxfbnVtYmVyfTwvPlxuICAgICAgICAgICksXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiTW9kZWxcIixcbiAgICAgIGRhdGFJbmRleDogXCJtb2RlbF9uYW1lXCIsXG4gICAgICBrZXk6IFwibW9kZWxfbmFtZVwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiA8PntyZWNvcmQubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC8+LFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIkFzc2V0IFR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJhc3NldF9uYW1lXCIsXG4gICAgICBrZXk6IFwiYXNzZXRfbmFtZVwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiA8PntyZWNvcmQubW9kZWxfaW52ZW50b3J5LmFzc2V0LmFzc2V0X25hbWV9PC8+LFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXCIsXG4gICAgICBkYXRhSW5kZXg6IFwiYWN0aW9uc3NcIixcbiAgICAgIHJlbmRlcjogKHRleHQsIHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2V2ZW50cyA9PT0gcmVjb3JkLmlkID8gKFxuICAgICAgICAgICAgICAgIDxQb3BvdmVyXG4gICAgICAgICAgICAgICAgICB2aXNpYmxlPXtwb3BvdmVyfVxuICAgICAgICAgICAgICAgICAgb25WaXNpYmxlQ2hhbmdlPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldHBvcG92ZXIodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogYDBweGAsIG1hcmdpbjogYDBweGAgfX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbUxlZnRcIlxuICAgICAgICAgICAgICAgICAgdHJpZ2dlcj1cImNsaWNrXCJcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDbG9zZUNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjFyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YXJlbW92ZWQocmVjb3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaXJlbW92ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlyZW1vdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtYWlucGFydGRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52ZW50b3J5X3BhcnRfaWQ6IHJlY29yZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFscmVtb3ZlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEtlbHVhcmthbiBQYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhY2hhbmdlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHBvcG92ZXIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0cmlnZ2VyY2hhbmdlZCgocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBHYW50aWthbiBQYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS0zMDAgdy1mdWxsIHAtNFwiPktlbHVhcmthbiBQYXJ0PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS0zMDAgdy1mdWxsIHAtNFwiPkdhbnRpa2FuIFBhcnQ8L2Rpdj4gKi99XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRwb3BvdmVyKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogYHJlZGAsIGZvbnRTaXplOiBgMS41cmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICksXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gIF07XG5cbiAgLy9oZWxwZXJcbiAgLy8xIG55YSBsYWdpIGFkYSBkaSB1c2VFZmZlY3RcbiAgY29uc3QgcmVjdXJzaXZlRmxhdHRlbkFyciA9IChkYXRhYXNzZXRzKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZGF0YWFzc2V0cy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgIHJlc3VsdC5wdXNoKGl0ZW0uaWQpO1xuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgcmVzdWx0LnB1c2goLi4ucmVjdXJzaXZlRmxhdHRlbkFycihpdGVtLmNoaWxkcmVuKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgZnVuY3Rpb24gcmVjdXJzaXZlTW9kaWZEYXRhKGRhdGFhKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhYS5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0YWFbaV1bXCJrZXlcIl0gPSBkYXRhYVtpXS5pZDtcbiAgICAgIGRhdGFhW2ldW1widmFsdWVcIl0gPSBkYXRhYVtpXS5pZDtcbiAgICAgIGRhdGFhW2ldW1xuICAgICAgICBcInRpdGxlXCJcbiAgICAgIF0gPSBgJHtkYXRhYVtpXS5taWdfaWR9IC0gJHtkYXRhYVtpXS5tb2RlbF9pbnZlbnRvcnk/Lm5hbWV9YDtcbiAgICAgIGRhdGFhW2ldW1wiY2hpbGRyZW5cIl0gPSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBkZWxldGUgZGF0YWFbaV0uaW52ZW50b3J5X3JlcGxhY2VtZW50X3BhcnRzO1xuICAgICAgaWYgKGRhdGFhW2ldLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVjdXJzaXZlTW9kaWZEYXRhKGRhdGFhW2ldLmNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFhO1xuICB9XG5cbiAgLy9oYW5kbGVyXG4gIGNvbnN0IGFzc2V0UGFydCA9IFtdO1xuICBjb25zdCByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0ID0gKGRvYywgYXNzZXRpZCkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuaWQgPT09IE51bWJlcihhc3NldGlkKSkge1xuICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICBhc3NldFBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRvY1tpXS5jaGlsZHJlbiwgYXNzZXRpZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIGNvbnN0IG1vZGVsUGFydCA9IFtdO1xuICBjb25zdCByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU1vZGVsID0gKGRvYywgbW9kZWxpZCkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5tb2RlbF9pZCA9PT0gbW9kZWxpZCkge1xuICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICBtb2RlbFBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU1vZGVsKGRvY1tpXS5jaGlsZHJlbiwgbW9kZWxpZCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIGNvbnN0IG5hbWVQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTmFtZSA9IChkb2MsIG5hbWUpID0+IHtcbiAgICB2YXIgYXJyID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChkb2NbaV0uaW52ZW50b3J5X25hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG5hbWVQYXJ0LnB1c2goZG9jW2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkb2NbaV0uY2hpbGRyZW4pIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgICBjaGlsZHJlbjogcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRvY1tpXS5jaGlsZHJlbiwgbmFtZSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIC8vZGVsaXZlciBBUElcbiAgY29uc3QgaGFuZGxlUmVwbGFjZW1lbnRJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nY2hhbmdlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVwbGFjZUludmVudG9yeVBhcnRgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWNoYW5nZWQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2NoYW5nZWQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkl0ZW0gUGFydCBiZXJoYXNpbCBkaWdhbnRpXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlUmVtb3ZlSXRlbVBhcnQgPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3JlbW92ZWQodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L3JlbW92ZUludmVudG9yeVBhcnRgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaXJlbW92ZWQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ3JlbW92ZWQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wic3VjY2Vzc1wiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkl0ZW0gUGFydCBiZXJoYXNpbCBkaWtlbHVhcmthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKGZhbHNlKTtcbiAgICAgICAgICBzZXRkYXRhdHJpZ2dlcigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy9zZWFyY2ggbmFtYVxuICBjb25zdCBvbkNoYW5nZVNlYXJjaCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0bmFtYXNlYXJjaGFjdCh0cnVlKTtcbiAgICAgIHNldG5hbWF2YWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICB9O1xuICAvL3NlYXJjaCBhc3NldCB0eXBlXG4gIGNvbnN0IG9uQ2hhbmdlQXNzZXRUeXBlID0gKGlkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2V0ZGF0YXRhYmxlKGRhdGF0YWJsZTMpO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KGZhbHNlKTtcbiAgICAgIHNldG1vZGVscyhiYWNrdXBtb2RlbHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldE1vZGVscz9yb3dzPTEwMCZhc3NldF9pZD0ke2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgcmVzMi5kYXRhLmxlbmd0aCA9PT0gMCA/IHNldG1vZGVscyhbXSkgOiBzZXRtb2RlbHMocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIHNldGFzc2V0dHlwZWZpbHRlcmFjdCh0cnVlKTtcbiAgICAgIHNldGFzc2V0dHlwZXZhbHVlKGlkKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIG1vZGVsXG4gIGNvbnN0IG9uQ2hhbmdlTW9kZWwgPSAoaWRtb2RlbCkgPT4ge1xuICAgIGlmICh0eXBlb2YgaWRtb2RlbCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2V0ZGF0YXRhYmxlKGRhdGF0YWJsZTMpO1xuICAgICAgc2V0bW9kZWxmaWx0ZXJhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdCh0cnVlKTtcbiAgICAgIHNldG1vZGVsdmFsdWUoaWRtb2RlbCk7XG4gICAgfVxuICB9O1xuICAvL2ZpbmFsQ2xpY2tcbiAgY29uc3Qgb25GaW5hbENsaWNrID0gKCkgPT4ge1xuICAgIHZhciBkYXRhdGVtcCA9IGRhdGF0YWJsZTI7XG4gICAgaWYgKGFzc2V0dHlwZWZpbHRlcmFjdCkge1xuICAgICAgLy8gY29uc3QgdCA9IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZGF0YXRlbXAsIGFzc2V0dHlwZXZhbHVlKVxuICAgICAgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBhc3NldFBhcnQ7XG4gICAgfVxuICAgIGlmIChtb2RlbGZpbHRlcmFjdCkge1xuICAgICAgLy8gY29uc3QgdCA9IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU1vZGVsKGRhdGF0ZW1wLCBtb2RlbHZhbHVlKTtcbiAgICAgIGRhdGF0ZW1wID0gbW9kZWxQYXJ0O1xuICAgIH1cbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgLy8gY29uc3QgdCA9IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTmFtZShkYXRhdGVtcCwgbmFtYXZhbHVlKVxuICAgICAgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBuYW1lUGFydDtcbiAgICB9XG4gICAgc2V0ZGF0YXRhYmxlKGRhdGF0ZW1wKTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9YCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHJldHVybiByZXMyLmRhdGE7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlczMpID0+IHtcbiAgICAgICAgY29uc3QgcmVjdXJzaXZlQ2hhbmdldG9DaGlsZHJlbiA9IChyc2MpID0+IHtcbiAgICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByc2MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJzY1tpXS5rZXkgPSByc2NbaV0uaWQ7XG4gICAgICAgICAgICByc2NbaV0udmFsdWUgPSByc2NbaV0uaWQ7XG4gICAgICAgICAgICByc2NbaV0udGl0bGUgPSBgJHtyc2NbaV0ubWlnX2lkfSAtICR7cnNjW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgICAgICAgcnNjW2ldLmNoaWxkcmVuID0gcnNjW2ldLmludmVudG9yeV9wYXJ0cztcbiAgICAgICAgICAgIGRlbGV0ZSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgaWYgKHJzY1tpXS5jaGlsZHJlbi5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogcmVjdXJzaXZlQ2hhbmdldG9DaGlsZHJlbihyc2NbaV0uY2hpbGRyZW4pLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSByc2NbaV0uY2hpbGRyZW47XG4gICAgICAgICAgICAgIHJlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAuLi5yc2NbaV0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0ID0gcmVjdXJzaXZlQ2hhbmdldG9DaGlsZHJlbihyZXMzLmludmVudG9yeV9wYXJ0cyk7XG4gICAgICAgIHNldG1haW5wYXJ0ZGF0YSh7XG4gICAgICAgICAgLi4ucmVzMyxcbiAgICAgICAgICBpbnZlbnRvcnlfcGFydHM6IHQsXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXRhdGFibGUodCk7XG4gICAgICAgIHNldGRhdGF0YWJsZTIodCk7XG4gICAgICAgIHNldGRhdGF0YWJsZTModCk7XG4gICAgICAgIHNldHByYWxvYWRpbmdwYXJ0KGZhbHNlKTtcbiAgICAgIH0pO1xuICB9LCBbZGF0YXRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHJpZ2dlcmNoYW5nZWQgIT09IC0xKSB7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeVJlcGxhY2VtZW50cz9pZD0ke2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIGNvbnN0IG1hcGRhdGEgPSByZWN1cnNpdmVNb2RpZkRhdGEocmVzMi5kYXRhKTtcbiAgICAgICAgICBzZXRkYXRhcmVwbGFjZW1lbnRzKG1hcGRhdGEpO1xuICAgICAgICAgIGlmIChtYXBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3RyaWdnZXJjaGFuZ2VkXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFzc2V0c2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRhc3NldGRhdGEocmVzMi5kYXRhKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG9cIj5Lb25maWd1cmFzaSBQYXJ0PC9oMT5cbiAgICAgICAge3ByYWxvYWRpbmcyID8gbnVsbCA6IChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAvKmNvbnNvbGUubG9nKG1haW5wYXJ0ZGF0YSk7IGNvbnNvbGUubG9nKGRhdGFyZW1vdmVkKSovIHJ0LnB1c2goXG4gICAgICAgICAgICAgICAgYC9pdGVtcy9jcmVhdGVwYXJ0LyR7aXRlbWlkfT9uYW1hPSR7bWFpbnBhcnRkYXRhLm1pZ19pZH1gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFRhbWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctZnVsbCBtci0xIGdyaWQgZ3JpZC1jb2xzLTEyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTUgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMyBtci0xXCI+XG4gICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duU3R5bGU9e3sgbWF4SGVpZ2h0OiA0MDAsIG92ZXJmbG93OiBcImF1dG9cIiB9fVxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXthc3NldGRhdGF9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIEFzc2V0IFR5cGVcIlxuICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kQWxsXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VBc3NldFR5cGUoZXh0cmEuYWxsQ2hlY2tlZE5vZGVzWzBdLm5vZGUucHJvcHMuaWQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMyBtci0xXCI+XG4gICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e2ZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGx9XG4gICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIGZldGNoKFxuICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICB9L2dldEZpbHRlck1vZGVscz9uYW1lPSR7dmFsdWUgIT09IFwiXCIgPyB2YWx1ZSA6IFwiXCJ9YCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RlbHMocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBNb2RlbFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlTW9kZWwoKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlTW9kZWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bW9kZWxzLm1hcCgoZG9jbW9kZWxzLCBpZHhtb2RlbHMpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2Ntb2RlbHMuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Ntb2RlbHMubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncGFydH1cbiAgICAgICAgcGFnaW5hdGlvbj17eyBwYWdlU2l6ZTogOSB9fVxuICAgICAgICBzY3JvbGw9e3sgeDogMjAwIH19XG4gICAgICAgIGRhdGFTb3VyY2U9e2RhdGF0YWJsZX1cbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgb25Sb3c9eyhyZWNvcmQsIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKHJlY29yZC5pZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9fVxuICAgICAgPjwvVGFibGU+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFBlcmdhbnRpYW4gUGFydCBcIntkYXRhY2hhbmdlZC5pbnZlbnRvcnlfbmFtZX1cIlxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWNoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGljaGFuZ2VkLFxuICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRjaGFuZ2VkfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVwbGFjZW1lbnRJdGVtUGFydH1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjaGFuZ2VkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsY2hhbmdlZH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs3NjB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBJdGVtIFBhcnQgeWFuZyBJbmdpbiBEaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgIHRyZWVEYXRhPXtkYXRhdGFibGUzfVxuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RhdGFjaGFuZ2VkLmtleX1cbiAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBBc3NldCBUeXBlIGRhcmkgSXRlbSBQYXJ0IHlhbmcgaW5naW4gZGlnYW50aXtcIiBcIn1cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGJnLWdyYXktMTAwIGJvcmRlciBwLTIgaC04XCI+XG4gICAgICAgICAgICAgIHtkYXRhY2hhbmdlZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQubmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgTmFtYSBJdGVtIFBhcnQgUGVuZ2dhbnRpIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRpc2FibGVkY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWNoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICBpZDogZGF0YWNoYW5nZWQuaWQsXG4gICAgICAgICAgICAgICAgICByZXBsYWNlbWVudF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIHRyZWVEYXRhPXtkYXRhcmVwbGFjZW1lbnRzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhcmVwbGFjZW1lbnRzLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5pbnZlbnRvcnlfbmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICAgIDwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpY2hhbmdlZC5ub3Rlc31cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWNoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICBub3RlczogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2VsdWFya2FuIGl0ZW0gXCJcbiAgICAgICAgICAgIHtkYXRhcmVtb3ZlZC5pbnZlbnRvcnlfbmFtZX1cIiBkYXJpIFwie21haW5wYXJ0ZGF0YS5pbnZlbnRvcnlfbmFtZX1cIj9cbiAgICAgICAgICA8L2gxPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFscmVtb3ZlZH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZVJlbW92ZUl0ZW1QYXJ0fVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdyZW1vdmVkIH19XG4gICAgICAgIHdpZHRoPXs3NjB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7IC4uLmRhdGFBcGlyZW1vdmVkLCBub3RlczogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvZGl2PlxuICApO1xufTtcbmNvbnN0IFJlbGF0aW9uc2hpcCA9ICh7IGluaXRQcm9wcywgbWFpbmRhdGEsIGl0ZW1pZCB9KSA9PiB7XG4gIC8vaW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZXN0YXRlXG4gIGNvbnN0IFtldmVudHMsIHNldGV2ZW50c10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0YWJsZSwgc2V0ZGF0YXRhYmxlXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2RhdGF0YWJsZTIsIHNldGRhdGF0YWJsZTJdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMywgc2V0ZGF0YXRhYmxlM10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtuYW1hc2VhcmNoYWN0LCBzZXRuYW1hc2VhcmNoYWN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25hbWF2YWx1ZSwgc2V0bmFtYXZhbHVlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRyaWdnZXIsIHNldGRhdGF0cmlnZ2VyXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbbG9hZGluZ3JlbCwgc2V0bG9hZGluZ3JlbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5ncmVsLCBzZXRwcmFsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9kZWxldGVcbiAgY29uc3QgW2RhdGFBcGlkZWxldGUsIHNldGRhdGFBcGlkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICB9KTtcbiAgY29uc3QgW21vZGFsZGVsZXRlLCBzZXRtb2RhbGRlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nZGVsZXRlLCBzZXRsb2FkaW5nZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3JlbGF0aW9uZGF0YWRlbGV0ZSwgc2V0cmVsYXRpb25kYXRhZGVsZXRlXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiBcIlwiLFxuICAgIHRpcGU6IFwiXCIsXG4gICAga29uZWtzaTogXCJcIixcbiAgfSk7XG4gIC8vYWRkXG4gIGNvbnN0IFtkYXRhQXBpYWRkLCBzZXRkYXRhQXBpYWRkXSA9IHVzZVN0YXRlKHtcbiAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICByZWxhdGlvbnNoaXBfaWQ6IG51bGwsXG4gICAgaXNfaW52ZXJzZTogbnVsbCxcbiAgICB0eXBlX2lkOiBudWxsLFxuICAgIGNvbm5lY3RlZF9pZHM6IG51bGwsXG4gICAgYmFja3VwX2Nvbm5lY3RlZF9pZHM6IG51bGwsXG4gIH0pO1xuICBjb25zdCBbZGlzcGxheWRhdGFyZWxhdGlvbnMsIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3JlbGF0aW9ubmFtZWFkZCwgc2V0cmVsYXRpb25uYW1lYWRkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcmVsYXRpb25uYW1lZGRhZGQsIHNldHJlbGF0aW9ubmFtZWRkYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3JlbGF0aW9uc2VsZWN0ZWRpZHhhZGQsIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZF0gPVxuICAgIHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2RldGFpbHRpcGVhZGQsIHNldGRldGFpbHRpcGVhZGRdID0gdXNlU3RhdGUoLTEwKTtcbiAgY29uc3QgW2RldGFpbHRpcGVkYXRhYWRkLCBzZXRkZXRhaWx0aXBlZGF0YWFkZF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RhbGFkZCwgc2V0bW9kYWxhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRhZGQsIHNldGRpc2FibGVkYWRkXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ2FkZCwgc2V0bG9hZGluZ2FkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1YmxvY2RhdGEsIHNldHN1YmxvY2RhdGFdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtzdWJsb2N0cmlnLCBzZXRzdWJsb2N0cmlnXSA9IHVzZVN0YXRlKC0xKTtcblxuICAvL2RlY2xhcmF0aW9uXG4gIGNvbnN0IGNvbHVtbnMgPSBbXG4gICAge1xuICAgICAgdGl0bGU6IFwiUmVsYXRpb25zaGlwIFR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJyZWxhdGlvbnNoaXBfbmFtZVwiLFxuICAgICAga2V5OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJOYW1hXCIsXG4gICAgICBkYXRhSW5kZXg6IFwiY29ubmVjdGVkX2RldGFpbF9uYW1lXCIsXG4gICAgICBrZXk6IFwiY29ubmVjdGVkX2RldGFpbF9uYW1lXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJUeXBlXCIsXG4gICAgICBkYXRhSW5kZXg6IFwidHlwZVwiLFxuICAgICAga2V5OiBcInR5cGVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXCIsXG4gICAgICBkYXRhSW5kZXg6IFwiYWN0aW9uc3NcIixcbiAgICAgIHJlbmRlcjogKHRleHQsIHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2V2ZW50cyA9PT0gcmVjb3JkLmlkID8gKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8RGVsZXRlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlkZWxldGUoeyBpZDogcmVjb3JkLmlkIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uZGF0YWRlbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZWNvcmQucmVsYXRpb25zaGlwX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXBlOiByZWNvcmQudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvbmVrc2k6IHJlY29yZC5jb25uZWN0ZWRfZGV0YWlsX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxkZWxldGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IGAxLjJyZW1gLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBgcmVkYCxcbiAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGBwb2ludGVyYCxcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hhbmRsZXJcbiAgLy9zZWFyY2ggbmFtYVxuICBjb25zdCBvbkNoYW5nZVNlYXJjaCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0bmFtYXNlYXJjaGFjdCh0cnVlKTtcbiAgICAgIHNldG5hbWF2YWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICB9O1xuICAvL2ZpbmFsQ2xpY2tcbiAgY29uc3Qgb25GaW5hbENsaWNrID0gKCkgPT4ge1xuICAgIHZhciBkYXRhdGVtcCA9IGRhdGF0YWJsZTI7XG4gICAgaWYgKG5hbWFzZWFyY2hhY3QpIHtcbiAgICAgIGRhdGF0ZW1wID0gZGF0YXRlbXAuZmlsdGVyKChmbHQpID0+IHtcbiAgICAgICAgcmV0dXJuIGZsdC5jb25uZWN0ZWRfZGV0YWlsX25hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5pbmNsdWRlcyhuYW1hdmFsdWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0ZGF0YXRhYmxlKGRhdGF0ZW1wKTtcbiAgfTtcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlUmVsYXRpb25zaGlwSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RlbGV0ZVJlbGF0aW9uc2hpcEludmVudG9yeWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWRlbGV0ZSksXG4gICAgICB9XG4gICAgKVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdkZWxldGUoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbGRlbGV0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVsYXRpb25zaGlwIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQWRkUmVsYXRpb25zaGlwSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nYWRkKHRydWUpO1xuICAgIGRlbGV0ZSBkYXRhQXBpYWRkLmJhY2t1cF9jb25uZWN0ZWRfaWQ7XG4gICAgLy8gY29uc29sZS5sb2coZGF0YUFwaWFkZClcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vYWRkUmVsYXRpb25zaGlwSW52ZW50b3JpZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGFBcGlhZGQpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2FkZChmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgc3ViamVjdF9pZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IG51bGwsXG4gICAgICAgICAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgICAgICAgICAgdHlwZV9pZDogbnVsbCxcbiAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IG51bGwsXG4gICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVhZGQoXCJcIik7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShudWxsKTtcbiAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKC0xKTtcbiAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKC0xKTtcbiAgICAgICAgICBzZXRzdWJsb2N0cmlnKC0xKTtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVsYXRpb25zaGlwIEl0ZW0gYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3VzZUVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChkYXRhdHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldHByYWxvYWRpbmdyZWwodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeT9pZD0ke2l0ZW1pZH0mdHlwZV9pZD0tNGAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0ZGF0YXRhYmxlKFxuICAgICAgICAgICAgcmVzMi5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzMi5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRkYXRhdGFibGUyKFxuICAgICAgICAgICAgcmVzMi5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzMi5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRkYXRhdGFibGUzKFxuICAgICAgICAgICAgcmVzMi5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzMi5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRwcmFsb2FkaW5ncmVsKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbZGF0YXRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwc2AsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRkaXNwbGF5ZGF0YXJlbGF0aW9ucyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3VibG9jdHJpZyAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7c3VibG9jdHJpZ31gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldHN1YmxvY2RhdGEocmVzMi5kYXRhLmNoaWxkcmVuKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkZXRhaWx0aXBlYWRkICE9PSAtMTApIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGF0YUFwaWFkZC50eXBlX2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChbcmVzMi5kYXRhXSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTIgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YS5kYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkZXRhaWx0aXBlYWRkLCBzdWJsb2N0cmlnXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvIG1yLTFcIj5SZWxhdGlvbnNoaXA8L2gxPlxuICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8RXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgID48L0V4Y2xhbWF0aW9uQ2lyY2xlT3V0bGluZWQ+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgc2V0bW9kYWxhZGQoXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7IC8qcnQucHVzaChgL2l0ZW1zL2NyZWF0ZXJlbGF0aW9uc2hpcC8ke2l0ZW1pZH0/bmFtYT0ke21haW5kYXRhLmludmVudG9yeV9uYW1lfSZhc3NldF9pZD0ke21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZH1gKSovXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIFRhbWJhaFxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1iLTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmdyZWwgPyBudWxsIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHctZnVsbCBtci0xIGdyaWQgZ3JpZC1jb2xzLTEyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTExIG1yLTFcIj5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCwgbWFyZ2luUmlnaHQ6IGAwLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE5hbWEgSXRlbVwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZVNlYXJjaChlKX1cbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xXCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uRmluYWxDbGlja31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxTZWFyY2hPdXRsaW5lZCAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8VGFibGVcbiAgICAgICAgbG9hZGluZz17cHJhbG9hZGluZ3JlbH1cbiAgICAgICAgcGFnaW5hdGlvbj17eyBwYWdlU2l6ZTogOSB9fVxuICAgICAgICBzY3JvbGw9e3sgeDogMjAwIH19XG4gICAgICAgIGRhdGFTb3VyY2U9e2RhdGF0YWJsZX1cbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgb25Sb3c9eyhyZWNvcmQsIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKHJlY29yZC5pZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgc2V0ZXZlbnRzKDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9fVxuICAgICAgPjwvVGFibGU+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDw+XG4gICAgICAgICAgICBBcGFrYWggQW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgUmVsYXRpb25zaGlwIGJlcmlrdXQgaW5pIGRhcmkgXCJcbiAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cIj9cbiAgICAgICAgICA8Lz5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGRlbGV0ZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGRlbGV0ZShmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlRGVsZXRlUmVsYXRpb25zaGlwSXRlbX1cbiAgICAgICAgb2tCdXR0b25Qcm9wcz17eyBsb2FkaW5nOiBsb2FkaW5nZGVsZXRlIH19XG4gICAgICAgIHdpZHRoPXs3MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBib3JkZXItYiBtYi01XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0wXCI+UmVsYXRpb25zaGlwIFR5cGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUubmFtZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5UaXBlOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLnRpcGV9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0wXCI+SXRlbTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5rb25la3NpfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIiBvbkNoYW5nZT17KGUpID0+IHt9fT48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFRhbWJhaCBSZWxhdGlvbnNoaXAgXCJ7bWFpbmRhdGEubmFtZX1cIlxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxhZGQoXG4gICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgKTsgLypzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgcmVsYXRpb25zaGlwX2lkOiBudWxsLCB0eXBlX2lkOiBudWxsLCBjb25uZWN0ZWRfaWQ6IG51bGwgfSkqLyAvKmNvbnNvbGUubG9nKGRhdGFBcGlhZGQpKi9cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWRhZGR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2FkZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGFkZH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGFkZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZSA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlciBwLTIgaG92ZXI6Ym9yZGVyLXByaW1hcnkgcm91bmRlZC1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lZGRhZGQoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbm5hbWVhZGR9PC9wPlxuICAgICAgICAgICAgICB7cmVsYXRpb25uYW1lZGRhZGQgPyAoXG4gICAgICAgICAgICAgICAgPFVwT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZ2IoMjI5LDIzMSwyMzUpYCB9fSAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxEb3duT3V0bGluZWQgc3R5bGU9e3sgY29sb3I6IGByZ2IoMjI5LDIzMSwyMzUpYCB9fSAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7cmVsYXRpb25uYW1lZGRhZGQgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCBmb250LXNlbWlib2xkIHAtMyB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgUmVsYXRpb25zaGlwIFR5cGVcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCBmb250LXNlbWlib2xkIHAtMyB3LTYvMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgSW52ZXJzZSBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge2Rpc3BsYXlkYXRhcmVsYXRpb25zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCIgYmctc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChkb2MucmVsYXRpb25zaGlwX3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogZG9jLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2ludmVyc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5yZWxhdGlvbnNoaXBfdHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bob3ZlcjpiZy10ZXJuYXJ5IGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYmxhY2sgcC0zIHctNi8xMiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaWR4YWRkID09PSBpZHggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZCA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCIgYmctc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChkb2MuaW52ZXJzZV9yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gbnVsbCB8fCBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldGRpc2FibGVkYWRkKHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRkaXNhYmxlZGFkZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlzaW52ZXJzZWFkZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBUaXBlIDxzcGFuIGNsYXNzTmFtZT1cInRpcGVwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICB2YWx1ZT17ZGF0YUFwaWFkZC50eXBlX2lkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIHR5cGVfaWQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQucmVsYXRpb25zaGlwX2lkID09PSBudWxsIHx8IHZhbHVlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICA/IHNldGRpc2FibGVkYWRkKHRydWUpXG4gICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkZXRhaWx0aXBlYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICAgICAgICA/IChzZXRzdWJsb2N0cmlnKC0xKSwgc2V0c3VibG9jZGF0YShudWxsKSlcbiAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0xfT5BZ2VudDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0yfT5SZXF1ZXN0ZXI8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey00fT5Bc3NldCBUeXBlPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGlwZXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge2RhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTEgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+RGV0YWlsIFRpcGU8L3A+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ21vZGVsID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGV0YWlsdGlwZWFkZH0mbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2RhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTIgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+RGV0YWlsIFRpcGU8L3A+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ21vZGVsID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGV0YWlsdGlwZWFkZH0mbmFtZT0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2RhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+RGV0YWlsIFRpcGU8L3A+XG4gICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBkYXRhQXBpYWRkLmJhY2t1cF9jb25uZWN0ZWRfaWRzWzBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e2RldGFpbHRpcGVkYXRhYWRkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiBbdmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja3VwX2Nvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0c3VibG9jdHJpZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtNCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIGRlbmdhbiBNb2RlbCBJRFwiXG4gICAgICAgICAgICAgICAgICAgIG1vZGU9XCJtdWx0aXBsZVwiXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRDb250ZW50PXtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaGluZ21vZGVsID8gPFNwaW4gc2l6ZT1cInNtYWxsXCIgLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5RGV0YWlsTGlzdD90eXBlX2lkPSR7ZGV0YWlsdGlwZWFkZH0mbW9kZWxfaWQ9JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgIT09IFwiXCIgPyB2YWx1ZSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgIG9wdC5jaGlsZHJlbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaW5wdXQudG9Mb3dlckNhc2UoKSkgPj1cbiAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja3VwX2Nvbm5lY3RlZF9pZHM6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7ZGV0YWlsdGlwZWRhdGFhZGQubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5taWdfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIHtzdWJsb2NkYXRhICE9PSBudWxsICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZSAoU3VibG9rYXNpKTwvcD5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBtdWx0aXBsZVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICB0cmVlRGF0YT17c3VibG9jZGF0YX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCBsYWJlbCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiBkYXRhQXBpYWRkLmJhY2t1cF9jb25uZWN0ZWRfaWRzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCBjb25uZWN0ZWRfaWRzOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvZGl2PlxuICApO1xufTtcbmNvbnN0IEFzc29jaWF0aW9uID0gKHsgaW5pdFByb3BzLCBpdGVtaWQsIG1haW5kYXRhLCBwcmFsb2FkaW5nIH0pID0+IHtcbiAgY29uc3QgcnQgPSB1c2VSb3V0ZXIoKTtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG9cIj5Bc3NvY2lhdGlvbjwvaDE+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBweC01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogbWFpbmRhdGEuYXNzb2NpYXRpb25zLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7bWFpbmRhdGEuYXNzb2NpYXRpb25zLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIHNoYWRvdy1tZCBweS00IHB4LTUgYm9yZGVyIG1iLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gdy0xMC8xMiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJ0LnB1c2goYC90aWNrZXRzL2RldGFpbC8ke2RvYy5pZH0/YWN0aXZlPWRldGFpbEl0ZW1gKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPlRpY2tldCBOdW1iZXI8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57ZG9jLnRpY2tldF9uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDEgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1yZWQtMTAwIGJvcmRlciBib3JkZXItcmVkLTIwMCB0ZXh0LXJlZC02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAyICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSA1ICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcbmNvbnN0IEFjaXRpdnR5ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBpbnZyZWxhdGlvbnMsXG4gIHByYWxvYWRpbmcsXG4gIGFjdGl2aXR5dHJpZ2dlcixcbn0pID0+IHtcbiAgY29uc3QgW2RheWxvZ3MsIHNldGRheWxvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbd2Vla2xvZ3MsIHNldHdlZWtsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vcmVsb2dzLCBzZXRtb3JlbG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nbG9ncywgc2V0cHJhbG9hZGluZ2xvZ3NdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpbnZlbnRvcmllcywgc2V0aW52ZW50b3JpZXNdID0gdXNlU3RhdGUoW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0cHJhbG9hZGluZ2xvZ3ModHJ1ZSk7XG5cbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRBY3Rpdml0eUludmVudG9yeUxvZ3M/aWQ9JHtpdGVtaWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgdmFyIGRheWxvZ3NtYXAgPSByZXMyLmRhdGEuZGF5X2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIERpaGFwdXM6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgd2Vla2xvZ3NtYXAgPSByZXMyLmRhdGEud2Vla19sb2dzLm1hcCgoZG9jbG9ncywgaWR4bG9ncykgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGVuZXcgPSBtb21lbnQoZG9jbG9ncy5kYXRlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTExcIik7XG4gICAgICAgICAgdmFyIGRlc2NuZXcgPSBcIlwiO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c19jb25kaXRpb24gPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiR3JleVwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiR3JleVwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2N1c2FnZU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiSW4gVXNlZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2N1c2FnZUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiSW4gVXNlZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzYzEgPSBkb2Nsb2dzLmRlc2NyaXB0aW9uLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gQmFydTogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/Lmxpc3RfcGFydHMpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYEluaXNpYWxpc2FzaSBQZW1idWF0YW4gSXRlbSBQYXJ0IFwiJHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHNcbiAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/Lmxpc3RfcGFydHMuaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgICAgICAgZG9jZmlsLmlkXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC5tYXAoKGRvY21hcCkgPT4gZG9jbWFwLmludmVudG9yeV9uYW1lKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cImA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVtYnVhdGFuIEl0ZW0gQmFydSBiZXJuYW1hIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8uaW52ZW50b3J5X25hbWV9XCJgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkZXNjMVswXSA9PT0gXCJOb3Rlc1wiXG4gICAgICAgICAgICA/IChkZXNjbmV3ID0gZGVzY25ldyArIGBQZW5hbWJhaGFuIE5vdGVzYClcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiVXBkYXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBzdGF0dXMga29uZGlzaSBkYXJpICR7ZGVzY2tvbmRpc2lPbGR9IGtlICR7ZGVzY2tvbmRpc2lCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBzdGF0dXMgcGVtYWthaWFuIGRhcmkgJHtkZXNjdXNhZ2VPbGR9IGtlICR7ZGVzY3VzYWdlQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZSkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBOYW1hIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5pbnZlbnRvcnlfbmFtZX1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWV9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFNlcmlhbCBOdW1iZXIgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnNlcmlhbF9udW1iZXJ9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXJ9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvbikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBMb2NhdGlvbiBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWQpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gVmVuZG9yIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudmVuZG9ycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudmVuZG9ycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5tYW51ZmFjdHVyZXJfaWQpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+XG4gICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmRlc2tyaXBzaSkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBQZW5ndWJhaGFuIERlc2tyaXBzaSBJdGVtYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA+XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzbmV3ID1cbiAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBJdGVtIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBJdGVtIFBhcnRgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoIDxcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNvbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5nZWx1YXJhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPT09XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzbmV3ID1cbiAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNvbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5pZClcbiAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZXJnYW50aWFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cImA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgcHJwdHMgPSBbXTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBkb2Nsb2dzLnByb3BlcnRpZXMub2xkKSB7XG4gICAgICAgICAgICAgICAgcHJwdHMucHVzaChwcm9wKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBQZW5ndWJhaGFuIFwiJHtwcnB0cy5qb2luKFwiLCBcIil9XCIgSXRlbWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJEZWxldGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtb3JlbG9nc21hcCA9IHJlczIuZGF0YS5lbHNlX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0ZGF5bG9ncyhkYXlsb2dzbWFwKTtcbiAgICAgICAgc2V0d2Vla2xvZ3Mod2Vla2xvZ3NtYXApO1xuICAgICAgICBzZXRtb3JlbG9ncyhtb3JlbG9nc21hcCk7XG4gICAgICAgIHNldHByYWxvYWRpbmdsb2dzKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIC8vIC50aGVuKHJlczMgPT4ge1xuICAgIC8vICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCwge1xuICAgIC8vICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAvLyAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAvLyAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSlcbiAgICAvLyAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzNCA9PiB7XG4gICAgLy8gICAgICAgICAgICAgdmFyIGNvbmNhdGFyciA9IHJlczQuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczQuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKVxuXG4gICAgLy8gICAgICAgICAgICAgdmFyIGxvZ3MybWFwID0gcmVzMy5kYXRhLnJlbGF0aW9uc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVuZXcyID0gbW9tZW50KGRvY3JlbC5kYXRlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoJ0xMTCcpXG4gICAgLy8gICAgICAgICAgICAgICAgIHZhciBkZXNjbmV3MiA9ICcnXG4gICAgLy8gICAgICAgICAgICAgICAgIHZhciBpZGxvZ25ldyA9IC0xXG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MyID0gZG9jcmVsLmRlc2NyaXB0aW9uLnNwbGl0KFwiIFwiKVxuICAgIC8vICAgICAgICAgICAgICAgICBkZXNjMlswXSA9PT0gJ0NyZWF0ZWQnID8gaWRsb2duZXcgPSBjb25jYXRhcnIuZmlsdGVyKGRvY2ZpbCA9PiBkb2NmaWwuaWQgPT09IGRvY3JlbC5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaWQpWzBdIDogbnVsbFxuICAgIC8vICAgICAgICAgICAgICAgICBkZXNjMlswXSA9PT0gJ0NyZWF0ZWQnID8gZGVzY25ldzIgPSBkZXNjbmV3MiArIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7dHlwZW9mIChpZGxvZ25ldykgPT09ICd1bmRlZmluZWQnID8gXCIoU3VkYWggRGloYXB1cyBsYWdpKVwiIDogYCR7aWRsb2duZXcucmVsYXRpb25zaGlwfWB9XCJgIDogbnVsbFxuICAgIC8vICAgICAgICAgICAgICAgICBkZXNjMlswXSA9PT0gJ0RlbGV0ZWQnID8gZGVzY25ldzIgPSBkZXNjbmV3MiArIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXBgIDogbnVsbFxuICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgLi4uZG9jcmVsLFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldzIsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldzJcbiAgICAvLyAgICAgICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgLy8gICAgICAgICAgICAgc2V0bG9nczIobG9nczJtYXApXG4gICAgLy8gICAgICAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MyKGZhbHNlKVxuICAgIC8vICAgICAgICAgfSlcbiAgICAvLyB9KVxuICB9LCBbYWN0aXZpdHl0cmlnZ2VyXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG1iLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG9cIj5BY3Rpdml0eTwvaDE+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgdy02LzEyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+SGFyaSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IGRheWxvZ3MubGVuZ3RoIDwgMSA/IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgICAge2RheWxvZ3MubWFwKChkb2Nsb2csIGlkeGxvZykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lLkl0ZW0gbGFiZWw9e2RvY2xvZy5kYXRlfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Nsb2cuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgT2xlaCB7ZG9jbG9nLmNhdXNlcl9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5NaW5nZ3UgSW5pPC9oMT5cbiAgICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgICAgPFNwaW4gLz5cbiAgICAgICAgICAgICkgOiB3ZWVrbG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7d2Vla2xvZ3MubWFwKChkb2Nsb2csIGlkeGxvZykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFRpbWVsaW5lLkl0ZW0gbGFiZWw9e2RvY2xvZy5kYXRlfT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Nsb2cuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgT2xlaCB7ZG9jbG9nLmNhdXNlcl9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBMYWx1PC9oMT5cbiAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICkgOiBtb3JlbG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICB7bW9yZWxvZ3MubWFwKChkb2Nsb2csIGlkeGxvZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWJhc2UgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTEgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTEgdGV4dC1zbVwiPk5vdGVzOiB7ZG9jbG9nLm5vdGVzfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L1RpbWVsaW5lLkl0ZW0+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L1RpbWVsaW5lPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5jb25zdCBJdGVtRGV0YWlsID0gKHsgaW5pdFByb3BzLCBkYXRhUHJvZmlsZSwgc2lkZW1lbnUsIGl0ZW1pZCB9KSA9PiB7XG4gIC8vMS4gSW5pdFxuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICB2YXIgYWN0aXZlVGFiID0gXCJvdmVydmlld1wiO1xuICBjb25zdCB7IGFjdGl2ZSB9ID0gcnQucXVlcnk7XG4gIGlmIChhY3RpdmUpIHtcbiAgICBhY3RpdmVUYWIgPSBhY3RpdmU7XG4gIH1cbiAgdmFyIHBhdGhBcnIgPSBydC5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSk7XG4gIHBhdGhBcnIuc3BsaWNlKDIsIDIpO1xuICBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gPSBcIkRldGFpbCBJdGVtXCI7XG4gIGNvbnN0IHsgVGFiUGFuZSB9ID0gVGFicztcblxuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFttYWluZGF0YSwgc2V0bWFpbmRhdGFdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBcIlwiLFxuICAgIG1vZGVsX2lkOiBcIlwiLFxuICAgIHZlbmRvcl9pZDogXCJcIixcbiAgICBpbnZlbnRvcnlfbmFtZTogXCJcIixcbiAgICBzdGF0dXNfY29uZGl0aW9uOiBcIlwiLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBsb2NhdGlvbjogXCJcIixcbiAgICBpc19leGlzdDogXCJcIixcbiAgICBkZXNrcmlwc2k6IFwiXCIsXG4gICAgbWFudWZhY3R1cmVyX2lkOiBcIlwiLFxuICAgIG1pZ19pZDogXCJcIixcbiAgICBzZXJpYWxfbnVtYmVyOiBcIlwiLFxuICAgIGNyZWF0ZWRfYXQ6IFwiXCIsXG4gICAgdXBkYXRlZF9hdDogXCJcIixcbiAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgIGFzc2V0X25hbWU6IFwiXCIsXG4gICAgbW9kZWxfbmFtZTogXCJcIixcbiAgICBsb2NhdGlvbl9uYW1lOiBcIlwiLFxuICAgIG1vZGVsX2ludmVudG9yeToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgICAgYXNzZXRfaWQ6IG51bGwsXG4gICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgYXNzZXQ6IHtcbiAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbG9jYXRpb25faW52ZW50b3J5OiB7XG4gICAgICBjb21wYW55X2lkOiBudWxsLFxuICAgICAgY29tcGFueV9uYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgYWRkaXRpb25hbF9hdHRyaWJ1dGVzOiBbXSxcbiAgICBpbnZlbnRvcnlfcGFydHM6IFtdLFxuICAgIGFzc29jaWF0aW9uczogW10sXG4gICAgcXVhbnRpdGllczogW10sXG4gIH0pO1xuICBjb25zdCBbaW52cmVsYXRpb25zLCBzZXRpbnZyZWxhdGlvbnNdID0gdXNlU3RhdGUoe1xuICAgIG1vZGVsczogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBhc3NldHM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwiXCIsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICB9LFxuICAgIF0sXG4gICAgbWFudWZhY3R1cmVyczogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBzdGF0dXNfY29uZGl0aW9uOiBbXSxcbiAgICBzdGF0dXNfdXNhZ2U6IFtdLFxuICAgIHZlbmRvcnM6IFtdLFxuICAgIGNvbXBhbmllczogW10sXG4gICAgdHJlZV9jb21wYW5pZXM6IHtcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW3JlbHNoaXAsIHNldHJlbHNoaXBdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbWFudWYsIHNldG1hbnVmXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdmVuZG9yLCBzZXR2ZW5kb3JdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtwcmFsb2FkaW5nLCBzZXRwcmFsb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbcHJhbG9hZGluZzIsIHNldHByYWxvYWRpbmcyXSA9IHVzZVN0YXRlKHRydWUpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL25vdGVzXG4gIGNvbnN0IFtub3Rlcywgc2V0bm90ZXNdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbG5vdGVzLCBzZXRtb2RhbG5vdGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdub3Rlcywgc2V0bG9hZGluZ25vdGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9rb25kaXNpXG4gIGNvbnN0IFtrb25kaXNpLCBzZXRrb25kaXNpXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbm90ZWtvbmRpc2ksIHNldG5vdGVrb25kaXNpXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbW9kYWxrb25kaXNpLCBzZXRtb2RhbGtvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzcGxheWtvbmRpc2ksIHNldGRpc3BsYXlrb25kaXNpXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ2tvbmRpc2ksIHNldGxvYWRpbmdrb25kaXNpXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy9zdGF0dXMgcGVtYWthaWFuXG4gIGNvbnN0IFtjaGFuZ2V1c2FnZSwgc2V0Y2hhbmdldXNhZ2VdID0gdXNlU3RhdGUoe1xuICAgIGlkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICBzdGF0dXNfdXNhZ2U6IFwiXCIsXG4gICAgbm90ZXM6IFwiXCIsXG4gICAgcmVsYXRpb25zaGlwX3R5cGVfaWQ6IFwiXCIsXG4gICAgY29ubmVjdGVkX2lkOiBcIlwiLFxuICAgIGRldGFpbF9jb25uZWN0ZWRfaWQ6IG51bGwsXG4gIH0pO1xuICBjb25zdCBbZGlzYWJsZWR1c2FnZSwgc2V0ZGlzYWJsZWR1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW21vZGFsdXNhZ2UsIHNldG1vZGFsdXNhZ2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzcGxheXVzYWdlLCBzZXRkaXNwbGF5dXNhZ2VdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlLCBzZXRsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlXSA9XG4gICAgdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ3VzYWdlLCBzZXRsb2FkaW5ndXNhZ2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvLyBjb25zdCBbYWdlbnRzLCBzZXRhZ2VudHNdID0gdXNlU3RhdGUoW10pXG4gIC8vIGNvbnN0IFtyZXF1ZXN0ZXJzLCBzZXRyZXF1ZXN0ZXJzXSA9IHVzZVN0YXRlKFtdKVxuICBjb25zdCBbZGV0YWlsbGlzdCwgc2V0ZGV0YWlsbGlzdF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttb2RlbHMsIHNldG1vZGVsc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtzdWJsb2NhdGlvbnMsIHNldHN1YmxvY2F0aW9uc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtsb2NhdGlvbnNkaXNwbGF5LCBzZXRsb2NhdGlvbnNkaXNwbGF5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9udHJpZ2dlciwgc2V0c3VibG9jYXRpb250cmlnZ2VyXSA9IHVzZVN0YXRlKC0xKTtcbiAgY29uc3QgW2FjdGl2aXR5dHJpZ2dlciwgc2V0YWN0aXZpdHl0cmlnZ2VyXSA9IHVzZVN0YXRlKDApO1xuXG4gIC8vaGVscGVyXG5cbiAgLy9oYW5kbGVyXG4gIGNvbnN0IGhhbmRsZURlbGV0ZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ2RlbGV0ZSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlSW52ZW50b3J5YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3RlczogXCJcIixcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBiZXJoYXNpbCBkaWhhcHVzXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbGRlbGV0ZShmYWxzZSk7XG4gICAgICAgICAgcnQucHVzaChgL2l0ZW1zYCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlTm90ZXNJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdub3Rlcyh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vYWRkSW52ZW50b3J5Tm90ZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZXMsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdub3RlcyhmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm90ZXMgYmVyaGFzaWwgZGl0YW1iYWhrYW5cIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsbm90ZXMoZmFsc2UpO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9P2FjdGl2ZT1hY3Rpdml0eWA7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlS29uZGlzaUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ2tvbmRpc2kodHJ1ZSk7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2NoYW5nZVN0YXR1c0NvbmRpdGlvbmAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgbm90ZXM6IG5vdGVrb25kaXNpLFxuICAgICAgICBzdGF0dXNfY29uZGl0aW9uOiBrb25kaXNpLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5na29uZGlzaShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsa29uZGlzaShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiU3RhdHVzIEtvbmRpc2kgYmVyaGFzaWwgZGl1YmFoXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvaXRlbXMvZGV0YWlsLyR7aXRlbWlkfWA7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlVXNhZ2VJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmd1c2FnZSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzVXNhZ2VgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2hhbmdldXNhZ2UpLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ3VzYWdlKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWx1c2FnZShmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiU3RhdHVzIFBlbWFrYWlhbiBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXMyLmRhdGEpIHtcbiAgICAgICAgICBpZiAocHJvcCA9PT0gXCJhZGRpdGlvbmFsX2F0dHJpYnV0ZXNcIikge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXS5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICBkb2MuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnBhcnNlKGRvYy52YWx1ZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kb2MgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRbcHJvcF0gPSByZXMyLmRhdGFbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldG1haW5kYXRhKHQpO1xuICAgICAgICBzZXRwcmFsb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlczMpID0+IHtcbiAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeVJlbGF0aW9uc2AsIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgIHNldGludnJlbGF0aW9ucyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgdmFyIGRlbF9tYW51ZiA9IG51bGw7XG4gICAgICAgICAgICByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gMCB8fCByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICA/IChkZWxfbWFudWYgPSBudWxsKVxuICAgICAgICAgICAgICA6IChkZWxfbWFudWYgPSByZXMyLmRhdGEubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgKVswXS5kZWxldGVkX2F0KTtcbiAgICAgICAgICAgIHNldG1hbnVmKHtcbiAgICAgICAgICAgICAgbmFtZTpcbiAgICAgICAgICAgICAgICByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gbnVsbCB8fCByZXMzLm1hbnVmYWN0dXJlcl9pZCA9PT0gMFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiByZXMyLmRhdGEubWFudWZhY3R1cmVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgICApWzBdLm5hbWUsXG4gICAgICAgICAgICAgIGlzbnVsbDogZGVsX21hbnVmICE9PSBudWxsID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMzLnZlbmRvcl9pZCA9PT0gbnVsbCB8fCByZXMzLnZlbmRvcl9pZCA9PT0gMFxuICAgICAgICAgICAgICA/IHNldHZlbmRvcihcIi1cIilcbiAgICAgICAgICAgICAgOiBzZXR2ZW5kb3IoXG4gICAgICAgICAgICAgICAgICByZXMyLmRhdGEudmVuZG9ycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0/Lm5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgc2V0cHJhbG9hZGluZzIoZmFsc2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0RmlsdGVyTW9kZWxzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRtb2RlbHMocmVzMi5kYXRhKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkICE9PSBcIlwiKSB7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldENoYW5nZVN0YXR1c1VzYWdlRGV0YWlsTGlzdD9pZD0ke2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICA/IHNldGRldGFpbGxpc3QoW3JlczIuZGF0YV0pXG4gICAgICAgICAgICA6IHNldGRldGFpbGxpc3QocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtjaGFuZ2V1c2FnZV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2NhdGlvbnRyaWdnZXIgIT09IC0xKSB7XG4gICAgICBzZXRsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlKHRydWUpO1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtjaGFuZ2V1c2FnZS5jb25uZWN0ZWRfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRsb2FkaW5nY2hhbmdlY29tcGFueXVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRzdWJsb2NhdGlvbnMocmVzMi5kYXRhLmNoaWxkcmVuKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbc3VibG9jYXRpb250cmlnZ2VyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0cmVsc2hpcChyZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSkpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0XG4gICAgICBzdD17c3R9XG4gICAgICBzaWRlbWVudT17c2lkZW1lbnV9XG4gICAgICB0b2s9e2luaXRQcm9wc31cbiAgICAgIHBhdGhBcnI9e3BhdGhBcnJ9XG4gICAgICBkYXRhUHJvZmlsZT17ZGF0YVByb2ZpbGV9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTRcIlxuICAgICAgICBpZD1cImNyZWF0ZUFzc2V0c1dyYXBwZXJcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi0xIG1kOmNvbC1zcGFuLTQgbWItOFwiPlxuICAgICAgICAgIDxTdGlja3kgY29udGFpbmVyU2VsZWN0b3JGb2N1cz1cIiNjcmVhdGVBZ2VudHNXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBjb2wtc3Bhbi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIHB5LTUgcHgtNCBib3JkZXItdCBib3JkZXItYiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCIgdGV4dC1ncmF5LTQwMCBtYi0wXCI+SXRlbTo8L3A+XG4gICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBweS0yIHRleHQtMnhsIG1iLTAgbXItMjBcIj5cbiAgICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9XG4gICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHtwcmFsb2FkaW5nID8gbnVsbCA6IChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtci03IHAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTFcIj5TdGF0dXMgUGVtYWthaWFuOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheXVzYWdlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBQZW1ha2FpYW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5kYXRhLnN0YXR1c191c2FnZSA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5kYXRhLnN0YXR1c191c2FnZSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c191c2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfdXNhZ2U6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGlzcGxheXVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gVXNlZDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkluIFN0b2NrPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+UmVwbGFjZW1lbnQ8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPktvbmRpc2k6PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5a29uZGlzaSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMHJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBTdGF0dXMgS29uZGlzaVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5kYXRhLnN0YXR1c19jb25kaXRpb24gPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGtvbmRpc2kodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsa29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsxfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMSBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctZ3JlZW4tNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIGZvbnQtc2VtaWJvbGRcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMSBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctcmVkLTUwMCBtci0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIGZvbnQtc2VtaWJvbGRcIj5CYWQ8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3Rlcyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFRhbWJhaCBOb3Rlc1xuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkYW5nZXJcIlxuICAgICAgICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxkZWxldGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEhhcHVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TdGlja3k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgaGlkZGVuIG1kOmJsb2NrXCI+XG4gICAgICAgICAgICA8VGFic1xuICAgICAgICAgICAgICB0YWJQb3NpdGlvbj17YGxlZnRgfVxuICAgICAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJ9XG4gICAgICAgICAgICAgIG9uVGFiQ2xpY2s9eyhrZXksIGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcImFjdGl2aXR5XCIpIHtcbiAgICAgICAgICAgICAgICAgIHNldGFjdGl2aXR5dHJpZ2dlcigocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiT3ZlcnZpZXdcIiBrZXk9e2BvdmVydmlld2B9PlxuICAgICAgICAgICAgICAgIDxPdmVydmlld1xuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIG1hbnVmPXttYW51Zn1cbiAgICAgICAgICAgICAgICAgIHZlbmRvcj17dmVuZG9yfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIktvbmZpZ3VyYXNpIFBhcnRcIiBrZXk9e2Brb25maWd1cmFzaVBhcnRgfT5cbiAgICAgICAgICAgICAgICA8S29uZmlndXJhc2lQYXJ0XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nMj17cHJhbG9hZGluZzJ9XG4gICAgICAgICAgICAgICAgICBtb2RlbHM9e21vZGVsc31cbiAgICAgICAgICAgICAgICAgIHNldG1vZGVscz17c2V0bW9kZWxzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiUmVsYXRpb25zaGlwXCIga2V5PXtgcmVsYXRpb25zaGlwYH0+XG4gICAgICAgICAgICAgICAgPFJlbGF0aW9uc2hpcFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFzc29jaWF0aW9uXCIga2V5PXtgYXNzb2NpYXRpb25gfT5cbiAgICAgICAgICAgICAgICA8QXNzb2NpYXRpb25cbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQWN0aXZpdHlcIiBrZXk9e2BhY3Rpdml0eWB9PlxuICAgICAgICAgICAgICAgIDxBY2l0aXZ0eVxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgYWN0aXZpdHl0cmlnZ2VyPXthY3Rpdml0eXRyaWdnZXJ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgPC9UYWJzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGJsb2NrIG1kOmhpZGRlblwiPlxuICAgICAgICAgICAgPFRhYnMgdGFiUG9zaXRpb249e2B0b3BgfSBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJ9PlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFViYWggU3RhdHVzIFBlbWFrYWlhbiB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGlzcGxheXVzYWdlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZHVzYWdlfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVXNhZ2VJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ3VzYWdlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsdXNhZ2V9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWx1c2FnZShmYWxzZSk7XG4gICAgICAgICAgc2V0ZGlzcGxheXVzYWdlKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs3NjB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIFBlbWFrYWlhbiA8c3BhbiBjbGFzc05hbWU9XCJ1c2FnZW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2NoYW5nZXVzYWdlLnN0YXR1c191c2FnZX0+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsxfT5JbiBVc2VkPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+SW4gU3RvY2s8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5SZXBsYWNlbWVudDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVzYWdlbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlID09PSAxID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgICAgICBEaWd1bmFrYW4gT2xlaCA8c3BhbiBjbGFzc05hbWU9XCJieW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRsb2NhdGlvbnNkaXNwbGF5KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0yfT5SZXF1ZXN0ZXI8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTN9PkNvbXBhbnk8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTMgbWwtNVwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIE5hbWEge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMSAmJiBcIkFnZW50XCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMiAmJiBcIlJlcXVlc3RlclwifXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgIHtjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTMgJiYgXCJDb21wYW55XCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibmFtYWJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIHtjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTMgPyAoXG4gICAgICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17W2ludnJlbGF0aW9ucy50cmVlX2NvbXBhbmllc119XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEZWZhdWx0RXhwYW5kZWRLZXlzPXtbMV19XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNldHN1YmxvY2F0aW9udHJpZ2dlcigocHJldikgPT4gcHJldiArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0zXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNldGxvY2F0aW9uc2Rpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNhYmxlZHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICAgIGRldGFpbGxpc3QubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMiAmJlxuICAgICAgICAgICAgICAgICAgICAgIGRldGFpbGxpc3QubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgey8qIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IDMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzLm1hcCgoZG9jLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9Pntkb2MubmFtZX08L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAqL31cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hYnltb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtjaGFuZ2V1c2FnZS5jb25uZWN0ZWRfaWQgPT09IC0zIHx8IGxvY2F0aW9uc2Rpc3BsYXkgPT09IHRydWUgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1sLTVcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5OYW1hIExva2FzaTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2V9XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NhdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbF9jb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gcC01IG10LTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bFwiPlxuICAgICAgICAgICAgICBGb3JtIFViYWggU3RhdHVzIEtvbmRpc2kge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGlzcGxheWtvbmRpc2kodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlS29uZGlzaUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5na29uZGlzaX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbGtvbmRpc2l9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NjAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFN0YXR1cyBLb25kaXNpIDxzcGFuIGNsYXNzTmFtZT1cImtvbmRpc2ltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxTZWxlY3QgZGlzYWJsZWQgZGVmYXVsdFZhbHVlPXtrb25kaXNpfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Hb29kPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+R3JleTwvcD5cbiAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAua29uZGlzaW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0bm90ZWtvbmRpc2koZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIE5vdGVzIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsbm90ZXMoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtub3RlcyA9PT0gXCJcIn1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZU5vdGVzSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdub3Rlc31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaW1wYW5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB2aXNpYmxlPXttb2RhbG5vdGVzfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsbm90ZXMoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIHNldG5vdGVzKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj5cbiAgICAgICAgICAgIEFwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBpdGVtIFwie21haW5kYXRhLmludmVudG9yeV9uYW1lfSAte1wiIFwifVxuICAgICAgICAgICAge21haW5kYXRhLm1pZ19pZH1cIj9cbiAgICAgICAgICA8L2gxPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcyMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNFwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGRcIj5cbiAgICAgICAgICAgICAgSXRlbSBpbmkgbWVtaWxpa2kgSXRlbSBQYXJ0IHNlYmFnYWkgYmVyaWt1dCA6XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj4tPC9wPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICB7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzLm1hcCgoZG9jZW1wdHksIGlkeGVtcHR5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxwIGtleT17aWR4ZW1wdHl9PlxuICAgICAgICAgICAgICAgICAgICAgIC0gPHN0cm9uZz57ZG9jZW1wdHkuaW52ZW50b3J5X25hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBzZWRhbmcgbWVtaWxpa2kgaHVidW5nYW4gZGVuZ2FuIGl0ZW0gYmVyaWt1dDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHNcIj5cbiAgICAgICAgICAgICAge3JlbHNoaXAubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj4tPC9wPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIHJlbHNoaXAubWFwKChkb2NyZWwsIGlkeHJlbCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGxpIGtleT17aWR4cmVsfT5cbiAgICAgICAgICAgICAgICAgICAgLXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jcmVsLnR5cGV9IC0ge2RvY3JlbC5jb25uZWN0ZWRfZGV0YWlsX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtcmVkLTUwMFwiPlxuICAgICAgICAgICAgICBEZW5nYW4gbWVuZ2hhcHVzIGl0ZW0gaW5pIGFrYW4gbWVuZ2hpbGFuZ2thbiBzZWx1cnVoIGh1YnVuZ2FuXG4gICAgICAgICAgICAgIGRlbmdhbiBpdGVtIGRpYXRhcyFcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aHIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyh7IHJlcSwgcmVzLCBwYXJhbXMgfSkge1xuICB2YXIgaW5pdFByb3BzID0ge307XG4gIGNvbnN0IGl0ZW1pZCA9IHBhcmFtcy5pdGVtSWQ7XG4gIGlmICghcmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBcIi9sb2dpblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXNKU09OMSA9IGh0dHBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuY29va2llKTtcbiAgaWYgKCFjb29raWVzSlNPTjEudG9rZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaW5pdFByb3BzID0gY29va2llc0pTT04xLnRva2VuO1xuICBjb25zdCByZXNvdXJjZXNHUCA9IGF3YWl0IGZldGNoKFxuICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZXRhaWxQcm9maWxlYCxcbiAgICB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzanNvbkdQID0gYXdhaXQgcmVzb3VyY2VzR1AuanNvbigpO1xuICBjb25zdCBkYXRhUHJvZmlsZSA9IHJlc2pzb25HUDtcblxuICAvLyBpZiAoIVsxMDcsIDEwOCwgMTA5LCAxMTAsIDExMSwgMTEyLCAxMzJdLmV2ZXJ5KChjdXJyKSA9PiBkYXRhUHJvZmlsZS5kYXRhLnJlZ2lzdGVyZWRfZmVhdHVyZS5pbmNsdWRlcyhjdXJyKSkpIHtcbiAgLy8gICAgIHJlcy53cml0ZUhlYWQoMzAyLCB7IExvY2F0aW9uOiAnL2Rhc2hib2FyZC9hZG1pbicgfSlcbiAgLy8gICAgIHJlcy5lbmQoKVxuICAvLyB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgaW5pdFByb3BzLFxuICAgICAgZGF0YVByb2ZpbGUsXG4gICAgICBzaWRlbWVudTogXCIzXCIsXG4gICAgICBpdGVtaWQsXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSXRlbURldGFpbDtcbiJdfQ== */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n            }, void 0, false, void 0, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3350,\n            columnNumber: 15\n          }, _this), changeusage.connected_id === -3 || locationsdisplay === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col ml-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: \"Nama Lokasi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3413,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(_TreeSelect, {\n              loading: loadingchangecompanyusage,\n              treeData: sublocations,\n              onChange: function onChange(value) {\n                setchangeusage(_objectSpread(_objectSpread({}, changeusage), {}, {\n                  detail_connected_id: value\n                }));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3414,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3412,\n            columnNumber: 17\n          }, _this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3318,\n          columnNumber: 13\n        }, _this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3429,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n            rows: 3,\n            placeholder: \"Masukkan Notes\",\n            onChange: function onChange(e) {\n              setchangeusage(_objectSpread(_objectSpread({}, changeusage), {}, {\n                notes: e.target.value\n              }));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3430,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3428,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3298,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3260,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: [\"Form Ubah Status Kondisi \", maindata.inventory_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3446,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalkondisi(false);\n                setdisplaykondisi(true);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3451,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              onClick: handleKondisiItem,\n              loading: loadingkondisi,\n              children: \"Simpan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3461,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3449,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3445,\n        columnNumber: 11\n      }, _this),\n      visible: modalkondisi,\n      onCancel: function onCancel() {\n        setmodalkondisi(false);\n        setdisplaykondisi(true);\n      },\n      footer: null,\n      width: 600,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-2167531264\" + \" \" + \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"jsx-2167531264\" + \" \" + \"mb-0\",\n            children: [\"Status Kondisi \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-2167531264\" + \" \" + \"kondisimodal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3483,\n              columnNumber: 30\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3482,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Select, {\n            disabled: true,\n            defaultValue: kondisi,\n            children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: 1,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"jsx-2167531264\" + \" \" + \"mb-0\",\n                children: \"Good\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3487,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3486,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: 2,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"jsx-2167531264\" + \" \" + \"mb-0\",\n                children: \"Grey\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3490,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3489,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n              value: 3,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"jsx-2167531264\" + \" \" + \"mb-0\",\n                children: \"Bad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3493,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3492,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3485,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"2167531264\",\n            children: \".kondisimodal.jsx-2167531264::before{content:'*';color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tqb2trZW4vbWlnL2NvZGUvZnJvbnRlbmQvaW1zLWZlLXNzaC1kZXYvc3JjL3BhZ2VzL2l0ZW1zL2RldGFpbC9baXRlbUlkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3NkdlLEFBR2lELFlBQ0YsVUFDZCIsImZpbGUiOiIvaG9tZS9ram9ra2VuL21pZy9jb2RlL2Zyb250ZW5kL2ltcy1mZS1zc2gtZGV2L3NyYy9wYWdlcy9pdGVtcy9kZXRhaWwvW2l0ZW1JZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbG9zZUNpcmNsZU91dGxpbmVkLFxuICBEZWxldGVPdXRsaW5lZCxcbiAgRG93bk91dGxpbmVkLFxuICBFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkLFxuICBTZWFyY2hPdXRsaW5lZCxcbiAgVXBPdXRsaW5lZCxcbn0gZnJvbSBcIkBhbnQtZGVzaWduL2ljb25zXCI7XG5pbXBvcnQge1xuICBCdXR0b24sXG4gIEVtcHR5LFxuICBJbnB1dCxcbiAgTW9kYWwsXG4gIFBvcG92ZXIsXG4gIFNlbGVjdCxcbiAgU3BpbixcbiAgVGFibGUsXG4gIFRhYnMsXG4gIFRpbWVsaW5lLFxuICBUb29sdGlwLFxuICBUcmVlU2VsZWN0LFxuICBub3RpZmljYXRpb24sXG59IGZyb20gXCJhbnRkXCI7XG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0aWNreSBmcm9tIFwid2lsLXJlYWN0LXN0aWNreVwiO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL2xheW91dC1kYXNoYm9hcmQyXCI7XG5pbXBvcnQgc3QgZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0LWRhc2hib2FyZC5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgaHR0cGNvb2tpZSBmcm9tIFwiY29va2llXCI7XG5cbmNvbnN0IE92ZXJ2aWV3ID0gKHtcbiAgaXRlbWlkLFxuICBpbml0UHJvcHMsXG4gIG1haW5kYXRhLFxuICBtYW51ZixcbiAgdmVuZG9yLFxuICBwcmFsb2FkaW5nLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICAvL3VzZVN0YXRlXG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMyLCBzZXRpbnZyZWxhdGlvbnMyXSA9IHVzZVN0YXRlKHt9KTtcblxuICAvL2hlbHBlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtYi04XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC14bCBteS1hdXRvXCI+T3ZlcnZpZXc8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZyA/IG51bGwgOiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgcnQucHVzaChgL2l0ZW1zL3VwZGF0ZS8ke2l0ZW1pZH1gKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVWJhaFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7cHJhbG9hZGluZyA/IChcbiAgICAgICAgPFNwaW4gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCBteC01IHAtNSB3LTkvMTIgYm9yZGVyIHNoYWRvdy1tZCByb3VuZGVkLW1kIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TmFtYSBJdGVtOjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+e21haW5kYXRhLm1pZ19pZH0gLSB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TW9kZWw6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPnttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZWwgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBNb2RlbCFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5Lm5hbWV9PC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkFzc2V0IFR5cGU6PC9oMT5cbiAgICAgICAgICAgIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuZGVsZXRlZF9hdCAhPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgbXItMVwiPlxuICAgICAgICAgICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBc3NldCBUeXBlIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gQXNzZXQgVHlwZSFcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgYnJvd25gIH19XG4gICAgICAgICAgICAgICAgICA+PC9FeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICB7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0Lm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCIgdGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTBcIj5NSUcgSUQ6PC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPnttYWluZGF0YS5taWdfaWR9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+U2VyaWFsIE51bWJlcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5zZXJpYWxfbnVtYmVyID09PSBcIlwiIHx8IG1haW5kYXRhLnNlcmlhbF9udW1iZXIgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgOiBtYWluZGF0YS5zZXJpYWxfbnVtYmVyfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+TWFudWZhY3R1cmVyOjwvaDE+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihkb2NmaWwgPT4gZG9jZmlsLmlkID09PSBtYWluZGF0YS5tYW51ZmFjdHVyZXJfaWQpWzBdLmRlbGV0ZWRfYXQgIT09IG51bGxcbiAgICAgICAgICAgICAgbWFudWYuaXNudWxsID09PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIG1yLTFcIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTWFudWZhY3R1cmVyIHRlbGFoIGRpaGFwdXMsIHNlZ2VyYSBsYWt1a2FuIHBlbmd1YmFoYW4gTWFudWZhY3R1cmVyIVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wIHRleHQtc21cIj57bWFudWYubmFtZX08L3A+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPlZlbmRvcjo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS52ZW5kb3JfaWQgPT09IG51bGwgPyBcIi1cIiA6IHZlbmRvcn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkxvY2F0aW9uOjwvaDE+XG4gICAgICAgICAgICB7bWFpbmRhdGEuaXNfY29uc3VtYWJsZSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgbWFpbmRhdGEucXVhbnRpdGllcy5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICB7aWR4ICsgMX0uIHtkb2MubmFtZX0gLSB7ZG9jLnF1YW50aXR5fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIHttYWluZGF0YS5sb2NhdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgICAgOiBtYWluZGF0YS5sb2NhdGlvbl9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMFwiPkRlc2tyaXBzaTo8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHttYWluZGF0YS5kZXNrcmlwc2kgPT09IFwiXCIgfHwgbWFpbmRhdGEuZGVza3JpcHNpID09PSBudWxsXG4gICAgICAgICAgICAgICAgPyBcIi1cIlxuICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuZGVza3JpcHNpfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICAgIHttYWluZGF0YS5hZGRpdGlvbmFsX2F0dHJpYnV0ZXMubWFwKChkb2Njb2x1bW5zLCBpZHhjb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZHhjb2x1bW5zfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgbWItNSAke1xuICAgICAgICAgICAgICAgICAgaWR4Y29sdW1ucyA9PT0gMCA/IGBtdC01YCA6IGBgXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiIHRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5uYW1lfTpcbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2RvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRyb3Bkb3duXCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImNoZWNrYm94XCIgfHxcbiAgICAgICAgICAgICAgICAgIGRvY2NvbHVtbnMuZGF0YV90eXBlID09PSBcImRhdGVcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICB7ZG9jY29sdW1ucy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Pntkb2Njb2x1bW5zLnZhbHVlLm9wc2lbZG9jY29sdW1ucy52YWx1ZS5kZWZhdWx0XX08Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJjaGVja2JveFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLnZhbHVlLm9wc2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChfLCBpZHhmaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2Njb2x1bW5zLnZhbHVlLmRlZmF1bHQuaW5jbHVkZXMoaWR4ZmlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkb2Njb2x1bW5zLmRhdGFfdHlwZSA9PT0gXCJkYXRlXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge21vbWVudChkb2Njb2x1bW5zLnZhbHVlKS5sb2NhbGUoXCJpZFwiKS5mb3JtYXQoXCJMTFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD57ZG9jY29sdW1ucy52YWx1ZX08Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5jb25zdCBLb25maWd1cmFzaVBhcnQgPSAoe1xuICBpbml0UHJvcHMsXG4gIGl0ZW1pZCxcbiAgaW52cmVsYXRpb25zLFxuICBtYWluZGF0YSxcbiAgcHJhbG9hZGluZzIsXG4gIG1vZGVscyxcbiAgc2V0bW9kZWxzLFxufSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuXG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW21haW5wYXJ0ZGF0YSwgc2V0bWFpbnBhcnRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2Fzc2V0ZGF0YSwgc2V0YXNzZXRkYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdwYXJ0LCBzZXRwcmFsb2FkaW5ncGFydF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthc3NldHR5cGVmaWx0ZXJhY3QsIHNldGFzc2V0dHlwZWZpbHRlcmFjdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3NldHR5cGV2YWx1ZSwgc2V0YXNzZXR0eXBldmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RlbGZpbHRlcmFjdCwgc2V0bW9kZWxmaWx0ZXJhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWx2YWx1ZSwgc2V0bW9kZWx2YWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2RhdGF0cmlnZ2VyLCBzZXRkYXRhdHJpZ2dlcl0gPSB1c2VTdGF0ZSgwKTtcbiAgLy9jaGFuZ2VkIGRhbiByZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVwbGFjZW1lbnRzLCBzZXRkYXRhcmVwbGFjZW1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BvcG92ZXIsIHNldHBvcG92ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2NoYW5nZWRcbiAgY29uc3QgW2RhdGFjaGFuZ2VkLCBzZXRkYXRhY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IG51bGwsXG4gICAgbW9kZWxfaWQ6IG51bGwsXG4gICAgaW52ZW50b3J5X25hbWU6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICB9LFxuICAgIHN0YXR1c191c2FnZToge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBuYW1lOiBcIlwiLFxuICAgIH0sXG4gICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICBtb2RlbF9pbnZlbnRvcnk6IHtcbiAgICAgIGlkOiBudWxsLFxuICAgICAgbmFtZTogXCJcIixcbiAgICAgIGFzc2V0X2lkOiBudWxsLFxuICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIGFzc2V0OiB7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBcIlwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgW2RhdGFBcGljaGFuZ2VkLCBzZXRkYXRhQXBpY2hhbmdlZF0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IDAsXG4gICAgcmVwbGFjZW1lbnRfaWQ6IDAsXG4gICAgbm90ZXM6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxjaGFuZ2VkLCBzZXRtb2RhbGNoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGlzYWJsZWRjaGFuZ2VkLCBzZXRkaXNhYmxlZGNoYW5nZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nY2hhbmdlZCwgc2V0bG9hZGluZ2NoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdHJpZ2dlcmNoYW5nZWQsIHNldHRyaWdnZXJjaGFuZ2VkXSA9IHVzZVN0YXRlKC0xKTtcbiAgLy9yZW1vdmVkXG4gIGNvbnN0IFtkYXRhcmVtb3ZlZCwgc2V0ZGF0YXJlbW92ZWRdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGF0YUFwaXJlbW92ZWQsIHNldGRhdGFBcGlyZW1vdmVkXSA9IHVzZVN0YXRlKHtcbiAgICBpZDogMCxcbiAgICBpbnZlbnRvcnlfcGFydF9pZDogMCxcbiAgICBub3RlczogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFttb2RhbHJlbW92ZWQsIHNldG1vZGFscmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZHJlbW92ZWQsIHNldGRpc2FibGVkcmVtb3ZlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdyZW1vdmVkLCBzZXRsb2FkaW5ncmVtb3ZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmZXRjaGluZ21vZGVsLCBzZXRmZXRjaGluZ21vZGVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2JhY2t1cG1vZGVscywgc2V0YmFja3VwbW9kZWxzXSA9IHVzZVN0YXRlKG1vZGVscyk7XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICAvLyB7XG4gICAgLy8gICAgIHRpdGxlOiAnTmFtYSBJdGVtJyxcbiAgICAvLyAgICAgZGF0YUluZGV4OiAnaW52ZW50b3J5X25hbWUnLFxuICAgIC8vICAgICBrZXk6ICdpbnZlbnRvcnlfbmFtZScsXG4gICAgLy8gfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNSUcgSURcIixcbiAgICAgIGRhdGFJbmRleDogXCJtaWdfaWRcIixcbiAgICAgIGtleTogXCJtaWdfaWRcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlNlcmlhbCBOdW1iZXJcIixcbiAgICAgIGRhdGFJbmRleDogXCJzZXJpYWxfbnVtYmVyXCIsXG4gICAgICBrZXk6IFwic2VyaWFsX251bWJlclwiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PntyZWNvcmQuc2VyaWFsX251bWJlciA9PT0gbnVsbCA/IFwiLVwiIDogcmVjb3JkLnNlcmlhbF9udW1iZXJ9PC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJNb2RlbFwiLFxuICAgICAgZGF0YUluZGV4OiBcIm1vZGVsX25hbWVcIixcbiAgICAgIGtleTogXCJtb2RlbF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkubmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQXNzZXQgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcImFzc2V0X25hbWVcIixcbiAgICAgIGtleTogXCJhc3NldF9uYW1lXCIsXG4gICAgICByZW5kZXI6ICh0ZXh0LCByZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hpbGRyZW46IDw+e3JlY29yZC5tb2RlbF9pbnZlbnRvcnkuYXNzZXQuYXNzZXRfbmFtZX08Lz4sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgIHZpc2libGU9e3BvcG92ZXJ9XG4gICAgICAgICAgICAgICAgICBvblZpc2libGVDaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiBgMHB4YCwgbWFyZ2luOiBgMHB4YCB9fVxuICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0cG9wb3ZlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb3NlQ2lyY2xlT3V0bGluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGByZWRgLCBmb250U2l6ZTogYDEuMXJlbWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAxMDAlYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhcmVtb3ZlZChyZWNvcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpcmVtb3ZlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaXJlbW92ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1haW5wYXJ0ZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlfcGFydF9pZDogcmVjb3JkLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxyZW1vdmVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRwb3BvdmVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFya2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFjaGFuZ2VkKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGFsY2hhbmdlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRyaWdnZXJjaGFuZ2VkKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbnRpa2FuIFBhcnRcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+S2VsdWFya2FuIFBhcnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGwgcC00XCI+R2FudGlrYW4gUGFydDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldHBvcG92ZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Q2xvc2VDaXJjbGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBgcmVkYCwgZm9udFNpemU6IGAxLjVyZW1gIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICAvL2hlbHBlclxuICAvLzEgbnlhIGxhZ2kgYWRhIGRpIHVzZUVmZmVjdFxuICBjb25zdCByZWN1cnNpdmVGbGF0dGVuQXJyID0gKGRhdGFhc3NldHMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBkYXRhYXNzZXRzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZCk7XG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICByZXN1bHQucHVzaCguLi5yZWN1cnNpdmVGbGF0dGVuQXJyKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBmdW5jdGlvbiByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWEpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhYVtpXVtcImtleVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXCJ2YWx1ZVwiXSA9IGRhdGFhW2ldLmlkO1xuICAgICAgZGF0YWFbaV1bXG4gICAgICAgIFwidGl0bGVcIlxuICAgICAgXSA9IGAke2RhdGFhW2ldLm1pZ19pZH0gLSAke2RhdGFhW2ldLm1vZGVsX2ludmVudG9yeT8ubmFtZX1gO1xuICAgICAgZGF0YWFbaV1bXCJjaGlsZHJlblwiXSA9IGRhdGFhW2ldLmludmVudG9yeV9yZXBsYWNlbWVudF9wYXJ0cztcbiAgICAgIGRlbGV0ZSBkYXRhYVtpXS5pbnZlbnRvcnlfcmVwbGFjZW1lbnRfcGFydHM7XG4gICAgICBpZiAoZGF0YWFbaV0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZWN1cnNpdmVNb2RpZkRhdGEoZGF0YWFbaV0uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YWE7XG4gIH1cblxuICAvL2hhbmRsZXJcbiAgY29uc3QgYXNzZXRQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQgPSAoZG9jLCBhc3NldGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2ludmVudG9yeS5hc3NldC5pZCA9PT0gTnVtYmVyKGFzc2V0aWQpKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIGFzc2V0UGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tQXNzZXQoZG9jW2ldLmNoaWxkcmVuLCBhc3NldGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbW9kZWxQYXJ0ID0gW107XG4gIGNvbnN0IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwgPSAoZG9jLCBtb2RlbGlkKSA9PiB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZG9jW2ldLm1vZGVsX2lkID09PSBtb2RlbGlkKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIG1vZGVsUGFydC5wdXNoKGRvY1tpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jW2ldLmNoaWxkcmVuKSB7XG4gICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgLi4uZG9jW2ldLFxuICAgICAgICAgICAgY2hpbGRyZW46IHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZG9jW2ldLmNoaWxkcmVuLCBtb2RlbGlkKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgY29uc3QgbmFtZVBhcnQgPSBbXTtcbiAgY29uc3QgcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lID0gKGRvYywgbmFtZSkgPT4ge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY1tpXS5pbnZlbnRvcnlfbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgbmFtZVBhcnQucHVzaChkb2NbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY1tpXS5jaGlsZHJlbikge1xuICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRvY1tpXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZG9jW2ldLmNoaWxkcmVuLCBuYW1lKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAuLi5kb2NbaV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgLy9kZWxpdmVyIEFQSVxuICBjb25zdCBoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0ID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdjaGFuZ2VkKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9yZXBsYWNlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpY2hhbmdlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpZ2FudGlcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVSZW1vdmVJdGVtUGFydCA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5ncmVtb3ZlZCh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vcmVtb3ZlSW52ZW50b3J5UGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpcmVtb3ZlZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ncmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIGlmIChyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJzdWNjZXNzXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXRlbSBQYXJ0IGJlcmhhc2lsIGRpa2VsdWFya2FuXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRtb2RhbHJlbW92ZWQoZmFsc2UpO1xuICAgICAgICAgIHNldGRhdGF0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcImVycm9yXCJdKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlczIubWVzc2FnZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vc2VhcmNoIGFzc2V0IHR5cGVcbiAgY29uc3Qgb25DaGFuZ2VBc3NldFR5cGUgPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRhc3NldHR5cGVmaWx0ZXJhY3QoZmFsc2UpO1xuICAgICAgc2V0bW9kZWxzKGJhY2t1cG1vZGVscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0TW9kZWxzP3Jvd3M9MTAwJmFzc2V0X2lkPSR7aWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICByZXMyLmRhdGEubGVuZ3RoID09PSAwID8gc2V0bW9kZWxzKFtdKSA6IHNldG1vZGVscyhyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0YXNzZXR0eXBlZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0YXNzZXR0eXBldmFsdWUoaWQpO1xuICAgIH1cbiAgfTtcbiAgLy9zZWFyY2ggbW9kZWxcbiAgY29uc3Qgb25DaGFuZ2VNb2RlbCA9IChpZG1vZGVsKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpZG1vZGVsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZXRkYXRhdGFibGUoZGF0YXRhYmxlMyk7XG4gICAgICBzZXRtb2RlbGZpbHRlcmFjdChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldG1vZGVsZmlsdGVyYWN0KHRydWUpO1xuICAgICAgc2V0bW9kZWx2YWx1ZShpZG1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAoYXNzZXR0eXBlZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Bc3NldChkYXRhdGVtcCwgYXNzZXR0eXBldmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbUFzc2V0KGRhdGF0ZW1wLCBhc3NldHR5cGV2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IGFzc2V0UGFydDtcbiAgICB9XG4gICAgaWYgKG1vZGVsZmlsdGVyYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21Nb2RlbChkYXRhdGVtcCwgbW9kZWx2YWx1ZSlcbiAgICAgIHJlY3Vyc2l2ZVNlYXJjaFBhcnRGcm9tTW9kZWwoZGF0YXRlbXAsIG1vZGVsdmFsdWUpO1xuICAgICAgZGF0YXRlbXAgPSBtb2RlbFBhcnQ7XG4gICAgfVxuICAgIGlmIChuYW1hc2VhcmNoYWN0KSB7XG4gICAgICAvLyBjb25zdCB0ID0gcmVjdXJzaXZlU2VhcmNoUGFydEZyb21OYW1lKGRhdGF0ZW1wLCBuYW1hdmFsdWUpXG4gICAgICByZWN1cnNpdmVTZWFyY2hQYXJ0RnJvbU5hbWUoZGF0YXRlbXAsIG5hbWF2YWx1ZSk7XG4gICAgICBkYXRhdGVtcCA9IG5hbWVQYXJ0O1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEludmVudG9yeT9pZD0ke2l0ZW1pZH1gLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlczIuZGF0YTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBjb25zdCByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuID0gKHJzYykgPT4ge1xuICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcnNjW2ldLmtleSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS52YWx1ZSA9IHJzY1tpXS5pZDtcbiAgICAgICAgICAgIHJzY1tpXS50aXRsZSA9IGAke3JzY1tpXS5taWdfaWR9IC0gJHtyc2NbaV0ubW9kZWxfaW52ZW50b3J5Py5uYW1lfWA7XG4gICAgICAgICAgICByc2NbaV0uY2hpbGRyZW4gPSByc2NbaV0uaW52ZW50b3J5X3BhcnRzO1xuICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5pbnZlbnRvcnlfcGFydHM7XG4gICAgICAgICAgICBpZiAocnNjW2ldLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4ucnNjW2ldLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJzY1tpXS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHJzY1tpXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLnJzY1tpXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSByZWN1cnNpdmVDaGFuZ2V0b0NoaWxkcmVuKHJlczMuaW52ZW50b3J5X3BhcnRzKTtcbiAgICAgICAgc2V0bWFpbnBhcnRkYXRhKHtcbiAgICAgICAgICAuLi5yZXMzLFxuICAgICAgICAgIGludmVudG9yeV9wYXJ0czogdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldGRhdGF0YWJsZSh0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMih0KTtcbiAgICAgICAgc2V0ZGF0YXRhYmxlMyh0KTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ3BhcnQoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmlnZ2VyY2hhbmdlZCAhPT0gLTEpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVwbGFjZW1lbnRzP2lkPSR7ZGF0YWNoYW5nZWQubW9kZWxfaW52ZW50b3J5LmFzc2V0X2lkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWFwZGF0YSA9IHJlY3Vyc2l2ZU1vZGlmRGF0YShyZXMyLmRhdGEpO1xuICAgICAgICAgIHNldGRhdGFyZXBsYWNlbWVudHMobWFwZGF0YSk7XG4gICAgICAgICAgaWYgKG1hcGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRkaXNhYmxlZGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdHJpZ2dlcmNoYW5nZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0QXNzZXRzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGFzc2V0ZGF0YShyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPktvbmZpZ3VyYXNpIFBhcnQ8L2gxPlxuICAgICAgICB7cHJhbG9hZGluZzIgPyBudWxsIDogKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIC8qY29uc29sZS5sb2cobWFpbnBhcnRkYXRhKTsgY29uc29sZS5sb2coZGF0YXJlbW92ZWQpKi8gcnQucHVzaChcbiAgICAgICAgICAgICAgICBgL2l0ZW1zL2NyZWF0ZXBhcnQvJHtpdGVtaWR9P25hbWE9JHttYWlucGFydGRhdGEubWlnX2lkfWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGFtYmFoXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBtYi01XCI+XG4gICAgICAgIHtwcmFsb2FkaW5nMiA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBtci0xXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAsIG1hcmdpblJpZ2h0OiBgMC41cmVtYCB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2FyaSBOYW1hIEl0ZW1cIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2VTZWFyY2goZSl9XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICA+PC9JbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25TdHlsZT17eyBtYXhIZWlnaHQ6IDQwMCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XG4gICAgICAgICAgICAgICAgdHJlZURhdGE9e2Fzc2V0ZGF0YX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgQXNzZXQgVHlwZVwiXG4gICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRBbGxcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSwgbGFiZWwsIGV4dHJhKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQXNzZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUFzc2V0VHlwZShleHRyYS5hbGxDaGVja2VkTm9kZXNbMF0ubm9kZS5wcm9wcy5pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc3Bhbi0zIG1yLTFcIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17ZmV0Y2hpbmdtb2RlbCA/IDxTcGluIHNpemU9XCJzbWFsbFwiIC8+IDogbnVsbH1cbiAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRmZXRjaGluZ21vZGVsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMXG4gICAgICAgICAgICAgICAgICAgIH0vZ2V0RmlsdGVyTW9kZWxzP25hbWU9JHt2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIn1gLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDYXJpIE1vZGVsXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VNb2RlbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHttb2RlbHMubWFwKChkb2Ntb2RlbHMsIGlkeG1vZGVscykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvY21vZGVscy5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAge2RvY21vZGVscy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLXNwYW4tMVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTAwJWAgfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkZpbmFsQ2xpY2t9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPFRhYmxlXG4gICAgICAgIGxvYWRpbmc9e3ByYWxvYWRpbmdwYXJ0fVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gUGVyZ2FudGlhbiBQYXJ0IFwie2RhdGFjaGFuZ2VkLmludmVudG9yeV9uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGNoYW5nZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWNoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGNoYW5nZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXBsYWNlbWVudEl0ZW1QYXJ0fVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxjaGFuZ2VkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsY2hhbmdlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCB5YW5nIEluZ2luIERpZ2FudGl7XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGF0YWJsZTN9XG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17ZGF0YWNoYW5nZWQua2V5fVxuICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIEFzc2V0IFR5cGUgZGFyaSBJdGVtIFBhcnQgeWFuZyBpbmdpbiBkaWdhbnRpe1wiIFwifVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hcGFydFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtc20gZmxleCBpdGVtcy1jZW50ZXIgYmctZ3JheS0xMDAgYm9yZGVyIHAtMiBoLThcIj5cbiAgICAgICAgICAgICAge2RhdGFjaGFuZ2VkLm1vZGVsX2ludmVudG9yeS5hc3NldC5uYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtYXBhcnQ6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBOYW1hIEl0ZW0gUGFydCBQZW5nZ2FudGkgPHNwYW4gY2xhc3NOYW1lPVwibmFtYXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0ZGlzYWJsZWRjaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhY2hhbmdlZC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgdHJlZURhdGE9e2RhdGFyZXBsYWNlbWVudHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsvKiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFyZXBsYWNlbWVudHMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLmludmVudG9yeV9uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgPC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFwYXJ0OjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5Ob3RlczwvcD5cbiAgICAgICAgICAgIDxJbnB1dC5UZXh0QXJlYVxuICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIE5vdGVzXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2RhdGFBcGljaGFuZ2VkLm5vdGVzfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpY2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgIG5vdGVzOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0LlRleHRBcmVhPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICBBcGFrYWggYW5kYSB5YWtpbiBpbmdpbiBtZW5nZWx1YXJrYW4gaXRlbSBcIlxuICAgICAgICAgICAge2RhdGFyZW1vdmVkLmludmVudG9yeV9uYW1lfVwiIGRhcmkgXCJ7bWFpbnBhcnRkYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxyZW1vdmVkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFscmVtb3ZlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9rVGV4dD1cIllhXCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlRpZGFrXCJcbiAgICAgICAgb25Paz17aGFuZGxlUmVtb3ZlSXRlbVBhcnR9XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ3JlbW92ZWQgfX1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGRhdGFBcGlyZW1vdmVkKHsgLi4uZGF0YUFwaXJlbW92ZWQsIG5vdGVzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48L0lucHV0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgUmVsYXRpb25zaGlwID0gKHsgaW5pdFByb3BzLCBtYWluZGF0YSwgaXRlbWlkIH0pID0+IHtcbiAgLy9pbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIC8vdXNlc3RhdGVcbiAgY29uc3QgW2V2ZW50cywgc2V0ZXZlbnRzXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGF0YXRhYmxlLCBzZXRkYXRhdGFibGVdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbZGF0YXRhYmxlMiwgc2V0ZGF0YXRhYmxlMl0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkYXRhdGFibGUzLCBzZXRkYXRhdGFibGUzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW25hbWFzZWFyY2hhY3QsIHNldG5hbWFzZWFyY2hhY3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmFtYXZhbHVlLCBzZXRuYW1hdmFsdWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtkYXRhdHJpZ2dlciwgc2V0ZGF0YXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtsb2FkaW5ncmVsLCBzZXRsb2FkaW5ncmVsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdyZWwsIHNldHByYWxvYWRpbmdyZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2RlbGV0ZVxuICBjb25zdCBbZGF0YUFwaWRlbGV0ZSwgc2V0ZGF0YUFwaWRlbGV0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gIH0pO1xuICBjb25zdCBbbW9kYWxkZWxldGUsIHNldG1vZGFsZGVsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xvYWRpbmdkZWxldGUsIHNldGxvYWRpbmdkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25kYXRhZGVsZXRlLCBzZXRyZWxhdGlvbmRhdGFkZWxldGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgdGlwZTogXCJcIixcbiAgICBrb25la3NpOiBcIlwiLFxuICB9KTtcbiAgLy9hZGRcbiAgY29uc3QgW2RhdGFBcGlhZGQsIHNldGRhdGFBcGlhZGRdID0gdXNlU3RhdGUoe1xuICAgIHN1YmplY3RfaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICBpc19pbnZlcnNlOiBudWxsLFxuICAgIHR5cGVfaWQ6IG51bGwsXG4gICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNwbGF5ZGF0YXJlbGF0aW9ucywgc2V0ZGlzcGxheWRhdGFyZWxhdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbcmVsYXRpb25uYW1lYWRkLCBzZXRyZWxhdGlvbm5hbWVhZGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbm5hbWVkZGFkZCwgc2V0cmVsYXRpb25uYW1lZGRhZGRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVsYXRpb25zZWxlY3RlZGlkeGFkZCwgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZF0gPSB1c2VTdGF0ZSgtMSk7XG4gIGNvbnN0IFtyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkLCBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkXSA9XG4gICAgdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbZGV0YWlsdGlwZWFkZCwgc2V0ZGV0YWlsdGlwZWFkZF0gPSB1c2VTdGF0ZSgtMTApO1xuICBjb25zdCBbZGV0YWlsdGlwZWRhdGFhZGQsIHNldGRldGFpbHRpcGVkYXRhYWRkXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGFsYWRkLCBzZXRtb2RhbGFkZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNhYmxlZGFkZCwgc2V0ZGlzYWJsZWRhZGRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5nYWRkLCBzZXRsb2FkaW5nYWRkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZldGNoaW5nbW9kZWwsIHNldGZldGNoaW5nbW9kZWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jZGF0YSwgc2V0c3VibG9jZGF0YV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N1YmxvY3RyaWcsIHNldHN1YmxvY3RyaWddID0gdXNlU3RhdGUoLTEpO1xuXG4gIC8vZGVjbGFyYXRpb25cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJSZWxhdGlvbnNoaXAgVHlwZVwiLFxuICAgICAgZGF0YUluZGV4OiBcInJlbGF0aW9uc2hpcF9uYW1lXCIsXG4gICAgICBrZXk6IFwicmVsYXRpb25zaGlwX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIk5hbWFcIixcbiAgICAgIGRhdGFJbmRleDogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICAgIGtleTogXCJjb25uZWN0ZWRfZGV0YWlsX25hbWVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlR5cGVcIixcbiAgICAgIGRhdGFJbmRleDogXCJ0eXBlXCIsXG4gICAgICBrZXk6IFwidHlwZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcXHhhMFxceGEwXFx4YTBcIixcbiAgICAgIGRhdGFJbmRleDogXCJhY3Rpb25zc1wiLFxuICAgICAgcmVuZGVyOiAodGV4dCwgcmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZXZlbnRzID09PSByZWNvcmQuaWQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxEZWxldGVPdXRsaW5lZFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWRlbGV0ZSh7IGlkOiByZWNvcmQuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25kYXRhZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZC5yZWxhdGlvbnNoaXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGU6IHJlY29yZC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAga29uZWtzaTogcmVjb3JkLmNvbm5lY3RlZF9kZXRhaWxfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogYDEuMnJlbWAsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGByZWRgLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogYHBvaW50ZXJgLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIC8vaGFuZGxlclxuICAvL3NlYXJjaCBuYW1hXG4gIGNvbnN0IG9uQ2hhbmdlU2VhcmNoID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNldGRhdGF0YWJsZShkYXRhdGFibGUzKTtcbiAgICAgIHNldG5hbWFzZWFyY2hhY3QoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRuYW1hc2VhcmNoYWN0KHRydWUpO1xuICAgICAgc2V0bmFtYXZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH07XG4gIC8vZmluYWxDbGlja1xuICBjb25zdCBvbkZpbmFsQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmFyIGRhdGF0ZW1wID0gZGF0YXRhYmxlMjtcbiAgICBpZiAobmFtYXNlYXJjaGFjdCkge1xuICAgICAgZGF0YXRlbXAgPSBkYXRhdGVtcC5maWx0ZXIoKGZsdCkgPT4ge1xuICAgICAgICByZXR1cm4gZmx0LmNvbm5lY3RlZF9kZXRhaWxfbmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKG5hbWF2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRkYXRhdGFibGUoZGF0YXRlbXApO1xuICB9O1xuXG4gIC8vaGFuZGxlclxuICBjb25zdCBoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdkZWxldGUodHJ1ZSk7XG4gICAgZmV0Y2goXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZGVsZXRlUmVsYXRpb25zaGlwSW52ZW50b3J5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhQXBpZGVsZXRlKSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ2RlbGV0ZShmYWxzZSk7XG4gICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgYmVyaGFzaWwgZGloYXB1c1wiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVBZGRSZWxhdGlvbnNoaXBJdGVtID0gKCkgPT4ge1xuICAgIHNldGxvYWRpbmdhZGQodHJ1ZSk7XG4gICAgZGVsZXRlIGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhQXBpYWRkKVxuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRSZWxhdGlvbnNoaXBJbnZlbnRvcmllc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YUFwaWFkZCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nYWRkKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxhZGQoZmFsc2UpO1xuICAgICAgICBpZiAocmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICBzdWJqZWN0X2lkOiBOdW1iZXIoaXRlbWlkKSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcF9pZDogbnVsbCxcbiAgICAgICAgICAgIGlzX2ludmVyc2U6IG51bGwsXG4gICAgICAgICAgICB0eXBlX2lkOiBudWxsLFxuICAgICAgICAgICAgY29ubmVjdGVkX2lkczogbnVsbCxcbiAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiBudWxsLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWFkZChcIlwiKTtcbiAgICAgICAgICBzZXRzdWJsb2NkYXRhKG51bGwpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQoLTEpO1xuICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoLTEpO1xuICAgICAgICAgIHNldHN1YmxvY3RyaWcoLTEpO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJSZWxhdGlvbnNoaXAgSXRlbSBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0ZGF0YXRyaWdnZXIoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vdXNlRWZmZWN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGF0cmlnZ2VyICE9PSAtMSkge1xuICAgICAgc2V0cHJhbG9hZGluZ3JlbCh0cnVlKTtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0UmVsYXRpb25zaGlwSW52ZW50b3J5P2lkPSR7aXRlbWlkfSZ0eXBlX2lkPS00YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBzZXRkYXRhdGFibGUoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTIoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldGRhdGF0YWJsZTMoXG4gICAgICAgICAgICByZXMyLmRhdGEuZnJvbV9pbnZlcnNlLmNvbmNhdChyZXMyLmRhdGEubm90X2Zyb21faW52ZXJzZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldHByYWxvYWRpbmdyZWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtkYXRhdHJpZ2dlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBzYCwge1xuICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGRpc3BsYXlkYXRhcmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdWJsb2N0cmlnICE9PSAtMSkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtzdWJsb2N0cmlnfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgc2V0c3VibG9jZGF0YShyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRldGFpbHRpcGVhZGQgIT09IC0xMCkge1xuICAgICAgZmV0Y2goXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkYXRhQXBpYWRkLnR5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0zICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKFtyZXMyLmRhdGFdKTtcbiAgICAgICAgICBkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC0xICYmIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiBzZXRkZXRhaWx0aXBlZGF0YWFkZChyZXMyLmRhdGEpO1xuICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTQgJiYgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhLmRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2RldGFpbHRpcGVhZGQsIHN1YmxvY3RyaWddKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsIG15LWF1dG8gbXItMVwiPlJlbGF0aW9uc2hpcDwvaDE+XG4gICAgICAgICAge21haW5kYXRhLm1vZGVsX2ludmVudG9yeS5hc3NldC5kZWxldGVkX2F0ICE9PSBudWxsID8gKFxuICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkFzc2V0IFR5cGUgdGVsYWggZGloYXB1cywgc2VnZXJhIGxha3VrYW4gcGVuZ3ViYWhhbiBBc3NldCBUeXBlIVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFeGNsYW1hdGlvbkNpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IGBicm93bmAgfX1cbiAgICAgICAgICAgICAgPjwvRXhjbGFtYXRpb25DaXJjbGVPdXRsaW5lZD5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTsgLypydC5wdXNoKGAvaXRlbXMvY3JlYXRlcmVsYXRpb25zaGlwLyR7aXRlbWlkfT9uYW1hPSR7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9JmFzc2V0X2lkPSR7bWFpbmRhdGEubW9kZWxfaW52ZW50b3J5LmFzc2V0LmlkfWApKi9cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgVGFtYmFoXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWItNVwiPlxuICAgICAgICB7cHJhbG9hZGluZ3JlbCA/IG51bGwgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdy1mdWxsIG1yLTEgZ3JpZCBncmlkLWNvbHMtMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMTEgbXItMVwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgLCBtYXJnaW5SaWdodDogYDAuNXJlbWAgfX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgTmFtYSBJdGVtXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlU2VhcmNoKGUpfVxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgPjwvSW5wdXQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwMCVgIH19XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25GaW5hbENsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxUYWJsZVxuICAgICAgICBsb2FkaW5nPXtwcmFsb2FkaW5ncmVsfVxuICAgICAgICBwYWdpbmF0aW9uPXt7IHBhZ2VTaXplOiA5IH19XG4gICAgICAgIHNjcm9sbD17eyB4OiAyMDAgfX1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YXRhYmxlfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBvblJvdz17KHJlY29yZCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBzZXRldmVudHMoMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH19XG4gICAgICA+PC9UYWJsZT5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIEFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBSZWxhdGlvbnNoaXAgYmVyaWt1dCBpbmkgZGFyaSBcIlxuICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9uYW1lfVwiP1xuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsZGVsZXRlfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb2tUZXh0PVwiWWFcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiVGlkYWtcIlxuICAgICAgICBvbk9rPXtoYW5kbGVEZWxldGVSZWxhdGlvbnNoaXBJdGVtfVxuICAgICAgICBva0J1dHRvblByb3BzPXt7IGxvYWRpbmc6IGxvYWRpbmdkZWxldGUgfX1cbiAgICAgICAgd2lkdGg9ezcwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGJvcmRlci1iIG1iLTVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5SZWxhdGlvbnNoaXAgVHlwZTo8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9uZGF0YWRlbGV0ZS5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbWItMFwiPlRpcGU6PC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntyZWxhdGlvbmRhdGFkZWxldGUudGlwZX08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTBcIj5JdGVtOjwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj57cmVsYXRpb25kYXRhZGVsZXRlLmtvbmVrc2l9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiIG9uQ2hhbmdlPXsoZSkgPT4ge319PjwvSW5wdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVGFtYmFoIFJlbGF0aW9uc2hpcCBcInttYWluZGF0YS5uYW1lfVwiXG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGFkZChcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApOyAvKnNldGRhdGFBcGlhZGQoeyAuLi5kYXRhQXBpYWRkLCByZWxhdGlvbnNoaXBfaWQ6IG51bGwsIHR5cGVfaWQ6IG51bGwsIGNvbm5lY3RlZF9pZDogbnVsbCB9KSovIC8qY29uc29sZS5sb2coZGF0YUFwaWFkZCkqL1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiBgMXJlbWAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYXRhbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZGFkZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJlbGF0aW9uc2hpcEl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nYWRkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsYWRkfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldG1vZGFsYWRkKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgZm9vdGVyPXtudWxsfVxuICAgICAgICB3aWR0aD17NzYwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFJlbGF0aW9uc2hpcCBUeXBlIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWFwYXJ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYm9yZGVyIHAtMiBob3Zlcjpib3JkZXItcHJpbWFyeSByb3VuZGVkLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbm5hbWVkZGFkZCgocHJldikgPT4gIXByZXYpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+e3JlbGF0aW9ubmFtZWFkZH08L3A+XG4gICAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgICA8VXBPdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPERvd25PdXRsaW5lZCBzdHlsZT17eyBjb2xvcjogYHJnYigyMjksMjMxLDIzNSlgIH19IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtyZWxhdGlvbm5hbWVkZGFkZCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBSZWxhdGlvbnNoaXAgVHlwZVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIGZvbnQtc2VtaWJvbGQgcC0zIHctNi8xMlwiPlxuICAgICAgICAgICAgICAgICAgICBJbnZlcnNlIFJlbGF0aW9uc2hpcCBUeXBlXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZGlzcGxheWRhdGFyZWxhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctdGVybmFyeSBjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsYWNrIHAtMyB3LTYvMTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zZWxlY3RlZGlkeGFkZCA9PT0gaWR4ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5yZWxhdGlvbnNoaXBfdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwX2lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfaW52ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IG51bGwgfHwgZGF0YUFwaWFkZC50eXBlX2lkID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXRkaXNhYmxlZGFkZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaWR4YWRkKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9uc2VsZWN0ZWRpc2ludmVyc2VhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLnJlbGF0aW9uc2hpcF90eXBlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGhvdmVyOmJnLXRlcm5hcnkgY3Vyc29yLXBvaW50ZXIgaG92ZXI6dGV4dC1ibGFjayBwLTMgdy02LzEyICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2VsZWN0ZWRpZHhhZGQgPT09IGlkeCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIiBiZy1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldHJlbGF0aW9ubmFtZWRkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25uYW1lYWRkKGRvYy5pbnZlcnNlX3JlbGF0aW9uc2hpcF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbnZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmlkID09PSBudWxsIHx8IGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldGRpc2FibGVkYWRkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0cmVsYXRpb25zZWxlY3RlZGlkeGFkZChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRyZWxhdGlvbnNlbGVjdGVkaXNpbnZlcnNlYWRkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLmludmVyc2VfcmVsYXRpb25zaGlwX3R5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uYW1hcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+XG4gICAgICAgICAgICAgIFRpcGUgPHNwYW4gY2xhc3NOYW1lPVwidGlwZXBhcnRcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtkYXRhQXBpYWRkLnR5cGVfaWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHsgLi4uZGF0YUFwaWFkZCwgdHlwZV9pZDogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5yZWxhdGlvbnNoaXBfaWQgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgID8gc2V0ZGlzYWJsZWRhZGQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIDogc2V0ZGlzYWJsZWRhZGQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVhZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRhdGFBcGlhZGQudHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgID8gKHNldHN1YmxvY3RyaWcoLTEpLCBzZXRzdWJsb2NkYXRhKG51bGwpKVxuICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTF9PkFnZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ey0zfT5Db21wYW55PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTR9PkFzc2V0IFR5cGU8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXBlcGFydDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgIT09IG51bGwgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMiAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZuYW1lPSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBcIlwiID8gdmFsdWUgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZGV0YWlsdGlwZWRhdGFhZGQocmVzMi5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvcHQuY2hpbGRyZW4udG9Mb3dlckNhc2UoKS5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49XG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFBcGlhZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cF9jb25uZWN0ZWRfaWRzOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RldGFpbHRpcGVkYXRhYWRkLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7ZGF0YUFwaWFkZC50eXBlX2lkID09PSAtMyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5EZXRhaWwgVGlwZTwvcD5cbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YUFwaWFkZC5iYWNrdXBfY29ubmVjdGVkX2lkcyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHNbMF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cz17WzFdfVxuICAgICAgICAgICAgICAgICAgICB0cmVlRGF0YT17ZGV0YWlsdGlwZWRhdGFhZGR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRhdGFBcGlhZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YUFwaWFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IFt2YWx1ZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogW3ZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRzdWJsb2N0cmlnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtkYXRhQXBpYWRkLnR5cGVfaWQgPT09IC00ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlPC9wPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNhcmkgZGVuZ2FuIE1vZGVsIElEXCJcbiAgICAgICAgICAgICAgICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgICAgICBub3RGb3VuZENvbnRlbnQ9e1xuICAgICAgICAgICAgICAgICAgICAgIGZldGNoaW5nbW9kZWwgPyA8U3BpbiBzaXplPVwic21hbGxcIiAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZmV0Y2hpbmdtb2RlbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICBmZXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTFxuICAgICAgICAgICAgICAgICAgICAgICAgfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnlEZXRhaWxMaXN0P3R5cGVfaWQ9JHtkZXRhaWx0aXBlYWRkfSZtb2RlbF9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPT0gXCJcIiA/IHZhbHVlIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRldGFpbHRpcGVkYXRhYWRkKHJlczIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZldGNoaW5nbW9kZWwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb3B0LmNoaWxkcmVuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PVxuICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBfY29ubmVjdGVkX2lkczogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkZXRhaWx0aXBlZGF0YWFkZC5tYXAoKGRvYywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXtkb2MuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZG9jLm1pZ19pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3N1YmxvY2RhdGEgIT09IG51bGwgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkRldGFpbCBUaXBlIChTdWJsb2thc2kpPC9wPlxuICAgICAgICAgICAgICA8VHJlZVNlbGVjdFxuICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgYWxsb3dDbGVhclxuICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtzdWJsb2NkYXRhfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIGxhYmVsLCBleHRyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRkYXRhQXBpYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhQXBpYWRkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZHM6IGRhdGFBcGlhZGQuYmFja3VwX2Nvbm5lY3RlZF9pZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0ZGF0YUFwaWFkZCh7IC4uLmRhdGFBcGlhZGQsIGNvbm5lY3RlZF9pZHM6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID48L1RyZWVTZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQXNzb2NpYXRpb24gPSAoeyBpbml0UHJvcHMsIGl0ZW1pZCwgbWFpbmRhdGEsIHByYWxvYWRpbmcgfSkgPT4ge1xuICBjb25zdCBydCA9IHVzZVJvdXRlcigpO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFzc29jaWF0aW9uPC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHB4LTVcIj5cbiAgICAgICAge3ByYWxvYWRpbmcgPyAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiBtYWluZGF0YS5hc3NvY2lhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHttYWluZGF0YS5hc3NvY2lhdGlvbnMubWFwKChkb2MsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgc2hhZG93LW1kIHB5LTQgcHgtNSBib3JkZXIgbWItNCBmbGV4IGp1c3RpZnktYmV0d2VlbiB3LTEwLzEyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcnQucHVzaChgL3RpY2tldHMvZGV0YWlsLyR7ZG9jLmlkfT9hY3RpdmU9ZGV0YWlsSXRlbWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+VGlja2V0IE51bWJlcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPntkb2MudGlja2V0X25hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLXJlZC0xMDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtkb2Muc3RhdHVzID09PSAzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIHB4LTIgdGV4dC1jZW50ZXIgYmctYmx1ZS0xMDAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7ZG9jLnN0YXR1c19uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7ZG9jLnN0YXR1cyA9PT0gNCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlciBweC0yIHRleHQtY2VudGVyIGJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge2RvYy5zdGF0dXNfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2RvYy5zdGF0dXMgPT09IDUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgZmxleCBpdGVtcy1jZW50ZXIgcHgtMiB0ZXh0LWNlbnRlciBiZy1ibHVlLTEwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtkb2Muc3RhdHVzX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuY29uc3QgQWNpdGl2dHkgPSAoe1xuICBpdGVtaWQsXG4gIGluaXRQcm9wcyxcbiAgbWFpbmRhdGEsXG4gIGludnJlbGF0aW9ucyxcbiAgcHJhbG9hZGluZyxcbiAgYWN0aXZpdHl0cmlnZ2VyLFxufSkgPT4ge1xuICBjb25zdCBbZGF5bG9ncywgc2V0ZGF5bG9nc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt3ZWVrbG9ncywgc2V0d2Vla2xvZ3NdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbbW9yZWxvZ3MsIHNldG1vcmVsb2dzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3ByYWxvYWRpbmdsb2dzLCBzZXRwcmFsb2FkaW5nbG9nc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2ludmVudG9yaWVzLCBzZXRpbnZlbnRvcmllc10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRwcmFsb2FkaW5nbG9ncyh0cnVlKTtcblxuICAgIGZldGNoKFxuICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldEFjdGl2aXR5SW52ZW50b3J5TG9ncz9pZD0ke2l0ZW1pZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgZGF5bG9nc21hcCA9IHJlczIuZGF0YS5kYXlfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2MxWzFdID09PSBcIkFzc29jaWF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgQXNzb2NpYXRpb24gRGloYXB1czogJHtkb2Nsb2dzLnByb3BlcnRpZXN9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRvY2xvZ3MsXG4gICAgICAgICAgICBkYXRlOiBkYXRlbmV3LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NuZXcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB3ZWVrbG9nc21hcCA9IHJlczIuZGF0YS53ZWVrX2xvZ3MubWFwKChkb2Nsb2dzLCBpZHhsb2dzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZW5ldyA9IG1vbWVudChkb2Nsb2dzLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdChcIkxMTFwiKTtcbiAgICAgICAgICB2YXIgZGVzY25ldyA9IFwiXCI7XG4gICAgICAgICAgY29uc3QgZGVzY2tvbmRpc2lPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJHb29kXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaUJhcnUgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJHcmV5XCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiQmFkXCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlT2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGRcbiAgICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIlJlcGxhY2VtZW50XCJcbiAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgZGVzY3VzYWdlQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMVxuICAgICAgICAgICAgICAgID8gXCJJbiBVc2VkXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gMlxuICAgICAgICAgICAgICAgID8gXCJJbiBTdG9ja1wiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjMSA9IGRvY2xvZ3MuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkZXNjMVsyXSA9PT0gXCJSZWxhdGlvbnNoaXBcIikge1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJDcmVhdGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcCBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzYzFbMV0gPT09IFwiQXNzb2NpYXRpb25cIikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID0gZGVzY25ldyArIGBBc3NvY2lhdGlvbiBCYXJ1OiAke2RvY2xvZ3MucHJvcGVydGllc31gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cykge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgSW5pc2lhbGlzYXNpIFBlbWJ1YXRhbiBJdGVtIFBhcnQgXCIke21haW5kYXRhLmludmVudG9yeV9wYXJ0c1xuICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZG9jZmlsKSA9PlxuICAgICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcz8ubGlzdF9wYXJ0cy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICBkb2NmaWwuaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLm1hcCgoZG9jbWFwKSA9PiBkb2NtYXAuaW52ZW50b3J5X25hbWUpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW1idWF0YW4gSXRlbSBCYXJ1IGJlcm5hbWEgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlc2MxWzBdID09PSBcIk5vdGVzXCJcbiAgICAgICAgICAgID8gKGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmFtYmFoYW4gTm90ZXNgKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGlmIChkZXNjMVswXSA9PT0gXCJVcGRhdGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBrb25kaXNpIGRhcmkgJHtkZXNja29uZGlzaU9sZH0ga2UgJHtkZXNja29uZGlzaUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIHN0YXR1cyBwZW1ha2FpYW4gZGFyaSAke2Rlc2N1c2FnZU9sZH0ga2UgJHtkZXNjdXNhZ2VCYXJ1fWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE5hbWEgSXRlbSBkYXJpIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmludmVudG9yeV9uYW1lfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pbnZlbnRvcnlfbmFtZX1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnNlcmlhbF9udW1iZXIpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gU2VyaWFsIE51bWJlciBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuc2VyaWFsX251bWJlcn1cIiBrZSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcn1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIExvY2F0aW9uIEl0ZW0gZGFyaSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLmNvbXBhbmllcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChkb2MpID0+IGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBWZW5kb3IgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy52ZW5kb3JfaWRcbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cImA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZCkge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBNYW51ZmFjdHVyZXIgSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiIGtlIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLm1hbnVmYWN0dXJlcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZGVza3JpcHNpKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gRGVza3JpcHNpIEl0ZW1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID5cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5hbWJhaGFuIEl0ZW0gXCIke2xpc3RwYXJ0c25ld1xuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIEl0ZW0gUGFydGA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmdlbHVhcmFuIEl0ZW0gUGFydCBcIiR7bGlzdHBhcnRzb2xkXG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0cGFydHNuZXcgPVxuICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c29sZCA9IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LmlkKVxuICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZG9jZmlsLmlkKSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlcmdhbnRpYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCIgbWVuamFkaSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBwcnB0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRvY2xvZ3MucHJvcGVydGllcy5vbGQpIHtcbiAgICAgICAgICAgICAgICBwcnB0cy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYFBlbmd1YmFoYW4gXCIke3BycHRzLmpvaW4oXCIsIFwiKX1cIiBJdGVtYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkRlbGV0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZG9jbG9ncyxcbiAgICAgICAgICAgIGRhdGU6IGRhdGVuZXcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY25ldyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1vcmVsb2dzbWFwID0gcmVzMi5kYXRhLmVsc2VfbG9ncy5tYXAoKGRvY2xvZ3MsIGlkeGxvZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlbmV3ID0gbW9tZW50KGRvY2xvZ3MuZGF0ZSkubG9jYWxlKFwiaWRcIikuZm9ybWF0KFwiTExMXCIpO1xuICAgICAgICAgIHZhciBkZXNjbmV3ID0gXCJcIjtcbiAgICAgICAgICBjb25zdCBkZXNja29uZGlzaU9sZCA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMub2xkXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkdvb2RcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfY29uZGl0aW9uID09PSAzXG4gICAgICAgICAgICAgICAgPyBcIkJhZFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2Nrb25kaXNpQmFydSA9IGRvY2xvZ3MucHJvcGVydGllc1xuICAgICAgICAgICAgPyBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlc1xuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24gPT09IDFcbiAgICAgICAgICAgICAgICA/IFwiR29vZFwiXG4gICAgICAgICAgICAgICAgOiBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfY29uZGl0aW9uID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkdyZXlcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX2NvbmRpdGlvbiA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJCYWRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VPbGQgPSBkb2Nsb2dzLnByb3BlcnRpZXNcbiAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZFxuICAgICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5vbGQuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDJcbiAgICAgICAgICAgICAgICA/IFwiSW4gU3RvY2tcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zdGF0dXNfdXNhZ2UgPT09IDNcbiAgICAgICAgICAgICAgICA/IFwiUmVwbGFjZW1lbnRcIlxuICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBkZXNjdXNhZ2VCYXJ1ID0gZG9jbG9ncy5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgID8gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAxXG4gICAgICAgICAgICAgICAgPyBcIkluIFVzZWRcIlxuICAgICAgICAgICAgICAgIDogZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc3RhdHVzX3VzYWdlID09PSAyXG4gICAgICAgICAgICAgICAgPyBcIkluIFN0b2NrXCJcbiAgICAgICAgICAgICAgICA6IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c191c2FnZSA9PT0gM1xuICAgICAgICAgICAgICAgID8gXCJSZXBsYWNlbWVudFwiXG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IGRlc2MxID0gZG9jbG9ncy5kZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRlc2MxWzJdID09PSBcIlJlbGF0aW9uc2hpcFwiKSB7XG4gICAgICAgICAgICAgIGRlc2MxWzBdID09PSBcIkNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgID8gKGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5yZWxhdGlvbnNoaXB9XCJgKVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuZ2hhcHVzYW4gUmVsYXRpb25zaGlwIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMub2xkLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXNjMVsxXSA9PT0gXCJBc3NvY2lhdGlvblwiKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPSBkZXNjbmV3ICsgYEFzc29jaWF0aW9uIEJhcnU6ICR7ZG9jbG9ncy5wcm9wZXJ0aWVzfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBJbmlzaWFsaXNhc2kgUGVtYnVhdGFuIEl0ZW0gUGFydCBcIiR7bWFpbmRhdGEuaW52ZW50b3J5X3BhcnRzXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKChkb2NmaWwpID0+XG4gICAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzPy5saXN0X3BhcnRzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgIGRvY2ZpbC5pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAubWFwKChkb2NtYXApID0+IGRvY21hcC5pbnZlbnRvcnlfbmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbWJ1YXRhbiBJdGVtIEJhcnUgYmVybmFtYSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXM/LmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZGVzYzFbMF0gPT09IFwiTm90ZXNcIlxuICAgICAgICAgICAgPyAoZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuYW1iYWhhbiBOb3Rlc2ApXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgaWYgKGRlc2MxWzBdID09PSBcIlVwZGF0ZWRcIikge1xuICAgICAgICAgICAgaWYgKGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnN0YXR1c19jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIGtvbmRpc2kgZGFyaSAke2Rlc2Nrb25kaXNpT2xkfSBrZSAke2Rlc2Nrb25kaXNpQmFydX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zdGF0dXNfdXNhZ2UpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gc3RhdHVzIHBlbWFrYWlhbiBkYXJpICR7ZGVzY3VzYWdlT2xkfSBrZSAke2Rlc2N1c2FnZUJhcnV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuaW52ZW50b3J5X25hbWUpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTmFtYSBJdGVtIGRhcmkgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQuaW52ZW50b3J5X25hbWV9XCIga2UgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmludmVudG9yeV9uYW1lfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuc2VyaWFsX251bWJlcikge1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ3ViYWhhbiBTZXJpYWwgTnVtYmVyIEl0ZW0gZGFyaSBcIiR7ZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5zZXJpYWxfbnVtYmVyfVwiIGtlIFwiJHtkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5zZXJpYWxfbnVtYmVyfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmd1YmFoYW4gTG9jYXRpb24gSXRlbSBkYXJpIFwiJHtcbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucy5jb21wYW5pZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubG9jYXRpb25cbiAgICAgICAgICAgICAgICAgIClbMF0ubmFtZVxuICAgICAgICAgICAgICAgIH1cIiBrZSBcIiR7XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMuY29tcGFuaWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvYykgPT4gZG9jLmlkID09PSBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMudmVuZG9yX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIFZlbmRvciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQudmVuZG9yX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLnZlbmRvcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXS5uYW1lXG4gICAgICAgICAgICAgICAgfVwiYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkKSB7XG4gICAgICAgICAgICAgIGRlc2NuZXcgPVxuICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgIGBQZW5ndWJhaGFuIE1hbnVmYWN0dXJlciBJdGVtIGRhcmkgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PiBkb2MuaWQgPT09IGRvY2xvZ3MucHJvcGVydGllcy5vbGQubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCIga2UgXCIke1xuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zLm1hbnVmYWN0dXJlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAoZG9jKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGRvYy5pZCA9PT0gZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICApWzBdLm5hbWVcbiAgICAgICAgICAgICAgICB9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5kZXNrcmlwc2kpIHtcbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBEZXNrcmlwc2kgSXRlbWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMuYXR0cmlidXRlcy5saXN0X3BhcnRzPy5sZW5ndGggPlxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgYFBlbmFtYmFoYW4gSXRlbSBcIiR7bGlzdHBhcnRzbmV3XG4gICAgICAgICAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC5taWdfaWQpXG4gICAgICAgICAgICAgICAgICAuam9pbihcIiwgXCIpfVwiIG1lbmphZGkgSXRlbSBQYXJ0YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHM/Lmxlbmd0aCA8XG4gICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5vbGQubGlzdF9wYXJ0cz8ubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVuZ2VsdWFyYW4gSXRlbSBQYXJ0IFwiJHtsaXN0cGFydHNvbGRcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8ubGVuZ3RoID09PVxuICAgICAgICAgICAgICBkb2Nsb2dzLnByb3BlcnRpZXMub2xkLmxpc3RfcGFydHM/Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpc3RwYXJ0c25ldyA9XG4gICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXMubGlzdF9wYXJ0cz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKGRvY2ZpbC5pZCkgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgbGlzdHBhcnRzb2xkID0gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZC5saXN0X3BhcnRzPy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT5cbiAgICAgICAgICAgICAgICAgIGRvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLmxpc3RfcGFydHNcbiAgICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQuaWQpXG4gICAgICAgICAgICAgICAgICAgIC5pbmNsdWRlcyhkb2NmaWwuaWQpID09PSBmYWxzZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICBkZXNjbmV3ICtcbiAgICAgICAgICAgICAgICBgUGVyZ2FudGlhbiBJdGVtIFBhcnQgXCIke2xpc3RwYXJ0c29sZFxuICAgICAgICAgICAgICAgICAgPy5tYXAoKHBhcnQpID0+IHBhcnQubWlnX2lkKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1cIiBtZW5qYWRpIFwiJHtsaXN0cGFydHNuZXdcbiAgICAgICAgICAgICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0Lm1pZ19pZClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9XCJgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHBycHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZG9jbG9ncy5wcm9wZXJ0aWVzLm9sZCkge1xuICAgICAgICAgICAgICAgIHBycHRzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVzY25ldyA9IGRlc2NuZXcgKyBgUGVuZ3ViYWhhbiBcIiR7cHJwdHMuam9pbihcIiwgXCIpfVwiIEl0ZW1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGVzYzFbMF0gPT09IFwiRGVsZXRlZFwiKSB7XG4gICAgICAgICAgICBpZiAoZGVzYzFbMl0gPT09IFwiUmVsYXRpb25zaGlwXCIpIHtcbiAgICAgICAgICAgICAgZGVzYzFbMF0gPT09IFwiQ3JlYXRlZFwiXG4gICAgICAgICAgICAgICAgPyAoZGVzY25ldyA9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NuZXcgK1xuICAgICAgICAgICAgICAgICAgICBgUGVuYW1iYWhhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5hdHRyaWJ1dGVzLnJlbGF0aW9uc2hpcH1cImApXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICBkZXNjMVswXSA9PT0gXCJEZWxldGVkXCJcbiAgICAgICAgICAgICAgICA/IChkZXNjbmV3ID1cbiAgICAgICAgICAgICAgICAgICAgZGVzY25ldyArXG4gICAgICAgICAgICAgICAgICAgIGBQZW5naGFwdXNhbiBSZWxhdGlvbnNoaXAgXCIke2RvY2xvZ3MucHJvcGVydGllcy5vbGQucmVsYXRpb25zaGlwfVwiYClcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kb2Nsb2dzLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZW5ldyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRkYXlsb2dzKGRheWxvZ3NtYXApO1xuICAgICAgICBzZXR3ZWVrbG9ncyh3ZWVrbG9nc21hcCk7XG4gICAgICAgIHNldG1vcmVsb2dzKG1vcmVsb2dzbWFwKTtcbiAgICAgICAgc2V0cHJhbG9hZGluZ2xvZ3MoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgLy8gLnRoZW4ocmVzMyA9PiB7XG4gICAgLy8gICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLCB7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgIC8vICAgICAgICAgaGVhZGVyczoge1xuICAgIC8vICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLy8gICAgICAgICAudGhlbihyZXM0ID0+IHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgY29uY2F0YXJyID0gcmVzNC5kYXRhLmZyb21faW52ZXJzZS5jb25jYXQocmVzNC5kYXRhLm5vdF9mcm9tX2ludmVyc2UpXG5cbiAgICAvLyAgICAgICAgICAgICB2YXIgbG9nczJtYXAgPSByZXMzLmRhdGEucmVsYXRpb25zaGlwLm1hcCgoZG9jcmVsLCBpZHhyZWwpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZW5ldzIgPSBtb21lbnQoZG9jcmVsLmRhdGUpLmxvY2FsZShcImlkXCIpLmZvcm1hdCgnTExMJylcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGRlc2NuZXcyID0gJydcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIGlkbG9nbmV3ID0gLTFcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgZGVzYzIgPSBkb2NyZWwuZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBpZGxvZ25ldyA9IGNvbmNhdGFyci5maWx0ZXIoZG9jZmlsID0+IGRvY2ZpbC5pZCA9PT0gZG9jcmVsLnByb3BlcnRpZXMuYXR0cmlidXRlcy5pZClbMF0gOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnQ3JlYXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmFtYmFoYW4gUmVsYXRpb25zaGlwIFwiJHt0eXBlb2YgKGlkbG9nbmV3KSA9PT0gJ3VuZGVmaW5lZCcgPyBcIihTdWRhaCBEaWhhcHVzIGxhZ2kpXCIgOiBgJHtpZGxvZ25ldy5yZWxhdGlvbnNoaXB9YH1cImAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlc2MyWzBdID09PSAnRGVsZXRlZCcgPyBkZXNjbmV3MiA9IGRlc2NuZXcyICsgYFBlbmdoYXB1c2FuIFJlbGF0aW9uc2hpcGAgOiBudWxsXG4gICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAuLi5kb2NyZWwsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlbmV3MixcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjbmV3MlxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICBzZXRsb2dzMihsb2dzMm1hcClcbiAgICAvLyAgICAgICAgICAgICBzZXRwcmFsb2FkaW5nbG9nczIoZmFsc2UpXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vIH0pXG4gIH0sIFthY3Rpdml0eXRyaWdnZXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbWItOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGwgbXktYXV0b1wiPkFjdGl2aXR5PC9oMT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCB3LTYvMTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgbXgtYXV0byB0ZXh0LXhsIG1iLTNcIj5IYXJpIEluaTwvaDE+XG4gICAgICAgICAgICB7cHJhbG9hZGluZ2xvZ3MgPyAoXG4gICAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgICApIDogZGF5bG9ncy5sZW5ndGggPCAxID8gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxFbXB0eSBpbWFnZT17RW1wdHkuUFJFU0VOVEVEX0lNQUdFX1NJTVBMRX0gLz5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8VGltZWxpbmUgbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICB7ZGF5bG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBteC1hdXRvIHRleHQteGwgbWItM1wiPk1pbmdndSBJbmk8L2gxPlxuICAgICAgICAgICAge3ByYWxvYWRpbmdsb2dzID8gKFxuICAgICAgICAgICAgICA8U3BpbiAvPlxuICAgICAgICAgICAgKSA6IHdlZWtsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEVtcHR5IGltYWdlPXtFbXB0eS5QUkVTRU5URURfSU1BR0VfU0lNUExFfSAvPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUaW1lbGluZSBtb2RlPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgIHt3ZWVrbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VGltZWxpbmUuSXRlbSBsYWJlbD17ZG9jbG9nLmRhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1iYXNlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY2xvZy5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBPbGVoIHtkb2Nsb2cuY2F1c2VyX25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xIHRleHQtc21cIj5Ob3Rlczoge2RvY2xvZy5ub3Rlc308L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHctNi8xMlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG14LWF1dG8gdGV4dC14bCBtYi0zXCI+TWluZ2d1IExhbHU8L2gxPlxuICAgICAgICAgIHtwcmFsb2FkaW5nbG9ncyA/IChcbiAgICAgICAgICAgIDxTcGluIC8+XG4gICAgICAgICAgKSA6IG1vcmVsb2dzLmxlbmd0aCA8IDEgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8RW1wdHkgaW1hZ2U9e0VtcHR5LlBSRVNFTlRFRF9JTUFHRV9TSU1QTEV9IC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFRpbWVsaW5lIG1vZGU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIHttb3JlbG9ncy5tYXAoKGRvY2xvZywgaWR4bG9nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUaW1lbGluZS5JdGVtIGxhYmVsPXtkb2Nsb2cuZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZG9jbG9nLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZWgge2RvY2xvZy5jYXVzZXJfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMSB0ZXh0LXNtXCI+Tm90ZXM6IHtkb2Nsb2cubm90ZXN9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVGltZWxpbmUuSXRlbT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGltZWxpbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IEl0ZW1EZXRhaWwgPSAoeyBpbml0UHJvcHMsIGRhdGFQcm9maWxlLCBzaWRlbWVudSwgaXRlbWlkIH0pID0+IHtcbiAgLy8xLiBJbml0XG4gIGNvbnN0IHJ0ID0gdXNlUm91dGVyKCk7XG4gIHZhciBhY3RpdmVUYWIgPSBcIm92ZXJ2aWV3XCI7XG4gIGNvbnN0IHsgYWN0aXZlIH0gPSBydC5xdWVyeTtcbiAgaWYgKGFjdGl2ZSkge1xuICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZTtcbiAgfVxuICB2YXIgcGF0aEFyciA9IHJ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5zbGljZSgxKTtcbiAgcGF0aEFyci5zcGxpY2UoMiwgMik7XG4gIHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA9IFwiRGV0YWlsIEl0ZW1cIjtcbiAgY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xuXG4gIC8vdXNlU3RhdGVcbiAgY29uc3QgW21haW5kYXRhLCBzZXRtYWluZGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IFwiXCIsXG4gICAgbW9kZWxfaWQ6IFwiXCIsXG4gICAgdmVuZG9yX2lkOiBcIlwiLFxuICAgIGludmVudG9yeV9uYW1lOiBcIlwiLFxuICAgIHN0YXR1c19jb25kaXRpb246IFwiXCIsXG4gICAgc3RhdHVzX3VzYWdlOiBcIlwiLFxuICAgIGxvY2F0aW9uOiBcIlwiLFxuICAgIGlzX2V4aXN0OiBcIlwiLFxuICAgIGRlc2tyaXBzaTogXCJcIixcbiAgICBtYW51ZmFjdHVyZXJfaWQ6IFwiXCIsXG4gICAgbWlnX2lkOiBcIlwiLFxuICAgIHNlcmlhbF9udW1iZXI6IFwiXCIsXG4gICAgY3JlYXRlZF9hdDogXCJcIixcbiAgICB1cGRhdGVkX2F0OiBcIlwiLFxuICAgIGRlbGV0ZWRfYXQ6IFwiXCIsXG4gICAgYXNzZXRfbmFtZTogXCJcIixcbiAgICBtb2RlbF9uYW1lOiBcIlwiLFxuICAgIGxvY2F0aW9uX25hbWU6IFwiXCIsXG4gICAgbW9kZWxfaW52ZW50b3J5OiB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIG5hbWU6IFwiXCIsXG4gICAgICBhc3NldF9pZDogbnVsbCxcbiAgICAgIGRlbGV0ZWRfYXQ6IG51bGwsXG4gICAgICBhc3NldDoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsb2NhdGlvbl9pbnZlbnRvcnk6IHtcbiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsXG4gICAgICBjb21wYW55X25hbWU6IFwiXCIsXG4gICAgfSxcbiAgICBhZGRpdGlvbmFsX2F0dHJpYnV0ZXM6IFtdLFxuICAgIGludmVudG9yeV9wYXJ0czogW10sXG4gICAgYXNzb2NpYXRpb25zOiBbXSxcbiAgICBxdWFudGl0aWVzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtpbnZyZWxhdGlvbnMsIHNldGludnJlbGF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgbW9kZWxzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGFzc2V0czogW1xuICAgICAge1xuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVsZXRlZF9hdDogbnVsbCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtYW51ZmFjdHVyZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBkZWxldGVkX2F0OiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXR1c19jb25kaXRpb246IFtdLFxuICAgIHN0YXR1c191c2FnZTogW10sXG4gICAgdmVuZG9yczogW10sXG4gICAgY29tcGFuaWVzOiBbXSxcbiAgICB0cmVlX2NvbXBhbmllczoge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCBbcmVsc2hpcCwgc2V0cmVsc2hpcF0gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFttYW51Ziwgc2V0bWFudWZdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt2ZW5kb3IsIHNldHZlbmRvcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByYWxvYWRpbmcsIHNldHByYWxvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtwcmFsb2FkaW5nMiwgc2V0cHJhbG9hZGluZzJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIC8vZGVsZXRlXG4gIGNvbnN0IFttb2RhbGRlbGV0ZSwgc2V0bW9kYWxkZWxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ2RlbGV0ZSwgc2V0bG9hZGluZ2RlbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vbm90ZXNcbiAgY29uc3QgW25vdGVzLCBzZXRub3Rlc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGFsbm90ZXMsIHNldG1vZGFsbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZ25vdGVzLCBzZXRsb2FkaW5nbm90ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL2tvbmRpc2lcbiAgY29uc3QgW2tvbmRpc2ksIHNldGtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtub3Rla29uZGlzaSwgc2V0bm90ZWtvbmRpc2ldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttb2RhbGtvbmRpc2ksIHNldG1vZGFsa29uZGlzaV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5a29uZGlzaSwgc2V0ZGlzcGxheWtvbmRpc2ldID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtsb2FkaW5na29uZGlzaSwgc2V0bG9hZGluZ2tvbmRpc2ldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvL3N0YXR1cyBwZW1ha2FpYW5cbiAgY29uc3QgW2NoYW5nZXVzYWdlLCBzZXRjaGFuZ2V1c2FnZV0gPSB1c2VTdGF0ZSh7XG4gICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgIHN0YXR1c191c2FnZTogXCJcIixcbiAgICBub3RlczogXCJcIixcbiAgICByZWxhdGlvbnNoaXBfdHlwZV9pZDogXCJcIixcbiAgICBjb25uZWN0ZWRfaWQ6IFwiXCIsXG4gICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IFtkaXNhYmxlZHVzYWdlLCBzZXRkaXNhYmxlZHVzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbW9kYWx1c2FnZSwgc2V0bW9kYWx1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkaXNwbGF5dXNhZ2UsIHNldGRpc3BsYXl1c2FnZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UsIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2VdID1cbiAgICB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5ndXNhZ2UsIHNldGxvYWRpbmd1c2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIGNvbnN0IFthZ2VudHMsIHNldGFnZW50c10gPSB1c2VTdGF0ZShbXSlcbiAgLy8gY29uc3QgW3JlcXVlc3RlcnMsIHNldHJlcXVlc3RlcnNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IFtkZXRhaWxsaXN0LCBzZXRkZXRhaWxsaXN0XSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW21vZGVscywgc2V0bW9kZWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3N1YmxvY2F0aW9ucywgc2V0c3VibG9jYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvY2F0aW9uc2Rpc3BsYXksIHNldGxvY2F0aW9uc2Rpc3BsYXldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VibG9jYXRpb250cmlnZ2VyLCBzZXRzdWJsb2NhdGlvbnRyaWdnZXJdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbYWN0aXZpdHl0cmlnZ2VyLCBzZXRhY3Rpdml0eXRyaWdnZXJdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy9oZWxwZXJcblxuICAvL2hhbmRsZXJcbiAgY29uc3QgaGFuZGxlRGVsZXRlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5nZGVsZXRlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9kZWxldGVJbnZlbnRvcnlgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBcIlwiLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5nZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJdGVtIGJlcmhhc2lsIGRpaGFwdXNcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldG1vZGFsZGVsZXRlKGZhbHNlKTtcbiAgICAgICAgICBydC5wdXNoKGAvaXRlbXNgKTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVOb3Rlc0l0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ25vdGVzKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9hZGRJbnZlbnRvcnlOb3Rlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogTnVtYmVyKGl0ZW1pZCksXG4gICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgc2V0bG9hZGluZ25vdGVzKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJOb3RlcyBiZXJoYXNpbCBkaXRhbWJhaGthblwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH0/YWN0aXZlPWFjdGl2aXR5YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVLb25kaXNpSXRlbSA9ICgpID0+IHtcbiAgICBzZXRsb2FkaW5na29uZGlzaSh0cnVlKTtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vY2hhbmdlU3RhdHVzQ29uZGl0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6IE51bWJlcihpdGVtaWQpLFxuICAgICAgICBub3Rlczogbm90ZWtvbmRpc2ksXG4gICAgICAgIHN0YXR1c19jb25kaXRpb246IGtvbmRpc2ksXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldGxvYWRpbmdrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgc2V0bW9kYWxrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgS29uZGlzaSBiZXJoYXNpbCBkaXViYWhcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9pdGVtcy9kZXRhaWwvJHtpdGVtaWR9YDtcbiAgICAgICAgfSBlbHNlIGlmICghcmVzMi5zdWNjZXNzKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uW1wiZXJyb3JcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogcmVzMi5tZXNzYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IDMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVVc2FnZUl0ZW0gPSAoKSA9PiB7XG4gICAgc2V0bG9hZGluZ3VzYWdlKHRydWUpO1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9jaGFuZ2VTdGF0dXNVc2FnZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2V1c2FnZSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRsb2FkaW5ndXNhZ2UoZmFsc2UpO1xuICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgaWYgKHJlczIuc3VjY2Vzcykge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbltcInN1Y2Nlc3NcIl0oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJTdGF0dXMgUGVtYWthaWFuIGJlcmhhc2lsIGRpdWJhaFwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2l0ZW1zL2RldGFpbC8ke2l0ZW1pZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKCFyZXMyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBub3RpZmljYXRpb25bXCJlcnJvclwiXSh7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXMyLm1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgLy91c2VFZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5P2lkPSR7aXRlbWlkfWAsIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICB2YXIgdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlczIuZGF0YSkge1xuICAgICAgICAgIGlmIChwcm9wID09PSBcImFkZGl0aW9uYWxfYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICB0W3Byb3BdID0gcmVzMi5kYXRhW3Byb3BdLm1hcCgoZG9jLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiZHJvcGRvd25cIiB8fFxuICAgICAgICAgICAgICAgIGRvYy5kYXRhX3R5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04ucGFyc2UoZG9jLnZhbHVlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmRvYyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdFtwcm9wXSA9IHJlczIuZGF0YVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0bWFpbmRhdGEodCk7XG4gICAgICAgIHNldHByYWxvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzMykgPT4ge1xuICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0SW52ZW50b3J5UmVsYXRpb25zYCwge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgICAgc2V0aW52cmVsYXRpb25zKHJlczIuZGF0YSk7XG4gICAgICAgICAgICB2YXIgZGVsX21hbnVmID0gbnVsbDtcbiAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsXG4gICAgICAgICAgICAgID8gKGRlbF9tYW51ZiA9IG51bGwpXG4gICAgICAgICAgICAgIDogKGRlbF9tYW51ZiA9IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIChkb2NmaWwpID0+IGRvY2ZpbC5pZCA9PT0gcmVzMy5tYW51ZmFjdHVyZXJfaWRcbiAgICAgICAgICAgICAgICApWzBdLmRlbGV0ZWRfYXQpO1xuICAgICAgICAgICAgc2V0bWFudWYoe1xuICAgICAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgICAgIHJlczMubWFudWZhY3R1cmVyX2lkID09PSBudWxsIHx8IHJlczMubWFudWZhY3R1cmVyX2lkID09PSAwXG4gICAgICAgICAgICAgICAgICA/IFwiLVwiXG4gICAgICAgICAgICAgICAgICA6IHJlczIuZGF0YS5tYW51ZmFjdHVyZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAoZG9jZmlsKSA9PiBkb2NmaWwuaWQgPT09IHJlczMubWFudWZhY3R1cmVyX2lkXG4gICAgICAgICAgICAgICAgICAgIClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgaXNudWxsOiBkZWxfbWFudWYgIT09IG51bGwgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlczMudmVuZG9yX2lkID09PSBudWxsIHx8IHJlczMudmVuZG9yX2lkID09PSAwXG4gICAgICAgICAgICAgID8gc2V0dmVuZG9yKFwiLVwiKVxuICAgICAgICAgICAgICA6IHNldHZlbmRvcihcbiAgICAgICAgICAgICAgICAgIHJlczIuZGF0YS52ZW5kb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGRvY2ZpbCkgPT4gZG9jZmlsLmlkID09PSByZXMzLnZlbmRvcl9pZFxuICAgICAgICAgICAgICAgICAgKVswXT8ubmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRwcmFsb2FkaW5nMihmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRGaWx0ZXJNb2RlbHNgLCB7XG4gICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXMyKSA9PiB7XG4gICAgICAgIHNldG1vZGVscyhyZXMyLmRhdGEpO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgIT09IFwiXCIpIHtcbiAgICAgIGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQUNLRU5EX1VSTH0vZ2V0Q2hhbmdlU3RhdHVzVXNhZ2VEZXRhaWxMaXN0P2lkPSR7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKHJlczIpID0+IHtcbiAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgID8gc2V0ZGV0YWlsbGlzdChbcmVzMi5kYXRhXSlcbiAgICAgICAgICAgIDogc2V0ZGV0YWlsbGlzdChyZXMyLmRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NoYW5nZXVzYWdlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN1YmxvY2F0aW9udHJpZ2dlciAhPT0gLTEpIHtcbiAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UodHJ1ZSk7XG4gICAgICBmZXRjaChcbiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2dldFJlbGF0aW9uc2hpcEludmVudG9yeURldGFpbExpc3Q/dHlwZV9pZD0ke2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBgR0VUYCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBKU09OLnBhcnNlKGluaXRQcm9wcyksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICAgIHNldGxvYWRpbmdjaGFuZ2Vjb21wYW55dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgIHNldHN1YmxvY2F0aW9ucyhyZXMyLmRhdGEuY2hpbGRyZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzdWJsb2NhdGlvbnRyaWdnZXJdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChcbiAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBQ0tFTkRfVVJMfS9nZXRSZWxhdGlvbnNoaXBJbnZlbnRvcnk/aWQ9JHtpdGVtaWR9JnR5cGVfaWQ9LTRgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IGBHRVRgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogSlNPTi5wYXJzZShpbml0UHJvcHMpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigocmVzMikgPT4ge1xuICAgICAgICBzZXRyZWxzaGlwKHJlczIuZGF0YS5mcm9tX2ludmVyc2UuY29uY2F0KHJlczIuZGF0YS5ub3RfZnJvbV9pbnZlcnNlKSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRcbiAgICAgIHN0PXtzdH1cbiAgICAgIHNpZGVtZW51PXtzaWRlbWVudX1cbiAgICAgIHRvaz17aW5pdFByb3BzfVxuICAgICAgcGF0aEFycj17cGF0aEFycn1cbiAgICAgIGRhdGFQcm9maWxlPXtkYXRhUHJvZmlsZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNFwiXG4gICAgICAgIGlkPVwiY3JlYXRlQXNzZXRzV3JhcHBlclwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNCBtYi04XCI+XG4gICAgICAgICAgPFN0aWNreSBjb250YWluZXJTZWxlY3RvckZvY3VzPVwiI2NyZWF0ZUFnZW50c1dyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIGNvbC1zcGFuLTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktNSBweC00IGJvcmRlci10IGJvcmRlci1iIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIiB0ZXh0LWdyYXktNDAwIG1iLTBcIj5JdGVtOjwvcD5cbiAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHB5LTIgdGV4dC0yeGwgbWItMCBtci0yMFwiPlxuICAgICAgICAgICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfSAtIHttYWluZGF0YS5tb2RlbF9pbnZlbnRvcnkubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3ByYWxvYWRpbmcgPyBudWxsIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1yLTcgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMVwiPlN0YXR1cyBQZW1ha2FpYW46PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5dXNhZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgMTByZW1gIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gU3RhdHVzIFBlbWFrYWlhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX3VzYWdlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbmRhdGEuc3RhdHVzX3VzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRjaGFuZ2V1c2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGFuZ2V1c2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c191c2FnZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWx1c2FnZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5JbiBVc2VkPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+SW4gU3RvY2s8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17M30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5SZXBsYWNlbWVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+S29uZGlzaTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlrb25kaXNpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYDEwcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1hc3Vra2FuIFN0YXR1cyBLb25kaXNpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluZGF0YS5zdGF0dXNfY29uZGl0aW9uID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbmRhdGEuc3RhdHVzX2NvbmRpdGlvbiA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5kYXRhLnN0YXR1c19jb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0a29uZGlzaSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxrb25kaXNpKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAgbXItMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMCBmb250LXNlbWlib2xkXCI+R29vZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17Mn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTEgZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWdyYXktNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkdyZXk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0xIGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIG1yLTFcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTAgZm9udC1zZW1pYm9sZFwiPkJhZDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbG5vdGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGFtYmFoIE5vdGVzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRhbmdlclwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGRlbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgSGFwdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1N0aWNreT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi00IG1iLThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiBoaWRkZW4gbWQ6YmxvY2tcIj5cbiAgICAgICAgICAgIDxUYWJzXG4gICAgICAgICAgICAgIHRhYlBvc2l0aW9uPXtgbGVmdGB9XG4gICAgICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgb25UYWJDbGljaz17KGtleSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiYWN0aXZpdHlcIikge1xuICAgICAgICAgICAgICAgICAgc2V0YWN0aXZpdHl0cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJPdmVydmlld1wiIGtleT17YG92ZXJ2aWV3YH0+XG4gICAgICAgICAgICAgICAgPE92ZXJ2aWV3XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgbWFudWY9e21hbnVmfVxuICAgICAgICAgICAgICAgICAgdmVuZG9yPXt2ZW5kb3J9XG4gICAgICAgICAgICAgICAgICBwcmFsb2FkaW5nPXtwcmFsb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiS29uZmlndXJhc2kgUGFydFwiIGtleT17YGtvbmZpZ3VyYXNpUGFydGB9PlxuICAgICAgICAgICAgICAgIDxLb25maWd1cmFzaVBhcnRcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmcyPXtwcmFsb2FkaW5nMn1cbiAgICAgICAgICAgICAgICAgIG1vZGVscz17bW9kZWxzfVxuICAgICAgICAgICAgICAgICAgc2V0bW9kZWxzPXtzZXRtb2RlbHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJSZWxhdGlvbnNoaXBcIiBrZXk9e2ByZWxhdGlvbnNoaXBgfT5cbiAgICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgICAgPFRhYlBhbmUgdGFiPVwiQXNzb2NpYXRpb25cIiBrZXk9e2Bhc3NvY2lhdGlvbmB9PlxuICAgICAgICAgICAgICAgIDxBc3NvY2lhdGlvblxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBY3Rpdml0eVwiIGtleT17YGFjdGl2aXR5YH0+XG4gICAgICAgICAgICAgICAgPEFjaXRpdnR5XG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgaW52cmVsYXRpb25zPXtpbnZyZWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eXRyaWdnZXI9e2FjdGl2aXR5dHJpZ2dlcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICA8L1RhYnM+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgYmxvY2sgbWQ6aGlkZGVuXCI+XG4gICAgICAgICAgICA8VGFicyB0YWJQb3NpdGlvbj17YHRvcGB9IGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYn0+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIk92ZXJ2aWV3XCIga2V5PXtgb3ZlcnZpZXdgfT5cbiAgICAgICAgICAgICAgICA8T3ZlcnZpZXdcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBtYW51Zj17bWFudWZ9XG4gICAgICAgICAgICAgICAgICB2ZW5kb3I9e3ZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIHByYWxvYWRpbmc9e3ByYWxvYWRpbmd9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJLb25maWd1cmFzaSBQYXJ0XCIga2V5PXtga29uZmlndXJhc2lQYXJ0YH0+XG4gICAgICAgICAgICAgICAgPEtvbmZpZ3VyYXNpUGFydFxuICAgICAgICAgICAgICAgICAgaXRlbWlkPXtpdGVtaWR9XG4gICAgICAgICAgICAgICAgICBpbml0UHJvcHM9e2luaXRQcm9wc31cbiAgICAgICAgICAgICAgICAgIG1haW5kYXRhPXttYWluZGF0YX1cbiAgICAgICAgICAgICAgICAgIGludnJlbGF0aW9ucz17aW52cmVsYXRpb25zfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZzI9e3ByYWxvYWRpbmcyfVxuICAgICAgICAgICAgICAgICAgbW9kZWxzPXttb2RlbHN9XG4gICAgICAgICAgICAgICAgICBzZXRtb2RlbHM9e3NldG1vZGVsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIlJlbGF0aW9uc2hpcFwiIGtleT17YHJlbGF0aW9uc2hpcGB9PlxuICAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9UYWJQYW5lPlxuICAgICAgICAgICAgICA8VGFiUGFuZSB0YWI9XCJBc3NvY2lhdGlvblwiIGtleT17YGFzc29jaWF0aW9uYH0+XG4gICAgICAgICAgICAgICAgPEFzc29jaWF0aW9uXG4gICAgICAgICAgICAgICAgICBpdGVtaWQ9e2l0ZW1pZH1cbiAgICAgICAgICAgICAgICAgIGluaXRQcm9wcz17aW5pdFByb3BzfVxuICAgICAgICAgICAgICAgICAgbWFpbmRhdGE9e21haW5kYXRhfVxuICAgICAgICAgICAgICAgICAgcHJhbG9hZGluZz17cHJhbG9hZGluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1RhYlBhbmU+XG4gICAgICAgICAgICAgIDxUYWJQYW5lIHRhYj1cIkFjdGl2aXR5XCIga2V5PXtgYWN0aXZpdHlgfT5cbiAgICAgICAgICAgICAgICA8QWNpdGl2dHlcbiAgICAgICAgICAgICAgICAgIGl0ZW1pZD17aXRlbWlkfVxuICAgICAgICAgICAgICAgICAgaW5pdFByb3BzPXtpbml0UHJvcHN9XG4gICAgICAgICAgICAgICAgICBtYWluZGF0YT17bWFpbmRhdGF9XG4gICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnM9e2ludnJlbGF0aW9uc31cbiAgICAgICAgICAgICAgICAgIGFjdGl2aXR5dHJpZ2dlcj17YWN0aXZpdHl0cmlnZ2VyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVGFiUGFuZT5cbiAgICAgICAgICAgIDwvVGFicz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgUGVtYWthaWFuIHttYWluZGF0YS5pbnZlbnRvcnlfbmFtZX1cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldG1vZGFsdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkdXNhZ2V9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVc2FnZUl0ZW19XG4gICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5ndXNhZ2V9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU2ltcGFuXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWx1c2FnZX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbHVzYWdlKGZhbHNlKTtcbiAgICAgICAgICBzZXRkaXNwbGF5dXNhZ2UodHJ1ZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezc2MH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICBTdGF0dXMgUGVtYWthaWFuIDxzcGFuIGNsYXNzTmFtZT1cInVzYWdlbW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8U2VsZWN0IGRpc2FibGVkIGRlZmF1bHRWYWx1ZT17Y2hhbmdldXNhZ2Uuc3RhdHVzX3VzYWdlfT5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezF9PkluIFVzZWQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXsyfT5JbiBTdG9jazwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezN9PlJlcGxhY2VtZW50PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNhZ2Vtb2RhbDo6YmVmb3Jle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyonO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGFuZ2V1c2FnZS5zdGF0dXNfdXNhZ2UgPT09IDEgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgIERpZ3VuYWthbiBPbGVoIDxzcGFuIGNsYXNzTmFtZT1cImJ5bW9kYWxcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcF90eXBlX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxfY29ubmVjdGVkX2lkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGxvY2F0aW9uc2Rpc3BsYXkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstMX0+QWdlbnQ8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17LTJ9PlJlcXVlc3RlcjwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXstM30+Q29tcGFueTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ5bW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItMyBtbC01XCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPlxuICAgICAgICAgICAgICAgICAgTmFtYSB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmIFwiQWdlbnRcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmIFwiUmVxdWVzdGVyXCJ9e1wiIFwifVxuICAgICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyAmJiBcIkNvbXBhbnlcIn17XCIgXCJ9XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1hYnltb2RhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLnJlbGF0aW9uc2hpcF90eXBlX2lkID09PSAtMyA/IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHRyZWVEYXRhPXtbaW52cmVsYXRpb25zLnRyZWVfY29tcGFuaWVzXX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURlZmF1bHRFeHBhbmRlZEtleXM9e1sxXX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkX2lkOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0c3VibG9jYXRpb250cmlnZ2VyKChwcmV2KSA9PiBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gLTNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0bG9jYXRpb25zZGlzcGxheSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPjwvVHJlZVNlbGVjdD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y2hhbmdldXNhZ2UuY29ubmVjdGVkX2lkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0Y2hhbmdldXNhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdldXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWRfaWQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldGRpc2FibGVkdXNhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Y2hhbmdldXNhZ2UucmVsYXRpb25zaGlwX3R5cGVfaWQgPT09IC0yICYmXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsbGlzdC5tYXAoKGRvYywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17ZG9jLmlkfT57ZG9jLm5hbWV9PC9TZWxlY3QuT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7Lyoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2V1c2FnZS5yZWxhdGlvbnNoaXBfdHlwZV9pZCA9PT0gMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZyZWxhdGlvbnMudHJlZV9jb21wYW5pZXMubWFwKChkb2MsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9e2RvYy5pZH0+e2RvYy5uYW1lfTwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovfVxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5hbWFieW1vZGFsOjpiZWZvcmV7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2NoYW5nZXVzYWdlLmNvbm5lY3RlZF9pZCA9PT0gLTMgfHwgbG9jYXRpb25zZGlzcGxheSA9PT0gdHJ1ZSA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWwtNVwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5hbWEgTG9rYXNpPC9wPlxuICAgICAgICAgICAgICAgICAgPFRyZWVTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ2NoYW5nZWNvbXBhbnl1c2FnZX1cbiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE9e3N1YmxvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsX2Nvbm5lY3RlZF9pZDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+PC9UcmVlU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgICA8SW5wdXQuVGV4dEFyZWFcbiAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldGNoYW5nZXVzYWdlKHtcbiAgICAgICAgICAgICAgICAgIC4uLmNoYW5nZXVzYWdlLFxuICAgICAgICAgICAgICAgICAgbm90ZXM6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjwvSW5wdXQuVGV4dEFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBwLTUgbXQtNVwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+XG4gICAgICAgICAgICAgIEZvcm0gVWJhaCBTdGF0dXMgS29uZGlzaSB7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9XG4gICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4XCI+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRkaXNwbGF5a29uZGlzaSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5SaWdodDogYDFyZW1gIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQmF0YWxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVLb25kaXNpSXRlbX1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmdrb25kaXNpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsa29uZGlzaX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRtb2RhbGtvbmRpc2koZmFsc2UpO1xuICAgICAgICAgIHNldGRpc3BsYXlrb25kaXNpKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBmb290ZXI9e251bGx9XG4gICAgICAgIHdpZHRoPXs2MDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgU3RhdHVzIEtvbmRpc2kgPHNwYW4gY2xhc3NOYW1lPVwia29uZGlzaW1vZGFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPFNlbGVjdCBkaXNhYmxlZCBkZWZhdWx0VmFsdWU9e2tvbmRpc2l9PlxuICAgICAgICAgICAgICA8U2VsZWN0Lk9wdGlvbiB2YWx1ZT17MX0+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPkdvb2Q8L3A+XG4gICAgICAgICAgICAgIDwvU2VsZWN0Lk9wdGlvbj5cbiAgICAgICAgICAgICAgPFNlbGVjdC5PcHRpb24gdmFsdWU9ezJ9PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTBcIj5HcmV5PC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICAgIDxTZWxlY3QuT3B0aW9uIHZhbHVlPXszfT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+QmFkPC9wPlxuICAgICAgICAgICAgICA8L1NlbGVjdC5PcHRpb24+XG4gICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5rb25kaXNpbW9kYWw6OmJlZm9yZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcqJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItM1wiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMFwiPk5vdGVzPC9wPlxuICAgICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFzdWtrYW4gTm90ZXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRub3Rla29uZGlzaShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHAtNSBtdC01XCI+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteGxcIj5cbiAgICAgICAgICAgICAgRm9ybSBUYW1iYWggTm90ZXMge21haW5kYXRhLmludmVudG9yeV9uYW1lfVxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IGAxcmVtYCB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEJhdGFsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25vdGVzID09PSBcIlwifVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTm90ZXNJdGVtfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ25vdGVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNpbXBhblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHZpc2libGU9e21vZGFsbm90ZXN9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxub3RlcyhmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIGZvb3Rlcj17bnVsbH1cbiAgICAgICAgd2lkdGg9ezYwMH1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIG1iLTVcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0wXCI+Tm90ZXM8L3A+XG4gICAgICAgICAgPElucHV0LlRleHRBcmVhXG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBOb3Rlc1wiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0bm90ZXMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbnB1dC5UZXh0QXJlYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPXtcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgQXBha2FoIGFuZGEgeWFraW4gaW5naW4gbWVuZ2hhcHVzIGl0ZW0gXCJ7bWFpbmRhdGEuaW52ZW50b3J5X25hbWV9IC17XCIgXCJ9XG4gICAgICAgICAgICB7bWFpbmRhdGEubWlnX2lkfVwiP1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIH1cbiAgICAgICAgdmlzaWJsZT17bW9kYWxkZWxldGV9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB7XG4gICAgICAgICAgc2V0bW9kYWxkZWxldGUoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBva1RleHQ9XCJZYVwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJUaWRha1wiXG4gICAgICAgIG9uT2s9e2hhbmRsZURlbGV0ZUl0ZW19XG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3sgbG9hZGluZzogbG9hZGluZ2RlbGV0ZSB9fVxuICAgICAgICB3aWR0aD17NzIwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWItNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBtYi00XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yIHRleHQteHMgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICBJdGVtIGluaSBtZW1pbGlraSBJdGVtIFBhcnQgc2ViYWdhaSBiZXJpa3V0IDpcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAge21haW5kYXRhLmludmVudG9yeV9wYXJ0cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHttYWluZGF0YS5pbnZlbnRvcnlfcGFydHMubWFwKChkb2NlbXB0eSwgaWR4ZW1wdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHhlbXB0eX0+XG4gICAgICAgICAgICAgICAgICAgICAgLSA8c3Ryb25nPntkb2NlbXB0eS5pbnZlbnRvcnlfbmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14cyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIEl0ZW0gaW5pIHNlZGFuZyBtZW1pbGlraSBodWJ1bmdhbiBkZW5nYW4gaXRlbSBiZXJpa3V0OlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1iLTIgdGV4dC14c1wiPlxuICAgICAgICAgICAgICB7cmVsc2hpcC5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPi08L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgcmVsc2hpcC5tYXAoKGRvY3JlbCwgaWR4cmVsKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpZHhyZWx9PlxuICAgICAgICAgICAgICAgICAgICAte1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHtkb2NyZWwudHlwZX0gLSB7ZG9jcmVsLmNvbm5lY3RlZF9kZXRhaWxfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNTAwXCI+XG4gICAgICAgICAgICAgIERlbmdhbiBtZW5naGFwdXMgaXRlbSBpbmkgYWthbiBtZW5naGlsYW5na2FuIHNlbHVydWggaHVidW5nYW5cbiAgICAgICAgICAgICAgZGVuZ2FuIGl0ZW0gZGlhdGFzIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxociAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxLCByZXMsIHBhcmFtcyB9KSB7XG4gIHZhciBpbml0UHJvcHMgPSB7fTtcbiAgY29uc3QgaXRlbWlkID0gcGFyYW1zLml0ZW1JZDtcbiAgaWYgKCFyZXEuaGVhZGVycy5jb29raWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2xvZ2luXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgY29va2llc0pTT04xID0gaHR0cGNvb2tpZS5wYXJzZShyZXEuaGVhZGVycy5jb29raWUpO1xuICBpZiAoIWNvb2tpZXNKU09OMS50b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICBkZXN0aW5hdGlvbjogXCIvbG9naW5cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpbml0UHJvcHMgPSBjb29raWVzSlNPTjEudG9rZW47XG4gIGNvbnN0IHJlc291cmNlc0dQID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9VUkx9L2RldGFpbFByb2ZpbGVgLFxuICAgIHtcbiAgICAgIG1ldGhvZDogYEdFVGAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IEpTT04ucGFyc2UoaW5pdFByb3BzKSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xuICBjb25zdCByZXNqc29uR1AgPSBhd2FpdCByZXNvdXJjZXNHUC5qc29uKCk7XG4gIGNvbnN0IGRhdGFQcm9maWxlID0gcmVzanNvbkdQO1xuXG4gIC8vIGlmICghWzEwNywgMTA4LCAxMDksIDExMCwgMTExLCAxMTIsIDEzMl0uZXZlcnkoKGN1cnIpID0+IGRhdGFQcm9maWxlLmRhdGEucmVnaXN0ZXJlZF9mZWF0dXJlLmluY2x1ZGVzKGN1cnIpKSkge1xuICAvLyAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgTG9jYXRpb246ICcvZGFzaGJvYXJkL2FkbWluJyB9KVxuICAvLyAgICAgcmVzLmVuZCgpXG4gIC8vIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICBpbml0UHJvcHMsXG4gICAgICBkYXRhUHJvZmlsZSxcbiAgICAgIHNpZGVtZW51OiBcIjNcIixcbiAgICAgIGl0ZW1pZCxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJdGVtRGV0YWlsO1xuIl19 */\\n/*@ sourceURL=/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js */\"\n          }, void 0, false, void 0, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3481,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3506,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n            rows: 3,\n            placeholder: \"Masukkan Notes\",\n            onChange: function onChange(e) {\n              setnotekondisi(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3507,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3505,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3480,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3443,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between p-5 mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-xl\",\n          children: [\"Form Tambah Notes \", maindata.inventory_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3520,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(_Button, {\n              type: \"default\",\n              onClick: function onClick() {\n                setmodalnotes(false);\n              },\n              style: {\n                marginRight: \"1rem\"\n              },\n              children: \"Batal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3525,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              disabled: notes === \"\",\n              onClick: handleNotesItem,\n              loading: loadingnotes,\n              children: \"Simpan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3534,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3523,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3519,\n        columnNumber: 11\n      }, _this),\n      visible: modalnotes,\n      onCancel: function onCancel() {\n        setmodalnotes(false);\n      },\n      footer: null,\n      width: 600,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0\",\n          children: \"Notes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3554,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(_Input.TextArea, {\n          rows: 3,\n          placeholder: \"Masukkan Notes\",\n          onChange: function onChange(e) {\n            setnotes(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3555,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3553,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3517,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Modal, {\n      title: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-semibold\",\n        children: [\"Apakah anda yakin ingin menghapus item \\\"\", maindata.inventory_name, \" -\", \" \", maindata.mig_id, \"\\\"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3566,\n        columnNumber: 11\n      }, _this),\n      visible: modaldelete,\n      onCancel: function onCancel() {\n        setmodaldelete(false);\n      },\n      okText: \"Ya\",\n      cancelText: \"Tidak\",\n      onOk: handleDeleteItem,\n      okButtonProps: {\n        loading: loadingdelete\n      },\n      width: 720,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2 text-xs font-semibold\",\n            children: \"Item ini memiliki Item Part sebagai berikut :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3583,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 text-xs flex flex-col\",\n            children: maindata.inventory_parts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold\",\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3588,\n              columnNumber: 17\n            }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: maindata.inventory_parts.map(function (docempty, idxempty) {\n                return /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"- \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: docempty.inventory_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3593,\n                    columnNumber: 25\n                  }, _this)]\n                }, idxempty, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3592,\n                  columnNumber: 21\n                }, _this);\n              })\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3586,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2 text-xs font-semibold\",\n            children: \"Item ini sedang memiliki hubungan dengan item berikut:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3599,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"mb-2 text-xs\",\n            children: relship.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold\",\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3604,\n              columnNumber: 17\n            }, _this) : relship.map(function (docrel, idxrel) {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"-\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [docrel.type, \" - \", docrel.connected_detail_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3609,\n                  columnNumber: 21\n                }, _this)]\n              }, idxrel, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3607,\n                columnNumber: 19\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3602,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2 text-xs font-semibold text-red-500\",\n            children: \"Dengan menghapus item ini akan menghilangkan seluruh hubungan dengan item diatas!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3616,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3582,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3621,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3581,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3564,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3023,\n    columnNumber: 5\n  }, _this);\n};\n\n_s6(ItemDetail, \"ahCSQ76pOQXd5bxilhvrgq8exJE=\", false, function () {\n  return [useRouter];\n});\n\n_c6 = ItemDetail;\nexport var __N_SSP = true;\nexport default ItemDetail;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Overview\");\n$RefreshReg$(_c2, \"KonfigurasiPart\");\n$RefreshReg$(_c3, \"Relationship\");\n$RefreshReg$(_c4, \"Association\");\n$RefreshReg$(_c5, \"Acitivty\");\n$RefreshReg$(_c6, \"ItemDetail\");","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/items/detail/[itemId].js"],"names":["CloseCircleOutlined","DeleteOutlined","DownOutlined","ExclamationCircleOutlined","SearchOutlined","UpOutlined","moment","Link","useRouter","useEffect","useState","Sticky","Layout","st","Overview","itemid","initProps","maindata","manuf","vendor","praloading","rt","invrelations2","setinvrelations2","push","model_inventory","deleted_at","name","color","asset","mig_id","serial_number","isnull","vendor_id","is_consumable","quantities","map","doc","idx","quantity","location","location_inventory","deskripsi","additional_attributes","doccolumns","idxcolumns","data_type","value","opsi","filter","_","idxfil","includes","join","locale","format","KonfigurasiPart","invrelations","praloading2","models","setmodels","mainpartdata","setmainpartdata","assetdata","setassetdata","praloadingpart","setpraloadingpart","events","setevents","datatable","setdatatable","datatable2","setdatatable2","datatable3","setdatatable3","namasearchact","setnamasearchact","namavalue","setnamavalue","assettypefilteract","setassettypefilteract","assettypevalue","setassettypevalue","modelfilteract","setmodelfilteract","modelvalue","setmodelvalue","datatrigger","setdatatrigger","datareplacements","setdatareplacements","popover","setpopover","id","model_id","inventory_name","status_condition","status_usage","asset_id","datachanged","setdatachanged","replacement_id","notes","dataApichanged","setdataApichanged","modalchanged","setmodalchanged","disabledchanged","setdisabledchanged","loadingchanged","setloadingchanged","triggerchanged","settriggerchanged","dataremoved","setdataremoved","inventory_part_id","dataApiremoved","setdataApiremoved","modalremoved","setmodalremoved","disabledremoved","setdisabledremoved","loadingremoved","setloadingremoved","fetchingmodel","setfetchingmodel","backupmodels","setbackupmodels","columns","title","dataIndex","key","render","text","record","index","children","asset_name","padding","margin","fontSize","width","prev","recursiveFlattenArr","dataassets","result","forEach","item","recursiveModifData","dataa","i","length","inventory_replacement_parts","assetPart","recursiveSearchPartFromAsset","assetid","arr","Number","modelPart","recursiveSearchPartFromModel","modelid","namePart","recursiveSearchPartFromName","toLowerCase","handleReplacementItemPart","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","body","stringify","then","res","json","res2","success","message","duration","handleRemoveItemPart","onChangeSearch","e","target","onChangeAssetType","data","onChangeModel","idmodel","onFinalClick","datatemp","res3","recursiveChangetoChildren","rsc","inventory_parts","t","mapdata","marginRight","maxHeight","overflow","label","extra","allCheckedNodes","node","props","input","opt","indexOf","docmodels","idxmodels","pageSize","x","rowIndex","onMouseOver","event","onMouseLeave","loading","Relationship","loadingrel","setloadingrel","praloadingrel","setpraloadingrel","dataApidelete","setdataApidelete","modaldelete","setmodaldelete","loadingdelete","setloadingdelete","tipe","koneksi","relationdatadelete","setrelationdatadelete","subject_id","relationship_id","is_inverse","type_id","connected_ids","backup_connected_ids","dataApiadd","setdataApiadd","displaydatarelations","setdisplaydatarelations","relationnameadd","setrelationnameadd","relationnameddadd","setrelationnameddadd","relationselectedidxadd","setrelationselectedidxadd","relationselectedisinverseadd","setrelationselectedisinverseadd","detailtipeadd","setdetailtipeadd","detailtipedataadd","setdetailtipedataadd","modaladd","setmodaladd","disabledadd","setdisabledadd","loadingadd","setloadingadd","sublocdata","setsublocdata","subloctrig","setsubloctrig","relationship_name","type","connected_detail_name","cursor","flt","handleDeleteRelationshipItem","handleAddRelationshipItem","backup_connected_id","from_inverse","concat","not_from_inverse","console","log","relationship_type","inverse_relationship_type","Association","associations","PRESENTED_IMAGE_SIMPLE","ticket_name","status","status_name","Acitivty","activitytrigger","daylogs","setdaylogs","weeklogs","setweeklogs","morelogs","setmorelogs","praloadinglogs","setpraloadinglogs","inventories","setinventories","daylogsmap","day_logs","doclogs","idxlogs","datenew","date","descnew","desckondisiOld","properties","old","desckondisiBaru","attributes","descusageOld","descusageBaru","desc1","description","split","relationship","list_parts","docfil","docmap","companies","vendors","manufacturer_id","manufacturers","listpartsnew","part","listpartsold","prpts","prop","weeklogsmap","week_logs","morelogsmap","else_logs","doclog","idxlog","causer_name","ItemDetail","dataProfile","sidemenu","activeTab","active","query","pathArr","pathname","slice","splice","TabPane","is_exist","created_at","updated_at","model_name","location_name","company_id","company_name","setmaindata","assets","tree_companies","setinvrelations","relship","setrelship","setmanuf","setvendor","setpraloading","setpraloading2","setnotes","modalnotes","setmodalnotes","loadingnotes","setloadingnotes","kondisi","setkondisi","notekondisi","setnotekondisi","modalkondisi","setmodalkondisi","displaykondisi","setdisplaykondisi","loadingkondisi","setloadingkondisi","relationship_type_id","connected_id","detail_connected_id","changeusage","setchangeusage","disabledusage","setdisabledusage","modalusage","setmodalusage","displayusage","setdisplayusage","loadingchangecompanyusage","setloadingchangecompanyusage","loadingusage","setloadingusage","detaillist","setdetaillist","sublocations","setsublocations","locationsdisplay","setlocationsdisplay","sublocationtrigger","setsublocationtrigger","setactivitytrigger","handleDeleteItem","handleNotesItem","window","href","handleKondisiItem","handleUsageItem","del_manuf","docempty","idxempty","docrel","idxrel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SACEA,mBADF,EAEEC,cAFF,EAGEC,YAHF,EAIEC,yBAJF,EAKEC,cALF,EAMEC,UANF,QAOO,mBAPP;AAuBA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AAEA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,OAAOC,EAAP,MAAe,iDAAf;;AAGA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAOX;AAAA;;AAAA,MANJC,MAMI,QANJA,MAMI;AAAA,MALJC,SAKI,QALJA,SAKI;AAAA,MAJJC,QAII,QAJJA,QAII;AAAA,MAHJC,KAGI,QAHJA,KAGI;AAAA,MAFJC,MAEI,QAFJA,MAEI;AAAA,MADJC,UACI,QADJA,UACI;AACJ,MAAMC,EAAE,GAAGb,SAAS,EAApB,CADI,CAEJ;;AAFI,kBAGsCE,QAAQ,CAAC,EAAD,CAH9C;AAAA,MAGGY,aAHH;AAAA,MAGkBC,gBAHlB,iBAKJ;;;AAEA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,2BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEGH,UAAU,GAAG,IAAH,gBACT;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,OAAO,EAAE,mBAAM;AACbC,UAAAA,EAAE,CAACG,IAAH,yBAAyBT,MAAzB;AACD,SALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAeGK,UAAU,gBACT;AAAA;AAAA;AAAA;AAAA,aADS,gBAGT;AAAK,MAAA,SAAS,EAAC,gEAAf;AAAA,8BAKE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEGH,QAAQ,CAACQ,eAAT,CAAyBC,UAAzB,KAAwC,IAAxC,gBACC;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,WAAb;AAAA,sBAA0BT,QAAQ,CAACQ,eAAT,CAAyBE;AAAnD;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AACE,YAAA,SAAS,EAAC,OADZ;AAEE,YAAA,KAAK,EAAC,uDAFR;AAAA,mCAIE,QAAC,yBAAD;AACE,cAAA,KAAK,EAAE;AAAEC,gBAAAA,KAAK;AAAP;AADT;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,gBAaC;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBAA6BX,QAAQ,CAACQ,eAAT,CAAyBE;AAAtD;AAAA;AAAA;AAAA;AAAA,iBAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,eALF,eAuBE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEGV,QAAQ,CAACQ,eAAT,CAAyBI,KAAzB,CAA+BH,UAA/B,KAA8C,IAA9C,gBACC;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,WAAb;AAAA,sBACGT,QAAQ,CAACQ,eAAT,CAAyBI,KAAzB,CAA+BF;AADlC;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE;AACE,YAAA,SAAS,EAAC,OADZ;AAEE,YAAA,KAAK,EAAC,iEAFR;AAAA,mCAIE,QAAC,yBAAD;AACE,cAAA,KAAK,EAAE;AAAEC,gBAAAA,KAAK;AAAP;AADT;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,mBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,gBAeC;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBACGX,QAAQ,CAACQ,eAAT,CAAyBI,KAAzB,CAA+BF;AADlC;AAAA;AAAA;AAAA;AAAA,iBAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA,eAvBF,eA6CE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBAA6BV,QAAQ,CAACa;AAAtC;AAAA;AAAA;AAAA;AAAA,iBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,eA7CF,eAiDE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBACGb,QAAQ,CAACc,aAAT,KAA2B,EAA3B,IAAiCd,QAAQ,CAACc,aAAT,KAA2B,IAA5D,GACG,GADH,GAEGd,QAAQ,CAACc;AAHf;AAAA;AAAA;AAAA;AAAA,iBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,eAjDF,eAyDE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAGI;AACAb,QAAAA,KAAK,CAACc,MAAN,KAAiB,KAAjB,gBACE;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,WAAb;AAAA,sBAA0Bd,KAAK,CAACS;AAAhC;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AACE,YAAA,SAAS,EAAC,OADZ;AAEE,YAAA,KAAK,EAAC,qEAFR;AAAA,mCAIE,QAAC,yBAAD;AACE,cAAA,KAAK,EAAE;AAAEC,gBAAAA,KAAK;AAAP;AADT;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,gBAaE;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBAA6BV,KAAK,CAACS;AAAnC;AAAA;AAAA;AAAA;AAAA,iBAjBN;AAAA;AAAA;AAAA;AAAA;AAAA,eAzDF,eA8EE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBACGV,QAAQ,CAACgB,SAAT,KAAuB,IAAvB,GAA8B,GAA9B,GAAoCd;AADvC;AAAA;AAAA;AAAA;AAAA,iBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,eA9EF,eAoFE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEGF,QAAQ,CAACiB,aAAT,KAA2B,IAA3B,GACCjB,QAAQ,CAACkB,UAAT,CAAoBC,GAApB,CAAwB,UAACC,GAAD,EAAMC,GAAN;AAAA,8BACtB;AAAG,YAAA,SAAS,EAAC,cAAb;AAAA,uBACGA,GAAG,GAAG,CADT,QACcD,GAAG,CAACV,IADlB,SAC2BU,GAAG,CAACE,QAD/B;AAAA;AAAA;AAAA;AAAA;AAAA,mBADsB;AAAA,SAAxB,CADD,gBAOC;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBACGtB,QAAQ,CAACuB,QAAT,KAAsB,IAAtB,GACG,GADH,GAEGvB,QAAQ,CAACwB,kBAAT,CAA4Bd;AAHlC;AAAA;AAAA;AAAA;AAAA,iBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,eApFF,eAoGE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,6BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBACGV,QAAQ,CAACyB,SAAT,KAAuB,EAAvB,IAA6BzB,QAAQ,CAACyB,SAAT,KAAuB,IAApD,GACG,GADH,GAEGzB,QAAQ,CAACyB;AAHf;AAAA;AAAA;AAAA;AAAA,iBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,eApGF,eA4GE;AAAA;AAAA;AAAA;AAAA,eA5GF,EA6GGzB,QAAQ,CAAC0B,qBAAT,CAA+BP,GAA/B,CAAmC,UAACQ,UAAD,EAAaC,UAAb,EAA4B;AAC9D,4BACE;AAEE,UAAA,SAAS,+BACPA,UAAU,KAAK,CAAf,cADO,CAFX;AAAA,kCAME;AAAI,YAAA,SAAS,EAAC,6BAAd;AAAA,uBACGD,UAAU,CAACjB,IADd;AAAA;AAAA;AAAA;AAAA;AAAA,mBANF,eASE;AAAG,YAAA,SAAS,EAAC,cAAb;AAAA,sBACGiB,UAAU,CAACE,SAAX,KAAyB,UAAzB,IACDF,UAAU,CAACE,SAAX,KAAyB,UADxB,IAEDF,UAAU,CAACE,SAAX,KAAyB,MAFxB,gBAGC;AAAA,yBACGF,UAAU,CAACE,SAAX,KAAyB,UAAzB,iBACC;AAAA,0BAAGF,UAAU,CAACG,KAAX,CAAiBC,IAAjB,CAAsBJ,UAAU,CAACG,KAAX,WAAtB;AAAH,+BAFJ,EAIGH,UAAU,CAACE,SAAX,KAAyB,UAAzB,iBACC;AAAA,0BACGF,UAAU,CAACG,KAAX,CAAiBC,IAAjB,CACEC,MADF,CACS,UAACC,CAAD,EAAIC,MAAJ,EAAe;AACrB,yBAAOP,UAAU,CAACG,KAAX,YAAyBK,QAAzB,CAAkCD,MAAlC,CAAP;AACD,iBAHF,EAIEE,IAJF,CAIO,IAJP;AADH,+BALJ,EAaGT,UAAU,CAACE,SAAX,KAAyB,MAAzB,iBACC;AAAA,0BACGxC,MAAM,CAACsC,UAAU,CAACG,KAAZ,CAAN,CAAyBO,MAAzB,CAAgC,IAAhC,EAAsCC,MAAtC,CAA6C,IAA7C;AADH,+BAdJ;AAAA,4BAHD,gBAuBC;AAAA,wBAAGX,UAAU,CAACG;AAAd;AAxBJ;AAAA;AAAA;AAAA;AAAA,mBATF;AAAA,WACOF,UADP;AAAA;AAAA;AAAA;AAAA,iBADF;AAuCD,OAxCA,CA7GH;AAAA;AAAA;AAAA;AAAA;AAAA,aAlBJ;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AA6KD,CA3LD;;GAAM/B,Q;UAQON,S;;;KARPM,Q;;AA4LN,IAAM0C,eAAe,GAAG,SAAlBA,eAAkB,QAQlB;AAAA;;AAAA,MAPJxC,SAOI,SAPJA,SAOI;AAAA,MANJD,MAMI,SANJA,MAMI;AAAA,MALJ0C,YAKI,SALJA,YAKI;AAAA,MAJJxC,QAII,SAJJA,QAII;AAAA,MAHJyC,WAGI,SAHJA,WAGI;AAAA,MAFJC,MAEI,SAFJA,MAEI;AAAA,MADJC,SACI,SADJA,SACI;AACJ,MAAMvC,EAAE,GAAGb,SAAS,EAApB,CADI,CAGJ;;AAHI,mBAIoCE,QAAQ,CAAC,EAAD,CAJ5C;AAAA,MAIGmD,YAJH;AAAA,MAIiBC,eAJjB;;AAAA,mBAK8BpD,QAAQ,CAAC,EAAD,CALtC;AAAA,MAKGqD,SALH;AAAA,MAKcC,YALd;;AAAA,mBAMwCtD,QAAQ,CAAC,IAAD,CANhD;AAAA,MAMGuD,cANH;AAAA,MAMmBC,iBANnB;;AAAA,mBAOwBxD,QAAQ,CAAC,EAAD,CAPhC;AAAA,MAOGyD,MAPH;AAAA,MAOWC,SAPX;;AAAA,mBAQ8B1D,QAAQ,CAAC,EAAD,CARtC;AAAA,MAQG2D,SARH;AAAA,MAQcC,YARd;;AAAA,mBASgC5D,QAAQ,CAAC,EAAD,CATxC;AAAA,MASG6D,UATH;AAAA,MASeC,aATf;;AAAA,mBAUgC9D,QAAQ,CAAC,EAAD,CAVxC;AAAA,MAUG+D,UAVH;AAAA,MAUeC,aAVf;;AAAA,mBAWsChE,QAAQ,CAAC,KAAD,CAX9C;AAAA,MAWGiE,aAXH;AAAA,MAWkBC,gBAXlB;;AAAA,oBAY8BlE,QAAQ,CAAC,EAAD,CAZtC;AAAA,MAYGmE,SAZH;AAAA,MAYcC,YAZd;;AAAA,oBAagDpE,QAAQ,CAAC,KAAD,CAbxD;AAAA,MAaGqE,kBAbH;AAAA,MAauBC,qBAbvB;;AAAA,oBAcwCtE,QAAQ,CAAC,EAAD,CAdhD;AAAA,MAcGuE,cAdH;AAAA,MAcmBC,iBAdnB;;AAAA,oBAewCxE,QAAQ,CAAC,KAAD,CAfhD;AAAA,MAeGyE,cAfH;AAAA,MAemBC,iBAfnB;;AAAA,oBAgBgC1E,QAAQ,CAAC,EAAD,CAhBxC;AAAA,MAgBG2E,UAhBH;AAAA,MAgBeC,aAhBf;;AAAA,oBAiBkC5E,QAAQ,CAAC,CAAD,CAjB1C;AAAA,MAiBG6E,WAjBH;AAAA,MAiBgBC,cAjBhB,mBAkBJ;;;AAlBI,oBAmB4C9E,QAAQ,CAAC,EAAD,CAnBpD;AAAA,MAmBG+E,gBAnBH;AAAA,MAmBqBC,mBAnBrB;;AAAA,oBAoB0BhF,QAAQ,CAAC,KAAD,CApBlC;AAAA,MAoBGiF,OApBH;AAAA,MAoBYC,UApBZ,mBAqBJ;;;AArBI,oBAsBkClF,QAAQ,CAAC;AAC7CmF,IAAAA,EAAE,EAAE,IADyC;AAE7CC,IAAAA,QAAQ,EAAE,IAFmC;AAG7CC,IAAAA,cAAc,EAAE,EAH6B;AAI7CjE,IAAAA,MAAM,EAAE,EAJqC;AAK7CkE,IAAAA,gBAAgB,EAAE;AAChBH,MAAAA,EAAE,EAAE,IADY;AAEhBlE,MAAAA,IAAI,EAAE;AAFU,KAL2B;AAS7CsE,IAAAA,YAAY,EAAE;AACZJ,MAAAA,EAAE,EAAE,IADQ;AAEZlE,MAAAA,IAAI,EAAE;AAFM,KAT+B;AAa7CD,IAAAA,UAAU,EAAE,IAbiC;AAc7CD,IAAAA,eAAe,EAAE;AACfoE,MAAAA,EAAE,EAAE,IADW;AAEflE,MAAAA,IAAI,EAAE,EAFS;AAGfuE,MAAAA,QAAQ,EAAE,IAHK;AAIfxE,MAAAA,UAAU,EAAE,IAJG;AAKfG,MAAAA,KAAK,EAAE;AACLgE,QAAAA,EAAE,EAAE,IADC;AAELlE,QAAAA,IAAI,EAAE,EAFD;AAGLD,QAAAA,UAAU,EAAE;AAHP;AALQ;AAd4B,GAAD,CAtB1C;AAAA,MAsBGyE,WAtBH;AAAA,MAsBgBC,cAtBhB;;AAAA,oBAgDwC1F,QAAQ,CAAC;AACnDmF,IAAAA,EAAE,EAAE,CAD+C;AAEnDQ,IAAAA,cAAc,EAAE,CAFmC;AAGnDC,IAAAA,KAAK,EAAE;AAH4C,GAAD,CAhDhD;AAAA,MAgDGC,cAhDH;AAAA,MAgDmBC,iBAhDnB;;AAAA,oBAqDoC9F,QAAQ,CAAC,KAAD,CArD5C;AAAA,MAqDG+F,YArDH;AAAA,MAqDiBC,eArDjB;;AAAA,oBAsD0ChG,QAAQ,CAAC,IAAD,CAtDlD;AAAA,MAsDGiG,eAtDH;AAAA,MAsDoBC,kBAtDpB;;AAAA,oBAuDwClG,QAAQ,CAAC,KAAD,CAvDhD;AAAA,MAuDGmG,cAvDH;AAAA,MAuDmBC,iBAvDnB;;AAAA,oBAwDwCpG,QAAQ,CAAC,CAAC,CAAF,CAxDhD;AAAA,MAwDGqG,cAxDH;AAAA,MAwDmBC,iBAxDnB,mBAyDJ;;;AAzDI,oBA0DkCtG,QAAQ,CAAC,CAAC,CAAF,CA1D1C;AAAA,MA0DGuG,WA1DH;AAAA,MA0DgBC,cA1DhB;;AAAA,oBA2DwCxG,QAAQ,CAAC;AACnDmF,IAAAA,EAAE,EAAE,CAD+C;AAEnDsB,IAAAA,iBAAiB,EAAE,CAFgC;AAGnDb,IAAAA,KAAK,EAAE;AAH4C,GAAD,CA3DhD;AAAA,MA2DGc,cA3DH;AAAA,MA2DmBC,iBA3DnB;;AAAA,oBAgEoC3G,QAAQ,CAAC,KAAD,CAhE5C;AAAA,MAgEG4G,YAhEH;AAAA,MAgEiBC,eAhEjB;;AAAA,oBAiE0C7G,QAAQ,CAAC,IAAD,CAjElD;AAAA,MAiEG8G,eAjEH;AAAA,MAiEoBC,kBAjEpB;;AAAA,oBAkEwC/G,QAAQ,CAAC,KAAD,CAlEhD;AAAA,MAkEGgH,cAlEH;AAAA,MAkEmBC,iBAlEnB;;AAAA,oBAmEsCjH,QAAQ,CAAC,KAAD,CAnE9C;AAAA,MAmEGkH,aAnEH;AAAA,MAmEkBC,gBAnElB;;AAAA,oBAoEoCnH,QAAQ,CAACiD,MAAD,CApE5C;AAAA,MAoEGmE,YApEH;AAAA,MAoEiBC,eApEjB;;AAsEJ,MAAMC,OAAO,GAAG,CACd;AACA;AACA;AACA;AACA;AACA;AACEC,IAAAA,KAAK,EAAE,QADT;AAEEC,IAAAA,SAAS,EAAE,QAFb;AAGEC,IAAAA,GAAG,EAAE;AAHP,GANc,EAWd;AACEF,IAAAA,KAAK,EAAE,eADT;AAEEC,IAAAA,SAAS,EAAE,eAFb;AAGEC,IAAAA,GAAG,EAAE,eAHP;AAIEC,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,MAAP,EAAeC,KAAf,EAAyB;AAC/B,aAAO;AACLC,QAAAA,QAAQ,eACN;AAAA,oBAAGF,MAAM,CAACvG,aAAP,KAAyB,IAAzB,GAAgC,GAAhC,GAAsCuG,MAAM,CAACvG;AAAhD;AAFG,OAAP;AAKD;AAVH,GAXc,EAuBd;AACEkG,IAAAA,KAAK,EAAE,OADT;AAEEC,IAAAA,SAAS,EAAE,YAFb;AAGEC,IAAAA,GAAG,EAAE,YAHP;AAIEC,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,MAAP,EAAeC,KAAf,EAAyB;AAC/B,aAAO;AACLC,QAAAA,QAAQ,eAAE;AAAA,oBAAGF,MAAM,CAAC7G,eAAP,CAAuBE;AAA1B;AADL,OAAP;AAGD;AARH,GAvBc,EAiCd;AACEsG,IAAAA,KAAK,EAAE,YADT;AAEEC,IAAAA,SAAS,EAAE,YAFb;AAGEC,IAAAA,GAAG,EAAE,YAHP;AAIEC,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,MAAP,EAAeC,KAAf,EAAyB;AAC/B,aAAO;AACLC,QAAAA,QAAQ,eAAE;AAAA,oBAAGF,MAAM,CAAC7G,eAAP,CAAuBI,KAAvB,CAA6B4G;AAAhC;AADL,OAAP;AAGD;AARH,GAjCc,EA2Cd;AACER,IAAAA,KAAK,EAAE,sDADT;AAEEC,IAAAA,SAAS,EAAE,UAFb;AAGEE,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,MAAP,EAAeC,KAAf,EAAyB;AAC/B,aAAO;AACLC,QAAAA,QAAQ,eACN;AAAA,oBACGrE,MAAM,KAAKmE,MAAM,CAACzC,EAAlB,gBACC;AACE,YAAA,OAAO,EAAEF,OADX;AAEE,YAAA,eAAe,EAAE,2BAAM;AACrBC,cAAAA,UAAU,CAAC,IAAD,CAAV;AACD,aAJH;AAKE,YAAA,KAAK,EAAE;AAAE8C,cAAAA,OAAO,OAAT;AAAkBC,cAAAA,MAAM;AAAxB,aALT;AAME,YAAA,SAAS,EAAC,YANZ;AAOE,YAAA,OAAO,EAAC,OAPV;AAQE,YAAA,OAAO,eACL;AAAK,cAAA,SAAS,EAAC,eAAf;AAAA,sCACE;AACE,gBAAA,SAAS,EAAC,oCADZ;AAEE,gBAAA,OAAO,EAAE;AAAA,yBAAM/C,UAAU,CAAC,KAAD,CAAhB;AAAA,iBAFX;AAAA,uCAIE,QAAC,mBAAD;AACE,kBAAA,KAAK,EAAE;AAAEhE,oBAAAA,KAAK,OAAP;AAAgBgH,oBAAAA,QAAQ;AAAxB;AADT;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,uBADF,eASE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,KAAK;AAAP,iBAFT;AAGE,gBAAA,OAAO,EAAE,mBAAM;AACb3B,kBAAAA,cAAc,CAACoB,MAAD,CAAd;AACAjB,kBAAAA,iBAAiB,iCACZD,cADY;AAEfvB,oBAAAA,EAAE,EAAEhC,YAAY,CAACgC,EAFF;AAGfsB,oBAAAA,iBAAiB,EAAEmB,MAAM,CAACzC;AAHX,qBAAjB;AAKA0B,kBAAAA,eAAe,CAAC,IAAD,CAAf;AACA3B,kBAAAA,UAAU,CAAC,KAAD,CAAV;AACD,iBAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBATF,eAyBE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,KAAK,EAAE;AAAEiD,kBAAAA,KAAK;AAAP,iBAFT;AAGE,gBAAA,OAAO,EAAE,mBAAM;AACbzC,kBAAAA,cAAc,CAACkC,MAAD,CAAd;AACA5B,kBAAAA,eAAe,CAAC,IAAD,CAAf;AACAd,kBAAAA,UAAU,CAAC,KAAD,CAAV;AACAoB,kBAAAA,iBAAiB,CAAC,UAAC8B,IAAD;AAAA,2BAAUA,IAAI,GAAG,CAAjB;AAAA,mBAAD,CAAjB;AACD,iBARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,qBATJ;AAAA,mCAmDE;AACE,cAAA,SAAS,EAAC,gBADZ;AAEE,cAAA,OAAO,EAAE;AAAA,uBAAMlD,UAAU,CAAC,KAAD,CAAhB;AAAA,eAFX;AAAA,qCAIE,QAAC,mBAAD;AACE,gBAAA,KAAK,EAAE;AAAEhE,kBAAAA,KAAK,OAAP;AAAgBgH,kBAAAA,QAAQ;AAAxB;AADT;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA;AAnDF;AAAA;AAAA;AAAA;AAAA,mBADD,GA6DG;AA9DN;AAFG,OAAP;AAoED;AAxEH,GA3Cc,CAAhB,CAtEI,CA6LJ;AACA;;AACA,MAAMG,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,UAAD,EAAgB;AAC1C,QAAMC,MAAM,GAAG,EAAf;AACAD,IAAAA,UAAU,CAACE,OAAX,CAAmB,UAACC,IAAD,EAAO7G,GAAP,EAAe;AAChC2G,MAAAA,MAAM,CAACzH,IAAP,CAAY2H,IAAI,CAACtD,EAAjB;;AACA,UAAIsD,IAAI,CAACX,QAAT,EAAmB;AACjBS,QAAAA,MAAM,CAACzH,IAAP,OAAAyH,MAAM,qBAASF,mBAAmB,CAACI,IAAI,CAACX,QAAN,CAA5B,EAAN;AACD;AACF,KALD;AAMA,WAAOS,MAAP;AACD,GATD;;AAUA,WAASG,kBAAT,CAA4BC,KAA5B,EAAmC;AACjC,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAA;;AACrCD,MAAAA,KAAK,CAACC,CAAD,CAAL,CAAS,KAAT,IAAkBD,KAAK,CAACC,CAAD,CAAL,CAASzD,EAA3B;AACAwD,MAAAA,KAAK,CAACC,CAAD,CAAL,CAAS,OAAT,IAAoBD,KAAK,CAACC,CAAD,CAAL,CAASzD,EAA7B;AACAwD,MAAAA,KAAK,CAACC,CAAD,CAAL,CACE,OADF,cAEOD,KAAK,CAACC,CAAD,CAAL,CAASxH,MAFhB,yCAE4BuH,KAAK,CAACC,CAAD,CAAL,CAAS7H,eAFrC,0DAE4B,sBAA0BE,IAFtD;AAGA0H,MAAAA,KAAK,CAACC,CAAD,CAAL,CAAS,UAAT,IAAuBD,KAAK,CAACC,CAAD,CAAL,CAASE,2BAAhC;AACA,aAAOH,KAAK,CAACC,CAAD,CAAL,CAASE,2BAAhB;;AACA,UAAIH,KAAK,CAACC,CAAD,CAAL,CAASd,QAAT,CAAkBe,MAAlB,GAA2B,CAA/B,EAAkC;AAChCH,QAAAA,kBAAkB,CAACC,KAAK,CAACC,CAAD,CAAL,CAASd,QAAV,CAAlB;AACD;AACF;;AACD,WAAOa,KAAP;AACD,GAvNG,CAyNJ;;;AACA,MAAMI,SAAS,GAAG,EAAlB;;AACA,MAAMC,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACrH,GAAD,EAAMsH,OAAN,EAAkB;AACrD,QAAIC,GAAG,GAAG,EAAV;;AACA,SAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjH,GAAG,CAACkH,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,UAAIjH,GAAG,CAACiH,CAAD,CAAH,CAAO7H,eAAP,CAAuBI,KAAvB,CAA6BgE,EAA7B,KAAoCgE,MAAM,CAACF,OAAD,CAA9C,EAAyD;AACvD;AACAF,QAAAA,SAAS,CAACjI,IAAV,CAAea,GAAG,CAACiH,CAAD,CAAlB;AACD,OAHD,MAGO;AACL,YAAIjH,GAAG,CAACiH,CAAD,CAAH,CAAOd,QAAX,EAAqB;AACnBoB,UAAAA,GAAG,CAACpI,IAAJ,iCACKa,GAAG,CAACiH,CAAD,CADR;AAEEd,YAAAA,QAAQ,EAAEkB,4BAA4B,CAACrH,GAAG,CAACiH,CAAD,CAAH,CAAOd,QAAR,EAAkBmB,OAAlB;AAFxC;AAID,SALD,MAKO;AACLC,UAAAA,GAAG,CAACpI,IAAJ,mBACKa,GAAG,CAACiH,CAAD,CADR;AAGD;AACF;AACF;;AACD,WAAOM,GAAP;AACD,GApBD;;AAqBA,MAAME,SAAS,GAAG,EAAlB;;AACA,MAAMC,4BAA4B,GAAG,SAA/BA,4BAA+B,CAAC1H,GAAD,EAAM2H,OAAN,EAAkB;AACrD,QAAIJ,GAAG,GAAG,EAAV;;AACA,SAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjH,GAAG,CAACkH,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,UAAIjH,GAAG,CAACiH,CAAD,CAAH,CAAOxD,QAAP,KAAoBkE,OAAxB,EAAiC;AAC/B;AACAF,QAAAA,SAAS,CAACtI,IAAV,CAAea,GAAG,CAACiH,CAAD,CAAlB;AACD,OAHD,MAGO;AACL,YAAIjH,GAAG,CAACiH,CAAD,CAAH,CAAOd,QAAX,EAAqB;AACnBoB,UAAAA,GAAG,CAACpI,IAAJ,iCACKa,GAAG,CAACiH,CAAD,CADR;AAEEd,YAAAA,QAAQ,EAAEuB,4BAA4B,CAAC1H,GAAG,CAACiH,CAAD,CAAH,CAAOd,QAAR,EAAkBwB,OAAlB;AAFxC;AAID,SALD,MAKO;AACLJ,UAAAA,GAAG,CAACpI,IAAJ,mBACKa,GAAG,CAACiH,CAAD,CADR;AAGD;AACF;AACF;;AACD,WAAOM,GAAP;AACD,GApBD;;AAqBA,MAAMK,QAAQ,GAAG,EAAjB;;AACA,MAAMC,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAC7H,GAAD,EAAMV,IAAN,EAAe;AACjD,QAAIiI,GAAG,GAAG,EAAV;;AACA,SAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjH,GAAG,CAACkH,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,UAAIjH,GAAG,CAACiH,CAAD,CAAH,CAAOvD,cAAP,CAAsBoE,WAAtB,GAAoC/G,QAApC,CAA6CzB,IAAI,CAACwI,WAAL,EAA7C,CAAJ,EAAsE;AACpE;AACAF,QAAAA,QAAQ,CAACzI,IAAT,CAAca,GAAG,CAACiH,CAAD,CAAjB;AACD,OAHD,MAGO;AACL,YAAIjH,GAAG,CAACiH,CAAD,CAAH,CAAOd,QAAX,EAAqB;AACnBoB,UAAAA,GAAG,CAACpI,IAAJ,iCACKa,GAAG,CAACiH,CAAD,CADR;AAEEd,YAAAA,QAAQ,EAAE0B,2BAA2B,CAAC7H,GAAG,CAACiH,CAAD,CAAH,CAAOd,QAAR,EAAkB7G,IAAlB;AAFvC;AAID,SALD,MAKO;AACLiI,UAAAA,GAAG,CAACpI,IAAJ,mBACKa,GAAG,CAACiH,CAAD,CADR;AAGD;AACF;AACF;;AACD,WAAOM,GAAP;AACD,GApBD,CAvQI,CA4RJ;;;AACA,MAAMQ,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAM;AACtCtD,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAuD,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,4BAAgE;AACnEC,MAAAA,MAAM,EAAE,KAD2D;AAEnEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAF0D;AAMnE8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAexE,cAAf;AAN6D,KAAhE,CAAL,CAQGyE,IARH,CAQQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KARR,EASGF,IATH,CASQ,UAACG,IAAD,EAAU;AACdrE,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;;AACA,UAAIqE,IAAI,CAACC,OAAT,EAAkB;AAChB,sBAAa,SAAb,EAAwB;AACtBC,UAAAA,OAAO,EAAE,4BADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIA5E,QAAAA,eAAe,CAAC,KAAD,CAAf;AACAlB,QAAAA,cAAc,CAAC,UAACsD,IAAD;AAAA,iBAAUA,IAAI,GAAG,CAAjB;AAAA,SAAD,CAAd;AACD,OAPD,MAOO,IAAI,CAACqC,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KAxBH;AAyBD,GA3BD;;AA4BA,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACjC5D,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACA0C,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,2BAA+D;AAClEC,MAAAA,MAAM,EAAE,QAD0D;AAElEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAFyD;AAMlE8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAe3D,cAAf;AAN4D,KAA/D,CAAL,CAQG4D,IARH,CAQQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KARR,EASGF,IATH,CASQ,UAACG,IAAD,EAAU;AACdxD,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;;AACA,UAAIwD,IAAI,CAACC,OAAT,EAAkB;AAChB,sBAAa,SAAb,EAAwB;AACtBC,UAAAA,OAAO,EAAE,gCADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIA/D,QAAAA,eAAe,CAAC,KAAD,CAAf;AACA/B,QAAAA,cAAc,CAAC,UAACsD,IAAD;AAAA,iBAAUA,IAAI,GAAG,CAAjB;AAAA,SAAD,CAAd;AACD,OAPD,MAOO,IAAI,CAACqC,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KAxBH;AAyBD,GA3BD,CAzTI,CAsVJ;;;AACA,MAAME,cAAc,GAAG,SAAjBA,cAAiB,CAACC,CAAD,EAAO;AAC5B,QAAIA,CAAC,CAACC,MAAF,CAAS3I,KAAT,KAAmB,EAAvB,EAA2B;AACzBuB,MAAAA,YAAY,CAACG,UAAD,CAAZ;AACAG,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,KAHD,MAGO;AACLA,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,MAAAA,YAAY,CAAC2G,CAAC,CAACC,MAAF,CAAS3I,KAAV,CAAZ;AACD;AACF,GARD,CAvVI,CAgWJ;;;AACA,MAAM4I,iBAAiB,GAAG,SAApBA,iBAAoB,CAAC9F,EAAD,EAAQ;AAChC,QAAI,OAAOA,EAAP,KAAc,WAAlB,EAA+B;AAC7BvB,MAAAA,YAAY,CAACG,UAAD,CAAZ;AACAO,MAAAA,qBAAqB,CAAC,KAAD,CAArB;AACApB,MAAAA,SAAS,CAACkE,YAAD,CAAT;AACD,KAJD,MAIO;AACLuC,MAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,0CACmE3E,EADnE,GAEH;AACE4E,QAAAA,MAAM,OADR;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,OAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACdA,QAAAA,IAAI,CAACS,IAAL,CAAUrC,MAAV,KAAqB,CAArB,GAAyB3F,SAAS,CAAC,EAAD,CAAlC,GAAyCA,SAAS,CAACuH,IAAI,CAACS,IAAL,CAAUA,IAAX,CAAlD;AACD,OAZH;AAaA5G,MAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAE,MAAAA,iBAAiB,CAACW,EAAD,CAAjB;AACD;AACF,GAtBD,CAjWI,CAwXJ;;;AACA,MAAMgG,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAa;AACjC,QAAI,OAAOA,OAAP,KAAmB,WAAvB,EAAoC;AAClCxH,MAAAA,YAAY,CAACG,UAAD,CAAZ;AACAW,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD,KAHD,MAGO;AACLA,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAE,MAAAA,aAAa,CAACwG,OAAD,CAAb;AACD;AACF,GARD,CAzXI,CAkYJ;;;AACA,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAIC,QAAQ,GAAGzH,UAAf;;AACA,QAAIQ,kBAAJ,EAAwB;AACtB;AACA2E,MAAAA,4BAA4B,CAACsC,QAAD,EAAW/G,cAAX,CAA5B;AACA+G,MAAAA,QAAQ,GAAGvC,SAAX;AACD;;AACD,QAAItE,cAAJ,EAAoB;AAClB;AACA4E,MAAAA,4BAA4B,CAACiC,QAAD,EAAW3G,UAAX,CAA5B;AACA2G,MAAAA,QAAQ,GAAGlC,SAAX;AACD;;AACD,QAAInF,aAAJ,EAAmB;AACjB;AACAuF,MAAAA,2BAA2B,CAAC8B,QAAD,EAAWnH,SAAX,CAA3B;AACAmH,MAAAA,QAAQ,GAAG/B,QAAX;AACD;;AACD3F,IAAAA,YAAY,CAAC0H,QAAD,CAAZ;AACD,GAlBD;;AAoBAvL,EAAAA,SAAS,CAAC,YAAM;AACd4J,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,8BAA2DzJ,MAA3D,GAAqE;AACxE0J,MAAAA,MAAM,OADkE;AAExEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAF+D,KAArE,CAAL,CAMGgK,IANH,CAMQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KANR,EAOGF,IAPH,CAOQ,UAACG,IAAD,EAAU;AACd,aAAOA,IAAI,CAACS,IAAZ;AACD,KATH,EAUGZ,IAVH,CAUQ,UAACiB,IAAD,EAAU;AACd,UAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACC,GAAD,EAAS;AACzC,YAAIlB,GAAG,GAAG,EAAV;;AACA,aAAK,IAAI3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6C,GAAG,CAAC5C,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AAAA;;AACnC6C,UAAAA,GAAG,CAAC7C,CAAD,CAAH,CAAOnB,GAAP,GAAagE,GAAG,CAAC7C,CAAD,CAAH,CAAOzD,EAApB;AACAsG,UAAAA,GAAG,CAAC7C,CAAD,CAAH,CAAOvG,KAAP,GAAeoJ,GAAG,CAAC7C,CAAD,CAAH,CAAOzD,EAAtB;AACAsG,UAAAA,GAAG,CAAC7C,CAAD,CAAH,CAAOrB,KAAP,aAAkBkE,GAAG,CAAC7C,CAAD,CAAH,CAAOxH,MAAzB,yCAAqCqK,GAAG,CAAC7C,CAAD,CAAH,CAAO7H,eAA5C,0DAAqC,sBAAwBE,IAA7D;AACAwK,UAAAA,GAAG,CAAC7C,CAAD,CAAH,CAAOd,QAAP,GAAkB2D,GAAG,CAAC7C,CAAD,CAAH,CAAO8C,eAAzB;AACA,iBAAOD,GAAG,CAAC7C,CAAD,CAAH,CAAO8C,eAAd;;AACA,cAAID,GAAG,CAAC7C,CAAD,CAAH,CAAOd,QAAP,CAAgBe,MAAhB,KAA2B,CAA/B,EAAkC;AAChC0B,YAAAA,GAAG,CAACzJ,IAAJ,iCACK2K,GAAG,CAAC7C,CAAD,CADR;AAEEd,cAAAA,QAAQ,EAAE0D,yBAAyB,CAACC,GAAG,CAAC7C,CAAD,CAAH,CAAOd,QAAR;AAFrC;AAID,WALD,MAKO;AACL,mBAAO2D,GAAG,CAAC7C,CAAD,CAAH,CAAOd,QAAd;AACAyC,YAAAA,GAAG,CAACzJ,IAAJ,mBACK2K,GAAG,CAAC7C,CAAD,CADR;AAGD;AACF;;AACD,eAAO2B,GAAP;AACD,OArBD;;AAsBA,UAAMoB,CAAC,GAAGH,yBAAyB,CAACD,IAAI,CAACG,eAAN,CAAnC;AACAtI,MAAAA,eAAe,iCACVmI,IADU;AAEbG,QAAAA,eAAe,EAAEC;AAFJ,SAAf;AAIA/H,MAAAA,YAAY,CAAC+H,CAAD,CAAZ;AACA7H,MAAAA,aAAa,CAAC6H,CAAD,CAAb;AACA3H,MAAAA,aAAa,CAAC2H,CAAD,CAAb;AACAnI,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD,KA1CH;AA2CD,GA5CQ,EA4CN,CAACqB,WAAD,CA5CM,CAAT;AA6CA9E,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIsG,cAAc,KAAK,CAAC,CAAxB,EAA2B;AACzBsD,MAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,0CACmErE,WAAW,CAAC1E,eAAZ,CAA4ByE,QAD/F,GAEH;AACEuE,QAAAA,MAAM,OADR;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,OAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACd,YAAMmB,OAAO,GAAGlD,kBAAkB,CAAC+B,IAAI,CAACS,IAAN,CAAlC;AACAlG,QAAAA,mBAAmB,CAAC4G,OAAD,CAAnB;;AACA,YAAIA,OAAO,CAAC/C,MAAR,KAAmB,CAAvB,EAA0B;AACxB3C,UAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD;AACF,OAhBH;AAiBD;AACF,GApBQ,EAoBN,CAACG,cAAD,CApBM,CAAT;AAqBAtG,EAAAA,SAAS,CAAC,YAAM;AACd4J,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,iBAAqD;AACxDC,MAAAA,MAAM,OADkD;AAExDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAF+C,KAArD,CAAL,CAMGgK,IANH,CAMQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KANR,EAOGF,IAPH,CAOQ,UAACG,IAAD,EAAU;AACdnH,MAAAA,YAAY,CAACmH,IAAI,CAACS,IAAN,CAAZ;AACD,KATH;AAUD,GAXQ,EAWN,EAXM,CAAT;AAaA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,2BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEGlI,WAAW,GAAG,IAAH,gBACV;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,OAAO,EAAE,mBAAM;AACb;AAAwDrC,UAAAA,EAAE,CAACG,IAAH,6BACjCT,MADiC,mBAClB8C,YAAY,CAAC/B,MADK;AAGzD,SAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAiBE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,gBACG4B,WAAW,GAAG,IAAH,gBACV;AAAK,QAAA,SAAS,EAAC,gCAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AACE,YAAA,KAAK,EAAE;AAAEmF,cAAAA,KAAK,QAAP;AAAiB0D,cAAAA,WAAW;AAA5B,aADT;AAEE,YAAA,WAAW,EAAC,gBAFd;AAGE,YAAA,QAAQ,EAAE,kBAACd,CAAD;AAAA,qBAAOD,cAAc,CAACC,CAAD,CAArB;AAAA,aAHZ;AAIE,YAAA,UAAU;AAJZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBADF,eASE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AACE,YAAA,UAAU,MADZ;AAEE,YAAA,aAAa,EAAE;AAAEe,cAAAA,SAAS,EAAE,GAAb;AAAkBC,cAAAA,QAAQ,EAAE;AAA5B,aAFjB;AAGE,YAAA,QAAQ,EAAE1I,SAHZ;AAIE,YAAA,WAAW,EAAC,iBAJd;AAKE,YAAA,oBAAoB,MALtB;AAME,YAAA,KAAK,EAAE;AAAE8E,cAAAA,KAAK;AAAP,aANT;AAOE,YAAA,QAAQ,EAAE,kBAAC9F,KAAD,EAAQ2J,KAAR,EAAeC,KAAf,EAAyB;AACjC,kBAAI,OAAO5J,KAAP,KAAiB,WAArB,EAAkC;AAChC4I,gBAAAA,iBAAiB;AAClB,eAFD,MAEO;AACLA,gBAAAA,iBAAiB,CAACgB,KAAK,CAACC,eAAN,CAAsB,CAAtB,EAAyBC,IAAzB,CAA8BC,KAA9B,CAAoCjH,EAArC,CAAjB;AACD;AACF;AAbH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBATF,eA0BE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AACE,YAAA,UAAU,MADZ;AAEE,YAAA,gBAAgB,EAAC,UAFnB;AAGE,YAAA,eAAe,EAAE+B,aAAa,gBAAG;AAAM,cAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA,qBAAH,GAA2B,IAH3D;AAIE,YAAA,QAAQ,EAAE,kBAAC7E,KAAD,EAAW;AACnB8E,cAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAwC,cAAAA,KAAK,WAEDC,OAAO,CAACC,GAAR,CAAYC,uBAFX,mCAGsBzH,KAAK,KAAK,EAAV,GAAeA,KAAf,GAAuB,EAH7C,GAIH;AACE0H,gBAAAA,MAAM,OADR;AAEEC,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,eAJG,CAAL,CAWGgK,IAXH,CAWQ,UAACC,GAAD;AAAA,uBAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,eAXR,EAYGF,IAZH,CAYQ,UAACG,IAAD,EAAU;AACdvH,gBAAAA,SAAS,CAACuH,IAAI,CAACS,IAAN,CAAT;AACA/D,gBAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,eAfH;AAgBD,aAtBH;AAuBE,YAAA,YAAY,EAAE,sBAACkF,KAAD,EAAQC,GAAR;AAAA,qBACZA,GAAG,CAACxE,QAAJ,CAAa2B,WAAb,GAA2B8C,OAA3B,CAAmCF,KAAK,CAAC5C,WAAN,EAAnC,KAA2D,CAD/C;AAAA,aAvBhB;AA0BE,YAAA,WAAW,EAAC,YA1Bd;AA2BE,YAAA,KAAK,EAAE;AAAEtB,cAAAA,KAAK;AAAP,aA3BT;AA4BE,YAAA,UAAU,MA5BZ;AA6BE,YAAA,QAAQ,EAAE,kBAAC9F,KAAD,EAAW;AACnB,kBAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;AAChC8I,gBAAAA,aAAa;AACd,eAFD,MAEO;AACLA,gBAAAA,aAAa,CAAC9I,KAAD,CAAb;AACD;AACF,aAnCH;AAAA,sBAqCGY,MAAM,CAACvB,GAAP,CAAW,UAAC8K,SAAD,EAAYC,SAAZ,EAA0B;AACpC,kCACE,gBAAQ,MAAR;AAAe,gBAAA,KAAK,EAAED,SAAS,CAACrH,EAAhC;AAAA,0BACGqH,SAAS,CAACvL;AADb;AAAA;AAAA;AAAA;AAAA,uBADF;AAKD,aANA;AArCH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBA1BF,eAyEE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,iCACE;AACE,YAAA,IAAI,EAAC,SADP;AAEE,YAAA,KAAK,EAAE;AAAEkH,cAAAA,KAAK;AAAP,aAFT;AAGE,YAAA,OAAO,EAAEkD,YAHX;AAAA,mCAKE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBAzEF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,aAjBF,eAwGE;AACE,MAAA,OAAO,EAAE9H,cADX;AAEE,MAAA,UAAU,EAAE;AAAEmJ,QAAAA,QAAQ,EAAE;AAAZ,OAFd;AAGE,MAAA,MAAM,EAAE;AAAEC,QAAAA,CAAC,EAAE;AAAL,OAHV;AAIE,MAAA,UAAU,EAAEhJ,SAJd;AAKE,MAAA,OAAO,EAAE2D,OALX;AAME,MAAA,KAAK,EAAE,eAACM,MAAD,EAASgF,QAAT,EAAsB;AAC3B,eAAO;AACLC,UAAAA,WAAW,EAAE,qBAACC,KAAD,EAAW;AACtBpJ,YAAAA,SAAS,CAACkE,MAAM,CAACzC,EAAR,CAAT;AACD,WAHI;AAIL4H,UAAAA,YAAY,EAAE,sBAACD,KAAD,EAAW;AACvBpJ,YAAAA,SAAS,CAAC,CAAD,CAAT;AACD;AANI,SAAP;AAQD;AAfH;AAAA;AAAA;AAAA;AAAA,aAxGF,eAyHE;AACE,MAAA,KAAK,eACH;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,mBAAd;AAAA,gDACyB+B,WAAW,CAACJ,cADrC;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE;AAAA,oCACE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,OAAO,EAAE,mBAAM;AACbW,gBAAAA,eAAe,CAAC,KAAD,CAAf;AACAF,gBAAAA,iBAAiB,iCACZD,cADY;AAEfF,kBAAAA,cAAc,EAAE,IAFD;AAGfC,kBAAAA,KAAK,EAAE;AAHQ,mBAAjB;AAKD,eATH;AAUE,cAAA,KAAK,EAAE;AAAEiG,gBAAAA,WAAW;AAAb,eAVT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAeE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,QAAQ,EAAE5F,eAFZ;AAGE,cAAA,OAAO,EAAEyD,yBAHX;AAIE,cAAA,OAAO,EAAEvD,cAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAfF;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ;AAkCE,MAAA,OAAO,EAAEJ,YAlCX;AAmCE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,eAAe,CAAC,KAAD,CAAf;AACD,OArCH;AAsCE,MAAA,MAAM,EAAE,IAtCV;AAuCE,MAAA,KAAK,EAAE,GAvCT;AAAA,6BAyCE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAA,6CAAe,oBAAf;AAAA,kCACE;AAAA,+CAAa,MAAb;AAAA,4DACoC,GADpC,eAEE;AAAA,iDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAKE;AACE,YAAA,QAAQ,EAAEjC,UADZ;AAEE,YAAA,YAAY,EAAE0B,WAAW,CAACgC;AAF5B;AAAA;AAAA;AAAA;AAAA,mBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAmBE;AAAA,6CAAe,oBAAf;AAAA,kCACE;AAAA,+CAAa,MAAb;AAAA,uEAC+C,GAD/C,eAEE;AAAA,iDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAKE;AAAA,+CAAe,gEAAf;AAAA,sBACGhC,WAAW,CAAC1E,eAAZ,CAA4BI,KAA5B,CAAkCF;AADrC;AAAA;AAAA;AAAA;AAAA,mBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAnBF,eAoCE;AAAA,6CAAe,oBAAf;AAAA,kCACE;AAAA,+CAAa,MAAb;AAAA,iEAC2B;AAAA,iDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,qBAD3B;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE;AACE,YAAA,QAAQ,EAAE,kBAACoB,KAAD,EAAW;AACnB6D,cAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAJ,cAAAA,iBAAiB,iCACZD,cADY;AAEfV,gBAAAA,EAAE,EAAEM,WAAW,CAACN,EAFD;AAGfQ,gBAAAA,cAAc,EAAEtD;AAHD,iBAAjB;AAKD,aARH;AASE,YAAA,QAAQ,EAAE0C;AATZ;AAAA;AAAA;AAAA;AAAA,mBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBApCF,eAoEE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE,eAAO,QAAP;AACE,YAAA,IAAI,EAAE,CADR;AAEE,YAAA,WAAW,EAAC,gBAFd;AAGE,YAAA,KAAK,EAAEc,cAAc,CAACD,KAHxB;AAIE,YAAA,QAAQ,EAAE,kBAACmF,CAAD,EAAO;AACfjF,cAAAA,iBAAiB,iCACZD,cADY;AAEfD,gBAAAA,KAAK,EAAEmF,CAAC,CAACC,MAAF,CAAS3I;AAFD,iBAAjB;AAID;AATH;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBApEF;AAAA;AAAA;AAAA;AAAA;AAAA;AAzCF;AAAA;AAAA;AAAA;AAAA,aAzHF,eAsPE;AACE,MAAA,KAAK,eACH;AAAI,QAAA,SAAS,EAAC,eAAd;AAAA,mEAEGkE,WAAW,CAAClB,cAFf,gBAEuClC,YAAY,CAACkC,cAFpD;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ;AAOE,MAAA,OAAO,EAAEuB,YAPX;AAQE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,eAAe,CAAC,KAAD,CAAf;AACD,OAVH;AAWE,MAAA,MAAM,EAAC,IAXT;AAYE,MAAA,UAAU,EAAC,OAZb;AAaE,MAAA,IAAI,EAAEgE,oBAbR;AAcE,MAAA,aAAa,EAAE;AAAEmC,QAAAA,OAAO,EAAEhG;AAAX,OAdjB;AAeE,MAAA,KAAK,EAAE,GAfT;AAAA,6BAiBE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AACE,YAAA,WAAW,EAAC,gBADd;AAEE,YAAA,QAAQ,EAAE,kBAAC+D,CAAD,EAAO;AACfpE,cAAAA,iBAAiB,iCAAMD,cAAN;AAAsBd,gBAAAA,KAAK,EAAEmF,CAAC,CAACC,MAAF,CAAS3I;AAAtC,iBAAjB;AACD;AAJH;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAjBF;AAAA;AAAA;AAAA;AAAA,aAtPF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AAsRD,CApwBD;;IAAMS,e;UASOhD,S;;;MATPgD,e;;AAqwBN,IAAMmK,YAAY,GAAG,SAAfA,YAAe,QAAqC;AAAA;;AAAA,MAAlC3M,SAAkC,SAAlCA,SAAkC;AAAA,MAAvBC,QAAuB,SAAvBA,QAAuB;AAAA,MAAbF,MAAa,SAAbA,MAAa;AACxD;AACA,MAAMM,EAAE,GAAGb,SAAS,EAApB,CAFwD,CAGxD;;AAHwD,oBAI5BE,QAAQ,CAAC,EAAD,CAJoB;AAAA,MAIjDyD,MAJiD;AAAA,MAIzCC,SAJyC;;AAAA,oBAKtB1D,QAAQ,CAAC,EAAD,CALc;AAAA,MAKjD2D,SALiD;AAAA,MAKtCC,YALsC;;AAAA,oBAMpB5D,QAAQ,CAAC,EAAD,CANY;AAAA,MAMjD6D,UANiD;AAAA,MAMrCC,aANqC;;AAAA,oBAOpB9D,QAAQ,CAAC,EAAD,CAPY;AAAA,MAOjD+D,UAPiD;AAAA,MAOrCC,aAPqC;;AAAA,oBAQdhE,QAAQ,CAAC,KAAD,CARM;AAAA,MAQjDiE,aARiD;AAAA,MAQlCC,gBARkC;;AAAA,oBAStBlE,QAAQ,CAAC,EAAD,CATc;AAAA,MASjDmE,SATiD;AAAA,MAStCC,YATsC;;AAAA,oBAUlBpE,QAAQ,CAAC,CAAD,CAVU;AAAA,MAUjD6E,WAViD;AAAA,MAUpCC,cAVoC;;AAAA,oBAWpB9E,QAAQ,CAAC,KAAD,CAXY;AAAA,MAWjDkN,UAXiD;AAAA,MAWrCC,aAXqC;;AAAA,oBAYdnN,QAAQ,CAAC,KAAD,CAZM;AAAA,MAYjDoN,aAZiD;AAAA,MAYlCC,gBAZkC,mBAaxD;;;AAbwD,oBAcdrN,QAAQ,CAAC;AACjDmF,IAAAA,EAAE,EAAE;AAD6C,GAAD,CAdM;AAAA,MAcjDmI,aAdiD;AAAA,MAclCC,gBAdkC;;AAAA,oBAiBlBvN,QAAQ,CAAC,KAAD,CAjBU;AAAA,MAiBjDwN,WAjBiD;AAAA,MAiBpCC,cAjBoC;;AAAA,oBAkBdzN,QAAQ,CAAC,KAAD,CAlBM;AAAA,MAkBjD0N,aAlBiD;AAAA,MAkBlCC,gBAlBkC;;AAAA,oBAmBJ3N,QAAQ,CAAC;AAC3DiB,IAAAA,IAAI,EAAE,EADqD;AAE3D2M,IAAAA,IAAI,EAAE,EAFqD;AAG3DC,IAAAA,OAAO,EAAE;AAHkD,GAAD,CAnBJ;AAAA,MAmBjDC,kBAnBiD;AAAA,MAmB7BC,qBAnB6B,mBAwBxD;;;AAxBwD,oBAyBpB/N,QAAQ,CAAC;AAC3CgO,IAAAA,UAAU,EAAE7E,MAAM,CAAC9I,MAAD,CADyB;AAE3C4N,IAAAA,eAAe,EAAE,IAF0B;AAG3CC,IAAAA,UAAU,EAAE,IAH+B;AAI3CC,IAAAA,OAAO,EAAE,IAJkC;AAK3CC,IAAAA,aAAa,EAAE,IAL4B;AAM3CC,IAAAA,oBAAoB,EAAE;AANqB,GAAD,CAzBY;AAAA,MAyBjDC,UAzBiD;AAAA,MAyBrCC,aAzBqC;;AAAA,oBAiCAvO,QAAQ,CAAC,EAAD,CAjCR;AAAA,MAiCjDwO,oBAjCiD;AAAA,MAiC3BC,uBAjC2B;;AAAA,oBAkCVzO,QAAQ,CAAC,EAAD,CAlCE;AAAA,MAkCjD0O,eAlCiD;AAAA,MAkChCC,kBAlCgC;;AAAA,oBAmCN3O,QAAQ,CAAC,KAAD,CAnCF;AAAA,MAmCjD4O,iBAnCiD;AAAA,MAmC9BC,oBAnC8B;;AAAA,oBAoCI7O,QAAQ,CAAC,CAAC,CAAF,CApCZ;AAAA,MAoCjD8O,sBApCiD;AAAA,MAoCzBC,yBApCyB;;AAAA,oBAsCtD/O,QAAQ,CAAC,CAAC,CAAF,CAtC8C;AAAA,MAqCjDgP,4BArCiD;AAAA,MAqCnBC,+BArCmB;;AAAA,oBAuCdjP,QAAQ,CAAC,CAAC,EAAF,CAvCM;AAAA,MAuCjDkP,aAvCiD;AAAA,MAuClCC,gBAvCkC;;AAAA,oBAwCNnP,QAAQ,CAAC,EAAD,CAxCF;AAAA,MAwCjDoP,iBAxCiD;AAAA,MAwC9BC,oBAxC8B;;AAAA,oBAyCxBrP,QAAQ,CAAC,KAAD,CAzCgB;AAAA,MAyCjDsP,QAzCiD;AAAA,MAyCvCC,WAzCuC;;AAAA,oBA0ClBvP,QAAQ,CAAC,IAAD,CA1CU;AAAA,MA0CjDwP,WA1CiD;AAAA,MA0CpCC,cA1CoC;;AAAA,oBA2CpBzP,QAAQ,CAAC,KAAD,CA3CY;AAAA,MA2CjD0P,UA3CiD;AAAA,MA2CrCC,aA3CqC;;AAAA,oBA4Cd3P,QAAQ,CAAC,KAAD,CA5CM;AAAA,MA4CjDkH,aA5CiD;AAAA,MA4ClCC,gBA5CkC;;AAAA,oBA6CpBnH,QAAQ,CAAC,IAAD,CA7CY;AAAA,MA6CjD4P,UA7CiD;AAAA,MA6CrCC,aA7CqC;;AAAA,oBA8CpB7P,QAAQ,CAAC,CAAC,CAAF,CA9CY;AAAA,MA8CjD8P,UA9CiD;AAAA,MA8CrCC,aA9CqC,mBAgDxD;;;AACA,MAAMzI,OAAO,GAAG,CACd;AACEC,IAAAA,KAAK,EAAE,mBADT;AAEEC,IAAAA,SAAS,EAAE,mBAFb;AAGEC,IAAAA,GAAG,EAAE;AAHP,GADc,EAMd;AACEF,IAAAA,KAAK,EAAE,MADT;AAEEC,IAAAA,SAAS,EAAE,uBAFb;AAGEC,IAAAA,GAAG,EAAE;AAHP,GANc,EAWd;AACEF,IAAAA,KAAK,EAAE,MADT;AAEEC,IAAAA,SAAS,EAAE,MAFb;AAGEC,IAAAA,GAAG,EAAE;AAHP,GAXc,EAgBd;AACEF,IAAAA,KAAK,EAAE,sDADT;AAEEC,IAAAA,SAAS,EAAE,UAFb;AAGEE,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,MAAP,EAAeC,KAAf,EAAyB;AAC/B,aAAO;AACLC,QAAAA,QAAQ,eACN;AAAA,oBACGrE,MAAM,KAAKmE,MAAM,CAACzC,EAAlB,gBACC;AAAA,mCACE,QAAC,cAAD;AACE,cAAA,OAAO,EAAE,mBAAM;AACboI,gBAAAA,gBAAgB,CAAC;AAAEpI,kBAAAA,EAAE,EAAEyC,MAAM,CAACzC;AAAb,iBAAD,CAAhB;AACA4I,gBAAAA,qBAAqB,CAAC;AACpB9M,kBAAAA,IAAI,EAAE2G,MAAM,CAACoI,iBADO;AAEpBpC,kBAAAA,IAAI,EAAEhG,MAAM,CAACqI,IAFO;AAGpBpC,kBAAAA,OAAO,EAAEjG,MAAM,CAACsI;AAHI,iBAAD,CAArB;AAKAzC,gBAAAA,cAAc,CAAC,IAAD,CAAd;AACD,eATH;AAUE,cAAA,KAAK,EAAE;AACLvF,gBAAAA,QAAQ,UADH;AAELhH,gBAAAA,KAAK,OAFA;AAGLiP,gBAAAA,MAAM;AAHD;AAVT;AAAA;AAAA;AAAA;AAAA;AADF,2BADD,GAmBG;AApBN;AAFG,OAAP;AA0BD;AA9BH,GAhBc,CAAhB,CAjDwD,CAmGxD;AACA;;AACA,MAAMrF,cAAc,GAAG,SAAjBA,cAAiB,CAACC,CAAD,EAAO;AAC5B,QAAIA,CAAC,CAACC,MAAF,CAAS3I,KAAT,KAAmB,EAAvB,EAA2B;AACzBuB,MAAAA,YAAY,CAACG,UAAD,CAAZ;AACAG,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,KAHD,MAGO;AACLA,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,MAAAA,YAAY,CAAC2G,CAAC,CAACC,MAAF,CAAS3I,KAAV,CAAZ;AACD;AACF,GARD,CArGwD,CA8GxD;;;AACA,MAAMgJ,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAIC,QAAQ,GAAGzH,UAAf;;AACA,QAAII,aAAJ,EAAmB;AACjBqH,MAAAA,QAAQ,GAAGA,QAAQ,CAAC/I,MAAT,CAAgB,UAAC6N,GAAD,EAAS;AAClC,eAAOA,GAAG,CAACF,qBAAJ,CACJzG,WADI,GAEJ/G,QAFI,CAEKyB,SAAS,CAACsF,WAAV,EAFL,CAAP;AAGD,OAJU,CAAX;AAKD;;AACD7F,IAAAA,YAAY,CAAC0H,QAAD,CAAZ;AACD,GAVD,CA/GwD,CA2HxD;;;AACA,MAAM+E,4BAA4B,GAAG,SAA/BA,4BAA+B,GAAM;AACzC1C,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAhE,IAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,mCAEH;AACEC,MAAAA,MAAM,EAAE,QADV;AAEEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAFX;AAME8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAeiD,aAAf;AANR,KAFG,CAAL,CAWGhD,IAXH,CAWQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KAXR,EAYGF,IAZH,CAYQ,UAACG,IAAD,EAAU;AACdkD,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAF,MAAAA,cAAc,CAAC,KAAD,CAAd;;AACA,UAAIhD,IAAI,CAACC,OAAT,EAAkB;AAChB,sBAAa,SAAb,EAAwB;AACtBC,UAAAA,OAAO,EAAE,+BADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIA9F,QAAAA,cAAc,CAAC,UAACsD,IAAD;AAAA,iBAAUA,IAAI,GAAG,CAAjB;AAAA,SAAD,CAAd;AACD,OAND,MAMO,IAAI,CAACqC,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KA3BH;AA4BD,GA9BD;;AA+BA,MAAM0F,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAM;AACtCX,IAAAA,aAAa,CAAC,IAAD,CAAb;AACA,WAAOrB,UAAU,CAACiC,mBAAlB,CAFsC,CAGtC;;AACA5G,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,kCAAsE;AACzEC,MAAAA,MAAM,EAAE,MADiE;AAEzEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAFgE;AAMzE8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAeiE,UAAf;AANmE,KAAtE,CAAL,CAQGhE,IARH,CAQQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KARR,EASGF,IATH,CASQ,UAACG,IAAD,EAAU;AACdkF,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAJ,MAAAA,WAAW,CAAC,KAAD,CAAX;;AACA,UAAI9E,IAAI,CAACC,OAAT,EAAkB;AAChB6D,QAAAA,aAAa,CAAC;AACZP,UAAAA,UAAU,EAAE7E,MAAM,CAAC9I,MAAD,CADN;AAEZ4N,UAAAA,eAAe,EAAE,IAFL;AAGZC,UAAAA,UAAU,EAAE,IAHA;AAIZC,UAAAA,OAAO,EAAE,IAJG;AAKZC,UAAAA,aAAa,EAAE,IALH;AAMZC,UAAAA,oBAAoB,EAAE;AANV,SAAD,CAAb;AAQAM,QAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAkB,QAAAA,aAAa,CAAC,IAAD,CAAb;AACAd,QAAAA,yBAAyB,CAAC,CAAC,CAAF,CAAzB;AACAE,QAAAA,+BAA+B,CAAC,CAAC,CAAF,CAA/B;AACAc,QAAAA,aAAa,CAAC,CAAC,CAAF,CAAb;;AACA,sBAAa,SAAb,EAAwB;AACtBpF,UAAAA,OAAO,EAAE,wCADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIA9F,QAAAA,cAAc,CAAC,UAACsD,IAAD;AAAA,iBAAUA,IAAI,GAAG,CAAjB;AAAA,SAAD,CAAd;AACD,OAnBD,MAmBO,IAAI,CAACqC,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KArCH;AAsCD,GA1CD,CA3JwD,CAuMxD;;;AACA7K,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI8E,WAAW,KAAK,CAAC,CAArB,EAAwB;AACtBwI,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA1D,MAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,0CACmEzJ,MADnE,kBAEH;AACE0J,QAAAA,MAAM,OADR;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,OAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACd7G,QAAAA,YAAY,CACV6G,IAAI,CAACS,IAAL,CAAUsF,YAAV,CAAuBC,MAAvB,CAA8BhG,IAAI,CAACS,IAAL,CAAUwF,gBAAxC,CADU,CAAZ;AAGA5M,QAAAA,aAAa,CACX2G,IAAI,CAACS,IAAL,CAAUsF,YAAV,CAAuBC,MAAvB,CAA8BhG,IAAI,CAACS,IAAL,CAAUwF,gBAAxC,CADW,CAAb;AAGA1M,QAAAA,aAAa,CACXyG,IAAI,CAACS,IAAL,CAAUsF,YAAV,CAAuBC,MAAvB,CAA8BhG,IAAI,CAACS,IAAL,CAAUwF,gBAAxC,CADW,CAAb;AAGArD,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,OArBH;AAsBD;AACF,GA1BQ,EA0BN,CAACxI,WAAD,CA1BM,CAAT;AA2BA9E,EAAAA,SAAS,CAAC,YAAM;AACd4J,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,wBAA4D;AAC/DC,MAAAA,MAAM,OADyD;AAE/DC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFsD,KAA5D,CAAL,CAMGgK,IANH,CAMQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KANR,EAOGF,IAPH,CAOQ,UAACG,IAAD,EAAU;AACdgE,MAAAA,uBAAuB,CAAChE,IAAI,CAACS,IAAN,CAAvB;AACD,KATH;AAUD,GAXQ,EAWN,EAXM,CAAT;AAYAnL,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI+P,UAAU,KAAK,CAAC,CAApB,EAAuB;AACrBnG,MAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,yDACkFgG,UADlF,GAEH;AACE/F,QAAAA,MAAM,OADR;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,OAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACdoF,QAAAA,aAAa,CAACpF,IAAI,CAACS,IAAL,CAAUpD,QAAX,CAAb;AACD,OAZH;AAaD,KAdD,MAcO,IAAIoH,aAAa,KAAK,CAAC,EAAvB,EAA2B;AAChCvF,MAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,yDACkFwE,UAAU,CAACH,OAD7F,GAEH;AACEpE,QAAAA,MAAM,OADR;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,OAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACd6D,QAAAA,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,IAA6BkB,oBAAoB,CAAC,CAAC5E,IAAI,CAACS,IAAN,CAAD,CAAjD;AACAoD,QAAAA,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,IAA6BkB,oBAAoB,CAAC5E,IAAI,CAACS,IAAN,CAAjD;AACAoD,QAAAA,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,IAA6BkB,oBAAoB,CAAC5E,IAAI,CAACS,IAAN,CAAjD;AACAoD,QAAAA,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,IAA6BkB,oBAAoB,CAAC5E,IAAI,CAACS,IAAL,CAAUA,IAAX,CAAjD;AACAyF,QAAAA,OAAO,CAACC,GAAR;AACD,OAhBH;AAiBD;AACF,GAlCQ,EAkCN,CAAC1B,aAAD,EAAgBY,UAAhB,CAlCM,CAAT;AAoCA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,gCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEGvP,QAAQ,CAACQ,eAAT,CAAyBI,KAAzB,CAA+BH,UAA/B,KAA8C,IAA9C,gBACC;AACE,UAAA,SAAS,EAAC,OADZ;AAEE,UAAA,KAAK,EAAC,iEAFR;AAAA,iCAIE,QAAC,yBAAD;AACE,YAAA,KAAK,EAAE;AAAEE,cAAAA,KAAK;AAAP;AADT;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,iBADD,GASG,IAXN;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAcE;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,OAAO,EAAE,mBAAM;AACbqO,UAAAA,WAAW,CACT,IADS,CAAX;AAEG;AACJ,SAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAdF;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eA2BE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,gBACGnC,aAAa,GAAG,IAAH,gBACZ;AAAK,QAAA,SAAS,EAAC,gCAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,iCACE;AACE,YAAA,KAAK,EAAE;AAAEjF,cAAAA,KAAK,QAAP;AAAiB0D,cAAAA,WAAW;AAA5B,aADT;AAEE,YAAA,WAAW,EAAC,gBAFd;AAGE,YAAA,QAAQ,EAAE,kBAACd,CAAD;AAAA,qBAAOD,cAAc,CAACC,CAAD,CAArB;AAAA,aAHZ;AAIE,YAAA,UAAU;AAJZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBADF,eASE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,iCACE;AACE,YAAA,IAAI,EAAC,SADP;AAEE,YAAA,KAAK,EAAE;AAAE5C,cAAAA,KAAK;AAAP,aAFT;AAGE,YAAA,OAAO,EAAEkD,YAHX;AAAA,mCAKE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBATF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,aA3BF,eAkDE;AACE,MAAA,OAAO,EAAE+B,aADX;AAEE,MAAA,UAAU,EAAE;AAAEV,QAAAA,QAAQ,EAAE;AAAZ,OAFd;AAGE,MAAA,MAAM,EAAE;AAAEC,QAAAA,CAAC,EAAE;AAAL,OAHV;AAIE,MAAA,UAAU,EAAEhJ,SAJd;AAKE,MAAA,OAAO,EAAE2D,OALX;AAME,MAAA,KAAK,EAAE,eAACM,MAAD,EAASgF,QAAT,EAAsB;AAC3B,eAAO;AACLC,UAAAA,WAAW,EAAE,qBAACC,KAAD,EAAW;AACtBpJ,YAAAA,SAAS,CAACkE,MAAM,CAACzC,EAAR,CAAT;AACD,WAHI;AAIL4H,UAAAA,YAAY,EAAE,sBAACD,KAAD,EAAW;AACvBpJ,YAAAA,SAAS,CAAC,CAAD,CAAT;AACD;AANI,SAAP;AAQD;AAfH;AAAA;AAAA;AAAA;AAAA,aAlDF,eAmEE;AACE,MAAA,KAAK,eACH;AAAA,yFAEGnD,QAAQ,CAAC8E,cAFZ;AAAA,sBAFJ;AAOE,MAAA,OAAO,EAAEmI,WAPX;AAQE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,cAAc,CAAC,KAAD,CAAd;AACD,OAVH;AAWE,MAAA,MAAM,EAAC,IAXT;AAYE,MAAA,UAAU,EAAC,OAZb;AAaE,MAAA,IAAI,EAAE4C,4BAbR;AAcE,MAAA,aAAa,EAAE;AAAErD,QAAAA,OAAO,EAAEU;AAAX,OAdjB;AAeE,MAAA,KAAK,EAAE,GAfT;AAAA,6BAiBE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,6BAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAI,cAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA,wBAAqBI,kBAAkB,CAAC7M;AAAxC;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAKE;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAI,cAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA,wBAAqB6M,kBAAkB,CAACF;AAAxC;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBALF,eASE;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAI,cAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA,wBAAqBE,kBAAkB,CAACD;AAAxC;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBATF;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAeE;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAO,YAAA,WAAW,EAAC,gBAAnB;AAAoC,YAAA,QAAQ,EAAE,kBAAC9C,CAAD,EAAO,CAAE;AAAvD;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AAjBF;AAAA;AAAA;AAAA;AAAA,aAnEF,eAyGE;AACE,MAAA,KAAK,eACH;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,mBAAd;AAAA,oDAC6BxK,QAAQ,CAACU,IADtC;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE;AAAA,oCACE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,OAAO,EAAE,mBAAM;AACbsO,gBAAAA,WAAW,CACT,KADS,CAAX;AAEG;;AAA+F;AACnG,eANH;AAOE,cAAA,KAAK,EAAE;AAAE1D,gBAAAA,WAAW;AAAb,eAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAYE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,QAAQ,EAAE2D,WAFZ;AAGE,cAAA,OAAO,EAAEc,yBAHX;AAIE,cAAA,OAAO,EAAEZ,UAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAZF;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ;AA+BE,MAAA,OAAO,EAAEJ,QA/BX;AAgCE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,WAAW,CAAC,KAAD,CAAX;AACD,OAlCH;AAmCE,MAAA,MAAM,EAAE,IAnCV;AAoCE,MAAA,KAAK,EAAE,GApCT;AAAA,6BAsCE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAA,6CAAe,oBAAf;AAAA,kCACE;AAAA,+CAAa,MAAb;AAAA,0DACoB;AAAA,iDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,qBADpB;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE;AAEE,YAAA,OAAO,EAAE,mBAAM;AACbV,cAAAA,oBAAoB,CAAC,UAACzG,IAAD;AAAA,uBAAU,CAACA,IAAX;AAAA,eAAD,CAApB;AACD,aAJH;AAAA,+CACY,oGADZ;AAAA,oCAME;AAAA,iDAAa,MAAb;AAAA,wBAAqBsG;AAArB;AAAA;AAAA;AAAA;AAAA,qBANF,EAOGE,iBAAiB,gBAChB,QAAC,UAAD;AAAY,cAAA,KAAK,EAAE;AAAE1N,gBAAAA,KAAK;AAAP;AAAnB;AAAA;AAAA;AAAA;AAAA,qBADgB,gBAGhB,QAAC,YAAD;AAAc,cAAA,KAAK,EAAE;AAAEA,gBAAAA,KAAK;AAAP;AAArB;AAAA;AAAA;AAAA;AAAA,qBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF,EAiBG0N,iBAAiB,gBAChB;AAAA,+CAAe,eAAf;AAAA,oCACE;AAAA,iDAAe,MAAf;AAAA,sCACE;AAAA,mDAAe,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAIE;AAAA,mDAAe,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EASGJ,oBAAoB,CAAC9M,GAArB,CAAyB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACtC,kCACE;AAAA,mDAAe,MAAf;AAAA,wCACE;AAOE,kBAAA,OAAO,EAAE,iBAACmJ,CAAD,EAAO;AACd8D,oBAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAF,oBAAAA,kBAAkB,CAAChN,GAAG,CAACkP,iBAAL,CAAlB;AACAtC,oBAAAA,aAAa,iCACRD,UADQ;AAEXL,sBAAAA,eAAe,EAAEtM,GAAG,CAACwD,EAFV;AAGX+I,sBAAAA,UAAU,EAAE;AAHD,uBAAb;AAKAvM,oBAAAA,GAAG,CAACwD,EAAJ,KAAW,IAAX,IAAmBmJ,UAAU,CAACH,OAAX,KAAuB,IAA1C,GACIsB,cAAc,CAAC,IAAD,CADlB,GAEIA,cAAc,CAAC,KAAD,CAFlB;AAGAV,oBAAAA,yBAAyB,CAACnN,GAAD,CAAzB;AACAqN,oBAAAA,+BAA+B,CAAC,KAAD,CAA/B;AACD,mBApBH;AAAA,2HAEIH,sBAAsB,KAAKlN,GAA3B,IACAoN,4BAA4B,KAAK,KADjC,GAEI,eAFJ,GAGI,UALR;AAAA,4BAsBGrN,GAAG,CAACkP;AAtBP;AAAA;AAAA;AAAA;AAAA,yBADF,eAyBE;AAOE,kBAAA,OAAO,EAAE,iBAAC9F,CAAD,EAAO;AACd8D,oBAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAF,oBAAAA,kBAAkB,CAAChN,GAAG,CAACmP,yBAAL,CAAlB;AACAvC,oBAAAA,aAAa,iCACRD,UADQ;AAEXL,sBAAAA,eAAe,EAAEtM,GAAG,CAACwD,EAFV;AAGX+I,sBAAAA,UAAU,EAAE;AAHD,uBAAb;AAKAvM,oBAAAA,GAAG,CAACwD,EAAJ,KAAW,IAAX,IAAmBmJ,UAAU,CAACH,OAAX,KAAuB,IAA1C,GACIsB,cAAc,CAAC,IAAD,CADlB,GAEIA,cAAc,CAAC,KAAD,CAFlB;AAGAV,oBAAAA,yBAAyB,CAACnN,GAAD,CAAzB;AACAqN,oBAAAA,+BAA+B,CAAC,IAAD,CAA/B;AACD,mBApBH;AAAA,2HAEIH,sBAAsB,KAAKlN,GAA3B,IACAoN,4BAA4B,KAAK,IADjC,GAEI,eAFJ,GAGI,UALR;AAAA,4BAsBGrN,GAAG,CAACmP;AAtBP;AAAA;AAAA;AAAA;AAAA,yBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF;AAoDD,aArDA,CATH;AAAA;AAAA;AAAA;AAAA;AAAA,mBADgB,GAiEd,IAlFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eA6FE;AAAA,8CAAe,oBAAf;AAAA,kCACE;AAAA,gDAAa,MAAb;AAAA,6CACO;AAAA,kDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,qBADP;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE;AACE,YAAA,KAAK,EAAExC,UAAU,CAACH,OADpB;AAEE,YAAA,QAAQ,EAAE,kBAAC9L,KAAD,EAAW;AACnBkM,cAAAA,aAAa,iCAAMD,UAAN;AAAkBH,gBAAAA,OAAO,EAAE9L;AAA3B,iBAAb;AACAiM,cAAAA,UAAU,CAACL,eAAX,KAA+B,IAA/B,IAAuC5L,KAAK,KAAK,IAAjD,GACIoN,cAAc,CAAC,IAAD,CADlB,GAEIA,cAAc,CAAC,KAAD,CAFlB;AAGAN,cAAAA,gBAAgB,CAAC9M,KAAD,CAAhB;AACAiM,cAAAA,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,IACK4B,aAAa,CAAC,CAAC,CAAF,CAAb,EAAmBF,aAAa,CAAC,IAAD,CADrC,IAEI,IAFJ;AAGD,aAXH;AAAA,oCAaE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAC,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAbF,eAcE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAC,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAdF,eAeE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAC,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAfF,eAgBE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAC,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBA7FF,EA4HGvB,UAAU,CAACH,OAAX,KAAuB,IAAvB,gBACC;AAAA,qBACGG,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,iBACC;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AACE,cAAA,IAAI,EAAC,UADP;AAEE,cAAA,UAAU,MAFZ;AAGE,cAAA,gBAAgB,EAAC,UAHnB;AAIE,cAAA,eAAe,EACbjH,aAAa,gBAAG;AAAM,gBAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA,uBAAH,GAA2B,IAL5C;AAOE,cAAA,QAAQ,EAAE,kBAAC7E,KAAD,EAAW;AACnB8E,gBAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAwC,gBAAAA,KAAK,WAEDC,OAAO,CAACC,GAAR,CAAYC,uBAFX,yDAG4CoF,aAH5C,mBAID7M,KAAK,KAAK,EAAV,GAAeA,KAAf,GAAuB,EAJtB,GAMH;AACE0H,kBAAAA,MAAM,OADR;AAEEC,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,iBANG,CAAL,CAaGgK,IAbH,CAaQ,UAACC,GAAD;AAAA,yBAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,iBAbR,EAcGF,IAdH,CAcQ,UAACG,IAAD,EAAU;AACd4E,kBAAAA,oBAAoB,CAAC5E,IAAI,CAACS,IAAN,CAApB;AACA/D,kBAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,iBAjBH;AAkBD,eA3BH;AA4BE,cAAA,YAAY,EAAE,sBAACkF,KAAD,EAAQC,GAAR;AAAA,uBACZA,GAAG,CAACxE,QAAJ,CAAa2B,WAAb,GAA2B8C,OAA3B,CAAmCF,KAAK,CAAC5C,WAAN,EAAnC,KACA,CAFY;AAAA,eA5BhB;AAgCE,cAAA,QAAQ,EAAE,kBAACpH,KAAD,EAAW;AACnBkM,gBAAAA,aAAa,iCACRD,UADQ;AAEXF,kBAAAA,aAAa,EAAE/L,KAFJ;AAGXgM,kBAAAA,oBAAoB,EAAEhM;AAHX,mBAAb;AAKD,eAtCH;AAAA,wBAwCG+M,iBAAiB,CAAC1N,GAAlB,CAAsB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnC,oCACE,gBAAQ,MAAR;AAAe,kBAAA,KAAK,EAAED,GAAG,CAACwD,EAA1B;AAAA,4BAA+BxD,GAAG,CAACV;AAAnC;AAAA;AAAA;AAAA;AAAA,yBADF;AAGD,eAJA;AAxCH;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,EAoDGqN,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,iBACC;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AACE,cAAA,IAAI,EAAC,UADP;AAEE,cAAA,UAAU,MAFZ;AAGE,cAAA,gBAAgB,EAAC,UAHnB;AAIE,cAAA,eAAe,EACbjH,aAAa,gBAAG;AAAM,gBAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA,uBAAH,GAA2B,IAL5C;AAOE,cAAA,QAAQ,EAAE,kBAAC7E,KAAD,EAAW;AACnB8E,gBAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAwC,gBAAAA,KAAK,WAEDC,OAAO,CAACC,GAAR,CAAYC,uBAFX,yDAG4CoF,aAH5C,mBAID7M,KAAK,KAAK,EAAV,GAAeA,KAAf,GAAuB,EAJtB,GAMH;AACE0H,kBAAAA,MAAM,OADR;AAEEC,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,iBANG,CAAL,CAaGgK,IAbH,CAaQ,UAACC,GAAD;AAAA,yBAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,iBAbR,EAcGF,IAdH,CAcQ,UAACG,IAAD,EAAU;AACd4E,kBAAAA,oBAAoB,CAAC5E,IAAI,CAACS,IAAN,CAApB;AACA/D,kBAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,iBAjBH;AAkBD,eA3BH;AA4BE,cAAA,YAAY,EAAE,sBAACkF,KAAD,EAAQC,GAAR;AAAA,uBACZA,GAAG,CAACxE,QAAJ,CAAa2B,WAAb,GAA2B8C,OAA3B,CAAmCF,KAAK,CAAC5C,WAAN,EAAnC,KACA,CAFY;AAAA,eA5BhB;AAgCE,cAAA,QAAQ,EAAE,kBAACpH,KAAD,EAAW;AACnBkM,gBAAAA,aAAa,iCACRD,UADQ;AAEXF,kBAAAA,aAAa,EAAE/L,KAFJ;AAGXgM,kBAAAA,oBAAoB,EAAEhM;AAHX,mBAAb;AAKD,eAtCH;AAAA,wBAwCG+M,iBAAiB,CAAC1N,GAAlB,CAAsB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnC,oCACE,gBAAQ,MAAR;AAAe,kBAAA,KAAK,EAAED,GAAG,CAACwD,EAA1B;AAAA,4BAA+BxD,GAAG,CAACV;AAAnC;AAAA;AAAA;AAAA;AAAA,yBADF;AAGD,eAJA;AAxCH;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBArDJ,EAuGGqN,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,iBACC;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AACE,cAAA,YAAY,EACVG,UAAU,CAACD,oBAAX,KAAoC,IAApC,GACI,IADJ,GAEIC,UAAU,CAACD,oBAAX,CAAgC,CAAhC,CAJR;AAME,cAAA,uBAAuB,EAAE,CAAC,CAAD,CAN3B;AAOE,cAAA,QAAQ,EAAEe,iBAPZ;AAQE,cAAA,QAAQ,EAAE,kBAAC/M,KAAD,EAAQ2J,KAAR,EAAeC,KAAf,EAAyB;AACjCsC,gBAAAA,aAAa,iCACRD,UADQ;AAEXF,kBAAAA,aAAa,EAAE,CAAC/L,KAAD,CAFJ;AAGXgM,kBAAAA,oBAAoB,EAAE,CAAChM,KAAD;AAHX,mBAAb;AAKA0N,gBAAAA,aAAa,CAAC1N,KAAD,CAAb;AACD;AAfH;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBAxGJ,EA6HGiM,UAAU,CAACH,OAAX,KAAuB,CAAC,CAAxB,iBACC;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AACE,cAAA,WAAW,EAAC,sBADd;AAEE,cAAA,IAAI,EAAC,UAFP;AAGE,cAAA,UAAU,MAHZ;AAIE,cAAA,gBAAgB,EAAC,UAJnB;AAKE,cAAA,eAAe,EACbjH,aAAa,gBAAG;AAAM,gBAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA,uBAAH,GAA2B,IAN5C;AAQE,cAAA,QAAQ,EAAE,kBAAC7E,KAAD,EAAW;AACnB8E,gBAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAwC,gBAAAA,KAAK,WAEDC,OAAO,CAACC,GAAR,CAAYC,uBAFX,yDAG4CoF,aAH5C,uBAID7M,KAAK,KAAK,EAAV,GAAeA,KAAf,GAAuB,EAJtB,GAMH;AACE0H,kBAAAA,MAAM,OADR;AAEEC,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,iBANG,CAAL,CAaGgK,IAbH,CAaQ,UAACC,GAAD;AAAA,yBAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,iBAbR,EAcGF,IAdH,CAcQ,UAACG,IAAD,EAAU;AACd4E,kBAAAA,oBAAoB,CAAC5E,IAAI,CAACS,IAAN,CAApB;AACA/D,kBAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,iBAjBH;AAkBD,eA5BH;AA6BE,cAAA,YAAY,EAAE,sBAACkF,KAAD,EAAQC,GAAR;AAAA,uBACZA,GAAG,CAACxE,QAAJ,CAAa2B,WAAb,GAA2B8C,OAA3B,CAAmCF,KAAK,CAAC5C,WAAN,EAAnC,KACA,CAFY;AAAA,eA7BhB;AAiCE,cAAA,QAAQ,EAAE,kBAACpH,KAAD,EAAW;AACnBkM,gBAAAA,aAAa,iCACRD,UADQ;AAEXF,kBAAAA,aAAa,EAAE/L,KAFJ;AAGXgM,kBAAAA,oBAAoB,EAAEhM;AAHX,mBAAb;AAKD,eAvCH;AAAA,wBAyCG+M,iBAAiB,CAAC1N,GAAlB,CAAsB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnC,oCACE,gBAAQ,MAAR;AAAe,kBAAA,KAAK,EAAED,GAAG,CAACwD,EAA1B;AAAA,4BACGxD,GAAG,CAACP;AADP;AAAA;AAAA;AAAA;AAAA,yBADF;AAKD,eANA;AAzCH;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBA9HJ;AAAA,wBADD,GAqLG,IAjTN,EAkTGwO,UAAU,KAAK,IAAf,iBACC;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AACE,YAAA,QAAQ,MADV;AAEE,YAAA,UAAU,MAFZ;AAGE,YAAA,QAAQ,EAAEA,UAHZ;AAIE,YAAA,QAAQ,EAAE,kBAACvN,KAAD,EAAQ2J,KAAR,EAAeC,KAAf,EAAyB;AACjC,kBAAI5J,KAAK,CAACwG,MAAN,KAAiB,CAArB,EAAwB;AACtB0F,gBAAAA,aAAa,iCACRD,UADQ;AAEXF,kBAAAA,aAAa,EAAEE,UAAU,CAACD;AAFf,mBAAb;AAID,eALD,MAKO;AACLE,gBAAAA,aAAa,iCAAMD,UAAN;AAAkBF,kBAAAA,aAAa,EAAE/L;AAAjC,mBAAb;AACD;AACF;AAbH;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAnTJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAtCF;AAAA;AAAA;AAAA;AAAA,aAzGF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AA0dD,CA7uBD;;IAAM4K,Y;UAEOnN,S;;;MAFPmN,Y;;AA8uBN,IAAM8D,WAAW,GAAG,SAAdA,WAAc,QAAiD;AAAA;;AAAA,MAA9CzQ,SAA8C,SAA9CA,SAA8C;AAAA,MAAnCD,MAAmC,SAAnCA,MAAmC;AAAA,MAA3BE,QAA2B,SAA3BA,QAA2B;AAAA,MAAjBG,UAAiB,SAAjBA,UAAiB;AACnE,MAAMC,EAAE,GAAGb,SAAS,EAApB;AACA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA,6BACE;AAAI,QAAA,SAAS,EAAC,2BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aADF,eAIE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,gBACGY,UAAU,gBACT;AAAA,+BACE;AAAA;AAAA;AAAA;AAAA;AADF,uBADS,GAIPH,QAAQ,CAACyQ,YAAT,CAAsBnI,MAAtB,KAAiC,CAAjC,gBACF;AAAA,+BACE;AAAO,UAAA,KAAK,EAAE,OAAMoI;AAApB;AAAA;AAAA;AAAA;AAAA;AADF,uBADE,gBAKF;AAAA,kBACG1Q,QAAQ,CAACyQ,YAAT,CAAsBtP,GAAtB,CAA0B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACvC,8BACE;AACE,YAAA,SAAS,EAAC,wFADZ;AAEE,YAAA,OAAO,EAAE,mBAAM;AACbjB,cAAAA,EAAE,CAACG,IAAH,2BAA2Ba,GAAG,CAACwD,EAA/B;AACD,aAJH;AAAA,oCAME;AAAK,cAAA,SAAS,EAAC,eAAf;AAAA,sCACE;AAAG,gBAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAG,gBAAA,SAAS,EAAC,MAAb;AAAA,0BAAqBxD,GAAG,CAACuP;AAAzB;AAAA;AAAA;AAAA;AAAA,uBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,qBANF,EAUGvP,GAAG,CAACwP,MAAJ,KAAe,CAAf,iBACC;AAAK,cAAA,SAAS,EAAC,6FAAf;AAAA,qCACWxP,GAAG,CAACyP,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,qBAXJ,EAeGzP,GAAG,CAACwP,MAAJ,KAAe,CAAf,iBACC;AAAK,cAAA,SAAS,EAAC,gGAAf;AAAA,qCACWxP,GAAG,CAACyP,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,qBAhBJ,EAoBGzP,GAAG,CAACwP,MAAJ,KAAe,CAAf,iBACC;AAAK,cAAA,SAAS,EAAC,gGAAf;AAAA,qCACWxP,GAAG,CAACyP,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,qBArBJ,EAyBGzP,GAAG,CAACwP,MAAJ,KAAe,CAAf,iBACC;AAAK,cAAA,SAAS,EAAC,gGAAf;AAAA,qCACWxP,GAAG,CAACyP,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,qBA1BJ,EA8BGzP,GAAG,CAACwP,MAAJ,KAAe,CAAf,iBACC;AAAK,cAAA,SAAS,EAAC,gGAAf;AAAA,qCACWxP,GAAG,CAACyP,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,qBA/BJ;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF;AAsCD,SAvCA;AADH;AAVJ;AAAA;AAAA;AAAA;AAAA,aAJF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AA6DD,CA/DD;;IAAML,W;UACOjR,S;;;MADPiR,W;;AAgEN,IAAMM,QAAQ,GAAG,SAAXA,QAAW,QAOX;AAAA;;AAAA,MANJhR,MAMI,SANJA,MAMI;AAAA,MALJC,SAKI,SALJA,SAKI;AAAA,MAJJC,QAII,SAJJA,QAII;AAAA,MAHJwC,YAGI,SAHJA,YAGI;AAAA,MAFJrC,UAEI,SAFJA,UAEI;AAAA,MADJ4Q,eACI,SADJA,eACI;;AAAA,oBAC0BtR,QAAQ,CAAC,EAAD,CADlC;AAAA,MACGuR,OADH;AAAA,MACYC,UADZ;;AAAA,oBAE4BxR,QAAQ,CAAC,EAAD,CAFpC;AAAA,MAEGyR,QAFH;AAAA,MAEaC,WAFb;;AAAA,oBAG4B1R,QAAQ,CAAC,EAAD,CAHpC;AAAA,MAGG2R,QAHH;AAAA,MAGaC,WAHb;;AAAA,oBAIwC5R,QAAQ,CAAC,IAAD,CAJhD;AAAA,MAIG6R,cAJH;AAAA,MAImBC,iBAJnB;;AAAA,oBAKkC9R,QAAQ,CAAC,EAAD,CAL1C;AAAA,MAKG+R,WALH;AAAA,MAKgBC,cALhB;;AAOJjS,EAAAA,SAAS,CAAC,YAAM;AACd+R,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AAEAnI,IAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,0CACmEzJ,MADnE,GAEH;AACE0J,MAAAA,MAAM,OADR;AAEEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,KAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACd,UAAIwH,UAAU,GAAGxH,IAAI,CAACS,IAAL,CAAUgH,QAAV,CAAmBxQ,GAAnB,CAAuB,UAACyQ,OAAD,EAAUC,OAAV,EAAsB;AAC5D,YAAMC,OAAO,GAAGzS,MAAM,CAACuS,OAAO,CAACG,IAAT,CAAN,CAAqB1P,MAArB,CAA4B,IAA5B,EAAkCC,MAAlC,CAAyC,KAAzC,CAAhB;AACA,YAAI0P,OAAO,GAAG,EAAd;AACA,YAAMC,cAAc,GAAGL,OAAO,CAACM,UAAR,GACnBN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,GACEP,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACE,MADF,GAEE6M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACA,MADA,GAEA6M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACA,KADA,GAEA,IAPJ,GAQE,IATiB,GAUnB,IAVJ;AAWA,YAAMqN,eAAe,GAAGR,OAAO,CAACM,UAAR,GACpBN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,GACET,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACE,MADF,GAEE6M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACA,MADA,GAEA6M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACA,KADA,GAEA,IAPJ,GAQE,IATkB,GAUpB,IAVJ;AAWA,YAAMuN,YAAY,GAAGV,OAAO,CAACM,UAAR,GACjBN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,GACEP,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACE,SADF,GAEE4M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACA,UADA,GAEA4M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACA,aADA,GAEA,IAPJ,GAQE,IATe,GAUjB,IAVJ;AAWA,YAAMuN,aAAa,GAAGX,OAAO,CAACM,UAAR,GAClBN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,GACET,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACE,SADF,GAEE4M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACA,UADA,GAEA4M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACA,aADA,GAEA,IAPJ,GAQE,IATgB,GAUlB,IAVJ;AAWA,YAAMwN,KAAK,GAAGZ,OAAO,CAACa,WAAR,CAAoBC,KAApB,CAA0B,GAA1B,CAAd;;AACA,YAAIF,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAAA;;AAC1B,cAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,cAAjB,EAAiC;AAC/BA,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,uCACqBJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BM,YADnD,OAFb,GAII,IAJJ;AAKAH,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,wCACsBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBQ,YAD7C,OAFb,GAII,IAJJ;AAKD,WAXD,MAWO,IAAIH,KAAK,CAAC,CAAD,CAAL,KAAa,aAAjB,EAAgC;AACrCR,YAAAA,OAAO,GAAGA,OAAO,+BAAwBJ,OAAO,CAACM,UAAhC,CAAjB;AACD,WAFM,MAEA,6BAAIN,OAAO,CAACM,UAAR,CAAmBG,UAAvB,kDAAI,sBAA+BO,UAAnC,EAA+C;AACpDZ,YAAAA,OAAO,GACLA,OAAO,gDAC8BhS,QAAQ,CAACmL,eAAT,CAClCnJ,MADkC,CAC3B,UAAC6Q,MAAD;AAAA;;AAAA,+CACNjB,OAAO,CAACM,UAAR,CAAmBG,UADb,2DACN,uBAA+BO,UAA/B,CAA0CzQ,QAA1C,CACE0Q,MAAM,CAACjO,EADT,CADM;AAAA,aAD2B,EAMlCzD,GANkC,CAM9B,UAAC2R,MAAD;AAAA,qBAAYA,MAAM,CAAChO,cAAnB;AAAA,aAN8B,EAOlC1C,IAPkC,CAO7B,IAP6B,CAD9B,OADT;AAUD,WAXM,MAWA;AAAA;;AACL4P,YAAAA,OAAO,GACLA,OAAO,qEACyBJ,OAAO,CAACM,UAAR,CAAmBG,UAD5C,2DACyB,uBAA+BvN,cADxD,OADT;AAGD;AACF;;AACD0N,QAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,OAAb,GACKR,OAAO,GAAGA,OAAO,qBADtB,GAEI,IAFJ;;AAGA,YAAIQ,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAAA;;AAC1B,cAAIZ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAAlC,EAAoD;AAClDiN,YAAAA,OAAO,GACLA,OAAO,4CAC2BC,cAD3B,iBACgDG,eADhD,CADT;AAGD,WAJD,MAIO,IAAIR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAAlC,EAAgD;AACrDgN,YAAAA,OAAO,GACLA,OAAO,8CAC6BM,YAD7B,iBACgDC,aADhD,CADT;AAGD,WAJM,MAIA,IAAIX,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvN,cAAlC,EAAkD;AACvDkN,YAAAA,OAAO,GACLA,OAAO,yCACuBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBrN,cAD9C,qBACqE8M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvN,cADnG,OADT;AAGD,WAJM,MAIA,IAAI8M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvR,aAAlC,EAAiD;AACtDkR,YAAAA,OAAO,GACLA,OAAO,kDACgCJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBrR,aADvD,qBAC6E8Q,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvR,aAD3G,OADT;AAGD,WAJM,MAIA,IAAI8Q,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B9Q,QAAlC,EAA4C;AACjDyQ,YAAAA,OAAO,GACLA,OAAO,6CAELxP,YAAY,CAACuQ,SAAb,CAAuB/Q,MAAvB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuB5Q,QAA3C;AAAA,aADF,EAEE,CAFF,EAEKb,IAJA,qBAML8B,YAAY,CAACuQ,SAAb,CAAuB/Q,MAAvB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B9Q,QAAlD;AAAA,aADF,EAEE,CAFF,EAEKb,IARA,OADT;AAWD,WAZM,MAYA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrR,SAAlC,EAA6C;AAClDgR,YAAAA,OAAO,GACLA,OAAO,2CAELxP,YAAY,CAACwQ,OAAb,CAAqBhR,MAArB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnR,SAA3C;AAAA,aADF,EAEE,CAFF,EAEKN,IAJA,qBAML8B,YAAY,CAACwQ,OAAb,CAAqBhR,MAArB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrR,SAAlD;AAAA,aADF,EAEE,CAFF,EAEKN,IARA,OADT;AAWD,WAZM,MAYA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BY,eAAlC,EAAmD;AACxDjB,YAAAA,OAAO,GACLA,OAAO,iDAELxP,YAAY,CAAC0Q,aAAb,CAA2BlR,MAA3B,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBc,eAA3C;AAAA,aADF,EAEE,CAFF,EAEKvS,IAJA,qBAML8B,YAAY,CAAC0Q,aAAb,CAA2BlR,MAA3B,CACE,UAACZ,GAAD;AAAA,qBACEA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BY,eAD3C;AAAA,aADF,EAGE,CAHF,EAGKvS,IATA,OADT;AAYD,WAbM,MAaA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B5Q,SAAlC,EAA6C;AAClDuQ,YAAAA,OAAO,GAAGA,OAAO,8BAAjB;AACD,WAFM,MAEA,IACL,2BAAAJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,kFAA0CtK,MAA1C,8BACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,0DACA,sBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM6K,YAAY,6BAChBvB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UADd,2DAChB,uBAA0C5Q,MAA1C,CACE,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,2BAAAjB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAAvB,kFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADF,CADF;AAOAoN,YAAAA,OAAO,GACLA,OAAO,+BACamB,YADb,aACaA,YADb,uBACaA,YAAY,CAC5BhS,GADgB,CACZ,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADY,EAEjBuB,IAFiB,CAEZ,IAFY,CADb,yBADT;AAKD,WAhBM,MAgBA,IACL,2BAAAwP,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,kFAA0CtK,MAA1C,+BACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,2DACA,uBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM+K,YAAY,6BAAGzB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAA1B,2DAAG,uBAAmC5Q,MAAnC,CACnB,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,2BAAAjB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,kFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADmB,CAArB;AAMAoN,YAAAA,OAAO,GACLA,OAAO,qCACmBqB,YADnB,aACmBA,YADnB,uBACmBA,YAAY,CAClClS,GADsB,CAClB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADkB,EAEvBuB,IAFuB,CAElB,IAFkB,CADnB,OADT;AAKD,WAfM,MAeA,IACL,2BAAAwP,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,kFAA0CtK,MAA1C,iCACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,2DACA,uBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM6K,aAAY,6BAChBvB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UADd,2DAChB,uBAA0C5Q,MAA1C,CACE,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,2BAAAjB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAAvB,kFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADF,CADF;;AAOA,gBAAMyO,aAAY,6BAAGzB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAA1B,2DAAG,uBAAmC5Q,MAAnC,CACnB,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADmB,CAArB;;AAMAoN,YAAAA,OAAO,GACLA,OAAO,oCACkBqB,aADlB,aACkBA,aADlB,uBACkBA,aAAY,CACjClS,GADqB,CACjB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADiB,EAEtBuB,IAFsB,CAEjB,IAFiB,CADlB,0BAGoB+Q,aAHpB,aAGoBA,aAHpB,uBAGoBA,aAAY,CACnChS,GADuB,CACnB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADmB,EAExBuB,IAFwB,CAEnB,IAFmB,CAHpB,OADT;AAOD,WAxBM,MAwBA;AACL,gBAAIkR,KAAK,GAAG,EAAZ;;AACA,iBAAK,IAAIC,IAAT,IAAiB3B,OAAO,CAACM,UAAR,CAAmBC,GAApC,EAAyC;AACvCmB,cAAAA,KAAK,CAAC/S,IAAN,CAAWgT,IAAX;AACD;;AACDvB,YAAAA,OAAO,GAAGA,OAAO,0BAAkBsB,KAAK,CAAClR,IAAN,CAAW,IAAX,CAAlB,YAAjB;AACD;AACF;;AACD,YAAIoQ,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAC1B,cAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,cAAjB,EAAiC;AAC/BA,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,uCACqBJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BM,YADnD,OAFb,GAII,IAJJ;AAKAH,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,wCACsBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBQ,YAD7C,OAFb,GAII,IAJJ;AAKD,WAXD,MAWO,IAAIH,KAAK,CAAC,CAAD,CAAL,KAAa,aAAjB,EAAgC;AACrCR,YAAAA,OAAO,GAAGA,OAAO,kCAA2BJ,OAAO,CAACM,UAAnC,CAAjB;AACD;AACF;;AACD,+CACKN,OADL;AAEEG,UAAAA,IAAI,EAAED,OAFR;AAGEW,UAAAA,WAAW,EAAET;AAHf;AAKD,OA9NgB,CAAjB;AA+NA,UAAIwB,WAAW,GAAGtJ,IAAI,CAACS,IAAL,CAAU8I,SAAV,CAAoBtS,GAApB,CAAwB,UAACyQ,OAAD,EAAUC,OAAV,EAAsB;AAC9D,YAAMC,OAAO,GAAGzS,MAAM,CAACuS,OAAO,CAACG,IAAT,CAAN,CAAqB1P,MAArB,CAA4B,IAA5B,EAAkCC,MAAlC,CAAyC,KAAzC,CAAhB;AACA,YAAI0P,OAAO,GAAG,EAAd;AACA,YAAMC,cAAc,GAAGL,OAAO,CAACM,UAAR,GACnBN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,GACEP,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACE,MADF,GAEE6M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACA,MADA,GAEA6M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACA,KADA,GAEA,IAPJ,GAQE,IATiB,GAUnB,IAVJ;AAWA,YAAMqN,eAAe,GAAGR,OAAO,CAACM,UAAR,GACpBN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,GACET,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACE,MADF,GAEE6M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACA,MADA,GAEA6M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACA,KADA,GAEA,IAPJ,GAQE,IATkB,GAUpB,IAVJ;AAWA,YAAMuN,YAAY,GAAGV,OAAO,CAACM,UAAR,GACjBN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,GACEP,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACE,SADF,GAEE4M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACA,UADA,GAEA4M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACA,aADA,GAEA,IAPJ,GAQE,IATe,GAUjB,IAVJ;AAWA,YAAMuN,aAAa,GAAGX,OAAO,CAACM,UAAR,GAClBN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,GACET,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACE,SADF,GAEE4M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACA,UADA,GAEA4M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACA,aADA,GAEA,IAPJ,GAQE,IATgB,GAUlB,IAVJ;AAWA,YAAMwN,KAAK,GAAGZ,OAAO,CAACa,WAAR,CAAoBC,KAApB,CAA0B,GAA1B,CAAd;;AACA,YAAIF,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAAA;;AAC1B,cAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,cAAjB,EAAiC;AAC/BA,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,uCACqBJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BM,YADnD,OAFb,GAII,IAJJ;AAKAH,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,wCACsBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBQ,YAD7C,OAFb,GAII,IAJJ;AAKD,WAXD,MAWO,IAAIH,KAAK,CAAC,CAAD,CAAL,KAAa,aAAjB,EAAgC;AACrCR,YAAAA,OAAO,GAAGA,OAAO,+BAAwBJ,OAAO,CAACM,UAAhC,CAAjB;AACD,WAFM,MAEA,+BAAIN,OAAO,CAACM,UAAR,CAAmBG,UAAvB,oDAAI,wBAA+BO,UAAnC,EAA+C;AACpDZ,YAAAA,OAAO,GACLA,OAAO,gDAC8BhS,QAAQ,CAACmL,eAAT,CAClCnJ,MADkC,CAC3B,UAAC6Q,MAAD;AAAA;;AAAA,gDACNjB,OAAO,CAACM,UAAR,CAAmBG,UADb,4DACN,wBAA+BO,UAA/B,CAA0CzQ,QAA1C,CACE0Q,MAAM,CAACjO,EADT,CADM;AAAA,aAD2B,EAMlCzD,GANkC,CAM9B,UAAC2R,MAAD;AAAA,qBAAYA,MAAM,CAAChO,cAAnB;AAAA,aAN8B,EAOlC1C,IAPkC,CAO7B,IAP6B,CAD9B,OADT;AAUD,WAXM,MAWA;AAAA;;AACL4P,YAAAA,OAAO,GACLA,OAAO,sEACyBJ,OAAO,CAACM,UAAR,CAAmBG,UAD5C,4DACyB,wBAA+BvN,cADxD,OADT;AAGD;AACF;;AACD0N,QAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,OAAb,GACKR,OAAO,GAAGA,OAAO,qBADtB,GAEI,IAFJ;;AAGA,YAAIQ,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAAA;;AAC1B,cAAIZ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAAlC,EAAoD;AAClDiN,YAAAA,OAAO,GACLA,OAAO,4CAC2BC,cAD3B,iBACgDG,eADhD,CADT;AAGD,WAJD,MAIO,IAAIR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAAlC,EAAgD;AACrDgN,YAAAA,OAAO,GACLA,OAAO,8CAC6BM,YAD7B,iBACgDC,aADhD,CADT;AAGD,WAJM,MAIA,IAAIX,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvN,cAAlC,EAAkD;AACvDkN,YAAAA,OAAO,GACLA,OAAO,yCACuBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBrN,cAD9C,qBACqE8M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvN,cADnG,OADT;AAGD,WAJM,MAIA,IAAI8M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvR,aAAlC,EAAiD;AACtDkR,YAAAA,OAAO,GACLA,OAAO,kDACgCJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBrR,aADvD,qBAC6E8Q,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvR,aAD3G,OADT;AAGD,WAJM,MAIA,IAAI8Q,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B9Q,QAAlC,EAA4C;AACjDyQ,YAAAA,OAAO,GACLA,OAAO,6CAELxP,YAAY,CAACuQ,SAAb,CAAuB/Q,MAAvB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuB5Q,QAA3C;AAAA,aADF,EAEE,CAFF,EAEKb,IAJA,qBAML8B,YAAY,CAACuQ,SAAb,CAAuB/Q,MAAvB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B9Q,QAAlD;AAAA,aADF,EAEE,CAFF,EAEKb,IARA,OADT;AAWD,WAZM,MAYA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrR,SAAlC,EAA6C;AAClDgR,YAAAA,OAAO,GACLA,OAAO,2CAELxP,YAAY,CAACwQ,OAAb,CAAqBhR,MAArB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnR,SAA3C;AAAA,aADF,EAEE,CAFF,EAEKN,IAJA,qBAML8B,YAAY,CAACwQ,OAAb,CAAqBhR,MAArB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrR,SAAlD;AAAA,aADF,EAEE,CAFF,EAEKN,IARA,OADT;AAWD,WAZM,MAYA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BY,eAAlC,EAAmD;AACxDjB,YAAAA,OAAO,GACLA,OAAO,iDAELxP,YAAY,CAAC0Q,aAAb,CAA2BlR,MAA3B,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBc,eAA3C;AAAA,aADF,EAEE,CAFF,EAEKvS,IAJA,qBAML8B,YAAY,CAAC0Q,aAAb,CAA2BlR,MAA3B,CACE,UAACZ,GAAD;AAAA,qBACEA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BY,eAD3C;AAAA,aADF,EAGE,CAHF,EAGKvS,IATA,OADT;AAYD,WAbM,MAaA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B5Q,SAAlC,EAA6C;AAClDuQ,YAAAA,OAAO,GAAGA,OAAO,8BAAjB;AACD,WAFM,MAEA,IACL,4BAAAJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFAA0CtK,MAA1C,+BACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,2DACA,uBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM6K,YAAY,8BAChBvB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UADd,4DAChB,wBAA0C5Q,MAA1C,CACE,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,2BAAAjB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAAvB,kFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADF,CADF;AAOAoN,YAAAA,OAAO,GACLA,OAAO,+BACamB,YADb,aACaA,YADb,uBACaA,YAAY,CAC5BhS,GADgB,CACZ,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADY,EAEjBuB,IAFiB,CAEZ,IAFY,CADb,yBADT;AAKD,WAhBM,MAgBA,IACL,4BAAAwP,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFAA0CtK,MAA1C,gCACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,4DACA,wBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM+K,YAAY,8BAAGzB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAA1B,4DAAG,wBAAmC5Q,MAAnC,CACnB,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADmB,CAArB;AAMAoN,YAAAA,OAAO,GACLA,OAAO,qCACmBqB,YADnB,aACmBA,YADnB,uBACmBA,YAAY,CAClClS,GADsB,CAClB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADkB,EAEvBuB,IAFuB,CAElB,IAFkB,CADnB,OADT;AAKD,WAfM,MAeA,IACL,4BAAAwP,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFAA0CtK,MAA1C,kCACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,4DACA,wBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM6K,cAAY,8BAChBvB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UADd,4DAChB,wBAA0C5Q,MAA1C,CACE,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAAvB,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADF,CADF;;AAOA,gBAAMyO,cAAY,8BAAGzB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAA1B,4DAAG,wBAAmC5Q,MAAnC,CACnB,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADmB,CAArB;;AAMAoN,YAAAA,OAAO,GACLA,OAAO,oCACkBqB,cADlB,aACkBA,cADlB,uBACkBA,cAAY,CACjClS,GADqB,CACjB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADiB,EAEtBuB,IAFsB,CAEjB,IAFiB,CADlB,0BAGoB+Q,cAHpB,aAGoBA,cAHpB,uBAGoBA,cAAY,CACnChS,GADuB,CACnB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADmB,EAExBuB,IAFwB,CAEnB,IAFmB,CAHpB,OADT;AAOD,WAxBM,MAwBA;AACL,gBAAIkR,KAAK,GAAG,EAAZ;;AACA,iBAAK,IAAIC,IAAT,IAAiB3B,OAAO,CAACM,UAAR,CAAmBC,GAApC,EAAyC;AACvCmB,cAAAA,KAAK,CAAC/S,IAAN,CAAWgT,IAAX;AACD;;AACDvB,YAAAA,OAAO,GAAGA,OAAO,0BAAkBsB,KAAK,CAAClR,IAAN,CAAW,IAAX,CAAlB,YAAjB;AACD;AACF;;AACD,YAAIoQ,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAC1B,cAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,cAAjB,EAAiC;AAC/BA,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,uCACqBJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BM,YADnD,OAFb,GAII,IAJJ;AAKAH,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,wCACsBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBQ,YAD7C,OAFb,GAII,IAJJ;AAKD;AACF;;AACD,+CACKf,OADL;AAEEG,UAAAA,IAAI,EAAED,OAFR;AAGEW,UAAAA,WAAW,EAAET;AAHf;AAKD,OA5NiB,CAAlB;AA6NA,UAAI0B,WAAW,GAAGxJ,IAAI,CAACS,IAAL,CAAUgJ,SAAV,CAAoBxS,GAApB,CAAwB,UAACyQ,OAAD,EAAUC,OAAV,EAAsB;AAC9D,YAAMC,OAAO,GAAGzS,MAAM,CAACuS,OAAO,CAACG,IAAT,CAAN,CAAqB1P,MAArB,CAA4B,IAA5B,EAAkCC,MAAlC,CAAyC,KAAzC,CAAhB;AACA,YAAI0P,OAAO,GAAG,EAAd;AACA,YAAMC,cAAc,GAAGL,OAAO,CAACM,UAAR,GACnBN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,GACEP,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACE,MADF,GAEE6M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACA,MADA,GAEA6M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBpN,gBAAvB,KAA4C,CAA5C,GACA,KADA,GAEA,IAPJ,GAQE,IATiB,GAUnB,IAVJ;AAWA,YAAMqN,eAAe,GAAGR,OAAO,CAACM,UAAR,GACpBN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,GACET,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACE,MADF,GAEE6M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACA,MADA,GAEA6M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAA9B,KAAmD,CAAnD,GACA,KADA,GAEA,IAPJ,GAQE,IATkB,GAUpB,IAVJ;AAWA,YAAMuN,YAAY,GAAGV,OAAO,CAACM,UAAR,GACjBN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,GACEP,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACE,SADF,GAEE4M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACA,UADA,GAEA4M,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnN,YAAvB,KAAwC,CAAxC,GACA,aADA,GAEA,IAPJ,GAQE,IATe,GAUjB,IAVJ;AAWA,YAAMuN,aAAa,GAAGX,OAAO,CAACM,UAAR,GAClBN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,GACET,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACE,SADF,GAEE4M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACA,UADA,GAEA4M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAA9B,KAA+C,CAA/C,GACA,aADA,GAEA,IAPJ,GAQE,IATgB,GAUlB,IAVJ;AAWA,YAAMwN,KAAK,GAAGZ,OAAO,CAACa,WAAR,CAAoBC,KAApB,CAA0B,GAA1B,CAAd;;AACA,YAAIF,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAAA;;AAC1B,cAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,cAAjB,EAAiC;AAC/BA,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,uCACqBJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BM,YADnD,OAFb,GAII,IAJJ;AAKAH,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,wCACsBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBQ,YAD7C,OAFb,GAII,IAJJ;AAKD,WAXD,MAWO,IAAIH,KAAK,CAAC,CAAD,CAAL,KAAa,aAAjB,EAAgC;AACrCR,YAAAA,OAAO,GAAGA,OAAO,+BAAwBJ,OAAO,CAACM,UAAhC,CAAjB;AACD,WAFM,MAEA,+BAAIN,OAAO,CAACM,UAAR,CAAmBG,UAAvB,oDAAI,wBAA+BO,UAAnC,EAA+C;AACpDZ,YAAAA,OAAO,GACLA,OAAO,gDAC8BhS,QAAQ,CAACmL,eAAT,CAClCnJ,MADkC,CAC3B,UAAC6Q,MAAD;AAAA;;AAAA,gDACNjB,OAAO,CAACM,UAAR,CAAmBG,UADb,4DACN,wBAA+BO,UAA/B,CAA0CzQ,QAA1C,CACE0Q,MAAM,CAACjO,EADT,CADM;AAAA,aAD2B,EAMlCzD,GANkC,CAM9B,UAAC2R,MAAD;AAAA,qBAAYA,MAAM,CAAChO,cAAnB;AAAA,aAN8B,EAOlC1C,IAPkC,CAO7B,IAP6B,CAD9B,OADT;AAUD,WAXM,MAWA;AAAA;;AACL4P,YAAAA,OAAO,GACLA,OAAO,sEACyBJ,OAAO,CAACM,UAAR,CAAmBG,UAD5C,4DACyB,wBAA+BvN,cADxD,OADT;AAGD;AACF;;AACD0N,QAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,OAAb,GACKR,OAAO,GAAGA,OAAO,qBADtB,GAEI,IAFJ;;AAGA,YAAIQ,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAAA;;AAC1B,cAAIZ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BtN,gBAAlC,EAAoD;AAClDiN,YAAAA,OAAO,GACLA,OAAO,4CAC2BC,cAD3B,iBACgDG,eADhD,CADT;AAGD,WAJD,MAIO,IAAIR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrN,YAAlC,EAAgD;AACrDgN,YAAAA,OAAO,GACLA,OAAO,8CAC6BM,YAD7B,iBACgDC,aADhD,CADT;AAGD,WAJM,MAIA,IAAIX,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvN,cAAlC,EAAkD;AACvDkN,YAAAA,OAAO,GACLA,OAAO,yCACuBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBrN,cAD9C,qBACqE8M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvN,cADnG,OADT;AAGD,WAJM,MAIA,IAAI8M,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvR,aAAlC,EAAiD;AACtDkR,YAAAA,OAAO,GACLA,OAAO,kDACgCJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBrR,aADvD,qBAC6E8Q,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BvR,aAD3G,OADT;AAGD,WAJM,MAIA,IAAI8Q,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B9Q,QAAlC,EAA4C;AACjDyQ,YAAAA,OAAO,GACLA,OAAO,6CAELxP,YAAY,CAACuQ,SAAb,CAAuB/Q,MAAvB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuB5Q,QAA3C;AAAA,aADF,EAEE,CAFF,EAEKb,IAJA,qBAML8B,YAAY,CAACuQ,SAAb,CAAuB/Q,MAAvB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B9Q,QAAlD;AAAA,aADF,EAEE,CAFF,EAEKb,IARA,OADT;AAWD,WAZM,MAYA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrR,SAAlC,EAA6C;AAClDgR,YAAAA,OAAO,GACLA,OAAO,2CAELxP,YAAY,CAACwQ,OAAb,CAAqBhR,MAArB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBnR,SAA3C;AAAA,aADF,EAEE,CAFF,EAEKN,IAJA,qBAML8B,YAAY,CAACwQ,OAAb,CAAqBhR,MAArB,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BrR,SAAlD;AAAA,aADF,EAEE,CAFF,EAEKN,IARA,OADT;AAWD,WAZM,MAYA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BY,eAAlC,EAAmD;AACxDjB,YAAAA,OAAO,GACLA,OAAO,iDAELxP,YAAY,CAAC0Q,aAAb,CAA2BlR,MAA3B,CACE,UAACZ,GAAD;AAAA,qBAASA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBc,eAA3C;AAAA,aADF,EAEE,CAFF,EAEKvS,IAJA,qBAML8B,YAAY,CAAC0Q,aAAb,CAA2BlR,MAA3B,CACE,UAACZ,GAAD;AAAA,qBACEA,GAAG,CAACwD,EAAJ,KAAWgN,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BY,eAD3C;AAAA,aADF,EAGE,CAHF,EAGKvS,IATA,OADT;AAYD,WAbM,MAaA,IAAIkR,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8B5Q,SAAlC,EAA6C;AAClDuQ,YAAAA,OAAO,GAAGA,OAAO,8BAAjB;AACD,WAFM,MAEA,IACL,4BAAAJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFAA0CtK,MAA1C,gCACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,4DACA,wBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM6K,YAAY,8BAChBvB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UADd,4DAChB,wBAA0C5Q,MAA1C,CACE,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAAvB,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADF,CADF;AAOAoN,YAAAA,OAAO,GACLA,OAAO,+BACamB,YADb,aACaA,YADb,uBACaA,YAAY,CAC5BhS,GADgB,CACZ,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADY,EAEjBuB,IAFiB,CAEZ,IAFY,CADb,yBADT;AAKD,WAhBM,MAgBA,IACL,4BAAAwP,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFAA0CtK,MAA1C,gCACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,4DACA,wBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM+K,YAAY,8BAAGzB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAA1B,4DAAG,wBAAmC5Q,MAAnC,CACnB,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADmB,CAArB;AAMAoN,YAAAA,OAAO,GACLA,OAAO,qCACmBqB,YADnB,aACmBA,YADnB,uBACmBA,YAAY,CAClClS,GADsB,CAClB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADkB,EAEvBuB,IAFuB,CAElB,IAFkB,CADnB,OADT;AAKD,WAfM,MAeA,IACL,4BAAAwP,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFAA0CtK,MAA1C,kCACAsJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UADvB,4DACA,wBAAmCtK,MADnC,CADK,EAGL;AAAA;;AACA,gBAAM6K,cAAY,8BAChBvB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UADd,4DAChB,wBAA0C5Q,MAA1C,CACE,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAAvB,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADF,CADF;;AAOA,gBAAMyO,cAAY,8BAAGzB,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBS,UAA1B,4DAAG,wBAAmC5Q,MAAnC,CACnB,UAAC6Q,MAAD;AAAA;;AAAA,qBACE,4BAAAjB,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BO,UAA9B,oFACIzR,GADJ,CACQ,UAACiS,IAAD;AAAA,uBAAUA,IAAI,CAACxO,EAAf;AAAA,eADR,EAEGzC,QAFH,CAEY0Q,MAAM,CAACjO,EAFnB,OAE2B,KAH7B;AAAA,aADmB,CAArB;;AAMAoN,YAAAA,OAAO,GACLA,OAAO,oCACkBqB,cADlB,aACkBA,cADlB,uBACkBA,cAAY,CACjClS,GADqB,CACjB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADiB,EAEtBuB,IAFsB,CAEjB,IAFiB,CADlB,0BAGoB+Q,cAHpB,aAGoBA,cAHpB,uBAGoBA,cAAY,CACnChS,GADuB,CACnB,UAACiS,IAAD;AAAA,qBAAUA,IAAI,CAACvS,MAAf;AAAA,aADmB,EAExBuB,IAFwB,CAEnB,IAFmB,CAHpB,OADT;AAOD,WAxBM,MAwBA;AACL,gBAAIkR,KAAK,GAAG,EAAZ;;AACA,iBAAK,IAAIC,IAAT,IAAiB3B,OAAO,CAACM,UAAR,CAAmBC,GAApC,EAAyC;AACvCmB,cAAAA,KAAK,CAAC/S,IAAN,CAAWgT,IAAX;AACD;;AACDvB,YAAAA,OAAO,GAAGA,OAAO,0BAAkBsB,KAAK,CAAClR,IAAN,CAAW,IAAX,CAAlB,YAAjB;AACD;AACF;;AACD,YAAIoQ,KAAK,CAAC,CAAD,CAAL,KAAa,SAAjB,EAA4B;AAC1B,cAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,cAAjB,EAAiC;AAC/BA,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,uCACqBJ,OAAO,CAACM,UAAR,CAAmBG,UAAnB,CAA8BM,YADnD,OAFb,GAII,IAJJ;AAKAH,YAAAA,KAAK,CAAC,CAAD,CAAL,KAAa,SAAb,GACKR,OAAO,GACNA,OAAO,wCACsBJ,OAAO,CAACM,UAAR,CAAmBC,GAAnB,CAAuBQ,YAD7C,OAFb,GAII,IAJJ;AAKD;AACF;;AACD,+CACKf,OADL;AAEEG,UAAAA,IAAI,EAAED,OAFR;AAGEW,UAAAA,WAAW,EAAET;AAHf;AAKD,OA5NiB,CAAlB;AA6NAf,MAAAA,UAAU,CAACS,UAAD,CAAV;AACAP,MAAAA,WAAW,CAACqC,WAAD,CAAX;AACAnC,MAAAA,WAAW,CAACqC,WAAD,CAAX;AACAnC,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD,KAxqBH,EAHc,CA4qBd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GAzsBQ,EAysBN,CAACR,eAAD,CAzsBM,CAAT;AA2sBA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA,6BACE;AAAI,QAAA,SAAS,EAAC,2BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aADF,eAIE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,oCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEGO,cAAc,gBACb;AAAA;AAAA;AAAA;AAAA,mBADa,GAEXN,OAAO,CAAC1I,MAAR,GAAiB,CAAjB,gBACF;AAAA,mCACE;AAAO,cAAA,KAAK,EAAE,OAAMoI;AAApB;AAAA;AAAA;AAAA;AAAA;AADF,2BADE,gBAKF;AAAU,YAAA,IAAI,EAAC,MAAf;AAAA,sBACGM,OAAO,CAAC7P,GAAR,CAAY,UAACyS,MAAD,EAASC,MAAT,EAAoB;AAC/B,kCACE,kBAAU,IAAV;AAAe,gBAAA,KAAK,EAAED,MAAM,CAAC7B,IAA7B;AAAA,uCACE;AAAK,kBAAA,SAAS,EAAC,eAAf;AAAA,0CACE;AAAI,oBAAA,SAAS,EAAC,8BAAd;AAAA,8BACG6B,MAAM,CAACnB;AADV;AAAA;AAAA;AAAA;AAAA,2BADF,eAIE;AAAG,oBAAA,SAAS,EAAC,4BAAb;AAAA,wCACQmB,MAAM,CAACE,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,2BAJF,eAOE;AAAG,oBAAA,SAAS,EAAC,cAAb;AAAA,0CAAoCF,MAAM,CAACvO,KAA3C;AAAA;AAAA;AAAA;AAAA;AAAA,2BAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,uBADF;AAaD,aAdA;AADH;AAAA;AAAA;AAAA;AAAA,mBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eA6BE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,oCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEGiM,cAAc,gBACb;AAAA;AAAA;AAAA;AAAA,mBADa,GAEXJ,QAAQ,CAAC5I,MAAT,GAAkB,CAAlB,gBACF;AAAA,mCACE;AAAO,cAAA,KAAK,EAAE,OAAMoI;AAApB;AAAA;AAAA;AAAA;AAAA;AADF,2BADE,gBAKF;AAAU,YAAA,IAAI,EAAC,MAAf;AAAA,sBACGQ,QAAQ,CAAC/P,GAAT,CAAa,UAACyS,MAAD,EAASC,MAAT,EAAoB;AAChC,kCACE,kBAAU,IAAV;AAAe,gBAAA,KAAK,EAAED,MAAM,CAAC7B,IAA7B;AAAA,uCACE;AAAK,kBAAA,SAAS,EAAC,eAAf;AAAA,0CACE;AAAI,oBAAA,SAAS,EAAC,8BAAd;AAAA,8BACG6B,MAAM,CAACnB;AADV;AAAA;AAAA;AAAA;AAAA,2BADF,eAIE;AAAG,oBAAA,SAAS,EAAC,4BAAb;AAAA,wCACQmB,MAAM,CAACE,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,2BAJF,eAOE;AAAG,oBAAA,SAAS,EAAC,cAAb;AAAA,0CAAoCF,MAAM,CAACvO,KAA3C;AAAA;AAAA;AAAA;AAAA;AAAA,2BAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,uBADF;AAaD,aAdA;AADH;AAAA;AAAA;AAAA;AAAA,mBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,iBA7BF;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eA2DE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,oCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEGiM,cAAc,gBACb;AAAA;AAAA;AAAA;AAAA,iBADa,GAEXF,QAAQ,CAAC9I,MAAT,GAAkB,CAAlB,gBACF;AAAA,iCACE;AAAO,YAAA,KAAK,EAAE,OAAMoI;AAApB;AAAA;AAAA;AAAA;AAAA;AADF,yBADE,gBAKF;AAAU,UAAA,IAAI,EAAC,MAAf;AAAA,oBACGU,QAAQ,CAACjQ,GAAT,CAAa,UAACyS,MAAD,EAASC,MAAT,EAAoB;AAChC,gCACE,kBAAU,IAAV;AAAe,cAAA,KAAK,EAAED,MAAM,CAAC7B,IAA7B;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,eAAf;AAAA,wCACE;AAAI,kBAAA,SAAS,EAAC,8BAAd;AAAA,4BACG6B,MAAM,CAACnB;AADV;AAAA;AAAA;AAAA;AAAA,yBADF,eAIE;AAAG,kBAAA,SAAS,EAAC,4BAAb;AAAA,sCACQmB,MAAM,CAACE,WADf;AAAA;AAAA;AAAA;AAAA;AAAA,yBAJF,eAOE;AAAG,kBAAA,SAAS,EAAC,cAAb;AAAA,wCAAoCF,MAAM,CAACvO,KAA3C;AAAA;AAAA;AAAA;AAAA;AAAA,yBAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBADF;AAaD,WAdA;AADH;AAAA;AAAA;AAAA;AAAA,iBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,eA3DF;AAAA;AAAA;AAAA;AAAA;AAAA,aAJF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AA+FD,CAxzBD;;IAAMyL,Q;;MAAAA,Q;;AA0zBN,IAAMiD,UAAU,GAAG,SAAbA,UAAa,QAAkD;AAAA;;AAAA,MAA/ChU,SAA+C,SAA/CA,SAA+C;AAAA,MAApCiU,WAAoC,SAApCA,WAAoC;AAAA,MAAvBC,QAAuB,SAAvBA,QAAuB;AAAA,MAAbnU,MAAa,SAAbA,MAAa;AACnE;AACA,MAAMM,EAAE,GAAGb,SAAS,EAApB;AACA,MAAI2U,SAAS,GAAG,UAAhB;AAHmE,MAI3DC,MAJ2D,GAIhD/T,EAAE,CAACgU,KAJ6C,CAI3DD,MAJ2D;;AAKnE,MAAIA,MAAJ,EAAY;AACVD,IAAAA,SAAS,GAAGC,MAAZ;AACD;;AACD,MAAIE,OAAO,GAAGjU,EAAE,CAACkU,QAAH,CAAY5B,KAAZ,CAAkB,GAAlB,EAAuB6B,KAAvB,CAA6B,CAA7B,CAAd;AACAF,EAAAA,OAAO,CAACG,MAAR,CAAe,CAAf,EAAkB,CAAlB;AACAH,EAAAA,OAAO,CAACA,OAAO,CAAC/L,MAAR,GAAiB,CAAlB,CAAP,GAA8B,aAA9B;AAVmE,MAW3DmM,OAX2D,SAW3DA,OAX2D,EAanE;;AAbmE,oBAcnChV,QAAQ,CAAC;AACvCmF,IAAAA,EAAE,EAAE,EADmC;AAEvCC,IAAAA,QAAQ,EAAE,EAF6B;AAGvC7D,IAAAA,SAAS,EAAE,EAH4B;AAIvC8D,IAAAA,cAAc,EAAE,EAJuB;AAKvCC,IAAAA,gBAAgB,EAAE,EALqB;AAMvCC,IAAAA,YAAY,EAAE,EANyB;AAOvCzD,IAAAA,QAAQ,EAAE,EAP6B;AAQvCmT,IAAAA,QAAQ,EAAE,EAR6B;AASvCjT,IAAAA,SAAS,EAAE,EAT4B;AAUvCwR,IAAAA,eAAe,EAAE,EAVsB;AAWvCpS,IAAAA,MAAM,EAAE,EAX+B;AAYvCC,IAAAA,aAAa,EAAE,EAZwB;AAavC6T,IAAAA,UAAU,EAAE,EAb2B;AAcvCC,IAAAA,UAAU,EAAE,EAd2B;AAevCnU,IAAAA,UAAU,EAAE,EAf2B;AAgBvC+G,IAAAA,UAAU,EAAE,EAhB2B;AAiBvCqN,IAAAA,UAAU,EAAE,EAjB2B;AAkBvCC,IAAAA,aAAa,EAAE,EAlBwB;AAmBvCtU,IAAAA,eAAe,EAAE;AACfoE,MAAAA,EAAE,EAAE,IADW;AAEflE,MAAAA,IAAI,EAAE,EAFS;AAGfuE,MAAAA,QAAQ,EAAE,IAHK;AAIfxE,MAAAA,UAAU,EAAE,IAJG;AAKfG,MAAAA,KAAK,EAAE;AACLgE,QAAAA,EAAE,EAAE,IADC;AAELlE,QAAAA,IAAI,EAAE,EAFD;AAGLD,QAAAA,UAAU,EAAE;AAHP;AALQ,KAnBsB;AA8BvCe,IAAAA,kBAAkB,EAAE;AAClBuT,MAAAA,UAAU,EAAE,IADM;AAElBC,MAAAA,YAAY,EAAE;AAFI,KA9BmB;AAkCvCtT,IAAAA,qBAAqB,EAAE,EAlCgB;AAmCvCyJ,IAAAA,eAAe,EAAE,EAnCsB;AAoCvCsF,IAAAA,YAAY,EAAE,EApCyB;AAqCvCvP,IAAAA,UAAU,EAAE;AArC2B,GAAD,CAd2B;AAAA,MAc5DlB,QAd4D;AAAA,MAclDiV,WAdkD;;AAAA,oBAqD3BxV,QAAQ,CAAC;AAC/CiD,IAAAA,MAAM,EAAE,CACN;AACEkC,MAAAA,EAAE,EAAE,EADN;AAEElE,MAAAA,IAAI,EAAE,EAFR;AAGED,MAAAA,UAAU,EAAE;AAHd,KADM,CADuC;AAQ/CyU,IAAAA,MAAM,EAAE,CACN;AACEtQ,MAAAA,EAAE,EAAE,EADN;AAEElE,MAAAA,IAAI,EAAE,EAFR;AAGED,MAAAA,UAAU,EAAE;AAHd,KADM,CARuC;AAe/CyS,IAAAA,aAAa,EAAE,CACb;AACEtO,MAAAA,EAAE,EAAE,EADN;AAEElE,MAAAA,IAAI,EAAE,EAFR;AAGED,MAAAA,UAAU,EAAE;AAHd,KADa,CAfgC;AAsB/CsE,IAAAA,gBAAgB,EAAE,EAtB6B;AAuB/CC,IAAAA,YAAY,EAAE,EAvBiC;AAwB/CgO,IAAAA,OAAO,EAAE,EAxBsC;AAyB/CD,IAAAA,SAAS,EAAE,EAzBoC;AA0B/CoC,IAAAA,cAAc,EAAE;AACd5N,MAAAA,QAAQ,EAAE;AADI;AA1B+B,GAAD,CArDmB;AAAA,MAqD5D/E,YArD4D;AAAA,MAqD9C4S,eArD8C;;AAAA,oBAmFrC3V,QAAQ,CAAC,EAAD,CAnF6B;AAAA,MAmF5D4V,OAnF4D;AAAA,MAmFnDC,UAnFmD;;AAAA,oBAoFzC7V,QAAQ,CAAC,EAAD,CApFiC;AAAA,MAoF5DQ,KApF4D;AAAA,MAoFrDsV,QApFqD;;AAAA,oBAqFvC9V,QAAQ,CAAC,EAAD,CArF+B;AAAA,MAqF5DS,MArF4D;AAAA,MAqFpDsV,SArFoD;;AAAA,oBAsF/B/V,QAAQ,CAAC,IAAD,CAtFuB;AAAA,MAsF5DU,UAtF4D;AAAA,MAsFhDsV,aAtFgD;;AAAA,oBAuF7BhW,QAAQ,CAAC,IAAD,CAvFqB;AAAA,MAuF5DgD,WAvF4D;AAAA,MAuF/CiT,cAvF+C,mBAwFnE;;;AAxFmE,oBAyF7BjW,QAAQ,CAAC,KAAD,CAzFqB;AAAA,MAyF5DwN,WAzF4D;AAAA,MAyF/CC,cAzF+C;;AAAA,oBA0FzBzN,QAAQ,CAAC,KAAD,CA1FiB;AAAA,MA0F5D0N,aA1F4D;AAAA,MA0F7CC,gBA1F6C,mBA2FnE;;;AA3FmE,oBA4FzC3N,QAAQ,CAAC,EAAD,CA5FiC;AAAA,MA4F5D4F,KA5F4D;AAAA,MA4FrDsQ,QA5FqD;;AAAA,oBA6F/BlW,QAAQ,CAAC,KAAD,CA7FuB;AAAA,MA6F5DmW,UA7F4D;AAAA,MA6FhDC,aA7FgD;;AAAA,oBA8F3BpW,QAAQ,CAAC,KAAD,CA9FmB;AAAA,MA8F5DqW,YA9F4D;AAAA,MA8F9CC,eA9F8C,mBA+FnE;;;AA/FmE,oBAgGrCtW,QAAQ,CAAC,EAAD,CAhG6B;AAAA,MAgG5DuW,OAhG4D;AAAA,MAgGnDC,UAhGmD;;AAAA,oBAiG7BxW,QAAQ,CAAC,EAAD,CAjGqB;AAAA,MAiG5DyW,WAjG4D;AAAA,MAiG/CC,cAjG+C;;AAAA,oBAkG3B1W,QAAQ,CAAC,KAAD,CAlGmB;AAAA,MAkG5D2W,YAlG4D;AAAA,MAkG9CC,eAlG8C;;AAAA,oBAmGvB5W,QAAQ,CAAC,IAAD,CAnGe;AAAA,MAmG5D6W,cAnG4D;AAAA,MAmG5CC,iBAnG4C;;AAAA,oBAoGvB9W,QAAQ,CAAC,KAAD,CApGe;AAAA,MAoG5D+W,cApG4D;AAAA,MAoG5CC,iBApG4C,mBAqGnE;;;AArGmE,oBAsG7BhX,QAAQ,CAAC;AAC7CmF,IAAAA,EAAE,EAAEgE,MAAM,CAAC9I,MAAD,CADmC;AAE7CkF,IAAAA,YAAY,EAAE,EAF+B;AAG7CK,IAAAA,KAAK,EAAE,EAHsC;AAI7CqR,IAAAA,oBAAoB,EAAE,EAJuB;AAK7CC,IAAAA,YAAY,EAAE,EAL+B;AAM7CC,IAAAA,mBAAmB,EAAE;AANwB,GAAD,CAtGqB;AAAA,MAsG5DC,WAtG4D;AAAA,MAsG/CC,cAtG+C;;AAAA,oBA8GzBrX,QAAQ,CAAC,IAAD,CA9GiB;AAAA,MA8G5DsX,aA9G4D;AAAA,MA8G7CC,gBA9G6C;;AAAA,oBA+G/BvX,QAAQ,CAAC,KAAD,CA/GuB;AAAA,MA+G5DwX,UA/G4D;AAAA,MA+GhDC,aA/GgD;;AAAA,oBAgH3BzX,QAAQ,CAAC,IAAD,CAhHmB;AAAA,MAgH5D0X,YAhH4D;AAAA,MAgH9CC,eAhH8C;;AAAA,oBAkHjE3X,QAAQ,CAAC,KAAD,CAlHyD;AAAA,MAiH5D4X,yBAjH4D;AAAA,MAiHjCC,4BAjHiC;;AAAA,oBAmH3B7X,QAAQ,CAAC,KAAD,CAnHmB;AAAA,MAmH5D8X,YAnH4D;AAAA,MAmH9CC,eAnH8C,mBAoHnE;AACA;;;AArHmE,oBAsH/B/X,QAAQ,CAAC,EAAD,CAtHuB;AAAA,MAsH5DgY,UAtH4D;AAAA,MAsHhDC,aAtHgD;;AAAA,oBAuHvCjY,QAAQ,CAAC,EAAD,CAvH+B;AAAA,MAuH5DiD,MAvH4D;AAAA,MAuHpDC,SAvHoD;;AAAA,oBAwH3BlD,QAAQ,CAAC,EAAD,CAxHmB;AAAA,MAwH5DkY,YAxH4D;AAAA,MAwH9CC,eAxH8C;;AAAA,oBAyHnBnY,QAAQ,CAAC,KAAD,CAzHW;AAAA,MAyH5DoY,gBAzH4D;AAAA,MAyH1CC,mBAzH0C;;AAAA,oBA0HfrY,QAAQ,CAAC,CAAC,CAAF,CA1HO;AAAA,MA0H5DsY,kBA1H4D;AAAA,MA0HxCC,qBA1HwC;;AAAA,oBA2HrBvY,QAAQ,CAAC,CAAD,CA3Ha;AAAA,MA2H5DsR,eA3H4D;AAAA,MA2H3CkH,kBA3H2C,mBA6HnE;AAEA;;;AACA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B9K,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAhE,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,uBAA2D;AAC9DC,MAAAA,MAAM,EAAE,QADsD;AAE9DC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAFqD;AAM9D8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAe;AACnBlF,QAAAA,EAAE,EAAEgE,MAAM,CAAC9I,MAAD,CADS;AAEnBuF,QAAAA,KAAK,EAAE;AAFY,OAAf;AANwD,KAA3D,CAAL,CAWG0E,IAXH,CAWQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KAXR,EAYGF,IAZH,CAYQ,UAACG,IAAD,EAAU;AACdkD,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;;AACA,UAAIlD,IAAI,CAACC,OAAT,EAAkB;AAChB,sBAAa,SAAb,EAAwB;AACtBC,UAAAA,OAAO,EAAE,uBADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIA6C,QAAAA,cAAc,CAAC,KAAD,CAAd;AACA9M,QAAAA,EAAE,CAACG,IAAH;AACD,OAPD,MAOO,IAAI,CAAC2J,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KA3BH;AA4BD,GA9BD;;AA+BA,MAAM8N,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5BpC,IAAAA,eAAe,CAAC,IAAD,CAAf;AACA3M,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,yBAA6D;AAChEC,MAAAA,MAAM,EAAE,MADwD;AAEhEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAFuD;AAMhE8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAe;AACnBlF,QAAAA,EAAE,EAAEgE,MAAM,CAAC9I,MAAD,CADS;AAEnBuF,QAAAA,KAAK,EAAEA;AAFY,OAAf;AAN0D,KAA7D,CAAL,CAWG0E,IAXH,CAWQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KAXR,EAYGF,IAZH,CAYQ,UAACG,IAAD,EAAU;AACd6L,MAAAA,eAAe,CAAC,KAAD,CAAf;;AACA,UAAI7L,IAAI,CAACC,OAAT,EAAkB;AAChB,sBAAa,SAAb,EAAwB;AACtBC,UAAAA,OAAO,EAAE,4BADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIAwL,QAAAA,aAAa,CAAC,KAAD,CAAb;AACAuC,QAAAA,MAAM,CAAC7W,QAAP,CAAgB8W,IAAhB,2BAAwCvY,MAAxC;AACD,OAPD,MAOO,IAAI,CAACoK,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KA3BH;AA4BD,GA9BD;;AA+BA,MAAMiO,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9B7B,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACArN,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,6BAAiE;AACpEC,MAAAA,MAAM,EAAE,KAD4D;AAEpEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAF2D;AAMpE8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAe;AACnBlF,QAAAA,EAAE,EAAEgE,MAAM,CAAC9I,MAAD,CADS;AAEnBuF,QAAAA,KAAK,EAAE6Q,WAFY;AAGnBnR,QAAAA,gBAAgB,EAAEiR;AAHC,OAAf;AAN8D,KAAjE,CAAL,CAYGjM,IAZH,CAYQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KAZR,EAaGF,IAbH,CAaQ,UAACG,IAAD,EAAU;AACduM,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAJ,MAAAA,eAAe,CAAC,KAAD,CAAf;;AACA,UAAInM,IAAI,CAACC,OAAT,EAAkB;AAChB,sBAAa,SAAb,EAAwB;AACtBC,UAAAA,OAAO,EAAE,gCADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIA+N,QAAAA,MAAM,CAAC7W,QAAP,CAAgB8W,IAAhB,2BAAwCvY,MAAxC;AACD,OAND,MAMO,IAAI,CAACoK,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KA5BH;AA6BD,GA/BD;;AAgCA,MAAMkO,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5Bf,IAAAA,eAAe,CAAC,IAAD,CAAf;AACApO,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,yBAA6D;AAChEC,MAAAA,MAAM,EAAE,KADwD;AAEhEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT,OAFuD;AAMhE8J,MAAAA,IAAI,EAAEF,IAAI,CAACG,SAAL,CAAe+M,WAAf;AAN0D,KAA7D,CAAL,CAQG9M,IARH,CAQQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KARR,EASGF,IATH,CASQ,UAACG,IAAD,EAAU;AACdsN,MAAAA,eAAe,CAAC,KAAD,CAAf;AACAN,MAAAA,aAAa,CAAC,KAAD,CAAb;;AACA,UAAIhN,IAAI,CAACC,OAAT,EAAkB;AAChB,sBAAa,SAAb,EAAwB;AACtBC,UAAAA,OAAO,EAAE,kCADa;AAEtBC,UAAAA,QAAQ,EAAE;AAFY,SAAxB;;AAIA+N,QAAAA,MAAM,CAAC7W,QAAP,CAAgB8W,IAAhB,2BAAwCvY,MAAxC;AACD,OAND,MAMO,IAAI,CAACoK,IAAI,CAACC,OAAV,EAAmB;AACxB,sBAAa,OAAb,EAAsB;AACpBC,UAAAA,OAAO,EAAEF,IAAI,CAACE,OADM;AAEpBC,UAAAA,QAAQ,EAAE;AAFU,SAAtB;AAID;AACF,KAxBH;AAyBD,GA3BD,CA9NmE,CA2PnE;;;AACA7K,EAAAA,SAAS,CAAC,YAAM;AACd4J,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,8BAA2DzJ,MAA3D,GAAqE;AACxE0J,MAAAA,MAAM,OADkE;AAExEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAF+D,KAArE,CAAL,CAMGgK,IANH,CAMQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KANR,EAOGF,IAPH,CAOQ,UAACG,IAAD,EAAU;AACd,UAAIkB,CAAC,GAAG,EAAR;;AACA,WAAK,IAAImI,IAAT,IAAiBrJ,IAAI,CAACS,IAAtB,EAA4B;AAC1B,YAAI4I,IAAI,KAAK,uBAAb,EAAsC;AACpCnI,UAAAA,CAAC,CAACmI,IAAD,CAAD,GAAUrJ,IAAI,CAACS,IAAL,CAAU4I,IAAV,EAAgBpS,GAAhB,CAAoB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1C,gBACED,GAAG,CAACS,SAAJ,KAAkB,UAAlB,IACAT,GAAG,CAACS,SAAJ,KAAkB,UAFpB,EAGE;AACA,qDACKT,GADL;AAEEU,gBAAAA,KAAK,EAAE6H,IAAI,CAACC,KAAL,CAAWxI,GAAG,CAACU,KAAf;AAFT;AAID,aARD,MAQO;AACL,uCAAYV,GAAZ;AACD;AACF,WAZS,CAAV;AAaD,SAdD,MAcO;AACLgK,UAAAA,CAAC,CAACmI,IAAD,CAAD,GAAUrJ,IAAI,CAACS,IAAL,CAAU4I,IAAV,CAAV;AACD;AACF;;AACD0B,MAAAA,WAAW,CAAC7J,CAAD,CAAX;AACAqK,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA,aAAOrK,CAAP;AACD,KA/BH,EAgCGrB,IAhCH,CAgCQ,UAACiB,IAAD,EAAU;AACd5B,MAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,6BAAiE;AACpEC,QAAAA,MAAM,OAD8D;AAEpEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAF2D,OAAjE,CAAL,CAMGgK,IANH,CAMQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OANR,EAOGF,IAPH,CAOQ,UAACG,IAAD,EAAU;AAAA;;AACdkL,QAAAA,eAAe,CAAClL,IAAI,CAACS,IAAN,CAAf;AACA,YAAI6N,SAAS,GAAG,IAAhB;AACAxN,QAAAA,IAAI,CAACiI,eAAL,KAAyB,CAAzB,IAA8BjI,IAAI,CAACiI,eAAL,KAAyB,IAAvD,GACKuF,SAAS,GAAG,IADjB,GAEKA,SAAS,GAAGtO,IAAI,CAACS,IAAL,CAAUuI,aAAV,CAAwBlR,MAAxB,CACX,UAAC6Q,MAAD;AAAA,iBAAYA,MAAM,CAACjO,EAAP,KAAcoG,IAAI,CAACiI,eAA/B;AAAA,SADW,EAEX,CAFW,EAERxS,UAJT;AAKA8U,QAAAA,QAAQ,CAAC;AACP7U,UAAAA,IAAI,EACFsK,IAAI,CAACiI,eAAL,KAAyB,IAAzB,IAAiCjI,IAAI,CAACiI,eAAL,KAAyB,CAA1D,GACI,GADJ,GAEI/I,IAAI,CAACS,IAAL,CAAUuI,aAAV,CAAwBlR,MAAxB,CACE,UAAC6Q,MAAD;AAAA,mBAAYA,MAAM,CAACjO,EAAP,KAAcoG,IAAI,CAACiI,eAA/B;AAAA,WADF,EAEE,CAFF,EAEKvS,IANJ;AAOPK,UAAAA,MAAM,EAAEyX,SAAS,KAAK,IAAd,GAAqB,KAArB,GAA6B;AAP9B,SAAD,CAAR;AASAxN,QAAAA,IAAI,CAAChK,SAAL,KAAmB,IAAnB,IAA2BgK,IAAI,CAAChK,SAAL,KAAmB,CAA9C,GACIwU,SAAS,CAAC,GAAD,CADb,GAEIA,SAAS,0BACPtL,IAAI,CAACS,IAAL,CAAUqI,OAAV,CAAkBhR,MAAlB,CACE,UAAC6Q,MAAD;AAAA,iBAAYA,MAAM,CAACjO,EAAP,KAAcoG,IAAI,CAAChK,SAA/B;AAAA,SADF,EAEE,CAFF,CADO,0DACP,sBAEMN,IAHC,CAFb;AAOAgV,QAAAA,cAAc,CAAC,KAAD,CAAd;AACD,OAhCH;AAiCD,KAlEH;AAmED,GApEQ,EAoEN,EApEM,CAAT;AAqEAlW,EAAAA,SAAS,CAAC,YAAM;AACd4J,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,uBAAhB,uBAA2D;AAC9DC,MAAAA,MAAM,OADwD;AAE9DC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX,CADR;AAEP,wBAAgB;AAFT;AAFqD,KAA3D,CAAL,CAOGgK,IAPH,CAOQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KAPR,EAQGF,IARH,CAQQ,UAACG,IAAD,EAAU;AACdvH,MAAAA,SAAS,CAACuH,IAAI,CAACS,IAAN,CAAT;AACD,KAVH;AAWD,GAZQ,EAYN,EAZM,CAAT;AAaAnL,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIqX,WAAW,CAACH,oBAAZ,KAAqC,EAAzC,EAA6C;AAC3CtN,MAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,gDACyEsN,WAAW,CAACH,oBADrF,GAEH;AACElN,QAAAA,MAAM,OADR;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,OAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACd2M,QAAAA,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,GACIgB,aAAa,CAAC,CAACxN,IAAI,CAACS,IAAN,CAAD,CADjB,GAEI+M,aAAa,CAACxN,IAAI,CAACS,IAAL,CAAUA,IAAX,CAFjB;AAGD,OAdH;AAeD;AACF,GAlBQ,EAkBN,CAACkM,WAAD,CAlBM,CAAT;AAmBArX,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIuY,kBAAkB,KAAK,CAAC,CAA5B,EAA+B;AAC7BT,MAAAA,4BAA4B,CAAC,IAAD,CAA5B;AACAlO,MAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,yDACkFsN,WAAW,CAACF,YAD9F,GAEH;AACEnN,QAAAA,MAAM,OADR;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,OAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACdoN,QAAAA,4BAA4B,CAAC,KAAD,CAA5B;AACAM,QAAAA,eAAe,CAAC1N,IAAI,CAACS,IAAL,CAAUpD,QAAX,CAAf;AACD,OAbH;AAcD;AACF,GAlBQ,EAkBN,CAACwQ,kBAAD,CAlBM,CAAT;AAmBAvY,EAAAA,SAAS,CAAC,YAAM;AACd4J,IAAAA,KAAK,WACAC,OAAO,CAACC,GAAR,CAAYC,uBADZ,0CACmEzJ,MADnE,kBAEH;AACE0J,MAAAA,MAAM,OADR;AAEEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEC,IAAI,CAACC,KAAL,CAAW7J,SAAX;AADR;AAFX,KAFG,CAAL,CASGgK,IATH,CASQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KATR,EAUGF,IAVH,CAUQ,UAACG,IAAD,EAAU;AACdoL,MAAAA,UAAU,CAACpL,IAAI,CAACS,IAAL,CAAUsF,YAAV,CAAuBC,MAAvB,CAA8BhG,IAAI,CAACS,IAAL,CAAUwF,gBAAxC,CAAD,CAAV;AACD,KAZH;AAaD,GAdQ,EAcN,EAdM,CAAT;AAeA,sBACE,QAAC,MAAD;AACE,IAAA,EAAE,EAAEvQ,EADN;AAEE,IAAA,QAAQ,EAAEqU,QAFZ;AAGE,IAAA,GAAG,EAAElU,SAHP;AAIE,IAAA,OAAO,EAAEsU,OAJX;AAKE,IAAA,WAAW,EAAEL,WALf;AAAA,4BAOE;AACE,MAAA,SAAS,EAAC,+CADZ;AAEE,MAAA,EAAE,EAAC,qBAFL;AAAA,8BAIE;AAAK,QAAA,SAAS,EAAC,gCAAf;AAAA,+BACE,QAAC,MAAD;AAAQ,UAAA,sBAAsB,EAAC,sBAA/B;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,uEAAf;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,mBAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,eAAf;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAI,kBAAA,SAAS,EAAC,wCAAd;AAAA,6BACGhU,QAAQ,CAACa,MADZ,SACuBb,QAAQ,CAACQ,eAAT,CAAyBE,IADhD;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAOGP,UAAU,GAAG,IAAH,gBACT;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAC,wBAAf;AAAA,0CACE;AAAG,oBAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,EAEGgX,YAAY,gBACX;AACE,oBAAA,KAAK,EAAE;AAAEvP,sBAAAA,KAAK;AAAP,qBADT;AAEE,oBAAA,WAAW,EAAC,2BAFd;AAGE,oBAAA,YAAY,EACV5H,QAAQ,CAACgF,YAAT,KAA0B,CAA1B,IACAhF,QAAQ,CAACgF,YAAT,KAA0B,IAD1B,GAEI,IAFJ,GAGIhF,QAAQ,CAACgF,YAPjB;AASE,oBAAA,QAAQ,EAAE,kBAAClD,KAAD,EAAW;AACnBkV,sBAAAA,gBAAgB,CAAC,UAACnP,IAAD,EAAU;AACzB,4BAAI/F,KAAK,KAAK,CAAd,EAAiB;AACf,iCAAO,KAAP;AACD,yBAFD,MAEO;AACL,iCAAO,IAAP;AACD;AACF,uBANe,CAAhB;AAOAgV,sBAAAA,cAAc,iCACTD,WADS;AAEZ7R,wBAAAA,YAAY,EAAElD;AAFF,yBAAd;AAIAoV,sBAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,sBAAAA,eAAe,CAAC,KAAD,CAAf;AACD,qBAvBH;AAAA,4CAyBE,gBAAQ,MAAR;AAAe,sBAAA,KAAK,EAAE,CAAtB;AAAA,6CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,6BAzBF,eA4BE,gBAAQ,MAAR;AAAe,sBAAA,KAAK,EAAE,CAAtB;AAAA,6CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,6BA5BF,eA+BE,gBAAQ,MAAR;AAAe,sBAAA,KAAK,EAAE,CAAtB;AAAA,6CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,6BA/BF;AAAA;AAAA;AAAA;AAAA;AAAA,2BADW,GAoCT,IAtCN;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAyCE;AAAK,kBAAA,SAAS,EAAC,mBAAf;AAAA,0CACE;AAAG,oBAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,EAEGd,cAAc,gBACb;AACE,oBAAA,KAAK,EAAE;AAAE1O,sBAAAA,KAAK;AAAP,qBADT;AAEE,oBAAA,WAAW,EAAC,yBAFd;AAGE,oBAAA,YAAY,EACV5H,QAAQ,CAAC+E,gBAAT,KAA8B,CAA9B,IACA/E,QAAQ,CAAC+E,gBAAT,KAA8B,IAD9B,GAEI,IAFJ,GAGI/E,QAAQ,CAAC+E,gBAPjB;AASE,oBAAA,QAAQ,EAAE,kBAACjD,KAAD,EAAW;AACnBmU,sBAAAA,UAAU,CAACnU,KAAD,CAAV;AACAuU,sBAAAA,eAAe,CAAC,IAAD,CAAf;AACAE,sBAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD,qBAbH;AAAA,4CAeE,gBAAQ,MAAR;AAAe,sBAAA,KAAK,EAAE,CAAtB;AAAA,6CACE;AAAK,wBAAA,SAAS,EAAC,8BAAf;AAAA,gDACE;AAAK,0BAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AAAG,0BAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,6BAfF,eAqBE,gBAAQ,MAAR;AAAe,sBAAA,KAAK,EAAE,CAAtB;AAAA,6CACE;AAAK,wBAAA,SAAS,EAAC,8BAAf;AAAA,gDACE;AAAK,0BAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AAAG,0BAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,6BArBF,eA2BE,gBAAQ,MAAR;AAAe,sBAAA,KAAK,EAAE,CAAtB;AAAA,6CACE;AAAK,wBAAA,SAAS,EAAC,8BAAf;AAAA,gDACE;AAAK,0BAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AAAG,0BAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,6BA3BF;AAAA;AAAA;AAAA;AAAA;AAAA,2BADa,GAmCX,IArCN;AAAA;AAAA;AAAA;AAAA;AAAA,yBAzCF;AAAA,8BARJ;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eA4FE;AAAK,cAAA,SAAS,EAAC,6BAAf;AAAA,sCACE;AACE,gBAAA,KAAK,EAAE;AAAEjL,kBAAAA,WAAW;AAAb,iBADT;AAEE,gBAAA,OAAO,EAAE,mBAAM;AACbuK,kBAAAA,aAAa,CAAC,IAAD,CAAb;AACD,iBAJH;AAKE,gBAAA,IAAI,EAAC,OALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAUE;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,IAAI,EAAC,OAFP;AAGE,gBAAA,OAAO,EAAE,mBAAM;AACb3I,kBAAAA,cAAc,CAAC,IAAD,CAAd;AACD,iBALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,qBA5FF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,eAJF,eAyHE;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,iCACE;AACE,YAAA,WAAW,QADb;AAEE,YAAA,gBAAgB,EAAEgH,SAFpB;AAGE,YAAA,UAAU,EAAE,oBAAChN,GAAD,EAAMsD,CAAN,EAAY;AACtB,kBAAItD,GAAG,KAAK,UAAZ,EAAwB;AACtB+Q,gBAAAA,kBAAkB,CAAC,UAACpQ,IAAD;AAAA,yBAAUA,IAAI,GAAG,CAAjB;AAAA,iBAAD,CAAlB;AACD;AACF,aAPH;AAAA,oCASE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,UAAb;AAAA,qCACE,QAAC,QAAD;AACE,gBAAA,MAAM,EAAE/H,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,KAAK,EAAEC,KAJT;AAKE,gBAAA,MAAM,EAAEC,MALV;AAME,gBAAA,UAAU,EAAEC;AANd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBATF,eAmBE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,kBAAb;AAAA,qCACE,QAAC,eAAD;AACE,gBAAA,MAAM,EAAEL,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,YAAY,EAAEwC,YAJhB;AAKE,gBAAA,WAAW,EAAEC,WALf;AAME,gBAAA,MAAM,EAAEC,MANV;AAOE,gBAAA,SAAS,EAAEC;AAPb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBAnBF,eA8BE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,cAAb;AAAA,qCACE,QAAC,YAAD;AACE,gBAAA,MAAM,EAAE7C,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBA9BF,eAqCE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,aAAb;AAAA,qCACE,QAAC,WAAD;AACE,gBAAA,MAAM,EAAEF,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,UAAU,EAAEG;AAJd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBArCF,eA6CE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,UAAb;AAAA,qCACE,QAAC,QAAD;AACE,gBAAA,MAAM,EAAEL,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,YAAY,EAAEwC,YAJhB;AAKE,gBAAA,eAAe,EAAEuO;AALnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBA7CF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBADF,eA0DE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,iCACE;AAAM,YAAA,WAAW,OAAjB;AAA0B,YAAA,gBAAgB,EAAEmD,SAA5C;AAAA,oCACE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,UAAb;AAAA,qCACE,QAAC,QAAD;AACE,gBAAA,MAAM,EAAEpU,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,KAAK,EAAEC,KAJT;AAKE,gBAAA,MAAM,EAAEC,MALV;AAME,gBAAA,UAAU,EAAEC;AANd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBADF,eAWE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,kBAAb;AAAA,qCACE,QAAC,eAAD;AACE,gBAAA,MAAM,EAAEL,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,YAAY,EAAEwC,YAJhB;AAKE,gBAAA,WAAW,EAAEC,WALf;AAME,gBAAA,MAAM,EAAEC,MANV;AAOE,gBAAA,SAAS,EAAEC;AAPb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBAXF,eAsBE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,cAAb;AAAA,qCACE,QAAC,YAAD;AACE,gBAAA,MAAM,EAAE7C,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBAtBF,eA6BE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,aAAb;AAAA,qCACE,QAAC,WAAD;AACE,gBAAA,MAAM,EAAEF,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,UAAU,EAAEG;AAJd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBA7BF,eAqCE,QAAC,OAAD;AAAS,cAAA,GAAG,EAAC,UAAb;AAAA,qCACE,QAAC,QAAD;AACE,gBAAA,MAAM,EAAEL,MADV;AAEE,gBAAA,SAAS,EAAEC,SAFb;AAGE,gBAAA,QAAQ,EAAEC,QAHZ;AAIE,gBAAA,YAAY,EAAEwC,YAJhB;AAKE,gBAAA,eAAe,EAAEuO;AALnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBArCF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBA1DF;AAAA;AAAA;AAAA;AAAA;AAAA,eAzHF;AAAA;AAAA;AAAA;AAAA;AAAA,aAPF,eA6OE;AACE,MAAA,KAAK,eACH;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,mBAAd;AAAA,oDAC8B/Q,QAAQ,CAAC8E,cADvC;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE;AAAA,oCACE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,OAAO,EAAE,mBAAM;AACboS,gBAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,gBAAAA,eAAe,CAAC,IAAD,CAAf;AACD,eALH;AAME,cAAA,KAAK,EAAE;AAAE9L,gBAAAA,WAAW;AAAb,eANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAWE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,QAAQ,EAAEyL,aAFZ;AAGE,cAAA,OAAO,EAAEwB,eAHX;AAIE,cAAA,OAAO,EAAEhB,YAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAXF;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ;AA8BE,MAAA,OAAO,EAAEN,UA9BX;AA+BE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,QAAAA,eAAe,CAAC,IAAD,CAAf;AACD,OAlCH;AAmCE,MAAA,MAAM,EAAE,IAnCV;AAoCE,MAAA,KAAK,EAAE,GApCT;AAAA,6BAsCE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAA,8CAAe,oBAAf;AAAA,kCACE;AAAA,gDAAa,MAAb;AAAA,yDACmB;AAAA,kDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,qBADnB;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE;AAAQ,YAAA,QAAQ,MAAhB;AAAiB,YAAA,YAAY,EAAEP,WAAW,CAAC7R,YAA3C;AAAA,oCACE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF,eAGE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAmBG6R,WAAW,CAAC7R,YAAZ,KAA6B,CAA7B,gBACC;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAA,gDAAe,oBAAf;AAAA,oCACE;AAAA,kDAAa,MAAb;AAAA,yDACiB;AAAA,oDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,uBADjB;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAIE;AACE,cAAA,QAAQ,EAAE,kBAAClD,KAAD,EAAW;AACnBgV,gBAAAA,cAAc,iCACTD,WADS;AAEZH,kBAAAA,oBAAoB,EAAE5U,KAFV;AAGZ8U,kBAAAA,mBAAmB,EAAE,IAHT;AAIZD,kBAAAA,YAAY,EAAE;AAJF,mBAAd;AAMAK,gBAAAA,gBAAgB,CAAC,IAAD,CAAhB;;AACA,oBAAIlV,KAAK,KAAK,CAAd,EAAiB;AACfgW,kBAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACD;AACF,eAZH;AAAA,sCAcE,gBAAQ,MAAR;AAAe,gBAAA,KAAK,EAAE,CAAC,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAdF,eAeE,gBAAQ,MAAR;AAAe,gBAAA,KAAK,EAAE,CAAC,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAfF,eAgBE,gBAAQ,MAAR;AAAe,gBAAA,KAAK,EAAE,CAAC,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAgCE;AAAA,gDAAe,yBAAf;AAAA,oCACE;AAAA,kDAAa,MAAb;AAAA,kCACQjB,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,IAA2C,OADnD,EAC4D,GAD5D,EAEGG,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,IAA2C,WAF9C,EAE2D,GAF3D,EAGGG,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,IAA2C,SAH9C,EAGyD,GAHzD,eAIE;AAAA,oDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,uBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAOGG,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,gBACC;AACE,cAAA,QAAQ,EAAE,CAAClU,YAAY,CAAC2S,cAAd,CADZ;AAEE,cAAA,uBAAuB,EAAE,CAAC,CAAD,CAF3B;AAGE,cAAA,QAAQ,EAAE,kBAACrT,KAAD,EAAW;AACnBgV,gBAAAA,cAAc,iCACTD,WADS;AAEZF,kBAAAA,YAAY,EAAE7U;AAFF,mBAAd;AAIA+U,gBAAAA,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,GACIsB,qBAAqB,CAAC,UAACnQ,IAAD;AAAA,yBAAUA,IAAI,GAAG,CAAjB;AAAA,iBAAD,CADzB,GAEI,IAFJ;AAGAgP,gBAAAA,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,GACIoB,mBAAmB,CAAC,IAAD,CADvB,GAEI,IAFJ;AAGAd,gBAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;AAfH;AAAA;AAAA;AAAA;AAAA,qBADD,gBAmBC;AACE,cAAA,KAAK,EAAEH,WAAW,CAACF,YADrB;AAEE,cAAA,QAAQ,EAAE,kBAAC7U,KAAD,EAAW;AACnBgV,gBAAAA,cAAc,iCACTD,WADS;AAEZF,kBAAAA,YAAY,EAAE7U;AAFF,mBAAd;AAIAkV,gBAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,eARH;AAAA,yBAUGH,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,IACCe,UAAU,CAACtW,GAAX,CAAe,UAACC,GAAD,EAAMC,GAAN;AAAA,oCACb,gBAAQ,MAAR;AAAe,kBAAA,KAAK,EAAED,GAAG,CAACwD,EAA1B;AAAA,4BAA+BxD,GAAG,CAACV;AAAnC;AAAA;AAAA;AAAA;AAAA,yBADa;AAAA,eAAf,CAXJ,EAcGmW,WAAW,CAACH,oBAAZ,KAAqC,CAAC,CAAtC,IACCe,UAAU,CAACtW,GAAX,CAAe,UAACC,GAAD,EAAMC,GAAN;AAAA,oCACb,gBAAQ,MAAR;AAAe,kBAAA,KAAK,EAAED,GAAG,CAACwD,EAA1B;AAAA,4BAA+BxD,GAAG,CAACV;AAAnC;AAAA;AAAA;AAAA;AAAA,yBADa;AAAA,eAAf,CAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,qBA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAhCF,EA6FGmW,WAAW,CAACF,YAAZ,KAA6B,CAAC,CAA9B,IAAmCkB,gBAAgB,KAAK,IAAxD,gBACC;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AACE,cAAA,OAAO,EAAER,yBADX;AAEE,cAAA,QAAQ,EAAEM,YAFZ;AAGE,cAAA,QAAQ,EAAE,kBAAC7V,KAAD,EAAW;AACnBgV,gBAAAA,cAAc,iCACTD,WADS;AAEZD,kBAAAA,mBAAmB,EAAE9U;AAFT,mBAAd;AAID;AARH;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,mBADD,GAcG,IA3GN;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,GA8GG,IAjIN,eAkIE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE,eAAO,QAAP;AACE,YAAA,IAAI,EAAE,CADR;AAEE,YAAA,WAAW,EAAC,gBAFd;AAGE,YAAA,QAAQ,EAAE,kBAAC0I,CAAD,EAAO;AACfsM,cAAAA,cAAc,iCACTD,WADS;AAEZxR,gBAAAA,KAAK,EAAEmF,CAAC,CAACC,MAAF,CAAS3I;AAFJ,iBAAd;AAID;AARH;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAlIF;AAAA;AAAA;AAAA;AAAA;AAAA;AAtCF;AAAA;AAAA;AAAA;AAAA,aA7OF,eAoaE;AACE,MAAA,KAAK,eACH;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,mBAAd;AAAA,kDAC4B9B,QAAQ,CAAC8E,cADrC;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE;AAAA,oCACE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,OAAO,EAAE,mBAAM;AACbuR,gBAAAA,eAAe,CAAC,KAAD,CAAf;AACAE,gBAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACD,eALH;AAME,cAAA,KAAK,EAAE;AAAEjL,gBAAAA,WAAW;AAAb,eANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAWE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,OAAO,EAAEgN,iBAFX;AAGE,cAAA,OAAO,EAAE9B,cAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAXF;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ;AA6BE,MAAA,OAAO,EAAEJ,YA7BX;AA8BE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,eAAe,CAAC,KAAD,CAAf;AACAE,QAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACD,OAjCH;AAkCE,MAAA,MAAM,EAAE,IAlCV;AAmCE,MAAA,KAAK,EAAE,GAnCT;AAAA,6BAqCE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAA,8CAAe,oBAAf;AAAA,kCACE;AAAA,gDAAa,MAAb;AAAA,uDACiB;AAAA,kDAAgB;AAAhB;AAAA;AAAA;AAAA;AAAA,qBADjB;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE;AAAQ,YAAA,QAAQ,MAAhB;AAAiB,YAAA,YAAY,EAAEP,OAA/B;AAAA,oCACE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAtB;AAAA,qCACE;AAAA,oDAAa,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBADF,eAIE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAtB;AAAA,qCACE;AAAA,oDAAa,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBAJF,eAOE,gBAAQ,MAAR;AAAe,cAAA,KAAK,EAAE,CAAtB;AAAA,qCACE;AAAA,oDAAa,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAyBE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE,eAAO,QAAP;AACE,YAAA,IAAI,EAAE,CADR;AAEE,YAAA,WAAW,EAAC,gBAFd;AAGE,YAAA,QAAQ,EAAE,kBAACxL,CAAD,EAAO;AACf2L,cAAAA,cAAc,CAAC3L,CAAC,CAACC,MAAF,CAAS3I,KAAV,CAAd;AACD;AALH;AAAA;AAAA;AAAA;AAAA,mBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA;AArCF;AAAA;AAAA;AAAA;AAAA,aApaF,eA8eE;AACE,MAAA,KAAK,eACH;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,mBAAd;AAAA,2CACqB9B,QAAQ,CAAC8E,cAD9B;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE;AAAA,oCACE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,OAAO,EAAE,mBAAM;AACb+Q,gBAAAA,aAAa,CAAC,KAAD,CAAb;AACD,eAJH;AAKE,cAAA,KAAK,EAAE;AAAEvK,gBAAAA,WAAW;AAAb,eALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAUE;AACE,cAAA,IAAI,EAAC,SADP;AAEE,cAAA,QAAQ,EAAEjG,KAAK,KAAK,EAFtB;AAGE,cAAA,OAAO,EAAE8S,eAHX;AAIE,cAAA,OAAO,EAAErC,YAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAVF;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ;AA6BE,MAAA,OAAO,EAAEF,UA7BX;AA8BE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,aAAa,CAAC,KAAD,CAAb;AACD,OAhCH;AAiCE,MAAA,MAAM,EAAE,IAjCV;AAkCE,MAAA,KAAK,EAAE,GAlCT;AAAA,6BAoCE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE,eAAO,QAAP;AACE,UAAA,IAAI,EAAE,CADR;AAEE,UAAA,WAAW,EAAC,gBAFd;AAGE,UAAA,QAAQ,EAAE,kBAACrL,CAAD,EAAO;AACfmL,YAAAA,QAAQ,CAACnL,CAAC,CAACC,MAAF,CAAS3I,KAAV,CAAR;AACD;AALH;AAAA;AAAA;AAAA;AAAA,iBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AApCF;AAAA;AAAA;AAAA;AAAA,aA9eF,eA6hBE;AACE,MAAA,KAAK,eACH;AAAI,QAAA,SAAS,EAAC,eAAd;AAAA,gEAC2C9B,QAAQ,CAAC8E,cADpD,QACsE,GADtE,EAEG9E,QAAQ,CAACa,MAFZ;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ;AAOE,MAAA,OAAO,EAAEoM,WAPX;AAQE,MAAA,QAAQ,EAAE,oBAAM;AACdC,QAAAA,cAAc,CAAC,KAAD,CAAd;AACD,OAVH;AAWE,MAAA,MAAM,EAAC,IAXT;AAYE,MAAA,UAAU,EAAC,OAZb;AAaE,MAAA,IAAI,EAAEgL,gBAbR;AAcE,MAAA,aAAa,EAAE;AAAEzL,QAAAA,OAAO,EAAEU;AAAX,OAdjB;AAeE,MAAA,KAAK,EAAE,GAfT;AAAA,6BAiBE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,4BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE;AAAK,YAAA,SAAS,EAAC,4BAAf;AAAA,sBACGnN,QAAQ,CAACmL,eAAT,CAAyB7C,MAAzB,KAAoC,CAApC,gBACC;AAAG,cAAA,SAAS,EAAC,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADD,gBAGC;AAAA,wBACGtI,QAAQ,CAACmL,eAAT,CAAyBhK,GAAzB,CAA6B,UAACsX,QAAD,EAAWC,QAAX;AAAA,oCAC5B;AAAA,gDACI;AAAA,8BAASD,QAAQ,CAAC3T;AAAlB;AAAA;AAAA;AAAA;AAAA,2BADJ;AAAA,mBAAQ4T,QAAR;AAAA;AAAA;AAAA;AAAA,yBAD4B;AAAA,eAA7B;AADH;AAJJ;AAAA;AAAA;AAAA;AAAA,mBAJF,eAiBE;AAAG,YAAA,SAAS,EAAC,4BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAjBF,eAoBE;AAAI,YAAA,SAAS,EAAC,cAAd;AAAA,sBACGrD,OAAO,CAAC/M,MAAR,KAAmB,CAAnB,gBACC;AAAG,cAAA,SAAS,EAAC,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADD,GAGC+M,OAAO,CAAClU,GAAR,CAAY,UAACwX,MAAD,EAASC,MAAT;AAAA,kCACV;AAAA,gCACI,GADJ,eAEE;AAAA,6BACGD,MAAM,CAACjJ,IADV,SACmBiJ,MAAM,CAAChJ,qBAD1B;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF;AAAA,iBAASiJ,MAAT;AAAA;AAAA;AAAA;AAAA,uBADU;AAAA,aAAZ;AAJJ;AAAA;AAAA;AAAA;AAAA,mBApBF,eAkCE;AAAG,YAAA,SAAS,EAAC,yCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAlCF;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAwCE;AAAA;AAAA;AAAA;AAAA,iBAxCF;AAAA;AAAA;AAAA;AAAA;AAAA;AAjBF;AAAA;AAAA;AAAA;AAAA,aA7hBF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AA4lBD,CA/9BD;;IAAM7E,U;UAEOxU,S;;;MAFPwU,U;;AAihCN,eAAeA,UAAf","sourcesContent":["import {\n  CloseCircleOutlined,\n  DeleteOutlined,\n  DownOutlined,\n  ExclamationCircleOutlined,\n  SearchOutlined,\n  UpOutlined,\n} from \"@ant-design/icons\";\nimport {\n  Button,\n  Empty,\n  Input,\n  Modal,\n  Popover,\n  Select,\n  Spin,\n  Table,\n  Tabs,\n  Timeline,\n  Tooltip,\n  TreeSelect,\n  notification,\n} from \"antd\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Sticky from \"wil-react-sticky\";\n\nimport Layout from \"../../../components/layout-dashboard2\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst Overview = ({\n  itemid,\n  initProps,\n  maindata,\n  manuf,\n  vendor,\n  praloading,\n}) => {\n  const rt = useRouter();\n  //useState\n  const [invrelations2, setinvrelations2] = useState({});\n\n  //helper\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"border-b flex justify-between p-5 mb-8\">\n        <h1 className=\"font-bold text-xl my-auto\">Overview</h1>\n        {praloading ? null : (\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            onClick={() => {\n              rt.push(`/items/update/${itemid}`);\n            }}\n          >\n            Ubah\n          </Button>\n        )}\n      </div>\n      {praloading ? (\n        <Spin />\n      ) : (\n        <div className=\"mb-8 mx-5 p-5 w-9/12 border shadow-md rounded-md flex flex-col\">\n          {/* <div className=\"flex flex-col mb-5\">\n                            <h1 className=\" text-sm font-semibold mb-0\">Nama Item:</h1>\n                            <p className=\"mb-0 text-sm\">{maindata.mig_id} - {maindata.model_inventory.name}</p>\n                        </div> */}\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">Model:</h1>\n            {maindata.model_inventory.deleted_at !== null ? (\n              <div className=\"flex items-center\">\n                <p className=\"mb-0 mr-1\">{maindata.model_inventory.name}</p>\n                <Tooltip\n                  placement=\"right\"\n                  title=\"Model telah dihapus, segera lakukan pengubahan Model!\"\n                >\n                  <ExclamationCircleOutlined\n                    style={{ color: `brown` }}\n                  ></ExclamationCircleOutlined>\n                </Tooltip>\n              </div>\n            ) : (\n              <p className=\"mb-0 text-sm\">{maindata.model_inventory.name}</p>\n            )}\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">Asset Type:</h1>\n            {maindata.model_inventory.asset.deleted_at !== null ? (\n              <div className=\"flex items-center\">\n                <p className=\"mb-0 mr-1\">\n                  {maindata.model_inventory.asset.name}\n                </p>\n                <Tooltip\n                  placement=\"right\"\n                  title=\"Asset Type telah dihapus, segera lakukan pengubahan Asset Type!\"\n                >\n                  <ExclamationCircleOutlined\n                    style={{ color: `brown` }}\n                  ></ExclamationCircleOutlined>\n                </Tooltip>\n              </div>\n            ) : (\n              <p className=\"mb-0 text-sm\">\n                {maindata.model_inventory.asset.name}\n              </p>\n            )}\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">MIG ID:</h1>\n            <p className=\"mb-0 text-sm\">{maindata.mig_id}</p>\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">Serial Number:</h1>\n            <p className=\"mb-0 text-sm\">\n              {maindata.serial_number === \"\" || maindata.serial_number === null\n                ? \"-\"\n                : maindata.serial_number}\n            </p>\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">Manufacturer:</h1>\n            {\n              // invrelations.manufacturers.filter(docfil => docfil.id === maindata.manufacturer_id)[0].deleted_at !== null\n              manuf.isnull === false ? (\n                <div className=\"flex items-center\">\n                  <p className=\"mb-0 mr-1\">{manuf.name}</p>\n                  <Tooltip\n                    placement=\"right\"\n                    title=\"Manufacturer telah dihapus, segera lakukan pengubahan Manufacturer!\"\n                  >\n                    <ExclamationCircleOutlined\n                      style={{ color: `brown` }}\n                    ></ExclamationCircleOutlined>\n                  </Tooltip>\n                </div>\n              ) : (\n                <p className=\"mb-0 text-sm\">{manuf.name}</p>\n              )\n            }\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">Vendor:</h1>\n            <p className=\"mb-0 text-sm\">\n              {maindata.vendor_id === null ? \"-\" : vendor}\n            </p>\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">Location:</h1>\n            {maindata.is_consumable === true ? (\n              maindata.quantities.map((doc, idx) => (\n                <p className=\"mb-0 text-sm\">\n                  {idx + 1}. {doc.name} - {doc.quantity}\n                </p>\n              ))\n            ) : (\n              <p className=\"mb-0 text-sm\">\n                {maindata.location === null\n                  ? \"-\"\n                  : maindata.location_inventory.name}\n              </p>\n            )}\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\" text-sm font-semibold mb-0\">Deskripsi:</h1>\n            <p className=\"mb-0 text-sm\">\n              {maindata.deskripsi === \"\" || maindata.deskripsi === null\n                ? \"-\"\n                : maindata.deskripsi}\n            </p>\n          </div>\n          <hr />\n          {maindata.additional_attributes.map((doccolumns, idxcolumns) => {\n            return (\n              <div\n                key={idxcolumns}\n                className={`flex flex-col mb-5 ${\n                  idxcolumns === 0 ? `mt-5` : ``\n                }`}\n              >\n                <h1 className=\" text-sm font-semibold mb-0\">\n                  {doccolumns.name}:\n                </h1>\n                <p className=\"mb-0 text-sm\">\n                  {doccolumns.data_type === \"dropdown\" ||\n                  doccolumns.data_type === \"checkbox\" ||\n                  doccolumns.data_type === \"date\" ? (\n                    <>\n                      {doccolumns.data_type === \"dropdown\" && (\n                        <>{doccolumns.value.opsi[doccolumns.value.default]}</>\n                      )}\n                      {doccolumns.data_type === \"checkbox\" && (\n                        <>\n                          {doccolumns.value.opsi\n                            .filter((_, idxfil) => {\n                              return doccolumns.value.default.includes(idxfil);\n                            })\n                            .join(\", \")}\n                        </>\n                      )}\n                      {doccolumns.data_type === \"date\" && (\n                        <>\n                          {moment(doccolumns.value).locale(\"id\").format(\"LL\")}\n                        </>\n                      )}\n                    </>\n                  ) : (\n                    <>{doccolumns.value}</>\n                  )}\n                </p>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\nconst KonfigurasiPart = ({\n  initProps,\n  itemid,\n  invrelations,\n  maindata,\n  praloading2,\n  models,\n  setmodels,\n}) => {\n  const rt = useRouter();\n\n  //usestate\n  const [mainpartdata, setmainpartdata] = useState([]);\n  const [assetdata, setassetdata] = useState([]);\n  const [praloadingpart, setpraloadingpart] = useState(true);\n  const [events, setevents] = useState(\"\");\n  const [datatable, setdatatable] = useState([]);\n  const [datatable2, setdatatable2] = useState([]);\n  const [datatable3, setdatatable3] = useState([]);\n  const [namasearchact, setnamasearchact] = useState(false);\n  const [namavalue, setnamavalue] = useState(\"\");\n  const [assettypefilteract, setassettypefilteract] = useState(false);\n  const [assettypevalue, setassettypevalue] = useState(\"\");\n  const [modelfilteract, setmodelfilteract] = useState(false);\n  const [modelvalue, setmodelvalue] = useState(\"\");\n  const [datatrigger, setdatatrigger] = useState(0);\n  //changed dan removed\n  const [datareplacements, setdatareplacements] = useState([]);\n  const [popover, setpopover] = useState(false);\n  //changed\n  const [datachanged, setdatachanged] = useState({\n    id: null,\n    model_id: null,\n    inventory_name: \"\",\n    mig_id: \"\",\n    status_condition: {\n      id: null,\n      name: \"\",\n    },\n    status_usage: {\n      id: null,\n      name: \"\",\n    },\n    deleted_at: null,\n    model_inventory: {\n      id: null,\n      name: \"\",\n      asset_id: null,\n      deleted_at: null,\n      asset: {\n        id: null,\n        name: \"\",\n        deleted_at: \"\",\n      },\n    },\n  });\n  const [dataApichanged, setdataApichanged] = useState({\n    id: 0,\n    replacement_id: 0,\n    notes: \"\",\n  });\n  const [modalchanged, setmodalchanged] = useState(false);\n  const [disabledchanged, setdisabledchanged] = useState(true);\n  const [loadingchanged, setloadingchanged] = useState(false);\n  const [triggerchanged, settriggerchanged] = useState(-1);\n  //removed\n  const [dataremoved, setdataremoved] = useState(-1);\n  const [dataApiremoved, setdataApiremoved] = useState({\n    id: 0,\n    inventory_part_id: 0,\n    notes: \"\",\n  });\n  const [modalremoved, setmodalremoved] = useState(false);\n  const [disabledremoved, setdisabledremoved] = useState(true);\n  const [loadingremoved, setloadingremoved] = useState(false);\n  const [fetchingmodel, setfetchingmodel] = useState(false);\n  const [backupmodels, setbackupmodels] = useState(models);\n\n  const columns = [\n    // {\n    //     title: 'Nama Item',\n    //     dataIndex: 'inventory_name',\n    //     key: 'inventory_name',\n    // },\n    {\n      title: \"MIG ID\",\n      dataIndex: \"mig_id\",\n      key: \"mig_id\",\n    },\n    {\n      title: \"Serial Number\",\n      dataIndex: \"serial_number\",\n      key: \"serial_number\",\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>{record.serial_number === null ? \"-\" : record.serial_number}</>\n          ),\n        };\n      },\n    },\n    {\n      title: \"Model\",\n      dataIndex: \"model_name\",\n      key: \"model_name\",\n      render: (text, record, index) => {\n        return {\n          children: <>{record.model_inventory.name}</>,\n        };\n      },\n    },\n    {\n      title: \"Asset Type\",\n      dataIndex: \"asset_name\",\n      key: \"asset_name\",\n      render: (text, record, index) => {\n        return {\n          children: <>{record.model_inventory.asset.asset_name}</>,\n        };\n      },\n    },\n    {\n      title: \"\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\",\n      dataIndex: \"actionss\",\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>\n              {events === record.id ? (\n                <Popover\n                  visible={popover}\n                  onVisibleChange={() => {\n                    setpopover(true);\n                  }}\n                  style={{ padding: `0px`, margin: `0px` }}\n                  placement=\"bottomLeft\"\n                  trigger=\"click\"\n                  content={\n                    <div className=\"flex flex-col\">\n                      <div\n                        className=\"flex justify-center cursor-pointer\"\n                        onClick={() => setpopover(false)}\n                      >\n                        <CloseCircleOutlined\n                          style={{ color: `red`, fontSize: `1.1rem` }}\n                        />\n                      </div>\n                      <Button\n                        type=\"text\"\n                        style={{ width: `100%` }}\n                        onClick={() => {\n                          setdataremoved(record);\n                          setdataApiremoved({\n                            ...dataApiremoved,\n                            id: mainpartdata.id,\n                            inventory_part_id: record.id,\n                          });\n                          setmodalremoved(true);\n                          setpopover(false);\n                        }}\n                      >\n                        Keluarkan Part\n                      </Button>\n                      <Button\n                        type=\"text\"\n                        style={{ width: `100%` }}\n                        onClick={() => {\n                          setdatachanged(record);\n                          setmodalchanged(true);\n                          setpopover(false);\n                          settriggerchanged((prev) => prev + 1);\n                        }}\n                      >\n                        Gantikan Part\n                      </Button>\n                      {/* <div className=\"cursor-pointer hover:bg-gray-300 w-full p-4\">Keluarkan Part</div>\n                                            <div className=\"cursor-pointer hover:bg-gray-300 w-full p-4\">Gantikan Part</div> */}\n                    </div>\n                  }\n                >\n                  <div\n                    className=\"cursor-pointer\"\n                    onClick={() => setpopover(false)}\n                  >\n                    <CloseCircleOutlined\n                      style={{ color: `red`, fontSize: `1.5rem` }}\n                    />\n                  </div>\n                </Popover>\n              ) : null}\n            </>\n          ),\n        };\n      },\n    },\n  ];\n\n  //helper\n  //1 nya lagi ada di useEffect\n  const recursiveFlattenArr = (dataassets) => {\n    const result = [];\n    dataassets.forEach((item, idx) => {\n      result.push(item.id);\n      if (item.children) {\n        result.push(...recursiveFlattenArr(item.children));\n      }\n    });\n    return result;\n  };\n  function recursiveModifData(dataa) {\n    for (var i = 0; i < dataa.length; i++) {\n      dataa[i][\"key\"] = dataa[i].id;\n      dataa[i][\"value\"] = dataa[i].id;\n      dataa[i][\n        \"title\"\n      ] = `${dataa[i].mig_id} - ${dataa[i].model_inventory?.name}`;\n      dataa[i][\"children\"] = dataa[i].inventory_replacement_parts;\n      delete dataa[i].inventory_replacement_parts;\n      if (dataa[i].children.length > 0) {\n        recursiveModifData(dataa[i].children);\n      }\n    }\n    return dataa;\n  }\n\n  //handler\n  const assetPart = [];\n  const recursiveSearchPartFromAsset = (doc, assetid) => {\n    var arr = [];\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].model_inventory.asset.id === Number(assetid)) {\n        // continue\n        assetPart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push({\n            ...doc[i],\n            children: recursiveSearchPartFromAsset(doc[i].children, assetid),\n          });\n        } else {\n          arr.push({\n            ...doc[i],\n          });\n        }\n      }\n    }\n    return arr;\n  };\n  const modelPart = [];\n  const recursiveSearchPartFromModel = (doc, modelid) => {\n    var arr = [];\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].model_id === modelid) {\n        // continue\n        modelPart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push({\n            ...doc[i],\n            children: recursiveSearchPartFromModel(doc[i].children, modelid),\n          });\n        } else {\n          arr.push({\n            ...doc[i],\n          });\n        }\n      }\n    }\n    return arr;\n  };\n  const namePart = [];\n  const recursiveSearchPartFromName = (doc, name) => {\n    var arr = [];\n    for (var i = 0; i < doc.length; i++) {\n      if (doc[i].inventory_name.toLowerCase().includes(name.toLowerCase())) {\n        // continue\n        namePart.push(doc[i]);\n      } else {\n        if (doc[i].children) {\n          arr.push({\n            ...doc[i],\n            children: recursiveSearchPartFromName(doc[i].children, name),\n          });\n        } else {\n          arr.push({\n            ...doc[i],\n          });\n        }\n      }\n    }\n    return arr;\n  };\n  //deliver API\n  const handleReplacementItemPart = () => {\n    setloadingchanged(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/replaceInventoryPart`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(dataApichanged),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingchanged(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Item Part berhasil diganti\",\n            duration: 3,\n          });\n          setmodalchanged(false);\n          setdatatrigger((prev) => prev + 1);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleRemoveItemPart = () => {\n    setloadingremoved(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/removeInventoryPart`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(dataApiremoved),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingremoved(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Item Part berhasil dikeluarkan\",\n            duration: 3,\n          });\n          setmodalremoved(false);\n          setdatatrigger((prev) => prev + 1);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n\n  //search nama\n  const onChangeSearch = (e) => {\n    if (e.target.value === \"\") {\n      setdatatable(datatable3);\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n  //search asset type\n  const onChangeAssetType = (id) => {\n    if (typeof id === \"undefined\") {\n      setdatatable(datatable3);\n      setassettypefilteract(false);\n      setmodels(backupmodels);\n    } else {\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?rows=100&asset_id=${id}`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          res2.data.length === 0 ? setmodels([]) : setmodels(res2.data.data);\n        });\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  };\n  //search model\n  const onChangeModel = (idmodel) => {\n    if (typeof idmodel === \"undefined\") {\n      setdatatable(datatable3);\n      setmodelfilteract(false);\n    } else {\n      setmodelfilteract(true);\n      setmodelvalue(idmodel);\n    }\n  };\n  //finalClick\n  const onFinalClick = () => {\n    var datatemp = datatable2;\n    if (assettypefilteract) {\n      // const t = recursiveSearchPartFromAsset(datatemp, assettypevalue)\n      recursiveSearchPartFromAsset(datatemp, assettypevalue);\n      datatemp = assetPart;\n    }\n    if (modelfilteract) {\n      // const t = recursiveSearchPartFromModel(datatemp, modelvalue)\n      recursiveSearchPartFromModel(datatemp, modelvalue);\n      datatemp = modelPart;\n    }\n    if (namasearchact) {\n      // const t = recursiveSearchPartFromName(datatemp, namavalue)\n      recursiveSearchPartFromName(datatemp, namavalue);\n      datatemp = namePart;\n    }\n    setdatatable(datatemp);\n  };\n\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventory?id=${itemid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        return res2.data;\n      })\n      .then((res3) => {\n        const recursiveChangetoChildren = (rsc) => {\n          var res = [];\n          for (var i = 0; i < rsc.length; i++) {\n            rsc[i].key = rsc[i].id;\n            rsc[i].value = rsc[i].id;\n            rsc[i].title = `${rsc[i].mig_id} - ${rsc[i].model_inventory?.name}`;\n            rsc[i].children = rsc[i].inventory_parts;\n            delete rsc[i].inventory_parts;\n            if (rsc[i].children.length !== 0) {\n              res.push({\n                ...rsc[i],\n                children: recursiveChangetoChildren(rsc[i].children),\n              });\n            } else {\n              delete rsc[i].children;\n              res.push({\n                ...rsc[i],\n              });\n            }\n          }\n          return res;\n        };\n        const t = recursiveChangetoChildren(res3.inventory_parts);\n        setmainpartdata({\n          ...res3,\n          inventory_parts: t,\n        });\n        setdatatable(t);\n        setdatatable2(t);\n        setdatatable3(t);\n        setpraloadingpart(false);\n      });\n  }, [datatrigger]);\n  useEffect(() => {\n    if (triggerchanged !== -1) {\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryReplacements?id=${datachanged.model_inventory.asset_id}`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          const mapdata = recursiveModifData(res2.data);\n          setdatareplacements(mapdata);\n          if (mapdata.length === 0) {\n            setdisabledchanged(false);\n          }\n        });\n    }\n  }, [triggerchanged]);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setassetdata(res2.data);\n      });\n  }, []);\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"border-b flex justify-between p-5 mb-8\">\n        <h1 className=\"font-bold text-xl my-auto\">Konfigurasi Part</h1>\n        {praloading2 ? null : (\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            onClick={() => {\n              /*console.log(mainpartdata); console.log(dataremoved)*/ rt.push(\n                `/items/createpart/${itemid}?nama=${mainpartdata.mig_id}`\n              );\n            }}\n          >\n            Tambah\n          </Button>\n        )}\n      </div>\n      <div className=\"flex mb-5\">\n        {praloading2 ? null : (\n          <div className=\" w-full mr-1 grid grid-cols-12\">\n            <div className=\"col-span-5 mr-1\">\n              <Input\n                style={{ width: `100%`, marginRight: `0.5rem` }}\n                placeholder=\"Cari Nama Item\"\n                onChange={(e) => onChangeSearch(e)}\n                allowClear\n              ></Input>\n            </div>\n            <div className=\"col-span-3 mr-1\">\n              <TreeSelect\n                allowClear\n                dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                treeData={assetdata}\n                placeholder=\"Cari Asset Type\"\n                treeDefaultExpandAll\n                style={{ width: `100%` }}\n                onChange={(value, label, extra) => {\n                  if (typeof value === \"undefined\") {\n                    onChangeAssetType();\n                  } else {\n                    onChangeAssetType(extra.allCheckedNodes[0].node.props.id);\n                  }\n                }}\n              />\n            </div>\n            <div className=\"col-span-3 mr-1\">\n              <Select\n                showSearch\n                optionFilterProp=\"children\"\n                notFoundContent={fetchingmodel ? <Spin size=\"small\" /> : null}\n                onSearch={(value) => {\n                  setfetchingmodel(true);\n                  fetch(\n                    `${\n                      process.env.NEXT_PUBLIC_BACKEND_URL\n                    }/getFilterModels?name=${value !== \"\" ? value : \"\"}`,\n                    {\n                      method: `GET`,\n                      headers: {\n                        Authorization: JSON.parse(initProps),\n                      },\n                    }\n                  )\n                    .then((res) => res.json())\n                    .then((res2) => {\n                      setmodels(res2.data);\n                      setfetchingmodel(false);\n                    });\n                }}\n                filterOption={(input, opt) =>\n                  opt.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                }\n                placeholder=\"Cari Model\"\n                style={{ width: `100%` }}\n                allowClear\n                onChange={(value) => {\n                  if (typeof value === \"undefined\") {\n                    onChangeModel();\n                  } else {\n                    onChangeModel(value);\n                  }\n                }}\n              >\n                {models.map((docmodels, idxmodels) => {\n                  return (\n                    <Select.Option value={docmodels.id}>\n                      {docmodels.name}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            </div>\n            <div className=\" col-span-1\">\n              <Button\n                type=\"primary\"\n                style={{ width: `100%` }}\n                onClick={onFinalClick}\n              >\n                <SearchOutlined />\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n      <Table\n        loading={praloadingpart}\n        pagination={{ pageSize: 9 }}\n        scroll={{ x: 200 }}\n        dataSource={datatable}\n        columns={columns}\n        onRow={(record, rowIndex) => {\n          return {\n            onMouseOver: (event) => {\n              setevents(record.id);\n            },\n            onMouseLeave: (event) => {\n              setevents(0);\n            },\n          };\n        }}\n      ></Table>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">\n              Form Pergantian Part \"{datachanged.inventory_name}\"\n            </h1>\n            <div className=\"flex\">\n              <>\n                <Button\n                  type=\"default\"\n                  onClick={() => {\n                    setmodalchanged(false);\n                    setdataApichanged({\n                      ...dataApichanged,\n                      replacement_id: null,\n                      notes: \"\",\n                    });\n                  }}\n                  style={{ marginRight: `1rem` }}\n                >\n                  Batal\n                </Button>\n                <Button\n                  type=\"primary\"\n                  disabled={disabledchanged}\n                  onClick={handleReplacementItemPart}\n                  loading={loadingchanged}\n                >\n                  Simpan\n                </Button>\n              </>\n            </div>\n          </div>\n        }\n        visible={modalchanged}\n        onCancel={() => {\n          setmodalchanged(false);\n        }}\n        footer={null}\n        width={760}\n      >\n        <div className=\"flex flex-col mb-3\">\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Nama Item Part yang Ingin Diganti{\" \"}\n              <span className=\"namapart\"></span>\n            </p>\n            <TreeSelect\n              treeData={datatable3}\n              defaultValue={datachanged.key}\n            ></TreeSelect>\n            <style jsx>\n              {`\n                                .namapart::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Asset Type dari Item Part yang ingin diganti{\" \"}\n              <span className=\"namapart\"></span>\n            </p>\n            <div className=\"w-full rounded-sm flex items-center bg-gray-100 border p-2 h-8\">\n              {datachanged.model_inventory.asset.name}\n            </div>\n            <style jsx>\n              {`\n                                .namapart::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Nama Item Part Pengganti <span className=\"namapart\"></span>\n            </p>\n            <TreeSelect\n              onChange={(value) => {\n                setdisabledchanged(false);\n                setdataApichanged({\n                  ...dataApichanged,\n                  id: datachanged.id,\n                  replacement_id: value,\n                });\n              }}\n              treeData={datareplacements}\n            >\n              {/* {\n                                datareplacements.map((doc, idx) => {\n                                    return (\n                                        <Select.Option value={doc.id}>{doc.inventory_name}</Select.Option>\n                                    )\n                                })\n                            } */}\n            </TreeSelect>\n            <style jsx>\n              {`\n                                .namapart::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">Notes</p>\n            <Input.TextArea\n              rows={3}\n              placeholder=\"Masukkan Notes\"\n              value={dataApichanged.notes}\n              onChange={(e) => {\n                setdataApichanged({\n                  ...dataApichanged,\n                  notes: e.target.value,\n                });\n              }}\n            ></Input.TextArea>\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title={\n          <h1 className=\"font-semibold\">\n            Apakah anda yakin ingin mengeluarkan item \"\n            {dataremoved.inventory_name}\" dari \"{mainpartdata.inventory_name}\"?\n          </h1>\n        }\n        visible={modalremoved}\n        onCancel={() => {\n          setmodalremoved(false);\n        }}\n        okText=\"Ya\"\n        cancelText=\"Tidak\"\n        onOk={handleRemoveItemPart}\n        okButtonProps={{ loading: loadingremoved }}\n        width={760}\n      >\n        <div className=\"flex flex-col\">\n          <div className=\"flex flex-col\">\n            <p className=\"mb-0\">Notes</p>\n            <Input\n              placeholder=\"Masukkan Notes\"\n              onChange={(e) => {\n                setdataApiremoved({ ...dataApiremoved, notes: e.target.value });\n              }}\n            ></Input>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n};\nconst Relationship = ({ initProps, maindata, itemid }) => {\n  //init\n  const rt = useRouter();\n  //usestate\n  const [events, setevents] = useState(\"\");\n  const [datatable, setdatatable] = useState([]);\n  const [datatable2, setdatatable2] = useState([]);\n  const [datatable3, setdatatable3] = useState([]);\n  const [namasearchact, setnamasearchact] = useState(false);\n  const [namavalue, setnamavalue] = useState(\"\");\n  const [datatrigger, setdatatrigger] = useState(0);\n  const [loadingrel, setloadingrel] = useState(false);\n  const [praloadingrel, setpraloadingrel] = useState(false);\n  //delete\n  const [dataApidelete, setdataApidelete] = useState({\n    id: \"\",\n  });\n  const [modaldelete, setmodaldelete] = useState(false);\n  const [loadingdelete, setloadingdelete] = useState(false);\n  const [relationdatadelete, setrelationdatadelete] = useState({\n    name: \"\",\n    tipe: \"\",\n    koneksi: \"\",\n  });\n  //add\n  const [dataApiadd, setdataApiadd] = useState({\n    subject_id: Number(itemid),\n    relationship_id: null,\n    is_inverse: null,\n    type_id: null,\n    connected_ids: null,\n    backup_connected_ids: null,\n  });\n  const [displaydatarelations, setdisplaydatarelations] = useState([]);\n  const [relationnameadd, setrelationnameadd] = useState(\"\");\n  const [relationnameddadd, setrelationnameddadd] = useState(false);\n  const [relationselectedidxadd, setrelationselectedidxadd] = useState(-1);\n  const [relationselectedisinverseadd, setrelationselectedisinverseadd] =\n    useState(-1);\n  const [detailtipeadd, setdetailtipeadd] = useState(-10);\n  const [detailtipedataadd, setdetailtipedataadd] = useState([]);\n  const [modaladd, setmodaladd] = useState(false);\n  const [disabledadd, setdisabledadd] = useState(true);\n  const [loadingadd, setloadingadd] = useState(false);\n  const [fetchingmodel, setfetchingmodel] = useState(false);\n  const [sublocdata, setsublocdata] = useState(null);\n  const [subloctrig, setsubloctrig] = useState(-1);\n\n  //declaration\n  const columns = [\n    {\n      title: \"Relationship Type\",\n      dataIndex: \"relationship_name\",\n      key: \"relationship_name\",\n    },\n    {\n      title: \"Nama\",\n      dataIndex: \"connected_detail_name\",\n      key: \"connected_detail_name\",\n    },\n    {\n      title: \"Type\",\n      dataIndex: \"type\",\n      key: \"type\",\n    },\n    {\n      title: \"\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\",\n      dataIndex: \"actionss\",\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>\n              {events === record.id ? (\n                <>\n                  <DeleteOutlined\n                    onClick={() => {\n                      setdataApidelete({ id: record.id });\n                      setrelationdatadelete({\n                        name: record.relationship_name,\n                        tipe: record.type,\n                        koneksi: record.connected_detail_name,\n                      });\n                      setmodaldelete(true);\n                    }}\n                    style={{\n                      fontSize: `1.2rem`,\n                      color: `red`,\n                      cursor: `pointer`,\n                    }}\n                  />\n                </>\n              ) : null}\n            </>\n          ),\n        };\n      },\n    },\n  ];\n\n  //handler\n  //search nama\n  const onChangeSearch = (e) => {\n    if (e.target.value === \"\") {\n      setdatatable(datatable3);\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n  //finalClick\n  const onFinalClick = () => {\n    var datatemp = datatable2;\n    if (namasearchact) {\n      datatemp = datatemp.filter((flt) => {\n        return flt.connected_detail_name\n          .toLowerCase()\n          .includes(namavalue.toLowerCase());\n      });\n    }\n    setdatatable(datatemp);\n  };\n\n  //handler\n  const handleDeleteRelationshipItem = () => {\n    setloadingdelete(true);\n    fetch(\n      `${process.env.NEXT_PUBLIC_BACKEND_URL}/deleteRelationshipInventory`,\n      {\n        method: \"DELETE\",\n        headers: {\n          Authorization: JSON.parse(initProps),\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(dataApidelete),\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingdelete(false);\n        setmodaldelete(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Relationship berhasil dihapus\",\n            duration: 3,\n          });\n          setdatatrigger((prev) => prev + 1);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleAddRelationshipItem = () => {\n    setloadingadd(true);\n    delete dataApiadd.backup_connected_id;\n    // console.log(dataApiadd)\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addRelationshipInventories`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(dataApiadd),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingadd(false);\n        setmodaladd(false);\n        if (res2.success) {\n          setdataApiadd({\n            subject_id: Number(itemid),\n            relationship_id: null,\n            is_inverse: null,\n            type_id: null,\n            connected_ids: null,\n            backup_connected_ids: null,\n          });\n          setrelationnameadd(\"\");\n          setsublocdata(null);\n          setrelationselectedidxadd(-1);\n          setrelationselectedisinverseadd(-1);\n          setsubloctrig(-1);\n          notification[\"success\"]({\n            message: \"Relationship Item berhasil ditambahkan\",\n            duration: 3,\n          });\n          setdatatrigger((prev) => prev + 1);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n\n  //useEffect\n  useEffect(() => {\n    if (datatrigger !== -1) {\n      setpraloadingrel(true);\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationshipInventory?id=${itemid}&type_id=-4`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          setdatatable(\n            res2.data.from_inverse.concat(res2.data.not_from_inverse)\n          );\n          setdatatable2(\n            res2.data.from_inverse.concat(res2.data.not_from_inverse)\n          );\n          setdatatable3(\n            res2.data.from_inverse.concat(res2.data.not_from_inverse)\n          );\n          setpraloadingrel(false);\n        });\n    }\n  }, [datatrigger]);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationships`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setdisplaydatarelations(res2.data);\n      });\n  }, []);\n  useEffect(() => {\n    if (subloctrig !== -1) {\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationshipInventoryDetailList?type_id=${subloctrig}`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          setsublocdata(res2.data.children);\n        });\n    } else if (detailtipeadd !== -10) {\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationshipInventoryDetailList?type_id=${dataApiadd.type_id}`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          dataApiadd.type_id === -3 && setdetailtipedataadd([res2.data]);\n          dataApiadd.type_id === -1 && setdetailtipedataadd(res2.data);\n          dataApiadd.type_id === -2 && setdetailtipedataadd(res2.data);\n          dataApiadd.type_id === -4 && setdetailtipedataadd(res2.data.data);\n          console.log();\n        });\n    }\n  }, [detailtipeadd, subloctrig]);\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"border-b flex justify-between p-5 mb-8\">\n        <div className=\"flex items-center\">\n          <h1 className=\"font-bold text-xl my-auto mr-1\">Relationship</h1>\n          {maindata.model_inventory.asset.deleted_at !== null ? (\n            <Tooltip\n              placement=\"right\"\n              title=\"Asset Type telah dihapus, segera lakukan pengubahan Asset Type!\"\n            >\n              <ExclamationCircleOutlined\n                style={{ color: `brown` }}\n              ></ExclamationCircleOutlined>\n            </Tooltip>\n          ) : null}\n        </div>\n        <Button\n          type=\"primary\"\n          size=\"large\"\n          onClick={() => {\n            setmodaladd(\n              true\n            ); /*rt.push(`/items/createrelationship/${itemid}?nama=${maindata.inventory_name}&asset_id=${maindata.model_inventory.asset.id}`)*/\n          }}\n        >\n          Tambah\n        </Button>\n      </div>\n      <div className=\"flex mb-5\">\n        {praloadingrel ? null : (\n          <div className=\" w-full mr-1 grid grid-cols-12\">\n            <div className=\"col-span-11 mr-1\">\n              <Input\n                style={{ width: `100%`, marginRight: `0.5rem` }}\n                placeholder=\"Cari Nama Item\"\n                onChange={(e) => onChangeSearch(e)}\n                allowClear\n              ></Input>\n            </div>\n            <div className=\" col-span-1\">\n              <Button\n                type=\"primary\"\n                style={{ width: `100%` }}\n                onClick={onFinalClick}\n              >\n                <SearchOutlined />\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n      <Table\n        loading={praloadingrel}\n        pagination={{ pageSize: 9 }}\n        scroll={{ x: 200 }}\n        dataSource={datatable}\n        columns={columns}\n        onRow={(record, rowIndex) => {\n          return {\n            onMouseOver: (event) => {\n              setevents(record.id);\n            },\n            onMouseLeave: (event) => {\n              setevents(0);\n            },\n          };\n        }}\n      ></Table>\n      <Modal\n        title={\n          <>\n            Apakah Anda yakin ingin menghapus Relationship berikut ini dari \"\n            {maindata.inventory_name}\"?\n          </>\n        }\n        visible={modaldelete}\n        onCancel={() => {\n          setmodaldelete(false);\n        }}\n        okText=\"Ya\"\n        cancelText=\"Tidak\"\n        onOk={handleDeleteRelationshipItem}\n        okButtonProps={{ loading: loadingdelete }}\n        width={700}\n      >\n        <div className=\"flex flex-col\">\n          <div className=\"flex flex-col border-b mb-5\">\n            <div className=\"flex flex-col mb-3\">\n              <h1 className=\"font-semibold mb-0\">Relationship Type:</h1>\n              <p className=\"mb-0\">{relationdatadelete.name}</p>\n            </div>\n            <div className=\"flex flex-col mb-3\">\n              <h1 className=\"font-semibold mb-0\">Tipe:</h1>\n              <p className=\"mb-0\">{relationdatadelete.tipe}</p>\n            </div>\n            <div className=\"flex flex-col mb-3\">\n              <h1 className=\"font-semibold mb-0\">Item:</h1>\n              <p className=\"mb-0\">{relationdatadelete.koneksi}</p>\n            </div>\n          </div>\n          <div className=\"flex flex-col\">\n            <p className=\"mb-0\">Notes</p>\n            <Input placeholder=\"Masukkan Notes\" onChange={(e) => {}}></Input>\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">\n              Form Tambah Relationship \"{maindata.name}\"\n            </h1>\n            <div className=\"flex\">\n              <>\n                <Button\n                  type=\"default\"\n                  onClick={() => {\n                    setmodaladd(\n                      false\n                    ); /*setdataApiadd({ ...dataApiadd, relationship_id: null, type_id: null, connected_id: null })*/ /*console.log(dataApiadd)*/\n                  }}\n                  style={{ marginRight: `1rem` }}\n                >\n                  Batal\n                </Button>\n                <Button\n                  type=\"primary\"\n                  disabled={disabledadd}\n                  onClick={handleAddRelationshipItem}\n                  loading={loadingadd}\n                >\n                  Simpan\n                </Button>\n              </>\n            </div>\n          </div>\n        }\n        visible={modaladd}\n        onCancel={() => {\n          setmodaladd(false);\n        }}\n        footer={null}\n        width={760}\n      >\n        <div className=\"flex flex-col mb-3\">\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Relationship Type <span className=\"namapart\"></span>\n            </p>\n            <div\n              className=\"w-full border p-2 hover:border-primary rounded-sm flex items-center justify-between cursor-pointer\"\n              onClick={() => {\n                setrelationnameddadd((prev) => !prev);\n              }}\n            >\n              <p className=\"mb-0\">{relationnameadd}</p>\n              {relationnameddadd ? (\n                <UpOutlined style={{ color: `rgb(229,231,235)` }} />\n              ) : (\n                <DownOutlined style={{ color: `rgb(229,231,235)` }} />\n              )}\n            </div>\n            {relationnameddadd ? (\n              <div className=\"flex flex-col\">\n                <div className=\"flex\">\n                  <div className=\"bg-gray-200 font-semibold p-3 w-6/12\">\n                    Relationship Type\n                  </div>\n                  <div className=\"bg-gray-200 font-semibold p-3 w-6/12\">\n                    Inverse Relationship Type\n                  </div>\n                </div>\n                {displaydatarelations.map((doc, idx) => {\n                  return (\n                    <div className=\"flex\">\n                      <div\n                        className={`hover:bg-ternary cursor-pointer hover:text-black p-3 w-6/12 ${\n                          relationselectedidxadd === idx &&\n                          relationselectedisinverseadd === false\n                            ? \" bg-secondary\"\n                            : \"bg-white\"\n                        }`}\n                        onClick={(e) => {\n                          setrelationnameddadd(false);\n                          setrelationnameadd(doc.relationship_type);\n                          setdataApiadd({\n                            ...dataApiadd,\n                            relationship_id: doc.id,\n                            is_inverse: false,\n                          });\n                          doc.id === null || dataApiadd.type_id === null\n                            ? setdisabledadd(true)\n                            : setdisabledadd(false);\n                          setrelationselectedidxadd(idx);\n                          setrelationselectedisinverseadd(false);\n                        }}\n                      >\n                        {doc.relationship_type}\n                      </div>\n                      <div\n                        className={`hover:bg-ternary cursor-pointer hover:text-black p-3 w-6/12 ${\n                          relationselectedidxadd === idx &&\n                          relationselectedisinverseadd === true\n                            ? \" bg-secondary\"\n                            : \"bg-white\"\n                        }`}\n                        onClick={(e) => {\n                          setrelationnameddadd(false);\n                          setrelationnameadd(doc.inverse_relationship_type);\n                          setdataApiadd({\n                            ...dataApiadd,\n                            relationship_id: doc.id,\n                            is_inverse: true,\n                          });\n                          doc.id === null || dataApiadd.type_id === null\n                            ? setdisabledadd(true)\n                            : setdisabledadd(false);\n                          setrelationselectedidxadd(idx);\n                          setrelationselectedisinverseadd(true);\n                        }}\n                      >\n                        {doc.inverse_relationship_type}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            ) : null}\n            <style jsx>\n              {`\n                                .namapart::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Tipe <span className=\"tipepart\"></span>\n            </p>\n            <Select\n              value={dataApiadd.type_id}\n              onChange={(value) => {\n                setdataApiadd({ ...dataApiadd, type_id: value });\n                dataApiadd.relationship_id === null || value === null\n                  ? setdisabledadd(true)\n                  : setdisabledadd(false);\n                setdetailtipeadd(value);\n                dataApiadd.type_id === -3\n                  ? (setsubloctrig(-1), setsublocdata(null))\n                  : null;\n              }}\n            >\n              <Select.Option value={-1}>Agent</Select.Option>\n              <Select.Option value={-2}>Requester</Select.Option>\n              <Select.Option value={-3}>Company</Select.Option>\n              <Select.Option value={-4}>Asset Type</Select.Option>\n            </Select>\n            <style jsx>\n              {`\n                                .tipepart::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n          {dataApiadd.type_id !== null ? (\n            <>\n              {dataApiadd.type_id === -1 && (\n                <div className=\"flex flex-col mb-3\">\n                  <p className=\"mb-0\">Detail Tipe</p>\n                  <Select\n                    mode=\"multiple\"\n                    showSearch\n                    optionFilterProp=\"children\"\n                    notFoundContent={\n                      fetchingmodel ? <Spin size=\"small\" /> : null\n                    }\n                    onSearch={(value) => {\n                      setfetchingmodel(true);\n                      fetch(\n                        `${\n                          process.env.NEXT_PUBLIC_BACKEND_URL\n                        }/getRelationshipInventoryDetailList?type_id=${detailtipeadd}&name=${\n                          value !== \"\" ? value : \"\"\n                        }`,\n                        {\n                          method: `GET`,\n                          headers: {\n                            Authorization: JSON.parse(initProps),\n                          },\n                        }\n                      )\n                        .then((res) => res.json())\n                        .then((res2) => {\n                          setdetailtipedataadd(res2.data);\n                          setfetchingmodel(false);\n                        });\n                    }}\n                    filterOption={(input, opt) =>\n                      opt.children.toLowerCase().indexOf(input.toLowerCase()) >=\n                      0\n                    }\n                    onChange={(value) => {\n                      setdataApiadd({\n                        ...dataApiadd,\n                        connected_ids: value,\n                        backup_connected_ids: value,\n                      });\n                    }}\n                  >\n                    {detailtipedataadd.map((doc, idx) => {\n                      return (\n                        <Select.Option value={doc.id}>{doc.name}</Select.Option>\n                      );\n                    })}\n                  </Select>\n                </div>\n              )}\n              {dataApiadd.type_id === -2 && (\n                <div className=\"flex flex-col mb-3\">\n                  <p className=\"mb-0\">Detail Tipe</p>\n                  <Select\n                    mode=\"multiple\"\n                    showSearch\n                    optionFilterProp=\"children\"\n                    notFoundContent={\n                      fetchingmodel ? <Spin size=\"small\" /> : null\n                    }\n                    onSearch={(value) => {\n                      setfetchingmodel(true);\n                      fetch(\n                        `${\n                          process.env.NEXT_PUBLIC_BACKEND_URL\n                        }/getRelationshipInventoryDetailList?type_id=${detailtipeadd}&name=${\n                          value !== \"\" ? value : \"\"\n                        }`,\n                        {\n                          method: `GET`,\n                          headers: {\n                            Authorization: JSON.parse(initProps),\n                          },\n                        }\n                      )\n                        .then((res) => res.json())\n                        .then((res2) => {\n                          setdetailtipedataadd(res2.data);\n                          setfetchingmodel(false);\n                        });\n                    }}\n                    filterOption={(input, opt) =>\n                      opt.children.toLowerCase().indexOf(input.toLowerCase()) >=\n                      0\n                    }\n                    onChange={(value) => {\n                      setdataApiadd({\n                        ...dataApiadd,\n                        connected_ids: value,\n                        backup_connected_ids: value,\n                      });\n                    }}\n                  >\n                    {detailtipedataadd.map((doc, idx) => {\n                      return (\n                        <Select.Option value={doc.id}>{doc.name}</Select.Option>\n                      );\n                    })}\n                  </Select>\n                </div>\n              )}\n              {dataApiadd.type_id === -3 && (\n                <div className=\"flex flex-col mb-3\">\n                  <p className=\"mb-0\">Detail Tipe</p>\n                  <TreeSelect\n                    defaultValue={\n                      dataApiadd.backup_connected_ids === null\n                        ? null\n                        : dataApiadd.backup_connected_ids[0]\n                    }\n                    treeDefaultExpandedKeys={[1]}\n                    treeData={detailtipedataadd}\n                    onChange={(value, label, extra) => {\n                      setdataApiadd({\n                        ...dataApiadd,\n                        connected_ids: [value],\n                        backup_connected_ids: [value],\n                      });\n                      setsubloctrig(value);\n                    }}\n                  ></TreeSelect>\n                </div>\n              )}\n              {dataApiadd.type_id === -4 && (\n                <div className=\"flex flex-col mb-3\">\n                  <p className=\"mb-0\">Detail Tipe</p>\n                  <Select\n                    placeholder=\"Cari dengan Model ID\"\n                    mode=\"multiple\"\n                    showSearch\n                    optionFilterProp=\"children\"\n                    notFoundContent={\n                      fetchingmodel ? <Spin size=\"small\" /> : null\n                    }\n                    onSearch={(value) => {\n                      setfetchingmodel(true);\n                      fetch(\n                        `${\n                          process.env.NEXT_PUBLIC_BACKEND_URL\n                        }/getRelationshipInventoryDetailList?type_id=${detailtipeadd}&model_id=${\n                          value !== \"\" ? value : \"\"\n                        }`,\n                        {\n                          method: `GET`,\n                          headers: {\n                            Authorization: JSON.parse(initProps),\n                          },\n                        }\n                      )\n                        .then((res) => res.json())\n                        .then((res2) => {\n                          setdetailtipedataadd(res2.data);\n                          setfetchingmodel(false);\n                        });\n                    }}\n                    filterOption={(input, opt) =>\n                      opt.children.toLowerCase().indexOf(input.toLowerCase()) >=\n                      0\n                    }\n                    onChange={(value) => {\n                      setdataApiadd({\n                        ...dataApiadd,\n                        connected_ids: value,\n                        backup_connected_ids: value,\n                      });\n                    }}\n                  >\n                    {detailtipedataadd.map((doc, idx) => {\n                      return (\n                        <Select.Option value={doc.id}>\n                          {doc.mig_id}\n                        </Select.Option>\n                      );\n                    })}\n                  </Select>\n                </div>\n              )}\n            </>\n          ) : null}\n          {sublocdata !== null && (\n            <div className=\"flex flex-col mb-3\">\n              <p className=\"mb-0\">Detail Tipe (Sublokasi)</p>\n              <TreeSelect\n                multiple\n                allowClear\n                treeData={sublocdata}\n                onChange={(value, label, extra) => {\n                  if (value.length === 0) {\n                    setdataApiadd({\n                      ...dataApiadd,\n                      connected_ids: dataApiadd.backup_connected_ids,\n                    });\n                  } else {\n                    setdataApiadd({ ...dataApiadd, connected_ids: value });\n                  }\n                }}\n              ></TreeSelect>\n            </div>\n          )}\n        </div>\n      </Modal>\n    </div>\n  );\n};\nconst Association = ({ initProps, itemid, maindata, praloading }) => {\n  const rt = useRouter();\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"border-b flex justify-between p-5 mb-8\">\n        <h1 className=\"font-bold text-xl my-auto\">Association</h1>\n      </div>\n      <div className=\"flex flex-col px-5\">\n        {praloading ? (\n          <>\n            <Spin />\n          </>\n        ) : maindata.associations.length === 0 ? (\n          <>\n            <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\n          </>\n        ) : (\n          <>\n            {maindata.associations.map((doc, idx) => {\n              return (\n                <div\n                  className=\"rounded-md shadow-md py-4 px-5 border mb-4 flex justify-between w-10/12 cursor-pointer\"\n                  onClick={() => {\n                    rt.push(`/tickets/detail/${doc.id}?active=detailItem`);\n                  }}\n                >\n                  <div className=\"flex flex-col\">\n                    <p className=\"mb-0 font-semibold\">Ticket Number</p>\n                    <p className=\"mb-0\">{doc.ticket_name}</p>\n                  </div>\n                  {doc.status === 1 && (\n                    <div className=\"rounded-md flex items-center px-2 text-center bg-red-100 border border-red-200 text-red-600\">\n                      Status: {doc.status_name}\n                    </div>\n                  )}\n                  {doc.status === 2 && (\n                    <div className=\"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\">\n                      Status: {doc.status_name}\n                    </div>\n                  )}\n                  {doc.status === 3 && (\n                    <div className=\"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\">\n                      Status: {doc.status_name}\n                    </div>\n                  )}\n                  {doc.status === 4 && (\n                    <div className=\"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\">\n                      Status: {doc.status_name}\n                    </div>\n                  )}\n                  {doc.status === 5 && (\n                    <div className=\"rounded-md flex items-center px-2 text-center bg-blue-100 border border-blue-200 text-blue-600\">\n                      Status: {doc.status_name}\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\nconst Acitivty = ({\n  itemid,\n  initProps,\n  maindata,\n  invrelations,\n  praloading,\n  activitytrigger,\n}) => {\n  const [daylogs, setdaylogs] = useState([]);\n  const [weeklogs, setweeklogs] = useState([]);\n  const [morelogs, setmorelogs] = useState([]);\n  const [praloadinglogs, setpraloadinglogs] = useState(true);\n  const [inventories, setinventories] = useState([]);\n\n  useEffect(() => {\n    setpraloadinglogs(true);\n\n    fetch(\n      `${process.env.NEXT_PUBLIC_BACKEND_URL}/getActivityInventoryLogs?id=${itemid}`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        var daylogsmap = res2.data.day_logs.map((doclogs, idxlogs) => {\n          const datenew = moment(doclogs.date).locale(\"id\").format(\"LLL\");\n          var descnew = \"\";\n          const desckondisiOld = doclogs.properties\n            ? doclogs.properties.old\n              ? doclogs.properties.old.status_condition === 1\n                ? \"Good\"\n                : doclogs.properties.old.status_condition === 2\n                ? \"Grey\"\n                : doclogs.properties.old.status_condition === 3\n                ? \"Bad\"\n                : null\n              : null\n            : null;\n          const desckondisiBaru = doclogs.properties\n            ? doclogs.properties.attributes\n              ? doclogs.properties.attributes.status_condition === 1\n                ? \"Good\"\n                : doclogs.properties.attributes.status_condition === 2\n                ? \"Grey\"\n                : doclogs.properties.attributes.status_condition === 3\n                ? \"Bad\"\n                : null\n              : null\n            : null;\n          const descusageOld = doclogs.properties\n            ? doclogs.properties.old\n              ? doclogs.properties.old.status_usage === 1\n                ? \"In Used\"\n                : doclogs.properties.old.status_usage === 2\n                ? \"In Stock\"\n                : doclogs.properties.old.status_usage === 3\n                ? \"Replacement\"\n                : null\n              : null\n            : null;\n          const descusageBaru = doclogs.properties\n            ? doclogs.properties.attributes\n              ? doclogs.properties.attributes.status_usage === 1\n                ? \"In Used\"\n                : doclogs.properties.attributes.status_usage === 2\n                ? \"In Stock\"\n                : doclogs.properties.attributes.status_usage === 3\n                ? \"Replacement\"\n                : null\n              : null\n            : null;\n          const desc1 = doclogs.description.split(\" \");\n          if (desc1[0] === \"Created\") {\n            if (desc1[2] === \"Relationship\") {\n              desc1[0] === \"Created\"\n                ? (descnew =\n                    descnew +\n                    `Penambahan Relationship \"${doclogs.properties.attributes.relationship}\"`)\n                : null;\n              desc1[0] === \"Deleted\"\n                ? (descnew =\n                    descnew +\n                    `Penghapusan Relationship \"${doclogs.properties.old.relationship}\"`)\n                : null;\n            } else if (desc1[1] === \"Association\") {\n              descnew = descnew + `Association Baru: ${doclogs.properties}`;\n            } else if (doclogs.properties.attributes?.list_parts) {\n              descnew =\n                descnew +\n                `Inisialisasi Pembuatan Item Part \"${maindata.inventory_parts\n                  .filter((docfil) =>\n                    doclogs.properties.attributes?.list_parts.includes(\n                      docfil.id\n                    )\n                  )\n                  .map((docmap) => docmap.inventory_name)\n                  .join(\", \")}\"`;\n            } else {\n              descnew =\n                descnew +\n                `Pembuatan Item Baru bernama \"${doclogs.properties.attributes?.inventory_name}\"`;\n            }\n          }\n          desc1[0] === \"Notes\"\n            ? (descnew = descnew + `Penambahan Notes`)\n            : null;\n          if (desc1[0] === \"Updated\") {\n            if (doclogs.properties.attributes.status_condition) {\n              descnew =\n                descnew +\n                `Pengubahan status kondisi dari ${desckondisiOld} ke ${desckondisiBaru}`;\n            } else if (doclogs.properties.attributes.status_usage) {\n              descnew =\n                descnew +\n                `Pengubahan status pemakaian dari ${descusageOld} ke ${descusageBaru}`;\n            } else if (doclogs.properties.attributes.inventory_name) {\n              descnew =\n                descnew +\n                `Pengubahan Nama Item dari \"${doclogs.properties.old.inventory_name}\" ke \"${doclogs.properties.attributes.inventory_name}\"`;\n            } else if (doclogs.properties.attributes.serial_number) {\n              descnew =\n                descnew +\n                `Pengubahan Serial Number Item dari \"${doclogs.properties.old.serial_number}\" ke \"${doclogs.properties.attributes.serial_number}\"`;\n            } else if (doclogs.properties.attributes.location) {\n              descnew =\n                descnew +\n                `Pengubahan Location Item dari \"${\n                  invrelations.companies.filter(\n                    (doc) => doc.id === doclogs.properties.old.location\n                  )[0].name\n                }\" ke \"${\n                  invrelations.companies.filter(\n                    (doc) => doc.id === doclogs.properties.attributes.location\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.vendor_id) {\n              descnew =\n                descnew +\n                `Pengubahan Vendor Item dari \"${\n                  invrelations.vendors.filter(\n                    (doc) => doc.id === doclogs.properties.old.vendor_id\n                  )[0].name\n                }\" ke \"${\n                  invrelations.vendors.filter(\n                    (doc) => doc.id === doclogs.properties.attributes.vendor_id\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.manufacturer_id) {\n              descnew =\n                descnew +\n                `Pengubahan Manufacturer Item dari \"${\n                  invrelations.manufacturers.filter(\n                    (doc) => doc.id === doclogs.properties.old.manufacturer_id\n                  )[0].name\n                }\" ke \"${\n                  invrelations.manufacturers.filter(\n                    (doc) =>\n                      doc.id === doclogs.properties.attributes.manufacturer_id\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.deskripsi) {\n              descnew = descnew + `Pengubahan Deskripsi Item`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length >\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsnew =\n                doclogs.properties.attributes.list_parts?.filter(\n                  (docfil) =>\n                    doclogs.properties.old.list_parts\n                      ?.map((part) => part.id)\n                      .includes(docfil.id) === false\n                );\n              descnew =\n                descnew +\n                `Penambahan Item \"${listpartsnew\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\" menjadi Item Part`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length <\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsold = doclogs.properties.old.list_parts?.filter(\n                (docfil) =>\n                  doclogs.properties.attributes.list_parts\n                    ?.map((part) => part.id)\n                    .includes(docfil.id) === false\n              );\n              descnew =\n                descnew +\n                `Pengeluaran Item Part \"${listpartsold\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\"`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length ===\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsnew =\n                doclogs.properties.attributes.list_parts?.filter(\n                  (docfil) =>\n                    doclogs.properties.old.list_parts\n                      ?.map((part) => part.id)\n                      .includes(docfil.id) === false\n                );\n              const listpartsold = doclogs.properties.old.list_parts?.filter(\n                (docfil) =>\n                  doclogs.properties.attributes.list_parts\n                    ?.map((part) => part.id)\n                    .includes(docfil.id) === false\n              );\n              descnew =\n                descnew +\n                `Pergantian Item Part \"${listpartsold\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\" menjadi \"${listpartsnew\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\"`;\n            } else {\n              var prpts = [];\n              for (var prop in doclogs.properties.old) {\n                prpts.push(prop);\n              }\n              descnew = descnew + `Pengubahan \"${prpts.join(\", \")}\" Item`;\n            }\n          }\n          if (desc1[0] === \"Deleted\") {\n            if (desc1[2] === \"Relationship\") {\n              desc1[0] === \"Created\"\n                ? (descnew =\n                    descnew +\n                    `Penambahan Relationship \"${doclogs.properties.attributes.relationship}\"`)\n                : null;\n              desc1[0] === \"Deleted\"\n                ? (descnew =\n                    descnew +\n                    `Penghapusan Relationship \"${doclogs.properties.old.relationship}\"`)\n                : null;\n            } else if (desc1[1] === \"Association\") {\n              descnew = descnew + `Association Dihapus: ${doclogs.properties}`;\n            }\n          }\n          return {\n            ...doclogs,\n            date: datenew,\n            description: descnew,\n          };\n        });\n        var weeklogsmap = res2.data.week_logs.map((doclogs, idxlogs) => {\n          const datenew = moment(doclogs.date).locale(\"id\").format(\"LLL\");\n          var descnew = \"\";\n          const desckondisiOld = doclogs.properties\n            ? doclogs.properties.old\n              ? doclogs.properties.old.status_condition === 1\n                ? \"Good\"\n                : doclogs.properties.old.status_condition === 2\n                ? \"Grey\"\n                : doclogs.properties.old.status_condition === 3\n                ? \"Bad\"\n                : null\n              : null\n            : null;\n          const desckondisiBaru = doclogs.properties\n            ? doclogs.properties.attributes\n              ? doclogs.properties.attributes.status_condition === 1\n                ? \"Good\"\n                : doclogs.properties.attributes.status_condition === 2\n                ? \"Grey\"\n                : doclogs.properties.attributes.status_condition === 3\n                ? \"Bad\"\n                : null\n              : null\n            : null;\n          const descusageOld = doclogs.properties\n            ? doclogs.properties.old\n              ? doclogs.properties.old.status_usage === 1\n                ? \"In Used\"\n                : doclogs.properties.old.status_usage === 2\n                ? \"In Stock\"\n                : doclogs.properties.old.status_usage === 3\n                ? \"Replacement\"\n                : null\n              : null\n            : null;\n          const descusageBaru = doclogs.properties\n            ? doclogs.properties.attributes\n              ? doclogs.properties.attributes.status_usage === 1\n                ? \"In Used\"\n                : doclogs.properties.attributes.status_usage === 2\n                ? \"In Stock\"\n                : doclogs.properties.attributes.status_usage === 3\n                ? \"Replacement\"\n                : null\n              : null\n            : null;\n          const desc1 = doclogs.description.split(\" \");\n          if (desc1[0] === \"Created\") {\n            if (desc1[2] === \"Relationship\") {\n              desc1[0] === \"Created\"\n                ? (descnew =\n                    descnew +\n                    `Penambahan Relationship \"${doclogs.properties.attributes.relationship}\"`)\n                : null;\n              desc1[0] === \"Deleted\"\n                ? (descnew =\n                    descnew +\n                    `Penghapusan Relationship \"${doclogs.properties.old.relationship}\"`)\n                : null;\n            } else if (desc1[1] === \"Association\") {\n              descnew = descnew + `Association Baru: ${doclogs.properties}`;\n            } else if (doclogs.properties.attributes?.list_parts) {\n              descnew =\n                descnew +\n                `Inisialisasi Pembuatan Item Part \"${maindata.inventory_parts\n                  .filter((docfil) =>\n                    doclogs.properties.attributes?.list_parts.includes(\n                      docfil.id\n                    )\n                  )\n                  .map((docmap) => docmap.inventory_name)\n                  .join(\", \")}\"`;\n            } else {\n              descnew =\n                descnew +\n                `Pembuatan Item Baru bernama \"${doclogs.properties.attributes?.inventory_name}\"`;\n            }\n          }\n          desc1[0] === \"Notes\"\n            ? (descnew = descnew + `Penambahan Notes`)\n            : null;\n          if (desc1[0] === \"Updated\") {\n            if (doclogs.properties.attributes.status_condition) {\n              descnew =\n                descnew +\n                `Pengubahan status kondisi dari ${desckondisiOld} ke ${desckondisiBaru}`;\n            } else if (doclogs.properties.attributes.status_usage) {\n              descnew =\n                descnew +\n                `Pengubahan status pemakaian dari ${descusageOld} ke ${descusageBaru}`;\n            } else if (doclogs.properties.attributes.inventory_name) {\n              descnew =\n                descnew +\n                `Pengubahan Nama Item dari \"${doclogs.properties.old.inventory_name}\" ke \"${doclogs.properties.attributes.inventory_name}\"`;\n            } else if (doclogs.properties.attributes.serial_number) {\n              descnew =\n                descnew +\n                `Pengubahan Serial Number Item dari \"${doclogs.properties.old.serial_number}\" ke \"${doclogs.properties.attributes.serial_number}\"`;\n            } else if (doclogs.properties.attributes.location) {\n              descnew =\n                descnew +\n                `Pengubahan Location Item dari \"${\n                  invrelations.companies.filter(\n                    (doc) => doc.id === doclogs.properties.old.location\n                  )[0].name\n                }\" ke \"${\n                  invrelations.companies.filter(\n                    (doc) => doc.id === doclogs.properties.attributes.location\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.vendor_id) {\n              descnew =\n                descnew +\n                `Pengubahan Vendor Item dari \"${\n                  invrelations.vendors.filter(\n                    (doc) => doc.id === doclogs.properties.old.vendor_id\n                  )[0].name\n                }\" ke \"${\n                  invrelations.vendors.filter(\n                    (doc) => doc.id === doclogs.properties.attributes.vendor_id\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.manufacturer_id) {\n              descnew =\n                descnew +\n                `Pengubahan Manufacturer Item dari \"${\n                  invrelations.manufacturers.filter(\n                    (doc) => doc.id === doclogs.properties.old.manufacturer_id\n                  )[0].name\n                }\" ke \"${\n                  invrelations.manufacturers.filter(\n                    (doc) =>\n                      doc.id === doclogs.properties.attributes.manufacturer_id\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.deskripsi) {\n              descnew = descnew + `Pengubahan Deskripsi Item`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length >\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsnew =\n                doclogs.properties.attributes.list_parts?.filter(\n                  (docfil) =>\n                    doclogs.properties.old.list_parts\n                      ?.map((part) => part.id)\n                      .includes(docfil.id) === false\n                );\n              descnew =\n                descnew +\n                `Penambahan Item \"${listpartsnew\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\" menjadi Item Part`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length <\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsold = doclogs.properties.old.list_parts?.filter(\n                (docfil) =>\n                  doclogs.properties.attributes.list_parts\n                    ?.map((part) => part.id)\n                    .includes(docfil.id) === false\n              );\n              descnew =\n                descnew +\n                `Pengeluaran Item Part \"${listpartsold\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\"`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length ===\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsnew =\n                doclogs.properties.attributes.list_parts?.filter(\n                  (docfil) =>\n                    doclogs.properties.old.list_parts\n                      ?.map((part) => part.id)\n                      .includes(docfil.id) === false\n                );\n              const listpartsold = doclogs.properties.old.list_parts?.filter(\n                (docfil) =>\n                  doclogs.properties.attributes.list_parts\n                    ?.map((part) => part.id)\n                    .includes(docfil.id) === false\n              );\n              descnew =\n                descnew +\n                `Pergantian Item Part \"${listpartsold\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\" menjadi \"${listpartsnew\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\"`;\n            } else {\n              var prpts = [];\n              for (var prop in doclogs.properties.old) {\n                prpts.push(prop);\n              }\n              descnew = descnew + `Pengubahan \"${prpts.join(\", \")}\" Item`;\n            }\n          }\n          if (desc1[0] === \"Deleted\") {\n            if (desc1[2] === \"Relationship\") {\n              desc1[0] === \"Created\"\n                ? (descnew =\n                    descnew +\n                    `Penambahan Relationship \"${doclogs.properties.attributes.relationship}\"`)\n                : null;\n              desc1[0] === \"Deleted\"\n                ? (descnew =\n                    descnew +\n                    `Penghapusan Relationship \"${doclogs.properties.old.relationship}\"`)\n                : null;\n            }\n          }\n          return {\n            ...doclogs,\n            date: datenew,\n            description: descnew,\n          };\n        });\n        var morelogsmap = res2.data.else_logs.map((doclogs, idxlogs) => {\n          const datenew = moment(doclogs.date).locale(\"id\").format(\"LLL\");\n          var descnew = \"\";\n          const desckondisiOld = doclogs.properties\n            ? doclogs.properties.old\n              ? doclogs.properties.old.status_condition === 1\n                ? \"Good\"\n                : doclogs.properties.old.status_condition === 2\n                ? \"Grey\"\n                : doclogs.properties.old.status_condition === 3\n                ? \"Bad\"\n                : null\n              : null\n            : null;\n          const desckondisiBaru = doclogs.properties\n            ? doclogs.properties.attributes\n              ? doclogs.properties.attributes.status_condition === 1\n                ? \"Good\"\n                : doclogs.properties.attributes.status_condition === 2\n                ? \"Grey\"\n                : doclogs.properties.attributes.status_condition === 3\n                ? \"Bad\"\n                : null\n              : null\n            : null;\n          const descusageOld = doclogs.properties\n            ? doclogs.properties.old\n              ? doclogs.properties.old.status_usage === 1\n                ? \"In Used\"\n                : doclogs.properties.old.status_usage === 2\n                ? \"In Stock\"\n                : doclogs.properties.old.status_usage === 3\n                ? \"Replacement\"\n                : null\n              : null\n            : null;\n          const descusageBaru = doclogs.properties\n            ? doclogs.properties.attributes\n              ? doclogs.properties.attributes.status_usage === 1\n                ? \"In Used\"\n                : doclogs.properties.attributes.status_usage === 2\n                ? \"In Stock\"\n                : doclogs.properties.attributes.status_usage === 3\n                ? \"Replacement\"\n                : null\n              : null\n            : null;\n          const desc1 = doclogs.description.split(\" \");\n          if (desc1[0] === \"Created\") {\n            if (desc1[2] === \"Relationship\") {\n              desc1[0] === \"Created\"\n                ? (descnew =\n                    descnew +\n                    `Penambahan Relationship \"${doclogs.properties.attributes.relationship}\"`)\n                : null;\n              desc1[0] === \"Deleted\"\n                ? (descnew =\n                    descnew +\n                    `Penghapusan Relationship \"${doclogs.properties.old.relationship}\"`)\n                : null;\n            } else if (desc1[1] === \"Association\") {\n              descnew = descnew + `Association Baru: ${doclogs.properties}`;\n            } else if (doclogs.properties.attributes?.list_parts) {\n              descnew =\n                descnew +\n                `Inisialisasi Pembuatan Item Part \"${maindata.inventory_parts\n                  .filter((docfil) =>\n                    doclogs.properties.attributes?.list_parts.includes(\n                      docfil.id\n                    )\n                  )\n                  .map((docmap) => docmap.inventory_name)\n                  .join(\", \")}\"`;\n            } else {\n              descnew =\n                descnew +\n                `Pembuatan Item Baru bernama \"${doclogs.properties.attributes?.inventory_name}\"`;\n            }\n          }\n          desc1[0] === \"Notes\"\n            ? (descnew = descnew + `Penambahan Notes`)\n            : null;\n          if (desc1[0] === \"Updated\") {\n            if (doclogs.properties.attributes.status_condition) {\n              descnew =\n                descnew +\n                `Pengubahan status kondisi dari ${desckondisiOld} ke ${desckondisiBaru}`;\n            } else if (doclogs.properties.attributes.status_usage) {\n              descnew =\n                descnew +\n                `Pengubahan status pemakaian dari ${descusageOld} ke ${descusageBaru}`;\n            } else if (doclogs.properties.attributes.inventory_name) {\n              descnew =\n                descnew +\n                `Pengubahan Nama Item dari \"${doclogs.properties.old.inventory_name}\" ke \"${doclogs.properties.attributes.inventory_name}\"`;\n            } else if (doclogs.properties.attributes.serial_number) {\n              descnew =\n                descnew +\n                `Pengubahan Serial Number Item dari \"${doclogs.properties.old.serial_number}\" ke \"${doclogs.properties.attributes.serial_number}\"`;\n            } else if (doclogs.properties.attributes.location) {\n              descnew =\n                descnew +\n                `Pengubahan Location Item dari \"${\n                  invrelations.companies.filter(\n                    (doc) => doc.id === doclogs.properties.old.location\n                  )[0].name\n                }\" ke \"${\n                  invrelations.companies.filter(\n                    (doc) => doc.id === doclogs.properties.attributes.location\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.vendor_id) {\n              descnew =\n                descnew +\n                `Pengubahan Vendor Item dari \"${\n                  invrelations.vendors.filter(\n                    (doc) => doc.id === doclogs.properties.old.vendor_id\n                  )[0].name\n                }\" ke \"${\n                  invrelations.vendors.filter(\n                    (doc) => doc.id === doclogs.properties.attributes.vendor_id\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.manufacturer_id) {\n              descnew =\n                descnew +\n                `Pengubahan Manufacturer Item dari \"${\n                  invrelations.manufacturers.filter(\n                    (doc) => doc.id === doclogs.properties.old.manufacturer_id\n                  )[0].name\n                }\" ke \"${\n                  invrelations.manufacturers.filter(\n                    (doc) =>\n                      doc.id === doclogs.properties.attributes.manufacturer_id\n                  )[0].name\n                }\"`;\n            } else if (doclogs.properties.attributes.deskripsi) {\n              descnew = descnew + `Pengubahan Deskripsi Item`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length >\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsnew =\n                doclogs.properties.attributes.list_parts?.filter(\n                  (docfil) =>\n                    doclogs.properties.old.list_parts\n                      ?.map((part) => part.id)\n                      .includes(docfil.id) === false\n                );\n              descnew =\n                descnew +\n                `Penambahan Item \"${listpartsnew\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\" menjadi Item Part`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length <\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsold = doclogs.properties.old.list_parts?.filter(\n                (docfil) =>\n                  doclogs.properties.attributes.list_parts\n                    ?.map((part) => part.id)\n                    .includes(docfil.id) === false\n              );\n              descnew =\n                descnew +\n                `Pengeluaran Item Part \"${listpartsold\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\"`;\n            } else if (\n              doclogs.properties.attributes.list_parts?.length ===\n              doclogs.properties.old.list_parts?.length\n            ) {\n              const listpartsnew =\n                doclogs.properties.attributes.list_parts?.filter(\n                  (docfil) =>\n                    doclogs.properties.old.list_parts\n                      ?.map((part) => part.id)\n                      .includes(docfil.id) === false\n                );\n              const listpartsold = doclogs.properties.old.list_parts?.filter(\n                (docfil) =>\n                  doclogs.properties.attributes.list_parts\n                    ?.map((part) => part.id)\n                    .includes(docfil.id) === false\n              );\n              descnew =\n                descnew +\n                `Pergantian Item Part \"${listpartsold\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\" menjadi \"${listpartsnew\n                  ?.map((part) => part.mig_id)\n                  .join(\", \")}\"`;\n            } else {\n              var prpts = [];\n              for (var prop in doclogs.properties.old) {\n                prpts.push(prop);\n              }\n              descnew = descnew + `Pengubahan \"${prpts.join(\", \")}\" Item`;\n            }\n          }\n          if (desc1[0] === \"Deleted\") {\n            if (desc1[2] === \"Relationship\") {\n              desc1[0] === \"Created\"\n                ? (descnew =\n                    descnew +\n                    `Penambahan Relationship \"${doclogs.properties.attributes.relationship}\"`)\n                : null;\n              desc1[0] === \"Deleted\"\n                ? (descnew =\n                    descnew +\n                    `Penghapusan Relationship \"${doclogs.properties.old.relationship}\"`)\n                : null;\n            }\n          }\n          return {\n            ...doclogs,\n            date: datenew,\n            description: descnew,\n          };\n        });\n        setdaylogs(daylogsmap);\n        setweeklogs(weeklogsmap);\n        setmorelogs(morelogsmap);\n        setpraloadinglogs(false);\n      });\n    // .then(res3 => {\n    //     fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationshipInventory?id=${itemid}&type_id=-4`, {\n    //         method: `GET`,\n    //         headers: {\n    //             'Authorization': JSON.parse(initProps),\n    //         }\n    //     })\n    //         .then(res => res.json())\n    //         .then(res4 => {\n    //             var concatarr = res4.data.from_inverse.concat(res4.data.not_from_inverse)\n\n    //             var logs2map = res3.data.relationship.map((docrel, idxrel) => {\n    //                 const datenew2 = moment(docrel.date).locale(\"id\").format('LLL')\n    //                 var descnew2 = ''\n    //                 var idlognew = -1\n    //                 const desc2 = docrel.description.split(\" \")\n    //                 desc2[0] === 'Created' ? idlognew = concatarr.filter(docfil => docfil.id === docrel.properties.attributes.id)[0] : null\n    //                 desc2[0] === 'Created' ? descnew2 = descnew2 + `Penambahan Relationship \"${typeof (idlognew) === 'undefined' ? \"(Sudah Dihapus lagi)\" : `${idlognew.relationship}`}\"` : null\n    //                 desc2[0] === 'Deleted' ? descnew2 = descnew2 + `Penghapusan Relationship` : null\n    //                 return {\n    //                     ...docrel,\n    //                     date: datenew2,\n    //                     description: descnew2\n    //                 }\n    //             })\n    //             setlogs2(logs2map)\n    //             setpraloadinglogs2(false)\n    //         })\n    // })\n  }, [activitytrigger]);\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"border-b flex justify-between p-5 mb-8\">\n        <h1 className=\"font-bold text-xl my-auto\">Activity</h1>\n      </div>\n      <div className=\"flex\">\n        <div className=\"flex flex-col w-6/12\">\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\"font-semibold mx-auto text-xl mb-3\">Hari Ini</h1>\n            {praloadinglogs ? (\n              <Spin />\n            ) : daylogs.length < 1 ? (\n              <>\n                <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\n              </>\n            ) : (\n              <Timeline mode=\"left\">\n                {daylogs.map((doclog, idxlog) => {\n                  return (\n                    <Timeline.Item label={doclog.date}>\n                      <div className=\"flex flex-col\">\n                        <h1 className=\"font-semibold text-base mb-1\">\n                          {doclog.description}\n                        </h1>\n                        <p className=\"mb-1 text-xs text-gray-500\">\n                          Oleh {doclog.causer_name}\n                        </p>\n                        <p className=\"mb-1 text-sm\">Notes: {doclog.notes}</p>\n                      </div>\n                    </Timeline.Item>\n                  );\n                })}\n              </Timeline>\n            )}\n          </div>\n          <div className=\"flex flex-col mb-5\">\n            <h1 className=\"font-semibold mx-auto text-xl mb-3\">Minggu Ini</h1>\n            {praloadinglogs ? (\n              <Spin />\n            ) : weeklogs.length < 1 ? (\n              <>\n                <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\n              </>\n            ) : (\n              <Timeline mode=\"left\">\n                {weeklogs.map((doclog, idxlog) => {\n                  return (\n                    <Timeline.Item label={doclog.date}>\n                      <div className=\"flex flex-col\">\n                        <h1 className=\"font-semibold text-base mb-1\">\n                          {doclog.description}\n                        </h1>\n                        <p className=\"mb-1 text-xs text-gray-500\">\n                          Oleh {doclog.causer_name}\n                        </p>\n                        <p className=\"mb-1 text-sm\">Notes: {doclog.notes}</p>\n                      </div>\n                    </Timeline.Item>\n                  );\n                })}\n              </Timeline>\n            )}\n          </div>\n        </div>\n        <div className=\"flex flex-col w-6/12\">\n          <h1 className=\"font-semibold mx-auto text-xl mb-3\">Minggu Lalu</h1>\n          {praloadinglogs ? (\n            <Spin />\n          ) : morelogs.length < 1 ? (\n            <>\n              <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\n            </>\n          ) : (\n            <Timeline mode=\"left\">\n              {morelogs.map((doclog, idxlog) => {\n                return (\n                  <Timeline.Item label={doclog.date}>\n                    <div className=\"flex flex-col\">\n                      <h1 className=\"font-semibold text-base mb-1\">\n                        {doclog.description}\n                      </h1>\n                      <p className=\"mb-1 text-xs text-gray-500\">\n                        Oleh {doclog.causer_name}\n                      </p>\n                      <p className=\"mb-1 text-sm\">Notes: {doclog.notes}</p>\n                    </div>\n                  </Timeline.Item>\n                );\n              })}\n            </Timeline>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ItemDetail = ({ initProps, dataProfile, sidemenu, itemid }) => {\n  //1. Init\n  const rt = useRouter();\n  var activeTab = \"overview\";\n  const { active } = rt.query;\n  if (active) {\n    activeTab = active;\n  }\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  pathArr.splice(2, 2);\n  pathArr[pathArr.length - 1] = \"Detail Item\";\n  const { TabPane } = Tabs;\n\n  //useState\n  const [maindata, setmaindata] = useState({\n    id: \"\",\n    model_id: \"\",\n    vendor_id: \"\",\n    inventory_name: \"\",\n    status_condition: \"\",\n    status_usage: \"\",\n    location: \"\",\n    is_exist: \"\",\n    deskripsi: \"\",\n    manufacturer_id: \"\",\n    mig_id: \"\",\n    serial_number: \"\",\n    created_at: \"\",\n    updated_at: \"\",\n    deleted_at: \"\",\n    asset_name: \"\",\n    model_name: \"\",\n    location_name: \"\",\n    model_inventory: {\n      id: null,\n      name: \"\",\n      asset_id: null,\n      deleted_at: null,\n      asset: {\n        id: null,\n        name: \"\",\n        deleted_at: null,\n      },\n    },\n    location_inventory: {\n      company_id: null,\n      company_name: \"\",\n    },\n    additional_attributes: [],\n    inventory_parts: [],\n    associations: [],\n    quantities: [],\n  });\n  const [invrelations, setinvrelations] = useState({\n    models: [\n      {\n        id: \"\",\n        name: \"\",\n        deleted_at: null,\n      },\n    ],\n    assets: [\n      {\n        id: \"\",\n        name: \"\",\n        deleted_at: null,\n      },\n    ],\n    manufacturers: [\n      {\n        id: \"\",\n        name: \"\",\n        deleted_at: null,\n      },\n    ],\n    status_condition: [],\n    status_usage: [],\n    vendors: [],\n    companies: [],\n    tree_companies: {\n      children: [],\n    },\n  });\n  const [relship, setrelship] = useState([]);\n  const [manuf, setmanuf] = useState(\"\");\n  const [vendor, setvendor] = useState(\"\");\n  const [praloading, setpraloading] = useState(true);\n  const [praloading2, setpraloading2] = useState(true);\n  //delete\n  const [modaldelete, setmodaldelete] = useState(false);\n  const [loadingdelete, setloadingdelete] = useState(false);\n  //notes\n  const [notes, setnotes] = useState(\"\");\n  const [modalnotes, setmodalnotes] = useState(false);\n  const [loadingnotes, setloadingnotes] = useState(false);\n  //kondisi\n  const [kondisi, setkondisi] = useState(\"\");\n  const [notekondisi, setnotekondisi] = useState(\"\");\n  const [modalkondisi, setmodalkondisi] = useState(false);\n  const [displaykondisi, setdisplaykondisi] = useState(true);\n  const [loadingkondisi, setloadingkondisi] = useState(false);\n  //status pemakaian\n  const [changeusage, setchangeusage] = useState({\n    id: Number(itemid),\n    status_usage: \"\",\n    notes: \"\",\n    relationship_type_id: \"\",\n    connected_id: \"\",\n    detail_connected_id: null,\n  });\n  const [disabledusage, setdisabledusage] = useState(true);\n  const [modalusage, setmodalusage] = useState(false);\n  const [displayusage, setdisplayusage] = useState(true);\n  const [loadingchangecompanyusage, setloadingchangecompanyusage] =\n    useState(false);\n  const [loadingusage, setloadingusage] = useState(false);\n  // const [agents, setagents] = useState([])\n  // const [requesters, setrequesters] = useState([])\n  const [detaillist, setdetaillist] = useState([]);\n  const [models, setmodels] = useState([]);\n  const [sublocations, setsublocations] = useState([]);\n  const [locationsdisplay, setlocationsdisplay] = useState(false);\n  const [sublocationtrigger, setsublocationtrigger] = useState(-1);\n  const [activitytrigger, setactivitytrigger] = useState(0);\n\n  //helper\n\n  //handler\n  const handleDeleteItem = () => {\n    setloadingdelete(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/deleteInventory`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        id: Number(itemid),\n        notes: \"\",\n      }),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingdelete(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Item berhasil dihapus\",\n            duration: 3,\n          });\n          setmodaldelete(false);\n          rt.push(`/items`);\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleNotesItem = () => {\n    setloadingnotes(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/addInventoryNotes`, {\n      method: \"POST\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        id: Number(itemid),\n        notes: notes,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingnotes(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Notes berhasil ditambahkan\",\n            duration: 3,\n          });\n          setmodalnotes(false);\n          window.location.href = `/items/detail/${itemid}?active=activity`;\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleKondisiItem = () => {\n    setloadingkondisi(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/changeStatusCondition`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        id: Number(itemid),\n        notes: notekondisi,\n        status_condition: kondisi,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingkondisi(false);\n        setmodalkondisi(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Status Kondisi berhasil diubah\",\n            duration: 2,\n          });\n          window.location.href = `/items/detail/${itemid}`;\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n  const handleUsageItem = () => {\n    setloadingusage(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/changeStatusUsage`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(changeusage),\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setloadingusage(false);\n        setmodalusage(false);\n        if (res2.success) {\n          notification[\"success\"]({\n            message: \"Status Pemakaian berhasil diubah\",\n            duration: 2,\n          });\n          window.location.href = `/items/detail/${itemid}`;\n        } else if (!res2.success) {\n          notification[\"error\"]({\n            message: res2.message,\n            duration: 3,\n          });\n        }\n      });\n  };\n\n  //useEffect\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventory?id=${itemid}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var t = {};\n        for (var prop in res2.data) {\n          if (prop === \"additional_attributes\") {\n            t[prop] = res2.data[prop].map((doc, idx) => {\n              if (\n                doc.data_type === \"dropdown\" ||\n                doc.data_type === \"checkbox\"\n              ) {\n                return {\n                  ...doc,\n                  value: JSON.parse(doc.value),\n                };\n              } else {\n                return { ...doc };\n              }\n            });\n          } else {\n            t[prop] = res2.data[prop];\n          }\n        }\n        setmaindata(t);\n        setpraloading(false);\n        return t;\n      })\n      .then((res3) => {\n        fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getInventoryRelations`, {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        })\n          .then((res) => res.json())\n          .then((res2) => {\n            setinvrelations(res2.data);\n            var del_manuf = null;\n            res3.manufacturer_id === 0 || res3.manufacturer_id === null\n              ? (del_manuf = null)\n              : (del_manuf = res2.data.manufacturers.filter(\n                  (docfil) => docfil.id === res3.manufacturer_id\n                )[0].deleted_at);\n            setmanuf({\n              name:\n                res3.manufacturer_id === null || res3.manufacturer_id === 0\n                  ? \"-\"\n                  : res2.data.manufacturers.filter(\n                      (docfil) => docfil.id === res3.manufacturer_id\n                    )[0].name,\n              isnull: del_manuf !== null ? false : true,\n            });\n            res3.vendor_id === null || res3.vendor_id === 0\n              ? setvendor(\"-\")\n              : setvendor(\n                  res2.data.vendors.filter(\n                    (docfil) => docfil.id === res3.vendor_id\n                  )[0]?.name\n                );\n            setpraloading2(false);\n          });\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getFilterModels`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        setmodels(res2.data);\n      });\n  }, []);\n  useEffect(() => {\n    if (changeusage.relationship_type_id !== \"\") {\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getChangeStatusUsageDetailList?id=${changeusage.relationship_type_id}`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          changeusage.relationship_type_id === -3\n            ? setdetaillist([res2.data])\n            : setdetaillist(res2.data.data);\n        });\n    }\n  }, [changeusage]);\n  useEffect(() => {\n    if (sublocationtrigger !== -1) {\n      setloadingchangecompanyusage(true);\n      fetch(\n        `${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationshipInventoryDetailList?type_id=${changeusage.connected_id}`,\n        {\n          method: `GET`,\n          headers: {\n            Authorization: JSON.parse(initProps),\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((res2) => {\n          setloadingchangecompanyusage(false);\n          setsublocations(res2.data.children);\n        });\n    }\n  }, [sublocationtrigger]);\n  useEffect(() => {\n    fetch(\n      `${process.env.NEXT_PUBLIC_BACKEND_URL}/getRelationshipInventory?id=${itemid}&type_id=-4`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        setrelship(res2.data.from_inverse.concat(res2.data.not_from_inverse));\n      });\n  }, []);\n  return (\n    <Layout\n      st={st}\n      sidemenu={sidemenu}\n      tok={initProps}\n      pathArr={pathArr}\n      dataProfile={dataProfile}\n    >\n      <div\n        className=\"w-full h-auto grid grid-cols-1 md:grid-cols-4\"\n        id=\"createAssetsWrapper\"\n      >\n        <div className=\" col-span-1 md:col-span-4 mb-8\">\n          <Sticky containerSelectorFocus=\"#createAgentsWrapper\">\n            <div className=\" col-span-4 flex justify-between py-5 px-4 border-t border-b bg-white\">\n              <div className=\"flex items-center\">\n                <div className=\"flex flex-col\">\n                  <p className=\" text-gray-400 mb-0\">Item:</p>\n                  <h1 className=\"font-semibold py-2 text-2xl mb-0 mr-20\">\n                    {maindata.mig_id} - {maindata.model_inventory.name}\n                  </h1>\n                </div>\n                {praloading ? null : (\n                  <>\n                    <div className=\"flex flex-col mr-7 p-2\">\n                      <p className=\"mb-1\">Status Pemakaian:</p>\n                      {displayusage ? (\n                        <Select\n                          style={{ width: `10rem` }}\n                          placeholder=\"Masukkan Status Pemakaian\"\n                          defaultValue={\n                            maindata.status_usage === 0 ||\n                            maindata.status_usage === null\n                              ? null\n                              : maindata.status_usage\n                          }\n                          onChange={(value) => {\n                            setdisabledusage((prev) => {\n                              if (value !== 1) {\n                                return false;\n                              } else {\n                                return true;\n                              }\n                            });\n                            setchangeusage({\n                              ...changeusage,\n                              status_usage: value,\n                            });\n                            setmodalusage(true);\n                            setdisplayusage(false);\n                          }}\n                        >\n                          <Select.Option value={1}>\n                            <strong>In Used</strong>\n                          </Select.Option>\n                          <Select.Option value={2}>\n                            <strong>In Stock</strong>\n                          </Select.Option>\n                          <Select.Option value={3}>\n                            <strong>Replacement</strong>\n                          </Select.Option>\n                        </Select>\n                      ) : null}\n                    </div>\n                    <div className=\"flex flex-col p-2\">\n                      <p className=\"mb-1\">Kondisi:</p>\n                      {displaykondisi ? (\n                        <Select\n                          style={{ width: `10rem` }}\n                          placeholder=\"Masukkan Status Kondisi\"\n                          defaultValue={\n                            maindata.status_condition === 0 ||\n                            maindata.status_condition === null\n                              ? null\n                              : maindata.status_condition\n                          }\n                          onChange={(value) => {\n                            setkondisi(value);\n                            setmodalkondisi(true);\n                            setdisplaykondisi(false);\n                          }}\n                        >\n                          <Select.Option value={1}>\n                            <div className=\"p-1 flex w-full items-center\">\n                              <div className=\"w-3 h-3 rounded-full bg-green-500 mr-1\"></div>\n                              <p className=\"mb-0 font-semibold\">Good</p>\n                            </div>\n                          </Select.Option>\n                          <Select.Option value={2}>\n                            <div className=\"p-1 flex w-full items-center\">\n                              <div className=\"w-3 h-3 rounded-full bg-gray-500 mr-1\"></div>\n                              <p className=\"mb-0 font-semibold\">Grey</p>\n                            </div>\n                          </Select.Option>\n                          <Select.Option value={3}>\n                            <div className=\"p-1 flex w-full items-center\">\n                              <div className=\"w-3 h-3 rounded-full bg-red-500 mr-1\"></div>\n                              <p className=\"mb-0 font-semibold\">Bad</p>\n                            </div>\n                          </Select.Option>\n                        </Select>\n                      ) : null}\n                    </div>\n                  </>\n                )}\n              </div>\n              <div className=\"flex space-x-2 items-center\">\n                <Button\n                  style={{ marginRight: `1rem` }}\n                  onClick={() => {\n                    setmodalnotes(true);\n                  }}\n                  size=\"large\"\n                >\n                  Tambah Notes\n                </Button>\n                <Button\n                  type=\"danger\"\n                  size=\"large\"\n                  onClick={() => {\n                    setmodaldelete(true);\n                  }}\n                >\n                  Hapus\n                </Button>\n              </div>\n            </div>\n          </Sticky>\n        </div>\n        <div className=\"col-span-1 md:col-span-4 mb-8\">\n          <div className=\" hidden md:block\">\n            <Tabs\n              tabPosition={`left`}\n              defaultActiveKey={activeTab}\n              onTabClick={(key, e) => {\n                if (key === \"activity\") {\n                  setactivitytrigger((prev) => prev + 1);\n                }\n              }}\n            >\n              <TabPane tab=\"Overview\" key={`overview`}>\n                <Overview\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  manuf={manuf}\n                  vendor={vendor}\n                  praloading={praloading}\n                />\n              </TabPane>\n              <TabPane tab=\"Konfigurasi Part\" key={`konfigurasiPart`}>\n                <KonfigurasiPart\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  invrelations={invrelations}\n                  praloading2={praloading2}\n                  models={models}\n                  setmodels={setmodels}\n                />\n              </TabPane>\n              <TabPane tab=\"Relationship\" key={`relationship`}>\n                <Relationship\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                />\n              </TabPane>\n              <TabPane tab=\"Association\" key={`association`}>\n                <Association\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  praloading={praloading}\n                />\n              </TabPane>\n              <TabPane tab=\"Activity\" key={`activity`}>\n                <Acitivty\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  invrelations={invrelations}\n                  activitytrigger={activitytrigger}\n                />\n              </TabPane>\n            </Tabs>\n          </div>\n          <div className=\" block md:hidden\">\n            <Tabs tabPosition={`top`} defaultActiveKey={activeTab}>\n              <TabPane tab=\"Overview\" key={`overview`}>\n                <Overview\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  manuf={manuf}\n                  vendor={vendor}\n                  praloading={praloading}\n                />\n              </TabPane>\n              <TabPane tab=\"Konfigurasi Part\" key={`konfigurasiPart`}>\n                <KonfigurasiPart\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  invrelations={invrelations}\n                  praloading2={praloading2}\n                  models={models}\n                  setmodels={setmodels}\n                />\n              </TabPane>\n              <TabPane tab=\"Relationship\" key={`relationship`}>\n                <Relationship\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                />\n              </TabPane>\n              <TabPane tab=\"Association\" key={`association`}>\n                <Association\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  praloading={praloading}\n                />\n              </TabPane>\n              <TabPane tab=\"Activity\" key={`activity`}>\n                <Acitivty\n                  itemid={itemid}\n                  initProps={initProps}\n                  maindata={maindata}\n                  invrelations={invrelations}\n                  activitytrigger={activitytrigger}\n                />\n              </TabPane>\n            </Tabs>\n          </div>\n        </div>\n      </div>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">\n              Form Ubah Status Pemakaian {maindata.inventory_name}\n            </h1>\n            <div className=\"flex\">\n              <>\n                <Button\n                  type=\"default\"\n                  onClick={() => {\n                    setmodalusage(false);\n                    setdisplayusage(true);\n                  }}\n                  style={{ marginRight: `1rem` }}\n                >\n                  Batal\n                </Button>\n                <Button\n                  type=\"primary\"\n                  disabled={disabledusage}\n                  onClick={handleUsageItem}\n                  loading={loadingusage}\n                >\n                  Simpan\n                </Button>\n              </>\n            </div>\n          </div>\n        }\n        visible={modalusage}\n        onCancel={() => {\n          setmodalusage(false);\n          setdisplayusage(true);\n        }}\n        footer={null}\n        width={760}\n      >\n        <div className=\"flex flex-col mb-3\">\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Status Pemakaian <span className=\"usagemodal\"></span>\n            </p>\n            <Select disabled defaultValue={changeusage.status_usage}>\n              <Select.Option value={1}>In Used</Select.Option>\n              <Select.Option value={2}>In Stock</Select.Option>\n              <Select.Option value={3}>Replacement</Select.Option>\n            </Select>\n            <style jsx>\n              {`\n                                .usagemodal::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n          {changeusage.status_usage === 1 ? (\n            <div className=\"flex flex-col mb-3\">\n              <div className=\"flex flex-col mb-3\">\n                <p className=\"mb-0\">\n                  Digunakan Oleh <span className=\"bymodal\"></span>\n                </p>\n                <Select\n                  onChange={(value) => {\n                    setchangeusage({\n                      ...changeusage,\n                      relationship_type_id: value,\n                      detail_connected_id: null,\n                      connected_id: null,\n                    });\n                    setdisabledusage(true);\n                    if (value !== 3) {\n                      setlocationsdisplay(false);\n                    }\n                  }}\n                >\n                  <Select.Option value={-1}>Agent</Select.Option>\n                  <Select.Option value={-2}>Requester</Select.Option>\n                  <Select.Option value={-3}>Company</Select.Option>\n                </Select>\n                <style jsx>\n                  {`\n                                            .bymodal::before{\n                                                content: '*';\n                                                color: red;\n                                            }\n                                        `}\n                </style>\n              </div>\n              <div className=\"flex flex-col mb-3 ml-5\">\n                <p className=\"mb-0\">\n                  Nama {changeusage.relationship_type_id === -1 && \"Agent\"}{\" \"}\n                  {changeusage.relationship_type_id === -2 && \"Requester\"}{\" \"}\n                  {changeusage.relationship_type_id === -3 && \"Company\"}{\" \"}\n                  <span className=\"namabymodal\"></span>\n                </p>\n                {changeusage.relationship_type_id === -3 ? (\n                  <TreeSelect\n                    treeData={[invrelations.tree_companies]}\n                    treeDefaultExpandedKeys={[1]}\n                    onChange={(value) => {\n                      setchangeusage({\n                        ...changeusage,\n                        connected_id: value,\n                      });\n                      changeusage.relationship_type_id === -3\n                        ? setsublocationtrigger((prev) => prev + 1)\n                        : null;\n                      changeusage.relationship_type_id === -3\n                        ? setlocationsdisplay(true)\n                        : null;\n                      setdisabledusage(false);\n                    }}\n                  ></TreeSelect>\n                ) : (\n                  <Select\n                    value={changeusage.connected_id}\n                    onChange={(value) => {\n                      setchangeusage({\n                        ...changeusage,\n                        connected_id: value,\n                      });\n                      setdisabledusage(false);\n                    }}\n                  >\n                    {changeusage.relationship_type_id === -1 &&\n                      detaillist.map((doc, idx) => (\n                        <Select.Option value={doc.id}>{doc.name}</Select.Option>\n                      ))}\n                    {changeusage.relationship_type_id === -2 &&\n                      detaillist.map((doc, idx) => (\n                        <Select.Option value={doc.id}>{doc.name}</Select.Option>\n                      ))}\n                    {/* {\n                                            changeusage.relationship_type_id === 3 &&\n                                            invrelations.tree_companies.map((doc, idx) => (\n                                                <Select.Option value={doc.id}>{doc.name}</Select.Option>\n                                            ))\n                                        } */}\n                  </Select>\n                )}\n                <style jsx>\n                  {`\n                                            .namabymodal::before{\n                                                content: '*';\n                                                color: red;\n                                            }\n                                        `}\n                </style>\n              </div>\n              {changeusage.connected_id === -3 || locationsdisplay === true ? (\n                <div className=\"flex flex-col ml-5\">\n                  <p className=\"mb-0\">Nama Lokasi</p>\n                  <TreeSelect\n                    loading={loadingchangecompanyusage}\n                    treeData={sublocations}\n                    onChange={(value) => {\n                      setchangeusage({\n                        ...changeusage,\n                        detail_connected_id: value,\n                      });\n                    }}\n                  ></TreeSelect>\n                </div>\n              ) : null}\n            </div>\n          ) : null}\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">Notes</p>\n            <Input.TextArea\n              rows={3}\n              placeholder=\"Masukkan Notes\"\n              onChange={(e) => {\n                setchangeusage({\n                  ...changeusage,\n                  notes: e.target.value,\n                });\n              }}\n            ></Input.TextArea>\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">\n              Form Ubah Status Kondisi {maindata.inventory_name}\n            </h1>\n            <div className=\"flex\">\n              <>\n                <Button\n                  type=\"default\"\n                  onClick={() => {\n                    setmodalkondisi(false);\n                    setdisplaykondisi(true);\n                  }}\n                  style={{ marginRight: `1rem` }}\n                >\n                  Batal\n                </Button>\n                <Button\n                  type=\"primary\"\n                  onClick={handleKondisiItem}\n                  loading={loadingkondisi}\n                >\n                  Simpan\n                </Button>\n              </>\n            </div>\n          </div>\n        }\n        visible={modalkondisi}\n        onCancel={() => {\n          setmodalkondisi(false);\n          setdisplaykondisi(true);\n        }}\n        footer={null}\n        width={600}\n      >\n        <div className=\"flex flex-col mb-3\">\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">\n              Status Kondisi <span className=\"kondisimodal\"></span>\n            </p>\n            <Select disabled defaultValue={kondisi}>\n              <Select.Option value={1}>\n                <p className=\"mb-0\">Good</p>\n              </Select.Option>\n              <Select.Option value={2}>\n                <p className=\"mb-0\">Grey</p>\n              </Select.Option>\n              <Select.Option value={3}>\n                <p className=\"mb-0\">Bad</p>\n              </Select.Option>\n            </Select>\n            <style jsx>\n              {`\n                                .kondisimodal::before{\n                                    content: '*';\n                                    color: red;\n                                }\n                            `}\n            </style>\n          </div>\n          <div className=\"flex flex-col mb-3\">\n            <p className=\"mb-0\">Notes</p>\n            <Input.TextArea\n              rows={3}\n              placeholder=\"Masukkan Notes\"\n              onChange={(e) => {\n                setnotekondisi(e.target.value);\n              }}\n            ></Input.TextArea>\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title={\n          <div className=\"flex justify-between p-5 mt-5\">\n            <h1 className=\"font-bold text-xl\">\n              Form Tambah Notes {maindata.inventory_name}\n            </h1>\n            <div className=\"flex\">\n              <>\n                <Button\n                  type=\"default\"\n                  onClick={() => {\n                    setmodalnotes(false);\n                  }}\n                  style={{ marginRight: `1rem` }}\n                >\n                  Batal\n                </Button>\n                <Button\n                  type=\"primary\"\n                  disabled={notes === \"\"}\n                  onClick={handleNotesItem}\n                  loading={loadingnotes}\n                >\n                  Simpan\n                </Button>\n              </>\n            </div>\n          </div>\n        }\n        visible={modalnotes}\n        onCancel={() => {\n          setmodalnotes(false);\n        }}\n        footer={null}\n        width={600}\n      >\n        <div className=\"flex flex-col mb-5\">\n          <p className=\"mb-0\">Notes</p>\n          <Input.TextArea\n            rows={3}\n            placeholder=\"Masukkan Notes\"\n            onChange={(e) => {\n              setnotes(e.target.value);\n            }}\n          ></Input.TextArea>\n        </div>\n      </Modal>\n      <Modal\n        title={\n          <h1 className=\"font-semibold\">\n            Apakah anda yakin ingin menghapus item \"{maindata.inventory_name} -{\" \"}\n            {maindata.mig_id}\"?\n          </h1>\n        }\n        visible={modaldelete}\n        onCancel={() => {\n          setmodaldelete(false);\n        }}\n        okText=\"Ya\"\n        cancelText=\"Tidak\"\n        onOk={handleDeleteItem}\n        okButtonProps={{ loading: loadingdelete }}\n        width={720}\n      >\n        <div className=\"flex flex-col mb-5\">\n          <div className=\"flex flex-col mb-4\">\n            <p className=\"mb-2 text-xs font-semibold\">\n              Item ini memiliki Item Part sebagai berikut :\n            </p>\n            <div className=\"mb-2 text-xs flex flex-col\">\n              {maindata.inventory_parts.length === 0 ? (\n                <p className=\"font-semibold\">-</p>\n              ) : (\n                <>\n                  {maindata.inventory_parts.map((docempty, idxempty) => (\n                    <p key={idxempty}>\n                      - <strong>{docempty.inventory_name}</strong>\n                    </p>\n                  ))}\n                </>\n              )}\n            </div>\n            <p className=\"mb-2 text-xs font-semibold\">\n              Item ini sedang memiliki hubungan dengan item berikut:\n            </p>\n            <ul className=\"mb-2 text-xs\">\n              {relship.length === 0 ? (\n                <p className=\"font-semibold\">-</p>\n              ) : (\n                relship.map((docrel, idxrel) => (\n                  <li key={idxrel}>\n                    -{\" \"}\n                    <strong>\n                      {docrel.type} - {docrel.connected_detail_name}\n                    </strong>\n                  </li>\n                ))\n              )}\n            </ul>\n            <p className=\"mb-2 text-xs font-semibold text-red-500\">\n              Dengan menghapus item ini akan menghilangkan seluruh hubungan\n              dengan item diatas!\n            </p>\n          </div>\n          <hr />\n        </div>\n      </Modal>\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res, params }) {\n  var initProps = {};\n  const itemid = params.itemId;\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"3\",\n      itemid,\n    },\n  };\n}\n\nexport default ItemDetail;\n"]},"metadata":{},"sourceType":"module"}