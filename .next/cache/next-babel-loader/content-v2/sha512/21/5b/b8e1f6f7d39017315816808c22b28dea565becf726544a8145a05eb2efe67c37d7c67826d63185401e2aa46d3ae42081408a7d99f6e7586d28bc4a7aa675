{"ast":null,"code":"import _Table from \"antd/lib/table\";\nimport _Select from \"antd/lib/select\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport _notification from \"antd/lib/notification\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/agents/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction Agents({\n  initProps,\n  dataProfile,\n  dataListAgent,\n  sidemenu\n}) {\n  const rt = useRouter();\n  var location_id1 = \"\",\n      name1 = \"\",\n      is_enabled1 = \"\";\n  const {\n    location_id,\n    name,\n    is_enabled\n  } = rt.query;\n\n  if (location_id) {\n    location_id1 = location_id;\n  }\n\n  if (name) {\n    name1 = name;\n  }\n\n  if (is_enabled) {\n    is_enabled1 = is_enabled;\n  } //data payload\n\n\n  const {\n    0: rawdata,\n    1: setrawdata\n  } = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  }); //data lokasi\n\n  const {\n    0: datalokasi,\n    1: setdatalokasi\n  } = useState([]); //loading pre render\n\n  const {\n    0: datarawloading,\n    1: setdatarawloading\n  } = useState(false); //loading pre render\n\n  const {\n    0: praloading,\n    1: setpraloading\n  } = useState(true); //data agents\n\n  const {\n    0: dataagents,\n    1: setdataagents\n  } = useState([]); //state row table\n\n  const {\n    0: rowstate,\n    1: setrowstate\n  } = useState(0); //FILTER\n\n  const {\n    0: namasearchact,\n    1: setnamasearchact\n  } = useState(name1 === \"\" ? false : true);\n  const {\n    0: asallokasifilteract,\n    1: setasallokasifilteract\n  } = useState(location_id1 === \"\" ? false : true);\n  const {\n    0: statusfilteract,\n    1: setstatusfilteract\n  } = useState(is_enabled1 === \"\" ? false : true);\n  const {\n    0: namavalue,\n    1: setnamavalue\n  } = useState(null);\n  const {\n    0: asallokasivalue,\n    1: setasallokasivalue\n  } = useState(null);\n  const {\n    0: statusvalue,\n    1: setstatusvalue\n  } = useState(null);\n  const {\n    0: namaasset,\n    1: setnamaasset\n  } = useState(location_id1);\n  const {\n    0: defasset,\n    1: setdefasset\n  } = useState(null);\n  const tok = initProps;\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  const {\n    originPath\n  } = rt.query;\n  const columnsDD = [{\n    dataIndex: \"profil_image\",\n    key: `profil_image`,\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: record.profile_image,\n            alt: \"imageProfile\",\n            className: \" object-cover w-10 h-10 rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)\n        }, void 0, false)\n      };\n    }\n  }, {\n    title: \"Nama\",\n    dataIndex: \"name\"\n  }, {\n    title: \"Email\",\n    dataIndex: \"email\"\n  }, {\n    title: \"Posisi\",\n    dataIndex: \"position\"\n  }, {\n    title: \"No. Handphone\",\n    dataIndex: \"phone_number\"\n  }, {\n    title: \"Asal Lokasi\",\n    dataIndex: \"company_name\"\n  }, {\n    title: \"Status\",\n    dataIndex: \"is_enabled\",\n    render: (text, record, index) => {\n      return {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: record.is_enabled ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md w-auto h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\",\n            children: \"Aktif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md w-auto h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\",\n            children: \"Non-aktif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)\n      };\n    }\n  }]; //filtering\n\n  const onChangeSearch = e => {\n    if (e.target.value === \"\") {\n      window.location.href = `/admin/agents?name=&location_id=${asallokasifilteract ? location_id1 : \"\"}&is_enabled=${statusfilteract ? is_enabled1 : \"\"}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n\n  const onChangeAsalLokasi = value => {\n    if (typeof value === \"undefined\") {\n      window.location.href = `/admin/agents?name=${namasearchact ? name1 : \"\"}&location_id=&is_enabled=${statusfilteract ? is_enabled1 : \"\"}`;\n      setasallokasifilteract(false);\n    } else {\n      setasallokasifilteract(true);\n      setasallokasivalue(value);\n    }\n  };\n\n  const onChangeStatus = value => {\n    if (typeof value === \"undefined\") {\n      window.location.href = `/admin/agents?name=${namasearchact ? name1 : \"\"}&location_id=${asallokasifilteract ? location_id1 : \"\"}&is_enabled=`;\n      setstatusfilteract(false);\n    } else {\n      setstatusfilteract(true);\n      setstatusvalue(value);\n    }\n  };\n\n  const onFinalClick = () => {\n    window.location.href = `/admin/agents?name=${namasearchact ? namavalue === null ? name1 : namavalue : \"\"}&location_id=${asallokasifilteract ? asallokasivalue === null ? location_id1 : asallokasivalue : \"\"}&is_enabled=${statusfilteract ? statusvalue === \"\" ? is_enabled1 : statusvalue : \"\"}`;\n  }; //useEffect\n\n\n  useEffect(() => {\n    setpraloading(true);\n    setdatarawloading(true);\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAgentList?name=${name1}&company_id=${location_id1}${is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`}`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res2 => {\n      setrawdata(res2.data);\n      var dataDD = [];\n\n      if (!res2) {\n        dataDD = [];\n\n        _notification[\"error\"]({\n          message: res2.message.errorInfo.status_detail,\n          duration: 3\n        });\n\n        rt.push(\"/dashboard/admin\");\n      } else {\n        dataDD = res2.data.data.map((doc, idx) => {\n          return {\n            nomor: idx + 1,\n            id: doc.id,\n            profile_image: doc.profile_image === \"-\" || doc.profile_image === \"\" ? `/default-users.jpeg` : doc.profile_image,\n            name: doc.name,\n            email: doc.email,\n            phone_number: doc.phone_number,\n            company_name: doc.company_name,\n            is_enabled: doc.is_enabled,\n            company_id: doc.company_id,\n            position: doc.position\n          };\n        });\n      }\n\n      setdataagents(dataDD);\n      setpraloading(false);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getBranchCompanyList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(res => res.json()).then(res2 => {\n      var selectedBranchCompany = {};\n\n      const recursiveSearchBranchCompany = (doc, key) => {\n        for (var i = 0; i < doc.length; i++) {\n          if (doc[i].id === key) {\n            selectedBranchCompany = doc[i];\n          } else {\n            if (doc[i].children) {\n              recursiveSearchBranchCompany(doc[i].children, key);\n            }\n          }\n        }\n      };\n\n      recursiveSearchBranchCompany([res2.data], Number(namaasset));\n      setdefasset(selectedBranchCompany.key);\n      setdatalokasi([res2.data]);\n      setdatarawloading(false);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: tok,\n    dataProfile: dataProfile,\n    pathArr: pathArr,\n    sidemenu: sidemenu,\n    originPath: originPath,\n    st: st,\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold text-base w-auto\",\n            children: \"Agents\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this),\n        /*#__PURE__*/\n        // [109].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n        _jsxDEV(\"div\", {\n          className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: {\n              pathname: \"/admin/agents/create/\"\n            },\n            children: /*#__PURE__*/_jsxDEV(_Button, {\n              size: \"large\",\n              type: \"primary\",\n              children: \"Tambah\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this),\n      /*#__PURE__*/\n      // [108].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n      _jsxDEV(\"div\", {\n        className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n          children: [datarawloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex mb-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" w-10/12 mr-1 grid grid-cols-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-3 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_Input, {\n                  defaultValue: name1,\n                  style: {\n                    width: `100%`,\n                    marginRight: `0.5rem`\n                  },\n                  placeholder: \"Cari nama agent\",\n                  onChange: onChangeSearch,\n                  allowClear: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-2 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                  defaultValue: location_id1 === \"\" ? null : Number(defasset),\n                  allowClear: true,\n                  dropdownStyle: {\n                    maxHeight: 400,\n                    overflow: \"auto\"\n                  },\n                  treeData: datalokasi,\n                  placeholder: \"Cari asal lokasi agent\",\n                  treeDefaultExpandAll: true,\n                  style: {\n                    width: `100%`,\n                    marginRight: `0.5rem`\n                  },\n                  onChange: onChangeAsalLokasi\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-1 mr-1\",\n                children: /*#__PURE__*/_jsxDEV(_Select, {\n                  defaultValue: is_enabled1 === \"\" ? null : is_enabled1 === \"true\" ? true : false,\n                  placeholder: \"Pilih status agent\",\n                  style: {\n                    width: `100%`,\n                    marginRight: `0.5rem`\n                  },\n                  onChange: onChangeStatus,\n                  allowClear: true,\n                  children: [/*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: true,\n                    children: \"Aktif\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 331,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(_Select.Option, {\n                    value: false,\n                    children: \"Non Aktif\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2/12\",\n              children: /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                style: {\n                  width: `100%`\n                },\n                onClick: onFinalClick,\n                children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(_Table, {\n            pagination: {\n              pageSize: 10,\n              total: rawdata.total,\n              onChange: (page, pageSize) => {\n                setpraloading(true);\n                fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAgentList?page=${page}&rows=10&name=${name1}&company_id=${location_id1}${is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`}`, {\n                  method: `GET`,\n                  headers: {\n                    Authorization: JSON.parse(initProps)\n                  }\n                }).then(res => res.json()).then(res2 => {\n                  setrawdata(res2.data);\n                  var temppagination = res2.data.data.map((doc, idx) => _objectSpread(_objectSpread({}, doc), {}, {\n                    profile_image: doc.profile_image === \"-\" || doc.profile_image === \"\" ? `/default-users.jpeg` : doc.profile_image\n                  }));\n                  setdataagents(temppagination);\n                  setpraloading(false);\n                });\n              }\n            },\n            scroll: {\n              x: 200\n            },\n            dataSource: dataagents,\n            columns: columnsDD,\n            loading: praloading,\n            onRow: (record, rowIndex) => {\n              return {\n                onMouseOver: event => {\n                  setrowstate(record.id);\n                },\n                onClick: event => {\n                  {\n                    // [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                    rt.push(`/admin/agents/detail/${record.id}`); // :\n                    // null\n                  }\n                }\n              };\n            },\n            rowClassName: (record, idx) => {\n              return record.id === rowstate ? `cursor-pointer` : ``;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 5\n  }, this);\n}\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  const reqBodyAccountList = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\"\n  };\n  var initProps = {};\n\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`, {\n    method: `GET`,\n    headers: {\n      Authorization: JSON.parse(initProps)\n    }\n  });\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP; // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      // dataListAgent,\n      sidemenu: \"61\"\n    }\n  };\n}\nexport default Agents;","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/agents/index.js"],"names":["SearchOutlined","Link","useRouter","useEffect","useState","Layout","st","httpcookie","Agents","initProps","dataProfile","dataListAgent","sidemenu","rt","location_id1","name1","is_enabled1","location_id","name","is_enabled","query","rawdata","setrawdata","current_page","data","first_page_url","from","last_page","last_page_url","next_page_url","path","per_page","prev_page_url","to","total","datalokasi","setdatalokasi","datarawloading","setdatarawloading","praloading","setpraloading","dataagents","setdataagents","rowstate","setrowstate","namasearchact","setnamasearchact","asallokasifilteract","setasallokasifilteract","statusfilteract","setstatusfilteract","namavalue","setnamavalue","asallokasivalue","setasallokasivalue","statusvalue","setstatusvalue","namaasset","setnamaasset","defasset","setdefasset","tok","pathArr","pathname","split","slice","originPath","columnsDD","dataIndex","key","render","text","record","index","children","profile_image","title","onChangeSearch","e","target","value","window","location","href","onChangeAsalLokasi","onChangeStatus","onFinalClick","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","then","res","json","res2","dataDD","message","errorInfo","status_detail","duration","push","map","doc","idx","nomor","id","email","phone_number","company_name","company_id","position","selectedBranchCompany","recursiveSearchBranchCompany","i","length","Number","width","marginRight","maxHeight","overflow","pageSize","onChange","page","temppagination","x","rowIndex","onMouseOver","event","onClick","getServerSideProps","req","reqBodyAccountList","rows","order_by","cookie","redirect","permanent","destination","cookiesJSON1","token","resourcesGP","resjsonGP","props"],"mappings":"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","sourcesContent":["import { SearchOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Select, Table, TreeSelect, notification } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\n\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nfunction Agents({ initProps, dataProfile, dataListAgent, sidemenu }) {\n  const rt = useRouter();\n  var location_id1 = \"\",\n    name1 = \"\",\n    is_enabled1 = \"\";\n  const { location_id, name, is_enabled } = rt.query;\n  if (location_id) {\n    location_id1 = location_id;\n  }\n  if (name) {\n    name1 = name;\n  }\n  if (is_enabled) {\n    is_enabled1 = is_enabled;\n  }\n  //data payload\n  const [rawdata, setrawdata] = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null,\n  });\n  //data lokasi\n  const [datalokasi, setdatalokasi] = useState([]);\n  //loading pre render\n  const [datarawloading, setdatarawloading] = useState(false);\n  //loading pre render\n  const [praloading, setpraloading] = useState(true);\n  //data agents\n  const [dataagents, setdataagents] = useState([]);\n  //state row table\n  const [rowstate, setrowstate] = useState(0);\n  //FILTER\n  const [namasearchact, setnamasearchact] = useState(\n    name1 === \"\" ? false : true\n  );\n  const [asallokasifilteract, setasallokasifilteract] = useState(\n    location_id1 === \"\" ? false : true\n  );\n  const [statusfilteract, setstatusfilteract] = useState(\n    is_enabled1 === \"\" ? false : true\n  );\n  const [namavalue, setnamavalue] = useState(null);\n  const [asallokasivalue, setasallokasivalue] = useState(null);\n  const [statusvalue, setstatusvalue] = useState(null);\n  const [namaasset, setnamaasset] = useState(location_id1);\n  const [defasset, setdefasset] = useState(null);\n  const tok = initProps;\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  const { originPath } = rt.query;\n\n  const columnsDD = [\n    {\n      dataIndex: \"profil_image\",\n      key: `profil_image`,\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>\n              <img\n                src={record.profile_image}\n                alt=\"imageProfile\"\n                className=\" object-cover w-10 h-10 rounded-full\"\n              />\n            </>\n          ),\n        };\n      },\n    },\n    {\n      title: \"Nama\",\n      dataIndex: \"name\",\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"email\",\n    },\n    {\n      title: \"Posisi\",\n      dataIndex: \"position\",\n    },\n    {\n      title: \"No. Handphone\",\n      dataIndex: \"phone_number\",\n    },\n    {\n      title: \"Asal Lokasi\",\n      dataIndex: \"company_name\",\n    },\n    {\n      title: \"Status\",\n      dataIndex: \"is_enabled\",\n      render: (text, record, index) => {\n        return {\n          children: (\n            <>\n              {record.is_enabled ? (\n                <div className=\"rounded-md w-auto h-auto px-1 text-center py-1 bg-blue-100 border border-blue-200 text-blue-600\">\n                  Aktif\n                </div>\n              ) : (\n                <div className=\"rounded-md w-auto h-auto px-1 text-center py-1 bg-red-100 border border-red-200 text-red-600\">\n                  {\"Non-aktif\"}\n                </div>\n              )}\n            </>\n          ),\n        };\n      },\n    },\n  ];\n\n  //filtering\n  const onChangeSearch = (e) => {\n    if (e.target.value === \"\") {\n      window.location.href = `/admin/agents?name=&location_id=${\n        asallokasifilteract ? location_id1 : \"\"\n      }&is_enabled=${statusfilteract ? is_enabled1 : \"\"}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n  const onChangeAsalLokasi = (value) => {\n    if (typeof value === \"undefined\") {\n      window.location.href = `/admin/agents?name=${\n        namasearchact ? name1 : \"\"\n      }&location_id=&is_enabled=${statusfilteract ? is_enabled1 : \"\"}`;\n      setasallokasifilteract(false);\n    } else {\n      setasallokasifilteract(true);\n      setasallokasivalue(value);\n    }\n  };\n  const onChangeStatus = (value) => {\n    if (typeof value === \"undefined\") {\n      window.location.href = `/admin/agents?name=${\n        namasearchact ? name1 : \"\"\n      }&location_id=${asallokasifilteract ? location_id1 : \"\"}&is_enabled=`;\n      setstatusfilteract(false);\n    } else {\n      setstatusfilteract(true);\n      setstatusvalue(value);\n    }\n  };\n  const onFinalClick = () => {\n    window.location.href = `/admin/agents?name=${\n      namasearchact ? (namavalue === null ? name1 : namavalue) : \"\"\n    }&location_id=${\n      asallokasifilteract\n        ? asallokasivalue === null\n          ? location_id1\n          : asallokasivalue\n        : \"\"\n    }&is_enabled=${\n      statusfilteract ? (statusvalue === \"\" ? is_enabled1 : statusvalue) : \"\"\n    }`;\n  };\n\n  //useEffect\n  useEffect(() => {\n    setpraloading(true);\n    setdatarawloading(true);\n    fetch(\n      `${\n        process.env.NEXT_PUBLIC_BACKEND_URL\n      }/getAgentList?name=${name1}&company_id=${location_id1}${\n        is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`\n      }`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        setrawdata(res2.data);\n        var dataDD = [];\n        if (!res2) {\n          dataDD = [];\n          notification[\"error\"]({\n            message: res2.message.errorInfo.status_detail,\n            duration: 3,\n          });\n          rt.push(\"/dashboard/admin\");\n        } else {\n          dataDD = res2.data.data.map((doc, idx) => {\n            return {\n              nomor: idx + 1,\n              id: doc.id,\n              profile_image:\n                doc.profile_image === \"-\" || doc.profile_image === \"\"\n                  ? `/default-users.jpeg`\n                  : doc.profile_image,\n              name: doc.name,\n              email: doc.email,\n              phone_number: doc.phone_number,\n              company_name: doc.company_name,\n              is_enabled: doc.is_enabled,\n              company_id: doc.company_id,\n              position: doc.position,\n            };\n          });\n        }\n        setdataagents(dataDD);\n        setpraloading(false);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getBranchCompanyList`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var selectedBranchCompany = {};\n        const recursiveSearchBranchCompany = (doc, key) => {\n          for (var i = 0; i < doc.length; i++) {\n            if (doc[i].id === key) {\n              selectedBranchCompany = doc[i];\n            } else {\n              if (doc[i].children) {\n                recursiveSearchBranchCompany(doc[i].children, key);\n              }\n            }\n          }\n        };\n        recursiveSearchBranchCompany([res2.data], Number(namaasset));\n        setdefasset(selectedBranchCompany.key);\n        setdatalokasi([res2.data]);\n        setdatarawloading(false);\n      });\n  }, []);\n  return (\n    <Layout\n      tok={tok}\n      dataProfile={dataProfile}\n      pathArr={pathArr}\n      sidemenu={sidemenu}\n      originPath={originPath}\n      st={st}\n    >\n      <>\n        <div className=\"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\">\n          <div className=\" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\">\n            <div className=\"font-semibold text-base w-auto\">Agents</div>\n          </div>\n          {\n            // [109].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n            <div className=\" col-span-1 md:col-span-1 flex md:justify-end items-center\">\n              <Link\n                href={{\n                  pathname: \"/admin/agents/create/\",\n                }}\n              >\n                <Button size=\"large\" type=\"primary\">\n                  Tambah\n                </Button>\n              </Link>\n            </div>\n          }\n        </div>\n        {\n          // [108].every((curr) => dataProfile.data.registered_feature.includes(curr)) &&\n          <div className=\"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\">\n            <div className=\"md:col-span-5 col-span-1 flex flex-col py-3\">\n              {datarawloading ? null : (\n                <div className=\"flex mb-8\">\n                  <div className=\" w-10/12 mr-1 grid grid-cols-6\">\n                    <div className=\"col-span-3 mr-1\">\n                      <Input\n                        defaultValue={name1}\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        placeholder=\"Cari nama agent\"\n                        onChange={onChangeSearch}\n                        allowClear\n                      ></Input>\n                    </div>\n                    <div className=\"col-span-2 mr-1\">\n                      <TreeSelect\n                        defaultValue={\n                          location_id1 === \"\" ? null : Number(defasset)\n                        }\n                        allowClear\n                        dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                        treeData={datalokasi}\n                        placeholder=\"Cari asal lokasi agent\"\n                        treeDefaultExpandAll\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        onChange={onChangeAsalLokasi}\n                      />\n                    </div>\n                    <div className=\"col-span-1 mr-1\">\n                      <Select\n                        defaultValue={\n                          is_enabled1 === \"\"\n                            ? null\n                            : is_enabled1 === \"true\"\n                            ? true\n                            : false\n                        }\n                        placeholder=\"Pilih status agent\"\n                        style={{ width: `100%`, marginRight: `0.5rem` }}\n                        onChange={onChangeStatus}\n                        allowClear\n                      >\n                        <Select.Option value={true}>Aktif</Select.Option>\n                        <Select.Option value={false}>Non Aktif</Select.Option>\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"w-2/12\">\n                    <Button\n                      type=\"primary\"\n                      style={{ width: `100%` }}\n                      onClick={onFinalClick}\n                    >\n                      <SearchOutlined />\n                    </Button>\n                    {/* <Button style={{ width: `40%` }} onClick={() => { setdataagents(dataraw) }}>Reset</Button> */}\n                  </div>\n                </div>\n              )}\n              <Table\n                pagination={{\n                  pageSize: 10,\n                  total: rawdata.total,\n                  onChange: (page, pageSize) => {\n                    setpraloading(true);\n                    fetch(\n                      `${\n                        process.env.NEXT_PUBLIC_BACKEND_URL\n                      }/getAgentList?page=${page}&rows=10&name=${name1}&company_id=${location_id1}${\n                        is_enabled1 === \"\" ? \"\" : `&is_enabled=${is_enabled1}`\n                      }`,\n                      {\n                        method: `GET`,\n                        headers: {\n                          Authorization: JSON.parse(initProps),\n                        },\n                      }\n                    )\n                      .then((res) => res.json())\n                      .then((res2) => {\n                        setrawdata(res2.data);\n                        var temppagination = res2.data.data.map((doc, idx) => ({\n                          ...doc,\n                          profile_image:\n                            doc.profile_image === \"-\" ||\n                            doc.profile_image === \"\"\n                              ? `/default-users.jpeg`\n                              : doc.profile_image,\n                        }));\n                        setdataagents(temppagination);\n                        setpraloading(false);\n                      });\n                  },\n                }}\n                scroll={{ x: 200 }}\n                dataSource={dataagents}\n                columns={columnsDD}\n                loading={praloading}\n                onRow={(record, rowIndex) => {\n                  return {\n                    onMouseOver: (event) => {\n                      setrowstate(record.id);\n                    },\n                    onClick: (event) => {\n                      {\n                        // [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                        rt.push(`/admin/agents/detail/${record.id}`);\n                        // :\n                        // null\n                      }\n                    },\n                  };\n                }}\n                rowClassName={(record, idx) => {\n                  return record.id === rowstate ? `cursor-pointer` : ``;\n                }}\n              ></Table>\n            </div>\n          </div>\n        }\n      </>\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const reqBodyAccountList = {\n    page: 1,\n    rows: 50,\n    order_by: \"asc\",\n  };\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      // dataListAgent,\n      sidemenu: \"61\",\n    },\n  };\n}\n\nexport default Agents;\n"]},"metadata":{},"sourceType":"module"}