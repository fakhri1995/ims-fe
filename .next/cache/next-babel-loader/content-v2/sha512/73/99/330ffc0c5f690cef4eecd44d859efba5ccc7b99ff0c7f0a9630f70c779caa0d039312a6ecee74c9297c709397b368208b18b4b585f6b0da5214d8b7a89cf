{"ast":null,"code":"import _Table from \"antd/lib/table\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport _Input from \"antd/lib/input\";\nimport _Button from \"antd/lib/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\n\nvar ModelsIndex = function ModelsIndex(_ref) {\n  _s();\n\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu;\n  // 1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1);\n  var asset_id1 = \"\",\n      name1 = \"\";\n  var _rt$query = rt.query,\n      asset_id = _rt$query.asset_id,\n      name = _rt$query.name,\n      sort_by = _rt$query.sort_by,\n      sort_type = _rt$query.sort_type;\n\n  if (asset_id) {\n    asset_id1 = asset_id;\n  }\n\n  if (name) {\n    name1 = name;\n  } //2.useState\n\n\n  var _useState = useState({\n    success: false,\n    message: \"\",\n    data: {\n      current_page: 0,\n      data: [],\n      first_page_url: \"\",\n      from: 0,\n      last_page: 0,\n      last_page_url: \"\",\n      next_page_url: null,\n      path: \"\",\n      per_page: \"\",\n      prev_page_url: \"\",\n      to: 0,\n      total: 0\n    }\n  }),\n      displayentiredata = _useState[0],\n      setdisplayentiredata = _useState[1];\n\n  var _useState2 = useState([]),\n      displaydata = _useState2[0],\n      setdisplaydata = _useState2[1];\n\n  var _useState3 = useState([]),\n      assetdata = _useState3[0],\n      setassetdata = _useState3[1];\n\n  var _useState4 = useState([]),\n      displaydata1 = _useState4[0],\n      setdisplaydata1 = _useState4[1];\n\n  var _useState5 = useState([]),\n      displaydata2 = _useState5[0],\n      setdisplaydata2 = _useState5[1];\n\n  var _useState6 = useState(name1 === \"\" ? false : true),\n      namasearchact = _useState6[0],\n      setnamasearchact = _useState6[1];\n\n  var _useState7 = useState(null),\n      namavalue = _useState7[0],\n      setnamavalue = _useState7[1];\n\n  var _useState8 = useState(asset_id1 === \"\" ? false : true),\n      assettypefilteract = _useState8[0],\n      setassettypefilteract = _useState8[1];\n\n  var _useState9 = useState(null),\n      assettypevalue = _useState9[0],\n      setassettypevalue = _useState9[1];\n\n  var _useState10 = useState(asset_id1),\n      namaasset = _useState10[0],\n      setnamaasset = _useState10[1];\n\n  var _useState11 = useState(null),\n      defasset = _useState11[0],\n      setdefasset = _useState11[1];\n\n  var _useState12 = useState(0),\n      rowstate = _useState12[0],\n      setrowstate = _useState12[1];\n\n  var _useState13 = useState(true),\n      praloading = _useState13[0],\n      setpraloading = _useState13[1]; //3.Define\n\n\n  var columnsTable = [{\n    title: \"Nama\",\n    dataIndex: \"name\",\n    sorter: function sorter(a, b) {\n      return a.name.length - b.name.length;\n    },\n    defaultSortOrder: \"\".concat(sort_type && sort_by === \"name\" ? sort_type === \"asc\" ? \"ascend\" : \"descend\" : null)\n  }, {\n    title: \"Asset Type\",\n    dataIndex: \"asset_name\"\n  }, {\n    title: \"Jumlah Item\",\n    dataIndex: \"count\",\n    sorter: function sorter(a, b) {\n      return a.count - b.count;\n    },\n    defaultSortOrder: \"\".concat(sort_type && sort_by === \"count\" ? sort_type === \"asc\" ? \"ascend\" : \"descend\" : null)\n  }]; //3.onChange\n\n  var onChangeSearch = function onChangeSearch(e) {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = \"/admin/models?asset_id=\".concat(assettypefilteract ? asset_id1 : \"\", \"&name=&sort_by=\").concat(sort_by, \"&sort_type=\").concat(sort_type);\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n\n  var onChangeAssetType = function onChangeAssetType(id) {\n    if (typeof id === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = \"/admin/models?asset_id=&name=\".concat(namasearchact ? name1 : \"\", \"&sort_by=\").concat(sort_by, \"&sort_type=\").concat(sort_type);\n      setassettypefilteract(false);\n    } else {\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  };\n\n  var onFinalClick = function onFinalClick() {\n    // var datatemp = displaydata1\n    // if (assettypefilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return (flt.asset_id === Number(assettypevalue)) || (flt.asset_name.replaceAll(/\\s+\\/\\s+/g, \"/\").split(\"/\")[0] === namaasset)\n    //     })\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.name.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // setdisplaydata(datatemp)\n    window.location.href = \"/admin/models?asset_id=\".concat(assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\", \"&name=\").concat(namasearchact ? namavalue === null ? name1 : namavalue : \"\", \"&sort_by=\").concat(sort_by, \"&sort_type=\").concat(sort_type);\n  }; //4.handler\n  //5.useEffect\n\n\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModels?asset_id=\").concat(asset_id1, \"&name=\").concat(name1, \"&sort_by=\").concat(sort_by, \"&sort_type=\").concat(sort_type), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdisplayentiredata(res2);\n      setdisplaydata(res2.data.data);\n      setdisplaydata1(res2.data.data);\n      setdisplaydata2(res2.data.data);\n      console.log(assettypefilteract, namasearchact);\n    });\n  }, []);\n  useEffect(function () {\n    fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getAssets\"), {\n      method: \"GET\",\n      headers: {\n        Authorization: JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      var selectedAsset = {};\n\n      var recursiveSearchAsset = function recursiveSearchAsset(doc, key) {\n        for (var i = 0; i < doc.length; i++) {\n          if (doc[i].id === key) {\n            selectedAsset = doc[i];\n          } else {\n            if (doc[i].children) {\n              recursiveSearchAsset(doc[i].children, key);\n            }\n          }\n        }\n      };\n\n      recursiveSearchAsset(res2.data, Number(namaasset));\n      setdefasset(selectedAsset.key);\n      setassetdata(res2.data);\n      setpraloading(false);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    st: st,\n    pathArr: pathArr,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-base w-auto\",\n          children: \"Models\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" col-span-1 md:col-span-1 flex md:justify-end items-center\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/admin/models/create\",\n          children: /*#__PURE__*/_jsxDEV(_Button, {\n            size: \"large\",\n            type: \"primary\",\n            children: \"Tambah\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-5 col-span-1 flex flex-col py-3\",\n        children: [praloading ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" w-10/12 mr-1 grid grid-cols-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-4 mr-1\",\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                style: {\n                  width: \"100%\",\n                  marginRight: \"0.5rem\"\n                },\n                defaultValue: name1,\n                placeholder: \"Cari Nama Model\",\n                onChange: onChangeSearch,\n                allowClear: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-2 mr-1\",\n              children: /*#__PURE__*/_jsxDEV(_TreeSelect, {\n                allowClear: true,\n                dropdownStyle: {\n                  maxHeight: 400,\n                  overflow: \"auto\"\n                },\n                defaultValue: namaasset === \"\" ? null : defasset,\n                treeData: assetdata,\n                placeholder: \"Cari Asset Type\",\n                treeDefaultExpandAll: true,\n                style: {\n                  width: \"100%\",\n                  marginRight: \"0.5rem\"\n                },\n                onChange: function onChange(value, label, extra) {\n                  if (typeof value === \"undefined\") {\n                    onChangeAssetType();\n                  } else {\n                    onChangeAssetType(extra.allCheckedNodes[0].node.props.id);\n                    setnamaasset(extra.allCheckedNodes[0].node.props.title);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-2/12\",\n            children: /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              style: {\n                width: \"100%\"\n              },\n              onClick: onFinalClick,\n              children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(_Table, {\n          className: \"tableTypeTask\",\n          pagination: {\n            pageSize: 10,\n            total: displayentiredata.data.total,\n            onChange: function onChange(page, pageSize) {\n              setpraloading(true);\n              fetch(\"\".concat(process.env.NEXT_PUBLIC_BACKEND_URL, \"/getModels?page=\").concat(page, \"&rows=10&asset_id=\").concat(asset_id1, \"&name=\").concat(name1, \"&sort_by=\").concat(sort_by, \"&sort_type=\").concat(sort_type), {\n                method: \"GET\",\n                headers: {\n                  Authorization: JSON.parse(initProps)\n                }\n              }).then(function (res) {\n                return res.json();\n              }).then(function (res2) {\n                setdisplayentiredata(res2);\n                setdisplaydata(res2.data.data);\n                setdisplaydata1(res2.data.data);\n                setdisplaydata2(res2.data.data);\n                setpraloading(false);\n              });\n            }\n          },\n          scroll: {\n            x: 200\n          },\n          dataSource: displaydata,\n          columns: columnsTable,\n          loading: praloading,\n          onRow: function onRow(record, rowIndex) {\n            return {\n              onMouseOver: function onMouseOver(event) {\n                setrowstate(record.id);\n              },\n              onClick: function onClick(event) {\n                // {\n                //     [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                rt.push(\"/admin/models/detail/\".concat(record.id)); //         :\n                //         null\n                // }\n              }\n            };\n          },\n          rowClassName: function rowClassName(record, idx) {\n            return record.id === rowstate ? \"cursor-pointer\" : \"\";\n          },\n          onChange: function onChange(pagination, filters, sorter, extra) {\n            // console.log('params', pagination, filters, sorter, extra);\n            if (extra.action === \"sort\") {\n              if (sorter.column) {\n                if (sorter.column.dataIndex === \"name\") {\n                  window.location.href = \"/admin/models?asset_id=\".concat(assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\", \"&name=\").concat(namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\", \"&sort_by=name&sort_type=\").concat(sorter.order === \"ascend\" ? \"asc\" : \"desc\");\n                } else if (sorter.column.dataIndex === \"count\") {\n                  window.location.href = \"/admin/models?asset_id=\".concat(assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\", \"&name=\").concat(namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\", \"&sort_by=count&sort_type=\").concat(sorter.order === \"ascend\" ? \"asc\" : \"desc\");\n                }\n              } else {\n                window.location.href = \"/admin/models?asset_id=\".concat(assettypefilteract ? assettypevalue === null ? asset_id1 : assettypevalue : \"\", \"&name=\").concat(namasearchact ? namavalue === \"\" ? name1 : namavalue : \"\", \"&sort_by=&sort_type=\");\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ModelsIndex, \"fMCIN+v1QFcl0oG9HMuzblmskcc=\", false, function () {\n  return [useRouter];\n});\n\n_c = ModelsIndex;\nexport var __N_SSP = true;\nexport default ModelsIndex;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModelsIndex\");","map":{"version":3,"sources":["/home/kjokken/mig/code/frontend/ims-fe-ssh-dev/src/pages/admin/models/index.js"],"names":["SearchOutlined","Link","useRouter","useEffect","useState","Layout","st","ModelsIndex","initProps","dataProfile","sidemenu","rt","pathArr","pathname","split","slice","asset_id1","name1","query","asset_id","name","sort_by","sort_type","success","message","data","current_page","first_page_url","from","last_page","last_page_url","next_page_url","path","per_page","prev_page_url","to","total","displayentiredata","setdisplayentiredata","displaydata","setdisplaydata","assetdata","setassetdata","displaydata1","setdisplaydata1","displaydata2","setdisplaydata2","namasearchact","setnamasearchact","namavalue","setnamavalue","assettypefilteract","setassettypefilteract","assettypevalue","setassettypevalue","namaasset","setnamaasset","defasset","setdefasset","rowstate","setrowstate","praloading","setpraloading","columnsTable","title","dataIndex","sorter","a","b","length","defaultSortOrder","count","onChangeSearch","e","target","value","window","location","href","onChangeAssetType","id","onFinalClick","fetch","process","env","NEXT_PUBLIC_BACKEND_URL","method","headers","Authorization","JSON","parse","then","res","json","res2","console","log","selectedAsset","recursiveSearchAsset","doc","key","i","children","Number","width","marginRight","maxHeight","overflow","label","extra","allCheckedNodes","node","props","pageSize","onChange","page","x","record","rowIndex","onMouseOver","event","onClick","push","idx","pagination","filters","action","column","order"],"mappings":"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","sourcesContent":["import { SearchOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Table, TreeSelect } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\n\nimport Layout from \"../../../components/layout-dashboard\";\nimport st from \"../../../components/layout-dashboard.module.css\";\nimport httpcookie from \"cookie\";\n\nconst ModelsIndex = ({ initProps, dataProfile, sidemenu }) => {\n  // 1.Init\n  const rt = useRouter();\n  const pathArr = rt.pathname.split(\"/\").slice(1);\n  var asset_id1 = \"\",\n    name1 = \"\";\n  const { asset_id, name, sort_by, sort_type } = rt.query;\n  if (asset_id) {\n    asset_id1 = asset_id;\n  }\n  if (name) {\n    name1 = name;\n  }\n\n  //2.useState\n  const [displayentiredata, setdisplayentiredata] = useState({\n    success: false,\n    message: \"\",\n    data: {\n      current_page: 0,\n      data: [],\n      first_page_url: \"\",\n      from: 0,\n      last_page: 0,\n      last_page_url: \"\",\n      next_page_url: null,\n      path: \"\",\n      per_page: \"\",\n      prev_page_url: \"\",\n      to: 0,\n      total: 0,\n    },\n  });\n  const [displaydata, setdisplaydata] = useState([]);\n  const [assetdata, setassetdata] = useState([]);\n  const [displaydata1, setdisplaydata1] = useState([]);\n  const [displaydata2, setdisplaydata2] = useState([]);\n  const [namasearchact, setnamasearchact] = useState(\n    name1 === \"\" ? false : true\n  );\n  const [namavalue, setnamavalue] = useState(null);\n  const [assettypefilteract, setassettypefilteract] = useState(\n    asset_id1 === \"\" ? false : true\n  );\n  const [assettypevalue, setassettypevalue] = useState(null);\n  const [namaasset, setnamaasset] = useState(asset_id1);\n  const [defasset, setdefasset] = useState(null);\n  const [rowstate, setrowstate] = useState(0);\n  const [praloading, setpraloading] = useState(true);\n\n  //3.Define\n  const columnsTable = [\n    {\n      title: \"Nama\",\n      dataIndex: \"name\",\n      sorter: (a, b) => a.name.length - b.name.length,\n      defaultSortOrder: `${\n        sort_type && sort_by === \"name\"\n          ? sort_type === \"asc\"\n            ? \"ascend\"\n            : \"descend\"\n          : null\n      }`,\n    },\n    {\n      title: \"Asset Type\",\n      dataIndex: \"asset_name\",\n    },\n    {\n      title: \"Jumlah Item\",\n      dataIndex: \"count\",\n      sorter: (a, b) => a.count - b.count,\n      defaultSortOrder: `${\n        sort_type && sort_by === \"count\"\n          ? sort_type === \"asc\"\n            ? \"ascend\"\n            : \"descend\"\n          : null\n      }`,\n    },\n  ];\n\n  //3.onChange\n  const onChangeSearch = (e) => {\n    if (e.target.value === \"\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `/admin/models?asset_id=${\n        assettypefilteract ? asset_id1 : \"\"\n      }&name=&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setnamasearchact(false);\n    } else {\n      setnamasearchact(true);\n      setnamavalue(e.target.value);\n    }\n  };\n  const onChangeAssetType = (id) => {\n    if (typeof id === \"undefined\") {\n      // setdisplaydata(displaydata2)\n      window.location.href = `/admin/models?asset_id=&name=${\n        namasearchact ? name1 : \"\"\n      }&sort_by=${sort_by}&sort_type=${sort_type}`;\n      setassettypefilteract(false);\n    } else {\n      setassettypefilteract(true);\n      setassettypevalue(id);\n    }\n  };\n  const onFinalClick = () => {\n    // var datatemp = displaydata1\n    // if (assettypefilteract) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return (flt.asset_id === Number(assettypevalue)) || (flt.asset_name.replaceAll(/\\s+\\/\\s+/g, \"/\").split(\"/\")[0] === namaasset)\n    //     })\n    // }\n    // if (namasearchact) {\n    //     datatemp = datatemp.filter(flt => {\n    //         return flt.name.toLowerCase().includes(namavalue.toLowerCase())\n    //     })\n    // }\n    // setdisplaydata(datatemp)\n    window.location.href = `/admin/models?asset_id=${\n      assettypefilteract\n        ? assettypevalue === null\n          ? asset_id1\n          : assettypevalue\n        : \"\"\n    }&name=${\n      namasearchact ? (namavalue === null ? name1 : namavalue) : \"\"\n    }&sort_by=${sort_by}&sort_type=${sort_type}`;\n  };\n\n  //4.handler\n\n  //5.useEffect\n  useEffect(() => {\n    fetch(\n      `${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?asset_id=${asset_id1}&name=${name1}&sort_by=${sort_by}&sort_type=${sort_type}`,\n      {\n        method: `GET`,\n        headers: {\n          Authorization: JSON.parse(initProps),\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res2) => {\n        setdisplayentiredata(res2);\n        setdisplaydata(res2.data.data);\n        setdisplaydata1(res2.data.data);\n        setdisplaydata2(res2.data.data);\n        console.log(assettypefilteract, namasearchact);\n      });\n  }, []);\n  useEffect(() => {\n    fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/getAssets`, {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    })\n      .then((res) => res.json())\n      .then((res2) => {\n        var selectedAsset = {};\n        const recursiveSearchAsset = (doc, key) => {\n          for (var i = 0; i < doc.length; i++) {\n            if (doc[i].id === key) {\n              selectedAsset = doc[i];\n            } else {\n              if (doc[i].children) {\n                recursiveSearchAsset(doc[i].children, key);\n              }\n            }\n          }\n        };\n        recursiveSearchAsset(res2.data, Number(namaasset));\n        setdefasset(selectedAsset.key);\n        setassetdata(res2.data);\n        setpraloading(false);\n      });\n  }, []);\n\n  return (\n    <Layout\n      tok={initProps}\n      dataProfile={dataProfile}\n      sidemenu={sidemenu}\n      st={st}\n      pathArr={pathArr}\n    >\n      <div className=\"h-20 w-full grid grid-cols-1 md:grid-cols-3 border-gray-400 md:border-t md:border-b bg-white mb-5 p-4\">\n        <div className=\" col-span-1 md:col-span-2 flex items-center mb-2 md:mb-0\">\n          <div className=\"font-semibold text-base w-auto\">Models</div>\n        </div>\n        <div className=\" col-span-1 md:col-span-1 flex md:justify-end items-center\">\n          <Link href={\"/admin/models/create\"}>\n            <Button size=\"large\" type=\"primary\">\n              Tambah\n            </Button>\n          </Link>\n        </div>\n      </div>\n      <div className=\"h-auto w-full grid grid-cols-1 md:grid-cols-5 mb-5 bg-white rounded-md\">\n        <div className=\"md:col-span-5 col-span-1 flex flex-col py-3\">\n          {praloading ? null : (\n            <div className=\"flex mb-8\">\n              <div className=\" w-10/12 mr-1 grid grid-cols-6\">\n                <div className=\"col-span-4 mr-1\">\n                  <Input\n                    style={{ width: `100%`, marginRight: `0.5rem` }}\n                    defaultValue={name1}\n                    placeholder=\"Cari Nama Model\"\n                    onChange={onChangeSearch}\n                    allowClear\n                  ></Input>\n                </div>\n                <div className=\"col-span-2 mr-1\">\n                  <TreeSelect\n                    allowClear\n                    dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n                    defaultValue={namaasset === \"\" ? null : defasset}\n                    treeData={assetdata}\n                    placeholder=\"Cari Asset Type\"\n                    treeDefaultExpandAll\n                    style={{ width: `100%`, marginRight: `0.5rem` }}\n                    onChange={(value, label, extra) => {\n                      if (typeof value === \"undefined\") {\n                        onChangeAssetType();\n                      } else {\n                        onChangeAssetType(\n                          extra.allCheckedNodes[0].node.props.id\n                        );\n                        setnamaasset(extra.allCheckedNodes[0].node.props.title);\n                      }\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"w-2/12\">\n                <Button\n                  type=\"primary\"\n                  style={{ width: `100%` }}\n                  onClick={onFinalClick}\n                >\n                  <SearchOutlined />\n                </Button>\n              </div>\n            </div>\n          )}\n          <Table\n            className=\"tableTypeTask\"\n            pagination={{\n              pageSize: 10,\n              total: displayentiredata.data.total,\n              onChange: (page, pageSize) => {\n                setpraloading(true);\n                fetch(\n                  `${process.env.NEXT_PUBLIC_BACKEND_URL}/getModels?page=${page}&rows=10&asset_id=${asset_id1}&name=${name1}&sort_by=${sort_by}&sort_type=${sort_type}`,\n                  {\n                    method: `GET`,\n                    headers: {\n                      Authorization: JSON.parse(initProps),\n                    },\n                  }\n                )\n                  .then((res) => res.json())\n                  .then((res2) => {\n                    setdisplayentiredata(res2);\n                    setdisplaydata(res2.data.data);\n                    setdisplaydata1(res2.data.data);\n                    setdisplaydata2(res2.data.data);\n                    setpraloading(false);\n                  });\n              },\n            }}\n            scroll={{ x: 200 }}\n            dataSource={displaydata}\n            columns={columnsTable}\n            loading={praloading}\n            onRow={(record, rowIndex) => {\n              return {\n                onMouseOver: (event) => {\n                  setrowstate(record.id);\n                },\n                onClick: (event) => {\n                  // {\n                  //     [107, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr)) ?\n                  rt.push(`/admin/models/detail/${record.id}`);\n                  //         :\n                  //         null\n                  // }\n                },\n              };\n            }}\n            rowClassName={(record, idx) => {\n              return record.id === rowstate ? `cursor-pointer` : ``;\n            }}\n            onChange={(pagination, filters, sorter, extra) => {\n              // console.log('params', pagination, filters, sorter, extra);\n              if (extra.action === \"sort\") {\n                if (sorter.column) {\n                  if (sorter.column.dataIndex === \"name\") {\n                    window.location.href = `/admin/models?asset_id=${\n                      assettypefilteract\n                        ? assettypevalue === null\n                          ? asset_id1\n                          : assettypevalue\n                        : \"\"\n                    }&name=${\n                      namasearchact\n                        ? namavalue === \"\"\n                          ? name1\n                          : namavalue\n                        : \"\"\n                    }&sort_by=name&sort_type=${\n                      sorter.order === \"ascend\" ? \"asc\" : \"desc\"\n                    }`;\n                  } else if (sorter.column.dataIndex === \"count\") {\n                    window.location.href = `/admin/models?asset_id=${\n                      assettypefilteract\n                        ? assettypevalue === null\n                          ? asset_id1\n                          : assettypevalue\n                        : \"\"\n                    }&name=${\n                      namasearchact\n                        ? namavalue === \"\"\n                          ? name1\n                          : namavalue\n                        : \"\"\n                    }&sort_by=count&sort_type=${\n                      sorter.order === \"ascend\" ? \"asc\" : \"desc\"\n                    }`;\n                  }\n                } else {\n                  window.location.href = `/admin/models?asset_id=${\n                    assettypefilteract\n                      ? assettypevalue === null\n                        ? asset_id1\n                        : assettypevalue\n                      : \"\"\n                  }&name=${\n                    namasearchact ? (namavalue === \"\" ? name1 : namavalue) : \"\"\n                  }&sort_by=&sort_type=`;\n                }\n              }\n            }}\n          ></Table>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res }) {\n  var initProps = {};\n  if (!req.headers.cookie) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  const cookiesJSON1 = httpcookie.parse(req.headers.cookie);\n  if (!cookiesJSON1.token) {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n  initProps = cookiesJSON1.token;\n  const resourcesGP = await fetch(\n    `${process.env.NEXT_PUBLIC_BACKEND_URL}/detailProfile`,\n    {\n      method: `GET`,\n      headers: {\n        Authorization: JSON.parse(initProps),\n      },\n    }\n  );\n  const resjsonGP = await resourcesGP.json();\n  const dataProfile = resjsonGP;\n\n  // if (![107, 108, 109, 110, 111, 112, 132].every((curr) => dataProfile.data.registered_feature.includes(curr))) {\n  //     res.writeHead(302, { Location: '/dashboard/admin' })\n  //     res.end()\n  // }\n\n  return {\n    props: {\n      initProps,\n      dataProfile,\n      sidemenu: \"82\",\n    },\n  };\n}\n\nexport default ModelsIndex;\n"]},"metadata":{},"sourceType":"module"}