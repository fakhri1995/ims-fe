{"ast":null,"code":"import _DatePicker from \"antd/lib/date-picker\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Radio from \"antd/lib/radio\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _Spin from \"antd/lib/spin\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _notification from \"antd/lib/notification\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport DrawerCore from '../drawerCore';\nimport moment from 'moment';\nimport { Label, H2 } from '../../typography';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { UserIconSvg } from '../../icon';\n\nconst DrawerTicketDeadline = ({\n  title,\n  visible,\n  onvisible,\n  onClose,\n  buttonOkText,\n  disabled,\n  initProps,\n  refresh,\n  setrefresh,\n  setrefreshclosed,\n  datapayload,\n  setdatapayload,\n  showdatetime,\n  setshowdatetime,\n  datevalue,\n  setdatevalue,\n  ticketid\n}) => {\n  //useState\n  const {\n    0: loadingsave,\n    1: setloadingsave\n  } = useState(false);\n  const {\n    0: disabledcreate,\n    1: setdisabledcreate\n  } = useState(true);\n  const {\n    0: disabledtrigger,\n    1: setdisabledtrigger\n  } = useState(-1); //handler\n\n  const handleSetDeadline = () => {\n    setloadingsave(true);\n    setdisabledcreate(true);\n    fetch(`https://boiling-thicket-46501.herokuapp.com/setDeadline`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(datapayload)\n    }).then(res => res.json()).then(res2 => {\n      setloadingsave(false);\n      setdisabledcreate(false);\n\n      if (res2.success) {\n        setdatapayload({\n          id: Number(ticketid),\n          deadline: null\n        });\n        setrefresh(prev => prev + 1);\n        onvisible(false);\n\n        _notification['success']({\n          message: res2.message,\n          duration: 3\n        });\n      } else {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //useEffect\n\n\n  useEffect(() => {\n    if (datapayload.assignable_id !== null) {\n      setdisabledcreate(false);\n    } else {\n      setdisabledcreate(true);\n    }\n  }, [disabledtrigger]);\n  return /*#__PURE__*/_jsx(DrawerCore, {\n    title: title,\n    visible: visible,\n    onClose: () => {\n      setrefreshclosed(prev => prev + 1);\n      setdatapayload({\n        id: Number(ticketid),\n        deadline: null\n      });\n      onvisible(false);\n    },\n    buttonOkText: buttonOkText,\n    onClick: handleSetDeadline,\n    disabled: disabledcreate,\n    children: loadingsave ? /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(_Spin, {})\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      className: \" flex flex-col px-3\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"mb-2\",\n        children: /*#__PURE__*/_jsx(_Radio.Group, {\n          onChange: e => {\n            var choisedate = '';\n\n            if (e.target.value === 3) {\n              choisedate = moment(datapayload.created_at).add(3, 'h').locale('id').format();\n              setdatevalue(3);\n              setshowdatetime(false);\n            } else if (e.target.value === 12) {\n              choisedate = moment(datapayload.created_at).add(30, 'h').locale('id').format();\n              setdatevalue(12);\n              setshowdatetime(false);\n            } else if (e.target.value === 30) {\n              choisedate = moment(datapayload.created_at).add(1, 'h').locale('id').format();\n              setdatevalue(30);\n              setshowdatetime(false);\n            } else if (e.target.value === 72) {\n              choisedate = moment(datapayload.created_at).add(3, 'd').locale('id').format();\n              setdatevalue(72);\n              setshowdatetime(false);\n            } else if (e.target.value === -10) {\n              setdatevalue(-10);\n              setshowdatetime(true);\n            }\n\n            setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n              deadline: e.target.value === -10 ? null : choisedate\n            }));\n            setdisabledtrigger(prev => prev + 1);\n          },\n          value: datevalue,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex flex-col\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-3\",\n              children: /*#__PURE__*/_jsx(_Radio, {\n                value: 3,\n                children: \"3 Jam\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-3\",\n              children: /*#__PURE__*/_jsx(_Radio, {\n                value: 12,\n                children: \"12 Jam\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-3\",\n              children: /*#__PURE__*/_jsx(_Radio, {\n                value: 30,\n                children: \"30 Jam\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-3\",\n              children: /*#__PURE__*/_jsx(_Radio, {\n                value: 72,\n                children: \"3 Hari\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-3\",\n              children: /*#__PURE__*/_jsx(_Radio, {\n                value: -10,\n                children: \"Pilih Tanggal\"\n              })\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"mb-2 flex flex-col\",\n        children: showdatetime ? /*#__PURE__*/_jsx(_DatePicker, {\n          value: datapayload.deadline === null ? null : moment(datapayload.deadline),\n          className: \"datepickerStatus\",\n          showTime: true,\n          onChange: (date, datestring) => {\n            setdatapayload(_objectSpread(_objectSpread({}, datapayload), {}, {\n              deadline: datestring\n            }));\n            setdisabledtrigger(prev => prev + 1);\n          }\n        }) : null\n      })]\n    })\n  });\n};\n\nexport default DrawerTicketDeadline;","map":null,"metadata":{},"sourceType":"module"}