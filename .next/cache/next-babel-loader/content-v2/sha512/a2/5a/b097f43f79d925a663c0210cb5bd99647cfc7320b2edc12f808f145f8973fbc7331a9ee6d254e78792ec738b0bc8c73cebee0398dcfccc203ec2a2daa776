{"ast":null,"code":"import _Input from \"antd/lib/input\";\nimport _notification from \"antd/lib/notification\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport Layout from '../../../components/layout-dashboardNew';\nimport { useRouter } from 'next/router';\nimport { useEffect, useRef, useState } from 'react';\nimport st from '../../../components/layout-dashboard.module.css';\nimport Buttonsys from '../../../components/button';\nimport { H1, H2, Label, Text } from '../../../components/typography';\nimport { AlerttriangleIconSvg, ArrowsSortIconSvg, BackIconSvg, CalendartimeIconSvg, CircleXIconSvg, ClipboardcheckIconSvg, ClockIconSvg, EditIconSvg, ListcheckIconSvg, LocationIconSvg, MappinIconSvg, SearchIconSvg, SortAscendingIconSvg, SortDescendingIconSvg, TrashIconSvg, UserIconSvg } from '../../../components/icon';\nimport { TableCustomTipeTask } from '../../../components/table/tableCustom';\nimport { ModalHapusTipeTask } from '../../../components/modal/modalCustom';\nimport moment from 'moment';\nimport DrawerTaskTypesCreate from '../../../components/drawer/tasks/drawerTaskTypesCreate';\nimport DrawerTaskTypesUpdate from '../../../components/drawer/tasks/drawerTaskTypesUpdate';\n\nvar TaskTypes = function TaskTypes(_ref) {\n  var initProps = _ref.initProps,\n      dataProfile = _ref.dataProfile,\n      sidemenu = _ref.sidemenu;\n  //1.Init\n  var rt = useRouter();\n  var pathArr = rt.pathname.split(\"/\").slice(1); //2.Use State\n  //TASK TYPES\n\n  var _useState = useState({\n    current_page: \"\",\n    data: [],\n    first_page_url: \"\",\n    from: null,\n    last_page: null,\n    last_page_url: \"\",\n    next_page_url: \"\",\n    path: \"\",\n    per_page: null,\n    prev_page_url: null,\n    to: null,\n    total: null\n  }),\n      datarawtipetask = _useState[0],\n      setdatarawtipetask = _useState[1];\n\n  var _useState2 = useState([]),\n      datatipetasks = _useState2[0],\n      setdatatipetasks = _useState2[1];\n\n  var _useState3 = useState(false),\n      loadingtipetasks = _useState3[0],\n      setloadingtipetasks = _useState3[1];\n\n  var _useState4 = useState(false),\n      viewdetailtipetask = _useState4[0],\n      setviewdetailtipetask = _useState4[1];\n\n  var _useState5 = useState(1),\n      pagetipetask = _useState5[0],\n      setpagetipetask = _useState5[1];\n\n  var _useState6 = useState(10),\n      rowstipetask = _useState6[0],\n      setrowstipetask = _useState6[1];\n\n  var _useState7 = useState({\n    sort_by: \"\",\n    sort_type: \"\"\n  }),\n      sortingtipetask = _useState7[0],\n      setsortingtipetask = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      searcingtipetask = _useState8[0],\n      setsearcingtipetask = _useState8[1];\n\n  var _useState9 = useState([]),\n      datafiltertipetasks = _useState9[0],\n      setdatafiltertipetasks = _useState9[1]; //create - task type\n\n\n  var _useState10 = useState(false),\n      drawertasktypecreate = _useState10[0],\n      setdrawertasktypecreate = _useState10[1]; //update - task type\n\n\n  var _useState11 = useState(-1),\n      triggertasktypupdate = _useState11[0],\n      settriggertasktypupdate = _useState11[1];\n\n  var _useState12 = useState(-1),\n      idtasktypupdate = _useState12[0],\n      setidtasktypupdate = _useState12[1]; // const [tempidtasktypeupdate, settempidtasktypeupdate] = useState(-1)\n\n\n  var tempidtasktypeupdate = useRef(-1);\n\n  var _useState13 = useState(false),\n      drawertasktypupdate = _useState13[0],\n      setdrawertasktypupdate = _useState13[1]; //delete - task type\n\n\n  var _useState14 = useState({\n    id: null,\n    name: \"\"\n  }),\n      datatipetaskdelete = _useState14[0],\n      setdatatipetaskdelete = _useState14[1];\n\n  var _useState15 = useState(false),\n      modaltipetaskdelete = _useState15[0],\n      setmodaltipetaskdelete = _useState15[1];\n\n  var _useState16 = useState(false),\n      loadingtipetaskdelete = _useState16[0],\n      setloadingtipetaskdelete = _useState16[1]; //2. Column Table\n\n\n  var columnsTipetask = [{\n    title: 'No',\n    dataIndex: 'num',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: datarawtipetask.from + index\n        })\n      };\n    }\n  }, {\n    title: 'Tipe Task',\n    dataIndex: 'name',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.name\n        })\n      };\n    },\n    sorter: function sorter(a, b) {\n      return a.name.localeCompare(b.name);\n    }\n  }, {\n    title: 'Deskripsi',\n    dataIndex: 'description',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.description\n        })\n      };\n    }\n  }, {\n    title: 'Jumlah Task',\n    dataIndex: 'count',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsx(_Fragment, {\n          children: record.tasks_count\n        })\n      };\n    },\n    sorter: function sorter(a, b) {\n      return a.tasks_count > b.tasks_count;\n    }\n  }, {\n    title: 'Opsi',\n    dataIndex: 'option',\n    render: function render(text, record, index) {\n      return {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-1\",\n            children: /*#__PURE__*/_jsx(Buttonsys, {\n              type: \"default\",\n              onClick: function onClick() {\n                // settempidtasktypeupdate(record.id)\n                tempidtasktypeupdate.current = record.id;\n                settriggertasktypupdate(function (prev) {\n                  return prev + 1;\n                });\n                setdrawertasktypupdate(true);\n              },\n              children: /*#__PURE__*/_jsx(EditIconSvg, {\n                size: 15,\n                color: \"#35763B\"\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-1\",\n            children: /*#__PURE__*/_jsx(Buttonsys, {\n              type: \"default\",\n              color: \"danger\",\n              onClick: function onClick() {\n                setdatatipetaskdelete({\n                  id: record.id,\n                  name: record.name\n                });\n                setmodaltipetaskdelete(true);\n              },\n              children: /*#__PURE__*/_jsx(TrashIconSvg, {\n                size: 15,\n                color: \"#BF4A40\"\n              })\n            })\n          })]\n        })\n      };\n    }\n  }]; //3. Handler\n\n  var handleDeleteTipeTask = function handleDeleteTipeTask() {\n    setloadingtipetaskdelete(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/deleteTaskType\", {\n      method: 'DELETE',\n      headers: {\n        'Authorization': JSON.parse(initProps),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: datatipetaskdelete.id\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setloadingtipetaskdelete(false);\n\n      if (res2.success) {\n        setmodaltipetaskdelete(false);\n\n        _notification['success']({\n          message: res2.message,\n          duration: 3\n        });\n      } else {\n        _notification['error']({\n          message: res2.message,\n          duration: 3\n        });\n      }\n    });\n  }; //4.Use Effect\n\n\n  useEffect(function () {\n    setloadingtipetasks(true);\n    fetch(\"https://boiling-thicket-46501.herokuapp.com/getTaskTypes?page=\".concat(pagetipetask, \"&rows=\").concat(rowstipetask), {\n      method: \"GET\",\n      headers: {\n        'Authorization': JSON.parse(initProps)\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res2) {\n      setdatarawtipetask(res2.data);\n      setdatatipetasks(res2.data.data);\n      setdatafiltertipetasks(res2.data.data);\n      setloadingtipetasks(false);\n    });\n  }, [drawertasktypecreate, modaltipetaskdelete]); // useEffect(() => {\n  //     if (triggertasktypupdate !== -1) {\n  //         setidtasktypupdate(tempidtasktypeupdate.current)\n  //     }\n  // }, [triggertasktypupdate])\n\n  return /*#__PURE__*/_jsx(Layout, {\n    tok: initProps,\n    dataProfile: dataProfile,\n    sidemenu: sidemenu,\n    pathArr: pathArr,\n    st: st,\n    prevpath: \"admin\",\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex flex-col\",\n      id: \"mainWrapper\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"px-5\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col shadow-md rounded-lg bg-white p-5 mb-6 mx-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"flex justify-between items-center mb-5\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"mr-2 cursor-pointer\",\n                onClick: function onClick() {\n                  rt.push(\"/tasks/admin\");\n                },\n                children: /*#__PURE__*/_jsx(BackIconSvg, {\n                  size: 15,\n                  color: \"#000000\"\n                })\n              }), /*#__PURE__*/_jsx(H1, {\n                children: \"Semua Tipe Task\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-8/12 flex justify-end\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \" mx-2\",\n                children: /*#__PURE__*/_jsx(Buttonsys, {\n                  type: \"primary\",\n                  onClick: function onClick() {\n                    setdrawertasktypecreate(true);\n                  },\n                  children: \"+ Tambah Tipe Task\"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mx-2\",\n                children: /*#__PURE__*/_jsx(_Input, {\n                  style: {\n                    width: \"20rem\"\n                  },\n                  placeholder: \"Nama tipe task..\",\n                  allowClear: true,\n                  onChange: function onChange(e) {\n                    setsearcingtipetask(e.target.value);\n                    setloadingtipetasks(true);\n                    fetch(\"https://boiling-thicket-46501.herokuapp.com/getTaskTypes?page=\".concat(pagetipetask, \"&rows=\").concat(rowstipetask, \"&name=\").concat(e.target.value, \"&sort_by=\").concat(sortingtipetask.sort_by, \"&sort_type=\").concat(sortingtipetask.sort_type), {\n                      method: \"GET\",\n                      headers: {\n                        'Authorization': JSON.parse(initProps)\n                      }\n                    }).then(function (res) {\n                      return res.json();\n                    }).then(function (res2) {\n                      setdatarawtipetask(res2.data);\n                      setdatatipetasks(res2.data.data);\n                      setloadingtipetasks(false);\n                    });\n                  }\n                })\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(TableCustomTipeTask, {\n              dataSource: datatipetasks,\n              setDataSource: setdatatipetasks,\n              columns: columnsTipetask,\n              loading: loadingtipetasks,\n              setpraloading: setloadingtipetasks,\n              pageSize: rowstipetask,\n              total: datarawtipetask.total,\n              initProps: initProps,\n              setpage: setpagetipetask,\n              pagefromsearch: pagetipetask,\n              setdataraw: setdatarawtipetask,\n              setsortingtipetask: setsortingtipetask,\n              sortingtipetask: sortingtipetask,\n              searcingtipetask: searcingtipetask\n            })\n          })]\n        }), /*#__PURE__*/_jsx(ModalHapusTipeTask, {\n          title: \"Konfirmasi Hapus Tipe Task\",\n          visible: modaltipetaskdelete,\n          onvisible: setmodaltipetaskdelete,\n          onCancel: function onCancel() {\n            setmodaltipetaskdelete(false);\n          },\n          loading: loadingtipetaskdelete,\n          datadelete: datatipetaskdelete,\n          onOk: handleDeleteTipeTask\n        }), /*#__PURE__*/_jsx(DrawerTaskTypesCreate, {\n          title: \"Tambah Tipe Task\",\n          visible: drawertasktypecreate,\n          onClose: function onClose() {\n            setdrawertasktypecreate(false);\n          },\n          buttonOkText: \"Simpan Tipe Task\",\n          initProps: initProps,\n          onvisible: setdrawertasktypecreate\n        }), /*#__PURE__*/_jsx(DrawerTaskTypesUpdate, {\n          title: \"Ubah Tipe Task\",\n          visible: drawertasktypupdate,\n          onClose: function onClose() {\n            setdrawertasktypupdate(false);\n          },\n          buttonOkText: \"Simpan Tipe Task\",\n          initProps: initProps,\n          onvisible: setdrawertasktypupdate,\n          loading: loadingtipetasks,\n          id: tempidtasktypeupdate,\n          trigger: triggertasktypupdate\n        })]\n      })\n    })\n  });\n};\n\nexport var __N_SSP = true;\nexport default TaskTypes;","map":null,"metadata":{},"sourceType":"module"}