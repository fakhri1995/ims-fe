_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[134],{"1W/9":function(e,t,c){"use strict";var n=c("1OyB"),s=c("vuIU"),i=c("Ji7U"),a=c("LK+K"),r=c("U8pU"),l=c("q1tI"),o=c("wgJM"),d=c("QC+M"),j=c("MNnm"),u=c("qx4F");var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};var c=t.element,n=void 0===c?document.body:c,s={},i=Object.keys(e);return i.forEach((function(e){s[e]=n.style[e]})),i.forEach((function(t){n.style[t]=e[t]})),s};var m={},h=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",c=new RegExp("".concat(t),"g"),n=document.body.className;if(e){if(!c.test(n))return;return b(m),m={},void(document.body.className=n.replace(c,"").trim())}var s=Object(u.a)();if(s&&(m=b({position:"relative",width:"calc(100% - ".concat(s,"px)")}),!c.test(n))){var i="".concat(n," ").concat(t);document.body.className=i.trim()}}},x=c("KQm4"),f=[],p="ant-scrolling-effect",O=new RegExp("".concat(p),"g"),v=0,g=new Map,y=Object(s.a)((function e(t){var c=this;Object(n.a)(this,e),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var e;return null===(e=c.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=f.find((function(e){return e.target===c.lockTarget}));t&&c.unLock(),c.options=e,t&&(t.options=e,c.lock())},this.lock=function(){var e;if(!f.some((function(e){return e.target===c.lockTarget})))if(f.some((function(e){var t,n=e.options;return(null===n||void 0===n?void 0:n.container)===(null===(t=c.options)||void 0===t?void 0:t.container)})))f=[].concat(Object(x.a)(f),[{target:c.lockTarget,options:c.options}]);else{var t=0,n=(null===(e=c.options)||void 0===e?void 0:e.container)||document.body;(n===document.body&&window.innerWidth-document.documentElement.clientWidth>0||n.scrollHeight>n.clientHeight)&&(t=Object(u.a)());var s=n.className;if(0===f.filter((function(e){var t,n=e.options;return(null===n||void 0===n?void 0:n.container)===(null===(t=c.options)||void 0===t?void 0:t.container)})).length&&g.set(n,b({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:n})),!O.test(s)){var i="".concat(s," ").concat(p);n.className=i.trim()}f=[].concat(Object(x.a)(f),[{target:c.lockTarget,options:c.options}])}},this.unLock=function(){var e,t=f.find((function(e){return e.target===c.lockTarget}));if(f=f.filter((function(e){return e.target!==c.lockTarget})),t&&!f.some((function(e){var c,n=e.options;return(null===n||void 0===n?void 0:n.container)===(null===(c=t.options)||void 0===c?void 0:c.container)}))){var n=(null===(e=c.options)||void 0===e?void 0:e.container)||document.body,s=n.className;O.test(s)&&(b(g.get(n),{element:n}),g.delete(n),n.className=n.className.replace(O,"").trim())}},this.lockTarget=v++,this.options=t})),N=0,w=Object(j.a)();var _={},k=function(e){if(!w)return null;if(e){if("string"===typeof e)return document.querySelectorAll(e)[0];if("function"===typeof e)return e();if("object"===Object(r.a)(e)&&e instanceof window.HTMLElement)return e}return document.body},C=function(e){Object(i.a)(c,e);var t=Object(a.a)(c);function c(e){var s;return Object(n.a)(this,c),(s=t.call(this,e)).container=void 0,s.componentRef=l.createRef(),s.rafId=void 0,s.scrollLocker=void 0,s.renderComponent=void 0,s.updateScrollLocker=function(e){var t=(e||{}).visible,c=s.props,n=c.getContainer,i=c.visible;i&&i!==t&&w&&k(n)!==s.scrollLocker.getContainer()&&s.scrollLocker.reLock({container:k(n)})},s.updateOpenCount=function(e){var t=e||{},c=t.visible,n=t.getContainer,i=s.props,a=i.visible,r=i.getContainer;a!==c&&w&&k(r)===document.body&&(a&&!c?N+=1:e&&(N-=1)),("function"===typeof r&&"function"===typeof n?r.toString()!==n.toString():r!==n)&&s.removeCurrentContainer()},s.attachToParent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||s.container&&!s.container.parentNode){var t=k(s.props.getContainer);return!!t&&(t.appendChild(s.container),!0)}return!0},s.getContainer=function(){return w?(s.container||(s.container=document.createElement("div"),s.attachToParent(!0)),s.setWrapperClassName(),s.container):null},s.setWrapperClassName=function(){var e=s.props.wrapperClassName;s.container&&e&&e!==s.container.className&&(s.container.className=e)},s.removeCurrentContainer=function(){var e,t;null===(e=s.container)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(s.container)},s.switchScrollingEffect=function(){1!==N||Object.keys(_).length?N||(b(_),_={},h(!0)):(h(),_=b({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},s.scrollLocker=new y({container:k(e.getContainer)}),s}return Object(s.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Object(o.a)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visible,c=e.getContainer;w&&k(c)===document.body&&(N=t&&N?N-1:N),this.removeCurrentContainer(),o.a.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,t=e.children,c=e.forceRender,n=e.visible,s=null,i={getOpenCount:function(){return N},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(c||n||this.componentRef.current)&&(s=l.createElement(d.a,{getContainer:this.getContainer,ref:this.componentRef},t(i))),s}}]),c}(l.Component);t.a=C},"6FTQ":function(e,t,c){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}c.d(t,"a",(function(){return n}))},"8rE2":function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));var n=c("6FTQ");function s(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Object(n.a)(e,t):void 0}}},MIAW:function(e,t,c){"use strict";c.r(t),c.d(t,"__N_SSP",(function(){return J}));var n=c("rmht"),s=c.n(n),i=c("wXtC"),a=c.n(i),r=c("FAat"),l=c.n(r),o=c("iJl9"),d=c.n(o),j=c("kEgK"),u=c.n(j),b=c("MM9K"),m=c.n(b),h=c("nKUr"),x=c("l+S1"),f=c("wd/R"),p=c.n(f),O=c("20a2"),v=c("q1tI"),g=c("ymym"),y=c("ZXdF"),N=c("Zs9b"),w=c("cpVT"),_=c("MX0m"),k=c.n(_),C=c("JmJJ"),S=c.n(C),T=c("ckOl"),E=(c("44PY"),c("8TZf")),P=c("cFzE");function A(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function D(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?A(Object(c),!0).forEach((function(t){Object(w.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):A(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var F=function(e){var t=e.title,c=e.visible,n=e.onvisible,s=(e.onClose,e.buttonOkText),i=(e.disabled,e.initProps),r=(e.refreshtickets,e.setrefreshtickets,e.dataprofile,Object(v.useState)({group:null,engineer:null,type:null,from:"",to:"",core_attributes:[1,1,1,1,1,1,1,1,1],secondary_attributes:[1,1,1,1,1,1,1,1]})),o=r[0],d=r[1],j=Object(v.useState)(!1),u=j[0],b=(j[1],Object(v.useState)([])),f=b[0],O=b[1],g=Object(v.useState)(!1),y=g[0],N=g[1],w=Object(v.useState)([]),_=w[0],C=w[1],A=Object(v.useState)(!1),F=A[0],z=A[1],I=Object(v.useState)([1,2,3,4,5,6,7,8]),L=I[0],M=(I[1],Object(v.useState)([1,2,3,4,5,6,7,8])),R=M[0],J=M[1],B=Object(v.useState)([1,2,3,4,5,6,7]),K=B[0],G=(B[1],Object(v.useState)([1,2,3,4,5,6,7])),U=G[0],W=G[1],q=Object(v.useState)(!1),X=q[0],Y=q[1],H=Object(v.useState)(-1),Q=H[0],V=H[1];return Object(v.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getFilterGroups"),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){C(e.data)}))}),[]),Object(v.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getFilterUsers?type=",1),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){O(e.data)}))}),[]),Object(v.useEffect)((function(){!1===o.core_attributes.every((function(e){return 0===e}))?Y(!1):Y(!0)}),[Q]),Object(h.jsx)(P.a,{title:t,visible:c,onClose:function(){d({group:null,engineer:null,type:null,from:"",to:"",core_attributes:[1,1,1,1,1,1,1,1,1],secondary_attributes:[1,1,1,1,1,1,1,1]}),n(!1)},buttonOkText:s,onClick:function(){console.log(o),fetch("".concat("https://service-staging.mig.id","/ticketsExport?group=").concat(null===o.group?"":o.group,"&engineer=").concat(null===o.engineer?"":o.engineer,"&type=").concat(null===o.type?null:o.type,"&from=").concat(o.from,"&to=").concat(o.to,"&core_attributes=[").concat(o.core_attributes,"]&secondary_attributes=[").concat(o.secondary_attributes,"]&is_history=0"),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.blob()})).then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(t),n=document.createElement("a");n.href=c,n.download="".concat(p()(new Date).locale("id").format("L"),"-").concat(p()(new Date).locale("id").format("LT"),".xlsx"),n.click(),setTimeout((function(){window.URL.revokeObjectURL(c)}))}))},disabled:X,children:u?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{})}):Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("div",{className:"mb-6",children:Object(h.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(h.jsx)("div",{className:"mb-6",children:Object(h.jsx)(E.b,{children:"Pilih Filter:"})}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(E.c,{children:"Rentang Waktu"})}),Object(h.jsx)("div",{className:" mb-2 flex",children:Object(h.jsx)(a.a.RangePicker,{style:{width:"100%"},allowClear:!0,className:"datepickerStatus",onChange:function(e,t){""===t[0]&&""===t[1]?d(D(D({},o),{},{from:"",to:""})):d(D(D({},o),{},{from:p()(t[0]).locale("id").format("YYYY-MM-DD"),to:p()(t[1]).locale("id").format("YYYY-MM-DD")}))}})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(E.c,{children:"Grup"})}),Object(h.jsx)("div",{className:" mb-2 flex",children:Object(h.jsx)(l.a,{style:{width:"100%"},placeholder:"Nama Grup...",suffixIcon:Object(h.jsx)(x.a,{}),showArrow:!0,allowClear:!0,onChange:function(e,t){d(D(D({},o),{},{group:"undefined"===typeof e?null:Number(e)}))},showSearch:!0,optionFilterProp:"children",notFoundContent:F?Object(h.jsx)(m.a,{size:"small"}):null,onSearch:function(e){z(!0),fetch("".concat("https://service-staging.mig.id","/getFilterGroups?name=").concat(e),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){C(e.data),z(!1)}))},children:_.map((function(e,t){return Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-2",children:Object(h.jsx)(T.ib,{})}),Object(h.jsx)("div",{children:e.name})]})},t)}))})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(E.c,{children:"Engineer"})}),Object(h.jsx)("div",{className:" mb-2 flex",children:Object(h.jsx)(l.a,{style:{width:"100%"},placeholder:"Nama Engineer...",suffixIcon:Object(h.jsx)(x.a,{}),showArrow:!0,allowClear:!0,onChange:function(e,t){d(D(D({},o),{},{engineer:"undefined"===typeof e?null:Number(e)}))},showSearch:!0,optionFilterProp:"children",notFoundContent:y?Object(h.jsx)(m.a,{size:"small"}):null,onSearch:function(e){N(!0),fetch("".concat("https://service-staging.mig.id","/getFilterUsers?type=",1,"&name=").concat(e),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){O(e.data),N(!1)}))},children:f.map((function(e,t){return Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-7 h7 rounded-full",children:Object(h.jsx)("img",{src:"-"===e.profile_image?"/image/stafftask.png":e.profile_image,className:" object-contain",alt:""})}),Object(h.jsx)("div",{children:e.name})]})},t)}))})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:"jsx-1995394191 flex items-center justify-between mb-2",children:[Object(h.jsxs)("div",{className:"jsx-1995394191 flex",children:[Object(h.jsx)(E.c,{children:"Pilih Parameter Detail Tiket"}),Object(h.jsx)("span",{className:"jsx-1995394191 core"})]}),Object(h.jsx)("div",{onClick:function(){J(L);d(D(D({},o),{},{core_attributes:[1,1,1,1,1,1,1,1,1]}))},className:"jsx-1995394191",children:Object(h.jsx)(E.e,{color:"green",cursor:"pointer",children:"Pilih Semua"})}),Object(h.jsx)(k.a,{id:"1995394191",children:[".core.jsx-1995394191::before{content:'*';color:red;}"]})]}),Object(h.jsx)("div",{className:"mb-2 flex",children:Object(h.jsx)(S.a.Group,{onChange:function(e){J(e);var t=[0,0,0,0,0,0,0,0,0].map((function(t,c){return e.includes(c)?1:0}));d(D(D({},o),{},{core_attributes:t})),V((function(e){return e+1}))},value:R,children:Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[0],children:"No Tiket"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[1],children:"Nama Pembuat"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[2],children:"Lokasi Pembuatan Tiket"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[3],children:"Tanggal Diajukan"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[4],children:"Tanggal Ditutup"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[5],children:"Durasi Pengerjaan"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[6],children:"Nama Engineer"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:L[7],children:"Status"})})]})})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(E.c,{children:"Jenis Tiket"})}),Object(h.jsx)(l.a,{allowClear:!0,placeholder:"Pilih Jenis Ticket",style:{width:"100%"},onChange:function(e){d(D(D({},o),{},{type:"undefined"===typeof e?null:e,secondary_attributes:[1,1,1,1,1,1,1,1]})),W(K)},children:Object(h.jsx)(l.a.Option,{value:1,children:"Incident"})})]}),null===o.type?Object(h.jsx)("div",{children:Object(h.jsx)(E.c,{children:"Jika Jenis Tiket tidak dipilih, maka akan menampilkan semua parameter detail masalah"})}):Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)(E.c,{children:"Pilih Parameter Detail Masalah"})}),Object(h.jsx)("div",{onClick:function(){W(K);d(D(D({},o),{},{secondary_attributes:[1,1,1,1,1,1,1,1]}))},children:Object(h.jsx)(E.e,{color:"green",cursor:"pointer",children:"Pilih Semua"})})]}),Object(h.jsx)("div",{className:"mb-2 flex",children:Object(h.jsx)(S.a.Group,{onChange:function(e){W(e);var t=[0,0,0,0,0,0,0,0].map((function(t,c){return e.includes(c)?1:0}));d(D(D({},o),{},{secondary_attributes:t}))},value:U,children:Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:K[0],children:"Jenis Aset"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:K[1],children:"MIG ID Aset"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:K[2],children:"Terminal ID"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:K[3],children:"Nama PIC"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:K[4],children:"Kontak PIC"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:K[5],children:"Waktu Kejadian"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(S.a,{value:K[6],children:"Deskripsi Kerusakan"})})]})})})]})]})})},z=c("qe3g"),I=c.n(z),L=c("D1C7"),M=c("o8C9"),R=c("m0r1");R.f.register(R.a,R.p,R.e,R.j,R.i,R.c,R.l);var J=!0;t.default=function(e){var t,c,n,i,r,o,j,b,f=e.dataProfile,w=e.sidemenu,_=e.initProps,k=Object(O.useRouter)(),C=k.pathname.split("/").slice(1),S=Object(v.useState)([]),P=S[0],A=S[1],D=Object(v.useState)(!0),z=D[0],R=D[1],J=Object(v.useState)([]),B=J[0],K=J[1],G=Object(v.useState)(""),U=G[0],W=G[1],q=Object(v.useState)(!1),X=q[0],Y=q[1],H=Object(v.useState)(!1),Q=(H[0],H[1],Object(v.useState)(-1)),V=Q[0],Z=Q[1],$=Object(v.useState)(!1),ee=$[0],te=$[1],ce=Object(v.useState)([]),ne=ce[0],se=ce[1],ie=Object(v.useState)({current_page:"",data:[],first_page_url:"",from:null,last_page:null,last_page_url:"",next_page_url:"",path:"",per_page:null,prev_page_url:null,to:null,total:null}),ae=ie[0],re=ie[1],le=Object(v.useState)({status_ticket:[{id:0,name:""}],ticket_types:[],incident_type:[],companies:{data:[{id:0,title:"",key:"",value:0}]},ticket_task_types:[],resolved_times:[]}),oe=le[0],de=le[1],je=Object(v.useState)(!1),ue=je[0],be=je[1],me=Object(v.useState)(1),he=me[0],xe=me[1],fe=Object(v.useState)(10),pe=fe[0],Oe=(fe[1],Object(v.useState)({sort_by:"",sort_type:""})),ve=Oe[0],ge=Oe[1],ye=Object(v.useState)([]),Ne=(ye[0],ye[1]),we=Object(v.useState)(""),_e=we[0],ke=we[1],Ce=Object(v.useState)(""),Se=Ce[0],Te=Ce[1],Ee=Object(v.useState)(""),Pe=Ee[0],Ae=Ee[1],De=Object(v.useState)(""),Fe=De[0],ze=De[1],Ie=Object(v.useState)(""),Le=Ie[0],Me=Ie[1],Re=Object(v.useState)(""),Je=Re[0],Be=Re[1],Ke=[{title:"No",dataIndex:"num",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:ae.from+c})}}},{title:"No. Tiket",dataIndex:"id",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.full_name})}},sorter:function(e,t){return e.id>t.id}},{title:"Tipe Tiket",dataIndex:"type",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.type_name})}},sorter:function(e,t){return e.type_name.localeCompare(t.type_name)}},{title:"Diajukan Oleh",dataIndex:"requested_by",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.task.creator.name})}}},{title:"Lokasi Problem",dataIndex:"location_id",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.task.location.full_location})}}},{title:"Tanggal Pengajuan",dataIndex:"raised_at",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.raised_at})}},sorter:function(e,t){return e.raised_at.localeCompare(t.raised_at)}},{title:"Di-assign Ke",dataIndex:"assignable",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:0===t.task.users.length?Object(h.jsxs)("div",{className:" flex items-center bg-onhold bg-opacity-10",children:[Object(h.jsx)("div",{className:" mr-2",children:Object(h.jsx)(T.ib,{})}),Object(h.jsx)("div",{children:"Belum di-assign"})]}):Object(h.jsx)("div",{children:t.task.users.map((function(e){return e.name})).join(", ")})})}}},{title:"Status",dataIndex:"status",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:1===f.data.role?Object(h.jsxs)(h.Fragment,{children:[1===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue",children:"Overdue"}),2===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open",children:"Open"}),3===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress",children:"On-Progress"}),4===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onhold bg-opacity-10 text-onhold",children:"On-Hold"}),5===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed",children:"Completed"}),6===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed",children:"Closed"}),7===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-canceled bg-opacity-10 text-canceled",children:"Canceled"})]}):Object(h.jsxs)(h.Fragment,{children:[1===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress",children:"Dalam Proses"}),2===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open",children:"Menunggu Staff"}),6===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed",children:"Selesai"}),7===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-canceled bg-opacity-10 text-canceled",children:"Dibatalkan"})]})})}},sorter:function(e,t){return e.status_name.localeCompare(t.status_name)}}];return Object(v.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/").concat(1===f.data.role?"getTicketStatusCounts":"getClientTicketStatusCounts"),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){if(1===f.data.role){var t=[];for(var c in e.data.counts)"total_counts"!==c&&t.push({counts:e.data.counts[c].counts,percentage:e.data.counts[c].percentage,name:c});A(t),W(e.data.sum_ticket)}K(e.data.statuses),R(!1)}))}),[]),Object(v.useEffect)((function(){be(!0),fetch("".concat("https://service-staging.mig.id","/").concat(1===f.data.role?"getTickets":"getClientTickets","?page=").concat(he,"&rows=").concat(pe,"&ticket_id=").concat(_e,"&type_id=").concat(Se,"&from=").concat(Pe,"&to=").concat(Fe,"&location_id=").concat(Le,"&status_id=").concat(Je,"&sort_by=").concat(ve.sort_by,"&sort_type=").concat(ve.sort_type),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){re(e.data),se(e.data.data),Ne(e.data.data),be(!1)}))}),[V]),Object(v.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/").concat(1===f.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){de(e.data)}))}),[]),Object(h.jsxs)(L.a,{dataProfile:f,sidemenu:w,tok:_,st:I.a,pathArr:C,children:[Object(h.jsx)("div",{className:"flex flex-col",id:"mainWrapper",children:Object(h.jsxs)("div",{className:" grid grid-cols-10 px-5",children:[1===f.data.role?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"col-span-3 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-3",children:[Object(h.jsx)("div",{className:"flex items-center justify-between mb-4",children:Object(h.jsx)(E.a,{children:"Penyelesaian Tiket"})}),z?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{})}):Object(h.jsxs)("div",{className:" flex flex-col",children:[P.every((function(e){return 0===e.counts}))?Object(h.jsx)("div",{className:" w-full flex items-center justify-center",children:Object(h.jsx)(u.a,{image:u.a.PRESENTED_IMAGE_SIMPLE})}):Object(h.jsx)("div",{className:" w-full flex justify-center",children:Object(h.jsx)(g.b,{data:{labels:P.map((function(e){return e.name})),datasets:[{data:P.map((function(e){return e.counts})),backgroundColor:["#2F80ED","#BF4A40","#ED962F","#E5C471","#6AAA70"],borderColor:["#2F80ED","#BF4A40","#ED962F","#E5C471","#6AAA70"],borderWidth:1}]},options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,cutout:55,spacing:5}})}),Object(h.jsx)("div",{className:"flex flex-col w-full",children:P.map((function(e,t){return Object(h.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("div",{className:"w-1 mr-1 ".concat("three_hours"===e.name&&"bg-open"," ").concat("three_to_twelve_hours"===e.name&&"bg-overdue"," ").concat("twelve_to_thirty_hours"===e.name&&"bg-onprogress"," ").concat("thirty_hours_to_three_days"===e.name&&"bg-onhold"," ").concat("three_days"===e.name&&"bg-completed")}),Object(h.jsxs)(E.e,{children:["three_hours"===e.name&&"Kurang dari 3 jam"," ","three_to_twelve_hours"===e.name&&"3 - 12 jam"," ","twelve_to_thirty_hours"===e.name&&"12 - 30 jam"," ","thirty_hours_to_three_days"===e.name&&"30 jam - 3 hari"," ","three_days"===e.name&&"Lebih dari 3 hari"]})]}),Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)(E.b,{children:e.counts})})]})}))})]})]}),z?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{})}):Object(h.jsxs)("div",{className:"col-span-3 flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:" mb-3 grid grid-cols-2",children:[Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 mb-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#BF4A40"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsxs)("div",{className:" flex items-center justify-end",children:[Object(h.jsx)("p",{className:"mb-0 text-overdue font-semibold text-base mr-1",children:B[0].status_count}),Object(h.jsx)("div",{children:Object(h.jsx)(T.c,{size:15,color:"#BF4A40"})})]}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:B[0].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 mb-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#2F80ED"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-open font-semibold text-base mr-1",children:B[1].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:B[1].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 my-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#ED962F"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-onprogress font-semibold text-base mr-1",children:B[2].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:B[2].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 my-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#E5C471"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-onhold font-semibold text-base mr-1",children:B[3].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:B[3].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 mt-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#808080"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-closed font-semibold text-base mr-1",children:B[4].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:B[4].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 mt-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#F46780"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-canceled font-semibold text-base mr-1",children:B[5].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:B[5].status_name})})]})]})]}),Object(h.jsxs)("div",{className:"shadow-md rounded-md bg-white p-5 mx-2 flex justify-between items-center h-full",children:[Object(h.jsx)("div",{children:Object(h.jsx)(E.a,{children:"Total Tiket"})}),Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:" mb-0 text-5xl font-light text-primary100",children:U})})]})]}),Object(h.jsxs)("div",{className:" col-span-4 flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:"shadow-md rounded-md bg-gradient-to-br from-primary100 to-state4 transition ease-in-out hover:from-primary75 cursor-pointer p-5 mx-3 flex items-center mb-2",onClick:function(){Y(!0)},children:[Object(h.jsx)("div",{className:" mr-5",children:Object(h.jsx)(T.gb,{size:40,color:"#ffffff"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("p",{className:" mb-1 text-lg text-white font-semibold",children:"Buat Tiket"}),Object(h.jsx)("p",{className:" mb-0 text-sm text-white text-opacity-60",children:p()(new Date).locale("id").format("dddd, LL")})]})]}),Object(h.jsx)("div",{className:"col-span-4 flex flex-col shadow-md rounded-md bg-white p-5 mt-2 mx-3 h-full",children:Object(h.jsxs)("div",{className:"flex flex-col justify-center h-full",children:[Object(h.jsxs)("div",{className:" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2",onClick:function(){te(!0)},children:[Object(h.jsx)("div",{className:"flex p-1 bg-primary10 rounded mr-3",children:Object(h.jsx)(T.eb,{size:35,color:"#35763B"})}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)(E.b,{children:"Expor Tiket"}),Object(h.jsx)(E.c,{children:"Download daftar tiket dalam bentuk spreadsheet/excel"})]})]}),Object(h.jsxs)("div",{className:" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2",onClick:function(){k.push("/tickets/histories")},children:[Object(h.jsx)("div",{className:"flex p-1 bg-primary10 rounded mr-3",children:Object(h.jsx)(T.E,{size:35,color:"#35763B"})}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)(E.b,{children:"Riwayat Tiket"}),Object(h.jsx)(E.c,{children:"Lihat seluruh tiket yang berstatus closed berikut durasi"})]})]}),Object(h.jsxs)("div",{className:" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2",onClick:function(){k.push("/tickets/tickettypes")},children:[Object(h.jsx)("div",{className:"flex p-1 bg-primary10 rounded mr-3",children:Object(h.jsx)(T.a,{size:35,color:"#35763B"})}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)(E.b,{children:"Atur Tiket"}),Object(h.jsx)(E.c,{children:"Hubungkan tiket dengan task yang akan dijalankan"})]})]})]})})]})]}):Object(h.jsxs)("div",{className:" col-span-10 grid grid-cols-12",children:[Object(h.jsxs)("div",{className:"col-span-8 grid grid-cols-8 mb-6",children:[Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#ED962F"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsxs)("div",{className:" flex items-center justify-end",children:[Object(h.jsx)("p",{className:"mb-0 text-onprogress font-semibold text-base mr-1",children:null===(t=B[0])||void 0===t?void 0:t.status_count}),Object(h.jsx)("div",{children:Object(h.jsx)(T.c,{size:15,color:"#BF4A40"})})]}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:null===(c=B[0])||void 0===c?void 0:c.status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#2F80ED"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-open font-semibold text-base mr-1",children:null===(n=B[1])||void 0===n?void 0:n.status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:null===(i=B[1])||void 0===i?void 0:i.status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#808080"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-closed font-semibold text-base mr-1",children:null===(r=B[2])||void 0===r?void 0:r.status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:null===(o=B[2])||void 0===o?void 0:o.status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.gb,{size:30,color:"#BF4A40"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-overdue font-semibold text-base mr-1",children:null===(j=B[3])||void 0===j?void 0:j.status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(E.c,{children:null===(b=B[3])||void 0===b?void 0:b.status_name})})]})]})]}),Object(h.jsxs)("div",{className:"col-span-4 shadow-md rounded-md bg-gradient-to-br from-primary100 to-state4 transition ease-in-out hover:from-primary75 cursor-pointer p-5 mx-3 flex items-center mb-6",onClick:function(){Y(!0)},children:[Object(h.jsx)("div",{className:" mr-5",children:Object(h.jsx)(T.gb,{size:40,color:"#ffffff"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("p",{className:" mb-1 text-lg text-white font-semibold",children:"Buat Tiket"}),Object(h.jsx)("p",{className:" mb-0 text-sm text-white text-opacity-60",children:p()(new Date).locale("id").format("dddd, LL")})]})]})]}),Object(h.jsxs)("div",{className:"col-span-10 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-2",children:[Object(h.jsx)("div",{className:"flex items-center justify-between mb-4",children:Object(h.jsx)(E.a,{children:"Semua Tiket"})}),Object(h.jsxs)("div",{className:" flex items-center mb-4",children:[Object(h.jsx)("div",{className:"mx-1 w-2/12",children:Object(h.jsx)(d.a,{value:""===_e?null:_e,style:{width:"100%"},placeholder:"Kata Kunci..",allowClear:!0,onChange:function(e){""===e.target.value?ke(""):ke(e.target.value)}})}),Object(h.jsx)("div",{className:"mx-1 w-2/12",children:Object(h.jsx)(l.a,{value:""===Se?null:Se,placeholder:"Semua Tipe Tiket",style:{width:"100%"},allowClear:!0,name:"task_type",onChange:function(e){Te("undefined"===typeof e?"":e)},children:oe.ticket_types.map((function(e,t){return Object(h.jsx)(l.a.Option,{value:e.id,children:e.name},t)}))})}),Object(h.jsx)("div",{className:" w-3/12 mx-1",children:Object(h.jsx)(a.a.RangePicker,{style:{width:"100%"},allowEmpty:!0,className:"datepickerStatus",value:""===Pe?[null,null]:[p()(Pe),p()(Fe)],onChange:function(e,t){Ae(t[0]),ze(t[1])}})}),Object(h.jsx)("div",{className:" mx-1 w-5/12",children:Object(h.jsx)(s.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(h.jsx)(x.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){Me("undefined"===typeof e?"":e)},treeData:[1===f.data.role?oe.companies:oe.companies.data],treeDefaultExpandAll:!0,value:""===Le?null:Le})}),Object(h.jsx)("div",{className:"mx-1 w-2/12",children:Object(h.jsx)(l.a,{value:""===Je?null:Je,placeholder:"Status",style:{width:"100%"},allowClear:!0,name:"status",onChange:function(e,t){Be("undefined"===typeof e?"":e)},children:1===f.data.role?oe.status_ticket.map((function(e,t){return 1===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-overdue"})," ",e.name]})},t):2===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-open"})," ",e.name]})},t):3===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-onprogress"})," ",e.name]})},t):4===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-onhold"})," ",e.name]})},t):5===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-completed"})," ",e.name]})},t):6===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-closed"})," ",e.name]})},t):void 0})):oe.status_ticket.map((function(e,t){return 1===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-onprogress"})," ",e.name]})},t):2===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-open"})," ",e.name]})},t):6===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-closed"})," ",e.name]})},t):7===e.id?Object(h.jsx)(l.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-canceled"})," ",e.name]})},t):void 0}))})}),Object(h.jsx)("div",{className:"mx-1 w-1/12",children:Object(h.jsx)(y.a,{type:"primary",onClick:function(){be(!0),fetch("".concat("https://service-staging.mig.id","/").concat(1===f.data.role?"getTickets":"getClientTickets","?page=").concat(he,"&rows=").concat(pe,"&ticket_id=").concat(_e,"&type_id=").concat(Se,"&from=").concat(Pe,"&to=").concat(Fe,"&location_id=").concat(Le,"&status_id=").concat(Je,"&sort_by=").concat(ve.sort_by,"&sort_type=").concat(ve.sort_type),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){re(e.data),se(e.data.data),Ne(e.data.data),be(!1)}))},children:"Cari"})})]}),Object(h.jsx)("div",{children:Object(h.jsx)(M.i,{dataSource:ne,setDataSource:se,columns:Ke,loading:ue,setpraloading:be,pageSize:pe,total:ae.total,initProps:_,setpage:xe,pagefromsearch:he,setdataraw:re,setsorting:ge,sorting:ve,searching:_e,tickettype:Se,fromdate:Pe,todate:Fe,location:Le,status:Je,dataprofile:f})})]})]})}),Object(h.jsx)(N.a,{title:"Tiket Baru",visible:X,onClose:function(){Y(!1)},buttonOkText:"Simpan",initProps:_,onvisible:Y,refreshtickets:V,setrefreshtickets:Z,dataprofile:f}),1===f.data.role&&Object(h.jsx)(F,{title:"Ekspor Tiket",visible:ee,onClose:function(){te(!1)},buttonOkText:"Ekspor Tiket",initProps:_,onvisible:te})]})}},Zs9b:function(e,t,c){"use strict";var n=c("rmht"),s=c.n(n),i=c("wXtC"),a=c.n(i),r=c("iJl9"),l=c.n(r),o=c("FAat"),d=c.n(o),j=c("nKUr"),u=c("MM9K"),b=c.n(u),m=c("rR1Q"),h=c.n(m),x=c("vJKn"),f=c.n(x),p=c("cpVT"),O=c("z7pX"),v=c("rg98"),g=c("MX0m"),y=c.n(g),N=c("l+S1"),w=c("ye1Q"),_=c("wd/R"),k=c.n(_),C=c("q1tI"),S=c("ZXdF"),T=c("ckOl"),E=(c("44PY"),c("8TZf")),P=c("cFzE");function A(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function D(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?A(Object(c),!0).forEach((function(t){Object(p.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):A(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}t.a=function(e){var t=e.title,c=e.visible,n=e.onvisible,i=(e.onClose,e.buttonOkText),r=(e.disabled,e.initProps),o=(e.refreshtickets,e.setrefreshtickets),u=e.dataprofile,m=Object(C.useState)({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),x=m[0],p=m[1],g=Object(C.useState)(!1),_=g[0],A=g[1],F=Object(C.useState)([]),z=F[0],I=F[1],L=Object(C.useState)([]),M=L[0],R=L[1],J=Object(C.useState)([]),B=J[0],K=J[1],G=Object(C.useState)(!1),U=(G[0],G[1],Object(C.useState)(!1)),W=U[0],q=U[1],X=Object(C.useState)(!1),Y=X[0],H=X[1],Q=Object(C.useState)(!1),V=Q[0],Z=Q[1],$=Object(C.useState)(!0),ee=$[0],te=$[1],ce=Object(C.useState)(-1),ne=ce[0],se=ce[1],ie=function(){var e=Object(v.a)(f.a.mark((function e(t){var c,n,s,i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),c=t.target.files,(n=new FormData).append("file",c[0]),n.append("upload_preset","migsys"),e.next=7,fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:n});case 7:return s=e.sent,e.next=10,s.json();case 10:i=e.sent,(a=Object(O.a)(x.files)).push(i.secure_url),p(D(D({},x),{},{files:a})),Z(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/").concat(1===u.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(r)}}).then((function(e){return e.json()})).then((function(e){I(e.data.ticket_types),R(e.data.ticket_task_types),K([1===u.data.role?e.data.companies:e.data.companies.data])}))}),[]),Object(C.useEffect)((function(){null!==x.type_id&&""!==x.name&&null!==x.ticket_task_type_id&&""!==x.product_id&&null!==x.incident_time&&null!==x.location_id?te(!1):te(!0)}),[ne]),Object(j.jsx)(P.a,{title:t,visible:c,onClose:function(){p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),n(!1)},buttonOkText:i,onClick:function(){!1===/(^\d+$)/.test(x.pic_contact)||!1===/(^\d+$)/.test(x.product_id)?""===x.pic_contact?(A(!0),te(!0),fetch("".concat("https://service-staging.mig.id","/addTicket"),{method:"POST",headers:{Authorization:JSON.parse(r),"Content-Type":"application/json"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),A(!1),te(!1),e.success?(p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),n(!1),h.a.success({message:e.message,duration:3})):h.a.error({message:e.message,duration:3})}))):(!1===new RegExp(/(^\d+$)/).test(x.pic_contact)?q(!0):q(!1),!1===new RegExp(/(^\d+$)/).test(x.product_id)?H(!0):H(!1),te(!0)):(A(!0),te(!0),fetch("".concat("https://service-staging.mig.id","/addTicket"),{method:"POST",headers:{Authorization:JSON.parse(r),"Content-Type":"application/json"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),A(!1),te(!1),e.success?(p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),n(!1),h.a.success({message:e.message,duration:3})):h.a.error({message:e.message,duration:3})})))},disabled:ee,children:_?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(b.a,{})}):Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("div",{className:"mb-6",children:Object(j.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-3689135148 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Tipe Tiket"}),Object(j.jsx)("span",{className:"jsx-3689135148 tickettypes"}),Object(j.jsx)(y.a,{id:"3689135148",children:[".tickettypes.jsx-3689135148::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){p(D(D({},x),{},{type_id:e})),se((function(e){return e+1}))},value:x.type_id,children:z.map((function(e,t){return Object(j.jsx)(d.a.Option,{value:e.id,children:e.name})}))})})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-2641960267 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Jenis Aset"}),Object(j.jsx)("span",{className:"jsx-2641960267 tickettask"}),Object(j.jsx)(y.a,{id:"2641960267",children:[".tickettask.jsx-2641960267::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){p(D(D({},x),{},{ticket_task_type_id:e})),se((function(e){return e+1}))},value:x.ticket_task_type_id,children:M.map((function(e,t){return Object(j.jsxs)(d.a.Option,{value:e.id,children:[e.name," - ",e.task_type_name]})}))})})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsxs)("div",{className:"jsx-4263238570 flex mb-2",children:[Object(j.jsx)(E.c,{children:"ID Produk"}),Object(j.jsx)("span",{className:"jsx-4263238570 idproduk"}),Object(j.jsx)(y.a,{id:"4263238570",children:[".idproduk.jsx-4263238570::before{content:'*';color:red;}"]})]}),Object(j.jsx)(l.a,{value:x.product_id,onChange:function(e){p(D(D({},x),{},{product_id:e.target.value})),se((function(e){return e+1}))}}),Y&&Object(j.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"ID Produk harus angka"})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-2493184868 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Waktu Kejadian"}),Object(j.jsx)("span",{className:"jsx-2493184868 timeincident"}),Object(j.jsx)(y.a,{id:"2493184868",children:[".timeincident.jsx-2493184868::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(a.a,{style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",value:null===x.incident_time?null:k()(x.incident_time),onChange:function(e,t){p(D(D({},x),{},{incident_time:""===t?null:t})),se((function(e){return e+1}))}})})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-1976207010 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Lokasi Kejadian"}),Object(j.jsx)("span",{className:"jsx-1976207010 locincident"}),Object(j.jsx)(y.a,{id:"1976207010",children:[".locincident.jsx-1976207010::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(s.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(j.jsx)(N.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){p(D(D({},x),{},"undefined"===typeof e?{location_id:null}:{location_id:e})),se((function(e){return e+1}))},treeData:B,treeDefaultExpandAll:!0,value:x.location_id})})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"PIC"})}),Object(j.jsx)(l.a,{value:x.pic_name,onChange:function(e){p(D(D({},x),{},{pic_name:e.target.value}))}})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"Kontak PIC"})}),Object(j.jsx)(l.a,{value:x.pic_contact,onChange:function(e){p(D(D({},x),{},{pic_contact:e.target.value})),se((function(e){return e+1}))}}),W&&Object(j.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"Kontak PIC harus angka"})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"Deskripsi Masalah"})}),Object(j.jsx)(l.a.TextArea,{rows:5,value:x.description,onChange:function(e){p(D(D({},x),{},{description:e.target.value}))}})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"Bukti Kejadian"})}),Object(j.jsxs)("div",{className:" flex justify-between items-center mb-2",children:[Object(j.jsx)("div",{children:Object(j.jsx)(E.c,{children:"Unggah JPG/MP4 (Maks. 5 MB)"})}),Object(j.jsx)("div",{children:Object(j.jsxs)(S.a,{type:"primaryInput",onChangeGambar:ie,children:[V?Object(j.jsx)(w.a,{style:{marginRight:"0.5rem"}}):Object(j.jsx)("div",{className:"mr-1",children:Object(j.jsx)(T.r,{size:15,color:"#ffffff"})}),"Unggah File"]})})]}),Object(j.jsx)("div",{className:"grid grid-cols-3",children:x.files.map((function(e,t){return Object(j.jsxs)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2",children:[Object(j.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""}),Object(j.jsx)("div",{className:" cursor-pointer",onClick:function(){var e=Object(O.a)(x.files);e.splice(t,1),p((function(t){return D(D({},t),{},{files:e})}))},children:Object(j.jsx)(T.hb,{size:15,color:"#BF4A40"})})]})}))})]})]})})}},cpVT:function(e,t,c){"use strict";function n(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}c.d(t,"a",(function(){return n}))},hf16:function(e,t,c){"use strict";var n=c("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.responsiveMap=t.responsiveArray=t.default=void 0;var s=n(c("lSNA")),i=n(c("pVnL"));t.responsiveArray=["xxl","xl","lg","md","sm","xs"];var a={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};t.responsiveMap=a;var r=new Map,l=-1,o={},d={matchHandlers:{},dispatch:function(e){return o=e,r.forEach((function(e){return e(o)})),r.size>=1},subscribe:function(e){return r.size||this.register(),l+=1,r.set(l,e),e(o),l},unsubscribe:function(e){r.delete(e),r.size||this.unregister()},unregister:function(){var e=this;Object.keys(a).forEach((function(t){var c=a[t],n=e.matchHandlers[c];null===n||void 0===n||n.mql.removeListener(null===n||void 0===n?void 0:n.listener)})),r.clear()},register:function(){var e=this;Object.keys(a).forEach((function(t){var c=a[t],n=function(c){var n=c.matches;e.dispatch((0,i.default)((0,i.default)({},o),(0,s.default)({},t,n)))},r=window.matchMedia(c);r.addListener(n),e.matchHandlers[c]={mql:r,listener:n},n(r)}))}};t.default=d},"l+S1":function(e,t,c){"use strict";var n=c("VTBJ"),s=c("q1tI"),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},a=c("6VBw"),r=function(e,t){return s.createElement(a.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))};r.displayName="SearchOutlined";t.a=s.forwardRef(r)},rg98:function(e,t,c){"use strict";function n(e,t,c,n,s,i,a){try{var r=e[i](a),l=r.value}catch(o){return void c(o)}r.done?t(l):Promise.resolve(l).then(n,s)}function s(e){return function(){var t=this,c=arguments;return new Promise((function(s,i){var a=e.apply(t,c);function r(e){n(a,s,i,r,l,"next",e)}function l(e){n(a,s,i,r,l,"throw",e)}r(void 0)}))}}c.d(t,"a",(function(){return s}))},vy9S:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets",function(){return c("MIAW")}])},ye1Q:function(e,t,c){"use strict";var n=c("VTBJ"),s=c("q1tI"),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},a=c("6VBw"),r=function(e,t){return s.createElement(a.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))};r.displayName="LoadingOutlined";t.a=s.forwardRef(r)},ymym:function(e,t,c){"use strict";c.d(t,"a",(function(){return h})),c.d(t,"b",(function(){return x})),c.d(t,"c",(function(){return m})),c.d(t,"d",(function(){return f}));var n=c("q1tI"),s=c.n(n),i=c("m0r1");const a="label";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function l(e,t){e.labels=t}function o(e,t){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;const n=[];e.datasets=t.map((t=>{const s=e.datasets.find((e=>e[c]===t[c]));return s&&t.data&&!n.includes(s)?(n.push(s),Object.assign(s,t),s):{...t}}))}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;const c={labels:[],datasets:[]};return l(c,e.labels),o(c,e.datasets,t),c}function j(e,t){let{height:c=150,width:a=300,redraw:j=!1,datasetIdKey:u,type:b,data:m,options:h,plugins:x=[],fallbackContent:f,...p}=e;const O=Object(n.useRef)(null),v=Object(n.useRef)(),g=()=>{O.current&&(v.current=new i.f(O.current,{type:b,data:d(m,u),options:h,plugins:x}),r(t,v.current))},y=()=>{r(t,null),v.current&&(v.current.destroy(),v.current=null)};return Object(n.useEffect)((()=>{var e,t;!j&&v.current&&h&&(e=v.current,t=h,e.options={...t})}),[j,h]),Object(n.useEffect)((()=>{!j&&v.current&&l(v.current.config.data,m.labels)}),[j,m.labels]),Object(n.useEffect)((()=>{!j&&v.current&&m.datasets&&o(v.current.config.data,m.datasets,u)}),[j,m.datasets]),Object(n.useEffect)((()=>{v.current&&(j?(y(),setTimeout(g)):v.current.update())}),[j,h,m.labels,m.datasets]),Object(n.useEffect)((()=>(g(),()=>y())),[]),s.a.createElement("canvas",Object.assign({ref:O,role:"img",height:c,width:a},p),f)}const u=Object(n.forwardRef)(j);function b(e,t){return i.f.register(t),Object(n.forwardRef)(((t,c)=>s.a.createElement(u,Object.assign({},t,{ref:c,type:e}))))}const m=b("line",i.h),h=b("bar",i.b),x=(i.n,b("doughnut",i.g)),f=(i.m,i.d,b("pie",i.k));i.o},z7pX:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));var n=c("6FTQ");var s=c("8rE2");function i(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(s.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},[["vy9S",0,2,19,30,1,3,4,5,6,7,8,9,12,14,17,18,20,21,22,23,25,26,33]]]);