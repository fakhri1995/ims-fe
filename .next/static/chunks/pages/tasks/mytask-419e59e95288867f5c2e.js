_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[132],{"8Skl":function(e,t,n){"use strict";var a=n("VTBJ"),s=n("q1tI"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},r=n("6VBw"),i=function(e,t){return s.createElement(r.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};i.displayName="DownOutlined";t.a=s.forwardRef(i)},C88r:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return J}));var a=n("sF4d"),s=n.n(a),c=n("CgBw"),r=n.n(c),i=n("kEgK"),o=n.n(i),l=n("rmht"),d=n.n(l),u=n("wXtC"),j=n.n(u),h=n("FAat"),m=n.n(h),f=n("MM9K"),b=n.n(f),x=n("iJl9"),p=n.n(x),O=n("rR1Q"),g=n.n(O),v=n("nKUr"),y=n("l+S1"),N=n("8Skl"),w=n("wd/R"),k=n.n(w),S=n("20a2"),_=n("q1tI"),T=n("ymym"),C=n("ZXdF"),E=n("ckOl"),A=n("qe3g"),F=n.n(A),z=n("D1C7"),I=n("o8C9"),D=n("8TZf"),L=n("m0r1");L.f.register(L.a,L.p,L.e,L.j,L.i,L.c,L.l);var J=!0;t.default=function(e){var t=e.initProps,n=e.dataProfile,a=e.sidemenu,c=Object(S.useRouter)(),i=c.pathname.split("/").slice(1);i[i.length-1]="My Task";var l=Object(_.useState)([]),u=l[0],h=l[1],f=Object(_.useState)(!0),x=f[0],O=f[1],w=Object(_.useState)([]),A=w[0],L=w[1],J=Object(_.useState)(!0),P=J[0],B=J[1],M=Object(_.useState)(!1),R=M[0],G=M[1],U=Object(_.useState)({from:"",to:""}),H=U[0],q=U[1],K=Object(_.useState)([]),V=K[0],W=K[1],X=Object(_.useState)(""),Z=X[0],Q=X[1],Y=Object(_.useState)(!1),$=Y[0],ee=Y[1],te=Object(_.useState)(["#2F80ED","#E5C471","#BF4A40","#6AAA70"]),ne=te[0],ae=(te[1],Object(_.useState)([])),se=ae[0],ce=ae[1],re=Object(_.useState)(!0),ie=re[0],oe=re[1],le=Object(_.useState)([]),de=le[0],ue=le[1],je=Object(_.useState)(!1),he=je[0],me=je[1],fe=Object(_.useState)(-1),be=fe[0],xe=(fe[1],Object(_.useState)(-1)),pe=(xe[0],xe[1]),Oe=Object(_.useState)(!1),ge=(Oe[0],Oe[1],Object(_.useState)("")),ve=(ge[0],ge[1],Object(_.useState)({current_page:"",data:[],first_page_url:"",from:null,last_page:null,last_page_url:"",next_page_url:"",path:"",per_page:null,prev_page_url:null,to:null,total:null})),ye=ve[0],Ne=ve[1],we=Object(_.useState)([]),ke=we[0],Se=we[1],_e=Object(_.useState)(!1),Te=_e[0],Ce=_e[1],Ee=Object(_.useState)([]),Ae=Ee[0],Fe=Ee[1],ze=Object(_.useState)([]),Ie=ze[0],De=ze[1],Le=Object(_.useState)(""),Je=Le[0],Pe=Le[1],Be=Object(_.useState)({sort_by:"",sort_type:""}),Me=Be[0],Re=Be[1],Ge=Object(_.useState)(""),Ue=Ge[0],He=Ge[1],qe=Object(_.useState)(""),Ke=qe[0],Ve=qe[1],We=Object(_.useState)(""),Xe=We[0],Ze=We[1],Qe=Object(_.useState)(""),Ye=Qe[0],$e=Qe[1],et=Object(_.useState)(""),tt=et[0],nt=et[1],at=Object(_.useState)(!1),st=at[0],ct=at[1],rt=Object(_.useState)(1),it=rt[0],ot=rt[1],lt=Object(_.useState)(10),dt=lt[0],ut=(lt[1],Object(_.useState)(!1)),jt=ut[0],ht=(ut[1],Object(_.useState)({current_page:"",data:[],first_page_url:"",from:null,last_page:null,last_page_url:"",next_page_url:"",path:"",per_page:null,prev_page_url:null,to:null,total:null})),mt=ht[0],ft=ht[1],bt=Object(_.useState)(!1),xt=bt[0],pt=bt[1],Ot=Object(_.useState)([]),gt=Ot[0],vt=Ot[1],yt=Object(_.useState)(1),Nt=yt[0],wt=yt[1],kt=Object(_.useState)(10),St=kt[0],_t=(kt[1],Object(_.useState)(!1)),Tt=_t[0],Ct=_t[1],Et=Object(_.useState)(-1),At=Et[0],Ft=Et[1],zt=Object(_.useState)({sort_by:"",sort_type:""}),It=zt[0],Dt=zt[1],Lt=Object(_.useState)(!1),Jt=Lt[0],Pt=Lt[1],Bt=Object(_.useState)([]),Mt=Bt[0],Rt=Bt[1],Gt=Object(_.useState)([]),Ut=Gt[0],Ht=Gt[1],qt=Object(_.useState)(""),Kt=qt[0],Vt=qt[1],Wt=Object(_.useState)(""),Xt=Wt[0],Zt=Wt[1],Qt=Object(_.useState)(""),Yt=Qt[0],$t=Qt[1],en=Object(_.useState)(""),tn=en[0],nn=en[1],an=Object(_.useState)(""),sn=an[0],cn=an[1],rn=[{title:"No",dataIndex:"num",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:ye.from+n})}}},{title:"Nomor Task",dataIndex:"id",render:function(e,t,n){return{children:Object(v.jsxs)(v.Fragment,{children:["T-000",t.id]})}},sorter:function(e,t){return e.id<t.id}},{title:"Tipe Task",dataIndex:"name",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:null===t.task_type?"-":t.task_type.name})}}},{title:"Judul Task",dataIndex:"name",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:""===t.name||"-"===t.name?"-":t.name})}},sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"Deadline",dataIndex:"deadline",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:null===t.deadline?"-":k()(t.deadline).locale("id").format("lll")})}},sorter:function(e,t){return e.deadline>t.deadline}},{title:"Staff",dataIndex:"users",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:0===t.users.length?"-":t.users.map((function(e){return e.name})).join(", ")})}}},{title:"Lokasi",dataIndex:"location",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:null===t.location?"-":t.location.full_location})}}},{title:"Status",dataIndex:"status",align:"center",render:function(e,t,n){return{children:Object(v.jsxs)(v.Fragment,{children:[1===t.status&&Object(v.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue",children:"Overdue"}),2===t.status&&Object(v.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open",children:"Open"}),3===t.status&&Object(v.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress",children:"On-Progress"}),4===t.status&&Object(v.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onhold bg-opacity-10 text-onhold",children:"On-Hold"}),5===t.status&&Object(v.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed",children:"Completed"}),6===t.status&&Object(v.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed",children:"Closed"})]})}},sorter:function(e,t){return e.status<t.status},filters:[{text:"Overdue",value:1},{text:"Open",value:2},{text:"On Progress",value:3},{text:"On Hold",value:4},{text:"Completed",value:5},{text:"Closed",value:6}],onFilter:function(e,t){return t.status===e},filterMultiple:!1}],on=[{title:"No",dataIndex:"num",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:mt.from+n})}}},{title:"Nomor Task",dataIndex:"id",render:function(e,t,n){return{children:Object(v.jsxs)(v.Fragment,{children:["T-000",t.id]})}},sorter:function(e,t){return e.id>t.id}},{title:"Tipe Task",dataIndex:"task_type",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:null===t.task_type?"-":t.task_type.name})}}},{title:"Judul Task",dataIndex:"name",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:""===t.name||"-"===t.name?"-":t.name})}},sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"Deadline",dataIndex:"deadline",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:null===t.deadline?"-":k()(t.deadline).locale("id").format("lll")})}},sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"Lokasi",dataIndex:"location",render:function(e,t,n){return{children:Object(v.jsx)("p",{className:" truncate",children:null===t.location?"-":t.location.full_location})}}},{title:"Deskripsi",dataIndex:"description",render:function(e,t,n){return{children:Object(v.jsx)("p",{className:" line-clamp-3",children:""===t.description||"-"===t.description?"-":t.description})}},sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",dataIndex:"actions",align:"center",render:function(e,t,n){return{children:Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(C.a,{type:"primary",onClick:function(){ln(t.id)},children:[Object(v.jsx)("div",{className:"mr-1",children:Object(v.jsx)(E.H,{size:18,color:"#ffffff"})}),"Ambil"]})})}}}],ln=function(e){fetch("".concat("https://service-staging.mig.id","/assignSelfTask"),{method:"PUT",headers:{Authorization:JSON.parse(t),"Content-Type":"application/json"},body:JSON.stringify({id:Number(e)})}).then((function(e){return e.json()})).then((function(e){Ft((function(e){return e+1})),e.success?g.a.success({message:e.message,duration:3}):g.a.error({message:e.message,duration:3})}))};return Object(_.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getFilterTaskTypes?name=").concat(tt),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){Fe(e.data),Ht(e.data)}))}),[]),Object(_.useEffect)((function(){Ce(!0),fetch("".concat("https://service-staging.mig.id","/getUserTasks?page=").concat(it,"&rows=").concat(dt,"&sort_by=").concat(Me.sort_by,"&sort_type=").concat(Me.sort_type,"&keyword=").concat(Je,"&task_type=").concat(tt,"&location=").concat(Ke,"&from=").concat(Xe,"&to=").concat(Ye,"&status=[").concat(Ue,"]"),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){Ne(e.data),Se(e.data.data),Ce(!1)}))}),[jt,xt]),Object(_.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getAllCompanyList"),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){De(e.data.children),Rt(e.data.children),W(e.data.children),ue(e.data.children),B(!1)}))}),[]),Object(_.useEffect)((function(){Ce(!0),fetch("".concat("https://service-staging.mig.id","/getUserLastTwoTasks"),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){h(e.data),O(!1)}))}),[]),Object(_.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getUserTaskStatusList"),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){L(e.data.status_list),B(!1)}))}),[]),Object(_.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getUserTaskTypeCounts"),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){ce(e.data),oe(!1)}))}),[]),Object(_.useEffect)((function(){Ct(!0),fetch("".concat("https://service-staging.mig.id","/getTaskPickList?rows=").concat(St,"&page=").concat(Nt,"&keyword=").concat(Kt,"&task_type=").concat(sn,"&location=").concat(Xt,"&from=").concat(Yt,"&to=").concat(tn,"&sort_by=").concat(It.sort_by,"&sort_type=").concat(It.sort_type),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){ft(e.data),vt(e.data.data),Ct(!1)}))}),[xt,At,Jt]),Object(_.useEffect)((function(){-1!==be&&pe(be)}),[be]),Object(v.jsx)(z.a,{tok:t,dataProfile:n,sidemenu:a,pathArr:i,st:F.a,prevpath:"mytask",children:Object(v.jsx)("div",{className:"flex flex-col",id:"mainWrapper",children:xt?Object(v.jsx)(v.Fragment,{children:xt&&Object(v.jsx)("div",{className:"px-5",children:Object(v.jsxs)("div",{className:"flex flex-col shadow-md rounded-lg bg-white p-5 mb-6 mx-3",children:[Object(v.jsx)("div",{className:"flex justify-between items-center mb-5",children:Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsx)("div",{className:"mr-2 cursor-pointer",onClick:function(){pt(!1)},children:Object(v.jsx)(E.i,{size:15,color:"#000000"})}),Object(v.jsx)(D.a,{children:"Open Task"})]})}),Object(v.jsxs)("div",{className:" flex items-center mb-4",children:[Object(v.jsx)("div",{className:"mx-1 w-3/12",children:Object(v.jsx)(p.a,{value:Kt,style:{width:"100%"},placeholder:"Judul Task..",allowClear:!0,onChange:function(e){""===e.target.value?Vt(""):Vt(e.target.value)}})}),Object(v.jsx)("div",{className:"mx-1 w-2/12",children:Object(v.jsx)(m.a,{value:""===sn?null:sn,placeholder:"Semua Tipe Task",style:{width:"100%"},allowClear:!0,showSearch:!0,optionFilterProp:"children",notFoundContent:st?Object(v.jsx)(b.a,{size:"small"}):null,onSearch:function(e){ct(!0),fetch("".concat("https://service-staging.mig.id","/getFilterTaskTypes?name=").concat(e),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){Fe(e.data),ct(!1)}))},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},name:"task_type_id",onChange:function(e){cn("undefined"===typeof e?"":e)},children:Ut.map((function(e,t){return Object(v.jsx)(m.a.Option,{value:e.id,children:e.name},t)}))})}),Object(v.jsx)("div",{className:" w-3/12 mx-1",children:Object(v.jsx)(j.a.RangePicker,{showTime:!0,allowEmpty:!0,className:"datepickerStatus",value:""===Yt?[null,null]:[k()(Yt),k()(tn)],onChange:function(e,t){$t(t[0]),nn(t[1])}})}),Object(v.jsx)("div",{className:" mx-1 w-3/12",children:Object(v.jsx)(d.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(v.jsx)(y.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){Zt("undefined"===typeof e?"":e)},treeData:Mt,treeDefaultExpandAll:!0,value:""===Xt?null:Xt})}),Object(v.jsx)("div",{className:"mx-1 w-1/12",children:Object(v.jsxs)(C.a,{type:"primary",onClick:function(){Pt(!0),fetch("".concat("https://service-staging.mig.id","/getTaskPickList?rows=").concat(St,"&page=1&keyword=").concat(Kt,"&task_type=").concat(sn,"&location=").concat(Xt,"&from=").concat(Yt,"&to=").concat(tn,"&sort_by=").concat(It.sort_by,"&sort_type=").concat(It.sort_type),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){wt(1),ft(e.data),vt(e.data.data),Pt(!1)}))},children:[Object(v.jsx)("div",{className:"mr-1",children:Object(v.jsx)(E.W,{size:15,color:"#ffffff"})}),"Cari"]})})]}),Object(v.jsx)("div",{children:Object(v.jsx)(I.f,{dataSource:gt,setDataSource:vt,columns:on,loading:Tt,setpraloading:Ct,pageSize:St,total:mt.total,initProps:t,setpage:wt,pagefromsearch:Nt,setdataraw:ft,sortstate:It,setsortstate:Dt,searchstate:Kt,tasktypefilterstate:sn,fromdatefilterstate:Yt,todatefilterstate:tn,lokasifilterstate:Xt})})]})})}):Object(v.jsxs)("div",{className:"grid grid-cols-11 px-5",id:"wrapper1",children:[Object(v.jsx)("div",{className:" col-span-5 flex flex-col shadow-md rounded-md bg-gray-50 p-5 mb-6 mr-3",children:x?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(b.a,{})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[Object(v.jsx)(D.a,{children:"Segera Berakhir"}),u.length>0&&Object(v.jsxs)("div",{className:"p-2 rounded bg-red-50 text-state1 text-xs flex",children:[Object(v.jsx)("div",{className:"mr-1 flex items-center",children:Object(v.jsx)(E.q,{size:15,color:"#BF4A40"})}),k()(u[0].deadline).locale("id").format("lll")]})]}),Object(v.jsx)("div",{className:" h-full",children:u.length<1?Object(v.jsx)("div",{className:" flex w-full h-full items-center justify-center",children:Object(v.jsx)(o.a,{image:o.a.PRESENTED_IMAGE_SIMPLE})}):Object(v.jsxs)(v.Fragment,{children:[u.length>=1&&Object(v.jsxs)("div",{className:"rounded bg-state1 hover:bg-state12 transition duration-300 shadow text-white p-5 flex justify-between mb-2 cursor-pointer h-3/6",onClick:function(){c.push("/tasks/detail/".concat(u[0].id))},children:[Object(v.jsxs)("div",{className:"flex flex-col",children:[Object(v.jsx)("div",{children:Object(v.jsx)(E.p,{size:50,color:"#ffffff"})}),Object(v.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(v.jsxs)(D.e,{color:"white",children:["Berakhir"," ",(new Date-new Date(u[0].deadline))/864e5<1?"Hari Ini":"".concat(k()(u[0].deadline).locale("id").format("Do MMM"))]}),Object(v.jsx)(r.a,{trailColor:"#4D4D4D",strokeColor:"#ffffff",percent:u[0].time_limit_percentage,showInfo:!1})]})]}),Object(v.jsxs)("div",{className:"flex flex-col",children:[Object(v.jsxs)("div",{className:"flex flex-col text-right",children:[Object(v.jsx)("p",{className:"font-bold text-xl mb-0 text-white",children:u[0].name}),Object(v.jsxs)(D.c,{children:["T-000",u[0].id]})]}),Object(v.jsx)("div",{className:"flex flex-col mt-4 text-right",children:Object(v.jsxs)(D.b,{color:"white",children:["Sisa ",u[0].time_left]})})]})]}),u.length>=2&&Object(v.jsxs)("div",{className:"rounded bg-white hover:bg-mono90 transition duration-300 shadow p-5 flex justify-between cursor-pointer h-3/6",onClick:function(){c.push("/tasks/detail/".concat(u[1].id))},children:[Object(v.jsxs)("div",{className:"flex flex-col",children:[Object(v.jsx)("div",{children:Object(v.jsx)(E.p,{size:50,color:"#35763B"})}),Object(v.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(v.jsxs)(D.e,{children:["Berakhir"," ",(new Date-new Date(u[1].deadline))/864e5<1?"Hari Ini":"".concat(k()(u[1].deadline).locale("id").format("Do MMM"))]}),Object(v.jsx)(r.a,{trailColor:"#d8e8da",strokeColor:"#35763B",percent:u[1].time_limit_percentage,showInfo:!1})]})]}),Object(v.jsxs)("div",{className:"flex flex-col",children:[Object(v.jsxs)("div",{className:"flex flex-col text-right",children:[Object(v.jsx)(D.a,{children:u[1].name}),Object(v.jsxs)(D.c,{children:["T-000",u[1].id]})]}),Object(v.jsx)("div",{className:"flex flex-col mt-4 text-right",children:Object(v.jsxs)(D.b,{color:"primary",children:["Sisa ",u[1].time_left]})})]})]})]})})]})}),Object(v.jsxs)("div",{className:"col-span-3 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-3",children:[Object(v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[Object(v.jsx)(D.a,{children:"Status Task"}),Object(v.jsxs)("div",{className:"flex items-center",children:[Object(v.jsxs)("div",{className:" dropdown",children:[Object(v.jsx)("div",{tabIndex:"0",className:"mx-1 cursor-pointer",onClick:function(){ee((function(e){return!e}))},children:Object(v.jsx)(E.L,{color:"#000000",size:25})}),$?Object(v.jsxs)("div",{tabIndex:"0",className:"p-5 shadow menu dropdown-content bg-white rounded-box w-72 flex flex-col max-h-72 overflow-scroll",children:[Object(v.jsxs)("div",{className:" flex justify-end mb-1 cursor-pointer",onClick:function(){ee(!1),B(!0),fetch("".concat("https://service-staging.mig.id","/getUserTaskStatusList?from=").concat(H.from,"&to=").concat(H.to,"&location="),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){Q(""),L(e.data.status_list),B(!1)}))},children:[Object(v.jsx)("p",{className:" text-xs text-gray-500 mr-1",children:"Reset"}),Object(v.jsx)(E.o,{size:15,color:"#BF4A40"})]}),Object(v.jsx)(s.a,{className:"treeTaskStatusList",defaultExpandAll:!0,treeData:V,switcherIcon:Object(v.jsx)(N.a,{}),showIcon:!0,blockNode:!0,titleRender:function(e){return Object(v.jsxs)("div",{className:"flex items-start w-full py-3 rounded-md px-2",onClick:function(){ee(!1),B(!0),fetch("".concat("https://service-staging.mig.id","/getUserTaskStatusList?from=").concat(H.from,"&to=").concat(H.to,"&location=").concat(e.key),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(t){Q(e.key),L(t.data.status_list),B(!1)}))},children:[Object(v.jsx)("div",{className:"mr-3 flex items-start",children:Object(v.jsx)(E.K,{id:"icon".concat(e.key),size:15,color:"#808080"})}),Object(v.jsx)("div",{className:"mr-3",children:Object(v.jsx)("p",{className:" text-gray-500 mb-0",id:"text".concat(e.key),children:e.title})})]})}})]}):null]}),Object(v.jsx)("div",{className:"mx-1 cursor-pointer",onClick:function(){G((function(e){return!e}))},children:Object(v.jsx)(E.k,{color:"#000000",size:25})}),Object(v.jsx)(j.a.RangePicker,{value:""===H.from?["",""]:[k()(H.from),k()(H.to)],allowEmpty:!0,style:{visibility:"hidden",width:"0",padding:"0"},className:"datepickerStatus",open:R,onChange:function(e,n){G((function(e){return!e})),B(!0),fetch("".concat("https://service-staging.mig.id","/getUserTaskStatusList?from=").concat(n[0],"&to=").concat(n[1],"&location=").concat(Z),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){q({from:n[0],to:n[1]}),L(e.data.status_list),B(!1)}))},renderExtraFooter:function(){return Object(v.jsx)("div",{className:" flex items-center",children:Object(v.jsx)("p",{className:" mb-0 text-primary100 hover:text-primary75 cursor-pointer",onClick:function(){G((function(e){return!e})),B(!0),fetch("".concat("https://service-staging.mig.id","/getUserTaskStatusList?from=&to=&location=").concat(Z),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){q({from:"",to:""}),L(e.data.status_list),B(!1)}))},children:"Reset"})})}})]})]}),P?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(b.a,{})}):A.every((function(e){return 0===e.status_count}))?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(o.a,{image:o.a.PRESENTED_IMAGE_SIMPLE})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"flex justify-center mb-4",children:Object(v.jsx)(T.b,{data:{labels:A.map((function(e){return e.status_name})),datasets:[{data:A.map((function(e){return e.status_count})),backgroundColor:["#BF4A40","#2F80ED","#ED962F","#E5C471","#6AAA70","#808080"],borderColor:["#BF4A40","#2F80ED","#ED962F","#E5C471","#6AAA70","#808080"],borderWidth:1}]},options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,cutout:55,spacing:5}})}),Object(v.jsx)("div",{className:"flex flex-col",children:A.map((function(e,t){return 1===e.status?Object(v.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsx)("div",{className:" w-1 bg-overdue mr-1"}),Object(v.jsx)("div",{className:"mr-1",children:Object(v.jsx)(D.e,{children:e.status_name})}),Object(v.jsx)(E.c,{size:15,color:"#BF4A40"})]}),Object(v.jsx)("div",{className:"flex",children:Object(v.jsx)(D.b,{children:e.status_count})})]}):Object(v.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsx)("div",{className:"w-1 mr-1 ".concat(1===e.status&&"bg-overdue"," ").concat(2===e.status&&"bg-open"," ").concat(3===e.status&&"bg-onprogress"," ").concat(4===e.status&&"bg-onhold"," ").concat(5===e.status&&"bg-completed"," ").concat(6===e.status&&"bg-closed")}),Object(v.jsx)(D.e,{children:e.status_name})]}),Object(v.jsx)("div",{className:"flex",children:Object(v.jsx)(D.b,{children:e.status_count})})]})}))})]})]}),Object(v.jsxs)("div",{className:"col-span-3 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-3",children:[Object(v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[Object(v.jsx)(D.a,{children:"Tipe Task Terbanyak"}),Object(v.jsx)("div",{className:"flex items-center",children:Object(v.jsxs)("div",{className:"dropdown dropdown-left",children:[Object(v.jsx)("div",{tabIndex:"1",className:"mx-1 cursor-pointer",onClick:function(){me((function(e){return!e}))},children:Object(v.jsx)(E.L,{color:"#000000",size:25})}),he?Object(v.jsxs)("div",{tabIndex:"1",className:"p-5 shadow menu dropdown-content bg-white rounded-box w-72 flex flex-col max-h-72 overflow-scroll",children:[Object(v.jsxs)("div",{className:" flex justify-end mb-1 cursor-pointer",onClick:function(){me(!1),oe(!0),fetch("".concat("https://service-staging.mig.id","/getUserTaskTypeCounts?location="),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){ce(e.data),oe(!1)}))},children:[Object(v.jsx)("p",{className:" text-xs text-gray-500 mr-1",children:"Reset"}),Object(v.jsx)(E.o,{size:15,color:"#BF4A40"})]}),Object(v.jsx)(s.a,{className:"treeTaskStatusList",defaultExpandAll:!0,treeData:de,switcherIcon:Object(v.jsx)(N.a,{}),showIcon:!0,blockNode:!0,titleRender:function(e){return Object(v.jsxs)("div",{className:"flex items-start w-full py-3 rounded-md px-2",onClick:function(){me(!1),oe(!0),fetch("".concat("https://service-staging.mig.id","/getUserTaskTypeCounts?location=").concat(e.key),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){ce(e.data),oe(!1)}))},children:[Object(v.jsx)("div",{className:"mr-3 flex items-start",children:Object(v.jsx)(E.K,{id:"icon".concat(e.key),size:15,color:"#808080"})}),Object(v.jsx)("div",{className:"mr-3",children:Object(v.jsx)("p",{className:" text-gray-500 mb-0",id:"text".concat(e.key),children:e.title})})]})}})]}):null]})})]}),ie?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(b.a,{})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"flex justify-center mb-5 h-4/6",children:Object(v.jsx)(T.a,{data:{labels:se.map((function(e){return e.name})),datasets:[{data:se.map((function(e){return e.tasks_count})),backgroundColor:se.map((function(e,t){return ne[t+1%ne.length-1]})),borderColor:se.map((function(e,t){return ne[t+1%ne.length-1]})),barPercentage:1,barThickness:18,maxBarThickness:15,minBarLength:2}]},options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}}}})}),Object(v.jsx)("div",{className:"flex flex-col",children:se.map((function(e,t){return Object(v.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsx)("div",{className:" w-1 mr-2",style:{backgroundColor:"".concat(ne[t+1%ne.length-1])}}),Object(v.jsx)(D.e,{children:e.name})]}),Object(v.jsx)("div",{className:"flex",children:Object(v.jsx)(D.b,{children:e.tasks_count})})]},t)}))})]})]}),Object(v.jsxs)("div",{className:"col-span-11 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mr-3",children:[Object(v.jsx)("div",{className:"flex items-center justify-between mb-4",children:Object(v.jsx)(D.a,{children:"Semua Task"})}),Object(v.jsxs)("div",{className:" flex items-center mb-4",children:[Object(v.jsx)("div",{className:"mx-1 w-2/12",children:Object(v.jsx)(p.a,{value:Je,style:{width:"100%"},placeholder:"Judul atau ID..",allowClear:!0,onChange:function(e){""===e.target.value?Pe(""):Pe(e.target.value)}})}),Object(v.jsx)("div",{className:"mx-1 w-2/12",children:Object(v.jsx)(m.a,{value:""===tt?null:tt,placeholder:"Semua Tipe Task",style:{width:"100%"},allowClear:!0,showSearch:!0,optionFilterProp:"children",notFoundContent:st?Object(v.jsx)(b.a,{size:"small"}):null,onSearch:function(e){ct(!0),fetch("".concat("https://service-staging.mig.id","/getFilterTaskTypes?name=").concat(e),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){Fe(e.data),ct(!1)}))},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},name:"task_type_id",onChange:function(e){nt("undefined"===typeof e?"":e)},children:Ae.map((function(e,t){return Object(v.jsx)(m.a.Option,{value:e.id,children:e.name},t)}))})}),Object(v.jsx)("div",{className:" w-3/12 mx-1",children:Object(v.jsx)(j.a.RangePicker,{showTime:!0,allowEmpty:!0,className:"datepickerStatus",value:""===Xe?[null,null]:[k()(Xe),k()(Ye)],onChange:function(e,t){Ze(t[0]),$e(t[1])}})}),Object(v.jsx)("div",{className:" mx-1 w-2/12",children:Object(v.jsx)(d.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(v.jsx)(y.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){Ve("undefined"===typeof e?"":e)},treeData:Ie,treeDefaultExpandAll:!0,value:""===Ke?null:Ke})}),Object(v.jsx)("div",{className:" mx-1 w-2/12",children:Object(v.jsxs)(m.a,{style:{width:"100%"},value:""===Ue?null:Ue,placeholder:"Semua Status",allowClear:!0,name:"status",onChange:function(e){He("undefined"===typeof e?"":e)},children:[Object(v.jsx)(m.a.Option,{value:1,children:Object(v.jsxs)("div",{className:" flex items-center",children:[Object(v.jsx)("div",{className:"rounded-md h-auto px-1 mr-1 text-center py-1 bg-overdue border border-overdue"}),"Overdue"]})}),Object(v.jsx)(m.a.Option,{value:2,children:Object(v.jsxs)("div",{className:" flex items-center",children:[Object(v.jsx)("div",{className:"rounded-md h-auto px-1 mr-1 text-center py-1 bg-open border border-open"}),"Open"]})}),Object(v.jsx)(m.a.Option,{value:3,children:Object(v.jsxs)("div",{className:" flex items-center",children:[Object(v.jsx)("div",{className:"rounded-md h-auto px-1 mr-1 text-center py-1 bg-onprogress border border-onprogress"}),"On Progress"]})}),Object(v.jsx)(m.a.Option,{value:4,children:Object(v.jsxs)("div",{className:" flex items-center",children:[Object(v.jsx)("div",{className:"rounded-md h-auto px-1 mr-1 text-center py-1 bg-onhold border border-onhold"}),"On Hold"]})}),Object(v.jsx)(m.a.Option,{value:5,children:Object(v.jsxs)("div",{className:" flex items-center",children:[Object(v.jsx)("div",{className:"rounded-md h-auto px-1 mr-1 text-center py-1 bg-completed border border-completed"}),"Completed"]})}),Object(v.jsx)(m.a.Option,{value:6,children:Object(v.jsxs)("div",{className:" flex items-center",children:[Object(v.jsx)("div",{className:"rounded-md h-auto px-1 mr-1 text-center py-1 bg-closed border border-closed"}),"Closed"]})})]})}),Object(v.jsx)("div",{className:"mx-1 w-1/12",children:Object(v.jsxs)(C.a,{type:"primary",onClick:function(){Ce(!0),fetch("".concat("https://service-staging.mig.id","/getUserTasks?page=1&rows=").concat(dt,"&sort_by=").concat(Me.sort_by,"&sort_type=").concat(Me.sort_type,"&keyword=").concat(Je,"&task_type=").concat(tt,"&location=").concat(Ke,"&from=").concat(Xe,"&to=").concat(Ye,"&status=[").concat(Ue,"]"),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){ot(1),Ne(e.data),Se(e.data.data),Ce(!1)}))},children:[Object(v.jsx)("div",{className:"mr-1",children:Object(v.jsx)(E.W,{size:15,color:"#ffffff"})}),"Cari"]})})]}),Object(v.jsx)("div",{className:"flex flex-col mb-5",children:Object(v.jsx)(I.e,{dataSource:ke,setDataSource:Se,columns:rn,loading:Te,setpraloading:Ce,pageSize:dt,total:ye.total,initProps:t,setpage:ot,pagefromsearch:it,setdataraw:Ne,sortstate:Me,setsortstate:Re,searchstate:Je,tasktypefilterstate:tt,fromdatefilterstate:Xe,todatefilterstate:Ye,lokasifilterstate:Ke,statusfilterstate:Ue,prevpath:"mytask"})}),Object(v.jsx)("div",{className:"flex items-center justify-end",children:Object(v.jsx)("div",{children:Object(v.jsxs)(C.a,{type:"primary",onClick:function(){pt(!0)},children:[Object(v.jsx)("div",{className:"mr-1",children:Object(v.jsx)(E.H,{size:18,color:"#ffffff"})}),"Ambil Task Baru"]})})})]})]})})})}},"KAj/":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks/mytask",function(){return n("C88r")}])},hf16:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.responsiveMap=t.responsiveArray=t.default=void 0;var s=a(n("lSNA")),c=a(n("pVnL"));t.responsiveArray=["xxl","xl","lg","md","sm","xs"];var r={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};t.responsiveMap=r;var i=new Map,o=-1,l={},d={matchHandlers:{},dispatch:function(e){return l=e,i.forEach((function(e){return e(l)})),i.size>=1},subscribe:function(e){return i.size||this.register(),o+=1,i.set(o,e),e(l),o},unsubscribe:function(e){i.delete(e),i.size||this.unregister()},unregister:function(){var e=this;Object.keys(r).forEach((function(t){var n=r[t],a=e.matchHandlers[n];null===a||void 0===a||a.mql.removeListener(null===a||void 0===a?void 0:a.listener)})),i.clear()},register:function(){var e=this;Object.keys(r).forEach((function(t){var n=r[t],a=function(n){var a=n.matches;e.dispatch((0,c.default)((0,c.default)({},l),(0,s.default)({},t,a)))},i=window.matchMedia(n);i.addListener(a),e.matchHandlers[n]={mql:i,listener:a},a(i)}))}};t.default=d},"l+S1":function(e,t,n){"use strict";var a=n("VTBJ"),s=n("q1tI"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},r=n("6VBw"),i=function(e,t){return s.createElement(r.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};i.displayName="SearchOutlined";t.a=s.forwardRef(i)},ymym:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return x}));var a=n("q1tI"),s=n.n(a),c=n("m0r1");const r="label";function i(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function o(e,t){e.labels=t}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;const a=[];e.datasets=t.map((t=>{const s=e.datasets.find((e=>e[n]===t[n]));return s&&t.data&&!a.includes(s)?(a.push(s),Object.assign(s,t),s):{...t}}))}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;const n={labels:[],datasets:[]};return o(n,e.labels),l(n,e.datasets,t),n}function u(e,t){let{height:n=150,width:r=300,redraw:u=!1,datasetIdKey:j,type:h,data:m,options:f,plugins:b=[],fallbackContent:x,...p}=e;const O=Object(a.useRef)(null),g=Object(a.useRef)(),v=()=>{O.current&&(g.current=new c.f(O.current,{type:h,data:d(m,j),options:f,plugins:b}),i(t,g.current))},y=()=>{i(t,null),g.current&&(g.current.destroy(),g.current=null)};return Object(a.useEffect)((()=>{var e,t;!u&&g.current&&f&&(e=g.current,t=f,e.options={...t})}),[u,f]),Object(a.useEffect)((()=>{!u&&g.current&&o(g.current.config.data,m.labels)}),[u,m.labels]),Object(a.useEffect)((()=>{!u&&g.current&&m.datasets&&l(g.current.config.data,m.datasets,j)}),[u,m.datasets]),Object(a.useEffect)((()=>{g.current&&(u?(y(),setTimeout(v)):g.current.update())}),[u,f,m.labels,m.datasets]),Object(a.useEffect)((()=>(v(),()=>y())),[]),s.a.createElement("canvas",Object.assign({ref:O,role:"img",height:n,width:r},p),x)}const j=Object(a.forwardRef)(u);function h(e,t){return c.f.register(t),Object(a.forwardRef)(((t,n)=>s.a.createElement(j,Object.assign({},t,{ref:n,type:e}))))}const m=h("line",c.h),f=h("bar",c.b),b=(c.n,h("doughnut",c.g)),x=(c.m,c.d,h("pie",c.k));c.o}},[["KAj/",0,2,19,30,1,3,4,5,6,7,8,9,12,14,17,18,20,21,23,26,29,33]]]);