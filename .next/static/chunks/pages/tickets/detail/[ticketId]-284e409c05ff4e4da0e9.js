_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[134,40],{"6FTQ":function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,"a",(function(){return i}))},"8rE2":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("6FTQ");function c(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i.a)(e,t):void 0}}},GgLZ:function(e,t,n){"use strict";var i=n("q1tI"),c=n.n(i),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)};var l="Pixel",r="Percent",o={unit:r,value:.8};function d(e){return"number"===typeof e?{unit:r,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:l,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:r,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),o):(console.warn("scrollThreshold should be string or number"),o)}var j=function(e){function t(t){var n=e.call(this,t)||this;return n.lastScrollTop=0,n.actionTriggered=!1,n.startY=0,n.currentY=0,n.dragging=!1,n.maxPullDownDistance=0,n.getScrollableTarget=function(){return n.props.scrollableTarget instanceof HTMLElement?n.props.scrollableTarget:"string"===typeof n.props.scrollableTarget?document.getElementById(n.props.scrollableTarget):(null===n.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},n.onStart=function(e){n.lastScrollTop||(n.dragging=!0,e instanceof MouseEvent?n.startY=e.pageY:e instanceof TouchEvent&&(n.startY=e.touches[0].pageY),n.currentY=n.startY,n._infScroll&&(n._infScroll.style.willChange="transform",n._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},n.onMove=function(e){n.dragging&&(e instanceof MouseEvent?n.currentY=e.pageY:e instanceof TouchEvent&&(n.currentY=e.touches[0].pageY),n.currentY<n.startY||(n.currentY-n.startY>=Number(n.props.pullDownToRefreshThreshold)&&n.setState({pullToRefreshThresholdBreached:!0}),n.currentY-n.startY>1.5*n.maxPullDownDistance||n._infScroll&&(n._infScroll.style.overflow="visible",n._infScroll.style.transform="translate3d(0px, "+(n.currentY-n.startY)+"px, 0px)")))},n.onEnd=function(){n.startY=0,n.currentY=0,n.dragging=!1,n.state.pullToRefreshThresholdBreached&&(n.props.refreshFunction&&n.props.refreshFunction(),n.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame((function(){n._infScroll&&(n._infScroll.style.overflow="auto",n._infScroll.style.transform="none",n._infScroll.style.willChange="unset")}))},n.onScrollListener=function(e){"function"===typeof n.props.onScroll&&setTimeout((function(){return n.props.onScroll&&n.props.onScroll(e)}),0);var t=n.props.height||n._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;n.actionTriggered||((n.props.inverse?n.isElementAtTop(t,n.props.scrollThreshold):n.isElementAtBottom(t,n.props.scrollThreshold))&&n.props.hasMore&&(n.actionTriggered=!0,n.setState({showLoader:!0}),n.props.next&&n.props.next()),n.lastScrollTop=t.scrollTop)},n.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},n.throttledOnScrollListener=function(e,t,n,i){var c,s=!1,a=0;function l(){c&&clearTimeout(c)}function r(){var r=this,o=Date.now()-a,d=arguments;function j(){a=Date.now(),n.apply(r,d)}function u(){c=void 0}s||(i&&!c&&j(),l(),void 0===i&&o>e?j():!0!==t&&(c=setTimeout(i?u:j,void 0===i?e-o:e)))}return"boolean"!==typeof t&&(i=n,n=t,t=void 0),r.cancel=function(){l(),s=!0},r}(150,n.onScrollListener).bind(n),n.onStart=n.onStart.bind(n),n.onMove=n.onMove.bind(n),n.onEnd=n.onEnd.bind(n),n}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?a(a({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,i=d(t);return i.unit===l?e.scrollTop<=i.value+n-e.scrollHeight+1:e.scrollTop<=i.value/100+n-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,i=d(t);return i.unit===l?e.scrollTop+n>=e.scrollHeight-i.value:e.scrollTop+n>=i.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=a({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),n=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),i=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return c.a.createElement("div",{style:i,className:"infinite-scroll-component__outerdiv"},c.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&c.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},c.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!n&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(i.Component);t.a=j},PbJr:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets/detail/[ticketId]",function(){return n("hBRl")}])},Zs9b:function(e,t,n){"use strict";var i=n("rmht"),c=n.n(i),s=n("wXtC"),a=n.n(s),l=n("iJl9"),r=n.n(l),o=n("FAat"),d=n.n(o),j=n("nKUr"),u=n("MM9K"),b=n.n(u),h=n("rR1Q"),m=n.n(h),f=n("vJKn"),x=n.n(f),p=n("cpVT"),O=n("z7pX"),v=n("rg98"),g=n("MX0m"),y=n.n(g),k=n("l+S1"),_=n("ye1Q"),N=n("wd/R"),w=n.n(N),S=n("q1tI"),T=n("ZXdF"),C=n("ckOl"),E=(n("44PY"),n("8TZf")),P=n("cFzE");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=(e.onClose,e.buttonOkText),l=(e.disabled,e.initProps),o=(e.refreshtickets,e.setrefreshtickets),u=e.dataprofile,h=Object(S.useState)({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),f=h[0],p=h[1],g=Object(S.useState)(!1),N=g[0],A=g[1],L=Object(S.useState)([]),z=L[0],I=L[1],F=Object(S.useState)([]),M=F[0],B=F[1],J=Object(S.useState)([]),R=J[0],G=J[1],Y=Object(S.useState)(!1),U=(Y[0],Y[1],Object(S.useState)(!1)),K=U[0],q=U[1],H=Object(S.useState)(!1),V=H[0],X=H[1],$=Object(S.useState)(!1),Z=$[0],Q=$[1],W=Object(S.useState)(!0),ee=W[0],te=W[1],ne=Object(S.useState)(-1),ie=ne[0],ce=ne[1],se=function(){var e=Object(v.a)(x.a.mark((function e(t){var n,i,c,s,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),n=t.target.files,(i=new FormData).append("file",n[0]),i.append("upload_preset","migsys"),e.next=7,fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:i});case 7:return c=e.sent,e.next=10,c.json();case 10:s=e.sent,(a=Object(O.a)(f.files)).push(s.secure_url),p(D(D({},f),{},{files:a})),Q(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/").concat(1===u.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(l)}}).then((function(e){return e.json()})).then((function(e){I(e.data.ticket_types),B(e.data.ticket_task_types),G([1===u.data.role?e.data.companies:e.data.companies.data])}))}),[]),Object(S.useEffect)((function(){null!==f.type_id&&""!==f.name&&null!==f.ticket_task_type_id&&""!==f.product_id&&null!==f.incident_time&&null!==f.location_id?te(!1):te(!0)}),[ie]),Object(j.jsx)(P.a,{title:t,visible:n,onClose:function(){p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),i(!1)},buttonOkText:s,onClick:function(){!1===/(^\d+$)/.test(f.pic_contact)||!1===/(^\d+$)/.test(f.product_id)?""===f.pic_contact?(A(!0),te(!0),fetch("".concat("https://service-staging.mig.id","/addTicket"),{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),A(!1),te(!1),e.success?(p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),i(!1),m.a.success({message:e.message,duration:3})):m.a.error({message:e.message,duration:3})}))):(!1===new RegExp(/(^\d+$)/).test(f.pic_contact)?q(!0):q(!1),!1===new RegExp(/(^\d+$)/).test(f.product_id)?X(!0):X(!1),te(!0)):(A(!0),te(!0),fetch("".concat("https://service-staging.mig.id","/addTicket"),{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),A(!1),te(!1),e.success?(p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),i(!1),m.a.success({message:e.message,duration:3})):m.a.error({message:e.message,duration:3})})))},disabled:ee,children:N?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(b.a,{})}):Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("div",{className:"mb-6",children:Object(j.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-3689135148 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Tipe Tiket"}),Object(j.jsx)("span",{className:"jsx-3689135148 tickettypes"}),Object(j.jsx)(y.a,{id:"3689135148",children:[".tickettypes.jsx-3689135148::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){p(D(D({},f),{},{type_id:e})),ce((function(e){return e+1}))},value:f.type_id,children:z.map((function(e,t){return Object(j.jsx)(d.a.Option,{value:e.id,children:e.name})}))})})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-2641960267 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Jenis Aset"}),Object(j.jsx)("span",{className:"jsx-2641960267 tickettask"}),Object(j.jsx)(y.a,{id:"2641960267",children:[".tickettask.jsx-2641960267::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){p(D(D({},f),{},{ticket_task_type_id:e})),ce((function(e){return e+1}))},value:f.ticket_task_type_id,children:M.map((function(e,t){return Object(j.jsxs)(d.a.Option,{value:e.id,children:[e.name," - ",e.task_type_name]})}))})})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsxs)("div",{className:"jsx-4263238570 flex mb-2",children:[Object(j.jsx)(E.c,{children:"ID Produk"}),Object(j.jsx)("span",{className:"jsx-4263238570 idproduk"}),Object(j.jsx)(y.a,{id:"4263238570",children:[".idproduk.jsx-4263238570::before{content:'*';color:red;}"]})]}),Object(j.jsx)(r.a,{value:f.product_id,onChange:function(e){p(D(D({},f),{},{product_id:e.target.value})),ce((function(e){return e+1}))}}),V&&Object(j.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"ID Produk harus angka"})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-2493184868 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Waktu Kejadian"}),Object(j.jsx)("span",{className:"jsx-2493184868 timeincident"}),Object(j.jsx)(y.a,{id:"2493184868",children:[".timeincident.jsx-2493184868::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(a.a,{style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",value:null===f.incident_time?null:w()(f.incident_time),onChange:function(e,t){p(D(D({},f),{},{incident_time:""===t?null:t})),ce((function(e){return e+1}))}})})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-1976207010 flex mb-2",children:[Object(j.jsx)(E.c,{children:"Lokasi Kejadian"}),Object(j.jsx)("span",{className:"jsx-1976207010 locincident"}),Object(j.jsx)(y.a,{id:"1976207010",children:[".locincident.jsx-1976207010::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(c.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(j.jsx)(k.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){p(D(D({},f),{},"undefined"===typeof e?{location_id:null}:{location_id:e})),ce((function(e){return e+1}))},treeData:R,treeDefaultExpandAll:!0,value:f.location_id})})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"PIC"})}),Object(j.jsx)(r.a,{value:f.pic_name,onChange:function(e){p(D(D({},f),{},{pic_name:e.target.value}))}})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"Kontak PIC"})}),Object(j.jsx)(r.a,{value:f.pic_contact,onChange:function(e){p(D(D({},f),{},{pic_contact:e.target.value})),ce((function(e){return e+1}))}}),K&&Object(j.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"Kontak PIC harus angka"})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"Deskripsi Masalah"})}),Object(j.jsx)(r.a.TextArea,{rows:5,value:f.description,onChange:function(e){p(D(D({},f),{},{description:e.target.value}))}})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(E.c,{children:"Bukti Kejadian"})}),Object(j.jsxs)("div",{className:" flex justify-between items-center mb-2",children:[Object(j.jsx)("div",{children:Object(j.jsx)(E.c,{children:"Unggah JPG/MP4 (Maks. 5 MB)"})}),Object(j.jsx)("div",{children:Object(j.jsxs)(T.a,{type:"primaryInput",onChangeGambar:se,children:[Z?Object(j.jsx)(_.a,{style:{marginRight:"0.5rem"}}):Object(j.jsx)("div",{className:"mr-1",children:Object(j.jsx)(C.r,{size:15,color:"#ffffff"})}),"Unggah File"]})})]}),Object(j.jsx)("div",{className:"grid grid-cols-3",children:f.files.map((function(e,t){return Object(j.jsxs)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2",children:[Object(j.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""}),Object(j.jsx)("div",{className:" cursor-pointer",onClick:function(){var e=Object(O.a)(f.files);e.splice(t,1),p((function(t){return D(D({},t),{},{files:e})}))},children:Object(j.jsx)(C.hb,{size:15,color:"#BF4A40"})})]})}))})]})]})})}},cBho:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.detectFlexGapSupported=t.canUseDocElement=void 0,Object.defineProperty(t,"isStyleSupport",{enumerable:!0,get:function(){return a.isStyleSupport}});var c,s=i(n("3Mug")),a=n("UMre"),l=function(){return(0,s.default)()&&window.document.documentElement};t.canUseDocElement=l;t.detectFlexGapSupported=function(){if(!l())return!1;if(void 0!==c)return c;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),c=1===e.scrollHeight,document.body.removeChild(e),c}},cpVT:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return i}))},gYAt:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return x})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return O})),n.d(t,"f",(function(){return v})),n.d(t,"d",(function(){return g})),n.d(t,"n",(function(){return f})),n.d(t,"j",(function(){return y})),n.d(t,"h",(function(){return k})),n.d(t,"i",(function(){return _})),n.d(t,"o",(function(){return N})),n.d(t,"k",(function(){return w})),n.d(t,"l",(function(){return S})),n.d(t,"a",(function(){return T})),n.d(t,"m",(function(){return C}));var i=n("MM9K"),c=n.n(i),s=n("cpVT"),a=n("nKUr"),l=n("q1tI"),r=n("ZXdF"),o=n("ckOl"),d=n("44PY"),j=n("8TZf"),u=n("ir/0");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.title,n=e.visible,i=e.onOk,c=e.onCancel,s=e.footer,l=e.loading,r=e.level;e.children;return Object(a.jsxs)(u.a,{title:t,visible:n,onOk:i,onCancel:c,footer:s,loading:l,children:["Apakah anda yakin ingin mengubah"," ",2===r?"Sub Lokasi":"Profil Perusahaan"," ini?`"]})}function f(e){var t=e.title,n=e.visible,i=e.onOk,c=e.onCancel,s=e.footer,l=e.loading,r=e.checked;e.children;return Object(a.jsxs)(u.a,{title:t,visible:n,onOk:i,onCancel:c,footer:s,loading:l,children:["Apakah anda yakin ingin merubah status perusahaan ini menjadi"," ",r?"Aktif":"Non-Aktif","?`"]})}function x(e){var t=e.title,n=e.visible,i=e.onOk,c=e.onCancel,s=e.footer,l=e.loading,r=e.namabank;e.children;return Object(a.jsxs)(u.a,{title:t,visible:n,onOk:i,onCancel:c,footer:s,loading:l,children:["Apakah Anda yakin ingin melanjutkan penghapusan Bank"," ",Object(a.jsx)("strong",{children:r}),"?"]})}function p(e){var t=e.title,n=e.visible,i=e.onOk,c=e.onCancel,s=e.footer,l=e.loading,r=e.rawdata;e.children;return Object(a.jsx)(u.a,{title:t,visible:n,onOk:i,onCancel:c,footer:s,loading:l,width:650,closeIcon:Object(a.jsx)(o.b,{size:20,color:"#BF4A40"}),children:Object(a.jsxs)("div",{className:"flex flex-col",children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsxs)("ul",{children:[1===r.level&&0===r.induk_level_1_count&&0===r.induk_level_2_count&&0===r.induk_level_3_count&&0===r.sub_location_level_1_count&&0===r.sub_location_level_2_count?"":Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsxs)(j.e,{children:[1===r.level?"Lokasi":"Sublokasi"," ",Object(a.jsx)("strong",{children:r.name})," memiliki:"]})}),1===r.level?Object(a.jsxs)(a.Fragment,{children:[r.induk_level_1_count>0&&Object(a.jsx)("li",{children:Object(a.jsxs)("strong",{children:["- ",r.induk_level_1_count," Lokasi Level 1"]})}),r.induk_level_2_count>0&&Object(a.jsx)("li",{children:Object(a.jsxs)("strong",{children:["- ",r.induk_level_2_count," Lokasi Level 2"]})}),r.induk_level_3_count>0&&Object(a.jsx)("li",{children:Object(a.jsxs)("strong",{children:["- ",r.induk_level_3_count," Lokasi Level 3"]})}),Object(a.jsx)("li",{children:Object(a.jsx)("strong",{children:0!==r.sub_location_level_1_count&&"- ".concat(r.sub_location_level_1_count," Sublokasi Level 1")})}),Object(a.jsx)("li",{children:Object(a.jsx)("strong",{children:0!==r.sub_location_level_2_count&&"- ".concat(r.sub_location_level_2_count," Sublokasi Level 2")})})]}):Object(a.jsx)(a.Fragment,{children:0!==r.sub_location_level_1_count?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)("strong",{children:0!==r.sub_location_level_1_count&&"- ".concat(r.sub_location_level_1_count," Sublokasi Level 1")})}),Object(a.jsx)("li",{children:Object(a.jsx)("strong",{children:0!==r.sub_location_level_2_count&&"- ".concat(r.sub_location_level_2_count," Sublokasi Level 2")})})]}):Object(a.jsx)("strong",{children:"-"})})]})}),Object(a.jsx)("div",{className:"mb-3",children:1===r.level?0===r.induk_level_1_count&&0===r.induk_level_2_count&&0===r.induk_level_3_count&&0===r.sub_location_level_1_count&&0===r.sub_location_level_2_count?Object(a.jsxs)(j.e,{children:["Tidak ada sublokasi yang terhubung dengan lokasi induk"," ",Object(a.jsx)("strong",{children:r.name}),". Anda dapat menghapus lokasi ini. Apakah Anda yakin ingin melanjutkan penghapusan?"]}):Object(a.jsxs)(j.e,{children:["Kami sarankan Anda untuk memindahkan inventori tersebut ke"," ",1===r.level?"Lokasi":"Sublokasi"," induk lain terlebih dahulu."," ",1===r.level&&Object(a.jsxs)(a.Fragment,{children:["Namun, Anda dapat memilih untuk ikut"," ",Object(a.jsx)("strong",{children:"menghapus semua lokasi"})," tersebut."]})]}):Object(a.jsxs)(j.e,{children:["Kami sarankan Anda untuk memindahkan inventori"," ",1===r.level?"tersebut":Object(a.jsxs)(a.Fragment,{children:["pada ",Object(a.jsx)("strong",{children:r.name})]})," ","ke ",1===r.level?"Lokasi":"Sublokasi"," induk lain terlebih dahulu."," ",1===r.level&&Object(a.jsxs)(a.Fragment,{children:["Namun, Anda dapat memilih untuk ikut"," ",Object(a.jsx)("strong",{children:"menghapus semua lokasi"})," tersebut."]})]})})]})})}function O(e){var t=e.initProps,n=e.title,i=e.visible,c=e.footer,s=e.rawdata,r=e.deletedata,o=e.setdeletedata,b=e.rawlocations,m=(e.children,Object(l.useState)([])),f=m[0],x=m[1];return Object(l.useEffect)((function(){-1!==s.level&&fetch("".concat("https://service-staging.mig.id","/getSubLocations?").concat(null===s.top_parent_id?"":"company_id=".concat(s.top_parent_id)),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){x([e.data])}))}),[]),Object(a.jsx)(u.a,{title:n,visible:i,footer:c,width:650,closeIcon:null,maskClosable:!1,children:Object(a.jsxs)("div",{className:"flex flex-col",children:[1===s.level&&Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsxs)(j.e,{children:["Masih terdapat inventori di ",s.name,". Silahkan pindahkan inventori terlebih dahulu."]})}),Object(a.jsx)(d.h,{value:r.new_parent,allowClear:!0,name:"new_parent",onChangeTreeselect:function(e,t,n){o(h(h({},r),{},"undefined"===typeof e?{new_parent:null}:{new_parent:e}))},label:"Pindahkan Ke",treeData:1===s.level?b:f})]})})}function v(e){var t=e.title,n=e.visible,i=e.footer,c=e.rawdata;e.deletedata,e.children;return Object(a.jsx)(u.a,{title:t,visible:n,footer:i,width:650,closeIcon:null,maskClosable:!1,children:Object(a.jsx)("div",{className:"flex flex-col",children:Object(a.jsxs)(j.e,{children:["Jika masih terdapat inventori di sublokasi yang akan dihapus, Inventori akan otomatis dipindahkan ke Lokasi induk"," ",Object(a.jsx)("strong",{children:c.name}),". Anda"," ",Object(a.jsx)("strong",{children:"tidak dapat mengembalikan"})," sublokasi setelah penghapusan. Apakah Anda yakin ingin melanjutkan penghapusan?"]})})})}function g(e){var t=e.title,n=e.visible,i=e.footer,c=e.invexistdata;e.children;return Object(a.jsx)(u.a,{title:t,visible:n,footer:i,width:650,closeIcon:Object(a.jsx)(o.b,{size:20,color:"#BF4A40"}),maskClosable:!1,children:Object(a.jsxs)("div",{className:"flex flex-col",children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(j.e,{children:"Masih terdapat inventori yang terhubung ke lokasi :"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("ul",{children:c.map((function(e,t){return Object(a.jsx)("li",{children:Object(a.jsxs)("strong",{children:[t+1,". ",e.full_name]})},t)}))})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(j.e,{children:"Silahkan pindahkan atau hapus inventori terlebih dahulu."})})]})})}var y=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=e.onCancel,d=e.loading,j=e.datadelete;e.children;return Object(a.jsxs)(u.a,{title:t,visible:n,onCancel:l,footer:Object(a.jsx)(c.a,{spinning:d,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",color:"danger",onClick:function(){i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",color:"danger",onClick:s,children:[Object(a.jsx)(o.hb,{size:15,color:"#ffffff"}),"Hapus"]})]})}),loading:d,children:["Apakah Anda yakin ingin melanjutkan penghapusan Tipe Task"," ",Object(a.jsx)("strong",{children:j.name}),"?"]})},k=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=e.onCancel,d=e.loading,j=e.datadelete;e.children;return Object(a.jsxs)(u.a,{title:t,visible:n,onCancel:l,closeIcon:Object(a.jsx)(o.b,{size:20,color:"#BF4A40"}),footer:Object(a.jsx)(c.a,{spinning:d,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",color:"danger",onClick:function(){i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",color:"danger",onClick:s,children:[Object(a.jsx)(o.hb,{size:15,color:"#ffffff"}),"Ya, Saya yakin dan hapus task"]})]})}),loading:d,children:["Apakah Anda yakin ingin melanjutkan penghapusan Task"," ",Object(a.jsx)("strong",{children:j.name}),"?"]})},_=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=e.onCancel,d=e.loading,j=e.datadelete;e.children;return Object(a.jsxs)(u.a,{title:t,visible:n,onCancel:l,closeIcon:Object(a.jsx)(o.b,{size:20,color:"#DDB44A"}),footer:Object(a.jsx)(c.a,{spinning:d,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",color:"danger",onClick:function(){i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",color:"danger",onClick:s,children:[Object(a.jsx)(o.hb,{size:15,color:"#ffffff"}),"Hapus Task Detail"]})]})}),loading:d,children:["Apakah Anda yakin ingin melanjutkan penghapusan Detail Task"," ",Object(a.jsx)("strong",{children:j.name}),"?"]})},N=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=e.onCancel,j=e.loading,b=e.datastatustoggle,m=e.setdatastatustoggle,f=e.displaytask;e.children;return Object(a.jsx)(u.a,{title:t,visible:n,onCancel:l,closeIcon:Object(a.jsx)(o.b,{size:20,color:"#DDB44A"}),footer:Object(a.jsx)(c.a,{spinning:j,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",onClick:function(){i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",onClick:s,children:[Object(a.jsx)(o.hb,{size:15,color:"#ffffff"}),"Ubah"]})]})}),loading:j,children:4!==f.status?Object(a.jsx)(d.g,{label:"Silahkan cantumkan keterangan",onChangeInput:function(e){m(h(h({},b),{},{notes:e.target.value}))}}):Object(a.jsxs)(a.Fragment,{children:["Apakah Anda yakin ingin melanjutkan Task"," ",Object(a.jsx)("strong",{children:f.name}),"?"]})})},w=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=e.onCancel,d=e.loading,j=e.datadelete;e.children;return Object(a.jsxs)(u.a,{title:t,visible:n,onCancel:l,footer:Object(a.jsx)(c.a,{spinning:d,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",color:"danger",onClick:function(){i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",color:"danger",onClick:s,children:[Object(a.jsx)(o.hb,{size:15,color:"#ffffff"}),"Hapus"]})]})}),loading:d,children:["Apakah Anda yakin ingin melanjutkan penghapusan Pengaturan"," ",Object(a.jsx)("strong",{children:j.name}),"?"]})},S=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=(e.onCancel,e.loading),j=e.datanoteticket,b=e.setdatanoteticket,m=e.ticketid;e.children;return Object(a.jsx)(u.a,{title:t,visible:n,onCancel:function(){b({id:Number(m),notes:""}),i(!1)},footer:Object(a.jsx)(c.a,{spinning:l,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",onClick:function(){b({id:Number(m),notes:""}),i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",onClick:s,children:[Object(a.jsx)(o.m,{size:15,color:"#ffffff"}),"Simpan Catatan"]})]})}),loading:l,children:Object(a.jsx)(d.f,{value:j.notes,label:"Catatan",onChangeInput:function(e){b(h(h({},j),{},{notes:e.target.value}))}})})},T=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=(e.onCancel,e.loading),d=e.data,b=e.setdata,h=e.ticketid;e.children;return Object(a.jsx)(u.a,{title:t,visible:n,onCancel:function(){b({id:Number(h),notes:"",name:""}),i(!1)},footer:Object(a.jsx)(c.a,{spinning:l,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",onClick:function(){b({id:Number(h),notes:"",name:""}),i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",color:"danger",onClick:s,children:[Object(a.jsx)(o.mb,{size:15,color:"#ffffff"}),"Ya, saya yakin dan batalkan tiket"]})]})}),loading:l,children:Object(a.jsx)("div",{className:" flex",children:Object(a.jsxs)(j.e,{children:["Apakah Anda yakin ingin membatalkan tiket ",Object(a.jsx)("strong",{children:d.name}),"? Anda tidak dapat mengembalikan tiket yang sudah terhapus"]})})})},C=function(e){var t=e.title,n=e.visible,i=e.onvisible,s=e.onOk,l=(e.onCancel,e.loading),d=e.data,b=e.setdata,m=e.ticketid;e.children;return Object(a.jsx)(u.a,{title:t,visible:n,onCancel:function(){i(!1)},footer:Object(a.jsx)(c.a,{spinning:l,children:Object(a.jsxs)("div",{className:"flex justify-between items-center",children:[Object(a.jsx)(r.a,{type:"default",onClick:function(){b(h(h({},d),{},{id:Number(m),inventory_id:""})),i(!1)},children:"Batalkan"}),Object(a.jsxs)(r.a,{type:"primary",color:"danger",onClick:s,children:[Object(a.jsx)(o.mb,{size:15,color:"#ffffff"}),"Ya, pisahkan Aset dengan Tiket"]})]})}),loading:l,children:Object(a.jsx)("div",{className:" flex",children:Object(a.jsxs)(j.e,{children:["Apakah Anda yakin ingin memisahkan Aset ",Object(a.jsx)("strong",{children:d.name})," ","dengan Tiket?"]})})})}},hBRl:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return ie}));var i=n("nKUr"),c=n("kEgK"),s=n.n(c),a=n("MM9K"),l=n.n(a),r=n("cpVT"),o=n("rR1Q"),d=n.n(o),j=n("wd/R"),u=n.n(j),b=n("20a2"),h=n("q1tI"),m=(n("GgLZ"),n("ZXdF")),f=n("iJl9"),x=n.n(f),p=n("l+S1"),O=n("ckOl"),v=n("8TZf"),g=n("cFzE");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.title,n=e.visible,c=e.onvisible,s=(e.onClose,e.buttonOkText),a=(e.disabled,e.initProps),r=(e.refresh,e.setrefresh),o=e.setrefreshclosed,j=e.datapayload,u=e.setdatapayload,b=(e.ticketid,Object(h.useState)([])),m=b[0],f=b[1],y=Object(h.useState)(!1),_=y[0],N=y[1],w=Object(h.useState)([]),S=w[0],T=w[1],C=Object(h.useState)(!1),E=C[0],P=C[1],A=Object(h.useState)(!1),D=A[0],L=A[1],z=Object(h.useState)(!0),I=z[0],F=z[1],M=Object(h.useState)(-1),B=M[0],J=M[1];return Object(h.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getAssignToList?assignable_type=0"),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){T(e.data)}))}),[]),Object(h.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getAssignToList?assignable_type=1"),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){f(e.data)}))}),[]),Object(h.useEffect)((function(){null!==j.assignable_id?F(!1):F(!0)}),[B]),Object(i.jsx)(g.a,{title:t,visible:n,onClose:function(){o((function(e){return e+1})),c(!1)},buttonOkText:s,onClick:function(){L(!0),F(!0),fetch("".concat("https://service-staging.mig.id","/assignTicket"),{method:"PUT",headers:{Authorization:JSON.parse(a),"Content-Type":"application/json"},body:JSON.stringify(j)}).then((function(e){return e.json()})).then((function(e){L(!1),F(!1),e.success?(r((function(e){return e+1})),c(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))},disabled:I,children:D?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):Object(i.jsxs)("div",{className:" flex flex-col px-3",children:[Object(i.jsxs)("div",{className:" my-5 flex items-center",children:[Object(i.jsx)("div",{id:"ind",className:"mr-4 text-primary100 bg-white hover:bg-primary100 hover:border-primary100 border-2 hover:text-white border-primary100 ".concat(!1===j.assignable_type&&"border-opacity-20"," px-6 btn btn-sm"),onClick:function(){u(k(k({},j),{},{assignable_type:!0}))},children:"Individu"}),Object(i.jsx)("div",{id:"grup",className:"mr-4 text-primary100 bg-white hover:bg-primary100 hover:border-primary100 border-2 hover:text-white border-primary100 ".concat(!0===j.assignable_type&&"border-opacity-20"," px-6 btn btn-sm"),onClick:function(){u(k(k({},j),{},{assignable_type:!1}))},children:"Grup"})]}),Object(i.jsx)("div",{className:"my-5",children:Object(i.jsx)(x.a,{suffix:Object(i.jsx)(p.a,{}),allowClear:!0,placeholder:"Nama Staff, Group..",onChange:function(e){!0===j.assignable_type?(N(!0),fetch("".concat("https://service-staging.mig.id","/getAssignToList?assignable_type=1&name=").concat(e.target.value),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){f(e.data),N(!1)}))):(P(!0),fetch("".concat("https://service-staging.mig.id","/getAssignToList?assignable_type=0&name=").concat(e.target.value),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){T(e.data),P(!1)})))}})}),Object(i.jsxs)("div",{className:"my-5 flex flex-col max-h-screen overflow-y-scroll",children:[_?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):!0===j.assignable_type&&m.map((function(e,t){return Object(i.jsxs)("div",{className:"".concat(j.assignable_id===e.id&&"bg-primary10"," mb-4 flex items-center cursor-pointer"),onClick:function(){u(k(k({},j),{},{assignable_id:e.id})),J((function(e){return e+1}))},children:[Object(i.jsx)("div",{className:" w-10 h-10 rounded-full mr-3",children:Object(i.jsx)("img",{src:""===e.profile_image||"-"===e.profile_image?"/image/staffTask.png":"".concat(e.profile_image),className:" object-contain w-10 h-10",alt:""})}),Object(i.jsxs)("div",{className:" flex flex-col justify-center",children:[Object(i.jsx)("div",{className:"mb-1 flex",children:Object(i.jsx)("div",{className:"mr-1",children:Object(i.jsx)(v.b,{children:e.name})})}),Object(i.jsx)("div",{children:Object(i.jsx)(v.c,{children:e.position})})]})]})})),E?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):!1===j.assignable_type&&S.map((function(e,t){return Object(i.jsxs)("div",{className:"".concat(j.assignable_id===e.id&&"bg-primary10"," mb-4 flex items-center cursor-pointer"),onClick:function(){u(k(k({},j),{},{assignable_id:e.id})),J((function(e){return e+1}))},children:[Object(i.jsx)("div",{className:" w-10 h-10 rounded-full mr-3",children:Object(i.jsx)(O.ib,{})}),Object(i.jsx)("div",{className:" flex flex-col justify-center",children:Object(i.jsx)("div",{className:"mb-1 flex",children:Object(i.jsx)("div",{className:"mr-1",children:Object(i.jsx)(v.b,{children:e.name})})})})]})}))]})]})})},N=n("FAat"),w=n.n(N),S=n("rmht"),T=n.n(S),C=n("MX0m"),E=n.n(C);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){for(var t=0;t<e.length;t++)e[t].key=e[t].id,e[t].value=e[t].id,e[t].children&&D(e[t].children);return e}var L=function(e){var t=e.title,n=e.visible,c=e.onvisible,s=(e.onClose,e.buttonOkText),a=(e.disabled,e.initProps),r=(e.refresh,e.setrefresh),o=e.setrefreshclosed,j=e.datapayload,u=e.setdatapayload,b=e.selectedassettype,m=e.setselectedassettype,f=e.ticketid,x=Object(h.useState)(!1),O=x[0],y=x[1],k=Object(h.useState)(!1),_=k[0],N=k[1],S=Object(h.useState)([]),C=S[0],P=S[1],L=Object(h.useState)([]),z=L[0],I=L[1],F=Object(h.useState)(!1),M=F[0],B=F[1],J=Object(h.useState)(!0),R=J[0],G=J[1],Y=Object(h.useState)(-1),U=Y[0],K=Y[1];return Object(h.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getAssets"),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){var t=D(e.data);P(t)}))}),[]),Object(h.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getFilterInventories"),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){I(e.data)}))}),[]),Object(h.useEffect)((function(){null!==j.inventory_id?G(!1):G(!0)}),[U]),Object(i.jsx)(g.a,{title:t,visible:n,onClose:function(){o((function(e){return e+1})),u({id:Number(f),inventory_id:null}),c(!1)},buttonOkText:s,onClick:function(){y(!0),G(!0),fetch("".concat("https://service-staging.mig.id","/setItemTicket"),{method:"PUT",headers:{Authorization:JSON.parse(a),"Content-Type":"application/json"},body:JSON.stringify(j)}).then((function(e){return e.json()})).then((function(e){y(!1),G(!1),e.success?(r((function(e){return e+1})),c(!1),u({id:Number(f),inventory_id:null}),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))},disabled:R,children:O?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):Object(i.jsxs)("div",{className:"flex flex-col",children:[Object(i.jsx)("div",{className:"mb-6",children:Object(i.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsxs)("div",{className:"jsx-2185086480 flex mb-2",children:[Object(i.jsx)(v.c,{children:"Tipe Aset"}),Object(i.jsx)("span",{className:"jsx-2185086480 assettypes"}),Object(i.jsx)(E.a,{id:"2185086480",children:[".assettypes.jsx-2185086480::before{content:'*';color:red;}"]})]}),Object(i.jsx)("div",{className:" mb-2 flex",children:Object(i.jsx)(T.a,{style:{width:"100%"},showArrow:!0,name:"asset_type",onChange:function(e,t,n){m(n.allCheckedNodes[0].node.props.id),N(!0),fetch("".concat("https://service-staging.mig.id","/getFilterInventories?asset_id=").concat(n.allCheckedNodes[0].node.props.id),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){console.log(e),I(e.data),N(!1)}))},treeData:C,treeDefaultExpandAll:!0,value:b})})]}),Object(i.jsx)("div",{className:"flex flex-col mb-6",children:Object(i.jsx)("div",{className:" mb-2 flex",children:Object(i.jsx)(w.a,{style:{width:"100%"},placeholder:"Nama aset...",suffixIcon:Object(i.jsx)(p.a,{}),showArrow:!0,onChange:function(e,t){u(A(A({},j),{},{inventory_id:e})),K((function(e){return e+1}))},loading:_,showSearch:!0,optionFilterProp:"children",notFoundContent:M?Object(i.jsx)(l.a,{size:"small"}):null,onSearch:function(e){B(!0),fetch("".concat("https://service-staging.mig.id","/getFilterInventories?asset_id=").concat(b,"&keyword=").concat(e),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){I(e.data),B(!1)}))},value:j.inventory_id,children:z.map((function(e,t){return Object(i.jsxs)(w.a.Option,{value:e.id,children:[e.mig_id," - ",e.model_name," - ",e.asset_name]},t)}))})})})]})})},z=(n("Zs9b"),n("wXtC")),I=n.n(z),F=n("qPIi"),M=n.n(F);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){var t=e.title,n=e.visible,c=e.onvisible,s=(e.onClose,e.buttonOkText),a=(e.disabled,e.initProps),r=(e.refresh,e.setrefresh),o=e.setrefreshclosed,j=e.datapayload,b=e.setdatapayload,m=e.showdatetime,f=e.setshowdatetime,x=e.datevalue,p=e.setdatevalue,O=e.ticketid,v=Object(h.useState)(!1),y=v[0],k=v[1],_=Object(h.useState)(!0),N=_[0],w=_[1],S=Object(h.useState)(-1),T=S[0],C=S[1];return Object(h.useEffect)((function(){null!==j.assignable_id?w(!1):w(!0)}),[T]),Object(i.jsx)(g.a,{title:t,visible:n,onClose:function(){o((function(e){return e+1})),b({id:Number(O),deadline:null}),c(!1)},buttonOkText:s,onClick:function(){k(!0),w(!0),fetch("".concat("https://service-staging.mig.id","/setDeadline"),{method:"PUT",headers:{Authorization:JSON.parse(a),"Content-Type":"application/json"},body:JSON.stringify(j)}).then((function(e){return e.json()})).then((function(e){k(!1),w(!1),e.success?(b({id:Number(O),deadline:null}),r((function(e){return e+1})),c(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))},disabled:N,children:y?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):Object(i.jsxs)("div",{className:"flex flex-col px-3 h-full justify-between",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"mb-2",children:Object(i.jsx)(M.a.Group,{onChange:function(e){var t="";3===e.target.value?(t=u()(j.created_at).add(3,"h").locale("id").format(),p(3),f(!1)):12===e.target.value?(t=u()(j.created_at).add(30,"h").locale("id").format(),p(12),f(!1)):30===e.target.value?(t=u()(j.created_at).add(1,"h").locale("id").format(),p(30),f(!1)):72===e.target.value?(t=u()(j.created_at).add(3,"d").locale("id").format(),p(72),f(!1)):-10===e.target.value&&(p(-10),f(!0)),b(J(J({},j),{},{deadline:-10===e.target.value?null:t})),C((function(e){return e+1}))},value:x,children:Object(i.jsxs)("div",{className:"flex flex-col",children:[Object(i.jsx)("div",{className:"mb-3",children:Object(i.jsx)(M.a,{value:3,children:"3 Jam"})}),Object(i.jsx)("div",{className:"mb-3",children:Object(i.jsx)(M.a,{value:12,children:"12 Jam"})}),Object(i.jsx)("div",{className:"mb-3",children:Object(i.jsx)(M.a,{value:30,children:"30 Jam"})}),Object(i.jsx)("div",{className:"mb-3",children:Object(i.jsx)(M.a,{value:72,children:"3 Hari"})}),Object(i.jsx)("div",{className:"mb-3",children:Object(i.jsx)(M.a,{value:-10,children:"Pilih Tanggal"})})]})})}),Object(i.jsx)("div",{className:"mb-2 flex flex-col",children:m?Object(i.jsx)(I.a,{value:null===j.deadline?null:u()(j.deadline),className:"datepickerStatus",showTime:!0,onChange:function(e,t){b(J(J({},j),{},{deadline:t})),C((function(e){return e+1}))}}):null})]}),Object(i.jsx)("div",{children:Object(i.jsxs)("span",{className:"text-state1 text-base",children:[Object(i.jsx)("strong",{children:"PENTING"}),": Deadline terhitung sejak tiket dibuat atau diajukan"]})})]})})},G=n("vJKn"),Y=n.n(G),U=n("z7pX"),K=n("rg98"),q=n("ye1Q");n("44PY");function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t,n=e.title,c=e.visible,s=e.onvisible,a=(e.onClose,e.buttonOkText),r=(e.disabled,e.initProps),o=(e.refreshtickets,e.setrefreshtickets),j=e.setrefreshclosed,b=(e.dataprofile,e.displaydata),f=e.datapayload,y=e.setdatapayload,k=e.ticketid,_=e.disabledsubmit,N=e.setdisabledsubmit,S=Object(h.useState)(!1),C=S[0],P=S[1],A=Object(h.useState)([]),D=A[0],L=A[1],z=Object(h.useState)([]),F=(z[0],z[1]),M=Object(h.useState)([]),B=M[0],J=M[1],R=Object(h.useState)([]),G=R[0],H=R[1],X=Object(h.useState)(!1),$=X[0],Z=X[1],Q=Object(h.useState)(!1),W=Q[0],ee=Q[1],te=Object(h.useState)(!1),ne=te[0],ie=te[1],ce=Object(h.useState)(-1),se=ce[0],ae=ce[1],le=function(){var e=Object(K.a)(Y.a.mark((function e(t){var n,i,c,s,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),n=t.target.files,(i=new FormData).append("file",n[0]),i.append("upload_preset","migsys"),e.next=7,fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:i});case 7:return c=e.sent,e.next=10,c.json();case 10:s=e.sent,(a=Object(U.a)(f.files)).push(s.secure_url),y(V(V({},f),{},{files:a})),ie(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(r)}}).then((function(e){return e.json()})).then((function(e){L(e.data.ticket_types),F(e.data.ticket_task_types),J([e.data.companies])}))}),[]),Object(h.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/getFilterUsers"),{method:"GET",headers:{Authorization:JSON.parse(r)}}).then((function(e){return e.json()})).then((function(e){H(e.data)}))}),[]),Object(h.useEffect)((function(){console.log(f),null!==f.type_id&&""!==f.name&&null!==f.ticket_task_type_id&&""!==f.product_id&&null!==f.incident_time&&null!==f.location_id?(console.log("tidak"),N(!1)):(console.log("ya"),N(!0))}),[se]),Object(i.jsx)(g.a,{title:n,visible:c,onClose:function(){j((function(e){return e+1})),s(!1)},buttonOkText:a,onClick:function(){!1===/(^\d+$)/.test(f.pic_contact)||!1===/(^\d+$)/.test(f.product_id)?""===f.pic_contact?(P(!0),N(!0),fetch("".concat("https://service-staging.mig.id","/updateTicket"),{method:"PUT",headers:{Authorization:JSON.parse(r),"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),P(!1),N(!1),e.success?(y({id:Number(k),requester_id:null,raised_at:null,closed_at:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,problem:"",incident_time:null,files:[],description:""}),s(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))):(!1===new RegExp(/(^\d+$)/).test(f.pic_contact)?Z(!0):Z(!1),!1===new RegExp(/(^\d+$)/).test(f.product_id)?ee(!0):ee(!1),N(!0)):(P(!0),N(!0),fetch("".concat("https://service-staging.mig.id","/updateTicket"),{method:"PUT",headers:{Authorization:JSON.parse(r),"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),P(!1),N(!1),e.success?(y({id:Number(k),requester_id:null,raised_at:null,closed_at:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,problem:"",incident_time:null,files:[],description:""}),s(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})})))},disabled:_,children:C?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):Object(i.jsxs)("div",{className:"flex flex-col",children:[Object(i.jsx)("div",{className:"mb-6",children:Object(i.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsx)(v.c,{children:"No. Tiket"}),Object(i.jsx)("p",{className:" mb-0 text-lg font-bold",children:b.name})]}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsx)("div",{className:"flex mb-2",children:Object(i.jsx)(v.c,{children:"Nama Pembuat"})}),Object(i.jsx)("div",{className:" mb-2 flex",children:Object(i.jsx)(w.a,{suffixIcon:Object(i.jsx)(p.a,{}),showArrow:!0,style:{width:"100%"},onChange:function(e,t){y(V(V({},f),{},{requester_id:e}))},defaultValue:f.requester_id,children:G.map((function(e,t){return Object(i.jsx)(w.a.Option,{value:e.id,children:Object(i.jsxs)("div",{className:" flex items-center",children:[Object(i.jsx)("div",{className:"mr-1 w-7 h7 rounded-full",children:Object(i.jsx)("img",{src:"-"===e.profile_image?"/image/stafftask.png":e.profile_image,className:" object-contain",alt:""})}),Object(i.jsx)("div",{children:e.name})]})})}))})})]}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsx)("div",{className:"flex mb-2",children:Object(i.jsx)(v.c,{children:"Tanggal Dibuat"})}),Object(i.jsx)("div",{className:" mb-2 flex",children:Object(i.jsx)(I.a,{suffixIcon:Object(i.jsx)(O.k,{size:15,color:"#000000"}),style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",defaultValue:null===f.raised_at?null:u()(f.raised_at),onChange:function(e,t){y(V(V({},f),{},{raised_at:""===t?null:t}))}})})]}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsx)("div",{className:"flex mb-2",children:Object(i.jsx)(v.c,{children:"Tanggal Closed"})}),Object(i.jsx)("div",{className:" mb-2 flex",children:Object(i.jsx)(I.a,{suffixIcon:Object(i.jsx)(O.k,{size:15,color:"#000000"}),style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",defaultValue:null===f.closed_at?null:u()(f.closed_at),onChange:function(e,t){y(V(V({},f),{},{closed_at:""===t?null:t}))}})})]}),Object(i.jsx)("hr",{}),Object(i.jsxs)("div",{className:"flex flex-col my-6",children:[Object(i.jsx)(v.c,{children:"Tipe Tiket"}),Object(i.jsx)("p",{className:" mb-0 text-lg font-bold",children:null===(t=D.filter((function(e){return e.id===b.ticketable.asset_type.ticket_type_id}))[0])||void 0===t?void 0:t.name})]}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsx)(v.c,{children:"Jenis Aset"}),Object(i.jsxs)("div",{className:"flex items-center",children:[Object(i.jsx)("div",{className:"mr-2 flex items-center",children:Object(i.jsx)(O.h,{size:50})}),Object(i.jsx)(v.b,{children:b.ticketable.asset_type.name})]})]}),Object(i.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(i.jsxs)("div",{className:"jsx-4263238570 flex mb-2",children:[Object(i.jsx)(v.c,{children:"ID Produk"}),Object(i.jsx)("span",{className:"jsx-4263238570 idproduk"}),Object(i.jsx)(E.a,{id:"4263238570",children:[".idproduk.jsx-4263238570::before{content:'*';color:red;}"]})]}),Object(i.jsx)(x.a,{defaultValue:f.product_id,onChange:function(e){y(V(V({},f),{},{product_id:e.target.value})),ae((function(e){return e+1}))}}),W&&Object(i.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"ID Produk harus angka"})]}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsxs)("div",{className:"jsx-2493184868 flex mb-2",children:[Object(i.jsx)(v.c,{children:"Waktu Kejadian"}),Object(i.jsx)("span",{className:"jsx-2493184868 timeincident"}),Object(i.jsx)(E.a,{id:"2493184868",children:[".timeincident.jsx-2493184868::before{content:'*';color:red;}"]})]}),Object(i.jsx)("div",{className:" mb-2 flex",children:Object(i.jsx)(I.a,{suffixIcon:Object(i.jsx)(O.k,{size:15,color:"#000000"}),style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",defaultValue:null===f.incident_time?null:u()(f.incident_time),onChange:function(e,t){y(V(V({},f),{},{incident_time:""===t?null:t})),ae((function(e){return e+1}))}})})]}),Object(i.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(i.jsxs)("div",{className:"jsx-1976207010 flex mb-2",children:[Object(i.jsx)(v.c,{children:"Lokasi Kejadian"}),Object(i.jsx)("span",{className:"jsx-1976207010 locincident"}),Object(i.jsx)(E.a,{id:"1976207010",children:[".locincident.jsx-1976207010::before{content:'*';color:red;}"]})]}),Object(i.jsx)("div",{className:" mb-2 flex",children:Object(i.jsx)(T.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(i.jsx)(p.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){y(V(V({},f),{},"undefined"===typeof e?{location_id:null}:{location_id:e})),ae((function(e){return e+1}))},treeData:B,treeDefaultExpandAll:!0,defaultValue:f.location_id})})]}),Object(i.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(i.jsx)("div",{className:"flex mb-2",children:Object(i.jsx)(v.c,{children:"PIC"})}),Object(i.jsx)(x.a,{defaultValue:f.pic_name,onChange:function(e){y(V(V({},f),{},{pic_name:e.target.value}))}})]}),Object(i.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(i.jsx)("div",{className:"flex mb-2",children:Object(i.jsx)(v.c,{children:"Kontak PIC"})}),Object(i.jsx)(x.a,{defaultValue:f.pic_contact,onChange:function(e){y(V(V({},f),{},{pic_contact:e.target.value})),ae((function(e){return e+1}))}}),$&&Object(i.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"Kontak PIC harus angka"})]}),Object(i.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(i.jsx)("div",{className:"flex mb-2",children:Object(i.jsx)(v.c,{children:"Deskripsi Masalah"})}),Object(i.jsx)(x.a.TextArea,{rows:5,defaultValue:f.description,onChange:function(e){y(V(V({},f),{},{description:e.target.value}))}})]}),Object(i.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(i.jsx)("div",{className:"flex mb-2",children:Object(i.jsx)(v.c,{children:"Bukti Kejadian"})}),Object(i.jsxs)("div",{className:" flex justify-between items-center mb-2",children:[Object(i.jsx)("div",{children:Object(i.jsx)(v.c,{children:"Unggah JPG/MP4 (Maks. 5 MB)"})}),Object(i.jsx)("div",{children:Object(i.jsxs)(m.a,{type:"primaryInput",onChangeGambar:le,children:[ne?Object(i.jsx)(q.a,{style:{marginRight:"0.5rem"}}):Object(i.jsx)("div",{className:"mr-1",children:Object(i.jsx)(O.r,{size:15,color:"#ffffff"})}),"Unggah File"]})})]}),Object(i.jsx)("div",{className:"grid grid-cols-3",children:f.files.map((function(e,t){return Object(i.jsxs)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2",children:[Object(i.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""}),Object(i.jsx)("div",{className:" cursor-pointer",onClick:function(){var e=Object(U.a)(f.files);e.splice(t,1),y((function(t){return V(V({},t),{},{files:e})}))},children:Object(i.jsx)(O.hb,{size:15,color:"#BF4A40"})})]})}))})]})]})})},$=n("qe3g"),Z=n.n($),Q=n("D1C7"),W=n("gYAt"),ee=(n("o8C9"),n("m0r1"));function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ee.f.register(ee.a,ee.p,ee.e,ee.j,ee.i,ee.c,ee.l);var ie=!0;t.default=function(e){var t,n,c,a,r,o,j,f,x,p,g,y,k,N,w,S,T,C,E,P,A,D,z=e.dataProfile,I=e.sidemenu,F=e.initProps,M=e.ticketid,B=Object(b.useRouter)().pathname.split("/").slice(1);B.splice(1,2),B.push("Detail Tiket");var J=Object(h.useState)({id:null,ticketable_id:null,task_id:null,closed_at:null,resolved_times:"",status:null,name:"",creator_name:"",creator_location:"",raised_at:"",assignment_type:"",assignment_operator_id:null,assignment_operator_name:"",assignment_profile_image:"",deadline:null,status_name:"",ticketable:{id:null,product_type:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,inventory_id:null,problem:"",incident_time:"",files:[],description:"",deleted_at:null,asset_type_name:"",location:{id:null,name:"",full_location:""},asset_type:{id:null,task_type_id:null,ticket_type_id:null,name:"",description:"",deleted_at:null},inventory:null}}),G=J[0],Y=J[1],U=Object(h.useState)({status_ticket:[{id:0,name:""}],ticket_types:[],incident_type:[],companies:{data:[{id:0,title:"",key:"",value:0}]},ticket_task_types:[],resolved_times:[]}),K=U[0],q=U[1],H=Object(h.useState)(!0),V=H[0],$=H[1],ee=Object(h.useState)({id:Number(M),requester_id:null,raised_at:null,closed_at:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,problem:"",incident_time:null,files:[],description:""}),te=ee[0],ie=ee[1],ce=Object(h.useState)(!1),se=ce[0],ae=ce[1],le=Object(h.useState)(-1),re=le[0],oe=le[1],de=Object(h.useState)(-1),je=de[0],ue=de[1],be=Object(h.useState)(!1),he=be[0],me=be[1],fe=Object(h.useState)({id:Number(M),inventory_id:null,name:""}),xe=fe[0],pe=fe[1],Oe=Object(h.useState)(null),ve=Oe[0],ge=Oe[1],ye=Object(h.useState)(!1),ke=ye[0],_e=ye[1],Ne=Object(h.useState)(!1),we=Ne[0],Se=Ne[1],Te=Object(h.useState)(!1),Ce=Te[0],Ee=Te[1],Pe=Object(h.useState)(-1),Ae=Pe[0],De=Pe[1],Le=Object(h.useState)(-1),ze=Le[0],Ie=Le[1],Fe=Object(h.useState)({id:Number(M),assignable_type:!0,assignable_id:null}),Me=Fe[0],Be=Fe[1],Je=Object(h.useState)(!1),Re=Je[0],Ge=Je[1],Ye=Object(h.useState)(-1),Ue=Ye[0],Ke=Ye[1],qe=Object(h.useState)(-1),He=qe[0],Ve=qe[1],Xe=Object(h.useState)({id:Number(M),deadline:null}),$e=Xe[0],Ze=Xe[1],Qe=Object(h.useState)(!1),We=Qe[0],et=Qe[1],tt=Object(h.useState)(-1),nt=tt[0],it=tt[1],ct=Object(h.useState)(-1),st=ct[0],at=ct[1],lt=Object(h.useState)(!1),rt=lt[0],ot=lt[1],dt=Object(h.useState)(null),jt=dt[0],ut=dt[1],bt=Object(h.useState)(!1),ht=bt[0],mt=bt[1],ft=Object(h.useState)({id:Number(M),notes:"",name:""}),xt=ft[0],pt=ft[1],Ot=Object(h.useState)(!1),vt=Ot[0],gt=Ot[1],yt=Object(h.useState)(-1),kt=yt[0],_t=yt[1],Nt=Object(h.useState)([]),wt=Nt[0],St=Nt[1],Tt=Object(h.useState)({id:Number(M),notes:""}),Ct=Tt[0],Et=Tt[1],Pt=Object(h.useState)(!1),At=Pt[0],Dt=Pt[1],Lt=Object(h.useState)(!1),zt=Lt[0],It=Lt[1],Ft=Object(h.useState)(-1),Mt=Ft[0],Bt=Ft[1],Jt=Object(h.useState)([]),Rt=Jt[0],Gt=Jt[1],Yt=Object(h.useState)(!0),Ut=Yt[0],Kt=Yt[1],qt=Object(h.useState)(!1),Ht=qt[0],Vt=qt[1];return Object(h.useEffect)((function(){fetch("".concat("https://service-staging.mig.id","/").concat(1===z.data.role?"getTicket":"getClientTicket","?id=").concat(M),{method:"GET",headers:{Authorization:JSON.parse(F)}}).then((function(e){return e.json()})).then((function(e){Y(e.data),ie(ne(ne({},te),{},{requester_id:e.data.creator_id,raised_at:u()(e.data.raised_at).locale("id").format(),closed_at:null===e.data.closed_at?null:u()(e.data.closed_at).locale("id").format(),product_id:e.data.ticketable.product_id,pic_name:e.data.ticketable.pic_name,pic_contact:e.data.ticketable.pic_contact,location_id:e.data.ticketable.location_id,problem:e.data.ticketable.problem,incident_time:null===e.data.ticketable.original_incident_time?null:u()(e.data.ticketable.original_incident_time).locale("id").format(),files:e.data.ticketable.files,description:e.data.ticketable.description})),me(!1),0===e.data.assignment_operator_id?Be({id:Number(M),assignable_type:!0,assignable_id:null}):Be(ne(ne({},Me),{},{assignable_type:"Engineer"===e.data.assignment_type,assignable_id:e.data.assignment_operator_id})),null===e.data.ticketable.inventory?ge(null):(pe({id:Number(M),inventory_id:e.data.ticketable.inventory.id,name:e.data.ticketable.inventory.mig_id}),ge(e.data.ticketable.inventory.model_inventory.asset_id)),Ze({id:Number(M),deadline:"-"===e.data.deadline?null:e.data.deadline}),"-"===e.data.deadline?ot(!1):ot(!0),"-"===e.data.deadline?ut(null):ut(-10),pt(ne(ne({},xt),{},{name:e.data.name}))})).then((function(){fetch("".concat("https://service-staging.mig.id","/").concat(1===z.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(F)}}).then((function(e){return e.json()})).then((function(e){q(e.data),$(!1)}))}))}),[ze,He,st,kt,je,re,Ae,Ue,nt]),Object(h.useEffect)((function(){Kt(!0),fetch("".concat("https://service-staging.mig.id","/").concat(1===z.data.role?"getTicketLog":"getClientTicketLog","?id=").concat(M),{method:"GET",headers:{Authorization:JSON.parse(F)}}).then((function(e){return e.json()})).then((function(e){Gt(e.data.normal_logs),St(e.data.special_logs.filter((function(e){return"Note Khusus"===e.log_name}))),Kt(!1)}))}),[Mt,je,ze,He,st]),Object(i.jsxs)(Q.a,{dataProfile:z,sidemenu:I,tok:F,st:Z.a,pathArr:B,children:[Object(i.jsx)("div",{className:" flex flex-col",children:Object(i.jsxs)("div",{className:" grid grid-cols-11 px-5",children:[Object(i.jsxs)("div",{className:" col-span-3 flex flex-col",children:[Object(i.jsxs)("div",{className:" flex flex-col mb-2 mr-2 shadow-md rounded-md bg-white p-5",children:[Object(i.jsxs)("div",{className:" flex flex-col mb-4",children:[Object(i.jsxs)("div",{className:" flex items-center justify-center mb-2",children:[Object(i.jsx)("div",{className:"mr-2",children:Object(i.jsx)(O.gb,{size:30,color:"#000000"})}),Object(i.jsx)("div",{children:Object(i.jsx)(v.a,{children:G.name})})]}),Object(i.jsx)("div",{className:" flex items-center justify-center mb-4",children:V?null:Object(i.jsx)("div",{children:Object(i.jsx)(v.c,{children:null===(t=K.ticket_types.filter((function(e){return e.id===G.ticketable.product_type}))[0])||void 0===t?void 0:t.name})})}),Object(i.jsx)("div",{className:" flex justify-center items-center",children:1===z.data.role?V?null:Object(i.jsxs)(m.a,{type:"default",onClick:function(){ae(!0)},children:[Object(i.jsx)("div",{className:" mr-1",children:Object(i.jsx)(O.w,{size:15,color:"#35763B"})}),"Ubah Tiket"]}):null})]}),V?Object(i.jsx)("div",{className:" flex justify-center",children:Object(i.jsx)(l.a,{})}):Object(i.jsxs)("div",{className:" flex flex-col",children:[Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Diajukan Oleh:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.creator_name})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Lokasi:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.creator_location})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Tanggal Diajukan:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.raised_at?u()(G.raised_at).locale("id").format("LL"):"-"})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Tanggal Selesai:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:null===G.closed_at?"-":u()(G.closed_at).locale("id").format("LL")})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Durasi Penyelesaian:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.resolved_times})]})]})]}),Object(i.jsxs)("div",{className:"flex flex-col my-2 mr-2 shadow-md rounded-md bg-white p-5",children:[Object(i.jsx)("div",{className:" mb-7",children:Object(i.jsx)(v.a,{children:"Detail Masalah"})}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Tipe Aset:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.ticketable.asset_type_name})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Terminal ID:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.ticketable.product_id})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"PIC:"}),Object(i.jsxs)("p",{className:" mb-0 text-gray-600",children:[""===G.ticketable.pic_name?"-":G.ticketable.pic_name," ","/ ",G.ticketable.pic_contact]})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Waktu Kejadian:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.ticketable.incident_time})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Lokasi Masalah:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.ticketable.location.full_location})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Deskripsi Kerusakan:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:G.ticketable.description})]})]}),Object(i.jsxs)("div",{className:"flex flex-col my-2 mr-2 shadow-md rounded-md bg-white p-5",children:[Object(i.jsx)("div",{className:" mb-7",children:Object(i.jsx)(v.a,{children:"Bukti Kejadian"})}),0===G.ticketable.files.length?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(s.a,{image:s.a.PRESENTED_IMAGE_SIMPLE})}):Object(i.jsx)("div",{className:" grid grid-cols-2",children:G.ticketable.files.map((function(e,t){return Object(i.jsx)("a",{target:"_blank",href:e,children:Object(i.jsx)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2 cursor-pointer",children:Object(i.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""})})})}))})]}),Object(i.jsx)("div",{className:"flex items-center justify-center mb-2 mr-2 shadow-md rounded-md bg-white p-5",children:Ht?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):Object(i.jsx)("div",{children:Object(i.jsxs)(m.a,{type:"default",onClick:function(){Vt(!0),fetch("".concat("https://service-staging.mig.id","/").concat(1===z.data.role?"ticketExport":"clientTicketExport","?id=").concat(M),{method:"GET",headers:{Authorization:JSON.parse(F)}}).then((function(e){return e.blob()})).then((function(e){var t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="".concat(G.name,".pdf"),i.click(),setTimeout((function(){window.URL.revokeObjectURL(n)})),Vt(!1)}))},children:[Object(i.jsx)("div",{className:" mr-1",children:Object(i.jsx)(O.A,{size:15,color:"#35763B"})}),"Ekspor Tiket"]})})})]}),Object(i.jsxs)("div",{className:" col-span-8 flex flex-col",children:[Object(i.jsxs)("div",{className:" w-full flex justify-around mb-2 ml-2 shadow-md rounded-md bg-white p-5",children:[Object(i.jsxs)("div",{className:" w-4/12 pr-8 flex items-center justify-between mb-2",children:[Object(i.jsxs)("div",{className:" flex flex-col",children:[Object(i.jsx)("div",{className:"mb-2",children:Object(i.jsx)(v.c,{children:"Status"})}),Object(i.jsxs)("div",{className:" flex items-center",children:[Object(i.jsx)("div",{className:" mr-2",children:Object(i.jsx)(O.m,{size:25,color:"#35763B"})}),Object(i.jsx)("p",{className:" mb-0 text-base font-bold",children:G.status_name})]})]}),7!==G.status&&Object(i.jsxs)("div",{className:"dropdown dropdown-end",children:[Object(i.jsx)("div",{tabIndex:"1",className:" h-full flex justify-end items-start cursor-pointer text-lg font-bold",children:Object(i.jsx)("span",{className:"mb-0",children:"..."})}),Object(i.jsx)("div",{tabIndex:"1",className:" menu dropdown-content bg-backdrop p-3",children:Object(i.jsxs)("div",{className:" p-3 w-52 flex items-center bg-white rounded shadow hover:bg-red-100 text-overdue cursor-pointer",onClick:function(){mt(!0)},children:[Object(i.jsx)("div",{className:"mr-2",children:Object(i.jsx)(O.mb,{size:15,color:"#BF4A40"})}),Object(i.jsx)("p",{className:" mb-0",children:"Batalkan Tiket"})]})})]}),Object(i.jsx)(W.a,{title:"Pembatalan Tiket",visible:ht,onvisible:mt,onCancel:function(){mt(!1)},loading:vt,onOk:function(){gt(!0),fetch("".concat("https://service-staging.mig.id","/").concat(1===z.data.role?"cancelTicket":"cancelClientTicket"),{method:"PUT",headers:{Authorization:JSON.parse(F),"Content-Type":"application/json"},body:JSON.stringify(xt)}).then((function(e){return e.json()})).then((function(e){gt(!1),mt(!1),e.success?(pt({id:Number(M),notes:""}),_t((function(e){return e+1})),d.a.success({message:"Tiket berhasil dibatalkan",duration:3})):e.success||d.a.error({message:e.message,duration:3})}))},data:xt,setdata:pt,ticketid:M})]}),Object(i.jsxs)("div",{className:" w-4/12 px-8 flex items-center justify-between mb-2",children:[Object(i.jsxs)("div",{className:" flex flex-col",children:[Object(i.jsx)("div",{className:"mb-2",children:Object(i.jsx)(v.c,{children:1===z.data.role?G.assignment_type:"Engineer/Grup"})}),V?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):0===G.assignment_operator_id?1===z.data.role?Object(i.jsxs)("button",{className:" btn btn-sm bg-state2 border-state2 hover:bg-onhold hover:border-onhold px-6 py-0",onClick:function(){Ge(!0)},children:[Object(i.jsx)("div",{className:"mr-1",children:Object(i.jsx)(O.B,{size:15,color:"#ffffff"})}),"Assign Engineer"]}):Object(i.jsxs)("div",{className:"flex items-center",children:[Object(i.jsx)("div",{className:"mr-1 mb-1",children:Object(i.jsx)(O.D,{size:15,color:"#CCCCCC"})}),Object(i.jsx)(v.c,{children:"Belum di-assign"})]}):Object(i.jsxs)("div",{className:" flex items-center",children:[Object(i.jsx)("div",{className:" flex items-center",children:"Engineer"===G.assignment_type?Object(i.jsx)("div",{className:" w-8 h-8 rounded-full mr-2",children:Object(i.jsx)("img",{src:""===G.assignment_profile_image||"-"===G.assignment_profile_image?"/image/staffTask.png":"".concat(G.assignment_profile_image),className:" object-contain w-10 h-10",alt:""})}):Object(i.jsx)("div",{className:" mr-2",children:Object(i.jsx)(O.ib,{})})}),Object(i.jsx)("p",{className:" mb-0 text-base font-bold",children:G.assignment_operator_name})]})]}),1===z.data.role?V?null:7!==G.status?0===G.assignment_operator_id?null:Object(i.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){Ge(!0)},children:Object(i.jsx)(O.kb,{size:18,color:"#4D4D4D"})}):null:null]}),Object(i.jsxs)("div",{className:" w-4/12 pl-8 flex items-center justify-between mb-2",children:[Object(i.jsxs)("div",{className:" flex flex-col",children:[Object(i.jsx)("div",{className:" mb-2",children:Object(i.jsx)(v.c,{children:"Deadline"})}),V?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):"-"===G.deadline?1===z.data.role?Object(i.jsxs)("button",{className:" btn btn-sm bg-state2 border-state2 hover:bg-onhold hover:border-onhold px-6 py-0",onClick:function(){et(!0)},children:[Object(i.jsx)("div",{className:"mr-1",children:Object(i.jsx)(O.k,{size:15,color:"#ffffff"})}),"Tentukan Deadline"]}):Object(i.jsxs)("div",{className:"flex items-center",children:[Object(i.jsx)("div",{className:"mr-1 mb-1",children:Object(i.jsx)(O.D,{size:15,color:"#CCCCCC"})}),Object(i.jsx)(v.c,{children:"Belum ada deadline"})]}):Object(i.jsx)("div",{className:" flex items-center",children:Object(i.jsx)("p",{className:" mb-0 text-base font-bold",children:G.deadline})})]}),1===z.data.role?V?null:7!==G.status?"-"===G.deadline?null:Object(i.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){et(!0)},children:Object(i.jsx)(O.k,{size:18,color:"#4D4D4D"})}):null:null]})]}),Object(i.jsxs)("div",{className:"flex w-full",children:[Object(i.jsx)("div",{className:" w-6/12 mx-2",children:1===z.data.role?Object(i.jsxs)("div",{className:" flex w-full flex-col mt-2 shadow-md rounded-md bg-white p-5",children:[Object(i.jsxs)("div",{className:" flex items-center justify-between mb-5",children:[Object(i.jsx)(v.a,{children:"Detail Aset"}),null===G.ticketable.inventory?null:Object(i.jsxs)("div",{className:"dropdown dropdown-end",children:[Object(i.jsx)("div",{tabIndex:"2",className:" h-full flex justify-end items-start cursor-pointer text-lg font-bold",children:Object(i.jsx)("span",{className:"mb-0",children:"..."})}),Object(i.jsxs)("div",{tabIndex:"2",className:" menu dropdown-content bg-backdrop p-3",children:[Object(i.jsx)("div",{className:" p-3 w-52 mb-4 flex items-center bg-white rounded shadow hover:bg-primary25 text-primary100 cursor-pointer",onClick:function(){_e(!0)},children:Object(i.jsx)("p",{className:" mb-0",children:"Ganti Aset"})}),Object(i.jsx)("div",{className:" p-3 w-52 flex items-center bg-white rounded shadow hover:bg-primary25 text-primary100 cursor-pointer",onClick:function(){Se(!0)},children:Object(i.jsx)("p",{className:" mb-0",children:"Pisah Aset"})})]})]}),Object(i.jsx)(W.m,{title:"Pemisahan Item dengan Tiket",visible:we,onvisible:Se,onCancel:function(){Se(!1)},loading:Ce,onOk:function(){Ee(!0),fetch("".concat("https://service-staging.mig.id","/setItemTicket"),{method:"PUT",headers:{Authorization:JSON.parse(F),"Content-Type":"application/json"},body:JSON.stringify(ne(ne({},xe),{},{inventory_id:null}))}).then((function(e){return e.json()})).then((function(e){Ee(!1),Se(!1),e.success?(pe({id:Number(M),inventory_id:null,name:""}),Ie((function(e){return e+1})),d.a.success({message:"Tiket berhasil dibatalkan",duration:3})):e.success||d.a.error({message:e.message,duration:3})}))},data:xe,setdata:pe,ticketid:M})]}),null===G.ticketable.inventory?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:" flex flex-col justify-center items-center mb-5",children:[Object(i.jsx)("div",{className:"w-52 h-52 mb-2",children:Object(i.jsx)("img",{src:"/image/emptyAssetTicket.png",className:" object-contain",alt:""})}),Object(i.jsx)("div",{className:" w-8/12 text-center",children:Object(i.jsx)("p",{className:" mb-0 text-gray-400",children:"Belum ada aset terhubung. Silakan hubungkan aset."})})]}),Object(i.jsx)("div",{className:" flex justify-center mb-5",children:Object(i.jsx)(m.a,{type:"primary",onClick:function(){_e(!0)},children:"+ Hubungkan Aset"})})]}):Object(i.jsxs)("div",{className:" flex flex-col",children:[6===G.status&&Object(i.jsxs)("div",{className:" flex bg-primary100 text-white rounded-md p-4 w-full mb-5",children:[Object(i.jsx)("div",{className:" flex items-center justify-center h-full mr-2",children:Object(i.jsx)(O.F,{size:20,color:"#ffffff"})}),Object(i.jsxs)("p",{className:" mb-0",children:["Berikut tampilan detail item yang di-closed pada tanggal"," ",Object(i.jsx)("strong",{children:null===G.closed_at?"-":G.closed_at})]})]}),Object(i.jsxs)("div",{className:"mb-8 flex flex-col items-center",children:[Object(i.jsx)(v.a,{children:null===(n=G.ticketable)||void 0===n||null===(c=n.inventory)||void 0===c||null===(a=c.model_inventory)||void 0===a?void 0:a.name}),Object(i.jsx)(v.c,{children:null===(r=G.ticketable)||void 0===r||null===(o=r.inventory)||void 0===o?void 0:o.mig_id})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Tipe Aset:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:null===(j=G.ticketable)||void 0===j||null===(f=j.inventory)||void 0===f||null===(x=f.model_inventory)||void 0===x||null===(p=x.asset)||void 0===p?void 0:p.full_name})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"No Seri:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:null===(null===(g=G.ticketable)||void 0===g||null===(y=g.inventory)||void 0===y?void 0:y.serial_number)?"-":null===(k=G.ticketable)||void 0===k||null===(N=k.inventory)||void 0===N?void 0:N.serial_number})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Status Pemakaian:"}),Object(i.jsxs)("div",{children:[1===G.ticketable.inventory.status_usage.id&&Object(i.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open",children:"In Used"}),2===G.ticketable.inventory.status_usage.id&&Object(i.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed",children:"In Stock"}),3===G.ticketable.inventory.status_usage.id&&Object(i.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue",children:"Replacement"})]})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Kondisi Aset:"}),Object(i.jsxs)("div",{children:[1===G.ticketable.inventory.status_condition.id&&Object(i.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed",children:"Good"}),2===G.ticketable.inventory.status_condition.id&&Object(i.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed",children:"Gray"}),3===G.ticketable.inventory.status_condition.id&&Object(i.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue",children:"Bad"})]})]}),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Lokasi Item:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:null===(null===(w=G.ticketable)||void 0===w||null===(S=w.inventory)||void 0===S?void 0:S.location)?"-":null===(T=G.ticketable)||void 0===T||null===(C=T.inventory)||void 0===C?void 0:C.location})]}),Object(i.jsx)("hr",{}),G.ticketable.inventory.additional_attributes.map((function(e,t){return Object(i.jsxs)("div",{className:"flex flex-col mb-5 ".concat(0===t?"mt-5":""),children:[Object(i.jsxs)(v.c,{children:[e.name,":"]}),Object(i.jsx)("p",{className:"mb-0 text-sm",children:"dropdown"===e.data_type||"checkbox"===e.data_type||"date"===e.data_type?Object(i.jsxs)(i.Fragment,{children:["dropdown"===e.data_type&&Object(i.jsx)(i.Fragment,{children:e.value.opsi[e.value.default]}),"checkbox"===e.data_type&&Object(i.jsx)(i.Fragment,{children:e.value.opsi.filter((function(t,n){return e.value.default.includes(n)})).join(", ")}),"date"===e.data_type&&Object(i.jsx)(i.Fragment,{children:u()(e.value).locale("id").format("LL")})]}):Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:e.value})})]},t)})),Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)(v.c,{children:"Deskripsi:"}),Object(i.jsx)("p",{className:" mb-0 text-gray-600",children:null===(null===(E=G.ticketable)||void 0===E||null===(P=E.inventory)||void 0===P?void 0:P.deskripsi)?"-":null===(A=G.ticketable)||void 0===A||null===(D=A.inventory)||void 0===D?void 0:D.deskripsi})]})]})]}):Object(i.jsxs)("div",{className:" shadow-md rounded-md bg-white p-5 my-2 ml-2",children:[Object(i.jsxs)("div",{className:" flex items-center justify-between mb-5",children:[Object(i.jsx)(v.a,{children:"Catatan"}),Object(i.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){Dt(!0)},children:Object(i.jsx)(O.T,{size:25,color:"#35763B"})})]}),zt?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):0===wt.length?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(s.a,{image:s.a.PRESENTED_IMAGE_SIMPLE})}):wt.map((function(e,t){return Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)("p",{className:" mb-3 line-clamp-6 font-light",children:e.description}),Object(i.jsxs)("div",{className:"flex items-center justify-between",children:[Object(i.jsxs)("div",{className:" flex",children:[Object(i.jsx)("div",{className:" w-5 h-5 rounded-full mr-2",children:Object(i.jsx)("img",{src:"/image/staffTask.png",className:" object-contain w-5 h-5",alt:""})}),Object(i.jsx)(v.e,{color:"green",children:e.causer.name})]}),Object(i.jsx)("div",{children:Object(i.jsx)(v.c,{children:u()(e.created_at).locale("id").format("LL, LT")})})]})]})}))]})}),Object(i.jsxs)("div",{className:"flex flex-col w-6/12",children:[1===z.data.role&&Object(i.jsxs)("div",{className:" shadow-md rounded-md bg-white p-5 my-2 ml-2",children:[Object(i.jsxs)("div",{className:" flex items-center justify-between mb-5",children:[Object(i.jsx)(v.a,{children:"Catatan"}),Object(i.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){Dt(!0)},children:Object(i.jsx)(O.T,{size:25,color:"#35763B"})})]}),zt?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(l.a,{})}):0===wt.length?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(s.a,{image:s.a.PRESENTED_IMAGE_SIMPLE})}):wt.map((function(e,t){return Object(i.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(i.jsx)("p",{className:" mb-3 line-clamp-6 font-light",children:e.description}),Object(i.jsxs)("div",{className:"flex items-center justify-between",children:[Object(i.jsxs)("div",{className:" flex",children:[Object(i.jsx)("div",{className:" w-5 h-5 rounded-full mr-2",children:Object(i.jsx)("img",{src:"/image/staffTask.png",className:" object-contain w-5 h-5",alt:""})}),Object(i.jsx)(v.e,{color:"green",children:e.causer.name})]}),Object(i.jsx)("div",{children:Object(i.jsx)(v.c,{children:u()(e.created_at).locale("id").format("LL, LT")})})]})]})}))]}),Object(i.jsx)(W.l,{title:"Catatan Baru",visible:At,onvisible:Dt,onCancel:function(){Dt(!1)},loading:zt,onOk:function(){It(!0),fetch("".concat("https://service-staging.mig.id","/").concat(1===z.data.role?"addNoteTicket":"clientAddNoteTicket"),{method:"POST",headers:{Authorization:JSON.parse(F),"Content-Type":"application/json"},body:JSON.stringify(Ct)}).then((function(e){return e.json()})).then((function(e){It(!1),Dt(!1),e.success?(Et({id:Number(M),notes:""}),Bt((function(e){return e+1})),d.a.success({message:"Note berhasil ditambahkan",duration:3})):e.success||d.a.error({message:e.message,duration:3})}))},datanoteticket:Ct,setdatanoteticket:Et,ticketid:M}),Object(i.jsxs)("div",{className:"shadow-md rounded-md bg-white p-5 mt-2 ml-2",children:[Object(i.jsx)("div",{className:" flex items-center justify-between mb-5",children:Object(i.jsx)(v.a,{children:"Aktivitas"})}),Ut?Object(i.jsx)("div",{className:" flex justify-center",children:Object(i.jsx)(l.a,{})}):0===Rt.length?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(s.a,{image:s.a.PRESENTED_IMAGE_SIMPLE})}):Rt.map((function(e,t){return Object(i.jsxs)("div",{className:" flex flex-col mb-4",children:[Object(i.jsx)("p",{className:" mb-2 line-clamp-6 font-medium",children:e.log_name}),Object(i.jsxs)("div",{className:"flex items-center justify-between",children:[Object(i.jsxs)("div",{className:" flex",children:[Object(i.jsx)("div",{className:" w-5 h-5 rounded-full mr-2",children:Object(i.jsx)("img",{src:"-"===e.causer.profile_image?"/image/staffTask.png":e.causer.profile_image,className:" object-contain w-5 h-5",alt:""})}),Object(i.jsx)(v.e,{color:"green",children:e.causer.name})]}),Object(i.jsx)("div",{children:Object(i.jsx)(v.c,{children:u()(e.created_at).locale("id").format("LL, LT")})})]})]})}))]})]})]})]})]})}),1===z.data.role&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(L,{title:"Hubungkan Aset",visible:ke,onClose:function(){_e(!1)},buttonOkText:"Hubungkan Aset",initProps:F,onvisible:_e,refresh:ze,setrefresh:Ie,setrefreshclosed:De,ticketid:M,datapayload:xe,setdatapayload:pe,selectedassettype:ve,setselectedassettype:ge}),Object(i.jsx)(_,{title:"",visible:Re,onClose:function(){Ge(!1)},buttonOkText:"Simpan",initProps:F,onvisible:Ge,refresh:He,setrefresh:Ve,setrefreshclosed:Ke,ticketid:M,datapayload:Me,setdatapayload:Be}),Object(i.jsx)(R,{title:"Deadline",visible:We,onClose:function(){et(!1)},buttonOkText:"Simpan",initProps:F,onvisible:et,refresh:st,setrefresh:at,setrefreshclosed:it,ticketid:M,datapayload:$e,setdatapayload:Ze,showdatetime:rt,setshowdatetime:ot,datevalue:jt,setdatevalue:ut}),Object(i.jsx)(X,{title:"Ubah Tiket",visible:se,onClose:function(){ae(!1)},buttonOkText:"Simpan Perubahan Tiket",initProps:F,onvisible:ae,refreshtickets:je,setrefreshtickets:ue,setrefreshclosed:oe,dataprofile:z,datapayload:te,setdatapayload:ie,ticketid:M,displaydata:G,disabledsubmit:he,setdisabledsubmit:me})]})]})}},hf16:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.responsiveMap=t.responsiveArray=t.default=void 0;var c=i(n("lSNA")),s=i(n("pVnL"));t.responsiveArray=["xxl","xl","lg","md","sm","xs"];var a={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};t.responsiveMap=a;var l=new Map,r=-1,o={},d={matchHandlers:{},dispatch:function(e){return o=e,l.forEach((function(e){return e(o)})),l.size>=1},subscribe:function(e){return l.size||this.register(),r+=1,l.set(r,e),e(o),r},unsubscribe:function(e){l.delete(e),l.size||this.unregister()},unregister:function(){var e=this;Object.keys(a).forEach((function(t){var n=a[t],i=e.matchHandlers[n];null===i||void 0===i||i.mql.removeListener(null===i||void 0===i?void 0:i.listener)})),l.clear()},register:function(){var e=this;Object.keys(a).forEach((function(t){var n=a[t],i=function(n){var i=n.matches;e.dispatch((0,s.default)((0,s.default)({},o),(0,c.default)({},t,i)))},l=window.matchMedia(n);l.addListener(i),e.matchHandlers[n]={mql:l,listener:i},i(l)}))}};t.default=d},"ir/0":function(e,t,n){"use strict";var i=n("CC+v"),c=n.n(i),s=n("nKUr");n("q1tI");t.a=function(e){var t=e.title,n=e.visible,i=e.onOk,a=e.onCancel,l=e.footer,r=e.loading,o=e.children,d=e.width,j=e.closeIcon,u=e.maskClosable;return Object(s.jsx)(c.a,{title:t,visible:n,onOk:i,onCancel:a,footer:l,okButtonProps:{loading:r},width:d,closeIcon:j,maskClosable:u,children:o})}},"l+S1":function(e,t,n){"use strict";var i=n("VTBJ"),c=n("q1tI"),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},a=n("6VBw"),l=function(e,t){return c.createElement(a.a,Object(i.a)(Object(i.a)({},e),{},{ref:t,icon:s}))};l.displayName="SearchOutlined";t.a=c.forwardRef(l)},rg98:function(e,t,n){"use strict";function i(e,t,n,i,c,s,a){try{var l=e[s](a),r=l.value}catch(o){return void n(o)}l.done?t(r):Promise.resolve(r).then(i,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,s){var a=e.apply(t,n);function l(e){i(a,c,s,l,r,"next",e)}function r(e){i(a,c,s,l,r,"throw",e)}l(void 0)}))}}n.d(t,"a",(function(){return c}))},ye1Q:function(e,t,n){"use strict";var i=n("VTBJ"),c=n("q1tI"),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},a=n("6VBw"),l=function(e,t){return c.createElement(a.a,Object(i.a)(Object(i.a)({},e),{},{ref:t,icon:s}))};l.displayName="LoadingOutlined";t.a=c.forwardRef(l)},z7pX:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("6FTQ");var c=n("8rE2");function s(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},[["PbJr",0,2,19,30,1,3,4,5,6,7,8,9,12,14,15,16,17,18,20,21,22,23,25,26,33]]]);