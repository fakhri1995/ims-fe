_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[135],{"6FTQ":function(e,t,n){"use strict";function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}n.d(t,"a",(function(){return c}))},"8rE2":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n("6FTQ");function s(e,t){if(e){if("string"===typeof e)return Object(c.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(c.a)(e,t):void 0}}},GgLZ:function(e,t,n){"use strict";var c=n("q1tI"),s=n.n(c),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var a=function(){return(a=Object.assign||function(e){for(var t,n=1,c=arguments.length;n<c;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};var l="Pixel",r="Percent",o={unit:r,value:.8};function d(e){return"number"===typeof e?{unit:r,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:l,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:r,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),o):(console.warn("scrollThreshold should be string or number"),o)}var u=function(e){function t(t){var n=e.call(this,t)||this;return n.lastScrollTop=0,n.actionTriggered=!1,n.startY=0,n.currentY=0,n.dragging=!1,n.maxPullDownDistance=0,n.getScrollableTarget=function(){return n.props.scrollableTarget instanceof HTMLElement?n.props.scrollableTarget:"string"===typeof n.props.scrollableTarget?document.getElementById(n.props.scrollableTarget):(null===n.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},n.onStart=function(e){n.lastScrollTop||(n.dragging=!0,e instanceof MouseEvent?n.startY=e.pageY:e instanceof TouchEvent&&(n.startY=e.touches[0].pageY),n.currentY=n.startY,n._infScroll&&(n._infScroll.style.willChange="transform",n._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},n.onMove=function(e){n.dragging&&(e instanceof MouseEvent?n.currentY=e.pageY:e instanceof TouchEvent&&(n.currentY=e.touches[0].pageY),n.currentY<n.startY||(n.currentY-n.startY>=Number(n.props.pullDownToRefreshThreshold)&&n.setState({pullToRefreshThresholdBreached:!0}),n.currentY-n.startY>1.5*n.maxPullDownDistance||n._infScroll&&(n._infScroll.style.overflow="visible",n._infScroll.style.transform="translate3d(0px, "+(n.currentY-n.startY)+"px, 0px)")))},n.onEnd=function(){n.startY=0,n.currentY=0,n.dragging=!1,n.state.pullToRefreshThresholdBreached&&(n.props.refreshFunction&&n.props.refreshFunction(),n.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame((function(){n._infScroll&&(n._infScroll.style.overflow="auto",n._infScroll.style.transform="none",n._infScroll.style.willChange="unset")}))},n.onScrollListener=function(e){"function"===typeof n.props.onScroll&&setTimeout((function(){return n.props.onScroll&&n.props.onScroll(e)}),0);var t=n.props.height||n._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;n.actionTriggered||((n.props.inverse?n.isElementAtTop(t,n.props.scrollThreshold):n.isElementAtBottom(t,n.props.scrollThreshold))&&n.props.hasMore&&(n.actionTriggered=!0,n.setState({showLoader:!0}),n.props.next&&n.props.next()),n.lastScrollTop=t.scrollTop)},n.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},n.throttledOnScrollListener=function(e,t,n,c){var s,i=!1,a=0;function l(){s&&clearTimeout(s)}function r(){var r=this,o=Date.now()-a,d=arguments;function u(){a=Date.now(),n.apply(r,d)}function j(){s=void 0}i||(c&&!s&&u(),l(),void 0===c&&o>e?u():!0!==t&&(s=setTimeout(c?j:u,void 0===c?e-o:e)))}return"boolean"!==typeof t&&(c=n,n=t,t=void 0),r.cancel=function(){l(),i=!0},r}(150,n.onScrollListener).bind(n),n.onStart=n.onStart.bind(n),n.onMove=n.onMove.bind(n),n.onEnd=n.onEnd.bind(n),n}return function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?a(a({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,c=d(t);return c.unit===l?e.scrollTop<=c.value+n-e.scrollHeight+1:e.scrollTop<=c.value/100+n-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,c=d(t);return c.unit===l?e.scrollTop+n>=e.scrollHeight-c.value:e.scrollTop+n>=c.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=a({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),n=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),c=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return s.a.createElement("div",{style:c,className:"infinite-scroll-component__outerdiv"},s.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&s.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},s.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!n&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(c.Component);t.a=u},PbJr:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets/detail/[ticketId]",function(){return n("zwJc")}])},UMre:function(e,t,n){"use strict";var c=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.isStyleSupport=function(e,t){if(!Array.isArray(e)&&void 0!==t)return function(e,t){if(!i(e))return!1;var n=document.createElement("div"),c=n.style[e];return n.style[e]=t,n.style[e]!==c}(e,t);return i(e)};var s=c(n("3Mug")),i=function(e){if((0,s.default)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1}},cBho:function(e,t,n){"use strict";var c=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.detectFlexGapSupported=t.canUseDocElement=void 0,Object.defineProperty(t,"isStyleSupport",{enumerable:!0,get:function(){return a.isStyleSupport}});var s,i=c(n("3Mug")),a=n("UMre"),l=function(){return(0,i.default)()&&window.document.documentElement};t.canUseDocElement=l;t.detectFlexGapSupported=function(){if(!l())return!1;if(void 0!==s)return s;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),s=1===e.scrollHeight,document.body.removeChild(e),s}},cpVT:function(e,t,n){"use strict";function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}))},hf16:function(e,t,n){"use strict";var c=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.responsiveMap=t.responsiveArray=t.default=void 0;var s=c(n("lSNA")),i=c(n("pVnL"));t.responsiveArray=["xxl","xl","lg","md","sm","xs"];var a={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};t.responsiveMap=a;var l=new Map,r=-1,o={},d={matchHandlers:{},dispatch:function(e){return o=e,l.forEach((function(e){return e(o)})),l.size>=1},subscribe:function(e){return l.size||this.register(),r+=1,l.set(r,e),e(o),r},unsubscribe:function(e){l.delete(e),l.size||this.unregister()},unregister:function(){var e=this;Object.keys(a).forEach((function(t){var n=a[t],c=e.matchHandlers[n];null===c||void 0===c||c.mql.removeListener(null===c||void 0===c?void 0:c.listener)})),l.clear()},register:function(){var e=this;Object.keys(a).forEach((function(t){var n=a[t],c=function(n){var c=n.matches;e.dispatch((0,i.default)((0,i.default)({},o),(0,s.default)({},t,c)))},l=window.matchMedia(n);l.addListener(c),e.matchHandlers[n]={mql:l,listener:c},c(l)}))}};t.default=d},"l+S1":function(e,t,n){"use strict";var c=n("VTBJ"),s=n("q1tI"),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},a=n("6VBw"),l=function(e,t){return s.createElement(a.a,Object(c.a)(Object(c.a)({},e),{},{ref:t,icon:i}))};l.displayName="SearchOutlined";t.a=s.forwardRef(l)},rg98:function(e,t,n){"use strict";function c(e,t,n,c,s,i,a){try{var l=e[i](a),r=l.value}catch(o){return void n(o)}l.done?t(r):Promise.resolve(r).then(c,s)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(s,i){var a=e.apply(t,n);function l(e){c(a,s,i,l,r,"next",e)}function r(e){c(a,s,i,l,r,"throw",e)}l(void 0)}))}}n.d(t,"a",(function(){return s}))},spIA:function(e,t,n){"use strict";var c=n("rmht"),s=n.n(c),i=n("wXtC"),a=n.n(i),l=n("iJl9"),r=n.n(l),o=n("FAat"),d=n.n(o),u=n("nKUr"),j=n("MM9K"),b=n.n(j),m=n("rR1Q"),h=n.n(m),f=n("vJKn"),p=n.n(f),x=n("cpVT"),O=n("z7pX"),v=n("rg98"),g=n("MX0m"),y=n.n(g),_=n("q1tI"),N=n("8mU3"),k=(n("yncA"),n("VXtC")),w=n("T+/+"),S=n("l+S1"),T=n("ye1Q"),E=n("a3/r"),C=n("wd/R"),P=n.n(C);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(x.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.title,n=e.visible,c=e.onvisible,i=(e.onClose,e.buttonOkText),l=(e.disabled,e.initProps),o=(e.refreshtickets,e.setrefreshtickets),j=e.dataprofile,m=Object(_.useState)({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:j.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),f=m[0],x=m[1],g=Object(_.useState)(!1),C=g[0],D=g[1],L=Object(_.useState)([]),z=L[0],M=L[1],I=Object(_.useState)([]),F=I[0],J=I[1],R=Object(_.useState)([]),B=R[0],G=R[1],U=Object(_.useState)(!1),Y=(U[0],U[1],Object(_.useState)(!1)),K=Y[0],q=Y[1],V=Object(_.useState)(!1),H=V[0],X=V[1],$=Object(_.useState)(!1),Q=$[0],W=$[1],Z=Object(_.useState)(!0),ee=Z[0],te=Z[1],ne=Object(_.useState)(-1),ce=ne[0],se=ne[1],ie=function(){var e=Object(v.a)(p.a.mark((function e(t){var n,c,s,i,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),n=t.target.files,(c=new FormData).append("file",n[0]),c.append("upload_preset","migsys"),e.next=7,fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:c});case 7:return s=e.sent,e.next=10,s.json();case 10:i=e.sent,(a=Object(O.a)(f.files)).push(i.secure_url),x(A(A({},f),{},{files:a})),W(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===j.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(l)}}).then((function(e){return e.json()})).then((function(e){M(e.data.ticket_types),J(e.data.ticket_task_types),G([1===j.data.role?e.data.companies:e.data.companies.data])}))}),[]),Object(_.useEffect)((function(){null!==f.type_id&&""!==f.name&&null!==f.ticket_task_type_id&&""!==f.product_id&&null!==f.incident_time&&null!==f.location_id?te(!1):te(!0)}),[ce]),Object(u.jsx)(N.a,{title:t,visible:n,onClose:function(){x({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:j.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),c(!1)},buttonOkText:i,onClick:function(){!1===/(^\d+$)/.test(f.pic_contact)||!1===/(^\d+$)/.test(f.product_id)?""===f.pic_contact?(D(!0),te(!0),fetch("https://boiling-thicket-46501.herokuapp.com/addTicket",{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),D(!1),te(!1),e.success?(x({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:j.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),c(!1),h.a.success({message:e.message,duration:3})):h.a.error({message:e.message,duration:3})}))):(!1===new RegExp(/(^\d+$)/).test(f.pic_contact)?q(!0):q(!1),!1===new RegExp(/(^\d+$)/).test(f.product_id)?X(!0):X(!1),te(!0)):(D(!0),te(!0),fetch("https://boiling-thicket-46501.herokuapp.com/addTicket",{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),D(!1),te(!1),e.success?(x({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:j.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),c(!1),h.a.success({message:e.message,duration:3})):h.a.error({message:e.message,duration:3})})))},disabled:ee,children:C?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(b.a,{})}):Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("div",{className:"mb-6",children:Object(u.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(u.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(u.jsxs)("div",{className:"jsx-3689135148 flex mb-2",children:[Object(u.jsx)(w.c,{children:"Tipe Tiket"}),Object(u.jsx)("span",{className:"jsx-3689135148 tickettypes"}),Object(u.jsx)(y.a,{id:"3689135148",children:[".tickettypes.jsx-3689135148::before{content:'*';color:red;}"]})]}),Object(u.jsx)("div",{className:" mb-2 flex",children:Object(u.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){x(A(A({},f),{},{type_id:e})),se((function(e){return e+1}))},value:f.type_id,children:z.map((function(e,t){return Object(u.jsx)(d.a.Option,{value:e.id,children:e.name})}))})})]}),Object(u.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(u.jsxs)("div",{className:"jsx-2641960267 flex mb-2",children:[Object(u.jsx)(w.c,{children:"Jenis Aset"}),Object(u.jsx)("span",{className:"jsx-2641960267 tickettask"}),Object(u.jsx)(y.a,{id:"2641960267",children:[".tickettask.jsx-2641960267::before{content:'*';color:red;}"]})]}),Object(u.jsx)("div",{className:" mb-2 flex",children:Object(u.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){x(A(A({},f),{},{ticket_task_type_id:e})),se((function(e){return e+1}))},value:f.ticket_task_type_id,children:F.map((function(e,t){return Object(u.jsx)(d.a.Option,{value:e.id,children:e.name})}))})})]}),Object(u.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(u.jsxs)("div",{className:"jsx-4263238570 flex mb-2",children:[Object(u.jsx)(w.c,{children:"ID Produk"}),Object(u.jsx)("span",{className:"jsx-4263238570 idproduk"}),Object(u.jsx)(y.a,{id:"4263238570",children:[".idproduk.jsx-4263238570::before{content:'*';color:red;}"]})]}),Object(u.jsx)(r.a,{value:f.product_id,onChange:function(e){x(A(A({},f),{},{product_id:e.target.value})),se((function(e){return e+1}))}}),H&&Object(u.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"ID Produk harus angka"})]}),Object(u.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(u.jsxs)("div",{className:"jsx-2493184868 flex mb-2",children:[Object(u.jsx)(w.c,{children:"Waktu Kejadian"}),Object(u.jsx)("span",{className:"jsx-2493184868 timeincident"}),Object(u.jsx)(y.a,{id:"2493184868",children:[".timeincident.jsx-2493184868::before{content:'*';color:red;}"]})]}),Object(u.jsx)("div",{className:" mb-2 flex",children:Object(u.jsx)(a.a,{style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",value:null===f.incident_time?null:P()(f.incident_time),onChange:function(e,t){x(A(A({},f),{},{incident_time:""===t?null:t})),se((function(e){return e+1}))}})})]}),Object(u.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(u.jsxs)("div",{className:"jsx-1976207010 flex mb-2",children:[Object(u.jsx)(w.c,{children:"Lokasi Kejadian"}),Object(u.jsx)("span",{className:"jsx-1976207010 locincident"}),Object(u.jsx)(y.a,{id:"1976207010",children:[".locincident.jsx-1976207010::before{content:'*';color:red;}"]})]}),Object(u.jsx)("div",{className:" mb-2 flex",children:Object(u.jsx)(s.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(u.jsx)(S.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){x(A(A({},f),{},"undefined"===typeof e?{location_id:null}:{location_id:e})),se((function(e){return e+1}))},treeData:B,treeDefaultExpandAll:!0,value:f.location_id})})]}),Object(u.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(u.jsx)("div",{className:"flex mb-2",children:Object(u.jsx)(w.c,{children:"PIC"})}),Object(u.jsx)(r.a,{value:f.pic_name,onChange:function(e){x(A(A({},f),{},{pic_name:e.target.value}))}})]}),Object(u.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(u.jsx)("div",{className:"flex mb-2",children:Object(u.jsx)(w.c,{children:"Kontak PIC"})}),Object(u.jsx)(r.a,{value:f.pic_contact,onChange:function(e){x(A(A({},f),{},{pic_contact:e.target.value})),se((function(e){return e+1}))}}),K&&Object(u.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"Kontak PIC harus angka"})]}),Object(u.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(u.jsx)("div",{className:"flex mb-2",children:Object(u.jsx)(w.c,{children:"Deskripsi Masalah"})}),Object(u.jsx)(r.a.TextArea,{rows:5,value:f.description,onChange:function(e){x(A(A({},f),{},{description:e.target.value}))}})]}),Object(u.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(u.jsx)("div",{className:"flex mb-2",children:Object(u.jsx)(w.c,{children:"Bukti Kejadian"})}),Object(u.jsxs)("div",{className:" flex justify-between items-center mb-2",children:[Object(u.jsx)("div",{children:Object(u.jsx)(w.c,{children:"Unggah JPG/MP4 (Maks. 5 MB)"})}),Object(u.jsx)("div",{children:Object(u.jsxs)(E.a,{type:"primaryInput",onChangeGambar:ie,children:[Q?Object(u.jsx)(T.a,{style:{marginRight:"0.5rem"}}):Object(u.jsx)("div",{className:"mr-1",children:Object(u.jsx)(k.r,{size:15,color:"#ffffff"})}),"Unggah File"]})})]}),Object(u.jsx)("div",{className:"grid grid-cols-3",children:f.files.map((function(e,t){return Object(u.jsxs)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2",children:[Object(u.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""}),Object(u.jsx)("div",{className:" cursor-pointer",onClick:function(){var e=Object(O.a)(f.files);e.splice(t,1),x((function(t){return A(A({},t),{},{files:e})}))},children:Object(u.jsx)(k.hb,{size:15,color:"#BF4A40"})})]})}))})]})]})})}},ye1Q:function(e,t,n){"use strict";var c=n("VTBJ"),s=n("q1tI"),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},a=n("6VBw"),l=function(e,t){return s.createElement(a.a,Object(c.a)(Object(c.a)({},e),{},{ref:t,icon:i}))};l.displayName="LoadingOutlined";t.a=s.forwardRef(l)},z7pX:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n("6FTQ");var s=n("8rE2");function i(e){return function(e){if(Array.isArray(e))return Object(c.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(s.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},zwJc:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return ce}));var c=n("nKUr"),s=n("kEgK"),i=n.n(s),a=n("MM9K"),l=n.n(a),r=n("cpVT"),o=n("rR1Q"),d=n.n(o),u=n("20a2"),j=n("q1tI"),b=n("2Sck"),m=n("wd/R"),h=n.n(m),f=n("g6Xq"),p=n.n(f),x=n("VXtC"),O=n("m0r1"),v=n("T+/+"),g=n("a3/r"),y=(n("6GDB"),n("spIA"),n("NEnw")),_=n("FAat"),N=n.n(_),k=n("rmht"),w=n.n(k),S=n("MX0m"),T=n.n(S),E=n("8mU3"),C=n("l+S1");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){for(var t=0;t<e.length;t++)e[t].key=e[t].id,e[t].value=e[t].id,e[t].children&&A(e[t].children);return e}var L=function(e){var t=e.title,n=e.visible,s=e.onvisible,i=(e.onClose,e.buttonOkText),a=(e.disabled,e.initProps),r=(e.refresh,e.setrefresh),o=e.setrefreshclosed,u=e.datapayload,b=e.setdatapayload,m=e.selectedassettype,h=e.setselectedassettype,f=e.ticketid,p=Object(j.useState)(!1),x=p[0],O=p[1],g=Object(j.useState)(!1),y=g[0],_=g[1],k=Object(j.useState)([]),S=k[0],P=k[1],L=Object(j.useState)([]),z=L[0],M=L[1],I=Object(j.useState)(!1),F=I[0],J=I[1],R=Object(j.useState)(!0),B=R[0],G=R[1],U=Object(j.useState)(-1),Y=U[0],K=U[1];return Object(j.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getAssets",{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){var t=A(e.data);P(t)}))}),[]),Object(j.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getFilterInventories",{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){M(e.data)}))}),[]),Object(j.useEffect)((function(){null!==u.inventory_id?G(!1):G(!0)}),[Y]),Object(c.jsx)(E.a,{title:t,visible:n,onClose:function(){o((function(e){return e+1})),b({id:Number(f),inventory_id:null}),s(!1)},buttonOkText:i,onClick:function(){O(!0),G(!0),fetch("https://boiling-thicket-46501.herokuapp.com/setItemTicket",{method:"PUT",headers:{Authorization:JSON.parse(a),"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){O(!1),G(!1),e.success?(r((function(e){return e+1})),s(!1),b({id:Number(f),inventory_id:null}),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))},disabled:B,children:x?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):Object(c.jsxs)("div",{className:"flex flex-col",children:[Object(c.jsx)("div",{className:"mb-6",children:Object(c.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsxs)("div",{className:"jsx-2185086480 flex mb-2",children:[Object(c.jsx)(v.c,{children:"Tipe Aset"}),Object(c.jsx)("span",{className:"jsx-2185086480 assettypes"}),Object(c.jsx)(T.a,{id:"2185086480",children:[".assettypes.jsx-2185086480::before{content:'*';color:red;}"]})]}),Object(c.jsx)("div",{className:" mb-2 flex",children:Object(c.jsx)(w.a,{style:{width:"100%"},showArrow:!0,name:"asset_type",onChange:function(e,t,n){h(n.allCheckedNodes[0].node.props.id),_(!0),fetch("https://boiling-thicket-46501.herokuapp.com/getFilterInventories?asset_id=".concat(n.allCheckedNodes[0].node.props.id),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){console.log(e),M(e.data),_(!1)}))},treeData:S,treeDefaultExpandAll:!0,value:m})})]}),Object(c.jsx)("div",{className:"flex flex-col mb-6",children:Object(c.jsx)("div",{className:" mb-2 flex",children:Object(c.jsx)(N.a,{style:{width:"100%"},placeholder:"Nama aset...",suffixIcon:Object(c.jsx)(C.a,{}),showArrow:!0,onChange:function(e,t){b(D(D({},u),{},{inventory_id:e})),K((function(e){return e+1}))},loading:y,showSearch:!0,optionFilterProp:"children",notFoundContent:F?Object(c.jsx)(l.a,{size:"small"}):null,onSearch:function(e){J(!0),fetch("https://boiling-thicket-46501.herokuapp.com/getFilterInventories?asset_id=".concat(m,"&keyword=").concat(e),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){M(e.data),J(!1)}))},value:u.inventory_id,children:z.map((function(e,t){return Object(c.jsxs)(N.a.Option,{value:e.id,children:[e.mig_id," - ",e.model_name," - ",e.asset_name]},t)}))})})})]})})},z=n("iJl9"),M=n.n(z);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=function(e){var t=e.title,n=e.visible,s=e.onvisible,i=(e.onClose,e.buttonOkText),a=(e.disabled,e.initProps),r=(e.refresh,e.setrefresh),o=e.setrefreshclosed,u=e.datapayload,b=e.setdatapayload,m=(e.ticketid,Object(j.useState)([])),h=m[0],f=m[1],p=Object(j.useState)(!1),O=p[0],g=p[1],y=Object(j.useState)([]),_=y[0],N=y[1],k=Object(j.useState)(!1),w=k[0],S=k[1],T=Object(j.useState)(!1),P=T[0],D=T[1],A=Object(j.useState)(!0),L=A[0],z=A[1],I=Object(j.useState)(-1),J=I[0],R=I[1];return Object(j.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getFilterGroups",{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){N(e.data)}))}),[]),Object(j.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getFilterUsers?type=".concat(1),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){f(e.data)}))}),[]),Object(j.useEffect)((function(){null!==u.assignable_id?z(!1):z(!0)}),[J]),Object(c.jsx)(E.a,{title:t,visible:n,onClose:function(){o((function(e){return e+1})),s(!1)},buttonOkText:i,onClick:function(){D(!0),z(!0),fetch("https://boiling-thicket-46501.herokuapp.com/assignTicket",{method:"PUT",headers:{Authorization:JSON.parse(a),"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){D(!1),z(!1),e.success?(r((function(e){return e+1})),s(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))},disabled:L,children:P?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):Object(c.jsxs)("div",{className:" flex flex-col px-3",children:[Object(c.jsxs)("div",{className:" my-5 flex items-center",children:[Object(c.jsx)("div",{id:"ind",className:"mr-4 text-primary100 bg-white hover:bg-primary100 hover:border-primary100 border-2 hover:text-white border-primary100 ".concat(!1===u.assignable_type&&"border-opacity-20"," px-6 btn btn-sm"),onClick:function(){b(F(F({},u),{},{assignable_type:!0}))},children:"Individu"}),Object(c.jsx)("div",{id:"grup",className:"mr-4 text-primary100 bg-white hover:bg-primary100 hover:border-primary100 border-2 hover:text-white border-primary100 ".concat(!0===u.assignable_type&&"border-opacity-20"," px-6 btn btn-sm"),onClick:function(){b(F(F({},u),{},{assignable_type:!1}))},children:"Grup"})]}),Object(c.jsx)("div",{className:"my-5",children:Object(c.jsx)(M.a,{suffix:Object(c.jsx)(C.a,{}),allowClear:!0,placeholder:"Nama Staff, Group..",onChange:function(e){!0===u.assignable_type?(g(!0),fetch("https://boiling-thicket-46501.herokuapp.com/getFilterUsers?type=".concat(1,"&name=",e.target.value),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){f(e.data),g(!1)}))):(S(!0),fetch("https://boiling-thicket-46501.herokuapp.com/getFilterGroups?name=".concat(e.target.value),{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){N(e.data),S(!1)})))}})}),Object(c.jsxs)("div",{className:"my-5 flex flex-col max-h-screen overflow-y-scroll",children:[O?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):!0===u.assignable_type&&h.map((function(e,t){return Object(c.jsxs)("div",{className:"".concat(u.assignable_id===e.id&&"bg-primary10"," mb-4 flex items-center cursor-pointer"),onClick:function(){b(F(F({},u),{},{assignable_id:e.id})),R((function(e){return e+1}))},children:[Object(c.jsx)("div",{className:" w-10 h-10 rounded-full mr-3",children:Object(c.jsx)("img",{src:""===e.profile_image||"-"===e.profile_image?"/image/staffTask.png":"".concat(e.profile_image),className:" object-contain w-10 h-10",alt:""})}),Object(c.jsxs)("div",{className:" flex flex-col justify-center",children:[Object(c.jsx)("div",{className:"mb-1 flex",children:Object(c.jsx)("div",{className:"mr-1",children:Object(c.jsx)(v.b,{children:e.name})})}),Object(c.jsx)("div",{children:Object(c.jsx)(v.c,{children:e.position})})]})]})})),w?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):!1===u.assignable_type&&_.map((function(e,t){return Object(c.jsxs)("div",{className:"".concat(u.assignable_id===e.id&&"bg-primary10"," mb-4 flex items-center cursor-pointer"),onClick:function(){b(F(F({},u),{},{assignable_id:e.id})),R((function(e){return e+1}))},children:[Object(c.jsx)("div",{className:" w-10 h-10 rounded-full mr-3",children:Object(c.jsx)(x.ib,{})}),Object(c.jsx)("div",{className:" flex flex-col justify-center",children:Object(c.jsx)("div",{className:"mb-1 flex",children:Object(c.jsx)("div",{className:"mr-1",children:Object(c.jsx)(v.b,{children:e.name})})})})]})}))]})]})})},R=n("wXtC"),B=n.n(R),G=n("qPIi"),U=n.n(G);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=e.title,n=e.visible,s=e.onvisible,i=(e.onClose,e.buttonOkText),a=(e.disabled,e.initProps),r=(e.refresh,e.setrefresh),o=e.setrefreshclosed,u=e.datapayload,b=e.setdatapayload,m=e.showdatetime,f=e.setshowdatetime,p=e.datevalue,x=e.setdatevalue,O=e.ticketid,v=Object(j.useState)(!1),g=v[0],y=v[1],_=Object(j.useState)(!0),N=_[0],k=_[1],w=Object(j.useState)(-1),S=w[0],T=w[1];return Object(j.useEffect)((function(){null!==u.assignable_id?k(!1):k(!0)}),[S]),Object(c.jsx)(E.a,{title:t,visible:n,onClose:function(){o((function(e){return e+1})),b({id:Number(O),deadline:null}),s(!1)},buttonOkText:i,onClick:function(){y(!0),k(!0),fetch("https://boiling-thicket-46501.herokuapp.com/setDeadline",{method:"PUT",headers:{Authorization:JSON.parse(a),"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){y(!1),k(!1),e.success?(b({id:Number(O),deadline:null}),r((function(e){return e+1})),s(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))},disabled:N,children:g?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):Object(c.jsxs)("div",{className:" flex flex-col px-3",children:[Object(c.jsx)("div",{className:"mb-2",children:Object(c.jsx)(U.a.Group,{onChange:function(e){var t="";3===e.target.value?(t=h()(u.created_at).add(3,"h").locale("id").format(),x(3),f(!1)):12===e.target.value?(t=h()(u.created_at).add(30,"h").locale("id").format(),x(12),f(!1)):30===e.target.value?(t=h()(u.created_at).add(1,"h").locale("id").format(),x(30),f(!1)):72===e.target.value?(t=h()(u.created_at).add(3,"d").locale("id").format(),x(72),f(!1)):-10===e.target.value&&(x(-10),f(!0)),b(K(K({},u),{},{deadline:-10===e.target.value?null:t})),T((function(e){return e+1}))},value:p,children:Object(c.jsxs)("div",{className:"flex flex-col",children:[Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsx)(U.a,{value:3,children:"3 Jam"})}),Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsx)(U.a,{value:12,children:"12 Jam"})}),Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsx)(U.a,{value:30,children:"30 Jam"})}),Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsx)(U.a,{value:72,children:"3 Hari"})}),Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsx)(U.a,{value:-10,children:"Pilih Tanggal"})})]})})}),Object(c.jsx)("div",{className:"mb-2 flex flex-col",children:m?Object(c.jsx)(B.a,{value:null===u.deadline?null:h()(u.deadline),className:"datepickerStatus",showTime:!0,onChange:function(e,t){b(K(K({},u),{},{deadline:t})),T((function(e){return e+1}))}}):null})]})})},V=n("vJKn"),H=n.n(V),X=n("z7pX"),$=n("rg98"),Q=(n("yncA"),n("ye1Q"));function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=function(e){var t,n=e.title,s=e.visible,i=e.onvisible,a=(e.onClose,e.buttonOkText),r=(e.disabled,e.initProps),o=(e.refreshtickets,e.setrefreshtickets),u=e.setrefreshclosed,b=(e.dataprofile,e.displaydata),m=e.datapayload,f=e.setdatapayload,p=e.ticketid,O=e.disabledsubmit,y=e.setdisabledsubmit,_=Object(j.useState)(!1),k=_[0],S=_[1],P=Object(j.useState)([]),D=P[0],A=P[1],L=Object(j.useState)([]),z=(L[0],L[1]),I=Object(j.useState)([]),F=I[0],J=I[1],R=Object(j.useState)([]),G=R[0],U=R[1],Y=Object(j.useState)(!1),K=Y[0],q=Y[1],V=Object(j.useState)(!1),W=V[0],ee=V[1],te=Object(j.useState)(!1),ne=te[0],ce=te[1],se=Object(j.useState)(-1),ie=se[0],ae=se[1],le=function(){var e=Object($.a)(H.a.mark((function e(t){var n,c,s,i,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce(!0),n=t.target.files,(c=new FormData).append("file",n[0]),c.append("upload_preset","migsys"),e.next=7,fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:c});case 7:return s=e.sent,e.next=10,s.json();case 10:i=e.sent,(a=Object(X.a)(m.files)).push(i.secure_url),f(Z(Z({},m),{},{files:a})),ce(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getTicketRelation",{method:"GET",headers:{Authorization:JSON.parse(r)}}).then((function(e){return e.json()})).then((function(e){A(e.data.ticket_types),z(e.data.ticket_task_types),J([e.data.companies])}))}),[]),Object(j.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getFilterUsers",{method:"GET",headers:{Authorization:JSON.parse(r)}}).then((function(e){return e.json()})).then((function(e){U(e.data)}))}),[]),Object(j.useEffect)((function(){console.log(m),null!==m.type_id&&""!==m.name&&null!==m.ticket_task_type_id&&""!==m.product_id&&null!==m.incident_time&&null!==m.location_id?(console.log("tidak"),y(!1)):(console.log("ya"),y(!0))}),[ie]),Object(c.jsx)(E.a,{title:n,visible:s,onClose:function(){u((function(e){return e+1})),i(!1)},buttonOkText:a,onClick:function(){!1===/(^\d+$)/.test(m.pic_contact)||!1===/(^\d+$)/.test(m.product_id)?""===m.pic_contact?(S(!0),y(!0),fetch("https://boiling-thicket-46501.herokuapp.com/updateTicket",{method:"PUT",headers:{Authorization:JSON.parse(r),"Content-Type":"application/json"},body:JSON.stringify(m)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),S(!1),y(!1),e.success?(f({id:Number(p),requester_id:null,raised_at:null,closed_at:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,problem:"",incident_time:null,files:[],description:""}),i(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})}))):(!1===new RegExp(/(^\d+$)/).test(m.pic_contact)?q(!0):q(!1),!1===new RegExp(/(^\d+$)/).test(m.product_id)?ee(!0):ee(!1),y(!0)):(S(!0),y(!0),fetch("https://boiling-thicket-46501.herokuapp.com/updateTicket",{method:"PUT",headers:{Authorization:JSON.parse(r),"Content-Type":"application/json"},body:JSON.stringify(m)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),S(!1),y(!1),e.success?(f({id:Number(p),requester_id:null,raised_at:null,closed_at:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,problem:"",incident_time:null,files:[],description:""}),i(!1),d.a.success({message:e.message,duration:3})):d.a.error({message:e.message,duration:3})})))},disabled:O,children:k?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):Object(c.jsxs)("div",{className:"flex flex-col",children:[Object(c.jsx)("div",{className:"mb-6",children:Object(c.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsx)(v.c,{children:"No. Tiket"}),Object(c.jsx)("p",{className:" mb-0 text-lg font-bold",children:b.name})]}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsx)("div",{className:"flex mb-2",children:Object(c.jsx)(v.c,{children:"Nama Pembuat"})}),Object(c.jsx)("div",{className:" mb-2 flex",children:Object(c.jsx)(N.a,{suffixIcon:Object(c.jsx)(C.a,{}),showArrow:!0,style:{width:"100%"},onChange:function(e,t){f(Z(Z({},m),{},{requester_id:e}))},defaultValue:m.requester_id,children:G.map((function(e,t){return Object(c.jsx)(N.a.Option,{value:e.id,children:Object(c.jsxs)("div",{className:" flex items-center",children:[Object(c.jsx)("div",{className:"mr-1 w-7 h7 rounded-full",children:Object(c.jsx)("img",{src:"-"===e.profile_image?"/image/stafftask.png":e.profile_image,className:" object-contain",alt:""})}),Object(c.jsx)("div",{children:e.name})]})})}))})})]}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsx)("div",{className:"flex mb-2",children:Object(c.jsx)(v.c,{children:"Tanggal Dibuat"})}),Object(c.jsx)("div",{className:" mb-2 flex",children:Object(c.jsx)(B.a,{suffixIcon:Object(c.jsx)(x.k,{size:15,color:"#000000"}),style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",defaultValue:null===m.raised_at?null:h()(m.raised_at),onChange:function(e,t){f(Z(Z({},m),{},{raised_at:""===t?null:t}))}})})]}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsx)("div",{className:"flex mb-2",children:Object(c.jsx)(v.c,{children:"Tanggal Closed"})}),Object(c.jsx)("div",{className:" mb-2 flex",children:Object(c.jsx)(B.a,{suffixIcon:Object(c.jsx)(x.k,{size:15,color:"#000000"}),style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",defaultValue:null===m.closed_at?null:h()(m.closed_at),onChange:function(e,t){f(Z(Z({},m),{},{closed_at:""===t?null:t}))}})})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"flex flex-col my-6",children:[Object(c.jsx)(v.c,{children:"Tipe Tiket"}),Object(c.jsx)("p",{className:" mb-0 text-lg font-bold",children:null===(t=D.filter((function(e){return e.id===b.ticketable.asset_type.ticket_type_id}))[0])||void 0===t?void 0:t.name})]}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsx)(v.c,{children:"Jenis Aset"}),Object(c.jsxs)("div",{className:"flex items-center",children:[Object(c.jsx)("div",{className:"mr-2 flex items-center",children:Object(c.jsx)(x.h,{size:50})}),Object(c.jsx)(v.b,{children:b.ticketable.asset_type.name})]})]}),Object(c.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(c.jsxs)("div",{className:"jsx-4263238570 flex mb-2",children:[Object(c.jsx)(v.c,{children:"ID Produk"}),Object(c.jsx)("span",{className:"jsx-4263238570 idproduk"}),Object(c.jsx)(T.a,{id:"4263238570",children:[".idproduk.jsx-4263238570::before{content:'*';color:red;}"]})]}),Object(c.jsx)(M.a,{defaultValue:m.product_id,onChange:function(e){f(Z(Z({},m),{},{product_id:e.target.value})),ae((function(e){return e+1}))}}),W&&Object(c.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"ID Produk harus angka"})]}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsxs)("div",{className:"jsx-2493184868 flex mb-2",children:[Object(c.jsx)(v.c,{children:"Waktu Kejadian"}),Object(c.jsx)("span",{className:"jsx-2493184868 timeincident"}),Object(c.jsx)(T.a,{id:"2493184868",children:[".timeincident.jsx-2493184868::before{content:'*';color:red;}"]})]}),Object(c.jsx)("div",{className:" mb-2 flex",children:Object(c.jsx)(B.a,{suffixIcon:Object(c.jsx)(x.k,{size:15,color:"#000000"}),style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",defaultValue:null===m.incident_time?null:h()(m.incident_time),onChange:function(e,t){f(Z(Z({},m),{},{incident_time:""===t?null:t})),ae((function(e){return e+1}))}})})]}),Object(c.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(c.jsxs)("div",{className:"jsx-1976207010 flex mb-2",children:[Object(c.jsx)(v.c,{children:"Lokasi Kejadian"}),Object(c.jsx)("span",{className:"jsx-1976207010 locincident"}),Object(c.jsx)(T.a,{id:"1976207010",children:[".locincident.jsx-1976207010::before{content:'*';color:red;}"]})]}),Object(c.jsx)("div",{className:" mb-2 flex",children:Object(c.jsx)(w.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(c.jsx)(C.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){f(Z(Z({},m),{},"undefined"===typeof e?{location_id:null}:{location_id:e})),ae((function(e){return e+1}))},treeData:F,treeDefaultExpandAll:!0,defaultValue:m.location_id})})]}),Object(c.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(c.jsx)("div",{className:"flex mb-2",children:Object(c.jsx)(v.c,{children:"PIC"})}),Object(c.jsx)(M.a,{defaultValue:m.pic_name,onChange:function(e){f(Z(Z({},m),{},{pic_name:e.target.value}))}})]}),Object(c.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(c.jsx)("div",{className:"flex mb-2",children:Object(c.jsx)(v.c,{children:"Kontak PIC"})}),Object(c.jsx)(M.a,{defaultValue:m.pic_contact,onChange:function(e){f(Z(Z({},m),{},{pic_contact:e.target.value})),ae((function(e){return e+1}))}}),K&&Object(c.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"Kontak PIC harus angka"})]}),Object(c.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(c.jsx)("div",{className:"flex mb-2",children:Object(c.jsx)(v.c,{children:"Deskripsi Masalah"})}),Object(c.jsx)(M.a.TextArea,{rows:5,defaultValue:m.description,onChange:function(e){f(Z(Z({},m),{},{description:e.target.value}))}})]}),Object(c.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(c.jsx)("div",{className:"flex mb-2",children:Object(c.jsx)(v.c,{children:"Bukti Kejadian"})}),Object(c.jsxs)("div",{className:" flex justify-between items-center mb-2",children:[Object(c.jsx)("div",{children:Object(c.jsx)(v.c,{children:"Unggah JPG/MP4 (Maks. 5 MB)"})}),Object(c.jsx)("div",{children:Object(c.jsxs)(g.a,{type:"primaryInput",onChangeGambar:le,children:[ne?Object(c.jsx)(Q.a,{style:{marginRight:"0.5rem"}}):Object(c.jsx)("div",{className:"mr-1",children:Object(c.jsx)(x.r,{size:15,color:"#ffffff"})}),"Unggah File"]})})]}),Object(c.jsx)("div",{className:"grid grid-cols-3",children:m.files.map((function(e,t){return Object(c.jsxs)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2",children:[Object(c.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""}),Object(c.jsx)("div",{className:" cursor-pointer",onClick:function(){var e=Object(X.a)(m.files);e.splice(t,1),f((function(t){return Z(Z({},t),{},{files:e})}))},children:Object(c.jsx)(x.hb,{size:15,color:"#BF4A40"})})]})}))})]})]})})};n("GgLZ");function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}O.f.register(O.a,O.p,O.e,O.j,O.i,O.c,O.l);var ce=!0;t.default=function(e){var t,n,s,a,r,o,m,f,O,_,N,k,w,S,T,E,C,P,D,A,z,M,I=e.dataProfile,F=e.sidemenu,R=e.initProps,B=e.ticketid,G=Object(u.useRouter)().pathname.split("/").slice(1);G.splice(1,2),G.push("Detail Tiket");var U=Object(j.useState)({id:null,ticketable_id:null,task_id:null,closed_at:null,resolved_times:"",status:null,name:"",creator:"",creator_location:"",raised_at:"",assignment_type:"",assignment_operator_id:null,assignment_operator_name:"",assignment_profile_image:"",deadline:null,status_name:"",ticketable:{id:null,product_type:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,inventory_id:null,problem:"",incident_time:"",files:[],description:"",deleted_at:null,asset_type_name:"",location:{id:null,name:"",full_location:""},asset_type:{id:null,task_type_id:null,ticket_type_id:null,name:"",description:"",deleted_at:null},inventory:null}}),Y=U[0],K=U[1],V=Object(j.useState)({status_ticket:[{id:0,name:""}],ticket_types:[],incident_type:[],companies:{data:[{id:0,title:"",key:"",value:0}]},ticket_task_types:[],resolved_times:[]}),H=V[0],X=V[1],$=Object(j.useState)(!0),Q=$[0],W=$[1],Z=Object(j.useState)({id:Number(B),requester_id:null,raised_at:null,closed_at:null,product_id:"",pic_name:"",pic_contact:"",location_id:null,problem:"",incident_time:null,files:[],description:""}),te=Z[0],ce=Z[1],se=Object(j.useState)(!1),ie=se[0],ae=se[1],le=Object(j.useState)(-1),re=le[0],oe=le[1],de=Object(j.useState)(-1),ue=de[0],je=de[1],be=Object(j.useState)(!1),me=be[0],he=be[1],fe=Object(j.useState)({id:Number(B),inventory_id:null,name:""}),pe=fe[0],xe=fe[1],Oe=Object(j.useState)(null),ve=Oe[0],ge=Oe[1],ye=Object(j.useState)(!1),_e=ye[0],Ne=ye[1],ke=Object(j.useState)(!1),we=ke[0],Se=ke[1],Te=Object(j.useState)(!1),Ee=Te[0],Ce=Te[1],Pe=Object(j.useState)(-1),De=Pe[0],Ae=Pe[1],Le=Object(j.useState)(-1),ze=Le[0],Me=Le[1],Ie=Object(j.useState)({id:Number(B),assignable_type:!0,assignable_id:null}),Fe=Ie[0],Je=Ie[1],Re=Object(j.useState)(!1),Be=Re[0],Ge=Re[1],Ue=Object(j.useState)(-1),Ye=Ue[0],Ke=Ue[1],qe=Object(j.useState)(-1),Ve=qe[0],He=qe[1],Xe=Object(j.useState)({id:Number(B),deadline:null}),$e=Xe[0],Qe=Xe[1],We=Object(j.useState)(!1),Ze=We[0],et=We[1],tt=Object(j.useState)(-1),nt=tt[0],ct=tt[1],st=Object(j.useState)(-1),it=st[0],at=st[1],lt=Object(j.useState)(!1),rt=lt[0],ot=lt[1],dt=Object(j.useState)(null),ut=dt[0],jt=dt[1],bt=Object(j.useState)(!1),mt=bt[0],ht=bt[1],ft=Object(j.useState)({id:Number(B),notes:"",name:""}),pt=ft[0],xt=ft[1],Ot=Object(j.useState)(!1),vt=Ot[0],gt=Ot[1],yt=Object(j.useState)(-1),_t=yt[0],Nt=yt[1],kt=Object(j.useState)([]),wt=kt[0],St=kt[1],Tt=Object(j.useState)({id:Number(B),notes:""}),Et=Tt[0],Ct=Tt[1],Pt=Object(j.useState)(!1),Dt=Pt[0],At=Pt[1],Lt=Object(j.useState)(!1),zt=Lt[0],Mt=Lt[1],It=Object(j.useState)(-1),Ft=It[0],Jt=It[1],Rt=Object(j.useState)([]),Bt=Rt[0],Gt=Rt[1],Ut=Object(j.useState)(!0),Yt=Ut[0],Kt=Ut[1],qt=Object(j.useState)(!1),Vt=qt[0],Ht=qt[1];return Object(j.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===I.data.role?"getTicket":"getClientTicket","?id=").concat(B),{method:"GET",headers:{Authorization:JSON.parse(R)}}).then((function(e){return e.json()})).then((function(e){K(e.data),ce(ne(ne({},te),{},{requester_id:e.data.creator_id,raised_at:h()(e.data.raised_at).locale("id").format(),closed_at:null===e.data.closed_at?null:h()(e.data.closed_at).locale("id").format(),product_id:e.data.ticketable.product_id,pic_name:e.data.ticketable.pic_name,pic_contact:e.data.ticketable.pic_contact,location_id:e.data.ticketable.location_id,problem:e.data.ticketable.problem,incident_time:null===e.data.ticketable.original_incident_time?null:h()(e.data.ticketable.original_incident_time).locale("id").format(),files:e.data.ticketable.files,description:e.data.ticketable.description})),he(!1),0===e.data.assignment_operator_id?Je({id:Number(B),assignable_type:!0,assignable_id:null}):Je(ne(ne({},Fe),{},{assignable_type:"Engineer"===e.data.assignment_type,assignable_id:e.data.assignment_operator_id})),null===e.data.ticketable.inventory?ge(null):(xe({id:Number(B),inventory_id:e.data.ticketable.inventory.id,name:e.data.ticketable.inventory.mig_id}),ge(e.data.ticketable.inventory.model_inventory.asset_id)),Qe({id:Number(B),deadline:"-"===e.data.deadline?null:e.data.deadline}),"-"===e.data.deadline?ot(!1):ot(!0),"-"===e.data.deadline?jt(null):jt(-10),xt(ne(ne({},pt),{},{name:e.data.name}))})).then((function(){fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===I.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(R)}}).then((function(e){return e.json()})).then((function(e){X(e.data),W(!1)}))}))}),[ze,Ve,it,_t,ue,re,De,Ye,nt]),Object(j.useEffect)((function(){Kt(!0),fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===I.data.role?"getTicketLog":"getClientTicketLog","?id=").concat(B),{method:"GET",headers:{Authorization:JSON.parse(R)}}).then((function(e){return e.json()})).then((function(e){Gt(e.data.normal_logs),St(e.data.special_logs.filter((function(e){return"Note Khusus"===e.log_name}))),Kt(!1)}))}),[Ft,ue,ze,Ve,it]),Object(c.jsxs)(b.a,{dataProfile:I,sidemenu:F,tok:R,st:p.a,pathArr:G,children:[Object(c.jsx)("div",{className:" flex flex-col",children:Object(c.jsxs)("div",{className:" grid grid-cols-11 px-5",children:[Object(c.jsxs)("div",{className:" col-span-3 flex flex-col",children:[Object(c.jsxs)("div",{className:" flex flex-col mb-2 mr-2 shadow-md rounded-md bg-white p-5",children:[Object(c.jsxs)("div",{className:" flex flex-col mb-4",children:[Object(c.jsxs)("div",{className:" flex items-center justify-center mb-2",children:[Object(c.jsx)("div",{className:"mr-2",children:Object(c.jsx)(x.gb,{size:30,color:"#000000"})}),Object(c.jsx)("div",{children:Object(c.jsx)(v.a,{children:Y.name})})]}),Object(c.jsx)("div",{className:" flex items-center justify-center mb-4",children:Q?null:Object(c.jsx)("div",{children:Object(c.jsx)(v.c,{children:null===(t=H.ticket_types.filter((function(e){return e.id===Y.ticketable.product_type}))[0])||void 0===t?void 0:t.name})})}),Object(c.jsx)("div",{className:" flex justify-center items-center",children:1===I.data.role?Q?null:Object(c.jsxs)(g.a,{type:"default",onClick:function(){ae(!0)},children:[Object(c.jsx)("div",{className:" mr-1",children:Object(c.jsx)(x.w,{size:15,color:"#35763B"})}),"Ubah Tiket"]}):null})]}),Q?Object(c.jsx)("div",{className:" flex justify-center",children:Object(c.jsx)(l.a,{})}):Object(c.jsxs)("div",{className:" flex flex-col",children:[Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Diajukan Oleh:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.creator})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Lokasi:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.creator_location})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Tanggal Diajukan:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.raised_at})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Tanggal Selesai:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:null===Y.closed_at?"-":h()(Y.closed_at).locale("id").format("LL")})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Durasi Penyelesaian:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.resolved_times})]})]})]}),Object(c.jsxs)("div",{className:"flex flex-col my-2 mr-2 shadow-md rounded-md bg-white p-5",children:[Object(c.jsx)("div",{className:" mb-7",children:Object(c.jsx)(v.a,{children:"Detail Masalah"})}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Tipe Aset:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.ticketable.asset_type_name})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Terminal ID:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.ticketable.product_id})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"PIC:"}),Object(c.jsxs)("p",{className:" mb-0 text-gray-600",children:[""===Y.ticketable.pic_name?"-":Y.ticketable.pic_name," / ",Y.ticketable.pic_contact]})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Waktu Kejadian:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.ticketable.incident_time})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Lokasi Masalah:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.ticketable.location.full_location})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Deskripsi Kerusakan:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:Y.ticketable.description})]})]}),Object(c.jsxs)("div",{className:"flex flex-col my-2 mr-2 shadow-md rounded-md bg-white p-5",children:[Object(c.jsx)("div",{className:" mb-7",children:Object(c.jsx)(v.a,{children:"Bukti Kejadian"})}),0===Y.ticketable.files.length?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(i.a,{image:i.a.PRESENTED_IMAGE_SIMPLE})}):Object(c.jsx)("div",{className:" grid grid-cols-2",children:Y.ticketable.files.map((function(e,t){return Object(c.jsx)("a",{target:"_blank",href:e,children:Object(c.jsx)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2 cursor-pointer",children:Object(c.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""})})})}))})]}),Object(c.jsx)("div",{className:"flex items-center justify-center mb-2 mr-2 shadow-md rounded-md bg-white p-5",children:Vt?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):Object(c.jsx)("div",{children:Object(c.jsxs)(g.a,{type:"default",onClick:function(){Ht(!0),fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===I.data.role?"ticketExport":"clientTicketExport","?id=").concat(B),{method:"GET",headers:{Authorization:JSON.parse(R)}}).then((function(e){return e.blob()})).then((function(e){var t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t),c=document.createElement("a");c.href=n,c.download="".concat(Y.name,".pdf"),c.click(),setTimeout((function(){window.URL.revokeObjectURL(n)})),Ht(!1)}))},children:[Object(c.jsx)("div",{className:" mr-1",children:Object(c.jsx)(x.A,{size:15,color:"#35763B"})}),"Ekspor Tiket"]})})})]}),Object(c.jsxs)("div",{className:" col-span-8 flex flex-col",children:[Object(c.jsxs)("div",{className:" w-full flex justify-around mb-2 ml-2 shadow-md rounded-md bg-white p-5",children:[Object(c.jsxs)("div",{className:" w-4/12 pr-8 flex items-center justify-between mb-2",children:[Object(c.jsxs)("div",{className:" flex flex-col",children:[Object(c.jsx)("div",{className:"mb-2",children:Object(c.jsx)(v.c,{children:"Status"})}),Object(c.jsxs)("div",{className:" flex items-center",children:[Object(c.jsx)("div",{className:" mr-2",children:Object(c.jsx)(x.m,{size:25,color:"#35763B"})}),Object(c.jsx)("p",{className:" mb-0 text-base font-bold",children:Y.status_name})]})]}),7!==Y.status&&Object(c.jsxs)("div",{className:"dropdown dropdown-end",children:[Object(c.jsx)("div",{tabIndex:"1",className:" h-full flex justify-end items-start cursor-pointer text-lg font-bold",children:Object(c.jsx)("span",{className:"mb-0",children:"..."})}),Object(c.jsx)("div",{tabIndex:"1",className:" menu dropdown-content bg-backdrop p-3",children:Object(c.jsxs)("div",{className:" p-3 w-52 flex items-center bg-white rounded shadow hover:bg-red-100 text-overdue cursor-pointer",onClick:function(){ht(!0)},children:[Object(c.jsx)("div",{className:"mr-2",children:Object(c.jsx)(x.mb,{size:15,color:"#BF4A40"})}),Object(c.jsx)("p",{className:" mb-0",children:"Batalkan Tiket"})]})})]}),Object(c.jsx)(y.a,{title:"Pembatalan Tiket",visible:mt,onvisible:ht,onCancel:function(){ht(!1)},loading:vt,onOk:function(){gt(!0),fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===I.data.role?"cancelTicket":"cancelClientTicket"),{method:"PUT",headers:{Authorization:JSON.parse(R),"Content-Type":"application/json"},body:JSON.stringify(pt)}).then((function(e){return e.json()})).then((function(e){gt(!1),ht(!1),e.success?(xt({id:Number(B),notes:""}),Nt((function(e){return e+1})),d.a.success({message:"Tiket berhasil dibatalkan",duration:3})):e.success||d.a.error({message:e.message,duration:3})}))},data:pt,setdata:xt,ticketid:B})]}),Object(c.jsxs)("div",{className:" w-4/12 px-8 flex items-center justify-between mb-2",children:[Object(c.jsxs)("div",{className:" flex flex-col",children:[Object(c.jsx)("div",{className:"mb-2",children:Object(c.jsx)(v.c,{children:1===I.data.role?Y.assignment_type:"Engineer/Grup"})}),Q?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):0===Y.assignment_operator_id?1===I.data.role?Object(c.jsxs)("button",{className:" btn btn-sm bg-state2 border-state2 hover:bg-onhold hover:border-onhold px-6 py-0",onClick:function(){Ge(!0)},children:[Object(c.jsx)("div",{className:"mr-1",children:Object(c.jsx)(x.B,{size:15,color:"#ffffff"})}),"Assign Engineer"]}):Object(c.jsxs)("div",{className:"flex items-center",children:[Object(c.jsx)("div",{className:"mr-1 mb-1",children:Object(c.jsx)(x.D,{size:15,color:"#CCCCCC"})}),Object(c.jsx)(v.c,{children:"Belum di-assign"})]}):Object(c.jsxs)("div",{className:" flex items-center",children:[Object(c.jsx)("div",{className:" flex items-center",children:"Engineer"===Y.assignment_type?Object(c.jsx)("div",{className:" w-8 h-8 rounded-full mr-2",children:Object(c.jsx)("img",{src:""===Y.assignment_profile_image||"-"===Y.assignment_profile_image?"/image/staffTask.png":"".concat(Y.assignment_profile_image),className:" object-contain w-10 h-10",alt:""})}):Object(c.jsx)("div",{className:" mr-2",children:Object(c.jsx)(x.ib,{})})}),Object(c.jsx)("p",{className:" mb-0 text-base font-bold",children:Y.assignment_operator_name})]})]}),1===I.data.role?Q?null:7!==Y.status?0===Y.assignment_operator_id?null:Object(c.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){Ge(!0)},children:Object(c.jsx)(x.kb,{size:18,color:"#4D4D4D"})}):null:null]}),Object(c.jsxs)("div",{className:" w-4/12 pl-8 flex items-center justify-between mb-2",children:[Object(c.jsxs)("div",{className:" flex flex-col",children:[Object(c.jsx)("div",{className:" mb-2",children:Object(c.jsx)(v.c,{children:"Deadline"})}),Q?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):"-"===Y.deadline?1===I.data.role?Object(c.jsxs)("button",{className:" btn btn-sm bg-state2 border-state2 hover:bg-onhold hover:border-onhold px-6 py-0",onClick:function(){et(!0)},children:[Object(c.jsx)("div",{className:"mr-1",children:Object(c.jsx)(x.k,{size:15,color:"#ffffff"})}),"Tentukan Deadline"]}):Object(c.jsxs)("div",{className:"flex items-center",children:[Object(c.jsx)("div",{className:"mr-1 mb-1",children:Object(c.jsx)(x.D,{size:15,color:"#CCCCCC"})}),Object(c.jsx)(v.c,{children:"Belum ada deadline"})]}):Object(c.jsx)("div",{className:" flex items-center",children:Object(c.jsx)("p",{className:" mb-0 text-base font-bold",children:Y.deadline})})]}),1===I.data.role?Q?null:7!==Y.status?"-"===Y.deadline?null:Object(c.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){et(!0)},children:Object(c.jsx)(x.k,{size:18,color:"#4D4D4D"})}):null:null]})]}),Object(c.jsxs)("div",{className:"flex w-full",children:[Object(c.jsx)("div",{className:" w-6/12 mx-2",children:1===I.data.role?Object(c.jsxs)("div",{className:" flex w-full flex-col mt-2 shadow-md rounded-md bg-white p-5",children:[Object(c.jsxs)("div",{className:" flex items-center justify-between mb-5",children:[Object(c.jsx)(v.a,{children:"Detail Aset"}),null===Y.ticketable.inventory?null:Object(c.jsxs)("div",{className:"dropdown dropdown-end",children:[Object(c.jsx)("div",{tabIndex:"2",className:" h-full flex justify-end items-start cursor-pointer text-lg font-bold",children:Object(c.jsx)("span",{className:"mb-0",children:"..."})}),Object(c.jsxs)("div",{tabIndex:"2",className:" menu dropdown-content bg-backdrop p-3",children:[Object(c.jsx)("div",{className:" p-3 w-52 mb-4 flex items-center bg-white rounded shadow hover:bg-primary25 text-primary100 cursor-pointer",onClick:function(){Ne(!0)},children:Object(c.jsx)("p",{className:" mb-0",children:"Ganti Aset"})}),Object(c.jsx)("div",{className:" p-3 w-52 flex items-center bg-white rounded shadow hover:bg-primary25 text-primary100 cursor-pointer",onClick:function(){Se(!0)},children:Object(c.jsx)("p",{className:" mb-0",children:"Pisah Aset"})})]})]}),Object(c.jsx)(y.m,{title:"Pemisahan Item dengan Tiket",visible:we,onvisible:Se,onCancel:function(){Se(!1)},loading:Ee,onOk:function(){Ce(!0),fetch("https://boiling-thicket-46501.herokuapp.com/setItemTicket",{method:"PUT",headers:{Authorization:JSON.parse(R),"Content-Type":"application/json"},body:JSON.stringify(ne(ne({},pe),{},{inventory_id:null}))}).then((function(e){return e.json()})).then((function(e){Ce(!1),Se(!1),e.success?(xe({id:Number(B),inventory_id:null,name:""}),Me((function(e){return e+1})),d.a.success({message:"Tiket berhasil dibatalkan",duration:3})):e.success||d.a.error({message:e.message,duration:3})}))},data:pe,setdata:xe,ticketid:B})]}),null===Y.ticketable.inventory?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:" flex flex-col justify-center items-center mb-5",children:[Object(c.jsx)("div",{className:"w-52 h-52 mb-2",children:Object(c.jsx)("img",{src:"/image/emptyAssetTicket.png",className:" object-contain",alt:""})}),Object(c.jsx)("div",{className:" w-8/12 text-center",children:Object(c.jsx)("p",{className:" mb-0 text-gray-400",children:"Belum ada aset terhubung. Silakan hubungkan aset."})})]}),Object(c.jsx)("div",{className:" flex justify-center mb-5",children:Object(c.jsx)(g.a,{type:"primary",onClick:function(){Ne(!0)},children:"+ Hubungkan Aset"})})]}):Object(c.jsxs)("div",{className:" flex flex-col",children:[6===Y.status&&Object(c.jsxs)("div",{className:" flex bg-primary100 text-white rounded-md p-4 w-full mb-5",children:[Object(c.jsx)("div",{className:" flex items-center justify-center h-full mr-2",children:Object(c.jsx)(x.F,{size:20,color:"#ffffff"})}),Object(c.jsxs)("p",{className:" mb-0",children:["Berikut tampilan detail item yang di-closed pada tanggal ",Object(c.jsx)("strong",{children:null===Y.closed_at?"-":Y.closed_at})]})]}),Object(c.jsxs)("div",{className:"mb-8 flex flex-col items-center",children:[Object(c.jsx)(v.a,{children:null===(n=Y.ticketable)||void 0===n||null===(s=n.inventory)||void 0===s||null===(a=s.model_inventory)||void 0===a?void 0:a.name}),Object(c.jsx)(v.c,{children:null===(r=Y.ticketable)||void 0===r||null===(o=r.inventory)||void 0===o?void 0:o.mig_id})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Tipe Aset:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:null===(m=Y.ticketable)||void 0===m||null===(f=m.inventory)||void 0===f||null===(O=f.model_inventory)||void 0===O||null===(_=O.asset)||void 0===_?void 0:_.full_name})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"No Seri:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:null===(null===(N=Y.ticketable)||void 0===N||null===(k=N.inventory)||void 0===k?void 0:k.serial_number)?"-":null===(w=Y.ticketable)||void 0===w||null===(S=w.inventory)||void 0===S?void 0:S.serial_number})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Status Pemakaian:"}),Object(c.jsxs)("div",{children:[1===Y.ticketable.inventory.status_usage.id&&Object(c.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open",children:"In Used"}),2===Y.ticketable.inventory.status_usage.id&&Object(c.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed",children:"In Stock"}),3===Y.ticketable.inventory.status_usage.id&&Object(c.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue",children:"Replacement"})]})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Kondisi Aset:"}),Object(c.jsxs)("div",{children:[1===Y.ticketable.inventory.status_condition.id&&Object(c.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed",children:"Good"}),2===Y.ticketable.inventory.status_condition.id&&Object(c.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed",children:"Gray"}),3===Y.ticketable.inventory.status_condition.id&&Object(c.jsx)("div",{className:"inline-block rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue",children:"Bad"})]})]}),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Lokasi Item:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:null===(null===(T=Y.ticketable)||void 0===T||null===(E=T.inventory)||void 0===E?void 0:E.location)?"-":null===(C=Y.ticketable)||void 0===C||null===(P=C.inventory)||void 0===P?void 0:P.location})]}),Object(c.jsx)("hr",{}),Y.ticketable.inventory.additional_attributes.map((function(e,t){return Object(c.jsxs)("div",{className:"flex flex-col mb-5 ".concat(0===t?"mt-5":""),children:[Object(c.jsxs)(v.c,{children:[e.name,":"]}),Object(c.jsx)("p",{className:"mb-0 text-sm",children:"dropdown"===e.data_type||"checkbox"===e.data_type||"date"===e.data_type?Object(c.jsxs)(c.Fragment,{children:["dropdown"===e.data_type&&Object(c.jsx)(c.Fragment,{children:e.value.opsi[e.value.default]}),"checkbox"===e.data_type&&Object(c.jsx)(c.Fragment,{children:e.value.opsi.filter((function(t,n){return e.value.default.includes(n)})).join(", ")}),"date"===e.data_type&&Object(c.jsx)(c.Fragment,{children:h()(e.value).locale("id").format("LL")})]}):Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:e.value})})]},t)})),Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)(v.c,{children:"Deskripsi:"}),Object(c.jsx)("p",{className:" mb-0 text-gray-600",children:null===(null===(D=Y.ticketable)||void 0===D||null===(A=D.inventory)||void 0===A?void 0:A.deskripsi)?"-":null===(z=Y.ticketable)||void 0===z||null===(M=z.inventory)||void 0===M?void 0:M.deskripsi})]})]})]}):Object(c.jsxs)("div",{className:" shadow-md rounded-md bg-white p-5 my-2 ml-2",children:[Object(c.jsxs)("div",{className:" flex items-center justify-between mb-5",children:[Object(c.jsx)(v.a,{children:"Catatan"}),Object(c.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){At(!0)},children:Object(c.jsx)(x.T,{size:25,color:"#35763B"})})]}),zt?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):0===wt.length?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(i.a,{image:i.a.PRESENTED_IMAGE_SIMPLE})}):wt.map((function(e,t){return Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)("p",{className:" mb-3 line-clamp-6 font-light",children:e.description}),Object(c.jsxs)("div",{className:"flex items-center justify-between",children:[Object(c.jsxs)("div",{className:" flex",children:[Object(c.jsx)("div",{className:" w-5 h-5 rounded-full mr-2",children:Object(c.jsx)("img",{src:"/image/staffTask.png",className:" object-contain w-5 h-5",alt:""})}),Object(c.jsx)(v.e,{color:"green",children:e.causer.name})]}),Object(c.jsx)("div",{children:Object(c.jsx)(v.c,{children:h()(e.created_at).locale("id").format("LL, LT")})})]})]})}))]})}),Object(c.jsxs)("div",{className:"flex flex-col w-6/12",children:[1===I.data.role&&Object(c.jsxs)("div",{className:" shadow-md rounded-md bg-white p-5 my-2 ml-2",children:[Object(c.jsxs)("div",{className:" flex items-center justify-between mb-5",children:[Object(c.jsx)(v.a,{children:"Catatan"}),Object(c.jsx)("div",{className:" h-full flex justify-end items-start cursor-pointer",onClick:function(){At(!0)},children:Object(c.jsx)(x.T,{size:25,color:"#35763B"})})]}),zt?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{})}):0===wt.length?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(i.a,{image:i.a.PRESENTED_IMAGE_SIMPLE})}):wt.map((function(e,t){return Object(c.jsxs)("div",{className:" flex flex-col mb-5",children:[Object(c.jsx)("p",{className:" mb-3 line-clamp-6 font-light",children:e.description}),Object(c.jsxs)("div",{className:"flex items-center justify-between",children:[Object(c.jsxs)("div",{className:" flex",children:[Object(c.jsx)("div",{className:" w-5 h-5 rounded-full mr-2",children:Object(c.jsx)("img",{src:"/image/staffTask.png",className:" object-contain w-5 h-5",alt:""})}),Object(c.jsx)(v.e,{color:"green",children:e.causer.name})]}),Object(c.jsx)("div",{children:Object(c.jsx)(v.c,{children:h()(e.created_at).locale("id").format("LL, LT")})})]})]})}))]}),Object(c.jsx)(y.l,{title:"Catatan Baru",visible:Dt,onvisible:At,onCancel:function(){At(!1)},loading:zt,onOk:function(){Mt(!0),fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===I.data.role?"addNoteTicket":"clientAddNoteTicket"),{method:"POST",headers:{Authorization:JSON.parse(R),"Content-Type":"application/json"},body:JSON.stringify(Et)}).then((function(e){return e.json()})).then((function(e){Mt(!1),At(!1),e.success?(Ct({id:Number(B),notes:""}),Jt((function(e){return e+1})),d.a.success({message:"Note berhasil ditambahkan",duration:3})):e.success||d.a.error({message:e.message,duration:3})}))},datanoteticket:Et,setdatanoteticket:Ct,ticketid:B}),Object(c.jsxs)("div",{className:"shadow-md rounded-md bg-white p-5 mt-2 ml-2",children:[Object(c.jsx)("div",{className:" flex items-center justify-between mb-5",children:Object(c.jsx)(v.a,{children:"Aktivitas"})}),Yt?Object(c.jsx)("div",{className:" flex justify-center",children:Object(c.jsx)(l.a,{})}):0===Bt.length?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(i.a,{image:i.a.PRESENTED_IMAGE_SIMPLE})}):Bt.map((function(e,t){return Object(c.jsxs)("div",{className:" flex flex-col mb-4",children:[Object(c.jsx)("p",{className:" mb-2 line-clamp-6 font-medium",children:e.log_name}),Object(c.jsxs)("div",{className:"flex items-center justify-between",children:[Object(c.jsxs)("div",{className:" flex",children:[Object(c.jsx)("div",{className:" w-5 h-5 rounded-full mr-2",children:Object(c.jsx)("img",{src:"-"===e.causer.profile_image?"/image/staffTask.png":e.causer.profile_image,className:" object-contain w-5 h-5",alt:""})}),Object(c.jsx)(v.e,{color:"green",children:e.causer.name})]}),Object(c.jsx)("div",{children:Object(c.jsx)(v.c,{children:h()(e.created_at).locale("id").format("LL, LT")})})]})]})}))]})]})]})]})]})}),1===I.data.role&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(L,{title:"Hubungkan Aset",visible:_e,onClose:function(){Ne(!1)},buttonOkText:"Hubungkan Aset",initProps:R,onvisible:Ne,refresh:ze,setrefresh:Me,setrefreshclosed:Ae,ticketid:B,datapayload:pe,setdatapayload:xe,selectedassettype:ve,setselectedassettype:ge}),Object(c.jsx)(J,{title:"",visible:Be,onClose:function(){Ge(!1)},buttonOkText:"Simpan",initProps:R,onvisible:Ge,refresh:Ve,setrefresh:He,setrefreshclosed:Ke,ticketid:B,datapayload:Fe,setdatapayload:Je}),Object(c.jsx)(q,{title:"Deadline",visible:Ze,onClose:function(){et(!1)},buttonOkText:"Simpan",initProps:R,onvisible:et,refresh:it,setrefresh:at,setrefreshclosed:ct,ticketid:B,datapayload:$e,setdatapayload:Qe,showdatetime:rt,setshowdatetime:ot,datevalue:ut,setdatevalue:jt}),Object(c.jsx)(ee,{title:"Ubah Tiket",visible:ie,onClose:function(){ae(!1)},buttonOkText:"Simpan Perubahan Tiket",initProps:R,onvisible:ae,refreshtickets:ue,setrefreshtickets:je,setrefreshclosed:oe,dataprofile:I,datapayload:te,setdatapayload:ce,ticketid:B,displaydata:Y,disabledsubmit:me,setdisabledsubmit:he})]})]})}}},[["PbJr",0,2,18,30,1,3,4,5,6,7,8,11,13,14,17,16,15,19,20,21,23,24,25,28,33]]]);