_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[136],{hf16:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.responsiveMap=t.responsiveArray=t.default=void 0;var c=n(a("lSNA")),r=n(a("pVnL"));t.responsiveArray=["xxl","xl","lg","md","sm","xs"];var i={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};t.responsiveMap=i;var s=new Map,o=-1,l={},d={matchHandlers:{},dispatch:function(e){return l=e,s.forEach((function(e){return e(l)})),s.size>=1},subscribe:function(e){return s.size||this.register(),o+=1,s.set(o,e),e(l),o},unsubscribe:function(e){s.delete(e),s.size||this.unregister()},unregister:function(){var e=this;Object.keys(i).forEach((function(t){var a=i[t],n=e.matchHandlers[a];null===n||void 0===n||n.mql.removeListener(null===n||void 0===n?void 0:n.listener)})),s.clear()},register:function(){var e=this;Object.keys(i).forEach((function(t){var a=i[t],n=function(a){var n=a.matches;e.dispatch((0,r.default)((0,r.default)({},l),(0,c.default)({},t,n)))},s=window.matchMedia(a);s.addListener(n),e.matchHandlers[a]={mql:s,listener:n},n(s)}))}};t.default=d},jaQ5:function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return k}));var n=a("rmht"),c=a.n(n),r=a("wXtC"),i=a.n(r),s=a("FAat"),o=a.n(s),l=a("iJl9"),d=a.n(l),u=a("nKUr"),m=a("l+S1"),h=a("wd/R"),j=a.n(h),f=(a("YFqc"),a("20a2")),p=a("q1tI"),b=a("ZXdF"),x=a("ckOl"),O=a("qe3g"),_=a.n(O),g=a("D1C7"),v=a("o8C9"),w=a("8TZf"),k=!0;t.default=function(e){var t=e.dataProfile,a=e.sidemenu,n=e.initProps,r=Object(f.useRouter)(),s=r.pathname.split("/").slice(1);s.splice(1,2),s.push("Riwayat Tiket");var l=Object(p.useState)({current_page:"",data:[],first_page_url:"",from:null,last_page:null,last_page_url:"",next_page_url:"",path:"",per_page:null,prev_page_url:null,to:null,total:null}),h=l[0],O=l[1],k=Object(p.useState)([]),S=k[0],y=k[1],N=Object(p.useState)({status_ticket:[{id:0,name:""}],ticket_types:[],incident_type:[],companies:{data:[{id:0,title:"",key:"",value:0}]},ticket_task_types:[],resolved_times:[]}),C=N[0],T=N[1],E=Object(p.useState)(!1),F=E[0],I=E[1],P=Object(p.useState)(!1),z=(P[0],P[1],Object(p.useState)(1)),A=z[0],R=z[1],q=Object(p.useState)(10),D=q[0],J=(q[1],Object(p.useState)({sort_by:"",sort_type:""})),L=J[0],M=J[1],B=Object(p.useState)([]),K=(B[0],B[1]),X=Object(p.useState)(""),G=X[0],H=X[1],V=Object(p.useState)(""),Y=V[0],Q=V[1],Z=Object(p.useState)(""),U=Z[0],W=Z[1],$=Object(p.useState)(""),ee=$[0],te=$[1],ae=Object(p.useState)(""),ne=ae[0],ce=ae[1],re=Object(p.useState)(""),ie=re[0],se=re[1],oe=Object(p.useState)(""),le=oe[0],de=oe[1],ue=Object(p.useState)(""),me=ue[0],he=ue[1],je=Object(p.useState)(!1),fe=(je[0],je[1],Object(p.useState)(!1)),pe=(fe[0],fe[1],Object(p.useState)(-1)),be=(pe[0],pe[1],Object(p.useState)({id:null,name:""})),xe=(be[0],be[1],Object(p.useState)(!1)),Oe=(xe[0],xe[1],Object(p.useState)(!1)),_e=(Oe[0],Oe[1],Object(p.useState)(-1)),ge=(_e[0],_e[1],[{title:"No",dataIndex:"num",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:h.from+a})}}},{title:"No. Tiket",dataIndex:"id",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:t.full_name})}},sorter:function(e,t){return e.id>t.id}},{title:"Tipe Tiket",dataIndex:"type",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:t.type_name})}},sorter:function(e,t){return e.type.name.localeCompare(t.type.name)}},{title:"Diajukan Oleh",dataIndex:"requested_by",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:t.task.creator.name})}}},{title:"Lokasi Problem",dataIndex:"location_id",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:t.task.location.full_location})}}},{title:"Tanggal Pengajuan",dataIndex:"raised_at",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:t.raised_at})}},sorter:function(e,t){return e.raised_at.localeCompare(t.raised_at)}},{title:"Di-assign Ke",dataIndex:"assignable",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:0===t.task.users.length?Object(u.jsxs)("div",{className:" flex items-center bg-onhold bg-opacity-10",children:[Object(u.jsx)("div",{className:" mr-2",children:Object(u.jsx)(x.ib,{})}),Object(u.jsx)("div",{children:"Belum di-assign"})]}):Object(u.jsx)(u.Fragment,{children:t.task.users[0].name})})}}},{title:"Durasi Selesai",dataIndex:"resolved_times",render:function(e,t,a){return{children:Object(u.jsx)(u.Fragment,{children:t.resolved_times})}},sorter:function(e,t){return e.resolved_times.localeCompare(t.resolved_times)}}]);return Object(p.useEffect)((function(){I(!0),fetch("".concat("https://boiling-thicket-46501.herokuapp.com","/getClosedTickets?page=").concat(A,"&rows=").concat(D,"&ticket_id=").concat(G,"&from=").concat(U,"&to=").concat(ee,"&location_id=").concat(ne,"&from_res=").concat(ie,"&to_res=").concat(me,"&sort_by=").concat(L.sort_by,"&sort_type=").concat(L.sort_type),{method:"GET",headers:{Authorization:JSON.parse(n)}}).then((function(e){return e.json()})).then((function(e){O(e.data),y(e.data.data),K(e.data.data),I(!1)}))}),[]),Object(p.useEffect)((function(){fetch("".concat("https://boiling-thicket-46501.herokuapp.com","/").concat(1===t.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(n)}}).then((function(e){return e.json()})).then((function(e){T(e.data)}))}),[]),Object(u.jsx)(g.a,{dataProfile:t,sidemenu:a,tok:n,st:_.a,pathArr:s,children:Object(u.jsx)("div",{className:" flex flex-col px-5",children:Object(u.jsxs)("div",{className:"flex flex-col shadow-md rounded-lg bg-white p-5 mb-6 mx-3",children:[Object(u.jsxs)("div",{className:"flex items-center mb-5",children:[Object(u.jsx)("div",{className:"mr-2 cursor-pointer flex items-center",onClick:function(){r.push("/tickets")},children:Object(u.jsx)(x.i,{size:15,color:"#000000"})}),Object(u.jsx)("div",{className:" mr-2 flex items-center",children:Object(u.jsx)(w.a,{children:"Riwayat Tiket"})})]}),Object(u.jsxs)("div",{className:" flex items-center mb-5",children:[Object(u.jsx)("div",{className:"mx-1 w-2/12",children:Object(u.jsx)(d.a,{value:""===G?null:G,style:{width:"100%"},placeholder:"Kata Kunci..",allowClear:!0,onChange:function(e){""===e.target.value?H(""):H(e.target.value)}})}),Object(u.jsx)("div",{className:"mx-1 w-2/12",children:Object(u.jsx)(o.a,{value:""===Y?null:Y,placeholder:"Semua Tipe Tiket",style:{width:"100%"},allowClear:!0,name:"task_type",onChange:function(e){Q("undefined"===typeof e?"":e)},children:C.ticket_types.map((function(e,t){return Object(u.jsx)(o.a.Option,{value:e.id,children:e.name},t)}))})}),Object(u.jsx)("div",{className:" w-3/12 mx-1",children:Object(u.jsx)(i.a.RangePicker,{style:{width:"100%"},allowEmpty:!0,className:"datepickerStatus",value:""===U?[null,null]:[j()(U),j()(ee)],onChange:function(e,t){W(t[0]),te(t[1])}})}),Object(u.jsx)("div",{className:" mx-1 w-5/12",children:Object(u.jsx)(c.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(u.jsx)(m.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){ce("undefined"===typeof e?"":e)},treeData:[C.companies],treeDefaultExpandAll:!0,value:""===ne?null:ne})}),Object(u.jsx)("div",{className:"mx-1 w-2/12",children:Object(u.jsx)(o.a,{value:""===le?null:le,placeholder:"Durasi Selesai",style:{width:"100%"},allowClear:!0,name:"resolved_times",onChange:function(e,t){"undefined"===typeof e?(se(""),he(""),de("")):(se(t.from),he(t.to),de(e))},children:C.resolved_times.map((function(e,t){return null===e.from?Object(u.jsx)(o.a.Option,{value:1,from:"",to:e.to,children:"Kurang dari 3 jam"},t):10800===e.from?Object(u.jsx)(o.a.Option,{value:2,from:e.from,to:e.to,children:"3 - 12 jam"},t):43200===e.from?Object(u.jsx)(o.a.Option,{value:3,from:e.from,to:e.to,children:"12 - 30 jam"},t):108e3===e.from?Object(u.jsx)(o.a.Option,{value:4,from:e.from,to:e.to,children:"30 jam - 3 hari"},t):259200===e.from?Object(u.jsx)(o.a.Option,{value:5,from:e.from,to:"",children:"Lebih dari 3 hari"},t):void 0}))})}),Object(u.jsx)("div",{className:"mx-1 w-1/12",children:Object(u.jsx)(b.a,{type:"primary",onClick:function(){I(!0),fetch("".concat("https://boiling-thicket-46501.herokuapp.com","/getClosedTickets?page=").concat(A,"&rows=").concat(D,"&ticket_id=").concat(G,"&from=").concat(U,"&to=").concat(ee,"&location_id=").concat(ne,"&from_res=").concat(ie,"&to_res=").concat(me,"&sort_by=").concat(L.sort_by,"&sort_type=").concat(L.sort_type),{method:"GET",headers:{Authorization:JSON.parse(n)}}).then((function(e){return e.json()})).then((function(e){O(e.data),y(e.data.data),K(e.data.data),I(!1)}))},children:"Cari"})})]}),Object(u.jsx)("div",{children:Object(u.jsx)(v.g,{dataSource:S,setDataSource:y,columns:ge,loading:F,setpraloading:I,pageSize:D,total:h.total,initProps:n,setpage:R,pagefromsearch:A,setdataraw:O,setsorting:M,sorting:L,searching:G,tickettype:Y,fromdate:U,todate:ee,location:ne,fromres:ie,tores:me})})]})})})}},"l+S1":function(e,t,a){"use strict";var n=a("VTBJ"),c=a("q1tI"),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},i=a("6VBw"),s=function(e,t){return c.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:r}))};s.displayName="SearchOutlined";t.a=c.forwardRef(s)},s3BY:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets/histories",function(){return a("jaQ5")}])}},[["s3BY",0,2,19,1,3,4,5,6,7,8,9,12,14,17,18,20,21,23,26]]]);