_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[135],{"1W/9":function(e,t,c){"use strict";var n=c("1OyB"),s=c("vuIU"),i=c("Ji7U"),a=c("LK+K"),l=c("U8pU"),r=c("q1tI"),o=c("wgJM"),d=c("QC+M"),j=c("MNnm"),u=c("qx4F");var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};var c=t.element,n=void 0===c?document.body:c,s={},i=Object.keys(e);return i.forEach((function(e){s[e]=n.style[e]})),i.forEach((function(t){n.style[t]=e[t]})),s};var m={},h=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",c=new RegExp("".concat(t),"g"),n=document.body.className;if(e){if(!c.test(n))return;return b(m),m={},void(document.body.className=n.replace(c,"").trim())}var s=Object(u.a)();if(s&&(m=b({position:"relative",width:"calc(100% - ".concat(s,"px)")}),!c.test(n))){var i="".concat(n," ").concat(t);document.body.className=i.trim()}}},x=c("KQm4"),f=[],p="ant-scrolling-effect",O=new RegExp("".concat(p),"g"),v=0,g=new Map,N=function e(t){var c=this;Object(n.a)(this,e),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var e;return null===(e=c.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=f.find((function(e){return e.target===c.lockTarget}));t&&c.unLock(),c.options=e,t&&(t.options=e,c.lock())},this.lock=function(){var e;if(!f.some((function(e){return e.target===c.lockTarget})))if(f.some((function(e){var t,n=e.options;return(null===n||void 0===n?void 0:n.container)===(null===(t=c.options)||void 0===t?void 0:t.container)})))f=[].concat(Object(x.a)(f),[{target:c.lockTarget,options:c.options}]);else{var t=0,n=(null===(e=c.options)||void 0===e?void 0:e.container)||document.body;(n===document.body&&window.innerWidth-document.documentElement.clientWidth>0||n.scrollHeight>n.clientHeight)&&(t=Object(u.a)());var s=n.className;if(0===f.filter((function(e){var t,n=e.options;return(null===n||void 0===n?void 0:n.container)===(null===(t=c.options)||void 0===t?void 0:t.container)})).length&&g.set(n,b({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:n})),!O.test(s)){var i="".concat(s," ").concat(p);n.className=i.trim()}f=[].concat(Object(x.a)(f),[{target:c.lockTarget,options:c.options}])}},this.unLock=function(){var e,t=f.find((function(e){return e.target===c.lockTarget}));if(f=f.filter((function(e){return e.target!==c.lockTarget})),t&&!f.some((function(e){var c,n=e.options;return(null===n||void 0===n?void 0:n.container)===(null===(c=t.options)||void 0===c?void 0:c.container)}))){var n=(null===(e=c.options)||void 0===e?void 0:e.container)||document.body,s=n.className;O.test(s)&&(b(g.get(n),{element:n}),g.delete(n),n.className=n.className.replace(O,"").trim())}},this.lockTarget=v++,this.options=t},y=0,k=Object(j.a)();var _={},w=function(e){if(!k)return null;if(e){if("string"===typeof e)return document.querySelectorAll(e)[0];if("function"===typeof e)return e();if("object"===Object(l.a)(e)&&e instanceof window.HTMLElement)return e}return document.body},C=function(e){Object(i.a)(c,e);var t=Object(a.a)(c);function c(e){var s;return Object(n.a)(this,c),(s=t.call(this,e)).container=void 0,s.componentRef=r.createRef(),s.rafId=void 0,s.scrollLocker=void 0,s.renderComponent=void 0,s.updateScrollLocker=function(e){var t=(e||{}).visible,c=s.props,n=c.getContainer,i=c.visible;i&&i!==t&&k&&w(n)!==s.scrollLocker.getContainer()&&s.scrollLocker.reLock({container:w(n)})},s.updateOpenCount=function(e){var t=e||{},c=t.visible,n=t.getContainer,i=s.props,a=i.visible,l=i.getContainer;a!==c&&k&&w(l)===document.body&&(a&&!c?y+=1:e&&(y-=1)),("function"===typeof l&&"function"===typeof n?l.toString()!==n.toString():l!==n)&&s.removeCurrentContainer()},s.attachToParent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||s.container&&!s.container.parentNode){var t=w(s.props.getContainer);return!!t&&(t.appendChild(s.container),!0)}return!0},s.getContainer=function(){return k?(s.container||(s.container=document.createElement("div"),s.attachToParent(!0)),s.setWrapperClassName(),s.container):null},s.setWrapperClassName=function(){var e=s.props.wrapperClassName;s.container&&e&&e!==s.container.className&&(s.container.className=e)},s.removeCurrentContainer=function(){var e,t;null===(e=s.container)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(s.container)},s.switchScrollingEffect=function(){1!==y||Object.keys(_).length?y||(b(_),_={},h(!0)):(h(),_=b({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},s.scrollLocker=new N({container:w(e.getContainer)}),s}return Object(s.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Object(o.a)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visible,c=e.getContainer;k&&w(c)===document.body&&(y=t&&y?y-1:y),this.removeCurrentContainer(),o.a.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,t=e.children,c=e.forceRender,n=e.visible,s=null,i={getOpenCount:function(){return y},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(c||n||this.componentRef.current)&&(s=r.createElement(d.a,{getContainer:this.getContainer,ref:this.componentRef},t(i))),s}}]),c}(r.Component);t.a=C},DboY:function(e,t,c){"use strict";c.r(t),c.d(t,"__N_SSP",(function(){return M}));var n=c("rmht"),s=c.n(n),i=c("wXtC"),a=c.n(i),l=c("FAat"),r=c.n(l),o=c("iJl9"),d=c.n(o),j=c("kEgK"),u=c.n(j),b=c("MM9K"),m=c.n(b),h=c("nKUr"),x=c("20a2"),f=c("q1tI"),p=c("l+S1"),O=c("2Sck"),v=c("wd/R"),g=c.n(v),N=c("g6Xq"),y=c.n(N),k=c("VXtC"),_=c("m0r1"),w=c("pCoS"),C=c("T+/+"),S=c("a3/r"),T=c("6GDB"),E=c("spIA"),P=c("rePB"),D=c("MX0m"),A=c.n(D),F=c("8mU3"),I=(c("yncA"),c("JmJJ")),z=c.n(I);function L(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function J(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?L(Object(c),!0).forEach((function(t){Object(P.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):L(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var R=function(e){var t=e.title,c=e.visible,n=e.onvisible,s=(e.onClose,e.buttonOkText),i=(e.disabled,e.initProps),l=(e.refreshtickets,e.setrefreshtickets,e.dataprofile,Object(f.useState)({group:null,engineer:null,type:null,from:"",to:"",core_attributes:[1,1,1,1,1,1,1,1,1],secondary_attributes:[1,1,1,1,1,1,1,1]})),o=l[0],d=l[1],j=Object(f.useState)(!1),u=j[0],b=(j[1],Object(f.useState)([])),x=b[0],O=b[1],v=Object(f.useState)(!1),N=v[0],y=v[1],_=Object(f.useState)([]),w=_[0],S=_[1],T=Object(f.useState)(!1),E=T[0],P=T[1],D=Object(f.useState)([1,2,3,4,5,6,7,8]),I=D[0],L=(D[1],Object(f.useState)([1,2,3,4,5,6,7,8])),R=L[0],M=L[1],B=Object(f.useState)([1,2,3,4,5,6,7]),G=B[0],K=(B[1],Object(f.useState)([1,2,3,4,5,6,7])),U=K[0],W=K[1],Y=Object(f.useState)(!1),X=Y[0],q=Y[1],H=Object(f.useState)(-1),Q=H[0],V=H[1];return Object(f.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getFilterGroups",{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){S(e.data)}))}),[]),Object(f.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getFilterUsers?type=".concat(1),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){O(e.data)}))}),[]),Object(f.useEffect)((function(){!1===o.core_attributes.every((function(e){return 0===e}))?q(!1):q(!0)}),[Q]),Object(h.jsx)(F.a,{title:t,visible:c,onClose:function(){d({group:null,engineer:null,type:null,from:"",to:"",core_attributes:[1,1,1,1,1,1,1,1,1],secondary_attributes:[1,1,1,1,1,1,1,1]}),n(!1)},buttonOkText:s,onClick:function(){console.log(o),fetch("https://boiling-thicket-46501.herokuapp.com/ticketsExport?group=".concat(null===o.group?"":o.group,"&engineer=").concat(null===o.engineer?"":o.engineer,"&type=").concat(null===o.type?null:o.type,"&from=").concat(o.from,"&to=").concat(o.to,"&core_attributes=[").concat(o.core_attributes,"]&secondary_attributes=[").concat(o.secondary_attributes,"]&is_history=0"),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.blob()})).then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(t),n=document.createElement("a");n.href=c,n.download="".concat(g()(new Date).locale("id").format("L"),"-").concat(g()(new Date).locale("id").format("LT"),".xlsx"),n.click(),setTimeout((function(){window.URL.revokeObjectURL(c)}))}))},disabled:X,children:u?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{})}):Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("div",{className:"mb-6",children:Object(h.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(h.jsx)("div",{className:"mb-6",children:Object(h.jsx)(C.b,{children:"Pilih Filter:"})}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(C.c,{children:"Rentang Waktu"})}),Object(h.jsx)("div",{className:" mb-2 flex",children:Object(h.jsx)(a.a.RangePicker,{style:{width:"100%"},allowClear:!0,className:"datepickerStatus",onChange:function(e,t){""===t[0]&&""===t[1]?d(J(J({},o),{},{from:"",to:""})):d(J(J({},o),{},{from:g()(t[0]).locale("id").format("YYYY-MM-DD"),to:g()(t[1]).locale("id").format("YYYY-MM-DD")}))}})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(C.c,{children:"Grup"})}),Object(h.jsx)("div",{className:" mb-2 flex",children:Object(h.jsx)(r.a,{style:{width:"100%"},placeholder:"Nama Grup...",suffixIcon:Object(h.jsx)(p.a,{}),showArrow:!0,allowClear:!0,onChange:function(e,t){d(J(J({},o),{},{group:"undefined"===typeof e?null:Number(e)}))},showSearch:!0,optionFilterProp:"children",notFoundContent:E?Object(h.jsx)(m.a,{size:"small"}):null,onSearch:function(e){P(!0),fetch("https://boiling-thicket-46501.herokuapp.com/getFilterGroups?name=".concat(e),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){S(e.data),P(!1)}))},children:w.map((function(e,t){return Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-2",children:Object(h.jsx)(k.ib,{})}),Object(h.jsx)("div",{children:e.name})]})},t)}))})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(C.c,{children:"Engineer"})}),Object(h.jsx)("div",{className:" mb-2 flex",children:Object(h.jsx)(r.a,{style:{width:"100%"},placeholder:"Nama Engineer...",suffixIcon:Object(h.jsx)(p.a,{}),showArrow:!0,allowClear:!0,onChange:function(e,t){d(J(J({},o),{},{engineer:"undefined"===typeof e?null:Number(e)}))},showSearch:!0,optionFilterProp:"children",notFoundContent:N?Object(h.jsx)(m.a,{size:"small"}):null,onSearch:function(e){y(!0),fetch("https://boiling-thicket-46501.herokuapp.com/getFilterUsers?type=".concat(1,"&name=",e),{method:"GET",headers:{Authorization:JSON.parse(i)}}).then((function(e){return e.json()})).then((function(e){O(e.data),y(!1)}))},children:x.map((function(e,t){return Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-7 h7 rounded-full",children:Object(h.jsx)("img",{src:"-"===e.profile_image?"/image/stafftask.png":e.profile_image,className:" object-contain",alt:""})}),Object(h.jsx)("div",{children:e.name})]})},t)}))})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:"jsx-1995394191 flex items-center justify-between mb-2",children:[Object(h.jsxs)("div",{className:"jsx-1995394191 flex",children:[Object(h.jsx)(C.c,{children:"Pilih Parameter Detail Tiket"}),Object(h.jsx)("span",{className:"jsx-1995394191 core"})]}),Object(h.jsx)("div",{onClick:function(){M(I);d(J(J({},o),{},{core_attributes:[1,1,1,1,1,1,1,1,1]}))},className:"jsx-1995394191",children:Object(h.jsx)(C.e,{color:"green",cursor:"pointer",children:"Pilih Semua"})}),Object(h.jsx)(A.a,{id:"1995394191",children:[".core.jsx-1995394191::before{content:'*';color:red;}"]})]}),Object(h.jsx)("div",{className:"mb-2 flex",children:Object(h.jsx)(z.a.Group,{onChange:function(e){M(e);var t=[0,0,0,0,0,0,0,0,0].map((function(t,c){return e.includes(c)?1:0}));d(J(J({},o),{},{core_attributes:t})),V((function(e){return e+1}))},value:R,children:Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[0],children:"No Tiket"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[1],children:"Nama Pembuat"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[2],children:"Lokasi Pembuatan Tiket"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[3],children:"Tanggal Diajukan"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[4],children:"Tanggal Ditutup"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[5],children:"Durasi Pengerjaan"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[6],children:"Nama Engineer"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:I[7],children:"Status"})})]})})})]}),Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsx)("div",{className:"flex mb-2",children:Object(h.jsx)(C.c,{children:"Jenis Tiket"})}),Object(h.jsx)(r.a,{allowClear:!0,placeholder:"Pilih Jenis Ticket",style:{width:"100%"},onChange:function(e){d(J(J({},o),{},{type:"undefined"===typeof e?null:e,secondary_attributes:[1,1,1,1,1,1,1,1]})),W(G)},children:Object(h.jsx)(r.a.Option,{value:1,children:"Incident"})})]}),null===o.type?Object(h.jsx)("div",{children:Object(h.jsx)(C.c,{children:"Jika Jenis Tiket tidak dipilih, maka akan menampilkan semua parameter detail masalah"})}):Object(h.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)(C.c,{children:"Pilih Parameter Detail Masalah"})}),Object(h.jsx)("div",{onClick:function(){W(G);d(J(J({},o),{},{secondary_attributes:[1,1,1,1,1,1,1,1]}))},children:Object(h.jsx)(C.e,{color:"green",cursor:"pointer",children:"Pilih Semua"})})]}),Object(h.jsx)("div",{className:"mb-2 flex",children:Object(h.jsx)(z.a.Group,{onChange:function(e){W(e);var t=[0,0,0,0,0,0,0,0].map((function(t,c){return e.includes(c)?1:0}));d(J(J({},o),{},{secondary_attributes:t}))},value:U,children:Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:G[0],children:"Jenis Aset"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:G[1],children:"MIG ID Aset"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:G[2],children:"Terminal ID"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:G[3],children:"Nama PIC"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:G[4],children:"Kontak PIC"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:G[5],children:"Waktu Kejadian"})}),Object(h.jsx)("div",{className:"mb-1",children:Object(h.jsx)(z.a,{value:G[6],children:"Deskripsi Kerusakan"})})]})})})]})]})})};_.f.register(_.a,_.p,_.e,_.j,_.i,_.c,_.l);var M=!0;t.default=function(e){var t,c,n,i,l,o,j,b,v=e.dataProfile,N=e.sidemenu,_=e.initProps,P=Object(x.useRouter)(),D=P.pathname.split("/").slice(1),A=Object(f.useState)([]),F=A[0],I=A[1],z=Object(f.useState)(!0),L=z[0],J=z[1],M=Object(f.useState)([]),B=M[0],G=M[1],K=Object(f.useState)(""),U=K[0],W=K[1],Y=Object(f.useState)(!1),X=Y[0],q=Y[1],H=Object(f.useState)(!1),Q=(H[0],H[1],Object(f.useState)(-1)),V=Q[0],$=Q[1],Z=Object(f.useState)(!1),ee=Z[0],te=Z[1],ce=Object(f.useState)([]),ne=ce[0],se=ce[1],ie=Object(f.useState)({current_page:"",data:[],first_page_url:"",from:null,last_page:null,last_page_url:"",next_page_url:"",path:"",per_page:null,prev_page_url:null,to:null,total:null}),ae=ie[0],le=ie[1],re=Object(f.useState)({status_ticket:[{id:0,name:""}],ticket_types:[],incident_type:[],companies:{data:[{id:0,title:"",key:"",value:0}]},ticket_task_types:[],resolved_times:[]}),oe=re[0],de=re[1],je=Object(f.useState)(!1),ue=je[0],be=je[1],me=Object(f.useState)(1),he=me[0],xe=me[1],fe=Object(f.useState)(10),pe=fe[0],Oe=(fe[1],Object(f.useState)({sort_by:"",sort_type:""})),ve=Oe[0],ge=Oe[1],Ne=Object(f.useState)([]),ye=(Ne[0],Ne[1]),ke=Object(f.useState)(""),_e=ke[0],we=ke[1],Ce=Object(f.useState)(""),Se=Ce[0],Te=Ce[1],Ee=Object(f.useState)(""),Pe=Ee[0],De=Ee[1],Ae=Object(f.useState)(""),Fe=Ae[0],Ie=Ae[1],ze=Object(f.useState)(""),Le=ze[0],Je=ze[1],Re=Object(f.useState)(""),Me=Re[0],Be=Re[1],Ge=[{title:"No",dataIndex:"num",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:ae.from+c})}}},{title:"No. Tiket",dataIndex:"id",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.full_name})}},sorter:function(e,t){return e.id>t.id}},{title:"Tipe Tiket",dataIndex:"type",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.type_name})}},sorter:function(e,t){return e.type_name.localeCompare(t.type_name)}},{title:"Diajukan Oleh",dataIndex:"requested_by",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.task.creator.name})}}},{title:"Lokasi Problem",dataIndex:"location_id",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.task.location.full_location})}}},{title:"Tanggal Pengajuan",dataIndex:"raised_at",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:t.raised_at})}},sorter:function(e,t){return e.raised_at.localeCompare(t.raised_at)}},{title:"Di-assign Ke",dataIndex:"assignable",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:0===t.task.users.length?Object(h.jsxs)("div",{className:" flex items-center bg-onhold bg-opacity-10",children:[Object(h.jsx)("div",{className:" mr-2",children:Object(h.jsx)(k.ib,{})}),Object(h.jsx)("div",{children:"Belum di-assign"})]}):Object(h.jsx)("div",{children:t.task.users.map((function(e){return e.name})).join(", ")})})}}},{title:"Status",dataIndex:"status",render:function(e,t,c){return{children:Object(h.jsx)(h.Fragment,{children:1===v.data.role?Object(h.jsxs)(h.Fragment,{children:[1===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-overdue bg-opacity-10 text-overdue",children:"Overdue"}),2===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open",children:"Open"}),3===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress",children:"On-Progress"}),4===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onhold bg-opacity-10 text-onhold",children:"On-Hold"}),5===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-completed bg-opacity-10 text-completed",children:"Completed"}),6===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed",children:"Closed"}),7===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-canceled bg-opacity-10 text-canceled",children:"Canceled"})]}):Object(h.jsxs)(h.Fragment,{children:[1===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-onprogress bg-opacity-10 text-onprogress",children:"Dalam Proses"}),2===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-open bg-opacity-10 text-open",children:"Menunggu Staff"}),6===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-closed bg-opacity-10 text-closed",children:"Selesai"}),7===t.status&&Object(h.jsx)("div",{className:"rounded-md h-auto px-3 text-center py-1 bg-canceled bg-opacity-10 text-canceled",children:"Dibatalkan"})]})})}},sorter:function(e,t){return e.status_name.localeCompare(t.status_name)}}];return Object(f.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===v.data.role?"getTicketStatusCounts":"getClientTicketStatusCounts"),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){if(1===v.data.role){var t=[];for(var c in e.data.counts)"total_counts"!==c&&t.push({counts:e.data.counts[c].counts,percentage:e.data.counts[c].percentage,name:c});I(t),W(e.data.sum_ticket)}G(e.data.statuses),J(!1)}))}),[]),Object(f.useEffect)((function(){be(!0),fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===v.data.role?"getTickets":"getClientTickets","?page=").concat(he,"&rows=").concat(pe,"&ticket_id=").concat(_e,"&type_id=").concat(Se,"&from=").concat(Pe,"&to=").concat(Fe,"&location_id=").concat(Le,"&status_id=").concat(Me,"&sort_by=").concat(ve.sort_by,"&sort_type=").concat(ve.sort_type),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){le(e.data),se(e.data.data),ye(e.data.data),be(!1)}))}),[V]),Object(f.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===v.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){de(e.data)}))}),[]),Object(h.jsxs)(O.a,{dataProfile:v,sidemenu:N,tok:_,st:y.a,pathArr:D,children:[Object(h.jsx)("div",{className:"flex flex-col",id:"mainWrapper",children:Object(h.jsxs)("div",{className:" grid grid-cols-10 px-5",children:[1===v.data.role?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"col-span-3 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-3",children:[Object(h.jsx)("div",{className:"flex items-center justify-between mb-4",children:Object(h.jsx)(C.a,{children:"Penyelesaian Tiket"})}),L?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{})}):Object(h.jsxs)("div",{className:" flex flex-col",children:[F.every((function(e){return 0===e.counts}))?Object(h.jsx)("div",{className:" w-full flex items-center justify-center",children:Object(h.jsx)(u.a,{image:u.a.PRESENTED_IMAGE_SIMPLE})}):Object(h.jsx)("div",{className:" w-full flex justify-center",children:Object(h.jsx)(w.b,{data:{labels:F.map((function(e){return e.name})),datasets:[{data:F.map((function(e){return e.counts})),backgroundColor:["#2F80ED","#BF4A40","#ED962F","#E5C471","#6AAA70"],borderColor:["#2F80ED","#BF4A40","#ED962F","#E5C471","#6AAA70"],borderWidth:1}]},options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,cutout:55,spacing:5}})}),Object(h.jsx)("div",{className:"flex flex-col w-full",children:F.map((function(e,t){return Object(h.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("div",{className:"w-1 mr-1 ".concat("three_hours"===e.name&&"bg-open"," ").concat("three_to_twelve_hours"===e.name&&"bg-overdue"," ").concat("twelve_to_thirty_hours"===e.name&&"bg-onprogress"," ").concat("thirty_hours_to_three_days"===e.name&&"bg-onhold"," ").concat("three_days"===e.name&&"bg-completed")}),Object(h.jsxs)(C.e,{children:["three_hours"===e.name&&"Kurang dari 3 jam"," ","three_to_twelve_hours"===e.name&&"3 - 12 jam"," ","twelve_to_thirty_hours"===e.name&&"12 - 30 jam"," ","thirty_hours_to_three_days"===e.name&&"30 jam - 3 hari"," ","three_days"===e.name&&"Lebih dari 3 hari"]})]}),Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)(C.b,{children:e.counts})})]})}))})]})]}),L?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{})}):Object(h.jsxs)("div",{className:"col-span-3 flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:" mb-3 grid grid-cols-2",children:[Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 mb-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#BF4A40"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsxs)("div",{className:" flex items-center justify-end",children:[Object(h.jsx)("p",{className:"mb-0 text-overdue font-semibold text-base mr-1",children:B[0].status_count}),Object(h.jsx)("div",{children:Object(h.jsx)(k.c,{size:15,color:"#BF4A40"})})]}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:B[0].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 mb-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#2F80ED"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-open font-semibold text-base mr-1",children:B[1].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:B[1].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 my-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#ED962F"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-onprogress font-semibold text-base mr-1",children:B[2].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:B[2].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 my-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#E5C471"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-onhold font-semibold text-base mr-1",children:B[3].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:B[3].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1 mt-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#808080"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-closed font-semibold text-base mr-1",children:B[4].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:B[4].status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-1 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2 mt-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#F46780"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-canceled font-semibold text-base mr-1",children:B[5].status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:B[5].status_name})})]})]})]}),Object(h.jsxs)("div",{className:"shadow-md rounded-md bg-white p-5 mx-2 flex justify-between items-center h-full",children:[Object(h.jsx)("div",{children:Object(h.jsx)(C.a,{children:"Total Tiket"})}),Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:" mb-0 text-5xl font-light text-primary100",children:U})})]})]}),Object(h.jsxs)("div",{className:" col-span-4 flex flex-col mb-6",children:[Object(h.jsxs)("div",{className:"shadow-md rounded-md bg-gradient-to-br from-primary100 to-state4 transition ease-in-out hover:from-primary75 cursor-pointer p-5 mx-3 flex items-center mb-2",onClick:function(){q(!0)},children:[Object(h.jsx)("div",{className:" mr-5",children:Object(h.jsx)(k.gb,{size:40,color:"#ffffff"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("p",{className:" mb-1 text-lg text-white font-semibold",children:"Buat Tiket"}),Object(h.jsx)("p",{className:" mb-0 text-sm text-white text-opacity-60",children:g()(new Date).locale("id").format("dddd, LL")})]})]}),Object(h.jsx)("div",{className:"col-span-4 flex flex-col shadow-md rounded-md bg-white p-5 mt-2 mx-3 h-full",children:Object(h.jsxs)("div",{className:"flex flex-col justify-center h-full",children:[Object(h.jsxs)("div",{className:" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2",onClick:function(){te(!0)},children:[Object(h.jsx)("div",{className:"flex p-1 bg-primary10 rounded mr-3",children:Object(h.jsx)(k.eb,{size:35,color:"#35763B"})}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)(C.b,{children:"Expor Tiket"}),Object(h.jsx)(C.c,{children:"Download daftar tiket dalam bentuk spreadsheet/excel"})]})]}),Object(h.jsxs)("div",{className:" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2",onClick:function(){P.push("/tickets/histories")},children:[Object(h.jsx)("div",{className:"flex p-1 bg-primary10 rounded mr-3",children:Object(h.jsx)(k.E,{size:35,color:"#35763B"})}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)(C.b,{children:"Riwayat Tiket"}),Object(h.jsx)(C.c,{children:"Lihat seluruh tiket yang berstatus closed berikut durasi"})]})]}),Object(h.jsxs)("div",{className:" h-2/6 flex items-center mb-4 cursor-pointer hover:bg-backdrop p-2",onClick:function(){P.push("/tickets/tickettypes")},children:[Object(h.jsx)("div",{className:"flex p-1 bg-primary10 rounded mr-3",children:Object(h.jsx)(k.a,{size:35,color:"#35763B"})}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)(C.b,{children:"Atur Tiket"}),Object(h.jsx)(C.c,{children:"Hubungkan tiket dengan task yang akan dijalankan"})]})]})]})})]})]}):Object(h.jsxs)("div",{className:" col-span-10 grid grid-cols-12",children:[Object(h.jsxs)("div",{className:"col-span-8 grid grid-cols-8 mb-6",children:[Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#ED962F"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsxs)("div",{className:" flex items-center justify-end",children:[Object(h.jsx)("p",{className:"mb-0 text-onprogress font-semibold text-base mr-1",children:null===(t=B[0])||void 0===t?void 0:t.status_count}),Object(h.jsx)("div",{children:Object(h.jsx)(k.c,{size:15,color:"#BF4A40"})})]}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:null===(c=B[0])||void 0===c?void 0:c.status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#2F80ED"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-open font-semibold text-base mr-1",children:null===(n=B[1])||void 0===n?void 0:n.status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:null===(i=B[1])||void 0===i?void 0:i.status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-2 mr-1",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#808080"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-closed font-semibold text-base mr-1",children:null===(l=B[2])||void 0===l?void 0:l.status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:null===(o=B[2])||void 0===o?void 0:o.status_name})})]})]}),Object(h.jsxs)("div",{className:" col-span-2 shadow-md rounded-md bg-white p-5 flex justify-between ml-1 mr-2",children:[Object(h.jsx)("div",{children:Object(h.jsx)(k.gb,{size:30,color:"#BF4A40"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("div",{className:" flex items-center justify-end",children:Object(h.jsx)("p",{className:"mb-0 text-overdue font-semibold text-base mr-1",children:null===(j=B[3])||void 0===j?void 0:j.status_count})}),Object(h.jsx)("div",{className:" justify-end flex",children:Object(h.jsx)(C.c,{children:null===(b=B[3])||void 0===b?void 0:b.status_name})})]})]})]}),Object(h.jsxs)("div",{className:"col-span-4 shadow-md rounded-md bg-gradient-to-br from-primary100 to-state4 transition ease-in-out hover:from-primary75 cursor-pointer p-5 mx-3 flex items-center mb-6",onClick:function(){q(!0)},children:[Object(h.jsx)("div",{className:" mr-5",children:Object(h.jsx)(k.gb,{size:40,color:"#ffffff"})}),Object(h.jsxs)("div",{className:" flex flex-col",children:[Object(h.jsx)("p",{className:" mb-1 text-lg text-white font-semibold",children:"Buat Tiket"}),Object(h.jsx)("p",{className:" mb-0 text-sm text-white text-opacity-60",children:g()(new Date).locale("id").format("dddd, LL")})]})]})]}),Object(h.jsxs)("div",{className:"col-span-10 flex flex-col shadow-md rounded-md bg-white p-5 mb-6 mx-2",children:[Object(h.jsx)("div",{className:"flex items-center justify-between mb-4",children:Object(h.jsx)(C.a,{children:"Semua Tiket"})}),Object(h.jsxs)("div",{className:" flex items-center mb-4",children:[Object(h.jsx)("div",{className:"mx-1 w-2/12",children:Object(h.jsx)(d.a,{value:""===_e?null:_e,style:{width:"100%"},placeholder:"Kata Kunci..",allowClear:!0,onChange:function(e){""===e.target.value?we(""):we(e.target.value)}})}),Object(h.jsx)("div",{className:"mx-1 w-2/12",children:Object(h.jsx)(r.a,{value:""===Se?null:Se,placeholder:"Semua Tipe Tiket",style:{width:"100%"},allowClear:!0,name:"task_type",onChange:function(e){Te("undefined"===typeof e?"":e)},children:oe.ticket_types.map((function(e,t){return Object(h.jsx)(r.a.Option,{value:e.id,children:e.name},t)}))})}),Object(h.jsx)("div",{className:" w-3/12 mx-1",children:Object(h.jsx)(a.a.RangePicker,{style:{width:"100%"},allowEmpty:!0,className:"datepickerStatus",value:""===Pe?[null,null]:[g()(Pe),g()(Fe)],onChange:function(e,t){De(t[0]),Ie(t[1])}})}),Object(h.jsx)("div",{className:" mx-1 w-5/12",children:Object(h.jsx)(s.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(h.jsx)(p.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){Je("undefined"===typeof e?"":e)},treeData:[1===v.data.role?oe.companies:oe.companies.data],treeDefaultExpandAll:!0,value:""===Le?null:Le})}),Object(h.jsx)("div",{className:"mx-1 w-2/12",children:Object(h.jsx)(r.a,{value:""===Me?null:Me,placeholder:"Status",style:{width:"100%"},allowClear:!0,name:"status",onChange:function(e,t){Be("undefined"===typeof e?"":e)},children:1===v.data.role?oe.status_ticket.map((function(e,t){return 1===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-overdue"})," ",e.name]})},t):2===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-open"})," ",e.name]})},t):3===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-onprogress"})," ",e.name]})},t):4===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-onhold"})," ",e.name]})},t):5===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-completed"})," ",e.name]})},t):6===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-closed"})," ",e.name]})},t):void 0})):oe.status_ticket.map((function(e,t){return 1===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-onprogress"})," ",e.name]})},t):2===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-open"})," ",e.name]})},t):6===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-closed"})," ",e.name]})},t):7===e.id?Object(h.jsx)(r.a.Option,{value:e.id,children:Object(h.jsxs)("div",{className:" flex items-center",children:[Object(h.jsx)("div",{className:"mr-1 w-3 h-3 rounded-full bg-canceled"})," ",e.name]})},t):void 0}))})}),Object(h.jsx)("div",{className:"mx-1 w-1/12",children:Object(h.jsx)(S.a,{type:"primary",onClick:function(){be(!0),fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===v.data.role?"getTickets":"getClientTickets","?page=").concat(he,"&rows=").concat(pe,"&ticket_id=").concat(_e,"&type_id=").concat(Se,"&from=").concat(Pe,"&to=").concat(Fe,"&location_id=").concat(Le,"&status_id=").concat(Me,"&sort_by=").concat(ve.sort_by,"&sort_type=").concat(ve.sort_type),{method:"GET",headers:{Authorization:JSON.parse(_)}}).then((function(e){return e.json()})).then((function(e){le(e.data),se(e.data.data),ye(e.data.data),be(!1)}))},children:"Cari"})})]}),Object(h.jsx)("div",{children:Object(h.jsx)(T.i,{dataSource:ne,setDataSource:se,columns:Ge,loading:ue,setpraloading:be,pageSize:pe,total:ae.total,initProps:_,setpage:xe,pagefromsearch:he,setdataraw:le,setsorting:ge,sorting:ve,searching:_e,tickettype:Se,fromdate:Pe,todate:Fe,location:Le,status:Me,dataprofile:v})})]})]})}),Object(h.jsx)(E.a,{title:"Tiket Baru",visible:X,onClose:function(){q(!1)},buttonOkText:"Simpan",initProps:_,onvisible:q,refreshtickets:V,setrefreshtickets:$,dataprofile:v}),1===v.data.role&&Object(h.jsx)(R,{title:"Ekspor Tiket",visible:ee,onClose:function(){te(!1)},buttonOkText:"Ekspor Tiket",initProps:_,onvisible:te})]})}},"l+S1":function(e,t,c){"use strict";var n=c("VTBJ"),s=c("q1tI"),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},a=c("6VBw"),l=function(e,t){return s.createElement(a.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))};l.displayName="SearchOutlined";t.a=s.forwardRef(l)},spIA:function(e,t,c){"use strict";var n=c("rmht"),s=c.n(n),i=c("wXtC"),a=c.n(i),l=c("iJl9"),r=c.n(l),o=c("FAat"),d=c.n(o),j=c("nKUr"),u=c("MM9K"),b=c.n(u),m=c("rR1Q"),h=c.n(m),x=c("o0o1"),f=c.n(x),p=c("rePB"),O=c("KQm4"),v=c("HaE+"),g=c("MX0m"),N=c.n(g),y=c("q1tI"),k=c("8mU3"),_=(c("yncA"),c("VXtC")),w=c("T+/+"),C=c("l+S1"),S=c("ye1Q"),T=c("a3/r"),E=c("wd/R"),P=c.n(E);function D(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function A(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?D(Object(c),!0).forEach((function(t){Object(p.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):D(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}t.a=function(e){var t=e.title,c=e.visible,n=e.onvisible,i=(e.onClose,e.buttonOkText),l=(e.disabled,e.initProps),o=(e.refreshtickets,e.setrefreshtickets),u=e.dataprofile,m=Object(y.useState)({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),x=m[0],p=m[1],g=Object(y.useState)(!1),E=g[0],D=g[1],F=Object(y.useState)([]),I=F[0],z=F[1],L=Object(y.useState)([]),J=L[0],R=L[1],M=Object(y.useState)([]),B=M[0],G=M[1],K=Object(y.useState)(!1),U=(K[0],K[1],Object(y.useState)(!1)),W=U[0],Y=U[1],X=Object(y.useState)(!1),q=X[0],H=X[1],Q=Object(y.useState)(!1),V=Q[0],$=Q[1],Z=Object(y.useState)(!0),ee=Z[0],te=Z[1],ce=Object(y.useState)(-1),ne=ce[0],se=ce[1],ie=function(){var e=Object(v.a)(f.a.mark((function e(t){var c,n,s,i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),c=t.target.files,(n=new FormData).append("file",c[0]),n.append("upload_preset","migsys"),e.next=7,fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:n});case 7:return s=e.sent,e.next=10,s.json();case 10:i=e.sent,(a=Object(O.a)(x.files)).push(i.secure_url),p(A(A({},x),{},{files:a})),$(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/".concat(1===u.data.role?"getTicketRelation":"getClientTicketRelation"),{method:"GET",headers:{Authorization:JSON.parse(l)}}).then((function(e){return e.json()})).then((function(e){z(e.data.ticket_types),R(e.data.ticket_task_types),G([1===u.data.role?e.data.companies:e.data.companies.data])}))}),[]),Object(y.useEffect)((function(){null!==x.type_id&&""!==x.name&&null!==x.ticket_task_type_id&&""!==x.product_id&&null!==x.incident_time&&null!==x.location_id?te(!1):te(!0)}),[ne]),Object(j.jsx)(k.a,{title:t,visible:c,onClose:function(){p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),n(!1)},buttonOkText:i,onClick:function(){!1===/(^\d+$)/.test(x.pic_contact)||!1===/(^\d+$)/.test(x.product_id)?""===x.pic_contact?(D(!0),te(!0),fetch("https://boiling-thicket-46501.herokuapp.com/addTicket",{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),D(!1),te(!1),e.success?(p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),n(!1),h.a.success({message:e.message,duration:3})):h.a.error({message:e.message,duration:3})}))):(!1===new RegExp(/(^\d+$)/).test(x.pic_contact)?Y(!0):Y(!1),!1===new RegExp(/(^\d+$)/).test(x.product_id)?H(!0):H(!1),te(!0)):(D(!0),te(!0),fetch("https://boiling-thicket-46501.herokuapp.com/addTicket",{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(e){o((function(e){return e+1})),D(!1),te(!1),e.success?(p({type_id:null,ticket_task_type_id:null,product_id:"",pic_name:"",pic_contact:"",location_id:u.data.company.id,problem:"",incident_time:new Date,files:[],description:""}),n(!1),h.a.success({message:e.message,duration:3})):h.a.error({message:e.message,duration:3})})))},disabled:ee,children:E?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(b.a,{})}):Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("div",{className:"mb-6",children:Object(j.jsx)("p",{className:"mb-0 text-red-500 text-xs italic",children:"*Informasi ini harus diisi"})}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-3689135148 flex mb-2",children:[Object(j.jsx)(w.c,{children:"Tipe Tiket"}),Object(j.jsx)("span",{className:"jsx-3689135148 tickettypes"}),Object(j.jsx)(N.a,{id:"3689135148",children:[".tickettypes.jsx-3689135148::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){p(A(A({},x),{},{type_id:e})),se((function(e){return e+1}))},value:x.type_id,children:I.map((function(e,t){return Object(j.jsx)(d.a.Option,{value:e.id,children:e.name})}))})})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-2641960267 flex mb-2",children:[Object(j.jsx)(w.c,{children:"Jenis Aset"}),Object(j.jsx)("span",{className:"jsx-2641960267 tickettask"}),Object(j.jsx)(N.a,{id:"2641960267",children:[".tickettask.jsx-2641960267::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(d.a,{style:{width:"100%"},onChange:function(e,t){p(A(A({},x),{},{ticket_task_type_id:e})),se((function(e){return e+1}))},value:x.ticket_task_type_id,children:J.map((function(e,t){return Object(j.jsx)(d.a.Option,{value:e.id,children:e.name})}))})})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsxs)("div",{className:"jsx-4263238570 flex mb-2",children:[Object(j.jsx)(w.c,{children:"ID Produk"}),Object(j.jsx)("span",{className:"jsx-4263238570 idproduk"}),Object(j.jsx)(N.a,{id:"4263238570",children:[".idproduk.jsx-4263238570::before{content:'*';color:red;}"]})]}),Object(j.jsx)(r.a,{value:x.product_id,onChange:function(e){p(A(A({},x),{},{product_id:e.target.value})),se((function(e){return e+1}))}}),q&&Object(j.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"ID Produk harus angka"})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-2493184868 flex mb-2",children:[Object(j.jsx)(w.c,{children:"Waktu Kejadian"}),Object(j.jsx)("span",{className:"jsx-2493184868 timeincident"}),Object(j.jsx)(N.a,{id:"2493184868",children:[".timeincident.jsx-2493184868::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(a.a,{style:{width:"100%"},showTime:!0,allowClear:!0,className:"datepickerStatus",value:null===x.incident_time?null:P()(x.incident_time),onChange:function(e,t){p(A(A({},x),{},{incident_time:""===t?null:t})),se((function(e){return e+1}))}})})]}),Object(j.jsxs)("div",{className:"flex flex-col mb-6",children:[Object(j.jsxs)("div",{className:"jsx-1976207010 flex mb-2",children:[Object(j.jsx)(w.c,{children:"Lokasi Kejadian"}),Object(j.jsx)("span",{className:"jsx-1976207010 locincident"}),Object(j.jsx)(N.a,{id:"1976207010",children:[".locincident.jsx-1976207010::before{content:'*';color:red;}"]})]}),Object(j.jsx)("div",{className:" mb-2 flex",children:Object(j.jsx)(s.a,{style:{width:"100%"},allowClear:!0,placeholder:"Semua Lokasi",showSearch:!0,suffixIcon:Object(j.jsx)(C.a,{}),showArrow:!0,name:"locations_id",onChange:function(e){p(A(A({},x),{},"undefined"===typeof e?{location_id:null}:{location_id:e})),se((function(e){return e+1}))},treeData:B,treeDefaultExpandAll:!0,value:x.location_id})})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(w.c,{children:"PIC"})}),Object(j.jsx)(r.a,{value:x.pic_name,onChange:function(e){p(A(A({},x),{},{pic_name:e.target.value}))}})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(w.c,{children:"Kontak PIC"})}),Object(j.jsx)(r.a,{value:x.pic_contact,onChange:function(e){p(A(A({},x),{},{pic_contact:e.target.value})),se((function(e){return e+1}))}}),W&&Object(j.jsx)("p",{className:" text-red-500 text-sm mb-0",children:"Kontak PIC harus angka"})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(w.c,{children:"Deskripsi Masalah"})}),Object(j.jsx)(r.a.TextArea,{rows:5,value:x.description,onChange:function(e){p(A(A({},x),{},{description:e.target.value}))}})]}),Object(j.jsxs)("div",{className:" mb-6 flex flex-col",children:[Object(j.jsx)("div",{className:"flex mb-2",children:Object(j.jsx)(w.c,{children:"Bukti Kejadian"})}),Object(j.jsxs)("div",{className:" flex justify-between items-center mb-2",children:[Object(j.jsx)("div",{children:Object(j.jsx)(w.c,{children:"Unggah JPG/MP4 (Maks. 5 MB)"})}),Object(j.jsx)("div",{children:Object(j.jsxs)(T.a,{type:"primaryInput",onChangeGambar:ie,children:[V?Object(j.jsx)(S.a,{style:{marginRight:"0.5rem"}}):Object(j.jsx)("div",{className:"mr-1",children:Object(j.jsx)(_.r,{size:15,color:"#ffffff"})}),"Unggah File"]})})]}),Object(j.jsx)("div",{className:"grid grid-cols-3",children:x.files.map((function(e,t){return Object(j.jsxs)("div",{className:" col-span-1 mx-1 flex flex-col items-center mb-2",children:[Object(j.jsx)("img",{src:e,className:" object-contain mb-1 h-28 w-full",alt:""}),Object(j.jsx)("div",{className:" cursor-pointer",onClick:function(){var e=Object(O.a)(x.files);e.splice(t,1),p((function(t){return A(A({},t),{},{files:e})}))},children:Object(j.jsx)(_.hb,{size:15,color:"#BF4A40"})})]})}))})]})]})})}},vy9S:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets",function(){return c("DboY")}])},ye1Q:function(e,t,c){"use strict";var n=c("VTBJ"),s=c("q1tI"),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},a=c("6VBw"),l=function(e,t){return s.createElement(a.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))};l.displayName="LoadingOutlined";t.a=s.forwardRef(l)}},[["vy9S",0,2,18,29,1,3,4,5,6,7,8,9,11,13,17,16,19,20,21,23,24,25,35]]]);