_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[84],{FAat:function(e,t,a){"use strict";var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("lSNA")),o=n(a("pVnL")),s=j(a("q1tI")),l=n(a("+04X")),c=n(a("TSYQ")),d=j(a("LdHM")),u=a("vgIT"),p=n(a("xcGM")),m=n(a("fVhf")),f=a("StrI");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}var h=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},O="SECRET_COMBOBOX_MODE_DO_NOT_USE",g=function(e,t){var a,n,r=e.prefixCls,b=e.bordered,j=void 0===b||b,g=e.className,v=e.getPopupContainer,w=e.dropdownClassName,x=e.listHeight,y=void 0===x?256:x,_=e.listItemHeight,P=void 0===_?24:_,C=e.size,N=e.notFoundContent,S=h(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","listHeight","listItemHeight","size","notFoundContent"]),k=s.useContext(u.ConfigContext),q=k.getPopupContainer,I=k.getPrefixCls,E=k.renderEmpty,M=k.direction,T=k.virtual,A=k.dropdownMatchSelectWidth,R=s.useContext(m.default),D=I("select",r),F=I(),z=s.useMemo((function(){var e=S.mode;if("combobox"!==e)return e===O?"combobox":e}),[S.mode]),H="multiple"===z||"tags"===z;n=void 0!==N?N:"combobox"===z?null:E("Select");var B=(0,p.default)((0,o.default)((0,o.default)({},S),{multiple:H,prefixCls:D})),L=B.suffixIcon,J=B.itemIcon,G=B.removeIcon,W=B.clearIcon,U=(0,l.default)(S,["suffixIcon","itemIcon"]),X=(0,c.default)(w,(0,i.default)({},"".concat(D,"-dropdown-").concat(M),"rtl"===M)),K=C||R,V=(0,c.default)((a={},(0,i.default)(a,"".concat(D,"-lg"),"large"===K),(0,i.default)(a,"".concat(D,"-sm"),"small"===K),(0,i.default)(a,"".concat(D,"-rtl"),"rtl"===M),(0,i.default)(a,"".concat(D,"-borderless"),!j),a),g);return s.createElement(d.default,(0,o.default)({ref:t,virtual:T,dropdownMatchSelectWidth:A},U,{transitionName:(0,f.getTransitionName)(F,"slide-up",S.transitionName),listHeight:y,listItemHeight:P,mode:z,prefixCls:D,direction:M,inputIcon:L,menuItemSelectedIcon:J,removeIcon:G,clearIcon:W,notFoundContent:n,className:V,getPopupContainer:v||q,dropdownClassName:X}))},v=s.forwardRef(g);v.SECRET_COMBOBOX_MODE_DO_NOT_USE=O,v.Option=d.Option,v.OptGroup=d.OptGroup;var w=v;t.default=w},SRve:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"}},evIE:function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return A}));var n=a("FAat"),r=a.n(n),i=a("nKUr"),o=a("iJl9"),s=a.n(o),l=a("rmht"),c=a.n(l),d=a("B8+X"),u=a.n(d),p=a("4IMT"),m=a.n(p),f=a("vJKn"),b=a.n(f),j=a("rg98"),h=a("cpVT"),O=a("rR1Q"),g=a.n(O),v=a("qu0K"),w=a.n(v),x=a("xvhg"),y=a("gZBC"),_=a.n(y),P=a("fNCr"),C=a.n(P),N=(a("YFqc"),a("20a2")),S=a("q1tI"),k=a("vgPz"),q=a("p/jd"),I=a("qe3g"),E=a.n(I);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=!0;t.default=function(e){var t=e.initProps,a=e.dataProfile,n=e.sidemenu,o=(e.dataCompanyList,Object(N.useRouter)()),l=t,d=o.pathname.split("/").slice(1);d[d.length-1]="Create";var p=w.a.useForm(),f=Object(x.a)(p,1)[0],O=Object(S.useState)({fullname:"",email:"",role_ids:[],phone_number:"",profile_image:"",company_id:0,password:"",confirm_password:"",position:""}),v=O[0],y=O[1],P=Object(S.useState)(!1),I=P[0],M=P[1],A=Object(S.useState)(!1),R=A[0],D=A[1],F=Object(S.useState)([]),z=F[0],H=F[1],B=Object(S.useState)([]),L=B[0],J=B[1],G=Object(S.useState)(!0),W=G[0],U=G[1],X=function(e){y(T(T({},v),{},Object(h.a)({},e.target.name,e.target.value)))},K=function(){var e=Object(j.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("uploading"!==t.file.status){e.next=3;break}return M(!0),e.abrupt("return");case 3:if("done"!==t.file.status){e.next=9;break}return console.log("isi upload: "+t.file.originFileObj.name),(a=new FormData).append("file",t.file.originFileObj),a.append("upload_preset","migsys"),e.abrupt("return",fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){y(T(T({},v),{},{profile_image:e.secure_url}))})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(i.jsxs)("div",{children:[I?Object(i.jsx)(_.a,{}):Object(i.jsx)(C.a,{}),Object(i.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(S.useEffect)((function(){fetch("".concat("https://boiling-thicket-46501.herokuapp.com","/getClientCompanyList"),{method:"GET",headers:{Authorization:JSON.parse(t),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){H(e.data.children),U(!1)}))}),[]),Object(S.useEffect)((function(){fetch("".concat("https://boiling-thicket-46501.herokuapp.com","/getRoles"),{method:"GET",headers:{Authorization:JSON.parse(t)}}).then((function(e){return e.json()})).then((function(e){J(e.data)}))}),[]),Object(i.jsx)(q.a,{tok:l,dataProfile:a,pathArr:d,sidemenu:n,st:E.a,children:Object(i.jsxs)("div",{className:"w-full h-auto grid grid-cols-1 md:grid-cols-4",id:"createAgentsWrapper",children:[Object(i.jsx)("div",{className:"col-span-1 md:col-span-4",children:Object(i.jsx)(k.a,{containerSelectorFocus:"#createAgentsWrapper",children:Object(i.jsxs)("div",{className:"flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white mb-8",children:[Object(i.jsx)("h1",{className:"font-semibold py-2",children:"Buat Akun Requester"}),Object(i.jsxs)("div",{className:"flex space-x-2",children:[Object(i.jsx)(m.a,{disabled:W,onClick:function(){o.push("/admin/requesters")},type:"default",children:"Batal"}),Object(i.jsx)(m.a,{disabled:W,loading:R,onClick:f.submit,type:"primary",children:"Simpan"})]})]})})}),Object(i.jsx)("div",{className:"col-span-1 md:col-span-3 flex flex-col",children:Object(i.jsxs)("div",{className:"shadow-lg flex flex-col rounded-md w-full h-auto p-4 mb-14",children:[Object(i.jsxs)("div",{className:"border-b border-black p-4 font-semibold mb-5",children:["Akun Requester - ",v.fullname]}),Object(i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4",children:[Object(i.jsx)("div",{className:"p-3 col-span-1 md:col-span-1",children:Object(i.jsx)(u.a,{name:"profile_image",listType:"picture-card",className:"profileImage",showUploadList:!1,beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type;t||message.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||message.error("Image must smaller than 2MB!"),t&&a},onChange:K,children:v.profile_image?Object(i.jsx)("img",{src:v.profile_image,alt:"avatar",style:{width:"100%"}}):V})}),Object(i.jsx)("div",{className:"p-3 col-span-1 md:col-span-3",children:Object(i.jsxs)(w.a,{layout:"vertical",className:"createAgentsForm",onFinish:function(){D(!0),fetch("".concat("https://boiling-thicket-46501.herokuapp.com","/addRequesterMember"),{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(v)}).then((function(e){return e.json()})).then((function(e){D(!1),e.success?(g.a.success({message:e.message,duration:3}),setTimeout((function(){o.push("/admin/requesters/detail/".concat(e.id))}),1e3)):e.success||g.a.error({message:e.message,duration:3})})),console.log("isi new user: "+v.profile_image)},form:f,children:[Object(i.jsx)(w.a.Item,{label:"Asal Lokasi",name:"company_id",rules:[{required:!0,message:"Asal Lokasi wajib diisi"}],children:Object(i.jsx)(c.a,{allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:z,placeholder:"Pilih Asal Lokasi",treeDefaultExpandAll:!0,onChange:function(e){y(T(T({},v),{},{company_id:e}))}})}),Object(i.jsx)(w.a.Item,{label:"Nama Lengkap",required:!0,name:"fullname",rules:[{required:!0,message:"Nama Lengkap wajib diisi"}],children:Object(i.jsx)(s.a,{value:v.fullname,name:"fullname",onChange:X})}),Object(i.jsx)(w.a.Item,{label:"Email",required:!0,name:"email",rules:[{required:!0,message:"Email wajib diisi"},{pattern:/(\-)|(^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/,message:"Email belum diisi dengan benar"}],children:Object(i.jsx)(s.a,{value:v.email,name:"email",onChange:X})}),Object(i.jsx)(w.a.Item,{label:"Posisi",required:!0,name:"position",rules:[{required:!0,message:"Posisi wajib diisi"}],children:Object(i.jsx)(s.a,{value:v.position,name:"position",onChange:X})}),Object(i.jsx)(w.a.Item,{label:"No. Handphone",name:"phone_number",rules:[{required:!0,message:"No. Handphone wajib diisi"},{pattern:/(\-)|(^\d*$)/,message:"No. Handphone harus berisi angka"}],children:Object(i.jsx)(s.a,{value:v.phone_number,name:"phone_number",onChange:X})}),Object(i.jsx)(w.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password wajib diisi"},{pattern:/([A-z0-9]{8})/,message:"Password minimal 8 karakter"}],children:Object(i.jsx)(s.a.Password,{value:v.password,name:"password",onChange:X})}),Object(i.jsx)(w.a.Item,{label:"Konfirmasi Password",name:"password",rules:[{required:!0,message:"Confirm Password wajib diisi"},{pattern:/([A-z0-9]{8})/,message:"Confirm Password minimal 8 karakter"}],children:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(s.a.Password,{value:v.confirm_password,name:"confirm_password",onChange:X}),v.password!==v.confirm_password&&Object(i.jsx)("p",{className:" text-red-500 mb-0",children:"Confirm Password harus sesuai dengan password"})]})}),Object(i.jsx)(w.a.Item,{label:"Role",name:"role",children:Object(i.jsx)(r.a,{mode:"multiple",onChange:function(e){y(T(T({},v),{},{role_ids:e}))},style:{width:"100%"},children:L.map((function(e,t){return Object(i.jsx)(r.a.Option,{value:e.id,children:e.name},e.id)}))})})]})})]})]})})]})})}},fNCr:function(e,t,a){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=a("tSko"))&&n.__esModule?n:{default:n};t.default=r,e.exports=r},kOdi:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/requesters/create",function(){return a("evIE")}])},rg98:function(e,t,a){"use strict";function n(e,t,a,n,r,i,o){try{var s=e[i](o),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var o=e.apply(t,a);function s(e){n(o,r,i,s,l,"next",e)}function l(e){n(o,r,i,s,l,"throw",e)}s(void 0)}))}}a.d(t,"a",(function(){return r}))},tSko:function(e,t,a){"use strict";var n=a("284h"),r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a("3tO9")),o=n(a("q1tI")),s=r(a("SRve")),l=r(a("KQxl")),c=function(e,t){return o.createElement(l.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:s.default}))};c.displayName="PlusOutlined";var d=o.forwardRef(c);t.default=d}},[["kOdi",0,2,1,3,4,5,6,7,9,10,11,13,18,29,37]]]);