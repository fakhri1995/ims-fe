_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[85],{SRve:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"}},fNCr:function(e,a,t){"use strict";var s;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=(s=t("tSko"))&&s.__esModule?s:{default:s};a.default=n,e.exports=n},kOdi:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/requesters/create",function(){return t("pLXC")}])},pLXC:function(e,a,t){"use strict";t.r(a),t.d(a,"__N_SSP",(function(){return z}));var s=t("FAat"),n=t.n(s),r=t("nKUr"),i=t("iJl9"),o=t.n(i),l=t("rmht"),c=t.n(l),d=t("B8+X"),u=t.n(d),m=t("4IMT"),p=t.n(m),b=t("o0o1"),j=t.n(b),f=t("HaE+"),h=t("rePB"),g=t("rR1Q"),O=t.n(g),w=t("qu0K"),x=t.n(w),v=t("ODXe"),_=t("Nfnr"),y=t("20a2"),P=t("gZBC"),N=t.n(P),k=t("fNCr"),q=t.n(k),C=t("vgPz"),S=(t("YFqc"),t("q1tI")),A=t("g6Xq"),E=t.n(A);function I(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,s)}return t}function T(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?I(Object(t),!0).forEach((function(a){Object(h.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var z=!0;a.default=function(e){var a=e.initProps,t=e.dataProfile,s=e.sidemenu,i=(e.dataCompanyList,Object(y.useRouter)()),l=a,d=i.pathname.split("/").slice(1);d[d.length-1]="Create";var m=x.a.useForm(),b=Object(v.a)(m,1)[0],g=Object(S.useState)({fullname:"",email:"",role_ids:[],phone_number:"",profile_image:"",company_id:0,password:"",confirm_password:"",position:""}),w=g[0],P=g[1],k=Object(S.useState)(!1),A=k[0],I=k[1],z=Object(S.useState)(!1),R=z[0],F=z[1],L=Object(S.useState)([]),M=L[0],D=L[1],J=Object(S.useState)([]),B=J[0],X=J[1],H=Object(S.useState)(!0),G=H[0],K=H[1],U=function(e){P(T(T({},w),{},Object(h.a)({},e.target.name,e.target.value)))},Z=function(){var e=Object(f.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("uploading"!==a.file.status){e.next=3;break}return I(!0),e.abrupt("return");case 3:if("done"!==a.file.status){e.next=9;break}return console.log("isi upload: "+a.file.originFileObj.name),(t=new FormData).append("file",a.file.originFileObj),t.append("upload_preset","migsys"),e.abrupt("return",fetch("https://api.Cloudinary.com/v1_1/aqlpeduli/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){P(T(T({},w),{},{profile_image:e.secure_url}))})));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Q=Object(r.jsxs)("div",{children:[A?Object(r.jsx)(N.a,{}):Object(r.jsx)(q.a,{}),Object(r.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(S.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getLocations",{method:"GET",headers:{Authorization:JSON.parse(a),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){D(e.data.children),K(!1)}))}),[]),Object(S.useEffect)((function(){fetch("https://boiling-thicket-46501.herokuapp.com/getRoles",{method:"GET",headers:{Authorization:JSON.parse(a)}}).then((function(e){return e.json()})).then((function(e){X(e.data)}))}),[]),Object(r.jsx)(_.a,{tok:l,dataProfile:t,pathArr:d,sidemenu:s,st:E.a,children:Object(r.jsxs)("div",{className:"w-full h-auto grid grid-cols-1 md:grid-cols-4",id:"createAgentsWrapper",children:[Object(r.jsx)("div",{className:"col-span-1 md:col-span-4",children:Object(r.jsx)(C.a,{containerSelectorFocus:"#createAgentsWrapper",children:Object(r.jsxs)("div",{className:"flex justify-between p-2 pt-4 border-t-2 border-b-2 bg-white mb-8",children:[Object(r.jsx)("h1",{className:"font-semibold py-2",children:"Buat Akun Requester"}),Object(r.jsxs)("div",{className:"flex space-x-2",children:[Object(r.jsx)(p.a,{disabled:G,onClick:function(){i.push("/admin/requesters")},type:"default",children:"Batal"}),Object(r.jsx)(p.a,{disabled:G,loading:R,onClick:b.submit,type:"primary",children:"Simpan"})]})]})})}),Object(r.jsx)("div",{className:"col-span-1 md:col-span-3 flex flex-col",children:Object(r.jsxs)("div",{className:"shadow-lg flex flex-col rounded-md w-full h-auto p-4 mb-14",children:[Object(r.jsxs)("div",{className:"border-b border-black p-4 font-semibold mb-5",children:["Akun Requester - ",w.fullname]}),Object(r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4",children:[Object(r.jsx)("div",{className:"p-3 col-span-1 md:col-span-1",children:Object(r.jsx)(u.a,{name:"profile_image",listType:"picture-card",className:"profileImage",showUploadList:!1,beforeUpload:function(e){var a="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type;a||message.error("You can only upload JPG/PNG file!");var t=e.size/1024/1024<2;return t||message.error("Image must smaller than 2MB!"),a&&t},onChange:Z,children:w.profile_image?Object(r.jsx)("img",{src:w.profile_image,alt:"avatar",style:{width:"100%"}}):Q})}),Object(r.jsx)("div",{className:"p-3 col-span-1 md:col-span-3",children:Object(r.jsxs)(x.a,{layout:"vertical",className:"createAgentsForm",onFinish:function(){F(!0),fetch("https://boiling-thicket-46501.herokuapp.com/addRequesterMember",{method:"POST",headers:{Authorization:JSON.parse(l),"Content-Type":"application/json"},body:JSON.stringify(w)}).then((function(e){return e.json()})).then((function(e){F(!1),e.success?(O.a.success({message:e.message,duration:3}),setTimeout((function(){i.push("/admin/requesters/detail/".concat(e.id))}),1e3)):e.success||O.a.error({message:e.message,duration:3})})),console.log("isi new user: "+w.profile_image)},form:b,children:[Object(r.jsx)(x.a.Item,{label:"Asal Lokasi",name:"company_id",rules:[{required:!0,message:"Asal Lokasi wajib diisi"}],children:Object(r.jsx)(c.a,{allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:M,placeholder:"Pilih Asal Lokasi",treeDefaultExpandAll:!0,onChange:function(e){P(T(T({},w),{},{company_id:e}))}})}),Object(r.jsx)(x.a.Item,{label:"Nama Lengkap",required:!0,name:"fullname",rules:[{required:!0,message:"Nama Lengkap wajib diisi"}],children:Object(r.jsx)(o.a,{value:w.fullname,name:"fullname",onChange:U})}),Object(r.jsx)(x.a.Item,{label:"Email",required:!0,name:"email",rules:[{required:!0,message:"Email wajib diisi"},{pattern:/(\-)|(^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/,message:"Email belum diisi dengan benar"}],children:Object(r.jsx)(o.a,{value:w.email,name:"email",onChange:U})}),Object(r.jsx)(x.a.Item,{label:"Posisi",required:!0,name:"position",rules:[{required:!0,message:"Posisi wajib diisi"}],children:Object(r.jsx)(o.a,{value:w.position,name:"position",onChange:U})}),Object(r.jsx)(x.a.Item,{label:"No. Handphone",name:"phone_number",rules:[{required:!0,message:"No. Handphone wajib diisi"},{pattern:/(\-)|(^\d*$)/,message:"No. Handphone harus berisi angka"}],children:Object(r.jsx)(o.a,{value:w.phone_number,name:"phone_number",onChange:U})}),Object(r.jsx)(x.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password wajib diisi"},{pattern:/([A-z0-9]{8})/,message:"Password minimal 8 karakter"}],children:Object(r.jsx)(o.a.Password,{value:w.password,name:"password",onChange:U})}),Object(r.jsx)(x.a.Item,{label:"Konfirmasi Password",name:"password",rules:[{required:!0,message:"Confirm Password wajib diisi"},{pattern:/([A-z0-9]{8})/,message:"Confirm Password minimal 8 karakter"}],children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.a.Password,{value:w.confirm_password,name:"confirm_password",onChange:U}),w.password!==w.confirm_password&&Object(r.jsx)("p",{className:" text-red-500 mb-0",children:"Confirm Password harus sesuai dengan password"})]})}),Object(r.jsx)(x.a.Item,{label:"Role",name:"role",children:Object(r.jsx)(n.a,{mode:"multiple",onChange:function(e){P(T(T({},w),{},{role_ids:e}))},style:{width:"100%"},children:B.map((function(e,a){return Object(r.jsx)(n.a.Option,{value:e.id,children:e.name},e.id)}))})})]})})]})]})})]})})}},tSko:function(e,a,t){"use strict";var s=t("284h"),n=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t("3tO9")),i=s(t("q1tI")),o=n(t("SRve")),l=n(t("KQxl")),c=function(e,a){return i.createElement(l.default,(0,r.default)((0,r.default)({},e),{},{ref:a,icon:o.default}))};c.displayName="PlusOutlined";var d=i.forwardRef(c);a.default=d}},[["kOdi",0,2,1,3,4,5,6,7,8,9,10,12,16,30,38]]]);